function pd(Po,uc){for(var Pl=0;Pl<uc.length;Pl++){const Ss=uc[Pl];if(typeof Ss!="string"&&!Array.isArray(Ss)){for(const Ya in Ss)if(Ya!=="default"&&!(Ya in Po)){const $=Object.getOwnPropertyDescriptor(Ss,Ya);$&&Object.defineProperty(Po,Ya,$.get?$:{enumerable:!0,get:()=>Ss[Ya]})}}}return Object.freeze(Object.defineProperty(Po,Symbol.toStringTag,{value:"Module"}))}function dd(Po){return Po&&Po.__esModule&&Object.prototype.hasOwnProperty.call(Po,"default")?Po.default:Po}var lc={},gd={get exports(){return lc},set exports(Po){lc=Po}};(function(Po,uc){/*! For license information please see plotly.min.js.LICENSE.txt */(function(Pl,Ss){Po.exports=Ss()})(self,function(){return function(){var Pl={98847:function($,R,e){var A=e(71828),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var l in k){var T=l.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");A.addStyleRule(T,k[l])}},98222:function($,R,e){$.exports=e(82887)},27206:function($,R,e){$.exports=e(60822)},59893:function($,R,e){$.exports=e(23381)},5224:function($,R,e){$.exports=e(83832)},59509:function($,R,e){$.exports=e(72201)},75557:function($,R,e){$.exports=e(91815)},40338:function($,R,e){$.exports=e(21462)},35080:function($,R,e){$.exports=e(51319)},61396:function($,R,e){$.exports=e(57516)},40549:function($,R,e){$.exports=e(98128)},49866:function($,R,e){$.exports=e(99442)},36089:function($,R,e){$.exports=e(93740)},19548:function($,R,e){$.exports=e(8729)},35831:function($,R,e){$.exports=e(93814)},61039:function($,R,e){$.exports=e(14382)},97040:function($,R,e){$.exports=e(51759)},77986:function($,R,e){$.exports=e(10421)},24296:function($,R,e){$.exports=e(43102)},58872:function($,R,e){$.exports=e(92165)},29626:function($,R,e){$.exports=e(3325)},65591:function($,R,e){$.exports=e(36071)},69738:function($,R,e){$.exports=e(43905)},92650:function($,R,e){$.exports=e(35902)},35630:function($,R,e){$.exports=e(69816)},73434:function($,R,e){$.exports=e(94507)},27909:function($,R,e){var A=e(19548);A.register([e(27206),e(5224),e(58872),e(65591),e(69738),e(92650),e(49866),e(25743),e(6197),e(97040),e(85461),e(73434),e(54201),e(81299),e(47645),e(35630),e(77986),e(83043),e(93005),e(96881),e(4534),e(50581),e(40549),e(77900),e(47582),e(35080),e(21641),e(17280),e(5861),e(29626),e(10021),e(65317),e(96268),e(61396),e(35831),e(16122),e(46163),e(40344),e(40338),e(48131),e(36089),e(55334),e(75557),e(19440),e(99488),e(59893),e(97393),e(98222),e(61039),e(24296),e(66398),e(59509)]),$.exports=A},46163:function($,R,e){$.exports=e(15154)},96881:function($,R,e){$.exports=e(64943)},50581:function($,R,e){$.exports=e(21164)},55334:function($,R,e){$.exports=e(54186)},65317:function($,R,e){$.exports=e(94873)},10021:function($,R,e){$.exports=e(67618)},54201:function($,R,e){$.exports=e(58810)},5861:function($,R,e){$.exports=e(20593)},16122:function($,R,e){$.exports=e(29396)},83043:function($,R,e){$.exports=e(13551)},48131:function($,R,e){$.exports=e(46858)},47582:function($,R,e){$.exports=e(17988)},21641:function($,R,e){$.exports=e(68868)},96268:function($,R,e){$.exports=e(20467)},19440:function($,R,e){$.exports=e(91271)},99488:function($,R,e){$.exports=e(21461)},97393:function($,R,e){$.exports=e(85956)},25743:function($,R,e){$.exports=e(52979)},66398:function($,R,e){$.exports=e(32275)},17280:function($,R,e){$.exports=e(6419)},77900:function($,R,e){$.exports=e(61510)},81299:function($,R,e){$.exports=e(87619)},93005:function($,R,e){$.exports=e(93601)},40344:function($,R,e){$.exports=e(96595)},47645:function($,R,e){$.exports=e(70954)},6197:function($,R,e){$.exports=e(47462)},4534:function($,R,e){$.exports=e(17659)},85461:function($,R,e){$.exports=e(19990)},82884:function($){$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function($,R,e){var A=e(82884),k=e(41940),l=e(85555),T=e(44467).templatedArray;e(24695),$.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:A.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:A.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function($,R,e){var A=e(71828),k=e(89298),l=e(92605).draw;function T(d){var s=d._fullLayout;A.filterVisible(s.annotations).forEach(function(t){var o=k.getFromId(d,t.xref),r=k.getFromId(d,t.yref),n=k.getRefType(t.xref),a=k.getRefType(t.yref);t._extremes={},n==="range"&&x(t,o),a==="range"&&x(t,r)})}function x(d,s){var t,o=s._id,r=o.charAt(0),n=d[r],a=d["a"+r],i=d[r+"ref"],c=d["a"+r+"ref"],h=d["_"+r+"padplus"],f=d["_"+r+"padminus"],b={x:1,y:-1}[r]*d[r+"shift"],v=3*d.arrowsize*d.arrowwidth||0,g=v+b,y=v-b,p=3*d.startarrowsize*d.arrowwidth||0,m=p+b,w=p-b;if(c===i){var u=k.findExtremes(s,[s.r2c(n)],{ppadplus:g,ppadminus:y}),S=k.findExtremes(s,[s.r2c(a)],{ppadplus:Math.max(h,m),ppadminus:Math.max(f,w)});t={min:[u.min[0],S.min[0]],max:[u.max[0],S.max[0]]}}else m=a?m+a:m,w=a?w-a:w,t=k.findExtremes(s,[s.r2c(n)],{ppadplus:Math.max(h,g,m),ppadminus:Math.max(f,y,w)});d._extremes[o]=t}$.exports=function(d){var s=d._fullLayout;if(A.filterVisible(s.annotations).length&&d._fullData.length)return A.syncOrAsync([l,T],d)}},44317:function($,R,e){var A=e(71828),k=e(73972),l=e(44467).arrayEditor;function T(d,s){var t,o,r,n,a,i,c,h=d._fullLayout.annotations,f=[],b=[],v=[],g=(s||[]).length;for(t=0;t<h.length;t++)if(n=(r=h[t]).clicktoshow){for(o=0;o<g;o++)if(i=(a=s[o]).xaxis,c=a.yaxis,i._id===r.xref&&c._id===r.yref&&i.d2r(a.x)===x(r._xclick,i)&&c.d2r(a.y)===x(r._yclick,c)){(r.visible?n==="onout"?b:v:f).push(t);break}o===g&&r.visible&&n==="onout"&&b.push(t)}return{on:f,off:b,explicitOff:v}}function x(d,s){return s.type==="log"?s.l2r(d):s.d2r(d)}$.exports={hasClickToShow:function(d,s){var t=T(d,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(d,s){var t,o,r=T(d,s),n=r.on,a=r.off.concat(r.explicitOff),i={},c=d._fullLayout.annotations;if(n.length||a.length){for(t=0;t<n.length;t++)(o=l(d.layout,"annotations",c[n[t]])).modifyItem("visible",!0),A.extendFlat(i,o.getUpdateObj());for(t=0;t<a.length;t++)(o=l(d.layout,"annotations",c[a[t]])).modifyItem("visible",!1),A.extendFlat(i,o.getUpdateObj());return k.call("update",d,{},i)}}}},25625:function($,R,e){var A=e(71828),k=e(7901);$.exports=function(l,T,x,d){d("opacity");var s=d("bgcolor"),t=d("bordercolor"),o=k.opacity(t);d("borderpad");var r=d("borderwidth"),n=d("showarrow");if(d("text",n?" ":x._dfltTitle.annotation),d("textangle"),A.coerceFont(d,"font",x.font),d("width"),d("align"),d("height")&&d("valign"),n){var a,i,c=d("arrowside");c.indexOf("end")!==-1&&(a=d("arrowhead"),i=d("arrowsize")),c.indexOf("start")!==-1&&(d("startarrowhead",a),d("startarrowsize",i)),d("arrowcolor",o?T.bordercolor:k.defaultLine),d("arrowwidth",2*(o&&r||1)),d("standoff"),d("startstandoff")}var h=d("hovertext"),f=x.hoverlabel||{};if(h){var b=d("hoverlabel.bgcolor",f.bgcolor||(k.opacity(s)?k.rgb(s):k.defaultLine)),v=d("hoverlabel.bordercolor",f.bordercolor||k.contrast(b));A.coerceFont(d,"hoverlabel.font",{family:f.font.family,size:f.font.size,color:f.font.color||v})}d("captureevents",!!h)}},94128:function($,R,e){var A=e(92770),k=e(58163);$.exports=function(l,T,x,d){T=T||{};var s=x==="log"&&T.type==="linear",t=x==="linear"&&T.type==="log";if(s||t)for(var o,r,n=l._fullLayout.annotations,a=T._id.charAt(0),i=0;i<n.length;i++)o=n[i],r="annotations["+i+"].",o[a+"ref"]===T._id&&c(a),o["a"+a+"ref"]===T._id&&c("a"+a);function c(h){var f=o[h],b=null;b=s?k(f,T.range):Math.pow(10,f),A(b)||(b=null),d(r+h,b)}}},84046:function($,R,e){var A=e(71828),k=e(89298),l=e(85501),T=e(25625),x=e(50215);function d(s,t,o){function r(S,_){return A.coerce(s,t,x,S,_)}var n=r("visible"),a=r("clicktoshow");if(n||a){T(s,t,o,r);for(var i=t.showarrow,c=["x","y"],h=[-10,-30],f={_fullLayout:o},b=0;b<2;b++){var v=c[b],g=k.coerceRef(s,t,f,v,"","paper");if(g!=="paper"&&k.getFromId(f,g)._annIndices.push(t._index),k.coercePosition(t,f,r,g,v,.5),i){var y="a"+v,p=k.coerceRef(s,t,f,y,"pixel",["pixel","paper"]);p!=="pixel"&&p!==g&&(p=t[y]="pixel");var m=p==="pixel"?h[b]:.4;k.coercePosition(t,f,r,p,y,m)}r(v+"anchor"),r(v+"shift")}if(A.noneOrAll(s,t,["x","y"]),i&&A.noneOrAll(s,t,["ax","ay"]),a){var w=r("xclick"),u=r("yclick");t._xclick=w===void 0?t.x:k.cleanPosition(w,f,t.xref),t._yclick=u===void 0?t.y:k.cleanPosition(u,f,t.yref)}}}$.exports=function(s,t){l(s,t,{name:"annotations",handleItemDefaults:d})}},92605:function($,R,e){var A=e(39898),k=e(73972),l=e(74875),T=e(71828),x=T.strTranslate,d=e(89298),s=e(7901),t=e(91424),o=e(30211),r=e(63893),n=e(6964),a=e(28569),i=e(44467).arrayEditor,c=e(13011);function h(v,g){var y=v._fullLayout.annotations[g]||{},p=d.getFromId(v,y.xref),m=d.getFromId(v,y.yref);p&&p.setScale(),m&&m.setScale(),b(v,y,g,!1,p,m)}function f(v,g,y,p,m){var w=m[y],u=m[y+"ref"],S=y.indexOf("y")!==-1,_=d.getRefType(u)==="domain",E=S?p.h:p.w;return v?_?w+(S?-g:g)/v._length:v.p2r(v.r2p(w)+g):w+(S?-g:g)/E}function b(v,g,y,p,m,w){var u,S,_=v._fullLayout,E=v._fullLayout._size,L=v._context.edits;p?(u="annotation-"+p,S=p+".annotations"):(u="annotation",S="annotations");var C=i(v.layout,S,g),P=C.modifyBase,I=C.modifyItem,U=C.getUpdateObj;_._infolayer.selectAll("."+u+'[data-index="'+y+'"]').remove();var z="clip"+_._uid+"_ann"+y;if(g._input&&g.visible!==!1){var H={x:{},y:{}},F=+g.textangle||0,N=_._infolayer.append("g").classed(u,!0).attr("data-index",String(y)).style("opacity",g.opacity),B=N.append("g").classed("annotation-text-g",!0),j=L[g.showarrow?"annotationTail":"annotationPosition"],K=g.captureevents||L.annotationText||j,G=B.append("g").style("pointer-events",K?"all":null).call(n,"pointer").on("click",function(){v._dragging=!1,v.emit("plotly_clickannotation",ye(A.event))});g.hovertext&&G.on("mouseover",function(){var ve=g.hoverlabel,Ie=ve.font,xe=this.getBoundingClientRect(),Ae=v.getBoundingClientRect();o.loneHover({x0:xe.left-Ae.left,x1:xe.right-Ae.left,y:(xe.top+xe.bottom)/2-Ae.top,text:g.hovertext,color:ve.bgcolor,borderColor:ve.bordercolor,fontFamily:Ie.family,fontSize:Ie.size,fontColor:Ie.color},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:v})}).on("mouseout",function(){o.loneUnhover(_._hoverlayer.node())});var V=g.borderwidth,W=g.borderpad,J=V+W,X=G.append("rect").attr("class","bg").style("stroke-width",V+"px").call(s.stroke,g.bordercolor).call(s.fill,g.bgcolor),ee=g.width||g.height,re=_._topclips.selectAll("#"+z).data(ee?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",z).append("rect"),re.exit().remove();var ie=g.font,se=_._meta?T.templateString(g.text,_._meta):g.text,fe=G.append("text").classed("annotation-text",!0).text(se);L.annotationText?fe.call(r.makeEditable,{delegate:G,gd:v}).call(ge).on("edit",function(ve){g.text=ve,this.call(ge),I("text",ve),m&&m.autorange&&P(m._name+".autorange",!0),w&&w.autorange&&P(w._name+".autorange",!0),k.call("_guiRelayout",v,U())}):fe.call(ge)}else A.selectAll("#"+z).remove();function ye(ve){var Ie={index:y,annotation:g._input,fullAnnotation:g,event:ve};return p&&(Ie.subplotId=p),Ie}function ge(ve){return ve.call(t.font,ie).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),r.convertToTspans(ve,v,he),ve}function he(){var ve=fe.selectAll("a");ve.size()===1&&ve.text()===fe.text()&&G.insert("a",":first-child").attr({"xlink:xlink:href":ve.attr("xlink:href"),"xlink:xlink:show":ve.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(X.node());var Ie=G.select(".annotation-text-math-group"),xe=!Ie.empty(),Ae=t.bBox((xe?Ie:fe).node()),Se=Ae.width,Te=Ae.height,Q=g.width||Se,oe=g.height||Te,ce=Math.round(Q+2*J),me=Math.round(oe+2*J);function Me(Mt,mt){return mt==="auto"&&(mt=Mt<.3333333333333333?"left":Mt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[mt]}for(var Re=!1,Ce=["x","y"],ze=0;ze<Ce.length;ze++){var le,de,be,Fe,Ve,He=Ce[ze],rt=g[He+"ref"]||He,tt=g["a"+He+"ref"],ot={x:m,y:w}[He],ht=(F+(He==="x"?0:-90))*Math.PI/180,_t=ce*Math.cos(ht),dt=me*Math.sin(ht),bt=Math.abs(_t)+Math.abs(dt),St=g[He+"anchor"],Et=g[He+"shift"]*(He==="x"?1:-1),zt=H[He],Ut=d.getRefType(rt);if(ot&&Ut!=="domain"){var Pt=ot.r2fraction(g[He]);(Pt<0||Pt>1)&&(tt===rt?((Pt=ot.r2fraction(g["a"+He]))<0||Pt>1)&&(Re=!0):Re=!0),le=ot._offset+ot.r2p(g[He]),Fe=.5}else{var Ze=Ut==="domain";He==="x"?(be=g[He],le=Ze?ot._offset+ot._length*be:le=E.l+E.w*be):(be=1-g[He],le=Ze?ot._offset+ot._length*be:le=E.t+E.h*be),Fe=g.showarrow?.5:be}if(g.showarrow){zt.head=le;var Ye=g["a"+He];if(Ve=_t*Me(.5,g.xanchor)-dt*Me(.5,g.yanchor),tt===rt){var Be=d.getRefType(tt);Be==="domain"?(He==="y"&&(Ye=1-Ye),zt.tail=ot._offset+ot._length*Ye):Be==="paper"?He==="y"?(Ye=1-Ye,zt.tail=E.t+E.h*Ye):zt.tail=E.l+E.w*Ye:zt.tail=ot._offset+ot.r2p(Ye),de=Ve}else zt.tail=le+Ye,de=Ve+Ye;zt.text=zt.tail+Ve;var ke=_[He==="x"?"width":"height"];if(rt==="paper"&&(zt.head=T.constrain(zt.head,1,ke-1)),tt==="pixel"){var Pe=-Math.max(zt.tail-3,zt.text),qe=Math.min(zt.tail+3,zt.text)-ke;Pe>0?(zt.tail+=Pe,zt.text+=Pe):qe>0&&(zt.tail-=qe,zt.text-=qe)}zt.tail+=Et,zt.head+=Et}else de=Ve=bt*Me(Fe,St),zt.text=le+Ve;zt.text+=Et,Ve+=Et,de+=Et,g["_"+He+"padplus"]=bt/2+de,g["_"+He+"padminus"]=bt/2-de,g["_"+He+"size"]=bt,g["_"+He+"shift"]=Ve}if(Re)G.remove();else{var Xe=0,nt=0;if(g.align!=="left"&&(Xe=(Q-Se)*(g.align==="center"?.5:1)),g.valign!=="top"&&(nt=(oe-Te)*(g.valign==="middle"?.5:1)),xe)Ie.select("svg").attr({x:J+Xe-1,y:J+nt}).call(t.setClipUrl,ee?z:null,v);else{var ut=J+nt-Ae.top,ct=J+Xe-Ae.left;fe.call(r.positionText,ct,ut).call(t.setClipUrl,ee?z:null,v)}re.select("rect").call(t.setRect,J,J,Q,oe),X.call(t.setRect,V/2,V/2,ce-V,me-V),G.call(t.setTranslate,Math.round(H.x.text-ce/2),Math.round(H.y.text-me/2)),B.attr({transform:"rotate("+F+","+H.x.text+","+H.y.text+")"});var Ct,Lt=function(Mt,mt){N.selectAll(".annotation-arrow-g").remove();var kt=H.x.head,wt=H.y.head,Ot=H.x.tail+Mt,It=H.y.tail+mt,Nt=H.x.text+Mt,Dt=H.y.text+mt,qt=T.rotationXYMatrix(F,Nt,Dt),Xt=T.apply2DTransform(qt),cn=T.apply2DTransform2(qt),yn=+X.attr("width"),Kt=+X.attr("height"),Mn=Nt-.5*yn,Un=Mn+yn,xn=Dt-.5*Kt,dn=xn+Kt,gn=[[Mn,xn,Mn,dn],[Mn,dn,Un,dn],[Un,dn,Un,xn],[Un,xn,Mn,xn]].map(cn);if(!gn.reduce(function(Yn,Vn){return Yn^!!T.segmentsIntersect(kt,wt,kt+1e6,wt+1e6,Vn[0],Vn[1],Vn[2],Vn[3])},!1)){gn.forEach(function(Yn){var Vn=T.segmentsIntersect(Ot,It,kt,wt,Yn[0],Yn[1],Yn[2],Yn[3]);Vn&&(Ot=Vn.x,It=Vn.y)});var an=g.arrowwidth,sn=g.arrowcolor,On=g.arrowside,En=N.append("g").style({opacity:s.opacity(sn)}).classed("annotation-arrow-g",!0),Dn=En.append("path").attr("d","M"+Ot+","+It+"L"+kt+","+wt).style("stroke-width",an+"px").call(s.stroke,s.rgb(sn));if(c(Dn,On,g),L.annotationPosition&&Dn.node().parentNode&&!p){var Zn=kt,Fn=wt;if(g.standoff){var nr=Math.sqrt(Math.pow(kt-Ot,2)+Math.pow(wt-It,2));Zn+=g.standoff*(Ot-kt)/nr,Fn+=g.standoff*(It-wt)/nr}var $n,mr,dr=En.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Ot-Zn)+","+(It-Fn),transform:x(Zn,Fn)}).style("stroke-width",an+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");a.init({element:dr.node(),gd:v,prepFn:function(){var Yn=t.getTranslate(G);$n=Yn.x,mr=Yn.y,m&&m.autorange&&P(m._name+".autorange",!0),w&&w.autorange&&P(w._name+".autorange",!0)},moveFn:function(Yn,Vn){var ur=Xt($n,mr),Gt=ur[0]+Yn,tn=ur[1]+Vn;G.call(t.setTranslate,Gt,tn),I("x",f(m,Yn,"x",E,g)),I("y",f(w,Vn,"y",E,g)),g.axref===g.xref&&I("ax",f(m,Yn,"ax",E,g)),g.ayref===g.yref&&I("ay",f(w,Vn,"ay",E,g)),En.attr("transform",x(Yn,Vn)),B.attr({transform:"rotate("+F+","+Gt+","+tn+")"})},doneFn:function(){k.call("_guiRelayout",v,U());var Yn=document.querySelector(".js-notes-box-panel");Yn&&Yn.redraw(Yn.selectedObj)}})}}};g.showarrow&&Lt(0,0),j&&a.init({element:G.node(),gd:v,prepFn:function(){Ct=B.attr("transform")},moveFn:function(Mt,mt){var kt="pointer";if(g.showarrow)g.axref===g.xref?I("ax",f(m,Mt,"ax",E,g)):I("ax",g.ax+Mt),g.ayref===g.yref?I("ay",f(w,mt,"ay",E.w,g)):I("ay",g.ay+mt),Lt(Mt,mt);else{if(p)return;var wt,Ot;if(m)wt=f(m,Mt,"x",E,g);else{var It=g._xsize/E.w,Nt=g.x+(g._xshift-g.xshift)/E.w-It/2;wt=a.align(Nt+Mt/E.w,It,0,1,g.xanchor)}if(w)Ot=f(w,mt,"y",E,g);else{var Dt=g._ysize/E.h,qt=g.y-(g._yshift+g.yshift)/E.h-Dt/2;Ot=a.align(qt-mt/E.h,Dt,0,1,g.yanchor)}I("x",wt),I("y",Ot),m&&w||(kt=a.getCursor(m?.5:wt,w?.5:Ot,g.xanchor,g.yanchor))}B.attr({transform:x(Mt,mt)+Ct}),n(G,kt)},clickFn:function(Mt,mt){g.captureevents&&v.emit("plotly_clickannotation",ye(mt))},doneFn:function(){n(G),k.call("_guiRelayout",v,U());var Mt=document.querySelector(".js-notes-box-panel");Mt&&Mt.redraw(Mt.selectedObj)}})}}}$.exports={draw:function(v){var g=v._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var y=0;y<g.annotations.length;y++)g.annotations[y].visible&&h(v,y);return l.previousPromises(v)},drawOne:h,drawRaw:b}},13011:function($,R,e){var A=e(39898),k=e(7901),l=e(82884),T=e(71828),x=T.strScale,d=T.strRotate,s=T.strTranslate;$.exports=function(t,o,r){var n,a,i,c,h=t.node(),f=l[r.arrowhead||0],b=l[r.startarrowhead||0],v=(r.arrowwidth||1)*(r.arrowsize||1),g=(r.arrowwidth||1)*(r.startarrowsize||1),y=o.indexOf("start")>=0,p=o.indexOf("end")>=0,m=f.backoff*v+r.standoff,w=b.backoff*g+r.startstandoff;if(h.nodeName==="line"){n={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var u=n.x-a.x,S=n.y-a.y;if(c=(i=Math.atan2(S,u))+Math.PI,m&&w&&m+w>Math.sqrt(u*u+S*S))return void N();if(m){if(m*m>u*u+S*S)return void N();var _=m*Math.cos(i),E=m*Math.sin(i);a.x+=_,a.y+=E,t.attr({x2:a.x,y2:a.y})}if(w){if(w*w>u*u+S*S)return void N();var L=w*Math.cos(i),C=w*Math.sin(i);n.x-=L,n.y-=C,t.attr({x1:n.x,y1:n.y})}}else if(h.nodeName==="path"){var P=h.getTotalLength(),I="";if(P<m+w)return void N();var U=h.getPointAtLength(0),z=h.getPointAtLength(.1);i=Math.atan2(U.y-z.y,U.x-z.x),n=h.getPointAtLength(Math.min(w,P)),I="0px,"+w+"px,";var H=h.getPointAtLength(P),F=h.getPointAtLength(P-.1);c=Math.atan2(H.y-F.y,H.x-F.x),a=h.getPointAtLength(Math.max(0,P-m)),I+=P-(I?w+m:m)+"px,"+P+"px",t.style("stroke-dasharray",I)}function N(){t.style("stroke-dasharray","0px,100px")}function B(j,K,G,V){j.path&&(j.noRotate&&(G=0),A.select(h.parentNode).append("path").attr({class:t.attr("class"),d:j.path,transform:s(K.x,K.y)+d(180*G/Math.PI)+x(V)}).style({fill:k.rgb(r.arrowcolor),"stroke-width":0}))}y&&B(b,n,i,g),p&&B(f,a,c,v)}},32745:function($,R,e){var A=e(92605),k=e(44317);$.exports={moduleType:"component",name:"annotations",layoutAttributes:e(50215),supplyLayoutDefaults:e(84046),includeBasePlot:e(76325)("annotations"),calcAutorange:e(3749),draw:A.draw,drawOne:A.drawOne,drawRaw:A.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(94128)}},26997:function($,R,e){var A=e(50215),k=e(30962).overrideAll,l=e(44467).templatedArray;$.exports=k(l("annotation",{visible:A.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:A.xanchor,xshift:A.xshift,yanchor:A.yanchor,yshift:A.yshift,text:A.text,textangle:A.textangle,font:A.font,width:A.width,height:A.height,opacity:A.opacity,align:A.align,valign:A.valign,bgcolor:A.bgcolor,bordercolor:A.bordercolor,borderpad:A.borderpad,borderwidth:A.borderwidth,showarrow:A.showarrow,arrowcolor:A.arrowcolor,arrowhead:A.arrowhead,startarrowhead:A.startarrowhead,arrowside:A.arrowside,arrowsize:A.arrowsize,startarrowsize:A.startarrowsize,arrowwidth:A.arrowwidth,standoff:A.standoff,startstandoff:A.startstandoff,hovertext:A.hovertext,hoverlabel:A.hoverlabel,captureevents:A.captureevents}),"calc","from-root")},5485:function($,R,e){var A=e(71828),k=e(89298);function l(T,x){var d=x.fullSceneLayout.domain,s=x.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},A.extendFlat(T._xa,t),k.setConvert(T._xa),T._xa._offset=s.l+d.x[0]*s.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*s.w*(d.x[1]-d.x[0])},T._ya={},A.extendFlat(T._ya,t),k.setConvert(T._ya),T._ya._offset=s.t+(1-d.y[1])*s.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*s.h*(d.y[1]-d.y[0])}}$.exports=function(T){for(var x=T.fullSceneLayout.annotations,d=0;d<x.length;d++)l(x[d],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},20226:function($,R,e){var A=e(71828),k=e(89298),l=e(85501),T=e(25625),x=e(26997);function d(s,t,o,r){function n(i,c){return A.coerce(s,t,x,i,c)}function a(i){var c=i+"axis",h={_fullLayout:{}};return h._fullLayout[c]=o[c],k.coercePosition(t,h,n,i,i,.5)}n("visible")&&(T(s,t,r.fullLayout,n),a("x"),a("y"),a("z"),A.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),A.noneOrAll(s,t,["ax","ay"])))}$.exports=function(s,t,o){l(s,t,{name:"annotations",handleItemDefaults:d,fullLayout:o.fullLayout})}},82188:function($,R,e){var A=e(92605).drawRaw,k=e(63538),l=["x","y","z"];$.exports=function(T){for(var x=T.fullSceneLayout,d=T.dataScale,s=x.annotations,t=0;t<s.length;t++){for(var o=s[t],r=!1,n=0;n<3;n++){var a=l[n],i=o[a],c=x[a+"axis"].r2fraction(i);if(c<0||c>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(o._pdata=k(T.glplot.cameraParams,[x.xaxis.r2l(o.x)*d[0],x.yaxis.r2l(o.y)*d[1],x.zaxis.r2l(o.z)*d[2]]),A(T.graphDiv,o,t,T.id,o._xa,o._ya))}}},2468:function($,R,e){var A=e(73972),k=e(71828);$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(26997)}}},layoutAttributes:e(26997),handleDefaults:e(20226),includeBasePlot:function(l,T){var x=A.subplotsRegistry.gl3d;if(x)for(var d=x.attrRegex,s=Object.keys(l),t=0;t<s.length;t++){var o=s[t];d.test(o)&&(l[o].annotations||[]).length&&(k.pushUnique(T._basePlotModules,x),k.pushUnique(T._subplots.gl3d,o))}},convert:e(5485),draw:e(82188)}},7561:function($,R,e){$.exports=e(63489),e(94338),e(3961),e(38751),e(86825),e(37715),e(99384),e(43805),e(88874),e(83290),e(29108),e(55422),e(94320),e(31320),e(51367),e(21457)},72201:function($,R,e){var A=e(7561),k=e(71828),l=e(50606),T=l.EPOCHJD,x=l.ONEDAY,d={valType:"enumerated",values:k.sortObjectKeys(A.calendars),editType:"calc",dflt:"gregorian"},s=function(v,g,y,p){var m={};return m[y]=d,k.coerce(v,g,m,y,p)},t="##",o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(v){var g=r[v];return g||(r[v]=A.instance(v))}function a(v){return k.extendFlat({},d,{description:v})}function i(v){return"Sets the calendar system to use with `"+v+"` date data."}var c={xcalendar:a(i("x"))},h=k.extendFlat({},c,{ycalendar:a(i("y"))}),f=k.extendFlat({},h,{zcalendar:a(i("z"))}),b=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:f,surface:f,mesh3d:f,scattergl:h,ohlc:c,candlestick:c},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:d,handleDefaults:s,handleTraceDefaults:function(v,g,y,p){for(var m=0;m<y.length;m++)s(v,g,y[m]+"calendar",p.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(v,g,y){for(var p,m,w,u,S,_=Math.floor((g+.05)/x)+T,E=n(y).fromJD(_),L=0;(L=v.indexOf("%",L))!==-1;)(p=v.charAt(L+1))==="0"||p==="-"||p==="_"?(w=3,m=v.charAt(L+2),p==="_"&&(p="-")):(m=p,p="0",w=2),(u=o[m])?(S=u===t?t:E.formatDate(u[p]),v=v.substr(0,L)+S+v.substr(L+w),L+=S.length):L+=w;return v}}},22399:function($,R){R.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],R.defaultLine="#444",R.lightLine="#eee",R.background="#fff",R.borderLine="#BEC8D9",R.lightFraction=90.9090909090909},7901:function($,R,e){var A=e(84267),k=e(92770),l=e(73627).isTypedArray,T=$.exports={},x=e(22399);T.defaults=x.defaults;var d=T.defaultLine=x.defaultLine;T.lightLine=x.lightLine;var s=T.background=x.background;function t(o){if(k(o)||typeof o!="string")return o;var r=o.trim();if(r.substr(0,3)!=="rgb")return o;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return o;var a=n[1].trim().split(/\s*[\s,]\s*/),i=r.charAt(3)==="a"&&a.length===4;if(!i&&a.length!==3)return o;for(var c=0;c<a.length;c++){if(!a[c].length||(a[c]=Number(a[c]),!(a[c]>=0)))return o;if(c===3)a[c]>1&&(a[c]=1);else if(a[c]>=1)return o}var h=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return i?"rgba("+h+", "+a[3]+")":"rgb("+h+")"}T.tinyRGB=function(o){var r=o.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(o){return T.tinyRGB(A(o))},T.opacity=function(o){return o?A(o).getAlpha():0},T.addOpacity=function(o,r){var n=A(o).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},T.combine=function(o,r){var n=A(o).toRgb();if(n.a===1)return A(o).toRgbString();var a=A(r||s).toRgb(),i=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},c={r:i.r*(1-n.a)+n.r*n.a,g:i.g*(1-n.a)+n.g*n.a,b:i.b*(1-n.a)+n.b*n.a};return A(c).toRgbString()},T.contrast=function(o,r,n){var a=A(o);return a.getAlpha()!==1&&(a=A(T.combine(o,s))),(a.isDark()?r?a.lighten(r):s:n?a.darken(n):d).toString()},T.stroke=function(o,r){var n=A(r);o.style({stroke:T.tinyRGB(n),"stroke-opacity":n.getAlpha()})},T.fill=function(o,r){var n=A(r);o.style({fill:T.tinyRGB(n),"fill-opacity":n.getAlpha()})},T.clean=function(o){if(o&&typeof o=="object"){var r,n,a,i,c=Object.keys(o);for(r=0;r<c.length;r++)if(i=o[a=c[r]],a.substr(a.length-5)==="color")if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=t(i[n]);else o[a]=t(i);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=t(i[n][1]));else if(Array.isArray(i)){var h=i[0];if(!Array.isArray(h)&&h&&typeof h=="object")for(n=0;n<i.length;n++)T.clean(i[n])}else i&&typeof i=="object"&&!l(i)&&T.clean(i)}}},63583:function($,R,e){var A=e(13838),k=e(41940),l=e(1426).extendFlat,T=e(30962).overrideAll;$.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:A.linecolor,outlinewidth:A.linewidth,bordercolor:A.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:A.tickmode,nticks:A.nticks,tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:l({},A.ticks,{dflt:""}),ticklabeloverflow:l({},A.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,ticklabelstep:A.ticklabelstep,showticklabels:A.showticklabels,tickfont:k({}),tickangle:A.tickangle,tickformat:A.tickformat,tickformatstops:A.tickformatstops,tickprefix:A.tickprefix,showtickprefix:A.showtickprefix,ticksuffix:A.ticksuffix,showticksuffix:A.showticksuffix,separatethousands:A.separatethousands,exponentformat:A.exponentformat,minexponent:A.minexponent,showexponent:A.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function($){$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function($,R,e){var A=e(71828),k=e(44467),l=e(26218),T=e(38701),x=e(96115),d=e(89426),s=e(63583);$.exports=function(t,o,r){var n=k.newContainer(o,"colorbar"),a=t.colorbar||{};function i(S,_){return A.coerce(a,n,s,S,_)}var c=r.margin||{t:0,b:0,l:0,r:0},h=r.width-c.l-c.r,f=r.height-c.t-c.b,b=i("orientation")==="v",v=i("thicknessmode");i("thickness",v==="fraction"?30/(b?h:f):30);var g=i("lenmode");i("len",g==="fraction"?1:b?f:h),i("x",b?1.02:.5),i("xanchor",b?"left":"center"),i("xpad"),i("y",b?.5:1.02),i("yanchor",b?"middle":"bottom"),i("ypad"),A.noneOrAll(a,n,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor");var y=A.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:b?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");i("ticklabeloverflow",y.indexOf("inside")!==-1?"hide past domain":"hide past div"),l(a,n,i,"linear");var p=r.font,m={outerTicks:!1,font:p};y.indexOf("inside")!==-1&&(m.bgColor="black"),d(a,n,i,"linear",m),x(a,n,i,"linear",m),T(a,n,i,"linear",m),i("title.text",r._dfltTitle.colorbar);var w=n.tickfont,u=A.extendFlat({},w,{color:p.color,size:A.bigFont(w.size)});A.coerceFont(i,"title.font",u),i("title.side",b?"top":"right")}},98981:function($,R,e){var A=e(39898),k=e(84267),l=e(74875),T=e(73972),x=e(89298),d=e(28569),s=e(71828),t=s.strTranslate,o=e(1426).extendFlat,r=e(6964),n=e(91424),a=e(7901),i=e(92998),c=e(63893),h=e(52075).flipScale,f=e(71453),b=e(52830),v=e(13838),g=e(18783),y=g.LINE_SPACING,p=g.FROM_TL,m=g.FROM_BR,w=e(30939).cn;$.exports={draw:function(u){var S=u._fullLayout._infolayer.selectAll("g."+w.colorbar).data(function(_){var E,L,C,P,I=_._fullLayout,U=_.calcdata,z=[];function H(ee){return o(ee,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function F(){typeof P.calc=="function"?P.calc(_,C,E):(E._fillgradient=L.reversescale?h(L.colorscale):L.colorscale,E._zrange=[L[P.min],L[P.max]])}for(var N=0;N<U.length;N++){var B=U[N],j=(C=B[0].trace)._module.colorbar;if(C.visible===!0&&j)for(var K=Array.isArray(j),G=K?j:[j],V=0;V<G.length;V++){var W=(P=G[V]).container;(L=W?C[W]:C)&&L.showscale&&((E=H(L.colorbar))._id="cb"+C.uid+(K&&W?"-"+W:""),E._traceIndex=C.index,E._propPrefix=(W?W+".":"")+"colorbar.",E._meta=C._meta,F(),z.push(E))}}for(var J in I._colorAxes)if((L=I[J]).showscale){var X=I._colorAxes[J];(E=H(L.colorbar))._id="cb"+J,E._propPrefix=J+".colorbar.",E._meta=I._meta,P={min:"cmin",max:"cmax"},X[0]!=="heatmap"&&(C=X[1],P.calc=C._module.colorbar.calc),F(),z.push(E)}return z}(u),function(_){return _._id});S.enter().append("g").attr("class",function(_){return _._id}).classed(w.colorbar,!0),S.each(function(_){var E=A.select(this);s.ensureSingle(E,"rect",w.cbbg),s.ensureSingle(E,"g",w.cbfills),s.ensureSingle(E,"g",w.cblines),s.ensureSingle(E,"g",w.cbaxis,function(C){C.classed(w.crisp,!0)}),s.ensureSingle(E,"g",w.cbtitleunshift,function(C){C.append("g").classed(w.cbtitle,!0)}),s.ensureSingle(E,"rect",w.cboutline);var L=function(C,P,I){var U=P.orientation==="v",z=P.len,H=P.lenmode,F=P.thickness,N=P.thicknessmode,B=P.outlinewidth,j=P.borderwidth,K=P.bgcolor,G=P.xanchor,V=P.yanchor,W=P.xpad,J=P.ypad,X=P.x,ee=U?P.y:1-P.y,re=I._fullLayout,ie=re._size,se=P._fillcolor,fe=P._line,ye=P.title,ge=ye.side,he=P._zrange||A.extent((typeof se=="function"?se:fe.color).domain()),ve=typeof fe.color=="function"?fe.color:function(){return fe.color},Ie=typeof se=="function"?se:function(){return se},xe=P._levels,Ae=function(Ut,Pt,Ze){var Ye,Be,ke=Pt._levels,Pe=[],qe=[],Xe=ke.end+ke.size/100,nt=ke.size,ut=1.001*Ze[0]-.001*Ze[1],ct=1.001*Ze[1]-.001*Ze[0];for(Be=0;Be<1e5&&(Ye=ke.start+Be*nt,!(nt>0?Ye>=Xe:Ye<=Xe));Be++)Ye>ut&&Ye<ct&&Pe.push(Ye);if(Pt._fillgradient)qe=[0];else if(typeof Pt._fillcolor=="function"){var Ct=Pt._filllevels;if(Ct)for(Xe=Ct.end+Ct.size/100,nt=Ct.size,Be=0;Be<1e5&&(Ye=Ct.start+Be*nt,!(nt>0?Ye>=Xe:Ye<=Xe));Be++)Ye>Ze[0]&&Ye<Ze[1]&&qe.push(Ye);else(qe=Pe.map(function(Lt){return Lt-ke.size/2})).push(qe[qe.length-1]+ke.size)}else Pt._fillcolor&&typeof Pt._fillcolor=="string"&&(qe=[0]);return ke.size<0&&(Pe.reverse(),qe.reverse()),{line:Pe,fill:qe}}(0,P,he),Se=Ae.fill,Te=Ae.line,Q=Math.round(F*(N==="fraction"?U?ie.w:ie.h:1)),oe=Q/(U?ie.w:ie.h),ce=Math.round(z*(H==="fraction"?U?ie.h:ie.w:1)),me=ce/(U?ie.h:ie.w),Me=Math.round(U?X*ie.w+W:ee*ie.h+J),Re={center:.5,right:1}[G]||0,Ce={top:1,middle:.5}[V]||0,ze=U?X-Re*oe:ee-Ce*oe,le=U?ee-Ce*me:X-Re*me,de=Math.round(U?ie.h*(1-le):ie.w*le);P._lenFrac=me,P._thickFrac=oe,P._uFrac=ze,P._vFrac=le;var be=P._axis=function(Ut,Pt,Ze){var Ye=Ut._fullLayout,Be=Pt.orientation==="v",ke={type:"linear",range:Ze,tickmode:Pt.tickmode,nticks:Pt.nticks,tick0:Pt.tick0,dtick:Pt.dtick,tickvals:Pt.tickvals,ticktext:Pt.ticktext,ticks:Pt.ticks,ticklen:Pt.ticklen,tickwidth:Pt.tickwidth,tickcolor:Pt.tickcolor,showticklabels:Pt.showticklabels,ticklabelposition:Pt.ticklabelposition,ticklabeloverflow:Pt.ticklabeloverflow,ticklabelstep:Pt.ticklabelstep,tickfont:Pt.tickfont,tickangle:Pt.tickangle,tickformat:Pt.tickformat,exponentformat:Pt.exponentformat,minexponent:Pt.minexponent,separatethousands:Pt.separatethousands,showexponent:Pt.showexponent,showtickprefix:Pt.showtickprefix,tickprefix:Pt.tickprefix,showticksuffix:Pt.showticksuffix,ticksuffix:Pt.ticksuffix,title:Pt.title,showline:!0,anchor:"free",side:Be?"right":"bottom",position:1},Pe=Be?"y":"x",qe={type:"linear",_id:Pe+Pt._id},Xe={letter:Pe,font:Ye.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Ye.calendar};function nt(ut,ct){return s.coerce(ke,qe,v,ut,ct)}return f(ke,qe,nt,Xe,Ye),b(ke,qe,nt,Xe),qe}(I,P,he);be.position=oe+(U?X+W/ie.w:ee+J/ie.h);var Fe=["top","bottom"].indexOf(ge)!==-1;if(U&&Fe&&(be.title.side=ge,be.titlex=X+W/ie.w,be.titley=le+(ye.side==="top"?me-J/ie.h:J/ie.h)),U||Fe||(be.title.side=ge,be.titley=ee+J/ie.h,be.titlex=le+W/ie.w),fe.color&&P.tickmode==="auto"){be.tickmode="linear",be.tick0=xe.start;var Ve=xe.size,He=s.constrain(ce/50,4,15)+1,rt=(he[1]-he[0])/((P.nticks||He)*Ve);if(rt>1){var tt=Math.pow(10,Math.floor(Math.log(rt)/Math.LN10));Ve*=tt*s.roundUp(rt/tt,[2,5,10]),(Math.abs(xe.start)/xe.size+1e-6)%1<2e-6&&(be.tick0=0)}be.dtick=Ve}be.domain=U?[le+J/ie.h,le+me-J/ie.h]:[le+W/ie.w,le+me-W/ie.w],be.setScale(),C.attr("transform",t(Math.round(ie.l),Math.round(ie.t)));var ot,ht=C.select("."+w.cbtitleunshift).attr("transform",t(-Math.round(ie.l),-Math.round(ie.t))),_t=be.ticklabelposition,dt=be.title.font.size,bt=C.select("."+w.cbaxis),St=0,Et=0;function zt(Ut,Pt){var Ze={propContainer:be,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:re._dfltTitle.colorbar,containerGroup:C.select("."+w.cbtitle)},Ye=Ut.charAt(0)==="h"?Ut.substr(1):"h"+Ut;C.selectAll("."+Ye+",."+Ye+"-math-group").remove(),i.draw(I,Ut,o(Ze,Pt||{}))}return s.syncOrAsync([l.previousPromises,function(){var Ut,Pt;(U&&Fe||!U&&!Fe)&&(ge==="top"&&(Ut=W+ie.l+ie.w*X,Pt=J+ie.t+ie.h*(1-le-me)+3+.75*dt),ge==="bottom"&&(Ut=W+ie.l+ie.w*X,Pt=J+ie.t+ie.h*(1-le)-3-.25*dt),ge==="right"&&(Pt=J+ie.t+ie.h*ee+3+.75*dt,Ut=W+ie.l+ie.w*le),zt(be._id+"title",{attributes:{x:Ut,y:Pt,"text-anchor":U?"start":"middle"}}))},function(){if(!U&&!Fe||U&&Fe){var Ut,Pt=C.select("."+w.cbtitle),Ze=Pt.select("text"),Ye=[-B/2,B/2],Be=Pt.select(".h"+be._id+"title-math-group").node(),ke=15.6;if(Ze.node()&&(ke=parseInt(Ze.node().style.fontSize,10)*y),Be?(Ut=n.bBox(Be),Et=Ut.width,(St=Ut.height)>ke&&(Ye[1]-=(St-ke)/2)):Ze.node()&&!Ze.classed(w.jsPlaceholder)&&(Ut=n.bBox(Ze.node()),Et=Ut.width,St=Ut.height),U){if(St){if(St+=5,ge==="top")be.domain[1]-=St/ie.h,Ye[1]*=-1;else{be.domain[0]+=St/ie.h;var Pe=c.lineCount(Ze);Ye[1]+=(1-Pe)*ke}Pt.attr("transform",t(Ye[0],Ye[1])),be.setScale()}}else Et&&(ge==="right"&&(be.domain[0]+=(Et+dt/2)/ie.w),Pt.attr("transform",t(Ye[0],Ye[1])),be.setScale())}C.selectAll("."+w.cbfills+",."+w.cblines).attr("transform",U?t(0,Math.round(ie.h*(1-be.domain[1]))):t(Math.round(ie.w*be.domain[0]),0)),bt.attr("transform",U?t(0,Math.round(-ie.t)):t(Math.round(-ie.l),0));var qe=C.select("."+w.cbfills).selectAll("rect."+w.cbfill).attr("style","").data(Se);qe.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),qe.exit().remove();var Xe=he.map(be.c2p).map(Math.round).sort(function(Lt,Mt){return Lt-Mt});qe.each(function(Lt,Mt){var mt=[Mt===0?he[0]:(Se[Mt]+Se[Mt-1])/2,Mt===Se.length-1?he[1]:(Se[Mt]+Se[Mt+1])/2].map(be.c2p).map(Math.round);U&&(mt[1]=s.constrain(mt[1]+(mt[1]>mt[0])?1:-1,Xe[0],Xe[1]));var kt=A.select(this).attr(U?"x":"y",Me).attr(U?"y":"x",A.min(mt)).attr(U?"width":"height",Math.max(Q,2)).attr(U?"height":"width",Math.max(A.max(mt)-A.min(mt),2));if(P._fillgradient)n.gradient(kt,I,P._id,U?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var wt=Ie(Lt).replace("e-","");kt.attr("fill",k(wt).toHexString())}});var nt=C.select("."+w.cblines).selectAll("path."+w.cbline).data(fe.color&&fe.width?Te:[]);nt.enter().append("path").classed(w.cbline,!0),nt.exit().remove(),nt.each(function(Lt){var Mt=Me,mt=Math.round(be.c2p(Lt))+fe.width/2%1;A.select(this).attr("d","M"+(U?Mt+","+mt:mt+","+Mt)+(U?"h":"v")+Q).call(n.lineGroupStyle,fe.width,ve(Lt),fe.dash)}),bt.selectAll("g."+be._id+"tick,path").remove();var ut=Me+Q+(B||0)/2-(P.ticks==="outside"?1:0),ct=x.calcTicks(be),Ct=x.getTickSigns(be)[2];return x.drawTicks(I,be,{vals:be.ticks==="inside"?x.clipEnds(be,ct):ct,layer:bt,path:x.makeTickPath(be,ut,Ct),transFn:x.makeTransTickFn(be)}),x.drawLabels(I,be,{vals:ct,layer:bt,transFn:x.makeTransTickLabelFn(be),labelFns:x.makeLabelFns(be,ut)})},function(){if(U&&!Fe||!U&&Fe){var Ut,Pt,Ze=be.position||0,Ye=be._offset+be._length/2;if(ge==="right")Pt=Ye,Ut=ie.l+ie.w*Ze+10+dt*(be.showticklabels?1:.5);else if(Ut=Ye,ge==="bottom"&&(Pt=ie.t+ie.h*Ze+10+(_t.indexOf("inside")===-1?be.tickfont.size:0)+(be.ticks!=="intside"&&P.ticklen||0)),ge==="top"){var Be=ye.text.split("<br>").length;Pt=ie.t+ie.h*Ze+10-Q-y*dt*Be}zt((U?"h":"v")+be._id+"title",{avoid:{selection:A.select(I).selectAll("g."+be._id+"tick"),side:ge,offsetTop:U?0:ie.t,offsetLeft:U?ie.l:0,maxShift:U?re.width:re.height},attributes:{x:Ut,y:Pt,"text-anchor":"middle"},transform:{rotate:U?-90:0,offset:0}})}},l.previousPromises,function(){var Ut,Pt=Q+B/2;_t.indexOf("inside")===-1&&(Ut=n.bBox(bt.node()),Pt+=U?Ut.width:Ut.height),ot=ht.select("text");var Ze=0,Ye=U&&ge==="top",Be=!U&&ge==="right",ke=0;if(ot.node()&&!ot.classed(w.jsPlaceholder)){var Pe,qe=ht.select(".h"+be._id+"title-math-group").node();qe&&(U&&Fe||!U&&!Fe)?(Ze=(Ut=n.bBox(qe)).width,Pe=Ut.height):(Ze=(Ut=n.bBox(ht.node())).right-ie.l-(U?Me:de),Pe=Ut.bottom-ie.t-(U?de:Me),U||ge!=="top"||(Pt+=Ut.height,ke=Ut.height)),Be&&(ot.attr("transform",t(Ze/2+dt/2,0)),Ze*=2),Pt=Math.max(Pt,U?Ze:Pe)}var Xe=2*(U?W:J)+Pt+j+B/2,nt=0;!U&&ye.text&&V==="bottom"&&ee<=0&&(Xe+=nt=Xe/2,ke+=nt),re._hColorbarMoveTitle=nt,re._hColorbarMoveCBTitle=ke;var ut=j+B;C.select("."+w.cbbg).attr("x",(U?Me:de)-ut/2-(U?W:0)).attr("y",(U?de:Me)-(U?ce:J+ke-nt)).attr(U?"width":"height",Math.max(Xe-nt,2)).attr(U?"height":"width",Math.max(ce+ut,2)).call(a.fill,K).call(a.stroke,P.bordercolor).style("stroke-width",j);var ct=Be?Math.max(Ze-10,0):0;if(C.selectAll("."+w.cboutline).attr("x",(U?Me:de+W)+ct).attr("y",(U?de+J-ce:Me)+(Ye?St:0)).attr(U?"width":"height",Math.max(Q,2)).attr(U?"height":"width",Math.max(ce-(U?2*J+St:2*W+ct),2)).call(a.stroke,P.outlinecolor).style({fill:"none","stroke-width":B}),C.attr("transform",t(ie.l-(U?Re*Xe:0),ie.t-(U?0:(1-Ce)*Xe-ke))),!U&&(j||k(K).getAlpha()&&!k.equals(re.paper_bgcolor,K))){var Ct=bt.selectAll("text"),Lt=Ct[0].length,Mt=C.select("."+w.cbbg).node(),mt=n.bBox(Mt),kt=n.getTranslate(C);Ct.each(function(Xt,cn){var yn=Lt-1;if(cn===0||cn===yn){var Kt,Mn=n.bBox(this),Un=n.getTranslate(this);if(cn===yn){var xn=Mn.right+Un.x;(Kt=mt.right+kt.x+de-j-2+X-xn)>0&&(Kt=0)}else if(cn===0){var dn=Mn.left+Un.x;(Kt=mt.left+kt.x+de+j+2-dn)<0&&(Kt=0)}Kt&&(Lt<3?this.setAttribute("transform","translate("+Kt+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var wt={},Ot=p[G],It=m[G],Nt=p[V],Dt=m[V],qt=Xe-Q;U?(H==="pixels"?(wt.y=ee,wt.t=ce*Nt,wt.b=ce*Dt):(wt.t=wt.b=0,wt.yt=ee+z*Nt,wt.yb=ee-z*Dt),N==="pixels"?(wt.x=X,wt.l=Xe*Ot,wt.r=Xe*It):(wt.l=qt*Ot,wt.r=qt*It,wt.xl=X-F*Ot,wt.xr=X+F*It)):(H==="pixels"?(wt.x=X,wt.l=ce*Ot,wt.r=ce*It):(wt.l=wt.r=0,wt.xl=X+z*Ot,wt.xr=X-z*It),N==="pixels"?(wt.y=1-ee,wt.t=Xe*Nt,wt.b=Xe*Dt):(wt.t=qt*Nt,wt.b=qt*Dt,wt.yt=ee-F*Nt,wt.yb=ee+F*Dt)),l.autoMargin(I,P._id,wt)}],I)}(E,_,u);L&&L.then&&(u._promises||[]).push(L),u._context.edits.colorbarPosition&&function(C,P,I){var U,z,H,F=P.orientation==="v",N=I._fullLayout._size;d.init({element:C.node(),gd:I,prepFn:function(){U=C.attr("transform"),r(C)},moveFn:function(B,j){C.attr("transform",U+t(B,j)),z=d.align((F?P._uFrac:P._vFrac)+B/N.w,F?P._thickFrac:P._lenFrac,0,1,P.xanchor),H=d.align((F?P._vFrac:1-P._uFrac)-j/N.h,F?P._lenFrac:P._thickFrac,0,1,P.yanchor);var K=d.getCursor(z,H,P.xanchor,P.yanchor);r(C,K)},doneFn:function(){if(r(C),z!==void 0&&H!==void 0){var B={};B[P._propPrefix+"x"]=z,B[P._propPrefix+"y"]=H,P._traceIndex!==void 0?T.call("_guiRestyle",I,B,P._traceIndex):T.call("_guiRelayout",I,B)}}})}(E,_,u)}),S.exit().each(function(_){l.autoMargin(u,_._id)}).remove(),S.order()}}},76228:function($,R,e){var A=e(71828);$.exports=function(k){return A.isPlainObject(k.colorbar)}},12311:function($,R,e){$.exports={moduleType:"component",name:"colorbar",attributes:e(63583),supplyDefaults:e(62499),draw:e(98981).draw,hasColorbar:e(76228)}},50693:function($,R,e){var A=e(63583),k=e(30587).counter,l=e(78607),T=e(63282).scales;function x(d){return"`"+d+"`"}l(T),$.exports=function(d,s){d=d||"";var t,o=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s?s.onlyIfNumerical:Boolean(d),"noScale"in s?s.noScale:d==="marker.line"),n="showScaleDflt"in s?s.showScaleDflt:o==="z",a=typeof s.colorscaleDflt=="string"?T[s.colorscaleDflt]:null,i=s.editTypeOverride||"",c=d?d+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):x(c+(t={z:"z",c:"color"}[o]));var h=o+"auto",f=o+"min",b=o+"max",v=o+"mid",g={};g[f]=g[b]=void 0;var y={};y[h]=!1;var p={};return t==="color"&&(p.color={valType:"color",arrayOk:!0,editType:i||"style"},s.anim&&(p.color.anim=!0)),p[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},p[f]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:y},p[b]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:y},p[v]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},p.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},p.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},p.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(p.showscale={valType:"boolean",dflt:n,editType:"calc"},p.colorbar=A),s.noColorAxis||(p.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),p}},78803:function($,R,e){var A=e(92770),k=e(71828),l=e(52075).extractOpts;$.exports=function(T,x,d){var s,t=T._fullLayout,o=d.vals,r=d.containerStr,n=r?k.nestedProperty(x,r).get():x,a=l(n),i=a.auto!==!1,c=a.min,h=a.max,f=a.mid,b=function(){return k.aggNums(Math.min,null,o)},v=function(){return k.aggNums(Math.max,null,o)};c===void 0?c=b():i&&(c=n._colorAx&&A(c)?Math.min(c,b()):b()),h===void 0?h=v():i&&(h=n._colorAx&&A(h)?Math.max(h,v()):v()),i&&f!==void 0&&(h-f>f-c?c=f-(h-f):h-f<f-c&&(h=f+(f-c))),c===h&&(c-=.5,h+=.5),a._sync("min",c),a._sync("max",h),a.autocolorscale&&(s=c*h<0?t.colorscale.diverging:c>=0?t.colorscale.sequential:t.colorscale.sequentialminus,a._sync("colorscale",s))}},33046:function($,R,e){var A=e(71828),k=e(52075).hasColorscale,l=e(52075).extractOpts;$.exports=function(T,x){function d(i,c){var h=i["_"+c];h!==void 0&&(i[c]=h)}function s(i,c){var h=c.container?A.nestedProperty(i,c.container).get():i;if(h)if(h.coloraxis)h._colorAx=x[h.coloraxis];else{var f=l(h),b=f.auto;(b||f.min===void 0)&&d(h,c.min),(b||f.max===void 0)&&d(h,c.max),f.autocolorscale&&d(h,"colorscale")}}for(var t=0;t<T.length;t++){var o=T[t],r=o._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)s(o,r[n]);else s(o,r);k(o,"marker.line")&&s(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in x._colorAxes)s(x[a],{min:"cmin",max:"cmax"})}},1586:function($,R,e){var A=e(92770),k=e(71828),l=e(76228),T=e(62499),x=e(63282).isValid,d=e(73972).traceIs;function s(t,o){var r=o.slice(0,o.length-1);return o?k.nestedProperty(t,r).get()||{}:t}$.exports=function t(o,r,n,a,i){var c=i.prefix,h=i.cLetter,f="_module"in r,b=s(o,c),v=s(r,c),g=s(r._template||{},c)||{},y=function(){return delete o.coloraxis,delete r.coloraxis,t(o,r,n,a,i)};if(f){var p=n._colorAxes||{},m=a(c+"coloraxis");if(m){var w=d(r,"contour")&&k.nestedProperty(r,"contours.coloring").get()||"heatmap",u=p[m];return void(u?(u[2].push(y),u[0]!==w&&(u[0]=!1,k.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):p[m]=[w,r,[y]])}}var S=b[h+"min"],_=b[h+"max"],E=A(S)&&A(_)&&S<_;a(c+h+"auto",!E)?a(c+h+"mid"):(a(c+h+"min"),a(c+h+"max"));var L,C,P=b.colorscale,I=g.colorscale;P!==void 0&&(L=!x(P)),I!==void 0&&(L=!x(I)),a(c+"autocolorscale",L),a(c+"colorscale"),a(c+"reversescale"),c!=="marker.line."&&(c&&f&&(C=l(b)),a(c+"showscale",C)&&(c&&g&&(v._template=g),T(b,v,n)))}},52075:function($,R,e){var A=e(39898),k=e(84267),l=e(92770),T=e(71828),x=e(7901),d=e(63282).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function o(c){var h,f,b,v=c._colorAx,g=v||c,y={};for(f=0;f<s.length;f++)y[b=s[f]]=g[b];if(v)for(h="c",f=0;f<t.length;f++)y[b=t[f]]=g["c"+b];else{var p;for(f=0;f<t.length;f++)((p="c"+(b=t[f]))in g||(p="z"+b)in g)&&(y[b]=g[p]);h=p.charAt(0)}return y._sync=function(m,w){var u=t.indexOf(m)!==-1?h+m:m;g[u]=g["_"+u]=w},y}function r(c){for(var h=o(c),f=h.min,b=h.max,v=h.reversescale?n(h.colorscale):h.colorscale,g=v.length,y=new Array(g),p=new Array(g),m=0;m<g;m++){var w=v[m];y[m]=f+w[0]*(b-f),p[m]=w[1]}return{domain:y,range:p}}function n(c){for(var h=c.length,f=new Array(h),b=h-1,v=0;b>=0;b--,v++){var g=c[b];f[v]=[1-g[0],g[1]]}return f}function a(c,h){h=h||{};for(var f=c.domain,b=c.range,v=b.length,g=new Array(v),y=0;y<v;y++){var p=k(b[y]).toRgb();g[y]=[p.r,p.g,p.b,p.a]}var m,w=A.scale.linear().domain(f).range(g).clamp(!0),u=h.noNumericCheck,S=h.returnArray;return(m=u&&S?w:u?function(_){return i(w(_))}:S?function(_){return l(_)?w(_):k(_).isValid()?_:x.defaultLine}:function(_){return l(_)?i(w(_)):k(_).isValid()?_:x.defaultLine}).domain=w.domain,m.range=function(){return b},m}function i(c){var h={r:c[0],g:c[1],b:c[2],a:c[3]};return k(h).toRgbString()}$.exports={hasColorscale:function(c,h,f){var b=h?T.nestedProperty(c,h).get()||{}:c,v=b[f||"color"],g=!1;if(T.isArrayOrTypedArray(v)){for(var y=0;y<v.length;y++)if(l(v[y])){g=!0;break}}return T.isPlainObject(b)&&(g||b.showscale===!0||l(b.cmin)&&l(b.cmax)||d(b.colorscale)||T.isPlainObject(b.colorbar))},extractOpts:o,extractScale:r,flipScale:n,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(c,h){return a(r(c),h)}}},21081:function($,R,e){var A=e(63282),k=e(52075);$.exports={moduleType:"component",name:"colorscale",attributes:e(50693),layoutAttributes:e(72673),supplyLayoutDefaults:e(30959),handleDefaults:e(1586),crossTraceDefaults:e(33046),calc:e(78803),scales:A.scales,defaultScale:A.defaultScale,getScale:A.get,isValidScale:A.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},72673:function($,R,e){var A=e(1426).extendFlat,k=e(50693),l=e(63282).scales;$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:l.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:l.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:l.RdBu,editType:"calc"}},coloraxis:A({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function($,R,e){var A=e(71828),k=e(44467),l=e(72673),T=e(1586);$.exports=function(x,d){function s(h,f){return A.coerce(x,d,l,h,f)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,o,r=d._colorAxes;function n(h,f){return A.coerce(t,o,l.coloraxis,h,f)}for(var a in r){var i=r[a];if(i[0])t=x[a]||{},(o=k.newContainer(d,a,"coloraxis"))._name=a,T(t,o,d,n,{prefix:"",cLetter:"c"});else{for(var c=0;c<i[2].length;c++)i[2][c]();delete d._colorAxes[a]}}}},63282:function($,R,e){var A=e(84267),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},l=k.RdBu;function T(x){var d=0;if(!Array.isArray(x)||x.length<2||!x[0]||!x[x.length-1]||+x[0][0]!=0||+x[x.length-1][0]!=1)return!1;for(var s=0;s<x.length;s++){var t=x[s];if(t.length!==2||+t[0]<d||!A(t[1]).isValid())return!1;d=+t[0]}return!0}$.exports={scales:k,defaultScale:l,get:function(x,d){if(d||(d=l),!x)return d;function s(){try{x=k[x]||JSON.parse(x)}catch{x=d}}return typeof x=="string"&&(s(),typeof x=="string"&&s()),T(x)?x:d},isValid:function(x){return k[x]!==void 0||T(x)}}},92807:function($){$.exports=function(R,e,A,k,l){var T=(R-A)/(k-A),x=T+e/(k-A),d=(T+x)/2;return l==="left"||l==="bottom"?T:l==="center"||l==="middle"?d:l==="right"||l==="top"?x:T<.6666666666666666-d?T:x>1.3333333333333333-d?x:d}},70461:function($,R,e){var A=e(71828),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(l,T,x,d){return l=x==="left"?0:x==="center"?1:x==="right"?2:A.constrain(Math.floor(3*l),0,2),T=d==="bottom"?0:d==="middle"?1:d==="top"?2:A.constrain(Math.floor(3*T),0,2),k[T][l]}},64505:function($,R){R.selectMode=function(e){return e==="lasso"||e==="select"},R.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},R.openMode=function(e){return e==="drawline"||e==="drawopenpath"},R.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},R.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},R.selectingOrDrawing=function(e){return R.freeMode(e)||R.rectMode(e)}},28569:function($,R,e){var A=e(48956),k=e(57035),l=e(38520),T=e(71828).removeElement,x=e(85555),d=$.exports={};d.align=e(92807),d.getCursor=e(70461);var s=e(26041);function t(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function o(r){return A(r.changedTouches?r.changedTouches[0]:r,document.body)}d.unhover=s.wrapped,d.unhoverRaw=s.raw,d.init=function(r){var n,a,i,c,h,f,b,v,g=r.gd,y=1,p=g._context.doubleClickDelay,m=r.element;g._mouseDownTime||(g._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=u,l?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=u,m.addEventListener("touchstart",u,{passive:!1})):m.ontouchstart=u;var w=r.clampFn||function(E,L,C){return Math.abs(E)<C&&(E=0),Math.abs(L)<C&&(L=0),[E,L]};function u(E){g._dragged=!1,g._dragging=!0;var L=o(E);n=L[0],a=L[1],b=E.target,f=E,v=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=n,E.clientY=a),(i=new Date().getTime())-g._mouseDownTime<p?y+=1:(y=1,g._mouseDownTime=i),r.prepFn&&r.prepFn(E,n,a),k&&!v?(h=t()).style.cursor=window.getComputedStyle(m).cursor:k||(h=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",_),document.addEventListener("touchend",_),r.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var L=o(E),C=r.minDrag||x.MINDRAG,P=w(L[0]-n,L[1]-a,C),I=P[0],U=P[1];(I||U)&&(g._dragged=!0,d.unhover(g,E)),g._dragged&&r.moveFn&&!v&&(g._dragdata={element:m,dx:I,dy:U},r.moveFn(I,U))}function _(E){if(delete g._dragdata,r.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",_),document.removeEventListener("touchend",_),k?T(h):c&&(h.documentElement.style.cursor=c,c=null),g._dragging){if(g._dragging=!1,new Date().getTime()-g._mouseDownTime>p&&(y=Math.max(y-1,1)),g._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(y,f),!v){var L;try{L=new MouseEvent("click",E)}catch{var C=o(E);(L=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}b.dispatchEvent(L)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},d.coverSlip=t},26041:function($,R,e){var A=e(11086),k=e(79990),l=e(24401).getGraphDiv,T=e(26675),x=$.exports={};x.wrapped=function(d,s,t){(d=l(d))._fullLayout&&k.clear(d._fullLayout._uid+T.HOVERID),x.raw(d,s,t)},x.raw=function(d,s){var t=d._fullLayout,o=d._hoverdata;s||(s={}),s.target&&!d._dragged&&A.triggerHandler(d,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),d._hoverdata=void 0,s.target&&o&&d.emit("plotly_unhover",{event:s,points:o}))}},79952:function($,R){R.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},R.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function($,R,e){var A=e(39898),k=e(71828),l=k.numberFormat,T=e(92770),x=e(84267),d=e(73972),s=e(7901),t=e(21081),o=k.strTranslate,r=e(63893),n=e(77922),a=e(18783).LINE_SPACING,i=e(37822).DESELECTDIM,c=e(34098),h=e(39984),f=e(23469).appendArrayPointValue,b=$.exports={};function v(xe,Ae,Se){var Te=Ae.fillpattern,Q=Te&&b.getPatternAttr(Te.shape,0,"");if(Q){var oe=b.getPatternAttr(Te.bgcolor,0,null),ce=b.getPatternAttr(Te.fgcolor,0,null),me=Te.fgopacity,Me=b.getPatternAttr(Te.size,0,8),Re=b.getPatternAttr(Te.solidity,0,.3),Ce=Ae.uid;b.pattern(xe,"point",Se,Ce,Q,Me,Re,void 0,Te.fillmode,oe,ce,me)}else Ae.fillcolor&&xe.call(s.fill,Ae.fillcolor)}b.font=function(xe,Ae,Se,Te){k.isPlainObject(Ae)&&(Te=Ae.color,Se=Ae.size,Ae=Ae.family),Ae&&xe.style("font-family",Ae),Se+1&&xe.style("font-size",Se+"px"),Te&&xe.call(s.fill,Te)},b.setPosition=function(xe,Ae,Se){xe.attr("x",Ae).attr("y",Se)},b.setSize=function(xe,Ae,Se){xe.attr("width",Ae).attr("height",Se)},b.setRect=function(xe,Ae,Se,Te,Q){xe.call(b.setPosition,Ae,Se).call(b.setSize,Te,Q)},b.translatePoint=function(xe,Ae,Se,Te){var Q=Se.c2p(xe.x),oe=Te.c2p(xe.y);return!!(T(Q)&&T(oe)&&Ae.node())&&(Ae.node().nodeName==="text"?Ae.attr("x",Q).attr("y",oe):Ae.attr("transform",o(Q,oe)),!0)},b.translatePoints=function(xe,Ae,Se){xe.each(function(Te){var Q=A.select(this);b.translatePoint(Te,Q,Ae,Se)})},b.hideOutsideRangePoint=function(xe,Ae,Se,Te,Q,oe){Ae.attr("display",Se.isPtWithinRange(xe,Q)&&Te.isPtWithinRange(xe,oe)?null:"none")},b.hideOutsideRangePoints=function(xe,Ae){if(Ae._hasClipOnAxisFalse){var Se=Ae.xaxis,Te=Ae.yaxis;xe.each(function(Q){var oe=Q[0].trace,ce=oe.xcalendar,me=oe.ycalendar,Me=d.traceIs(oe,"bar-like")?".bartext":".point,.textpoint";xe.selectAll(Me).each(function(Re){b.hideOutsideRangePoint(Re,A.select(this),Se,Te,ce,me)})})}},b.crispRound=function(xe,Ae,Se){return Ae&&T(Ae)?xe._context.staticPlot?Ae:Ae<1?1:Math.round(Ae):Se||0},b.singleLineStyle=function(xe,Ae,Se,Te,Q){Ae.style("fill","none");var oe=(((xe||[])[0]||{}).trace||{}).line||{},ce=Se||oe.width||0,me=Q||oe.dash||"";s.stroke(Ae,Te||oe.color),b.dashLine(Ae,me,ce)},b.lineGroupStyle=function(xe,Ae,Se,Te){xe.style("fill","none").each(function(Q){var oe=(((Q||[])[0]||{}).trace||{}).line||{},ce=Ae||oe.width||0,me=Te||oe.dash||"";A.select(this).call(s.stroke,Se||oe.color).call(b.dashLine,me,ce)})},b.dashLine=function(xe,Ae,Se){Se=+Se||0,Ae=b.dashStyle(Ae,Se),xe.style({"stroke-dasharray":Ae,"stroke-width":Se+"px"})},b.dashStyle=function(xe,Ae){Ae=+Ae||1;var Se=Math.max(Ae,3);return xe==="solid"?xe="":xe==="dot"?xe=Se+"px,"+Se+"px":xe==="dash"?xe=3*Se+"px,"+3*Se+"px":xe==="longdash"?xe=5*Se+"px,"+5*Se+"px":xe==="dashdot"?xe=3*Se+"px,"+Se+"px,"+Se+"px,"+Se+"px":xe==="longdashdot"&&(xe=5*Se+"px,"+2*Se+"px,"+Se+"px,"+2*Se+"px"),xe},b.singleFillStyle=function(xe,Ae){var Se=A.select(xe.node());v(xe,((Se.data()[0]||[])[0]||{}).trace||{},Ae)},b.fillGroupStyle=function(xe,Ae){xe.style("stroke-width",0).each(function(Se){var Te=A.select(this);Se[0].trace&&v(Te,Se[0].trace,Ae)})};var g=e(90998);b.symbolNames=[],b.symbolFuncs=[],b.symbolBackOffs=[],b.symbolNeedLines={},b.symbolNoDot={},b.symbolNoFill={},b.symbolList=[],Object.keys(g).forEach(function(xe){var Ae=g[xe],Se=Ae.n;b.symbolList.push(Se,String(Se),xe,Se+100,String(Se+100),xe+"-open"),b.symbolNames[Se]=xe,b.symbolFuncs[Se]=Ae.f,b.symbolBackOffs[Se]=Ae.backoff||0,Ae.needLine&&(b.symbolNeedLines[Se]=!0),Ae.noDot?b.symbolNoDot[Se]=!0:b.symbolList.push(Se+200,String(Se+200),xe+"-dot",Se+300,String(Se+300),xe+"-open-dot"),Ae.noFill&&(b.symbolNoFill[Se]=!0)});var y=b.symbolNames.length;function p(xe,Ae,Se,Te){var Q=xe%100;return b.symbolFuncs[Q](Ae,Se,Te)+(xe>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}b.symbolNumber=function(xe){if(T(xe))xe=+xe;else if(typeof xe=="string"){var Ae=0;xe.indexOf("-open")>0&&(Ae=100,xe=xe.replace("-open","")),xe.indexOf("-dot")>0&&(Ae+=200,xe=xe.replace("-dot","")),(xe=b.symbolNames.indexOf(xe))>=0&&(xe+=Ae)}return xe%100>=y||xe>=400?0:Math.floor(Math.max(xe,0))};var m={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},u=l("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:m},horizontalreversed:{node:"linearGradient",attrs:m,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};b.gradient=function(xe,Ae,Se,Te,Q,oe){for(var ce=Q.length,me=S[Te],Me=new Array(ce),Re=0;Re<ce;Re++)me.reversed?Me[ce-1-Re]=[u(100*(1-Q[Re][0])),Q[Re][1]]:Me[Re]=[u(100*Q[Re][0]),Q[Re][1]];var Ce=Ae._fullLayout,ze="g"+Ce._uid+"-"+Se,le=Ce._defs.select(".gradients").selectAll("#"+ze).data([Te+Me.join(";")],k.identity);le.exit().remove(),le.enter().append(me.node).each(function(){var de=A.select(this);me.attrs&&de.attr(me.attrs),de.attr("id",ze);var be=de.selectAll("stop").data(Me);be.exit().remove(),be.enter().append("stop"),be.each(function(Fe){var Ve=x(Fe[1]);A.select(this).attr({offset:Fe[0]+"%","stop-color":s.tinyRGB(Ve),"stop-opacity":Ve.getAlpha()})})}),xe.style(oe,G(ze,Ae)).style(oe+"-opacity",null),xe.classed("gradient_filled",!0)},b.pattern=function(xe,Ae,Se,Te,Q,oe,ce,me,Me,Re,Ce,ze){var le=Ae==="legend";me&&(Me==="overlay"?(Re=me,Ce=s.contrast(Re)):(Re=void 0,Ce=me));var de,be,Fe,Ve,He,rt,tt,ot,ht,_t=Se._fullLayout,dt="p"+_t._uid+"-"+Te,bt={},St=x(Ce),Et=s.tinyRGB(St),zt=ze*St.getAlpha();switch(Q){case"/":de=oe*Math.sqrt(2),be=oe*Math.sqrt(2),rt="path",bt={d:Fe="M-"+de/4+","+be/4+"l"+de/2+",-"+be/2+"M0,"+be+"L"+de+",0M"+de/4*3+","+be/4*5+"l"+de/2+",-"+be/2,opacity:zt,stroke:Et,"stroke-width":(Ve=ce*oe)+"px"};break;case"\\":de=oe*Math.sqrt(2),be=oe*Math.sqrt(2),rt="path",bt={d:Fe="M"+de/4*3+",-"+be/4+"l"+de/2+","+be/2+"M0,0L"+de+","+be+"M-"+de/4+","+be/4*3+"l"+de/2+","+be/2,opacity:zt,stroke:Et,"stroke-width":(Ve=ce*oe)+"px"};break;case"x":de=oe*Math.sqrt(2),be=oe*Math.sqrt(2),Fe="M-"+de/4+","+be/4+"l"+de/2+",-"+be/2+"M0,"+be+"L"+de+",0M"+de/4*3+","+be/4*5+"l"+de/2+",-"+be/2+"M"+de/4*3+",-"+be/4+"l"+de/2+","+be/2+"M0,0L"+de+","+be+"M-"+de/4+","+be/4*3+"l"+de/2+","+be/2,Ve=oe-oe*Math.sqrt(1-ce),rt="path",bt={d:Fe,opacity:zt,stroke:Et,"stroke-width":Ve+"px"};break;case"|":rt="path",rt="path",bt={d:Fe="M"+(de=oe)/2+",0L"+de/2+","+(be=oe),opacity:zt,stroke:Et,"stroke-width":(Ve=ce*oe)+"px"};break;case"-":rt="path",rt="path",bt={d:Fe="M0,"+(be=oe)/2+"L"+(de=oe)+","+be/2,opacity:zt,stroke:Et,"stroke-width":(Ve=ce*oe)+"px"};break;case"+":rt="path",Fe="M"+(de=oe)/2+",0L"+de/2+","+(be=oe)+"M0,"+be/2+"L"+de+","+be/2,Ve=oe-oe*Math.sqrt(1-ce),rt="path",bt={d:Fe,opacity:zt,stroke:Et,"stroke-width":Ve+"px"};break;case".":de=oe,be=oe,ce<Math.PI/4?He=Math.sqrt(ce*oe*oe/Math.PI):(tt=ce,ot=Math.PI/4,He=(ht=oe/2)+(oe/Math.sqrt(2)-ht)*(tt-ot)/(1-ot)),rt="circle",bt={cx:de/2,cy:be/2,r:He,opacity:zt,fill:Et}}var Ut=[Q||"noSh",Re||"noBg",Ce||"noFg",oe,ce].join(";"),Pt=_t._defs.select(".patterns").selectAll("#"+dt).data([Ut],k.identity);Pt.exit().remove(),Pt.enter().append("pattern").each(function(){var Ze=A.select(this);if(Ze.attr({id:dt,width:de+"px",height:be+"px",patternUnits:"userSpaceOnUse",patternTransform:le?"scale(0.8)":""}),Re){var Ye=x(Re),Be=s.tinyRGB(Ye),ke=Ye.getAlpha(),Pe=Ze.selectAll("rect").data([0]);Pe.exit().remove(),Pe.enter().append("rect").attr({width:de+"px",height:be+"px",fill:Be,"fill-opacity":ke})}var qe=Ze.selectAll(rt).data([0]);qe.exit().remove(),qe.enter().append(rt).attr(bt)}),xe.style("fill",G(dt,Se)).style("fill-opacity",null),xe.classed("pattern_filled",!0)},b.initGradients=function(xe){var Ae=xe._fullLayout;k.ensureSingle(Ae._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),A.select(xe).selectAll(".gradient_filled").classed("gradient_filled",!1)},b.initPatterns=function(xe){var Ae=xe._fullLayout;k.ensureSingle(Ae._defs,"g","patterns").selectAll("pattern").remove(),A.select(xe).selectAll(".pattern_filled").classed("pattern_filled",!1)},b.getPatternAttr=function(xe,Ae,Se){return xe&&k.isArrayOrTypedArray(xe)?Ae<xe.length?xe[Ae]:Se:xe},b.pointStyle=function(xe,Ae,Se){if(xe.size()){var Te=b.makePointStyleFns(Ae);xe.each(function(Q){b.singlePointStyle(Q,A.select(this),Ae,Te,Se)})}},b.singlePointStyle=function(xe,Ae,Se,Te,Q){var oe=Se.marker,ce=oe.line;if(Ae.style("opacity",Te.selectedOpacityFn?Te.selectedOpacityFn(xe):xe.mo===void 0?oe.opacity:xe.mo),Te.ms2mrc){var me;me=xe.ms==="various"||oe.size==="various"?3:Te.ms2mrc(xe.ms),xe.mrc=me,Te.selectedSizeFn&&(me=xe.mrc=Te.selectedSizeFn(xe));var Me=b.symbolNumber(xe.mx||oe.symbol)||0;xe.om=Me%200>=100;var Re=Ie(xe,Se),Ce=J(xe,Se);Ae.attr("d",p(Me,me,Re,Ce))}var ze,le,de,be=!1;if(xe.so)de=ce.outlierwidth,le=ce.outliercolor,ze=oe.outliercolor;else{var Fe=(ce||{}).width;de=(xe.mlw+1||Fe+1||(xe.trace?(xe.trace.marker.line||{}).width:0)+1)-1||0,le="mlc"in xe?xe.mlcc=Te.lineScale(xe.mlc):k.isArrayOrTypedArray(ce.color)?s.defaultLine:ce.color,k.isArrayOrTypedArray(oe.color)&&(ze=s.defaultLine,be=!0),ze="mc"in xe?xe.mcc=Te.markerScale(xe.mc):oe.color||"rgba(0,0,0,0)",Te.selectedColorFn&&(ze=Te.selectedColorFn(xe))}if(xe.om)Ae.call(s.stroke,ze).style({"stroke-width":(de||1)+"px",fill:"none"});else{Ae.style("stroke-width",(xe.isBlank?0:de)+"px");var Ve=oe.gradient,He=xe.mgt;He?be=!0:He=Ve&&Ve.type,k.isArrayOrTypedArray(He)&&(He=He[0],S[He]||(He=0));var rt=oe.pattern,tt=rt&&b.getPatternAttr(rt.shape,xe.i,"");if(He&&He!=="none"){var ot=xe.mgc;ot?be=!0:ot=Ve.color;var ht=Se.uid;be&&(ht+="-"+xe.i),b.gradient(Ae,Q,ht,He,[[0,ot],[1,ze]],"fill")}else if(tt){var _t=b.getPatternAttr(rt.bgcolor,xe.i,null),dt=b.getPatternAttr(rt.fgcolor,xe.i,null),bt=rt.fgopacity,St=b.getPatternAttr(rt.size,xe.i,8),Et=b.getPatternAttr(rt.solidity,xe.i,.3),zt=xe.mcc||k.isArrayOrTypedArray(rt.shape)||k.isArrayOrTypedArray(rt.bgcolor)||k.isArrayOrTypedArray(rt.size)||k.isArrayOrTypedArray(rt.solidity),Ut=Se.uid;zt&&(Ut+="-"+xe.i),b.pattern(Ae,"point",Q,Ut,tt,St,Et,xe.mcc,rt.fillmode,_t,dt,bt)}else s.fill(Ae,ze);de&&s.stroke(Ae,le)}},b.makePointStyleFns=function(xe){var Ae={},Se=xe.marker;return Ae.markerScale=b.tryColorscale(Se,""),Ae.lineScale=b.tryColorscale(Se,"line"),d.traceIs(xe,"symbols")&&(Ae.ms2mrc=c.isBubble(xe)?h(xe):function(){return(Se.size||6)/2}),xe.selectedpoints&&k.extendFlat(Ae,b.makeSelectedPointStyleFns(xe)),Ae},b.makeSelectedPointStyleFns=function(xe){var Ae={},Se=xe.selected||{},Te=xe.unselected||{},Q=xe.marker||{},oe=Se.marker||{},ce=Te.marker||{},me=Q.opacity,Me=oe.opacity,Re=ce.opacity,Ce=Me!==void 0,ze=Re!==void 0;(k.isArrayOrTypedArray(me)||Ce||ze)&&(Ae.selectedOpacityFn=function(ot){var ht=ot.mo===void 0?Q.opacity:ot.mo;return ot.selected?Ce?Me:ht:ze?Re:i*ht});var le=Q.color,de=oe.color,be=ce.color;(de||be)&&(Ae.selectedColorFn=function(ot){var ht=ot.mcc||le;return ot.selected?de||ht:be||ht});var Fe=Q.size,Ve=oe.size,He=ce.size,rt=Ve!==void 0,tt=He!==void 0;return d.traceIs(xe,"symbols")&&(rt||tt)&&(Ae.selectedSizeFn=function(ot){var ht=ot.mrc||Fe/2;return ot.selected?rt?Ve/2:ht:tt?He/2:ht}),Ae},b.makeSelectedTextStyleFns=function(xe){var Ae={},Se=xe.selected||{},Te=xe.unselected||{},Q=xe.textfont||{},oe=Se.textfont||{},ce=Te.textfont||{},me=Q.color,Me=oe.color,Re=ce.color;return Ae.selectedTextColorFn=function(Ce){var ze=Ce.tc||me;return Ce.selected?Me||ze:Re||(Me?ze:s.addOpacity(ze,i))},Ae},b.selectedPointStyle=function(xe,Ae){if(xe.size()&&Ae.selectedpoints){var Se=b.makeSelectedPointStyleFns(Ae),Te=Ae.marker||{},Q=[];Se.selectedOpacityFn&&Q.push(function(oe,ce){oe.style("opacity",Se.selectedOpacityFn(ce))}),Se.selectedColorFn&&Q.push(function(oe,ce){s.fill(oe,Se.selectedColorFn(ce))}),Se.selectedSizeFn&&Q.push(function(oe,ce){var me=ce.mx||Te.symbol||0,Me=Se.selectedSizeFn(ce);oe.attr("d",p(b.symbolNumber(me),Me,Ie(ce,Ae),J(ce,Ae))),ce.mrc2=Me}),Q.length&&xe.each(function(oe){for(var ce=A.select(this),me=0;me<Q.length;me++)Q[me](ce,oe)})}},b.tryColorscale=function(xe,Ae){var Se=Ae?k.nestedProperty(xe,Ae).get():xe;if(Se){var Te=Se.color;if((Se.colorscale||Se._colorAx)&&k.isArrayOrTypedArray(Te))return t.makeColorScaleFuncFromTrace(Se)}return k.identity};var _,E,L={start:1,end:-1,middle:0,bottom:1,top:-1};function C(xe,Ae,Se,Te,Q){var oe=A.select(xe.node().parentNode),ce=Ae.indexOf("top")!==-1?"top":Ae.indexOf("bottom")!==-1?"bottom":"middle",me=Ae.indexOf("left")!==-1?"end":Ae.indexOf("right")!==-1?"start":"middle",Me=Te?Te/.8+1:0,Re=(r.lineCount(xe)-1)*a+1,Ce=L[me]*Me,ze=.75*Se+L[ce]*Me+(L[ce]-1)*Re*Se/2;xe.attr("text-anchor",me),Q||oe.attr("transform",o(Ce,ze))}function P(xe,Ae){var Se=xe.ts||Ae.textfont.size;return T(Se)&&Se>0?Se:0}function I(xe,Ae,Se){return Se&&(xe=B(xe)),Ae?z(xe[1]):U(xe[0])}function U(xe){var Ae=A.round(xe,2);return _=Ae,Ae}function z(xe){var Ae=A.round(xe,2);return E=Ae,Ae}function H(xe,Ae,Se,Te){var Q=xe[0]-Ae[0],oe=xe[1]-Ae[1],ce=Se[0]-Ae[0],me=Se[1]-Ae[1],Me=Math.pow(Q*Q+oe*oe,.25),Re=Math.pow(ce*ce+me*me,.25),Ce=(Re*Re*Q-Me*Me*ce)*Te,ze=(Re*Re*oe-Me*Me*me)*Te,le=3*Re*(Me+Re),de=3*Me*(Me+Re);return[[U(Ae[0]+(le&&Ce/le)),z(Ae[1]+(le&&ze/le))],[U(Ae[0]-(de&&Ce/de)),z(Ae[1]-(de&&ze/de))]]}b.textPointStyle=function(xe,Ae,Se){if(xe.size()){var Te;if(Ae.selectedpoints){var Q=b.makeSelectedTextStyleFns(Ae);Te=Q.selectedTextColorFn}var oe=Ae.texttemplate,ce=Se._fullLayout;xe.each(function(me){var Me=A.select(this),Re=oe?k.extractOption(me,Ae,"txt","texttemplate"):k.extractOption(me,Ae,"tx","text");if(Re||Re===0){if(oe){var Ce=Ae._module.formatLabels,ze=Ce?Ce(me,Ae,ce):{},le={};f(le,Ae,me.i);var de=Ae._meta||{};Re=k.texttemplateString(Re,ze,ce._d3locale,le,me,de)}var be=me.tp||Ae.textposition,Fe=P(me,Ae),Ve=Te?Te(me):me.tc||Ae.textfont.color;Me.call(b.font,me.tf||Ae.textfont.family,Fe,Ve).text(Re).call(r.convertToTspans,Se).call(C,be,Fe,me.mrc)}else Me.remove()})}},b.selectedTextStyle=function(xe,Ae){if(xe.size()&&Ae.selectedpoints){var Se=b.makeSelectedTextStyleFns(Ae);xe.each(function(Te){var Q=A.select(this),oe=Se.selectedTextColorFn(Te),ce=Te.tp||Ae.textposition,me=P(Te,Ae);s.fill(Q,oe);var Me=d.traceIs(Ae,"bar-like");C(Q,ce,me,Te.mrc2||Te.mrc,Me)})}},b.smoothopen=function(xe,Ae){if(xe.length<3)return"M"+xe.join("L");var Se,Te="M"+xe[0],Q=[];for(Se=1;Se<xe.length-1;Se++)Q.push(H(xe[Se-1],xe[Se],xe[Se+1],Ae));for(Te+="Q"+Q[0][0]+" "+xe[1],Se=2;Se<xe.length-1;Se++)Te+="C"+Q[Se-2][1]+" "+Q[Se-1][0]+" "+xe[Se];return Te+"Q"+Q[xe.length-3][1]+" "+xe[xe.length-1]},b.smoothclosed=function(xe,Ae){if(xe.length<3)return"M"+xe.join("L")+"Z";var Se,Te="M"+xe[0],Q=xe.length-1,oe=[H(xe[Q],xe[0],xe[1],Ae)];for(Se=1;Se<Q;Se++)oe.push(H(xe[Se-1],xe[Se],xe[Se+1],Ae));for(oe.push(H(xe[Q-1],xe[Q],xe[0],Ae)),Se=1;Se<=Q;Se++)Te+="C"+oe[Se-1][1]+" "+oe[Se][0]+" "+xe[Se];return Te+"C"+oe[Q][1]+" "+oe[0][0]+" "+xe[0]+"Z"};var F={hv:function(xe,Ae,Se){return"H"+U(Ae[0])+"V"+I(Ae,1,Se)},vh:function(xe,Ae,Se){return"V"+z(Ae[1])+"H"+I(Ae,0,Se)},hvh:function(xe,Ae,Se){return"H"+U((xe[0]+Ae[0])/2)+"V"+z(Ae[1])+"H"+I(Ae,0,Se)},vhv:function(xe,Ae,Se){return"V"+z((xe[1]+Ae[1])/2)+"H"+U(Ae[0])+"V"+I(Ae,1,Se)}},N=function(xe,Ae,Se){return"L"+I(Ae,0,Se)+","+I(Ae,1,Se)};function B(xe,Ae){var Se=xe.backoff,Te=xe.trace,Q=xe.d,oe=xe.i;if(Se&&Te&&Te.marker&&Te.marker.angle%360==0&&Te.line&&Te.line.shape!=="spline"){var ce=k.isArrayOrTypedArray(Se),me=xe,Me=Ae?Ae[0]:_||0,Re=Ae?Ae[1]:E||0,Ce=me[0],ze=me[1],le=Ce-Me,de=ze-Re,be=Math.atan2(de,le),Fe=ce?Se[oe]:Se;if(Fe==="auto"){var Ve=me.i;Te.type==="scatter"&&Ve--;var He=me.marker,rt=He.symbol;k.isArrayOrTypedArray(rt)&&(rt=rt[Ve]);var tt=He.size;k.isArrayOrTypedArray(tt)&&(tt=tt[Ve]),Fe=He?b.symbolBackOffs[b.symbolNumber(rt)]*tt:0,Fe+=b.getMarkerStandoff(Q[Ve],Te)||0}var ot=Ce-Fe*Math.cos(be),ht=ze-Fe*Math.sin(be);(ot<=Ce&&ot>=Me||ot>=Ce&&ot<=Me)&&(ht<=ze&&ht>=Re||ht>=ze&&ht<=Re)&&(xe=[ot,ht])}return xe}b.steps=function(xe){var Ae=F[xe]||N;return function(Se){for(var Te="M"+U(Se[0][0])+","+z(Se[0][1]),Q=Se.length,oe=1;oe<Q;oe++)Te+=Ae(Se[oe-1],Se[oe],oe===Q-1);return Te}},b.applyBackoff=B,b.makeTester=function(){var xe=k.ensureSingleById(A.select("body"),"svg","js-plotly-tester",function(Se){Se.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Ae=k.ensureSingle(xe,"path","js-reference-point",function(Se){Se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});b.tester=xe,b.testref=Ae},b.savedBBoxes={};var j=0;function K(xe){var Ae=xe.getAttribute("data-unformatted");if(Ae!==null)return Ae+xe.getAttribute("data-math")+xe.getAttribute("text-anchor")+xe.getAttribute("style")}function G(xe,Ae){if(!xe)return null;var Se=Ae._context,Te=Se._exportedPlot?"":Se._baseUrl||"";return Te?"url('"+Te+"#"+xe+"')":"url(#"+xe+")"}b.bBox=function(xe,Ae,Se){var Te,Q,oe;if(Se||(Se=K(xe)),Se){if(Te=b.savedBBoxes[Se])return k.extendFlat({},Te)}else if(xe.childNodes.length===1){var ce=xe.childNodes[0];if(Se=K(ce)){var me=+ce.getAttribute("x")||0,Me=+ce.getAttribute("y")||0,Re=ce.getAttribute("transform");if(!Re){var Ce=b.bBox(ce,!1,Se);return me&&(Ce.left+=me,Ce.right+=me),Me&&(Ce.top+=Me,Ce.bottom+=Me),Ce}if(Se+="~"+me+"~"+Me+"~"+Re,Te=b.savedBBoxes[Se])return k.extendFlat({},Te)}}Ae?Q=xe:(oe=b.tester.node(),Q=xe.cloneNode(!0),oe.appendChild(Q)),A.select(Q).attr("transform",null).call(r.positionText,0,0);var ze=Q.getBoundingClientRect(),le=b.testref.node().getBoundingClientRect();Ae||oe.removeChild(Q);var de={height:ze.height,width:ze.width,left:ze.left-le.left,top:ze.top-le.top,right:ze.right-le.left,bottom:ze.bottom-le.top};return j>=1e4&&(b.savedBBoxes={},j=0),Se&&(b.savedBBoxes[Se]=de),j++,k.extendFlat({},de)},b.setClipUrl=function(xe,Ae,Se){xe.attr("clip-path",G(Ae,Se))},b.getTranslate=function(xe){var Ae=(xe[xe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Se,Te,Q){return[Te,Q].join(" ")}).split(" ");return{x:+Ae[0]||0,y:+Ae[1]||0}},b.setTranslate=function(xe,Ae,Se){var Te=xe.attr?"attr":"getAttribute",Q=xe.attr?"attr":"setAttribute",oe=xe[Te]("transform")||"";return Ae=Ae||0,Se=Se||0,oe=oe.replace(/(\btranslate\(.*?\);?)/,"").trim(),oe=(oe+=o(Ae,Se)).trim(),xe[Q]("transform",oe),oe},b.getScale=function(xe){var Ae=(xe[xe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Se,Te,Q){return[Te,Q].join(" ")}).split(" ");return{x:+Ae[0]||1,y:+Ae[1]||1}},b.setScale=function(xe,Ae,Se){var Te=xe.attr?"attr":"getAttribute",Q=xe.attr?"attr":"setAttribute",oe=xe[Te]("transform")||"";return Ae=Ae||1,Se=Se||1,oe=oe.replace(/(\bscale\(.*?\);?)/,"").trim(),oe=(oe+="scale("+Ae+","+Se+")").trim(),xe[Q]("transform",oe),oe};var V=/\s*sc.*/;b.setPointGroupScale=function(xe,Ae,Se){if(Ae=Ae||1,Se=Se||1,xe){var Te=Ae===1&&Se===1?"":"scale("+Ae+","+Se+")";xe.each(function(){var Q=(this.getAttribute("transform")||"").replace(V,"");Q=(Q+=Te).trim(),this.setAttribute("transform",Q)})}};var W=/translate\([^)]*\)\s*$/;function J(xe,Ae){var Se;return xe&&(Se=xe.mf),Se===void 0&&(Se=Ae.marker&&Ae.marker.standoff||0),Ae._geo||Ae._xA?Se:-Se}b.setTextPointsScale=function(xe,Ae,Se){xe&&xe.each(function(){var Te,Q=A.select(this),oe=Q.select("text");if(oe.node()){var ce=parseFloat(oe.attr("x")||0),me=parseFloat(oe.attr("y")||0),Me=(Q.attr("transform")||"").match(W);Te=Ae===1&&Se===1?[]:[o(ce,me),"scale("+Ae+","+Se+")",o(-ce,-me)],Me&&Te.push(Me),Q.attr("transform",Te.join(""))}})},b.getMarkerStandoff=J;var X,ee,re,ie,se,fe,ye=Math.atan2,ge=Math.cos,he=Math.sin;function ve(xe,Ae){var Se=Ae[0],Te=Ae[1];return[Se*ge(xe)-Te*he(xe),Se*he(xe)+Te*ge(xe)]}function Ie(xe,Ae){var Se,Te,Q=xe.ma;Q===void 0&&(Q=Ae.marker.angle||0);var oe=Ae.marker.angleref;if(oe==="previous"||oe==="north"){if(Ae._geo){var ce=Ae._geo.project(xe.lonlat);Se=ce[0],Te=ce[1]}else{var me=Ae._xA,Me=Ae._yA;if(!me||!Me)return 90;Se=me.c2p(xe.x),Te=Me.c2p(xe.y)}if(Ae._geo){var Re,Ce=xe.lonlat[0],ze=xe.lonlat[1],le=Ae._geo.project([Ce,ze+1e-5]),de=Ae._geo.project([Ce+1e-5,ze]),be=ye(de[1]-Te,de[0]-Se),Fe=ye(le[1]-Te,le[0]-Se);if(oe==="north")Re=Q/180*Math.PI;else if(oe==="previous"){var Ve=Ce/180*Math.PI,He=ze/180*Math.PI,rt=X/180*Math.PI,tt=ee/180*Math.PI,ot=rt-Ve,ht=ge(tt)*he(ot),_t=he(tt)*ge(He)-ge(tt)*he(He)*ge(ot);Re=-ye(ht,_t)-Math.PI,X=Ce,ee=ze}var dt=ve(be,[ge(Re),0]),bt=ve(Fe,[he(Re),0]);Q=ye(dt[1]+bt[1],dt[0]+bt[0])/Math.PI*180,oe!=="previous"||fe===Ae.uid&&xe.i===se+1||(Q=null)}if(oe==="previous"&&!Ae._geo)if(fe===Ae.uid&&xe.i===se+1&&T(Se)&&T(Te)){var St=Se-re,Et=Te-ie,zt=Ae.line&&Ae.line.shape||"",Ut=zt.slice(zt.length-1);Ut==="h"&&(Et=0),Ut==="v"&&(St=0),Q+=ye(Et,St)/Math.PI*180+90}else Q=null}return re=Se,ie=Te,se=xe.i,fe=Ae.uid,Q}b.getMarkerAngle=Ie},90998:function($,R,e){var A,k,l,T,x=e(95616),d=e(39898).round,s="M0,0Z",t=Math.sqrt(2),o=Math.sqrt(3),r=Math.PI,n=Math.cos,a=Math.sin;function i(h){return h===null}function c(h,f,b){if(!(h&&h%360!=0||f))return b;if(l===h&&T===f&&A===b)return k;function v(I,U){var z=n(I),H=a(I),F=U[0],N=U[1]+(f||0);return[F*z-N*H,F*H+N*z]}l=h,T=f,A=b;for(var g=h/180*r,y=0,p=0,m=x(b),w="",u=0;u<m.length;u++){var S=m[u],_=S[0],E=y,L=p;if(_==="M"||_==="L")y=+S[1],p=+S[2];else if(_==="m"||_==="l")y+=+S[1],p+=+S[2];else if(_==="H")y=+S[1];else if(_==="h")y+=+S[1];else if(_==="V")p=+S[1];else if(_==="v")p+=+S[1];else if(_==="A"){y=+S[1],p=+S[2];var C=v(g,[+S[6],+S[7]]);S[6]=C[0],S[7]=C[1],S[3]=+S[3]+h}_!=="H"&&_!=="V"||(_="L"),_!=="h"&&_!=="v"||(_="l"),_!=="m"&&_!=="l"||(y-=E,p-=L);var P=v(g,[y,p]);_!=="H"&&_!=="V"||(_="L"),_!=="M"&&_!=="L"&&_!=="m"&&_!=="l"||(S[1]=P[0],S[2]=P[1]),S[0]=_,w+=S[0]+S.slice(1).join(",")}return k=w,w}$.exports={circle:{n:0,f:function(h,f,b){if(i(f))return s;var v=d(h,2),g="M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z";return b?c(f,b,g):g}},square:{n:1,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")}},diamond:{n:2,f:function(h,f,b){if(i(f))return s;var v=d(1.3*h,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"Z")}},cross:{n:3,f:function(h,f,b){if(i(f))return s;var v=d(.4*h,2),g=d(1.2*h,2);return c(f,b,"M"+g+","+v+"H"+v+"V"+g+"H-"+v+"V"+v+"H-"+g+"V-"+v+"H-"+v+"V-"+g+"H"+v+"V-"+v+"H"+g+"Z")}},x:{n:4,f:function(h,f,b){if(i(f))return s;var v=d(.8*h/t,2),g="l"+v+","+v,y="l"+v+",-"+v,p="l-"+v+",-"+v,m="l-"+v+","+v;return c(f,b,"M0,"+v+g+y+p+y+p+m+p+m+g+m+g+"Z")}},"triangle-up":{n:5,f:function(h,f,b){if(i(f))return s;var v=d(2*h/o,2);return c(f,b,"M-"+v+","+d(h/2,2)+"H"+v+"L0,-"+d(h,2)+"Z")}},"triangle-down":{n:6,f:function(h,f,b){if(i(f))return s;var v=d(2*h/o,2);return c(f,b,"M-"+v+",-"+d(h/2,2)+"H"+v+"L0,"+d(h,2)+"Z")}},"triangle-left":{n:7,f:function(h,f,b){if(i(f))return s;var v=d(2*h/o,2);return c(f,b,"M"+d(h/2,2)+",-"+v+"V"+v+"L-"+d(h,2)+",0Z")}},"triangle-right":{n:8,f:function(h,f,b){if(i(f))return s;var v=d(2*h/o,2);return c(f,b,"M-"+d(h/2,2)+",-"+v+"V"+v+"L"+d(h,2)+",0Z")}},"triangle-ne":{n:9,f:function(h,f,b){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,b,"M-"+g+",-"+v+"H"+v+"V"+g+"Z")}},"triangle-se":{n:10,f:function(h,f,b){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,b,"M"+v+",-"+g+"V"+v+"H-"+g+"Z")}},"triangle-sw":{n:11,f:function(h,f,b){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,b,"M"+g+","+v+"H-"+v+"V-"+g+"Z")}},"triangle-nw":{n:12,f:function(h,f,b){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,b,"M-"+v+","+g+"V-"+v+"H"+g+"Z")}},pentagon:{n:13,f:function(h,f,b){if(i(f))return s;var v=d(.951*h,2),g=d(.588*h,2),y=d(-h,2),p=d(-.309*h,2);return c(f,b,"M"+v+","+p+"L"+g+","+d(.809*h,2)+"H-"+g+"L-"+v+","+p+"L0,"+y+"Z")}},hexagon:{n:14,f:function(h,f,b){if(i(f))return s;var v=d(h,2),g=d(h/2,2),y=d(h*o/2,2);return c(f,b,"M"+y+",-"+g+"V"+g+"L0,"+v+"L-"+y+","+g+"V-"+g+"L0,-"+v+"Z")}},hexagon2:{n:15,f:function(h,f,b){if(i(f))return s;var v=d(h,2),g=d(h/2,2),y=d(h*o/2,2);return c(f,b,"M-"+g+","+y+"H"+g+"L"+v+",0L"+g+",-"+y+"H-"+g+"L-"+v+",0Z")}},octagon:{n:16,f:function(h,f,b){if(i(f))return s;var v=d(.924*h,2),g=d(.383*h,2);return c(f,b,"M-"+g+",-"+v+"H"+g+"L"+v+",-"+g+"V"+g+"L"+g+","+v+"H-"+g+"L-"+v+","+g+"V-"+g+"Z")}},star:{n:17,f:function(h,f,b){if(i(f))return s;var v=1.4*h,g=d(.225*v,2),y=d(.951*v,2),p=d(.363*v,2),m=d(.588*v,2),w=d(-v,2),u=d(-.309*v,2),S=d(.118*v,2),_=d(.809*v,2);return c(f,b,"M"+g+","+u+"H"+y+"L"+p+","+S+"L"+m+","+_+"L0,"+d(.382*v,2)+"L-"+m+","+_+"L-"+p+","+S+"L-"+y+","+u+"H-"+g+"L0,"+w+"Z")}},hexagram:{n:18,f:function(h,f,b){if(i(f))return s;var v=d(.66*h,2),g=d(.38*h,2),y=d(.76*h,2);return c(f,b,"M-"+y+",0l-"+g+",-"+v+"h"+y+"l"+g+",-"+v+"l"+g+","+v+"h"+y+"l-"+g+","+v+"l"+g+","+v+"h-"+y+"l-"+g+","+v+"l-"+g+",-"+v+"h-"+y+"Z")}},"star-triangle-up":{n:19,f:function(h,f,b){if(i(f))return s;var v=d(h*o*.8,2),g=d(.8*h,2),y=d(1.6*h,2),p=d(4*h,2),m="A "+p+","+p+" 0 0 1 ";return c(f,b,"M-"+v+","+g+m+v+","+g+m+"0,-"+y+m+"-"+v+","+g+"Z")}},"star-triangle-down":{n:20,f:function(h,f,b){if(i(f))return s;var v=d(h*o*.8,2),g=d(.8*h,2),y=d(1.6*h,2),p=d(4*h,2),m="A "+p+","+p+" 0 0 1 ";return c(f,b,"M"+v+",-"+g+m+"-"+v+",-"+g+m+"0,"+y+m+v+",-"+g+"Z")}},"star-square":{n:21,f:function(h,f,b){if(i(f))return s;var v=d(1.1*h,2),g=d(2*h,2),y="A "+g+","+g+" 0 0 1 ";return c(f,b,"M-"+v+",-"+v+y+"-"+v+","+v+y+v+","+v+y+v+",-"+v+y+"-"+v+",-"+v+"Z")}},"star-diamond":{n:22,f:function(h,f,b){if(i(f))return s;var v=d(1.4*h,2),g=d(1.9*h,2),y="A "+g+","+g+" 0 0 1 ";return c(f,b,"M-"+v+",0"+y+"0,"+v+y+v+",0"+y+"0,-"+v+y+"-"+v+",0Z")}},"diamond-tall":{n:23,f:function(h,f,b){if(i(f))return s;var v=d(.7*h,2),g=d(1.4*h,2);return c(f,b,"M0,"+g+"L"+v+",0L0,-"+g+"L-"+v+",0Z")}},"diamond-wide":{n:24,f:function(h,f,b){if(i(f))return s;var v=d(1.4*h,2),g=d(.7*h,2);return c(f,b,"M0,"+g+"L"+v+",0L0,-"+g+"L-"+v+",0Z")}},hourglass:{n:25,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"H-"+v+"L"+v+",-"+v+"H-"+v+"Z")},noDot:!0},bowtie:{n:26,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"V-"+v+"L-"+v+","+v+"V-"+v+"Z")},noDot:!0},"circle-cross":{n:27,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(h,f,b){if(i(f))return s;var v=d(h,2),g=d(h/t,2);return c(f,b,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(h,f,b){if(i(f))return s;var v=d(1.3*h,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM0,-"+v+"V"+v+"M-"+v+",0H"+v)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(h,f,b){if(i(f))return s;var v=d(1.3*h,2),g=d(.65*h,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM-"+g+",-"+g+"L"+g+","+g+"M-"+g+","+g+"L"+g+",-"+g)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(h,f,b){if(i(f))return s;var v=d(1.4*h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(h,f,b){if(i(f))return s;var v=d(1.2*h,2),g=d(.85*h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(h,f,b){if(i(f))return s;var v=d(h/2,2),g=d(h,2);return c(f,b,"M"+v+","+g+"V-"+g+"M"+(v-g)+",-"+g+"V"+g+"M"+g+","+v+"H-"+g+"M-"+g+","+(v-g)+"H"+g)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(h,f,b){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,b,"M-"+v+","+y+"L0,0M"+v+","+y+"L0,0M0,-"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(h,f,b){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,b,"M-"+v+",-"+y+"L0,0M"+v+",-"+y+"L0,0M0,"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(h,f,b){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,b,"M"+y+","+v+"L0,0M"+y+",-"+v+"L0,0M-"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(h,f,b){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,b,"M-"+y+","+v+"L0,0M-"+y+",-"+v+"L0,0M"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(h,f,b){if(i(f))return s;var v=d(1.4*h,2);return c(f,b,"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(h,f,b){if(i(f))return s;var v=d(1.4*h,2);return c(f,b,"M0,"+v+"V-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M0,0L-"+v+","+d(2*h,2)+"H"+v+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M0,0L-"+v+",-"+d(2*h,2)+"H"+v+"Z")},noDot:!0},"arrow-left":{n:47,f:function(h,f,b){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,b,"M0,0L"+v+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-right":{n:48,f:function(h,f,b){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,b,"M0,0L-"+v+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M-"+v+",0H"+v+"M0,0L-"+v+","+d(2*h,2)+"H"+v+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M-"+v+",0H"+v+"M0,0L-"+v+",-"+d(2*h,2)+"H"+v+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(h,f,b){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,b,"M0,-"+g+"V"+g+"M0,0L"+v+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(h,f,b){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,b,"M0,-"+g+"V"+g+"M0,0L-"+v+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(h,f,b){if(i(f))return s;var v=r/2.5,g=2*h*n(v),y=2*h*a(v);return c(f,b,"M0,0L"+-g+","+y+"L"+g+","+y+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(h,f,b){if(i(f))return s;var v=r/4,g=2*h*n(v),y=2*h*a(v);return c(f,b,"M0,0L"+-g+","+y+"A "+2*h+","+2*h+" 0 0 1 "+g+","+y+"Z")},backoff:.4,noDot:!0}}},25673:function($){$.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function($,R,e){var A=e(92770),k=e(73972),l=e(89298),T=e(71828),x=e(45827);function d(s,t,o,r){var n=t["error_"+r]||{},a=[];if(n.visible&&["linear","log"].indexOf(o.type)!==-1){for(var i=x(n),c=0;c<s.length;c++){var h=s[c],f=h.i;if(f===void 0)f=c;else if(f===null)continue;var b=h[r];if(A(o.c2l(b))){var v=i(b,f);if(A(v[0])&&A(v[1])){var g=h[r+"s"]=b-v[0],y=h[r+"h"]=b+v[1];a.push(g,y)}}}var p=o._id,m=t._extremes[p],w=l.findExtremes(o,a,T.extendFlat({tozero:m.opts.tozero},{padded:!0}));m.min=m.min.concat(w.min),m.max=m.max.concat(w.max)}}$.exports=function(s){for(var t=s.calcdata,o=0;o<t.length;o++){var r=t[o],n=r[0].trace;if(n.visible===!0&&k.traceIs(n,"errorBarsOK")){var a=l.getFromId(s,n.xaxis),i=l.getFromId(s,n.yaxis);d(r,n,a,"x"),d(r,n,i,"y")}}}},45827:function($){function R(e,A){return e==="percent"?function(k){return Math.abs(k*A/100)}:e==="constant"?function(){return Math.abs(A)}:e==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}$.exports=function(e){var A=e.type,k=e.symmetric;if(A==="data"){var l=e.array||[];if(k)return function(s,t){var o=+l[t];return[o,o]};var T=e.arrayminus||[];return function(s,t){var o=+l[t],r=+T[t];return isNaN(o)&&isNaN(r)?[NaN,NaN]:[r||0,o||0]}}var x=R(A,e.value),d=R(A,e.valueminus);return k||e.valueminus===void 0?function(s){var t=x(s);return[t,t]}:function(s){return[d(s),x(s)]}}},97587:function($,R,e){var A=e(92770),k=e(73972),l=e(71828),T=e(44467),x=e(25673);$.exports=function(d,s,t,o){var r="error_"+o.axis,n=T.newContainer(s,r),a=d[r]||{};function i(b,v){return l.coerce(a,n,x,b,v)}if(i("visible",a.array!==void 0||a.value!==void 0||a.type==="sqrt")!==!1){var c=i("type","array"in a?"data":"percent"),h=!0;c!=="sqrt"&&(h=i("symmetric",!((c==="data"?"arrayminus":"valueminus")in a))),c==="data"?(i("array"),i("traceref"),h||(i("arrayminus"),i("tracerefminus"))):c!=="percent"&&c!=="constant"||(i("value"),h||i("valueminus"));var f="copy_"+o.inherit+"style";o.inherit&&(s["error_"+o.inherit]||{}).visible&&i(f,!(a.color||A(a.thickness)||A(a.width))),o.inherit&&n[f]||(i("color",t),i("thickness"),i("width",k.traceIs(s,"gl3d")?0:4))}}},37369:function($,R,e){var A=e(71828),k=e(30962).overrideAll,l=e(25673),T={error_x:A.extendFlat({},l),error_y:A.extendFlat({},l)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var x={error_x:A.extendFlat({},l),error_y:A.extendFlat({},l),error_z:A.extendFlat({},l)};delete x.error_x.copy_ystyle,delete x.error_y.copy_ystyle,delete x.error_z.copy_ystyle,delete x.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(x,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:e(97587),calc:e(84532),makeComputeError:e(45827),plot:e(19398),style:e(62662),hoverInfo:function(d,s,t){(s.error_y||{}).visible&&(t.yerr=d.yh-d.y,s.error_y.symmetric||(t.yerrneg=d.y-d.ys)),(s.error_x||{}).visible&&(t.xerr=d.xh-d.x,s.error_x.symmetric||(t.xerrneg=d.x-d.xs))}}},19398:function($,R,e){var A=e(39898),k=e(92770),l=e(91424),T=e(34098);$.exports=function(x,d,s,t){var o=s.xaxis,r=s.yaxis,n=t&&t.duration>0;d.each(function(a){var i,c=a[0].trace,h=c.error_x||{},f=c.error_y||{};c.ids&&(i=function(y){return y.id});var b=T.hasMarkers(c)&&c.marker.maxdisplayed>0;f.visible||h.visible||(a=[]);var v=A.select(this).selectAll("g.errorbar").data(a,i);if(v.exit().remove(),a.length){h.visible||v.selectAll("path.xerror").remove(),f.visible||v.selectAll("path.yerror").remove(),v.style("opacity",1);var g=v.enter().append("g").classed("errorbar",!0);n&&g.style("opacity",0).transition().duration(t.duration).style("opacity",1),l.setClipUrl(v,s.layerClipId,x),v.each(function(y){var p=A.select(this),m=function(L,C,P){var I={x:C.c2p(L.x),y:P.c2p(L.y)};return L.yh!==void 0&&(I.yh=P.c2p(L.yh),I.ys=P.c2p(L.ys),k(I.ys)||(I.noYS=!0,I.ys=P.c2p(L.ys,!0))),L.xh!==void 0&&(I.xh=C.c2p(L.xh),I.xs=C.c2p(L.xs),k(I.xs)||(I.noXS=!0,I.xs=C.c2p(L.xs,!0))),I}(y,o,r);if(!b||y.vis){var w,u=p.select("path.yerror");if(f.visible&&k(m.x)&&k(m.yh)&&k(m.ys)){var S=f.width;w="M"+(m.x-S)+","+m.yh+"h"+2*S+"m-"+S+",0V"+m.ys,m.noYS||(w+="m-"+S+",0h"+2*S),u.size()?n&&(u=u.transition().duration(t.duration).ease(t.easing)):u=p.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),u.attr("d",w)}else u.remove();var _=p.select("path.xerror");if(h.visible&&k(m.y)&&k(m.xh)&&k(m.xs)){var E=(h.copy_ystyle?f:h).width;w="M"+m.xh+","+(m.y-E)+"v"+2*E+"m0,-"+E+"H"+m.xs,m.noXS||(w+="m0,-"+E+"v"+2*E),_.size()?n&&(_=_.transition().duration(t.duration).ease(t.easing)):_=p.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),_.attr("d",w)}else _.remove()}})}})}},62662:function($,R,e){var A=e(39898),k=e(7901);$.exports=function(l){l.each(function(T){var x=T[0].trace,d=x.error_y||{},s=x.error_x||{},t=A.select(this);t.selectAll("path.yerror").style("stroke-width",d.thickness+"px").call(k.stroke,d.color),s.copy_ystyle&&(s=d),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color)})}},77914:function($,R,e){var A=e(41940),k=e(528).hoverlabel,l=e(1426).extendFlat;$.exports={hoverlabel:{bgcolor:l({},k.bgcolor,{arrayOk:!0}),bordercolor:l({},k.bordercolor,{arrayOk:!0}),font:A({arrayOk:!0,editType:"none"}),align:l({},k.align,{arrayOk:!0}),namelength:l({},k.namelength,{arrayOk:!0}),editType:"none"}}},30732:function($,R,e){var A=e(71828),k=e(73972);function l(T,x,d,s){s=s||A.identity,Array.isArray(T)&&(x[0][d]=s(T))}$.exports=function(T){var x=T.calcdata,d=T._fullLayout;function s(a){return function(i){return A.coerceHoverinfo({hoverinfo:i},{_module:a._module},d)}}for(var t=0;t<x.length;t++){var o=x[t],r=o[0].trace;if(!k.traceIs(r,"pie-like")){var n=k.traceIs(r,"2dMap")?l:A.fillArray;n(r.hoverinfo,o,"hi",s(r)),r.hovertemplate&&n(r.hovertemplate,o,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,o,"hbg"),n(r.hoverlabel.bordercolor,o,"hbc"),n(r.hoverlabel.font.size,o,"hts"),n(r.hoverlabel.font.color,o,"htc"),n(r.hoverlabel.font.family,o,"htf"),n(r.hoverlabel.namelength,o,"hnl"),n(r.hoverlabel.align,o,"hta"))}}}},75914:function($,R,e){var A=e(73972),k=e(88335).hover;$.exports=function(l,T,x){var d=A.getComponentMethod("annotations","onClick")(l,l._hoverdata);function s(){l.emit("plotly_click",{points:l._hoverdata,event:T})}x!==void 0&&k(l,T,x,!0),l._hoverdata&&T&&T.target&&(d&&d.then?d.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},26675:function($){$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function($,R,e){var A=e(71828),k=e(77914),l=e(38048);$.exports=function(T,x,d,s){var t=A.extendFlat({},s.hoverlabel);x.hovertemplate&&(t.namelength=-1),l(T,x,function(o,r){return A.coerce(T,x,k,o,r)},t)}},23469:function($,R,e){var A=e(71828);R.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},R.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var o=s.xaxes||[],r=s.yaxes||[],n=0;n<o.length;n++)for(var a=0;a<r.length;a++)if(t.indexOf(o[n]+r[a])!==-1)return!0;return!1}return t.indexOf(R.getSubplot(s))!==-1},R.flat=function(s,t){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=t;return o},R.p2c=function(s,t){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=s[r].p2c(t);return o},R.getDistanceFunction=function(s,t,o,r){return s==="closest"?r||R.quadrature(t,o):s.charAt(0)==="x"?t:o},R.getClosest=function(s,t,o){if(o.index!==!1)o.index>=0&&o.index<s.length?o.distance=0:o.index=!1;else for(var r=0;r<s.length;r++){var n=t(s[r]);n<=o.distance&&(o.index=r,o.distance=n)}return o},R.inbox=function(s,t,o){return s*t<0||s===0?o:1/0},R.quadrature=function(s,t){return function(o){var r=s(o),n=t(o);return Math.sqrt(r*r+n*n)}},R.makeEventData=function(s,t,o){var r="index"in s?s.index:s.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var a=t._indexToPoints[r];a.length===1?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=r;return t._module.eventData?n=t._module.eventData(n,s,t,o,r):("xVal"in s?n.x=s.xVal:"x"in s&&(n.x=s.x),"yVal"in s?n.y=s.yVal:"y"in s&&(n.y=s.y),s.xa&&(n.xaxis=s.xa),s.ya&&(n.yaxis=s.ya),s.zLabelVal!==void 0&&(n.z=s.zLabelVal)),R.appendArrayPointValue(n,t,r),n},R.appendArrayPointValue=function(s,t,o){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],i=l(a);if(s[i]===void 0){var c=T(A.nestedProperty(t,a).get(),o);c!==void 0&&(s[i]=c)}}},R.appendArrayMultiPointValues=function(s,t,o){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],i=l(a);if(s[i]===void 0){for(var c=A.nestedProperty(t,a).get(),h=new Array(o.length),f=0;f<o.length;f++)h[f]=T(c,o[f]);s[i]=h}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function l(s){return k[s]||s}function T(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var x={x:!0,y:!0},d={"x unified":!0,"y unified":!0};R.isUnifiedHover=function(s){return typeof s=="string"&&!!d[s]},R.isXYhover=function(s){return typeof s=="string"&&!!x[s]}},88335:function($,R,e){var A=e(39898),k=e(92770),l=e(84267),T=e(71828),x=T.strTranslate,d=T.strRotate,s=e(11086),t=e(63893),o=e(39918),r=e(91424),n=e(7901),a=e(28569),i=e(89298),c=e(73972),h=e(23469),f=e(26675),b=e(99017),v=e(43969),g=f.YANGLE,y=Math.PI*g/180,p=1/Math.sin(y),m=Math.cos(y),w=Math.sin(y),u=f.HOVERARROWSIZE,S=f.HOVERTEXTPAD,_={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function L(V){return[V.trace.index,V.index,V.x0,V.y0,V.name,V.attr,V.xa?V.xa._id:"",V.ya?V.ya._id:""].join(",")}R.hover=function(V,W,J,X){V=T.getGraphDiv(V);var ee=W.target;T.throttle(V._fullLayout._uid+f.HOVERID,f.HOVERMINTIME,function(){(function(re,ie,se,fe,ye){se||(se="xy");var ge=Array.isArray(se)?se:[se],he=re._fullLayout,ve=he._plots||[],Ie=ve[se],xe=he._has("cartesian");if(Ie){var Ae=Ie.overlays.map(function(Vn){return Vn.id});ge=ge.concat(Ae)}for(var Se=ge.length,Te=new Array(Se),Q=new Array(Se),oe=!1,ce=0;ce<Se;ce++){var me=ge[ce];if(ve[me])oe=!0,Te[ce]=ve[me].xaxis,Q[ce]=ve[me].yaxis;else{if(!he[me]||!he[me]._subplot)return void T.warn("Unrecognized subplot: "+me);var Me=he[me]._subplot;Te[ce]=Me.xaxis,Q[ce]=Me.yaxis}}var Re=ie.hovermode||he.hovermode;if(Re&&!oe&&(Re="closest"),["x","y","closest","x unified","y unified"].indexOf(Re)===-1||!re.calcdata||re.querySelector(".zoombox")||re._dragging)return a.unhoverRaw(re,ie);var Ce=he.hoverdistance;Ce===-1&&(Ce=1/0);var ze=he.spikedistance;ze===-1&&(ze=1/0);var le,de,be,Fe,Ve,He,rt,tt,ot,ht,_t,dt,bt,St=[],Et=[],zt={hLinePoint:null,vLinePoint:null},Ut=!1;if(Array.isArray(ie))for(Re="array",be=0;be<ie.length;be++)(Ve=re.calcdata[ie[be].curveNumber||0])&&(He=Ve[0].trace,Ve[0].trace.hoverinfo!=="skip"&&(Et.push(Ve),He.orientation==="h"&&(Ut=!0)));else{for(Fe=0;Fe<re.calcdata.length;Fe++)Ve=re.calcdata[Fe],(He=Ve[0].trace).hoverinfo!=="skip"&&h.isTraceInSubplots(He,ge)&&(Et.push(Ve),He.orientation==="h"&&(Ut=!0));var Pt,Ze;if(ye){if(s.triggerHandler(re,"plotly_beforehover",ie)===!1)return;var Ye=ye.getBoundingClientRect();Pt=ie.clientX-Ye.left,Ze=ie.clientY-Ye.top,he._calcInverseTransform(re);var Be=T.apply3DTransform(he._invTransform)(Pt,Ze);if(Pt=Be[0],Ze=Be[1],Pt<0||Pt>Te[0]._length||Ze<0||Ze>Q[0]._length)return a.unhoverRaw(re,ie)}else Pt="xpx"in ie?ie.xpx:Te[0]._length/2,Ze="ypx"in ie?ie.ypx:Q[0]._length/2;if(ie.pointerX=Pt+Te[0]._offset,ie.pointerY=Ze+Q[0]._offset,le="xval"in ie?h.flat(ge,ie.xval):h.p2c(Te,Pt),de="yval"in ie?h.flat(ge,ie.yval):h.p2c(Q,Ze),!k(le[0])||!k(de[0]))return T.warn("Fx.hover failed",ie,re),a.unhoverRaw(re,ie)}var ke=1/0;function Pe(Vn,ur){for(Fe=0;Fe<Et.length;Fe++)if((Ve=Et[Fe])&&Ve[0]&&Ve[0].trace&&(He=Ve[0].trace).visible===!0&&He._length!==0&&["carpet","contourcarpet"].indexOf(He._module.name)===-1){if(He.type==="splom"?rt=ge[tt=0]:(rt=h.getSubplot(He),tt=ge.indexOf(rt)),ot=Re,h.isUnifiedHover(ot)&&(ot=ot.charAt(0)),dt={cd:Ve,trace:He,xa:Te[tt],ya:Q[tt],maxHoverDistance:Ce,maxSpikeDistance:ze,index:!1,distance:Math.min(ke,Ce),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:n.defaultLine,name:He.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},he[rt]&&(dt.subplot=he[rt]._subplot),he._splomScenes&&he._splomScenes[He.uid]&&(dt.scene=he._splomScenes[He.uid]),bt=St.length,ot==="array"){var Gt=ie[Fe];"pointNumber"in Gt?(dt.index=Gt.pointNumber,ot="closest"):(ot="","xval"in Gt&&(ht=Gt.xval,ot="x"),"yval"in Gt&&(_t=Gt.yval,ot=ot?"closest":"y"))}else Vn!==void 0&&ur!==void 0?(ht=Vn,_t=ur):(ht=le[tt],_t=de[tt]);if(Ce!==0)if(He._module&&He._module.hoverPoints){var tn=He._module.hoverPoints(dt,ht,_t,ot,{finiteRange:!0,hoverLayer:he._hoverlayer});if(tn)for(var In,_n=0;_n<tn.length;_n++)In=tn[_n],k(In.x0)&&k(In.y0)&&St.push(z(In,Re))}else T.log("Unrecognized trace type in hover:",He);if(Re==="closest"&&St.length>bt&&(St.splice(0,bt),ke=St[0].distance),xe&&ze!==0&&St.length===0){dt.distance=ze,dt.index=!1;var Sn=He._module.hoverPoints(dt,ht,_t,"closest",{hoverLayer:he._hoverlayer});if(Sn&&(Sn=Sn.filter(function(An){return An.spikeDistance<=ze})),Sn&&Sn.length){var jn,qn=Sn.filter(function(An){return An.xa.showspikes&&An.xa.spikesnap!=="hovered data"});if(qn.length){var ar=qn[0];k(ar.x0)&&k(ar.y0)&&(jn=Xe(ar),(!zt.vLinePoint||zt.vLinePoint.spikeDistance>jn.spikeDistance)&&(zt.vLinePoint=jn))}var cr=Sn.filter(function(An){return An.ya.showspikes&&An.ya.spikesnap!=="hovered data"});if(cr.length){var $t=cr[0];k($t.x0)&&k($t.y0)&&(jn=Xe($t),(!zt.hLinePoint||zt.hLinePoint.spikeDistance>jn.spikeDistance)&&(zt.hLinePoint=jn))}}}}}function qe(Vn,ur,Gt){for(var tn,In=null,_n=1/0,Sn=0;Sn<Vn.length;Sn++)tn=Vn[Sn].spikeDistance,Gt&&Sn===0&&(tn=-1/0),tn<=_n&&tn<=ur&&(In=Vn[Sn],_n=tn);return In}function Xe(Vn){return Vn?{xa:Vn.xa,ya:Vn.ya,x:Vn.xSpike!==void 0?Vn.xSpike:(Vn.x0+Vn.x1)/2,y:Vn.ySpike!==void 0?Vn.ySpike:(Vn.y0+Vn.y1)/2,distance:Vn.distance,spikeDistance:Vn.spikeDistance,curveNumber:Vn.trace.index,color:Vn.color,pointNumber:Vn.index}:null}Pe();var nt={fullLayout:he,container:he._hoverlayer,event:ie},ut=re._spikepoints,ct={vLinePoint:zt.vLinePoint,hLinePoint:zt.hLinePoint};re._spikepoints=ct;var Ct=function(){St.sort(function(Vn,ur){return Vn.distance-ur.distance}),St=function(Vn,ur){for(var Gt=ur.charAt(0),tn=[],In=[],_n=[],Sn=0;Sn<Vn.length;Sn++){var jn=Vn[Sn];c.traceIs(jn.trace,"bar-like")||c.traceIs(jn.trace,"box-violin")?_n.push(jn):jn.trace[Gt+"period"]?In.push(jn):tn.push(jn)}return tn.concat(In).concat(_n)}(St,Re)};Ct();var Lt=Re.charAt(0),Mt=(Lt==="x"||Lt==="y")&&St[0]&&E[St[0].trace.type];if(xe&&ze!==0&&St.length!==0){var mt=qe(St.filter(function(Vn){return Vn.ya.showspikes}),ze,Mt);zt.hLinePoint=Xe(mt);var kt=qe(St.filter(function(Vn){return Vn.xa.showspikes}),ze,Mt);zt.vLinePoint=Xe(kt)}if(St.length===0){var wt=a.unhoverRaw(re,ie);return!xe||zt.hLinePoint===null&&zt.vLinePoint===null||F(ut)&&H(re,zt,nt),wt}if(xe&&F(ut)&&H(re,zt,nt),h.isXYhover(ot)&&St[0].length!==0&&St[0].trace.type!=="splom"){var Ot=St[0],It=(St=_[Ot.trace.type]?St.filter(function(Vn){return Vn.trace.index===Ot.trace.index}):[Ot]).length;Pe(B("x",Ot,he),B("y",Ot,he));var Nt,Dt=[],qt={},Xt=0,cn=function(Vn){var ur=_[Vn.trace.type]?L(Vn):Vn.trace.index;if(qt[ur]){var Gt=qt[ur]-1,tn=Dt[Gt];Gt>0&&Math.abs(Vn.distance)<Math.abs(tn.distance)&&(Dt[Gt]=Vn)}else Xt++,qt[ur]=Xt,Dt.push(Vn)};for(Nt=0;Nt<It;Nt++)cn(St[Nt]);for(Nt=St.length-1;Nt>It-1;Nt--)cn(St[Nt]);St=Dt,Ct()}var yn=re._hoverdata,Kt=[],Mn=j(re),Un=K(re);for(be=0;be<St.length;be++){var xn=St[be],dn=h.makeEventData(xn,xn.trace,xn.cd);if(xn.hovertemplate!==!1){var gn=!1;xn.cd[xn.index]&&xn.cd[xn.index].ht&&(gn=xn.cd[xn.index].ht),xn.hovertemplate=gn||xn.trace.hovertemplate||!1}if(xn.xa&&xn.ya){var an=xn.x0+xn.xa._offset,sn=xn.x1+xn.xa._offset,On=xn.y0+xn.ya._offset,En=xn.y1+xn.ya._offset,Dn=Math.min(an,sn),Zn=Math.max(an,sn),Fn=Math.min(On,En),nr=Math.max(On,En);dn.bbox={x0:Dn+Un,x1:Zn+Un,y0:Fn+Mn,y1:nr+Mn}}xn.eventData=[dn],Kt.push(dn)}re._hoverdata=Kt;var $n=Re==="y"&&(Et.length>1||St.length>1)||Re==="closest"&&Ut&&St.length>1,mr=n.combine(he.plot_bgcolor||n.background,he.paper_bgcolor),dr=P(St,{gd:re,hovermode:Re,rotateLabels:$n,bgColor:mr,container:he._hoverlayer,outerContainer:he._paper.node(),commonLabelOpts:he.hoverlabel,hoverdistance:he.hoverdistance});if(h.isUnifiedHover(Re)||(function(Vn,ur,Gt){var tn,In,_n,Sn,jn,qn,ar,cr=0,$t=1,An=Vn.size(),Rt=new Array(An),Yt=0;function rn(mn){var zn=mn[0],Gn=mn[mn.length-1];if(In=zn.pmin-zn.pos-zn.dp+zn.size,_n=Gn.pos+Gn.dp+Gn.size-zn.pmax,In>.01){for(jn=mn.length-1;jn>=0;jn--)mn[jn].dp+=In;tn=!1}if(!(_n<.01)){if(In<-.01){for(jn=mn.length-1;jn>=0;jn--)mn[jn].dp-=_n;tn=!1}if(tn){var Hn=0;for(Sn=0;Sn<mn.length;Sn++)(qn=mn[Sn]).pos+qn.dp+qn.size>zn.pmax&&Hn++;for(Sn=mn.length-1;Sn>=0&&!(Hn<=0);Sn--)(qn=mn[Sn]).pos>zn.pmax-1&&(qn.del=!0,Hn--);for(Sn=0;Sn<mn.length&&!(Hn<=0);Sn++)if((qn=mn[Sn]).pos<zn.pmin+1)for(qn.del=!0,Hn--,_n=2*qn.size,jn=mn.length-1;jn>=0;jn--)mn[jn].dp-=_n;for(Sn=mn.length-1;Sn>=0&&!(Hn<=0);Sn--)(qn=mn[Sn]).pos+qn.dp+qn.size>zn.pmax&&(qn.del=!0,Hn--)}}}for(Vn.each(function(mn){var zn=mn[ur],Gn=zn._id.charAt(0)==="x",Hn=zn.range;Yt===0&&Hn&&Hn[0]>Hn[1]!==Gn&&($t=-1),Rt[Yt++]=[{datum:mn,traceIndex:mn.trace.index,dp:0,pos:mn.pos,posref:mn.posref,size:mn.by*(Gn?p:1)/2,pmin:0,pmax:Gn?Gt.width:Gt.height}]}),Rt.sort(function(mn,zn){return mn[0].posref-zn[0].posref||$t*(zn[0].traceIndex-mn[0].traceIndex)});!tn&&cr<=An;){for(cr++,tn=!0,Sn=0;Sn<Rt.length-1;){var bn=Rt[Sn],ln=Rt[Sn+1],kn=bn[bn.length-1],Tn=ln[0];if((In=kn.pos+kn.dp+kn.size-Tn.pos-Tn.dp+Tn.size)>.01&&kn.pmin===Tn.pmin&&kn.pmax===Tn.pmax){for(jn=ln.length-1;jn>=0;jn--)ln[jn].dp+=In;for(bn.push.apply(bn,ln),Rt.splice(Sn+1,1),ar=0,jn=bn.length-1;jn>=0;jn--)ar+=bn[jn].dp;for(_n=ar/bn.length,jn=bn.length-1;jn>=0;jn--)bn[jn].dp-=_n;tn=!1}else Sn++}Rt.forEach(rn)}for(Sn=Rt.length-1;Sn>=0;Sn--){var hn=Rt[Sn];for(jn=hn.length-1;jn>=0;jn--){var nn=hn[jn],fn=nn.datum;fn.offset=nn.dp,fn.del=nn.del}}}(dr,$n?"xa":"ya",he),U(dr,$n,he._invScaleX,he._invScaleY)),ye&&ye.tagName){var Yn=c.getComponentMethod("annotations","hasClickToShow")(re,Kt);o(A.select(ye),Yn?"pointer":"")}ye&&!fe&&function(Vn,ur,Gt){if(!Gt||Gt.length!==Vn._hoverdata.length)return!0;for(var tn=Gt.length-1;tn>=0;tn--){var In=Gt[tn],_n=Vn._hoverdata[tn];if(In.curveNumber!==_n.curveNumber||String(In.pointNumber)!==String(_n.pointNumber)||String(In.pointNumbers)!==String(_n.pointNumbers))return!0}return!1}(re,0,yn)&&(yn&&re.emit("plotly_unhover",{event:ie,points:yn}),re.emit("plotly_hover",{event:ie,points:re._hoverdata,xaxes:Te,yaxes:Q,xvals:le,yvals:de}))})(V,W,J,X,ee)})},R.loneHover=function(V,W){var J=!0;Array.isArray(V)||(J=!1,V=[V]);var X=W.gd,ee=j(X),re=K(X),ie=P(V.map(function(ye){var ge=ye._x0||ye.x0||ye.x||0,he=ye._x1||ye.x1||ye.x||0,ve=ye._y0||ye.y0||ye.y||0,Ie=ye._y1||ye.y1||ye.y||0,xe=ye.eventData;if(xe){var Ae=Math.min(ge,he),Se=Math.max(ge,he),Te=Math.min(ve,Ie),Q=Math.max(ve,Ie),oe=ye.trace;if(c.traceIs(oe,"gl3d")){var ce=X._fullLayout[oe.scene]._scene.container,me=ce.offsetLeft,Me=ce.offsetTop;Ae+=me,Se+=me,Te+=Me,Q+=Me}xe.bbox={x0:Ae+re,x1:Se+re,y0:Te+ee,y1:Q+ee},W.inOut_bbox&&W.inOut_bbox.push(xe.bbox)}else xe=!1;return{color:ye.color||n.defaultLine,x0:ye.x0||ye.x||0,x1:ye.x1||ye.x||0,y0:ye.y0||ye.y||0,y1:ye.y1||ye.y||0,xLabel:ye.xLabel,yLabel:ye.yLabel,zLabel:ye.zLabel,text:ye.text,name:ye.name,idealAlign:ye.idealAlign,borderColor:ye.borderColor,fontFamily:ye.fontFamily,fontSize:ye.fontSize,fontColor:ye.fontColor,nameLength:ye.nameLength,textAlign:ye.textAlign,trace:ye.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ye.hovertemplate||!1,hovertemplateLabels:ye.hovertemplateLabels||!1,eventData:xe}}),{gd:X,hovermode:"closest",rotateLabels:!1,bgColor:W.bgColor||n.background,container:A.select(W.container),outerContainer:W.outerContainer||W.container}),se=0,fe=0;return ie.sort(function(ye,ge){return ye.y0-ge.y0}).each(function(ye,ge){var he=ye.y0-ye.by/2;ye.offset=he-5<se?se-he+5:0,se=he+ye.by+ye.offset,ge===W.anchorIndex&&(fe=ye.offset)}).each(function(ye){ye.offset-=fe}),U(ie,!1,X._fullLayout._invScaleX,X._fullLayout._invScaleY),J?ie:ie.node()};var C=/<extra>([\s\S]*)<\/extra>/;function P(V,W){var J=W.gd,X=J._fullLayout,ee=W.hovermode,re=W.rotateLabels,ie=W.bgColor,se=W.container,fe=W.outerContainer,ye=W.commonLabelOpts||{};if(V.length===0)return[[]];var ge=W.fontFamily||f.HOVERFONT,he=W.fontSize||f.HOVERFONTSIZE,ve=V[0],Ie=ve.xa,xe=ve.ya,Ae=ee.charAt(0),Se=Ae+"Label",Te=ve[Se];if(Te===void 0&&Ie.type==="multicategory")for(var Q=0;Q<V.length&&(Te=V[Q][Se])===void 0;Q++);var oe=G(J,fe),ce=oe.top,me=oe.width,Me=oe.height,Re=Te!==void 0&&ve.distance<=W.hoverdistance&&(ee==="x"||ee==="y");if(Re){var Ce,ze,le=!0;for(Ce=0;Ce<V.length;Ce++)if(le&&V[Ce].zLabel===void 0&&(le=!1),ze=V[Ce].hoverinfo||V[Ce].trace.hoverinfo){var de=Array.isArray(ze)?ze:ze.split("+");if(de.indexOf("all")===-1&&de.indexOf(ee)===-1){Re=!1;break}}le&&(Re=!1)}var be=se.selectAll("g.axistext").data(Re?[0]:[]);if(be.enter().append("g").classed("axistext",!0),be.exit().remove(),be.each(function(){var kt=A.select(this),wt=T.ensureSingle(kt,"path","",function(Zn){Zn.style({"stroke-width":"1px"})}),Ot=T.ensureSingle(kt,"text","",function(Zn){Zn.attr("data-notex",1)}),It=ye.bgcolor||n.defaultLine,Nt=ye.bordercolor||n.contrast(It),Dt=n.contrast(It),qt={family:ye.font.family||ge,size:ye.font.size||he,color:ye.font.color||Dt};wt.style({fill:It,stroke:Nt}),Ot.text(Te).call(r.font,qt).call(t.positionText,0,0).call(t.convertToTspans,J),kt.attr("transform","");var Xt,cn,yn=G(J,Ot.node());if(ee==="x"){var Kt=Ie.side==="top"?"-":"";Ot.attr("text-anchor","middle").call(t.positionText,0,Ie.side==="top"?ce-yn.bottom-u-S:ce-yn.top+u+S),Xt=Ie._offset+(ve.x0+ve.x1)/2,cn=xe._offset+(Ie.side==="top"?0:xe._length);var Mn=yn.width/2+S;Xt<Mn?(Xt=Mn,wt.attr("d","M-"+(Mn-u)+",0L-"+(Mn-2*u)+","+Kt+u+"H"+(S+yn.width/2)+"v"+Kt+(2*S+yn.height)+"H-"+Mn+"V"+Kt+u+"Z")):Xt>X.width-Mn?(Xt=X.width-Mn,wt.attr("d","M"+(Mn-u)+",0L"+Mn+","+Kt+u+"v"+Kt+(2*S+yn.height)+"H-"+Mn+"V"+Kt+u+"H"+(Mn-2*u)+"Z")):wt.attr("d","M0,0L"+u+","+Kt+u+"H"+(S+yn.width/2)+"v"+Kt+(2*S+yn.height)+"H-"+(S+yn.width/2)+"V"+Kt+u+"H-"+u+"Z")}else{var Un,xn,dn;xe.side==="right"?(Un="start",xn=1,dn="",Xt=Ie._offset+Ie._length):(Un="end",xn=-1,dn="-",Xt=Ie._offset),cn=xe._offset+(ve.y0+ve.y1)/2,Ot.attr("text-anchor",Un),wt.attr("d","M0,0L"+dn+u+","+u+"V"+(S+yn.height/2)+"h"+dn+(2*S+yn.width)+"V-"+(S+yn.height/2)+"H"+dn+u+"V-"+u+"Z");var gn,an=yn.height/2,sn=ce-yn.top-an,On="clip"+X._uid+"commonlabel"+xe._id;if(Xt<yn.width+2*S+u){gn="M-"+(u+S)+"-"+an+"h-"+(yn.width-S)+"V"+an+"h"+(yn.width-S)+"Z";var En=yn.width-Xt+S;t.positionText(Ot,En,sn),Un==="end"&&Ot.selectAll("tspan").each(function(){var Zn=A.select(this),Fn=r.tester.append("text").text(Zn.text()).call(r.font,qt),nr=G(J,Fn.node());Math.round(nr.width)<Math.round(yn.width)&&Zn.attr("x",En-nr.width),Fn.remove()})}else t.positionText(Ot,xn*(S+u),sn),gn=null;var Dn=X._topclips.selectAll("#"+On).data(gn?[0]:[]);Dn.enter().append("clipPath").attr("id",On).append("path"),Dn.exit().remove(),Dn.select("path").attr("d",gn),r.setClipUrl(Ot,gn?On:null,J)}kt.attr("transform",x(Xt,cn))}),h.isUnifiedHover(ee)){se.selectAll("g.hovertext").remove();var Fe=V.filter(function(kt){return kt.hoverinfo!=="none"});if(Fe.length===0)return;var Ve=X.hoverlabel,He=Ve.font,rt={showlegend:!0,legend:{title:{text:Te,font:He},font:He,bgcolor:Ve.bgcolor,bordercolor:Ve.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:X.legend?X.legend.traceorder:void 0,orientation:"v"}},tt={font:He};b(rt,tt,J._fullData);var ot=tt.legend;ot.entries=[];for(var ht=0;ht<Fe.length;ht++){var _t=Fe[ht];if(_t.hoverinfo!=="none"){var dt=I(_t,!0,ee,X,Te),bt=dt[0],St=dt[1];_t.name=St,_t.text=St!==""?St+" : "+bt:bt;var Et=_t.cd[_t.index];Et&&(Et.mc&&(_t.mc=Et.mc),Et.mcc&&(_t.mc=Et.mcc),Et.mlc&&(_t.mlc=Et.mlc),Et.mlcc&&(_t.mlc=Et.mlcc),Et.mlw&&(_t.mlw=Et.mlw),Et.mrc&&(_t.mrc=Et.mrc),Et.dir&&(_t.dir=Et.dir)),_t._distinct=!0,ot.entries.push([_t])}}ot.entries.sort(function(kt,wt){return kt[0].trace.index-wt[0].trace.index}),ot.layer=se,ot._inHover=!0,ot._groupTitleFont=Ve.grouptitlefont,v(J,ot);var zt,Ut,Pt,Ze,Ye=se.select("g.legend"),Be=G(J,Ye.node()),ke=Be.width+2*S,Pe=Be.height+2*S,qe=Fe[0],Xe=(qe.x0+qe.x1)/2,nt=(qe.y0+qe.y1)/2,ut=!(c.traceIs(qe.trace,"bar-like")||c.traceIs(qe.trace,"box-violin"));Ae==="y"?ut?(Ut=nt-S,zt=nt+S):(Ut=Math.min.apply(null,Fe.map(function(kt){return Math.min(kt.y0,kt.y1)})),zt=Math.max.apply(null,Fe.map(function(kt){return Math.max(kt.y0,kt.y1)}))):Ut=zt=T.mean(Fe.map(function(kt){return(kt.y0+kt.y1)/2}))-Pe/2,Ae==="x"?ut?(Pt=Xe+S,Ze=Xe-S):(Pt=Math.max.apply(null,Fe.map(function(kt){return Math.max(kt.x0,kt.x1)})),Ze=Math.min.apply(null,Fe.map(function(kt){return Math.min(kt.x0,kt.x1)}))):Pt=Ze=T.mean(Fe.map(function(kt){return(kt.x0+kt.x1)/2}))-ke/2;var ct,Ct,Lt=Ie._offset,Mt=xe._offset;return Ze+=Lt-ke,Ut+=Mt-Pe,ct=(Pt+=Lt)+ke<me&&Pt>=0?Pt:Ze+ke<me&&Ze>=0?Ze:Lt+ke<me?Lt:Pt-Xe<Xe-Ze+ke?me-ke:0,ct+=S,Ct=(zt+=Mt)+Pe<Me&&zt>=0?zt:Ut+Pe<Me&&Ut>=0?Ut:Mt+Pe<Me?Mt:zt-nt<nt-Ut+Pe?Me-Pe:0,Ct+=S,Ye.attr("transform",x(ct-1,Ct-1)),Ye}var mt=se.selectAll("g.hovertext").data(V,function(kt){return L(kt)});return mt.enter().append("g").classed("hovertext",!0).each(function(){var kt=A.select(this);kt.append("rect").call(n.fill,n.addOpacity(ie,.8)),kt.append("text").classed("name",!0),kt.append("path").style("stroke-width","1px"),kt.append("text").classed("nums",!0).call(r.font,ge,he)}),mt.exit().remove(),mt.each(function(kt){var wt=A.select(this).attr("transform",""),Ot=kt.color;Array.isArray(Ot)&&(Ot=Ot[kt.eventData[0].pointNumber]);var It=kt.bgcolor||Ot,Nt=n.combine(n.opacity(It)?It:n.defaultLine,ie),Dt=n.combine(n.opacity(Ot)?Ot:n.defaultLine,ie),qt=kt.borderColor||n.contrast(Nt),Xt=I(kt,Re,ee,X,Te,wt),cn=Xt[0],yn=Xt[1],Kt=wt.select("text.nums").call(r.font,kt.fontFamily||ge,kt.fontSize||he,kt.fontColor||qt).text(cn).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,J),Mn=wt.select("text.name"),Un=0,xn=0;if(yn&&yn!==cn){Mn.call(r.font,kt.fontFamily||ge,kt.fontSize||he,Dt).text(yn).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,J);var dn=G(J,Mn.node());Un=dn.width+2*S,xn=dn.height+2*S}else Mn.remove(),wt.select("rect").remove();wt.select("path").style({fill:Nt,stroke:qt});var gn=kt.xa._offset+(kt.x0+kt.x1)/2,an=kt.ya._offset+(kt.y0+kt.y1)/2,sn=Math.abs(kt.x1-kt.x0),On=Math.abs(kt.y1-kt.y0),En=G(J,Kt.node()),Dn=En.width/X._invScaleX,Zn=En.height/X._invScaleY;kt.ty0=(ce-En.top)/X._invScaleY,kt.bx=Dn+2*S,kt.by=Math.max(Zn+2*S,xn),kt.anchor="start",kt.txwidth=Dn,kt.tx2width=Un,kt.offset=0;var Fn,nr,$n=(Dn+u+S+Un)*X._invScaleX;if(re)kt.pos=gn,Fn=an+On/2+$n<=Me,nr=an-On/2-$n>=0,kt.idealAlign!=="top"&&Fn||!nr?Fn?(an+=On/2,kt.anchor="start"):kt.anchor="middle":(an-=On/2,kt.anchor="end");else if(kt.pos=an,Fn=gn+sn/2+$n<=me,nr=gn-sn/2-$n>=0,kt.idealAlign!=="left"&&Fn||!nr)if(Fn)gn+=sn/2,kt.anchor="start";else{kt.anchor="middle";var mr=$n/2,dr=gn+mr-me,Yn=gn-mr;dr>0&&(gn-=dr),Yn<0&&(gn+=-Yn)}else gn-=sn/2,kt.anchor="end";Kt.attr("text-anchor",kt.anchor),Un&&Mn.attr("text-anchor",kt.anchor),wt.attr("transform",x(gn,an)+(re?d(g):""))}),mt}function I(V,W,J,X,ee,re){var ie="",se="";V.nameOverride!==void 0&&(V.name=V.nameOverride),V.name&&(V.trace._meta&&(V.name=T.templateString(V.name,V.trace._meta)),ie=N(V.name,V.nameLength));var fe=J.charAt(0),ye=fe==="x"?"y":"x";V.zLabel!==void 0?(V.xLabel!==void 0&&(se+="x: "+V.xLabel+"<br>"),V.yLabel!==void 0&&(se+="y: "+V.yLabel+"<br>"),V.trace.type!=="choropleth"&&V.trace.type!=="choroplethmapbox"&&(se+=(se?"z: ":"")+V.zLabel)):W&&V[fe+"Label"]===ee?se=V[ye+"Label"]||"":V.xLabel===void 0?V.yLabel!==void 0&&V.trace.type!=="scattercarpet"&&(se=V.yLabel):se=V.yLabel===void 0?V.xLabel:"("+V.xLabel+", "+V.yLabel+")",!V.text&&V.text!==0||Array.isArray(V.text)||(se+=(se?"<br>":"")+V.text),V.extraText!==void 0&&(se+=(se?"<br>":"")+V.extraText),re&&se===""&&!V.hovertemplate&&(ie===""&&re.remove(),se=ie);var ge=V.hovertemplate||!1;if(ge){var he=V.hovertemplateLabels||V;V[fe+"Label"]!==ee&&(he[fe+"other"]=he[fe+"Val"],he[fe+"otherLabel"]=he[fe+"Label"]),se=(se=T.hovertemplateString(ge,he,X._d3locale,V.eventData[0]||{},V.trace._meta)).replace(C,function(ve,Ie){return ie=N(Ie,V.nameLength),""})}return[se,ie]}function U(V,W,J,X){var ee=function(ie){return ie*J},re=function(ie){return ie*X};V.each(function(ie){var se=A.select(this);if(ie.del)return se.remove();var fe=se.select("text.nums"),ye=ie.anchor,ge=ye==="end"?-1:1,he={start:1,end:-1,middle:0}[ye],ve=he*(u+S),Ie=ve+he*(ie.txwidth+S),xe=0,Ae=ie.offset,Se=ye==="middle";Se&&(ve-=ie.tx2width/2,Ie+=ie.txwidth/2+S),W&&(Ae*=-w,xe=ie.offset*m),se.select("path").attr("d",Se?"M-"+ee(ie.bx/2+ie.tx2width/2)+","+re(Ae-ie.by/2)+"h"+ee(ie.bx)+"v"+re(ie.by)+"h-"+ee(ie.bx)+"Z":"M0,0L"+ee(ge*u+xe)+","+re(u+Ae)+"v"+re(ie.by/2-u)+"h"+ee(ge*ie.bx)+"v-"+re(ie.by)+"H"+ee(ge*u+xe)+"V"+re(Ae-u)+"Z");var Te=xe+ve,Q=Ae+ie.ty0-ie.by/2+S,oe=ie.textAlign||"auto";oe!=="auto"&&(oe==="left"&&ye!=="start"?(fe.attr("text-anchor","start"),Te=Se?-ie.bx/2-ie.tx2width/2+S:-ie.bx-S):oe==="right"&&ye!=="end"&&(fe.attr("text-anchor","end"),Te=Se?ie.bx/2-ie.tx2width/2-S:ie.bx+S)),fe.call(t.positionText,ee(Te),re(Q)),ie.tx2width&&(se.select("text.name").call(t.positionText,ee(Ie+he*S+xe),re(Ae+ie.ty0-ie.by/2+S)),se.select("rect").call(r.setRect,ee(Ie+(he-1)*ie.tx2width/2+xe),re(Ae-ie.by/2-1),ee(ie.tx2width),re(ie.by+2)))})}function z(V,W){var J=V.index,X=V.trace||{},ee=V.cd[0],re=V.cd[J]||{};function ie(ve){return ve||k(ve)&&ve===0}var se=Array.isArray(J)?function(ve,Ie){var xe=T.castOption(ee,J,ve);return ie(xe)?xe:T.extractOption({},X,"",Ie)}:function(ve,Ie){return T.extractOption(re,X,ve,Ie)};function fe(ve,Ie,xe){var Ae=se(Ie,xe);ie(Ae)&&(V[ve]=Ae)}if(fe("hoverinfo","hi","hoverinfo"),fe("bgcolor","hbg","hoverlabel.bgcolor"),fe("borderColor","hbc","hoverlabel.bordercolor"),fe("fontFamily","htf","hoverlabel.font.family"),fe("fontSize","hts","hoverlabel.font.size"),fe("fontColor","htc","hoverlabel.font.color"),fe("nameLength","hnl","hoverlabel.namelength"),fe("textAlign","hta","hoverlabel.align"),V.posref=W==="y"||W==="closest"&&X.orientation==="h"?V.xa._offset+(V.x0+V.x1)/2:V.ya._offset+(V.y0+V.y1)/2,V.x0=T.constrain(V.x0,0,V.xa._length),V.x1=T.constrain(V.x1,0,V.xa._length),V.y0=T.constrain(V.y0,0,V.ya._length),V.y1=T.constrain(V.y1,0,V.ya._length),V.xLabelVal!==void 0&&(V.xLabel="xLabel"in V?V.xLabel:i.hoverLabelText(V.xa,V.xLabelVal,X.xhoverformat),V.xVal=V.xa.c2d(V.xLabelVal)),V.yLabelVal!==void 0&&(V.yLabel="yLabel"in V?V.yLabel:i.hoverLabelText(V.ya,V.yLabelVal,X.yhoverformat),V.yVal=V.ya.c2d(V.yLabelVal)),V.zLabelVal!==void 0&&V.zLabel===void 0&&(V.zLabel=String(V.zLabelVal)),!(isNaN(V.xerr)||V.xa.type==="log"&&V.xerr<=0)){var ye=i.tickText(V.xa,V.xa.c2l(V.xerr),"hover").text;V.xerrneg!==void 0?V.xLabel+=" +"+ye+" / -"+i.tickText(V.xa,V.xa.c2l(V.xerrneg),"hover").text:V.xLabel+=" ± "+ye,W==="x"&&(V.distance+=1)}if(!(isNaN(V.yerr)||V.ya.type==="log"&&V.yerr<=0)){var ge=i.tickText(V.ya,V.ya.c2l(V.yerr),"hover").text;V.yerrneg!==void 0?V.yLabel+=" +"+ge+" / -"+i.tickText(V.ya,V.ya.c2l(V.yerrneg),"hover").text:V.yLabel+=" ± "+ge,W==="y"&&(V.distance+=1)}var he=V.hoverinfo||V.trace.hoverinfo;return he&&he!=="all"&&((he=Array.isArray(he)?he:he.split("+")).indexOf("x")===-1&&(V.xLabel=void 0),he.indexOf("y")===-1&&(V.yLabel=void 0),he.indexOf("z")===-1&&(V.zLabel=void 0),he.indexOf("text")===-1&&(V.text=void 0),he.indexOf("name")===-1&&(V.name=void 0)),V}function H(V,W,J){var X,ee,re=J.container,ie=J.fullLayout,se=ie._size,fe=J.event,ye=!!W.hLinePoint,ge=!!W.vLinePoint;if(re.selectAll(".spikeline").remove(),ge||ye){var he=n.combine(ie.plot_bgcolor,ie.paper_bgcolor);if(ye){var ve,Ie,xe=W.hLinePoint;X=xe&&xe.xa,(ee=xe&&xe.ya).spikesnap==="cursor"?(ve=fe.pointerX,Ie=fe.pointerY):(ve=X._offset+xe.x,Ie=ee._offset+xe.y);var Ae,Se,Te=l.readability(xe.color,he)<1.5?n.contrast(he):xe.color,Q=ee.spikemode,oe=ee.spikethickness,ce=ee.spikecolor||Te,me=i.getPxPosition(V,ee);if(Q.indexOf("toaxis")!==-1||Q.indexOf("across")!==-1){if(Q.indexOf("toaxis")!==-1&&(Ae=me,Se=ve),Q.indexOf("across")!==-1){var Me=ee._counterDomainMin,Re=ee._counterDomainMax;ee.anchor==="free"&&(Me=Math.min(Me,ee.position),Re=Math.max(Re,ee.position)),Ae=se.l+Me*se.w,Se=se.l+Re*se.w}re.insert("line",":first-child").attr({x1:Ae,x2:Se,y1:Ie,y2:Ie,"stroke-width":oe,stroke:ce,"stroke-dasharray":r.dashStyle(ee.spikedash,oe)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:Ae,x2:Se,y1:Ie,y2:Ie,"stroke-width":oe+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}Q.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:me+(ee.side!=="right"?oe:-oe),cy:Ie,r:oe,fill:ce}).classed("spikeline",!0)}if(ge){var Ce,ze,le=W.vLinePoint;X=le&&le.xa,ee=le&&le.ya,X.spikesnap==="cursor"?(Ce=fe.pointerX,ze=fe.pointerY):(Ce=X._offset+le.x,ze=ee._offset+le.y);var de,be,Fe=l.readability(le.color,he)<1.5?n.contrast(he):le.color,Ve=X.spikemode,He=X.spikethickness,rt=X.spikecolor||Fe,tt=i.getPxPosition(V,X);if(Ve.indexOf("toaxis")!==-1||Ve.indexOf("across")!==-1){if(Ve.indexOf("toaxis")!==-1&&(de=tt,be=ze),Ve.indexOf("across")!==-1){var ot=X._counterDomainMin,ht=X._counterDomainMax;X.anchor==="free"&&(ot=Math.min(ot,X.position),ht=Math.max(ht,X.position)),de=se.t+(1-ht)*se.h,be=se.t+(1-ot)*se.h}re.insert("line",":first-child").attr({x1:Ce,x2:Ce,y1:de,y2:be,"stroke-width":He,stroke:rt,"stroke-dasharray":r.dashStyle(X.spikedash,He)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:Ce,x2:Ce,y1:de,y2:be,"stroke-width":He+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}Ve.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:Ce,cy:tt-(X.side!=="top"?He:-He),r:He,fill:rt}).classed("spikeline",!0)}}}function F(V,W){return!W||W.vLinePoint!==V._spikepoints.vLinePoint||W.hLinePoint!==V._spikepoints.hLinePoint}function N(V,W){return t.plainText(V||"",{len:W,allowedTags:["br","sub","sup","b","i","em"]})}function B(V,W,J){var X=W[V+"a"],ee=W[V+"Val"],re=W.cd[0];if(X.type==="category"||X.type==="multicategory")ee=X._categoriesMap[ee];else if(X.type==="date"){var ie=W.trace[V+"periodalignment"];if(ie){var se=W.cd[W.index],fe=se[V+"Start"];fe===void 0&&(fe=se[V]);var ye=se[V+"End"];ye===void 0&&(ye=se[V]);var ge=ye-fe;ie==="end"?ee+=ge:ie==="middle"&&(ee+=ge/2)}ee=X.d2c(ee)}return re&&re.t&&re.t.posLetter===X._id&&(J.boxmode!=="group"&&J.violinmode!=="group"||(ee+=re.t.dPos)),ee}function j(V){return V.offsetTop+V.clientTop}function K(V){return V.offsetLeft+V.clientLeft}function G(V,W){var J=V._fullLayout,X=W.getBoundingClientRect(),ee=X.x,re=X.y,ie=ee+X.width,se=re+X.height,fe=T.apply3DTransform(J._invTransform)(ee,re),ye=T.apply3DTransform(J._invTransform)(ie,se),ge=fe[0],he=fe[1],ve=ye[0],Ie=ye[1];return{x:ge,y:he,width:ve-ge,height:Ie-he,top:Math.min(he,Ie),left:Math.min(ge,ve),right:Math.max(ge,ve),bottom:Math.max(he,Ie)}}},38048:function($,R,e){var A=e(71828),k=e(7901),l=e(23469).isUnifiedHover;$.exports=function(T,x,d,s){s=s||{};var t=x.legend;function o(r){s.font[r]||(s.font[r]=t?x.legend.font[r]:x.font[r])}x&&l(x.hovermode)&&(s.font||(s.font={}),o("size"),o("family"),o("color"),t?(s.bgcolor||(s.bgcolor=k.combine(x.legend.bgcolor,x.paper_bgcolor)),s.bordercolor||(s.bordercolor=x.legend.bordercolor)):s.bgcolor||(s.bgcolor=x.paper_bgcolor)),d("hoverlabel.bgcolor",s.bgcolor),d("hoverlabel.bordercolor",s.bordercolor),d("hoverlabel.namelength",s.namelength),A.coerceFont(d,"hoverlabel.font",s.font),d("hoverlabel.align",s.align)}},98212:function($,R,e){var A=e(71828),k=e(528);$.exports=function(l,T){function x(d,s){return T[d]!==void 0?T[d]:A.coerce(l,T,k,d,s)}return x("clickmode"),x("hovermode")}},30211:function($,R,e){var A=e(39898),k=e(71828),l=e(28569),T=e(23469),x=e(528),d=e(88335);$.exports={moduleType:"component",name:"fx",constants:e(26675),schema:{layout:x},attributes:e(77914),layoutAttributes:x,supplyLayoutGlobalDefaults:e(22774),supplyDefaults:e(54268),supplyLayoutDefaults:e(34938),calc:e(30732),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,t,o){return k.castOption(s,t,"hoverlabel."+o)},castHoverinfo:function(s,t,o){return k.castOption(s,o,"hoverinfo",function(r){return k.coerceHoverinfo({hoverinfo:r},{_module:s._module},t)})},hover:d.hover,unhover:l.unhover,loneHover:d.loneHover,loneUnhover:function(s){var t=k.isD3Selection(s)?s:A.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(75914)}},528:function($,R,e){var A=e(26675),k=e(41940),l=k({editType:"none"});l.family.dflt=A.HOVERFONT,l.size.dflt=A.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:l,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function($,R,e){var A=e(71828),k=e(528),l=e(98212),T=e(38048);$.exports=function(x,d){function s(n,a){return A.coerce(x,d,k,n,a)}l(x,d)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=d._has("mapbox"),o=d._has("geo"),r=d._basePlotModules.length;d.dragmode==="zoom"&&((t||o)&&r===1||t&&o&&r===2)&&(d.dragmode="pan"),T(x,d,s),A.coerceFont(s,"hoverlabel.grouptitlefont",d.hoverlabel.font)}},22774:function($,R,e){var A=e(71828),k=e(38048),l=e(528);$.exports=function(T,x){k(T,x,function(d,s){return A.coerce(T,x,l,d,s)})}},83312:function($,R,e){var A=e(71828),k=e(30587).counter,l=e(27670).Y,T=e(85555).idRegex,x=e(44467),d={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:l({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,n,a){var i=n[a+"axes"],c=Object.keys((r._splomAxes||{})[a]||{});return Array.isArray(i)?i:c.length?c:void 0}function t(r,n,a,i,c,h){var f=n(r+"gap",a),b=n("domain."+r);n(r+"side",i);for(var v=new Array(c),g=b[0],y=(b[1]-g)/(c-f),p=y*(1-f),m=0;m<c;m++){var w=g+y*m;v[h?c-1-m:m]=[w,w+p]}return v}function o(r,n,a,i,c){var h,f=new Array(a);function b(v,g){n.indexOf(g)!==-1&&i[g]===void 0?(f[v]=g,i[g]=v):f[v]=""}if(Array.isArray(r))for(h=0;h<a;h++)b(h,r[h]);else for(b(0,c),h=1;h<a;h++)b(h,c+(h+1));return f}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:d}},layoutAttributes:d,sizeDefaults:function(r,n){var a=r.grid||{},i=s(n,a,"x"),c=s(n,a,"y");if(r.grid||i||c){var h,f,b=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),v=Array.isArray(i),g=Array.isArray(c),y=v&&i!==a.xaxes&&g&&c!==a.yaxes;b?(h=a.subplots.length,f=a.subplots[0].length):(g&&(h=c.length),v&&(f=i.length));var p=x.newContainer(n,"grid"),m=C("rows",h),w=C("columns",f);if(m*w>1){b||v||g||C("pattern")==="independent"&&(b=!0),p._hasSubplotGrid=b;var u,S,_=C("roworder")==="top to bottom",E=b?.2:.1,L=b?.3:.1;y&&n._splomGridDflt&&(u=n._splomGridDflt.xside,S=n._splomGridDflt.yside),p._domains={x:t("x",C,E,u,w),y:t("y",C,L,S,m,_)}}else delete n.grid}function C(P,I){return A.coerce(a,p,d,P,I)}},contentDefaults:function(r,n){var a=n.grid;if(a&&a._domains){var i,c,h,f,b,v,g,y=r.grid||{},p=n._subplots,m=a._hasSubplotGrid,w=a.rows,u=a.columns,S=a.pattern==="independent",_=a._axisMap={};if(m){var E=y.subplots||[];v=a.subplots=new Array(w);var L=1;for(i=0;i<w;i++){var C=v[i]=new Array(u),P=E[i]||[];for(c=0;c<u;c++)if(S?(b=L===1?"xy":"x"+L+"y"+L,L++):b=P[c],C[c]="",p.cartesian.indexOf(b)!==-1){if(g=b.indexOf("y"),h=b.slice(0,g),f=b.slice(g),_[h]!==void 0&&_[h]!==c||_[f]!==void 0&&_[f]!==i)continue;C[c]=b,_[h]=c,_[f]=i}}}else{var I=s(n,y,"x"),U=s(n,y,"y");a.xaxes=o(I,p.xaxis,u,_,"x"),a.yaxes=o(U,p.yaxis,w,_,"y")}var z=a._anchors={},H=a.roworder==="top to bottom";for(var F in _){var N,B,j,K=F.charAt(0),G=a[K+"side"];if(G.length<8)z[F]="free";else if(K==="x"){if(G.charAt(0)==="t"===H?(N=0,B=1,j=w):(N=w-1,B=-1,j=-1),m){var V=_[F];for(i=N;i!==j;i+=B)if((b=v[i][V])&&(g=b.indexOf("y"),b.slice(0,g)===F)){z[F]=b.slice(g);break}}else for(i=N;i!==j;i+=B)if(f=a.yaxes[i],p.cartesian.indexOf(F+f)!==-1){z[F]=f;break}}else if(G.charAt(0)==="l"?(N=0,B=1,j=u):(N=u-1,B=-1,j=-1),m){var W=_[F];for(i=N;i!==j;i+=B)if((b=v[W][i])&&(g=b.indexOf("y"),b.slice(g)===F)){z[F]=b.slice(0,g);break}}else for(i=N;i!==j;i+=B)if(h=a.xaxes[i],p.cartesian.indexOf(h+F)!==-1){z[F]=h;break}}}}}},69819:function($,R,e){var A=e(85555),k=e(44467).templatedArray;e(24695),$.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",A.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",A.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function($,R,e){var A=e(92770),k=e(58163);$.exports=function(l,T,x,d){T=T||{};var s=x==="log"&&T.type==="linear",t=x==="linear"&&T.type==="log";if(s||t){for(var o,r,n=l._fullLayout.images,a=T._id.charAt(0),i=0;i<n.length;i++)if(r="images["+i+"].",(o=n[i])[a+"ref"]===T._id){var c=o[a],h=o["size"+a],f=null,b=null;if(s){f=k(c,T.range);var v=h/Math.pow(10,f)/2;b=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else b=(f=Math.pow(10,c))*(Math.pow(10,h/2)-Math.pow(10,-h/2));A(f)?A(b)||(b=null):(f=null,b=null),d(r+a,f),d(r+"size"+a,b)}}}},81603:function($,R,e){var A=e(71828),k=e(89298),l=e(85501),T=e(69819);function x(d,s,t){function o(f,b){return A.coerce(d,s,T,f,b)}var r=o("source");if(!o("visible",!!r))return s;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var n={_fullLayout:t},a=["x","y"],i=0;i<2;i++){var c=a[i],h=k.coerceRef(d,s,n,c,"paper",void 0);h!=="paper"&&k.getFromId(n,h)._imgIndices.push(s._index),k.coercePosition(s,n,o,h,c,0)}return s}$.exports=function(d,s){l(d,s,{name:"images",handleItemDefaults:x})}},80750:function($,R,e){var A=e(39898),k=e(91424),l=e(89298),T=e(41675),x=e(77922);$.exports=function(d){var s,t,o=d._fullLayout,r=[],n={},a=[];for(t=0;t<o.images.length;t++){var i=o.images[t];if(i.visible)if(i.layer==="below"&&i.xref!=="paper"&&i.yref!=="paper"){s=T.ref2id(i.xref)+T.ref2id(i.yref);var c=o._plots[s];if(!c){a.push(i);continue}c.mainplot&&(s=c.mainplot.id),n[s]||(n[s]=[]),n[s].push(i)}else i.layer==="above"?r.push(i):a.push(i)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},f={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function b(u){var S=A.select(this);if(this._imgSrc!==u.source)if(S.attr("xmlns",x.svg),u.source&&u.source.slice(0,5)==="data:")S.attr("xlink:href",u.source),this._imgSrc=u.source;else{var _=new Promise(function(E){var L=new Image;function C(){S.remove(),E()}this.img=L,L.setAttribute("crossOrigin","anonymous"),L.onerror=C,L.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var I=P.toDataURL("image/png");S.attr("xlink:href",I),E()},S.on("error",C),L.src=u.source,this._imgSrc=u.source}.bind(this));d._promises.push(_)}}function v(u){var S,_,E=A.select(this),L=l.getFromId(d,u.xref),C=l.getFromId(d,u.yref),P=l.getRefType(u.xref)==="domain",I=l.getRefType(u.yref)==="domain",U=o._size;S=L!==void 0?typeof u.xref=="string"&&P?L._length*u.sizex:Math.abs(L.l2p(u.sizex)-L.l2p(0)):u.sizex*U.w,_=C!==void 0?typeof u.yref=="string"&&I?C._length*u.sizey:Math.abs(C.l2p(u.sizey)-C.l2p(0)):u.sizey*U.h;var z,H,F=S*h[u.xanchor].offset,N=_*f[u.yanchor].offset,B=h[u.xanchor].sizing+f[u.yanchor].sizing;switch(z=L!==void 0?typeof u.xref=="string"&&P?L._length*u.x+L._offset:L.r2p(u.x)+L._offset:u.x*U.w+U.l,z+=F,H=C!==void 0?typeof u.yref=="string"&&I?C._length*(1-u.y)+C._offset:C.r2p(u.y)+C._offset:U.h-u.y*U.h+U.t,H+=N,u.sizing){case"fill":B+=" slice";break;case"stretch":B="none"}E.attr({x:z,y:H,width:S,height:_,preserveAspectRatio:B,opacity:u.opacity});var j=(L&&l.getRefType(u.xref)!=="domain"?L._id:"")+(C&&l.getRefType(u.yref)!=="domain"?C._id:"");k.setClipUrl(E,j?"clip"+o._uid+j:null,d)}var g=o._imageLowerLayer.selectAll("image").data(a),y=o._imageUpperLayer.selectAll("image").data(r);g.enter().append("image"),y.enter().append("image"),g.exit().remove(),y.exit().remove(),g.each(function(u){b.bind(this)(u),v.bind(this)(u)}),y.each(function(u){b.bind(this)(u),v.bind(this)(u)});var p=Object.keys(o._plots);for(t=0;t<p.length;t++){s=p[t];var m=o._plots[s];if(m.imagelayer){var w=m.imagelayer.selectAll("image").data(n[s]||[]);w.enter().append("image"),w.exit().remove(),w.each(function(u){b.bind(this)(u),v.bind(this)(u)})}}}},68804:function($,R,e){$.exports={moduleType:"component",name:"images",layoutAttributes:e(69819),supplyLayoutDefaults:e(81603),includeBasePlot:e(76325)("images"),draw:e(80750),convertCoords:e(75378)}},33030:function($,R,e){var A=e(41940),k=e(22399);$.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:A({editType:"legend"}),grouptitlefont:A({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:A({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function($){$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function($,R,e){var A=e(73972),k=e(71828),l=e(44467),T=e(9012),x=e(33030),d=e(10820),s=e(10130);$.exports=function(t,o,r){var n,a=t.legend||{},i=l.newContainer(o,"legend");function c(C,P){return k.coerce(a,i,x,C,P)}for(var h=function(C,P){var I=n._input,U=n;return k.coerce(I,U,T,C,P)},f=o.font||{},b=k.coerceFont(c,"grouptitlefont",k.extendFlat({},f,{size:Math.round(1.1*f.size)})),v=0,g=!1,y="normal",p=0;p<r.length;p++)(n=r[p]).visible&&((n.showlegend||n._dfltShowLegend&&!(n._module&&n._module.attributes&&n._module.attributes.showlegend&&n._module.attributes.showlegend.dflt===!1))&&(v++,n.showlegend&&(g=!0,(A.traceIs(n,"pie-like")||n._input.showlegend===!0)&&v++),k.coerceFont(h,"legendgrouptitle.font",b)),(A.traceIs(n,"bar")&&o.barmode==="stack"||["tonextx","tonexty"].indexOf(n.fill)!==-1)&&(y=s.isGrouped({traceorder:y})?"grouped+reversed":"reversed"),n.legendgroup!==void 0&&n.legendgroup!==""&&(y=s.isReversed({traceorder:y})?"reversed+grouped":"grouped"));var m=k.coerce(t,o,d,"showlegend",g&&v>1);if(m===!1&&(o.legend=void 0),(m!==!1||a.uirevision)&&(c("uirevision",o.uirevision),m!==!1)){c("bgcolor",o.paper_bgcolor),c("bordercolor"),c("borderwidth");var w,u,S,_=k.coerceFont(c,"font",o.font),E=c("orientation")==="h";if(E?(w=0,A.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(u=1.1,S="bottom"):(u=-.1,S="top")):(w=1.02,u=1,S="auto"),c("traceorder",y),s.isGrouped(o.legend)&&c("tracegroupgap"),c("entrywidth"),c("entrywidthmode"),c("itemsizing"),c("itemwidth"),c("itemclick"),c("itemdoubleclick"),c("groupclick"),c("x",w),c("xanchor"),c("y",u),c("yanchor",S),c("valign"),k.noneOrAll(a,i,["x","y"]),c("title.text")){c("title.side",E?"left":"top");var L=k.extendFlat({},_,{size:k.bigFont(_.size)});k.coerceFont(c,"title.font",L)}}}},43969:function($,R,e){var A=e(39898),k=e(71828),l=e(74875),T=e(73972),x=e(11086),d=e(28569),s=e(91424),t=e(7901),o=e(63893),r=e(85167),n=e(14928),a=e(18783),i=a.LINE_SPACING,c=a.FROM_TL,h=a.FROM_BR,f=e(82424),b=e(53630),v=e(10130);function g(E,L,C){var P=E[0],I=P.width,U=L.entrywidthmode,z=P.trace.legendwidth||L.entrywidth;return U==="fraction"?L._maxWidth*z:C+(z||I)}function y(E,L,C,P,I){var U=C.data()[0][0].trace,z={event:I,node:C.node(),curveNumber:U.index,expandedIndex:U._expandedIndex,data:E.data,layout:E.layout,frames:E._transitionData._frames,config:E._context,fullData:E._fullData,fullLayout:E._fullLayout};U._group&&(z.group=U._group),T.traceIs(U,"pie-like")&&(z.label=C.datum()[0].label),x.triggerHandler(E,"plotly_legendclick",z)!==!1&&(P===1?L._clickTimeout=setTimeout(function(){E._fullLayout&&r(C,E,P)},E._context.doubleClickDelay):P===2&&(L._clickTimeout&&clearTimeout(L._clickTimeout),E._legendMouseDownTime=0,x.triggerHandler(E,"plotly_legenddoubleclick",z)!==!1&&r(C,E,P)))}function p(E,L,C){var P,I,U=E.data()[0][0],z=U.trace,H=T.traceIs(z,"pie-like"),F=!C._inHover&&L._context.edits.legendText&&!H,N=C._maxNameLength;U.groupTitle?(P=U.groupTitle.text,I=U.groupTitle.font):(I=C.font,C.entries?P=U.text:(P=H?U.label:z.name,z._meta&&(P=k.templateString(P,z._meta))));var B=k.ensureSingle(E,"text","legendtext");B.attr("text-anchor","start").call(s.font,I).text(F?m(P,N):P);var j=C.itemwidth+2*n.itemGap;o.positionText(B,j,0),F?B.call(o.makeEditable,{gd:L,text:P}).call(u,E,L,C).on("edit",function(K){this.text(m(K,N)).call(u,E,L,C);var G=U.trace._fullInput||{},V={};if(T.hasTransform(G,"groupby")){var W=T.getTransformIndices(G,"groupby"),J=W[W.length-1],X=k.keyedContainer(G,"transforms["+J+"].styles","target","value.name");X.set(U.trace._group,K),V=X.constructUpdate()}else V.name=K;return T.call("_guiRestyle",L,V,z.index)}):u(B,E,L,C)}function m(E,L){var C=Math.max(4,L);if(E&&E.trim().length>=C/2)return E;for(var P=C-(E=E||"").length;P>0;P--)E+=" ";return E}function w(E,L){var C,P=L._context.doubleClickDelay,I=1,U=k.ensureSingle(E,"rect","legendtoggle",function(z){L._context.staticPlot||z.style("cursor","pointer").attr("pointer-events","all"),z.call(t.fill,"rgba(0,0,0,0)")});L._context.staticPlot||(U.on("mousedown",function(){(C=new Date().getTime())-L._legendMouseDownTime<P?I+=1:(I=1,L._legendMouseDownTime=C)}),U.on("mouseup",function(){if(!L._dragged&&!L._editing){var z=L._fullLayout.legend;new Date().getTime()-L._legendMouseDownTime>P&&(I=Math.max(I-1,1)),y(L,z,E,I,A.event)}}))}function u(E,L,C,P,I){P._inHover&&E.attr("data-notex",!0),o.convertToTspans(E,C,function(){(function(U,z,H,F){var N=U.data()[0][0];if(H._inHover||!N||N.trace.showlegend){var B=U.select("g[class*=math-group]"),j=B.node();H||(H=z._fullLayout.legend);var K,G,V=H.borderwidth,W=(F===1?H.title.font:N.groupTitle?N.groupTitle.font:H.font).size*i;if(j){var J=s.bBox(j);K=J.height,G=J.width,F===1?s.setTranslate(B,V,V+.75*K):s.setTranslate(B,0,.25*K)}else{var X=U.select(F===1?".legendtitletext":".legendtext"),ee=o.lineCount(X),re=X.node();if(K=W*ee,G=re?s.bBox(re).width:0,F===1)H.title.side==="left"&&(G+=2*n.itemGap),o.positionText(X,V+n.titlePad,V+W);else{var ie=2*n.itemGap+H.itemwidth;N.groupTitle&&(ie=n.itemGap,G-=H.itemwidth),o.positionText(X,ie,-W*((ee-1)/2-.3))}}F===1?(H._titleWidth=G,H._titleHeight=K):(N.lineHeight=W,N.height=Math.max(K,16)+3,N.width=G)}else U.remove()})(L,C,P,I)})}function S(E){return k.isRightAnchor(E)?"right":k.isCenterAnchor(E)?"center":"left"}function _(E){return k.isBottomAnchor(E)?"bottom":k.isMiddleAnchor(E)?"middle":"top"}$.exports=function(E,L){return L||(L=E._fullLayout.legend||{}),function(C,P){var I,U,z=C._fullLayout,H="legend"+z._uid,F=P._inHover;if(F?(I=P.layer,H+="-hover"):I=z._infolayer,I){if(C._legendMouseDownTime||(C._legendMouseDownTime=0),F){if(!P.entries)return;U=f(P.entries,P)}else{if(!C.calcdata)return;U=z.showlegend&&f(C.calcdata,P)}var N=z.hiddenlabels||[];if(!(F||z.showlegend&&U.length))return I.selectAll(".legend").remove(),z._topdefs.select("#"+H).remove(),l.autoMargin(C,"legend");var B=k.ensureSingle(I,"g","legend",function(re){F||re.attr("pointer-events","all")}),j=k.ensureSingleById(z._topdefs,"clipPath",H,function(re){re.append("rect")}),K=k.ensureSingle(B,"rect","bg",function(re){re.attr("shape-rendering","crispEdges")});K.call(t.stroke,P.bordercolor).call(t.fill,P.bgcolor).style("stroke-width",P.borderwidth+"px");var G=k.ensureSingle(B,"g","scrollbox"),V=P.title;if(P._titleWidth=0,P._titleHeight=0,V.text){var W=k.ensureSingle(G,"text","legendtitletext");W.attr("text-anchor","start").call(s.font,V.font).text(V.text),u(W,G,C,P,1)}else G.selectAll(".legendtitletext").remove();var J=k.ensureSingle(B,"rect","scrollbar",function(re){re.attr(n.scrollBarEnterAttrs).call(t.fill,n.scrollBarColor)}),X=G.selectAll("g.groups").data(U);X.enter().append("g").attr("class","groups"),X.exit().remove();var ee=X.selectAll("g.traces").data(k.identity);ee.enter().append("g").attr("class","traces"),ee.exit().remove(),ee.style("opacity",function(re){var ie=re[0].trace;return T.traceIs(ie,"pie-like")?N.indexOf(re[0].label)!==-1?.5:1:ie.visible==="legendonly"?.5:1}).each(function(){A.select(this).call(p,C,P)}).call(b,C,P).each(function(){F||A.select(this).call(w,C)}),k.syncOrAsync([l.previousPromises,function(){return function(re,ie,se,fe){var ye=re._fullLayout;fe||(fe=ye.legend);var ge=ye._size,he=v.isVertical(fe),ve=v.isGrouped(fe),Ie=fe.entrywidthmode==="fraction",xe=fe.borderwidth,Ae=2*xe,Se=n.itemGap,Te=fe.itemwidth+2*Se,Q=2*(xe+Se),oe=_(fe),ce=fe.y<0||fe.y===0&&oe==="top",me=fe.y>1||fe.y===1&&oe==="bottom",Me=fe.tracegroupgap,Re={};fe._maxHeight=Math.max(ce||me?ye.height/2:ge.h,30);var Ce=0;fe._width=0,fe._height=0;var ze=function(Ye){var Be=0,ke=0,Pe=Ye.title.side;return Pe&&(Pe.indexOf("left")!==-1&&(Be=Ye._titleWidth),Pe.indexOf("top")!==-1&&(ke=Ye._titleHeight)),[Be,ke]}(fe);if(he)se.each(function(Ye){var Be=Ye[0].height;s.setTranslate(this,xe+ze[0],xe+ze[1]+fe._height+Be/2+Se),fe._height+=Be,fe._width=Math.max(fe._width,Ye[0].width)}),Ce=Te+fe._width,fe._width+=Se+Te+Ae,fe._height+=Q,ve&&(ie.each(function(Ye,Be){s.setTranslate(this,0,Be*fe.tracegroupgap)}),fe._height+=(fe._lgroupsLength-1)*fe.tracegroupgap);else{var le=S(fe),de=fe.x<0||fe.x===0&&le==="right",be=fe.x>1||fe.x===1&&le==="left",Fe=me||ce,Ve=ye.width/2;fe._maxWidth=Math.max(de?Fe&&le==="left"?ge.l+ge.w:Ve:be?Fe&&le==="right"?ge.r+ge.w:Ve:ge.w,2*Te);var He=0,rt=0;se.each(function(Ye){var Be=g(Ye,fe,Te);He=Math.max(He,Be),rt+=Be}),Ce=null;var tt=0;if(ve){var ot=0,ht=0,_t=0;ie.each(function(){var Ye=0,Be=0;A.select(this).selectAll("g.traces").each(function(Pe){var qe=g(Pe,fe,Te),Xe=Pe[0].height;s.setTranslate(this,ze[0],ze[1]+xe+Se+Xe/2+Be),Be+=Xe,Ye=Math.max(Ye,qe),Re[Pe[0].trace.legendgroup]=Ye});var ke=Ye+Se;ht>0&&ke+xe+ht>fe._maxWidth?(tt=Math.max(tt,ht),ht=0,_t+=ot+Me,ot=Be):ot=Math.max(ot,Be),s.setTranslate(this,ht,_t),ht+=ke}),fe._width=Math.max(tt,ht)+xe,fe._height=_t+ot+Q}else{var dt=se.size(),bt=rt+Ae+(dt-1)*Se<fe._maxWidth,St=0,Et=0,zt=0,Ut=0;se.each(function(Ye){var Be=Ye[0].height,ke=g(Ye,fe,Te),Pe=bt?ke:He;Ie||(Pe+=Se),Pe+xe+Et-Se>=fe._maxWidth&&(tt=Math.max(tt,Ut),Et=0,zt+=St,fe._height+=St,St=0),s.setTranslate(this,ze[0]+xe+Et,ze[1]+xe+zt+Be/2+Se),Ut=Et+ke+Se,Et+=Pe,St=Math.max(St,Be)}),bt?(fe._width=Et+Ae,fe._height=St+Q):(fe._width=Math.max(tt,Ut)+Ae,fe._height+=St+Q)}}fe._width=Math.ceil(Math.max(fe._width+ze[0],fe._titleWidth+2*(xe+n.titlePad))),fe._height=Math.ceil(Math.max(fe._height+ze[1],fe._titleHeight+2*(xe+n.itemGap))),fe._effHeight=Math.min(fe._height,fe._maxHeight);var Pt=re._context.edits,Ze=Pt.legendText||Pt.legendPosition;se.each(function(Ye){var Be=A.select(this).select(".legendtoggle"),ke=Ye[0].height,Pe=Ye[0].trace.legendgroup,qe=g(Ye,fe,Te);ve&&Pe!==""&&(qe=Re[Pe]);var Xe=Ze?Te:Ce||qe;he||Ie||(Xe+=Se/2),s.setRect(Be,0,-ke/2,Xe,ke)})}(C,X,ee,P)},function(){var re,ie,se,fe,ye=z._size,ge=P.borderwidth;if(!F){var he=function(be){var Fe=be._fullLayout.legend,Ve=S(Fe),He=_(Fe);return l.autoMargin(be,"legend",{x:Fe.x,y:Fe.y,l:Fe._width*c[Ve],r:Fe._width*h[Ve],b:Fe._effHeight*h[He],t:Fe._effHeight*c[He]})}(C);if(he)return;var ve=ye.l+ye.w*P.x-c[S(P)]*P._width,Ie=ye.t+ye.h*(1-P.y)-c[_(P)]*P._effHeight;if(z.margin.autoexpand){var xe=ve,Ae=Ie;ve=k.constrain(ve,0,z.width-P._width),Ie=k.constrain(Ie,0,z.height-P._effHeight),ve!==xe&&k.log("Constrain legend.x to make legend fit inside graph"),Ie!==Ae&&k.log("Constrain legend.y to make legend fit inside graph")}s.setTranslate(B,ve,Ie)}if(J.on(".drag",null),B.on("wheel",null),F||P._height<=P._maxHeight||C._context.staticPlot){var Se=P._effHeight;F&&(Se=P._height),K.attr({width:P._width-ge,height:Se-ge,x:ge/2,y:ge/2}),s.setTranslate(G,0,0),j.select("rect").attr({width:P._width-2*ge,height:Se-2*ge,x:ge,y:ge}),s.setClipUrl(G,H,C),s.setRect(J,0,0,0,0),delete P._scrollY}else{var Te,Q,oe,ce=Math.max(n.scrollBarMinHeight,P._effHeight*P._effHeight/P._height),me=P._effHeight-ce-2*n.scrollBarMargin,Me=P._height-P._effHeight,Re=me/Me,Ce=Math.min(P._scrollY||0,Me);K.attr({width:P._width-2*ge+n.scrollBarWidth+n.scrollBarMargin,height:P._effHeight-ge,x:ge/2,y:ge/2}),j.select("rect").attr({width:P._width-2*ge+n.scrollBarWidth+n.scrollBarMargin,height:P._effHeight-2*ge,x:ge,y:ge+Ce}),s.setClipUrl(G,H,C),de(Ce,ce,Re),B.on("wheel",function(){de(Ce=k.constrain(P._scrollY+A.event.deltaY/me*Me,0,Me),ce,Re),Ce!==0&&Ce!==Me&&A.event.preventDefault()});var ze=A.behavior.drag().on("dragstart",function(){var be=A.event.sourceEvent;Te=be.type==="touchstart"?be.changedTouches[0].clientY:be.clientY,oe=Ce}).on("drag",function(){var be=A.event.sourceEvent;be.buttons===2||be.ctrlKey||(Q=be.type==="touchmove"?be.changedTouches[0].clientY:be.clientY,de(Ce=function(Fe,Ve,He){var rt=(He-Ve)/Re+Fe;return k.constrain(rt,0,Me)}(oe,Te,Q),ce,Re))});J.call(ze);var le=A.behavior.drag().on("dragstart",function(){var be=A.event.sourceEvent;be.type==="touchstart"&&(Te=be.changedTouches[0].clientY,oe=Ce)}).on("drag",function(){var be=A.event.sourceEvent;be.type==="touchmove"&&(Q=be.changedTouches[0].clientY,de(Ce=function(Fe,Ve,He){var rt=(Ve-He)/Re+Fe;return k.constrain(rt,0,Me)}(oe,Te,Q),ce,Re))});G.call(le)}function de(be,Fe,Ve){P._scrollY=C._fullLayout.legend._scrollY=be,s.setTranslate(G,0,-be),s.setRect(J,P._width,n.scrollBarMargin+be*Ve,n.scrollBarWidth,Fe),j.select("rect").attr("y",ge+be)}C._context.edits.legendPosition&&(B.classed("cursor-move",!0),d.init({element:B.node(),gd:C,prepFn:function(){var be=s.getTranslate(B);se=be.x,fe=be.y},moveFn:function(be,Fe){var Ve=se+be,He=fe+Fe;s.setTranslate(B,Ve,He),re=d.align(Ve,0,ye.l,ye.l+ye.w,P.xanchor),ie=d.align(He,0,ye.t+ye.h,ye.t,P.yanchor)},doneFn:function(){re!==void 0&&ie!==void 0&&T.call("_guiRelayout",C,{"legend.x":re,"legend.y":ie})},clickFn:function(be,Fe){var Ve=I.selectAll("g.traces").filter(function(){var He=this.getBoundingClientRect();return Fe.clientX>=He.left&&Fe.clientX<=He.right&&Fe.clientY>=He.top&&Fe.clientY<=He.bottom});Ve.size()>0&&y(C,B,Ve,be,Fe)}}))}],C)}}(E,L)}},82424:function($,R,e){var A=e(73972),k=e(10130);$.exports=function(l,T){var x,d,s=T._inHover,t=k.isGrouped(T),o=k.isReversed(T),r={},n=[],a=!1,i={},c=0,h=0;function f(U,z){if(U!==""&&k.isGrouped(T))n.indexOf(U)===-1?(n.push(U),a=!0,r[U]=[z]):r[U].push(z);else{var H="~~i"+c;n.push(H),r[H]=[z],c++}}for(x=0;x<l.length;x++){var b=l[x],v=b[0],g=v.trace,y=g.legendgroup;if(s||g.visible&&g.showlegend)if(A.traceIs(g,"pie-like"))for(i[y]||(i[y]={}),d=0;d<b.length;d++){var p=b[d].label;i[y][p]||(f(y,{label:p,color:b[d].color,i:b[d].i,trace:g,pts:b[d].pts}),i[y][p]=!0,h=Math.max(h,(p||"").length))}else f(y,v),h=Math.max(h,(g.name||"").length)}if(!n.length)return[];var m=!a||!t,w=[];for(x=0;x<n.length;x++){var u=r[n[x]];m?w.push(u[0]):w.push(u)}for(m&&(w=[w]),x=0;x<w.length;x++){var S=1/0;for(d=0;d<w[x].length;d++){var _=w[x][d].trace.legendrank;S>_&&(S=_)}w[x][0]._groupMinRank=S,w[x][0]._preGroupSort=x}var E=function(U,z){return U.trace.legendrank-z.trace.legendrank||U._preSort-z._preSort};for(w.forEach(function(U,z){U[0]._preGroupSort=z}),w.sort(function(U,z){return U[0]._groupMinRank-z[0]._groupMinRank||U[0]._preGroupSort-z[0]._preGroupSort}),x=0;x<w.length;x++){w[x].forEach(function(U,z){U._preSort=z}),w[x].sort(E);var L=w[x][0].trace,C=null;for(d=0;d<w[x].length;d++){var P=w[x][d].trace.legendgrouptitle;if(P&&P.text){C=P,s&&(P.font=T._groupTitleFont);break}}if(o&&w[x].reverse(),C){var I=!1;for(d=0;d<w[x].length;d++)if(A.traceIs(w[x][d].trace,"pie-like")){I=!0;break}w[x].unshift({i:-1,groupTitle:C,noClick:I,trace:{showlegend:L.showlegend,legendgroup:L.legendgroup,visible:T.groupclick==="toggleitem"||L.visible}})}for(d=0;d<w[x].length;d++)w[x][d]=[w[x][d]]}return T._lgroupsLength=w.length,T._maxNameLength=h,w}},85167:function($,R,e){var A=e(71828),k=e(73972),l=!0;$.exports=function(T,x,d){var s=x._fullLayout;if(!x._dragged&&!x._editing){var t,o=s.legend.itemclick,r=s.legend.itemdoubleclick,n=s.legend.groupclick;if(d===1&&o==="toggle"&&r==="toggleothers"&&l&&x.data&&x._context.showTips&&A.notifier(A._(x,"Double-click on legend to isolate one trace"),"long"),l=!1,d===1?t=o:d===2&&(t=r),t){var a=n==="togglegroup",i=s.hiddenlabels?s.hiddenlabels.slice():[],c=T.data()[0][0];if(!c.groupTitle||!c.noClick){var h,f,b,v,g,y=x._fullData,p=c.trace,m=p.legendgroup,w={},u=[],S=[],_=[];if(k.traceIs(p,"pie-like")){var E=c.label,L=i.indexOf(E);t==="toggle"?L===-1?i.push(E):i.splice(L,1):t==="toggleothers"&&(i=[],x.calcdata[0].forEach(function(W){E!==W.label&&i.push(W.label)}),x._fullLayout.hiddenlabels&&x._fullLayout.hiddenlabels.length===i.length&&L===-1&&(i=[])),k.call("_guiRelayout",x,"hiddenlabels",i)}else{var C,P=m&&m.length,I=[];if(P)for(h=0;h<y.length;h++)(C=y[h]).visible&&C.legendgroup===m&&I.push(h);if(t==="toggle"){var U;switch(p.visible){case!0:U="legendonly";break;case!1:U=!1;break;case"legendonly":U=!0}if(P)if(a)for(h=0;h<y.length;h++)y[h].visible!==!1&&y[h].legendgroup===m&&V(y[h],U);else V(p,U);else V(p,U)}else if(t==="toggleothers"){var z,H,F,N,B=!0;for(h=0;h<y.length;h++)if(z=y[h]===p,F=y[h].showlegend!==!0,!(z||F||(H=P&&y[h].legendgroup===m)||y[h].visible!==!0||k.traceIs(y[h],"notLegendIsolatable"))){B=!1;break}for(h=0;h<y.length;h++)if(y[h].visible!==!1&&!k.traceIs(y[h],"notLegendIsolatable"))switch(p.visible){case"legendonly":V(y[h],!0);break;case!0:N=!!B||"legendonly",z=y[h]===p,F=y[h].showlegend!==!0&&!y[h].legendgroup,H=z||P&&y[h].legendgroup===m,V(y[h],!(!H&&!F)||N)}}for(h=0;h<S.length;h++)if(b=S[h]){var j=b.constructUpdate(),K=Object.keys(j);for(f=0;f<K.length;f++)v=K[f],(w[v]=w[v]||[])[_[h]]=j[v]}for(g=Object.keys(w),h=0;h<g.length;h++)for(v=g[h],f=0;f<u.length;f++)w[v].hasOwnProperty(f)||(w[v][f]=void 0);k.call("_guiRestyle",x,w,u)}}}}function G(W,J,X){var ee=u.indexOf(W),re=w[J];return re||(re=w[J]=[]),u.indexOf(W)===-1&&(u.push(W),ee=u.length-1),re[ee]=X,ee}function V(W,J){if(!c.groupTitle||a){var X=W._fullInput;if(k.hasTransform(X,"groupby")){var ee=S[X.index];if(!ee){var re=k.getTransformIndices(X,"groupby"),ie=re[re.length-1];ee=A.keyedContainer(X,"transforms["+ie+"].styles","target","value.visible"),S[X.index]=ee}var se=ee.get(W._group);se===void 0&&(se=!0),se!==!1&&ee.set(W._group,J),_[X.index]=G(X.index,"visible",X.visible!==!1)}else{var fe=X.visible!==!1&&J;G(X.index,"visible",fe)}}}}},10130:function($,R){R.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},R.isVertical=function(e){return e.orientation!=="h"},R.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2199:function($,R,e){$.exports={moduleType:"component",name:"legend",layoutAttributes:e(33030),supplyLayoutDefaults:e(99017),draw:e(43969),style:e(53630)}},53630:function($,R,e){var A=e(39898),k=e(73972),l=e(71828),T=l.strTranslate,x=e(91424),d=e(7901),s=e(52075).extractOpts,t=e(34098),o=e(63463),r=e(53581).castOption,n=e(14928);function a(h,f){return(f?"radial":"horizontal")+(h?"":"reversed")}function i(h){var f=h[0].trace,b=f.contours,v=t.hasLines(f),g=t.hasMarkers(f),y=f.visible&&f.fill&&f.fill!=="none",p=!1,m=!1;if(b){var w=b.coloring;w==="lines"?p=!0:v=w==="none"||w==="heatmap"||b.showlines,b.type==="constraint"?y=b._operation!=="=":w!=="fill"&&w!=="heatmap"||(m=!0)}return{showMarker:g,showLine:v,showFill:y,showGradientLine:p,showGradientFill:m,anyLine:v||p,anyFill:y||m}}function c(h,f,b){return h&&l.isArrayOrTypedArray(h)?f:h>b?b:h}$.exports=function(h,f,b){var v=f._fullLayout;b||(b=v.legend);var g=b.itemsizing==="constant",y=b.itemwidth,p=(y+2*n.itemGap)/2,m=T(p,0),w=function(_,E,L,C){var P;if(_+1)P=_;else{if(!(E&&E.width>0))return 0;P=E.width}return g?C:Math.min(P,L)};function u(_,E,L){var C=_[0].trace,P=C.marker||{},I=P.line||{},U=L?C.visible&&C.type===L:k.traceIs(C,"bar"),z=A.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(U?[_]:[]);z.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),z.exit().remove(),z.each(function(H){var F=A.select(this),N=H[0],B=w(N.mlw,P.line,5,2);F.style("stroke-width",B+"px");var j=N.mcc;if(!b._inHover&&"mc"in N){var K=s(P),G=K.mid;G===void 0&&(G=(K.max+K.min)/2),j=x.tryColorscale(P,"")(G)}var V=j||N.mc||P.color,W=P.pattern,J=W&&x.getPatternAttr(W.shape,0,"");if(J){var X=x.getPatternAttr(W.bgcolor,0,null),ee=x.getPatternAttr(W.fgcolor,0,null),re=W.fgopacity,ie=c(W.size,8,10),se=c(W.solidity,.5,1),fe="legend-"+C.uid;F.call(x.pattern,"legend",f,fe,J,ie,se,j,W.fillmode,X,ee,re)}else F.call(d.fill,V);B&&d.stroke(F,N.mlc||I.color)})}function S(_,E,L){var C=_[0],P=C.trace,I=L?P.visible&&P.type===L:k.traceIs(P,L),U=A.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(I?[_]:[]);if(U.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),U.exit().remove(),U.size()){var z=(P.marker||{}).line,H=w(r(z.width,C.pts),z,5,2),F=l.minExtend(P,{marker:{line:{width:H}}});F.marker.line.color=z.color;var N=l.minExtend(C,{trace:F});o(U,N,F)}}h.each(function(_){var E=A.select(this),L=l.ensureSingle(E,"g","layers");L.style("opacity",_[0].trace.opacity);var C=b.valign,P=_[0].lineHeight,I=_[0].height;if(C!=="middle"&&P&&I){var U={top:1,bottom:-1}[C]*(.5*(P-I+3));L.attr("transform",T(0,U))}else L.attr("transform",null);L.selectAll("g.legendfill").data([_]).enter().append("g").classed("legendfill",!0),L.selectAll("g.legendlines").data([_]).enter().append("g").classed("legendlines",!0);var z=L.selectAll("g.legendsymbols").data([_]);z.enter().append("g").classed("legendsymbols",!0),z.selectAll("g.legendpoints").data([_]).enter().append("g").classed("legendpoints",!0)}).each(function(_){var E,L=_[0].trace,C=[];if(L.visible)switch(L.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var P=A.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(I,U){var z,H=A.select(this),F=s(L),N=F.colorscale,B=F.reversescale;if(N){if(!E){var j=N.length;z=U===0?N[B?j-1:0][1]:U===1?N[B?0:j-1][1]:N[Math.floor((j-1)/2)][1]}}else{var K=L.vertexcolor||L.facecolor||L.color;z=l.isArrayOrTypedArray(K)?K[U]||K[0]:K}H.attr("d",I[0]),z?H.call(d.fill,z):H.call(function(G){if(G.size()){var V="legendfill-"+L.uid;x.gradient(G,f,V,a(B,E==="radial"),N,"fill")}})})}).each(function(_){var E=_[0].trace,L=E.type==="waterfall";if(_[0]._distinct&&L){var C=_[0].trace[_[0].dir].marker;return _[0].mc=C.color,_[0].mlw=C.line.width,_[0].mlc=C.line.color,u(_,this,"waterfall")}var P=[];E.visible&&L&&(P=_[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var I=A.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);I.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),I.exit().remove(),I.each(function(U){var z=A.select(this),H=E[U[0]].marker,F=w(void 0,H.line,5,2);z.attr("d",U[1]).style("stroke-width",F+"px").call(d.fill,H.color),F&&z.call(d.stroke,H.line.color)})}).each(function(_){u(_,this,"funnel")}).each(function(_){u(_,this)}).each(function(_){var E=_[0].trace,L=A.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[_]:[]);L.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),L.exit().remove(),L.each(function(){var C=A.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||d.opacity(E.fillcolor)!==0||d.opacity((E.line||{}).color)!==0){var P=w(void 0,E.line,5,2);C.style("stroke-width",P+"px").call(d.fill,E.fillcolor),P&&d.stroke(C,E.line.color)}else{var I=l.minExtend(E,{marker:{size:g?12:l.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});L.call(x.pointStyle,I,f)}})}).each(function(_){S(_,this,"funnelarea")}).each(function(_){S(_,this,"pie")}).each(function(_){var E,L,C=i(_),P=C.showFill,I=C.showLine,U=C.showGradientLine,z=C.showGradientFill,H=C.anyFill,F=C.anyLine,N=_[0],B=N.trace,j=s(B),K=j.colorscale,G=j.reversescale,V=t.hasMarkers(B)||!H?"M5,0":F?"M5,-2":"M5,-3",W=A.select(this),J=W.select(".legendfill").selectAll("path").data(P||z?[_]:[]);if(J.enter().append("path").classed("js-fill",!0),J.exit().remove(),J.attr("d",V+"h"+y+"v6h-"+y+"z").call(function(re){if(re.size())if(P)x.fillGroupStyle(re,f);else{var ie="legendfill-"+B.uid;x.gradient(re,f,ie,a(G),K,"fill")}}),I||U){var X=w(void 0,B.line,10,5);L=l.minExtend(B,{line:{width:X}}),E=[l.minExtend(N,{trace:L})]}var ee=W.select(".legendlines").selectAll("path").data(I||U?[E]:[]);ee.enter().append("path").classed("js-line",!0),ee.exit().remove(),ee.attr("d",V+(U?"l"+y+",0.0001":"h"+y)).call(I?x.lineGroupStyle:function(re){if(re.size()){var ie="legendline-"+B.uid;x.lineGroupStyle(re),x.gradient(re,f,ie,a(G),K,"stroke")}})}).each(function(_){var E,L,C=i(_),P=C.anyFill,I=C.anyLine,U=C.showLine,z=C.showMarker,H=_[0],F=H.trace,N=!z&&!I&&!P&&t.hasText(F);function B(ee,re,ie,se){var fe=l.nestedProperty(F,ee).get(),ye=l.isArrayOrTypedArray(fe)&&re?re(fe):fe;if(g&&ye&&se!==void 0&&(ye=se),ie){if(ye<ie[0])return ie[0];if(ye>ie[1])return ie[1]}return ye}function j(ee){return H._distinct&&H.index&&ee[H.index]?ee[H.index]:ee[0]}if(z||N||U){var K={},G={};if(z){K.mc=B("marker.color",j),K.mx=B("marker.symbol",j),K.mo=B("marker.opacity",l.mean,[.2,1]),K.mlc=B("marker.line.color",j),K.mlw=B("marker.line.width",l.mean,[0,5],2),G.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var V=B("marker.size",l.mean,[2,16],12);K.ms=V,G.marker.size=V}U&&(G.line={width:B("line.width",j,[0,10],5)}),N&&(K.tx="Aa",K.tp=B("textposition",j),K.ts=10,K.tc=B("textfont.color",j),K.tf=B("textfont.family",j)),E=[l.minExtend(H,K)],(L=l.minExtend(F,G)).selectedpoints=null,L.texttemplate=null}var W=A.select(this).select("g.legendpoints"),J=W.selectAll("path.scatterpts").data(z?E:[]);J.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),J.exit().remove(),J.call(x.pointStyle,L,f),z&&(E[0].mrc=3);var X=W.selectAll("g.pointtext").data(N?E:[]);X.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),X.exit().remove(),X.selectAll("text").call(x.textPointStyle,L,f)}).each(function(_){var E=_[0].trace,L=A.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[_,_]:[]);L.enter().append("path").classed("legendcandle",!0).attr("d",function(C,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var I=A.select(this),U=E[P?"increasing":"decreasing"],z=w(void 0,U.line,5,2);I.style("stroke-width",z+"px").call(d.fill,U.fillcolor),z&&d.stroke(I,U.line.color)})}).each(function(_){var E=_[0].trace,L=A.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[_,_]:[]);L.enter().append("path").classed("legendohlc",!0).attr("d",function(C,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var I=A.select(this),U=E[P?"increasing":"decreasing"],z=w(void 0,U.line,5,2);I.style("fill","none").call(x.dashLine,U.line.dash,z),z&&d.stroke(I,U.line.color)})})}},42068:function($,R,e){e(93348),$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function($,R,e){var A=e(73972),k=e(74875),l=e(41675),T=e(24255),x=e(34031).eraseActiveShape,d=e(71828),s=d._,t=$.exports={};function o(v,g){var y,p,m=g.currentTarget,w=m.getAttribute("data-attr"),u=m.getAttribute("data-val")||!0,S=v._fullLayout,_={},E=l.list(v,null,!0),L=S._cartesianSpikesEnabled;if(w==="zoom"){var C,P=u==="in"?.5:2,I=(1+P)/2,U=(1-P)/2;for(p=0;p<E.length;p++)if(!(y=E[p]).fixedrange)if(C=y._name,u==="auto")_[C+".autorange"]=!0;else if(u==="reset"){if(y._rangeInitial===void 0)_[C+".autorange"]=!0;else{var z=y._rangeInitial.slice();_[C+".range[0]"]=z[0],_[C+".range[1]"]=z[1]}y._showSpikeInitial!==void 0&&(_[C+".showspikes"]=y._showSpikeInitial,L!=="on"||y._showSpikeInitial||(L="off"))}else{var H=[y.r2l(y.range[0]),y.r2l(y.range[1])],F=[I*H[0]+U*H[1],I*H[1]+U*H[0]];_[C+".range[0]"]=y.l2r(F[0]),_[C+".range[1]"]=y.l2r(F[1])}}else w!=="hovermode"||u!=="x"&&u!=="y"||(u=S._isHoriz?"y":"x",m.setAttribute("data-val",u)),_[w]=u;S._cartesianSpikesEnabled=L,A.call("_guiRelayout",v,_)}function r(v,g){for(var y=g.currentTarget,p=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,w=v._fullLayout._subplots.gl3d||[],u={},S=p.split("."),_=0;_<w.length;_++)u[w[_]+"."+S[1]]=m;var E=m==="pan"?m:"zoom";u.dragmode=E,A.call("_guiRelayout",v,u)}function n(v,g){for(var y=g.currentTarget.getAttribute("data-attr"),p=y==="resetLastSave",m=y==="resetDefault",w=v._fullLayout,u=w._subplots.gl3d||[],S={},_=0;_<u.length;_++){var E,L=u[_],C=L+".camera",P=L+".aspectratio",I=L+".aspectmode",U=w[L]._scene;p?(S[C+".up"]=U.viewInitial.up,S[C+".eye"]=U.viewInitial.eye,S[C+".center"]=U.viewInitial.center,E=!0):m&&(S[C+".up"]=null,S[C+".eye"]=null,S[C+".center"]=null,E=!0),E&&(S[P+".x"]=U.viewInitial.aspectratio.x,S[P+".y"]=U.viewInitial.aspectratio.y,S[P+".z"]=U.viewInitial.aspectratio.z,S[I]=U.viewInitial.aspectmode)}A.call("_guiRelayout",v,S)}function a(v,g){var y=g.currentTarget,p=y._previousVal,m=v._fullLayout,w=m._subplots.gl3d||[],u=["xaxis","yaxis","zaxis"],S={},_={};if(p)_=p,y._previousVal=null;else{for(var E=0;E<w.length;E++){var L=w[E],C=m[L],P=L+".hovermode";S[P]=C.hovermode,_[P]=!1;for(var I=0;I<3;I++){var U=u[I],z=L+"."+U+".showspikes";_[z]=!1,S[z]=C[U].showspikes}}y._previousVal=S}return _}function i(v,g){for(var y=g.currentTarget,p=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,w=v._fullLayout,u=w._subplots.geo||[],S=0;S<u.length;S++){var _=u[S],E=w[_];if(p==="zoom"){var L=E.projection.scale,C=m==="in"?2*L:.5*L;A.call("_guiRelayout",v,_+".projection.scale",C)}}p==="reset"&&b(v,"geo")}function c(v){var g=v._fullLayout;return!g.hovermode&&(g._has("cartesian")?g._isHoriz?"y":"x":"closest")}function h(v){var g=c(v);A.call("_guiRelayout",v,"hovermode",g)}function f(v,g){for(var y=g.currentTarget.getAttribute("data-val"),p=v._fullLayout,m=p._subplots.mapbox||[],w={},u=0;u<m.length;u++){var S=m[u],_=p[S].zoom,E=y==="in"?1.05*_:_/1.05;w[S+".zoom"]=E}A.call("_guiRelayout",v,w)}function b(v,g){for(var y=v._fullLayout,p=y._subplots[g]||[],m={},w=0;w<p.length;w++)for(var u=p[w],S=y[u]._subplot.viewInitial,_=Object.keys(S),E=0;E<_.length;E++){var L=_[E];m[u+"."+L]=S[L]}A.call("_guiRelayout",v,m)}t.toImage={name:"toImage",title:function(v){var g=(v._context.toImageButtonOptions||{}).format||"png";return s(v,g==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(v){var g=v._context.toImageButtonOptions,y={format:g.format||"png"};d.notifier(s(v,"Taking snapshot - this may take a few seconds"),"long"),y.format!=="svg"&&d.isIE()&&(d.notifier(s(v,"IE only supports svg.  Changing format to svg."),"long"),y.format="svg"),["filename","width","height","scale"].forEach(function(p){p in g&&(y[p]=g[p])}),A.call("downloadImage",v,y).then(function(p){d.notifier(s(v,"Snapshot succeeded")+" - "+p,"long")}).catch(function(){d.notifier(s(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(v){return s(v,"Edit in Chart Studio")},icon:T.disk,click:function(v){k.sendDataToCloud(v)}},t.editInChartStudio={name:"editInChartStudio",title:function(v){return s(v,"Edit in Chart Studio")},icon:T.pencil,click:function(v){k.sendDataToCloud(v)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:o},t.pan2d={name:"pan2d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:o},t.select2d={name:"select2d",_cat:"select",title:function(v){return s(v,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:o},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(v){return s(v,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:o},t.drawclosedpath={name:"drawclosedpath",title:function(v){return s(v,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:o},t.drawopenpath={name:"drawopenpath",title:function(v){return s(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:o},t.drawline={name:"drawline",title:function(v){return s(v,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:o},t.drawrect={name:"drawrect",title:function(v){return s(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:o},t.drawcircle={name:"drawcircle",title:function(v){return s(v,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:o},t.eraseshape={name:"eraseshape",title:function(v){return s(v,"Erase active shape")},icon:T.eraseshape,click:x},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:o},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:o},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(v){return s(v,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:o},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(v){return s(v,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:o},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(v){return s(v,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:o},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(v){return s(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:o},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},t.pan3d={name:"pan3d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},t.orbitRotation={name:"orbitRotation",title:function(v){return s(v,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},t.tableRotation={name:"tableRotation",title:function(v){return s(v,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(v){return s(v,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:n},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(v){return s(v,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:n},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(v,g){var y=a(v,g);A.call("_guiRelayout",v,y)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(v){return s(v,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:i},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:h},t.resetViewSankey={name:"resetSankeyGroup",title:function(v){return s(v,"Reset view")},icon:T.home,click:function(v){for(var g={"node.groups":[],"node.x":[],"node.y":[]},y=0;y<v._fullData.length;y++){var p=v._fullData[y]._viewInitial;g["node.groups"].push(p.node.groups.slice()),g["node.x"].push(p.node.x.slice()),g["node.y"].push(p.node.y.slice())}A.call("restyle",v,g)}},t.toggleHover={name:"toggleHover",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(v,g){var y=a(v,g);y.hovermode=c(v),A.call("_guiRelayout",v,y)}},t.resetViews={name:"resetViews",title:function(v){return s(v,"Reset views")},icon:T.home,click:function(v,g){var y=g.currentTarget;y.setAttribute("data-attr","zoom"),y.setAttribute("data-val","reset"),o(v,g),y.setAttribute("data-attr","resetLastSave"),n(v,g),b(v,"geo"),b(v,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(v){return s(v,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var g=v._fullLayout,y=g._cartesianSpikesEnabled;g._cartesianSpikesEnabled=y==="on"?"off":"on",A.call("_guiRelayout",v,function(p){for(var m=p._fullLayout._cartesianSpikesEnabled==="on",w=l.list(p,null,!0),u={},S=0;S<w.length;S++){var _=w[S];u[_._name+".showspikes"]=!!m||_._showSpikeInitial}return u}(v))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(v){return s(v,"Reset view")},attr:"reset",icon:T.home,click:function(v){b(v,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:f},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:f}},93348:function($,R,e){var A=e(26023),k=Object.keys(A),l=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(l),x=[];k.forEach(function(d){(function(s){if(T.indexOf(s._cat||s.name)===-1){var t=s.name,o=(s._cat||s.name).toLowerCase();x.indexOf(t)===-1&&x.push(t),x.indexOf(o)===-1&&x.push(o)}})(A[d])}),x.sort(),$.exports={DRAW_MODES:l,backButtons:T,foreButtons:x}},35750:function($,R,e){var A=e(71828),k=e(7901),l=e(44467),T=e(42068);$.exports=function(x,d){var s=x.modebar||{},t=l.newContainer(d,"modebar");function o(n,a){return A.coerce(s,t,T,n,a)}o("orientation"),o("bgcolor",k.addOpacity(d.paper_bgcolor,.5));var r=k.contrast(k.rgb(d.modebar.bgcolor));o("color",k.addOpacity(r,.3)),o("activecolor",k.addOpacity(r,.7)),o("uirevision",d.uirevision),o("add"),o("remove")}},64168:function($,R,e){$.exports={moduleType:"component",name:"modebar",layoutAttributes:e(42068),supplyLayoutDefaults:e(35750),manage:e(14192)}},14192:function($,R,e){var A=e(41675),k=e(34098),l=e(73972),T=e(23469).isUnifiedHover,x=e(37676),d=e(26023),s=e(93348).DRAW_MODES,t=e(71828).extendDeep;$.exports=function(o){var r=o._fullLayout,n=o._context,a=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,c=n.modeBarButtons;i=Array.isArray(c)&&c.length?function(h){for(var f=t([],h),b=0;b<f.length;b++)for(var v=f[b],g=0;g<v.length;g++){var y=v[g];if(typeof y=="string"){if(d[y]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));f[b][g]=d[y]}}return f}(c):!n.displayModeBar&&n.watermark?[]:function(h){var f=h._fullLayout,b=h._fullData,v=h._context;function g(fe,ye){if(typeof ye=="string"){if(ye.toLowerCase()===fe.toLowerCase())return!0}else{var ge=ye.name,he=ye._cat||ye.name;if(ge===fe||he===fe.toLowerCase())return!0}return!1}var y=f.modebar.add;typeof y=="string"&&(y=[y]);var p=f.modebar.remove;typeof p=="string"&&(p=[p]);var m=v.modeBarButtonsToAdd.concat(y.filter(function(fe){for(var ye=0;ye<v.modeBarButtonsToRemove.length;ye++)if(g(fe,v.modeBarButtonsToRemove[ye]))return!1;return!0})),w=v.modeBarButtonsToRemove.concat(p.filter(function(fe){for(var ye=0;ye<v.modeBarButtonsToAdd.length;ye++)if(g(fe,v.modeBarButtonsToAdd[ye]))return!1;return!0})),u=f._has("cartesian"),S=f._has("gl3d"),_=f._has("geo"),E=f._has("pie"),L=f._has("funnelarea"),C=f._has("gl2d"),P=f._has("ternary"),I=f._has("mapbox"),U=f._has("polar"),z=f._has("smith"),H=f._has("sankey"),F=function(fe){for(var ye=A.list({_fullLayout:fe},null,!0),ge=0;ge<ye.length;ge++)if(!ye[ge].fixedrange)return!1;return!0}(f),N=T(f.hovermode),B=[];function j(fe){if(fe.length){for(var ye=[],ge=0;ge<fe.length;ge++){for(var he=fe[ge],ve=d[he],Ie=ve.name.toLowerCase(),xe=(ve._cat||ve.name).toLowerCase(),Ae=!1,Se=0;Se<w.length;Se++){var Te=w[Se].toLowerCase();if(Te===Ie||Te===xe){Ae=!0;break}}Ae||ye.push(d[he])}B.push(ye)}}var K=["toImage"];v.showEditInChartStudio?K.push("editInChartStudio"):v.showSendToCloud&&K.push("sendDataToCloud"),j(K);var G=[],V=[],W=[],J=[];(u||C||E||L||P)+_+S+I+U+z>1?(V=["toggleHover"],W=["resetViews"]):_?(G=["zoomInGeo","zoomOutGeo"],V=["hoverClosestGeo"],W=["resetGeo"]):S?(V=["hoverClosest3d"],W=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(G=["zoomInMapbox","zoomOutMapbox"],V=["toggleHover"],W=["resetViewMapbox"]):C?V=["hoverClosestGl2d"]:E?V=["hoverClosestPie"]:H?(V=["hoverClosestCartesian","hoverCompareCartesian"],W=["resetViewSankey"]):V=["toggleHover"],u&&(V=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(fe){for(var ye=0;ye<fe.length;ye++)if(!l.traceIs(fe[ye],"noHover"))return!1;return!0}(b)||N)&&(V=[]),!u&&!C||F||(G=["zoomIn2d","zoomOut2d","autoScale2d"],W[0]!=="resetViews"&&(W=["resetScale2d"])),S?J=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||C)&&!F||P?J=["zoom2d","pan2d"]:I||_?J=["pan2d"]:U&&(J=["zoom2d"]),function(fe){for(var ye=!1,ge=0;ge<fe.length&&!ye;ge++){var he=fe[ge];he._module&&he._module.selectPoints&&(l.traceIs(he,"scatter-like")?(k.hasMarkers(he)||k.hasText(he))&&(ye=!0):l.traceIs(he,"box-violin")&&he.boxpoints!=="all"&&he.points!=="all"||(ye=!0))}return ye}(b)&&J.push("select2d","lasso2d");var X=[],ee=function(fe){X.indexOf(fe)===-1&&V.indexOf(fe)!==-1&&X.push(fe)};if(Array.isArray(m)){for(var re=[],ie=0;ie<m.length;ie++){var se=m[ie];typeof se=="string"?(se=se.toLowerCase(),s.indexOf(se)!==-1?(f._has("mapbox")||f._has("cartesian"))&&J.push(se):se==="togglespikelines"?ee("toggleSpikelines"):se==="togglehover"?ee("toggleHover"):se==="hovercompare"?ee("hoverCompareCartesian"):se==="hoverclosest"?(ee("hoverClosestCartesian"),ee("hoverClosestGeo"),ee("hoverClosest3d"),ee("hoverClosestGl2d"),ee("hoverClosestPie")):se==="v1hovermode"&&(ee("toggleHover"),ee("hoverClosestCartesian"),ee("hoverCompareCartesian"),ee("hoverClosestGeo"),ee("hoverClosest3d"),ee("hoverClosestGl2d"),ee("hoverClosestPie"))):re.push(se)}m=re}return j(J),j(G.concat(W)),j(X),function(fe,ye){if(ye.length)if(Array.isArray(ye[0]))for(var ge=0;ge<ye.length;ge++)fe.push(ye[ge]);else fe.push(ye);return fe}(B,m)}(o),a?a.update(o,i):r._modeBar=x(o,i)}else a&&(a.destroy(),delete r._modeBar)}},37676:function($,R,e){var A=e(39898),k=e(92770),l=e(71828),T=e(24255),x=e(11506).version,d=new DOMParser;function s(o){this.container=o.container,this.element=document.createElement("div"),this.update(o.graphInfo,o.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(o,r){this.graphInfo=o;var n=this.graphInfo._context,a=this.graphInfo._fullLayout,i="modebar-"+a._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar",n.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),a.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var c=a.modebar,h=n.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";l.deleteRelatedStyleRule(i),l.addRelatedStyleRule(i,h+"#"+i+" .modebar-group","background-color: "+c.bgcolor),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+c.color),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+c.activecolor),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+c.activecolor);var f=!this.hasButtons(r),b=this.hasLogo!==n.displaylogo,v=this.locale!==n.locale;if(this.locale=n.locale,(f||b||v)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var g=this.getLogo();n.watermark&&(g.className=g.className+" watermark"),a.modebar.orientation==="v"?this.element.insertBefore(g,this.element.childNodes[0]):this.element.appendChild(g),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(o){var r=this;this.buttons=o,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var a=r.createGroup();n.forEach(function(i){var c=i.name;if(!c)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(c)!==-1)throw new Error("button name '"+c+"' is taken");r.buttonsNames.push(c);var h=r.createButton(i);r.buttonElements.push(h),a.appendChild(h)}),r.element.appendChild(a)})},t.createGroup=function(){var o=document.createElement("div");return o.className="modebar-group",o},t.createButton=function(o){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=o.title;a===void 0?a=o.name:typeof a=="function"&&(a=a(this.graphInfo)),(a||a===0)&&n.setAttribute("data-title",a),o.attr!==void 0&&n.setAttribute("data-attr",o.attr);var i=o.val;if(i!==void 0&&(typeof i=="function"&&(i=i(this.graphInfo)),n.setAttribute("data-val",i)),typeof o.click!="function")throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(h){o.click(r.graphInfo,h),r.updateActiveButton(h.currentTarget)}),n.setAttribute("data-toggle",o.toggle||!1),o.toggle&&A.select(n).classed("active",!0);var c=o.icon;return typeof c=="function"?n.appendChild(c()):n.appendChild(this.createIcon(c||T.question)),n.setAttribute("data-gravity",o.gravity||"n"),n},t.createIcon=function(o){var r,n=k(o.height)?Number(o.height):o.ascent-o.descent,a="http://www.w3.org/2000/svg";if(o.path){(r=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,o.width,n].join(" ")),r.setAttribute("class","icon");var i=document.createElementNS(a,"path");i.setAttribute("d",o.path),o.transform?i.setAttribute("transform",o.transform):o.ascent!==void 0&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+o.ascent+")"),r.appendChild(i)}return o.svg&&(r=d.parseFromString(o.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(o){var r=this.graphInfo._fullLayout,n=o!==void 0?o.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var i=a.getAttribute("data-val")||!0,c=a.getAttribute("data-attr"),h=a.getAttribute("data-toggle")==="true",f=A.select(a);if(h)c===n&&f.classed("active",!f.classed("active"));else{var b=c===null?c:l.nestedProperty(r,c).get();f.classed("active",b===i)}})},t.hasButtons=function(o){var r=this.buttons;if(!r||o.length!==r.length)return!1;for(var n=0;n<o.length;++n){if(o[n].length!==r[n].length)return!1;for(var a=0;a<o[n].length;a++)if(o[n][a].name!==r[n][a].name)return!1}return!0},t.getLogo=function(){var o=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",l._(this.graphInfo,"Produced with Plotly.js")+" (v"+x+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),o.appendChild(r),o},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){l.removeElement(this.container.querySelector(".modebar")),l.deleteRelatedStyleRule(this._uid)},$.exports=function(o,r){var n=o._fullLayout,a=new s({graphInfo:o,container:n._modebardiv.node(),buttons:r});return n._privateplot&&A.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},37113:function($,R,e){var A=e(41940),k=e(22399),l=(0,e(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$.exports={visible:{valType:"boolean",editType:"plot"},buttons:l,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:A({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function($){$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function($,R,e){var A=e(71828),k=e(7901),l=e(44467),T=e(85501),x=e(37113),d=e(89573);function s(t,o,r,n){var a=n.calendar;function i(h,f){return A.coerce(t,o,x.buttons,h,f)}if(i("visible")){var c=i("step");c!=="all"&&(!a||a==="gregorian"||c!=="month"&&c!=="year"?i("stepmode"):o.stepmode="backward",i("count")),i("label")}}$.exports=function(t,o,r,n,a){var i=t.rangeselector||{},c=l.newContainer(o,"rangeselector");function h(v,g){return A.coerce(i,c,x,v,g)}if(h("visible",T(i,c,{name:"buttons",handleItemDefaults:s,calendar:a}).length>0)){var f=function(v,g,y){for(var p=y.filter(function(S){return g[S].anchor===v._id}),m=0,w=0;w<p.length;w++){var u=g[p[w]].domain;u&&(m=Math.max(u[1],m))}return[v.domain[0],m+d.yPad]}(o,r,n);h("x",f[0]),h("y",f[1]),A.noneOrAll(t,o,["x","y"]),h("xanchor"),h("yanchor"),A.coerceFont(h,"font",r.font);var b=h("bgcolor");h("activecolor",k.contrast(b,d.lightAmount,d.darkAmount)),h("bordercolor"),h("borderwidth")}}},21598:function($,R,e){var A=e(39898),k=e(73972),l=e(74875),T=e(7901),x=e(91424),d=e(71828),s=d.strTranslate,t=e(63893),o=e(41675),r=e(18783),n=r.LINE_SPACING,a=r.FROM_TL,i=r.FROM_BR,c=e(89573),h=e(70565);function f(g){return g._id}function b(g,y,p){var m=d.ensureSingle(g,"rect","selector-rect",function(w){w.attr("shape-rendering","crispEdges")});m.attr({rx:c.rx,ry:c.ry}),m.call(T.stroke,y.bordercolor).call(T.fill,function(w,u){return u._isActive||u._isHovered?w.activecolor:w.bgcolor}(y,p)).style("stroke-width",y.borderwidth+"px")}function v(g,y,p,m){var w,u;d.ensureSingle(g,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(x.font,y.font).text((w=p,u=m._fullLayout._meta,w.label?u?d.templateString(w.label,u):w.label:w.step==="all"?"all":w.count+w.step.charAt(0))).call(function(S){t.convertToTspans(S,m)})}$.exports=function(g){var y=g._fullLayout._infolayer.selectAll(".rangeselector").data(function(p){for(var m=o.list(p,"x",!0),w=[],u=0;u<m.length;u++){var S=m[u];S.rangeselector&&S.rangeselector.visible&&w.push(S)}return w}(g),f);y.enter().append("g").classed("rangeselector",!0),y.exit().remove(),y.style({cursor:"pointer","pointer-events":"all"}),y.each(function(p){var m=A.select(this),w=p,u=w.rangeselector,S=m.selectAll("g.button").data(d.filterVisible(u.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(_){var E=A.select(this),L=h(w,_);_._isActive=function(C,P,I){if(P.step==="all")return C.autorange===!0;var U=Object.keys(I);return C.range[0]===I[U[0]]&&C.range[1]===I[U[1]]}(w,_,L),E.call(b,u,_),E.call(v,u,_,g),E.on("click",function(){g._dragged||k.call("_guiRelayout",g,L)}),E.on("mouseover",function(){_._isHovered=!0,E.call(b,u,_)}),E.on("mouseout",function(){_._isHovered=!1,E.call(b,u,_)})}),function(_,E,L,C,P){var I=0,U=0,z=L.borderwidth;E.each(function(){var K=A.select(this).select(".selector-text"),G=L.font.size*n,V=Math.max(G*t.lineCount(K),16)+3;U=Math.max(U,V)}),E.each(function(){var K=A.select(this),G=K.select(".selector-rect"),V=K.select(".selector-text"),W=V.node()&&x.bBox(V.node()).width,J=L.font.size*n,X=t.lineCount(V),ee=Math.max(W+10,c.minButtonWidth);K.attr("transform",s(z+I,z)),G.attr({x:0,y:0,width:ee,height:U}),t.positionText(V,ee/2,U/2-(X-1)*J/2+3),I+=ee+5});var H=_._fullLayout._size,F=H.l+H.w*L.x,N=H.t+H.h*(1-L.y),B="left";d.isRightAnchor(L)&&(F-=I,B="right"),d.isCenterAnchor(L)&&(F-=I/2,B="center");var j="top";d.isBottomAnchor(L)&&(N-=U,j="bottom"),d.isMiddleAnchor(L)&&(N-=U/2,j="middle"),I=Math.ceil(I),U=Math.ceil(U),F=Math.round(F),N=Math.round(N),l.autoMargin(_,C+"-range-selector",{x:L.x,y:L.y,l:I*a[B],r:I*i[B],b:U*i[j],t:U*a[j]}),P.attr("transform",s(F,N))}(g,S,u,w._name,m)})}},70565:function($,R,e){var A=e(81041),k=e(71828).titleCase;$.exports=function(l,T){var x=l._name,d={};if(T.step==="all")d[x+".autorange"]=!0;else{var s=function(t,o){var r,n=t.range,a=new Date(t.r2l(n[1])),i=o.step,c=A["utc"+k(i)],h=o.count;switch(o.stepmode){case"backward":r=t.l2r(+c.offset(a,-h));break;case"todate":var f=c.offset(a,-h);r=t.l2r(+c.ceil(f))}return[r,n[1]]}(l,T);d[x+".range[0]"]=s[0],d[x+".range[1]"]=s[1]}return d}},97218:function($,R,e){$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(37113)}}},layoutAttributes:e(37113),handleDefaults:e(28674),draw:e(21598)}},75148:function($,R,e){var A=e(22399);$.exports={bgcolor:{valType:"color",dflt:A.background,editType:"plot"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function($,R,e){var A=e(41675).list,k=e(71739).getAutoRange,l=e(73251);$.exports=function(T){for(var x=A(T,"x",!0),d=0;d<x.length;d++){var s=x[d],t=s[l.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(T,s))}}},73251:function($){$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function($,R,e){var A=e(71828),k=e(44467),l=e(41675),T=e(75148),x=e(47850);$.exports=function(d,s,t){var o=d[t],r=s[t];if(o.rangeslider||s._requestRangeslider[r._id]){A.isPlainObject(o.rangeslider)||(o.rangeslider={});var n,a,i=o.rangeslider,c=k.newContainer(r,"rangeslider");if(m("visible")){m("bgcolor",s.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!r.isValidRange(i.range)),m("range");var h=s._subplots;if(h)for(var f=h.cartesian.filter(function(u){return u.substr(0,u.indexOf("y"))===l.name2id(t)}).map(function(u){return u.substr(u.indexOf("y"),u.length)}),b=A.simpleMap(f,l.id2name),v=0;v<b.length;v++){var g=b[v];n=i[g]||{},a=k.newContainer(c,g,"yaxis");var y,p=s[g];n.range&&p.isValidRange(n.range)&&(y="fixed"),w("rangemode",y)!=="match"&&w("range",p.range.slice())}c._input=i}}function m(u,S){return A.coerce(i,c,T,u,S)}function w(u,S){return A.coerce(n,a,x,u,S)}}},72413:function($,R,e){var A=e(39898),k=e(73972),l=e(74875),T=e(71828),x=T.strTranslate,d=e(91424),s=e(7901),t=e(92998),o=e(93612),r=e(41675),n=e(28569),a=e(6964),i=e(73251);function c(y,p,m,w){var u=T.ensureSingle(y,"rect",i.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),S=w.borderwidth%2==0?w.borderwidth:w.borderwidth-1,_=-w._offsetShift,E=d.crispRound(p,w.borderwidth);u.attr({width:w._width+S,height:w._height+S,transform:x(_,_),"stroke-width":E}).call(s.stroke,w.bordercolor).call(s.fill,w.bgcolor)}function h(y,p,m,w){var u=p._fullLayout;T.ensureSingleById(u._topdefs,"clipPath",w._clipId,function(S){S.append("rect").attr({x:0,y:0})}).select("rect").attr({width:w._width,height:w._height})}function f(y,p,m,w){var u,S=p.calcdata,_=y.selectAll("g."+i.rangePlotClassName).data(m._subplotsWith,T.identity);_.enter().append("g").attr("class",function(E){return i.rangePlotClassName+" "+E}).call(d.setClipUrl,w._clipId,p),_.order(),_.exit().remove(),_.each(function(E,L){var C=A.select(this),P=L===0,I=r.getFromId(p,E,"y"),U=I._name,z=w[U],H={data:[],layout:{xaxis:{type:m.type,domain:[0,1],range:w.range.slice(),calendar:m.calendar},width:w._width,height:w._height,margin:{t:0,b:0,l:0,r:0}},_context:p._context};m.rangebreaks&&(H.layout.xaxis.rangebreaks=m.rangebreaks),H.layout[U]={type:I.type,domain:[0,1],range:z.rangemode!=="match"?z.range.slice():I.range.slice(),calendar:I.calendar},I.rangebreaks&&(H.layout[U].rangebreaks=I.rangebreaks),l.supplyDefaults(H);var F=H._fullLayout.xaxis,N=H._fullLayout[U];F.clearCalc(),F.setScale(),N.clearCalc(),N.setScale();var B={id:E,plotgroup:C,xaxis:F,yaxis:N,isRangePlot:!0};P?u=B:(B.mainplot="xy",B.mainplotinfo=u),o.rangePlot(p,B,function(j,K){for(var G=[],V=0;V<j.length;V++){var W=j[V],J=W[0].trace;J.xaxis+J.yaxis===K&&G.push(W)}return G}(S,E))})}function b(y,p,m,w,u){T.ensureSingle(y,"rect",i.maskMinClassName,function(S){S.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(s.fill,i.maskColor),T.ensureSingle(y,"rect",i.maskMaxClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(s.fill,i.maskColor),u.rangemode!=="match"&&(T.ensureSingle(y,"rect",i.maskMinOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).call(s.fill,i.maskOppAxisColor),T.ensureSingle(y,"rect",i.maskMaxOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).style("border-top",i.maskOppBorder).call(s.fill,i.maskOppAxisColor))}function v(y,p,m,w){p._context.staticPlot||T.ensureSingle(y,"rect",i.slideBoxClassName,function(u){u.attr({y:0,cursor:i.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:w._height,fill:i.slideBoxFill})}function g(y,p,m,w){var u=T.ensureSingle(y,"g",i.grabberMinClassName),S=T.ensureSingle(y,"g",i.grabberMaxClassName),_={x:0,width:i.handleWidth,rx:i.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":i.handleStrokeWidth,"shape-rendering":"crispEdges"},E={y:Math.round(w._height/4),height:Math.round(w._height/2)};T.ensureSingle(u,"rect",i.handleMinClassName,function(C){C.attr(_)}).attr(E),T.ensureSingle(S,"rect",i.handleMaxClassName,function(C){C.attr(_)}).attr(E);var L={width:i.grabAreaWidth,x:0,y:0,fill:i.grabAreaFill,cursor:p._context.staticPlot?void 0:i.grabAreaCursor};T.ensureSingle(u,"rect",i.grabAreaMinClassName,function(C){C.attr(L)}).attr("height",w._height),T.ensureSingle(S,"rect",i.grabAreaMaxClassName,function(C){C.attr(L)}).attr("height",w._height)}$.exports=function(y){for(var p=y._fullLayout,m=p._rangeSliderData,w=0;w<m.length;w++){var u=m[w][i.name];u._clipId=u._id+"-"+p._uid}var S=p._infolayer.selectAll("g."+i.containerClassName).data(m,function(_){return _._name});S.exit().each(function(_){var E=_[i.name];p._topdefs.select("#"+E._clipId).remove()}).remove(),m.length!==0&&(S.enter().append("g").classed(i.containerClassName,!0).attr("pointer-events","all"),S.each(function(_){var E=A.select(this),L=_[i.name],C=p[r.id2name(_.anchor)],P=L[r.id2name(_.anchor)];if(L.range){var I,U=T.simpleMap(L.range,_.r2l),z=T.simpleMap(_.range,_.r2l);I=z[0]<z[1]?[Math.min(U[0],z[0]),Math.max(U[1],z[1])]:[Math.max(U[0],z[0]),Math.min(U[1],z[1])],L.range=L._input.range=T.simpleMap(I,_.l2r)}_.cleanRange("rangeslider.range");var H=p._size,F=_.domain;L._width=H.w*(F[1]-F[0]);var N=Math.round(H.l+H.w*F[0]),B=Math.round(H.t+H.h*(1-_._counterDomainMin)+(_.side==="bottom"?_._depth:0)+L._offsetShift+i.extraPad);E.attr("transform",x(N,B)),L._rl=T.simpleMap(L.range,_.r2l);var j=L._rl[0],K=L._rl[1],G=K-j;if(L.p2d=function(fe){return fe/L._width*G+j},L.d2p=function(fe){return(fe-j)/G*L._width},_.rangebreaks){var V=_.locateBreaks(j,K);if(V.length){var W,J,X=0;for(W=0;W<V.length;W++)X+=(J=V[W]).max-J.min;var ee=L._width/(K-j-X),re=[-ee*j];for(W=0;W<V.length;W++)J=V[W],re.push(re[re.length-1]-ee*(J.max-J.min));for(L.d2p=function(fe){for(var ye=re[0],ge=0;ge<V.length;ge++){var he=V[ge];if(fe>=he.max)ye=re[ge+1];else if(fe<he.min)break}return ye+ee*fe},W=0;W<V.length;W++)(J=V[W]).pmin=L.d2p(J.min),J.pmax=L.d2p(J.max);L.p2d=function(fe){for(var ye=re[0],ge=0;ge<V.length;ge++){var he=V[ge];if(fe>=he.pmax)ye=re[ge+1];else if(fe<he.pmin)break}return(fe-ye)/ee}}}if(P.rangemode!=="match"){var ie=C.r2l(P.range[0]),se=C.r2l(P.range[1])-ie;L.d2pOppAxis=function(fe){return(fe-ie)/se*L._height}}E.call(c,y,_,L).call(h,y,_,L).call(f,y,_,L).call(b,y,_,L,P).call(v,y,_,L).call(g,y,_,L),function(fe,ye,ge,he){if(!ye._context.staticPlot){var ve=fe.select("rect."+i.slideBoxClassName).node(),Ie=fe.select("rect."+i.grabAreaMinClassName).node(),xe=fe.select("rect."+i.grabAreaMaxClassName).node();fe.on("mousedown",Ae),fe.on("touchstart",Ae)}function Ae(){var Se=A.event,Te=Se.target,Q=Se.clientX||Se.touches[0].clientX,oe=Q-fe.node().getBoundingClientRect().left,ce=he.d2p(ge._rl[0]),me=he.d2p(ge._rl[1]),Me=n.coverSlip();function Re(ze){var le,de,be,Fe=+(ze.clientX||ze.touches[0].clientX)-Q;switch(Te){case ve:be="ew-resize",le=ce+Fe,de=me+Fe;break;case Ie:be="col-resize",le=ce+Fe,de=me;break;case xe:be="col-resize",le=ce,de=me+Fe;break;default:be="ew-resize",le=oe,de=oe+Fe}if(de<le){var Ve=de;de=le,le=Ve}he._pixelMin=le,he._pixelMax=de,a(A.select(Me),be),function(He,rt,tt,ot){function ht(bt){return tt.l2r(T.constrain(bt,ot._rl[0],ot._rl[1]))}var _t=ht(ot.p2d(ot._pixelMin)),dt=ht(ot.p2d(ot._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",rt,tt._name+".range",[_t,dt])})}(0,ye,ge,he)}function Ce(){Me.removeEventListener("mousemove",Re),Me.removeEventListener("mouseup",Ce),this.removeEventListener("touchmove",Re),this.removeEventListener("touchend",Ce),T.removeElement(Me)}this.addEventListener("touchmove",Re),this.addEventListener("touchend",Ce),Me.addEventListener("mousemove",Re),Me.addEventListener("mouseup",Ce)}}(E,y,_,L),function(fe,ye,ge,he,ve,Ie){var xe=i.handleWidth/2;function Ae(ze){return T.constrain(ze,0,he._width)}function Se(ze){return T.constrain(ze,0,he._height)}function Te(ze){return T.constrain(ze,-xe,he._width+xe)}var Q=Ae(he.d2p(ge._rl[0])),oe=Ae(he.d2p(ge._rl[1]));if(fe.select("rect."+i.slideBoxClassName).attr("x",Q).attr("width",oe-Q),fe.select("rect."+i.maskMinClassName).attr("width",Q),fe.select("rect."+i.maskMaxClassName).attr("x",oe).attr("width",he._width-oe),Ie.rangemode!=="match"){var ce=he._height-Se(he.d2pOppAxis(ve._rl[1])),me=he._height-Se(he.d2pOppAxis(ve._rl[0]));fe.select("rect."+i.maskMinOppAxisClassName).attr("x",Q).attr("height",ce).attr("width",oe-Q),fe.select("rect."+i.maskMaxOppAxisClassName).attr("x",Q).attr("y",me).attr("height",he._height-me).attr("width",oe-Q),fe.select("rect."+i.slideBoxClassName).attr("y",ce).attr("height",me-ce)}var Me=.5,Re=Math.round(Te(Q-xe))-Me,Ce=Math.round(Te(oe-xe))+Me;fe.select("g."+i.grabberMinClassName).attr("transform",x(Re,Me)),fe.select("g."+i.grabberMaxClassName).attr("transform",x(Ce,Me))}(E,0,_,L,C,P),_.side==="bottom"&&t.draw(y,_._id+"title",{propContainer:_,propName:_._name+".title",placeholder:p._dfltTitle.x,attributes:{x:_._offset+_._length/2,y:B+L._height+L._offsetShift+10+1.5*_.title.font.size,"text-anchor":"middle"}})}))}},549:function($,R,e){var A=e(41675),k=e(63893),l=e(73251),T=e(18783).LINE_SPACING,x=l.name;function d(s){var t=s&&s[x];return t&&t.visible}R.isVisible=d,R.makeData=function(s){var t=A.list({_fullLayout:s},"x",!0),o=s.margin,r=[];if(!s._has("gl2d"))for(var n=0;n<t.length;n++){var a=t[n];if(d(a)){r.push(a);var i=a[x];i._id=x+a._id,i._height=(s.height-o.b-o.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2)}}s._rangeSliderData=r},R.autoMarginOpts=function(s,t){var o=s._fullLayout,r=t[x],n=t._id.charAt(0),a=0,i=0;return t.side==="bottom"&&(a=t._depth,t.title.text!==o._dfltTitle[n]&&(i=1.5*t.title.font.size+10+r._offsetShift,i+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(o.margin.b,i),pad:l.extraPad+2*r._offsetShift}}},13137:function($,R,e){var A=e(71828),k=e(75148),l=e(47850),T=e(549);$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:A.extendFlat({},k,{yaxis:l})}}},layoutAttributes:e(75148),handleDefaults:e(26377),calcAutorange:e(88443),draw:e(72413),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},47850:function($){$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function($,R,e){var A=e(50215),k=e(82196).line,l=e(79952).P,T=e(1426).extendFlat,x=e(30962).overrideAll,d=e(44467).templatedArray;e(24695),$.exports=x(d("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},A.xref,{}),yref:T({},A.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},l,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function($){$.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function($,R,e){var A=e(71828),k=e(89298),l=e(85501),T=e(8389),x=e(30477);function d(s,t,o){function r(E,L){return A.coerce(s,t,T,E,L)}var n=r("path"),a=r("type",n?"path":"rect")!=="path";a&&delete t.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var i=["x","y"],c=0;c<2;c++){var h,f,b,v=i[c],g={_fullLayout:o},y=k.coerceRef(s,t,g,v);if((h=k.getFromId(g,y))._selectionIndices.push(t._index),b=x.rangeToShapePosition(h),f=x.shapePositionToRange(h),a){var p=v+"0",m=v+"1",w=s[p],u=s[m];s[p]=f(s[p],!0),s[m]=f(s[m],!0),k.coercePosition(t,g,r,y,p),k.coercePosition(t,g,r,y,m);var S=t[p],_=t[m];S!==void 0&&_!==void 0&&(t[p]=b(S),t[m]=b(_),s[p]=w,s[m]=u)}}a&&A.noneOrAll(s,t,["x0","x1","y0","y1"])}$.exports=function(s,t){l(s,t,{name:"selections",handleItemDefaults:d});for(var o=t.selections,r=0;r<o.length;r++){var n=o[r];n&&n.path===void 0&&(n.x0!==void 0&&n.x1!==void 0&&n.y0!==void 0&&n.y1!==void 0||(t.selections[r]=null))}}},32485:function($,R,e){var A=e(60165).readPaths,k=e(42359),l=e(51873).clearOutlineControllers,T=e(7901),x=e(91424),d=e(44467).arrayEditor,s=e(30477),t=s.getPathString;function o(c){var h=c._fullLayout;for(var f in l(c),h._selectionLayer.selectAll("path").remove(),h._plots){var b=h._plots[f].selectionLayer;b&&b.selectAll("path").remove()}for(var v=0;v<h.selections.length;v++)n(c,v)}function r(c){return c._context.editSelection}function n(c,h){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+h+'"]').remove();var f=s.makeSelectionsOptionsAndPlotinfo(c,h),b=f.options,v=f.plotinfo;b._input&&function(g){var y=t(c,b),p={"data-index":h,"fill-rule":"evenodd",d:y},m=b.opacity,w="rgba(0,0,0,0)",u=b.line.color||T.contrast(c._fullLayout.plot_bgcolor),S=b.line.width,_=b.line.dash;S||(S=5,_="solid");var E=r(c)&&c._fullLayout._activeSelectionIndex===h;E&&(w=c._fullLayout.activeselection.fillcolor,m=c._fullLayout.activeselection.opacity);for(var L=[],C=1;C>=0;C--){var P=g.append("path").attr(p).style("opacity",C?.1:m).call(T.stroke,u).call(T.fill,w).call(x.dashLine,C?"solid":_,C?4+S:S);if(a(P,c,b),E){var I=d(c.layout,"selections",b);P.style({cursor:"move"});var U={element:P.node(),plotinfo:v,gd:c,editHelpers:I,isActiveSelection:!0},z=A(y,c);k(z,P,U)}else P.style("pointer-events",C?"all":"none");L[C]=P}var H=L[0];L[1].node().addEventListener("click",function(){return function(F,N){if(r(F)){var B=+N.node().getAttribute("data-index");if(B>=0){if(B===F._fullLayout._activeSelectionIndex)return void i(F);F._fullLayout._activeSelectionIndex=B,F._fullLayout._deactivateSelection=i,o(F)}}}(c,H)})}(c._fullLayout._selectionLayer)}function a(c,h,f){var b=f.xref+f.yref;x.setClipUrl(c,"clip"+h._fullLayout._uid+b,h)}function i(c){r(c)&&c._fullLayout._activeSelectionIndex>=0&&(l(c),delete c._fullLayout._activeSelectionIndex,o(c))}$.exports={draw:o,drawOne:n,activateLastSelection:function(c){if(r(c)){var h=c._fullLayout.selections.length-1;c._fullLayout._activeSelectionIndex=h,c._fullLayout._deactivateSelection=i,o(c)}}}},53777:function($,R,e){var A=e(79952).P,k=e(1426).extendFlat;$.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},A,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function($){$.exports=function(R,e,A){A("newselection.mode"),A("newselection.line.width")&&(A("newselection.line.color"),A("newselection.line.dash")),A("activeselection.fillcolor"),A("activeselection.opacity")}},35855:function($,R,e){var A=e(64505).selectMode,k=e(51873).clearOutline,l=e(60165),T=l.readPaths,x=l.writePaths,d=l.fixDatesForPaths;$.exports=function(s,t){if(s.length){var o=s[0][0];if(o){var r=o.getAttribute("d"),n=t.gd,a=n._fullLayout.newselection,i=t.plotinfo,c=i.xaxis,h=i.yaxis,f=t.isActiveSelection,b=t.dragmode,v=(n.layout||{}).selections||[];if(!A(b)&&f!==void 0){var g=n._fullLayout._activeSelectionIndex;if(g<v.length)switch(n._fullLayout.selections[g].type){case"rect":b="select";break;case"path":b="lasso"}}var y,p=T(r,n,i,f),m={xref:c._id,yref:h._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};p.length===1&&(y=p[0]),y&&y.length===5&&b==="select"?(m.type="rect",m.x0=y[0][1],m.y0=y[0][2],m.x1=y[2][1],m.y1=y[2][2]):(m.type="path",c&&h&&d(p,c,h),m.path=x(p),y=null),k(n);for(var w=t.editHelpers,u=(w||{}).modifyItem,S=[],_=0;_<v.length;_++){var E=n._fullLayout.selections[_];if(E){if(S[_]=E._input,f!==void 0&&_===n._fullLayout._activeSelectionIndex){var L=m;switch(E.type){case"rect":u("x0",L.x0),u("x1",L.x1),u("y0",L.y0),u("y1",L.y1);break;case"path":u("path",L.path)}}}else S[_]=E}return f===void 0?(S.push(m),S):w?w.getUpdateObj():{}}}}},75549:function($,R,e){var A=e(71828).strTranslate;function k(l,T){switch(l.type){case"log":return l.p2d(T);case"date":return l.p2r(T,0,l.calendar);default:return l.p2r(T)}}$.exports={p2r:k,r2p:function(l,T){switch(l.type){case"log":return l.d2p(T);case"date":return l.r2p(T,0,l.calendar);default:return l.r2p(T)}},axValue:function(l){var T=l._id.charAt(0)==="y"?1:0;return function(x){return k(l,x[T])}},getTransform:function(l){return A(l.xaxis._offset,l.yaxis._offset)}}},47322:function($,R,e){var A=e(32485),k=e(3937);$.exports={moduleType:"component",name:"selections",layoutAttributes:e(8389),supplyLayoutDefaults:e(59402),supplyDrawNewSelectionDefaults:e(90849),includeBasePlot:e(76325)("selections"),draw:A.draw,drawOne:A.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},3937:function($,R,e){var A=e(52142),k=e(38258),l=e(73972),T=e(91424).dashStyle,x=e(7901),d=e(30211),s=e(23469).makeEventData,t=e(64505),o=t.freeMode,r=t.rectMode,n=t.drawMode,a=t.openMode,i=t.selectMode,c=e(30477),h=e(21459),f=e(42359),b=e(51873).clearOutline,v=e(60165),g=v.handleEllipse,y=v.readPaths,p=e(90551),m=e(35855),w=e(32485).activateLastSelection,u=e(71828),S=u.sorterAsc,_=e(61082),E=e(79990),L=e(41675).getFromId,C=e(33306),P=e(61549).redrawReglTraces,I=e(34122),U=I.MINSELECT,z=_.filter,H=_.tester,F=e(75549),N=F.p2r,B=F.axValue,j=F.getTransform;function K(Ce){return Ce.subplot!==void 0}function G(Ce,ze,le,de,be,Fe,Ve){var He,rt,tt,ot,ht,_t,dt,bt,St,Et=ze._hoverdata,zt=ze._fullLayout.clickmode.indexOf("event")>-1,Ut=[];if(function(ke){return ke&&Array.isArray(ke)&&ke[0].hoverOnBox!==!0}(Et)){X(Ce,ze,Fe);var Pt=function(ke,Pe){var qe,Xe,nt=ke[0],ut=-1,ct=[];for(Xe=0;Xe<Pe.length;Xe++)if(qe=Pe[Xe],nt.fullData._expandedIndex===qe.cd[0].trace._expandedIndex){if(nt.hoverOnBox===!0)break;nt.pointNumber!==void 0?ut=nt.pointNumber:nt.binNumber!==void 0&&(ut=nt.binNumber,ct=nt.pointNumbers);break}return{pointNumber:ut,pointNumbers:ct,searchInfo:qe}}(Et,He=ie(ze,le,de,be));if(Pt.pointNumbers.length>0?function(ke,Pe){var qe,Xe,nt,ut=[];for(nt=0;nt<ke.length;nt++)(qe=ke[nt]).cd[0].trace.selectedpoints&&qe.cd[0].trace.selectedpoints.length>0&&ut.push(qe);if(ut.length===1&&ut[0]===Pe.searchInfo&&(Xe=Pe.searchInfo.cd[0].trace).selectedpoints.length===Pe.pointNumbers.length){for(nt=0;nt<Pe.pointNumbers.length;nt++)if(Xe.selectedpoints.indexOf(Pe.pointNumbers[nt])<0)return!1;return!0}return!1}(He,Pt):function(ke){var Pe,qe,Xe=0;for(qe=0;qe<ke.length;qe++)if((Pe=ke[qe].cd[0].trace).selectedpoints&&(Pe.selectedpoints.length>1||(Xe+=Pe.selectedpoints.length)>1))return!1;return Xe===1}(He)&&(_t=fe(Pt))){for(Ve&&Ve.remove(),St=0;St<He.length;St++)(rt=He[St])._module.selectPoints(rt,!1);ye(ze,He),ee(Fe),zt&&Re(ze)}else{for(dt=Ce.shiftKey&&(_t!==void 0?_t:fe(Pt)),tt=function(ke,Pe,qe){return{pointNumber:ke,searchInfo:Pe,subtract:!!qe}}(Pt.pointNumber,Pt.searchInfo,dt),ot=J(Fe.selectionDefs.concat([tt])),St=0;St<He.length;St++)if(ht=he(He[St]._module.selectPoints(He[St],ot),He[St]),Ut.length)for(var Ze=0;Ze<ht.length;Ze++)Ut.push(ht[Ze]);else Ut=ht;if(ye(ze,He,bt={points:Ut}),tt&&Fe&&Fe.selectionDefs.push(tt),Ve){var Ye=Fe.mergedPolygons,Be=a(Fe.dragmode);f(ve(Ye,Be),Ve,Fe)}zt&&Me(ze,bt)}}}function V(Ce){return"pointNumber"in Ce&&"searchInfo"in Ce}function W(Ce){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ze,le,de,be){var Fe=Ce.searchInfo.cd[0].trace._expandedIndex;return be.cd[0].trace._expandedIndex===Fe&&de===Ce.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ce.subtract}}function J(Ce){if(Ce.length){for(var ze=[],le=V(Ce[0])?0:Ce[0][0][0],de=le,be=V(Ce[0])?0:Ce[0][0][1],Fe=be,Ve=0;Ve<Ce.length;Ve++)if(V(Ce[Ve]))ze.push(W(Ce[Ve]));else{var He=H(Ce[Ve]);He.subtract=!!Ce[Ve].subtract,ze.push(He),le=Math.min(le,He.xmin),de=Math.max(de,He.xmax),be=Math.min(be,He.ymin),Fe=Math.max(Fe,He.ymax)}return{xmin:le,xmax:de,ymin:be,ymax:Fe,pts:[],contains:function(rt,tt,ot,ht){for(var _t=!1,dt=0;dt<ze.length;dt++)ze[dt].contains(rt,tt,ot,ht)&&(_t=!ze[dt].subtract);return _t},isRect:!1,degenerate:!1}}}function X(Ce,ze,le){var de=ze._fullLayout,be=le.plotinfo,Fe=le.dragmode,Ve=de._lastSelectedSubplot&&de._lastSelectedSubplot===be.id,He=(Ce.shiftKey||Ce.altKey)&&!(n(Fe)&&a(Fe));Ve&&He&&be.selection&&be.selection.selectionDefs&&!le.selectionDefs?(le.selectionDefs=be.selection.selectionDefs,le.mergedPolygons=be.selection.mergedPolygons):He&&be.selection||ee(le),Ve||(b(ze),de._lastSelectedSubplot=be.id)}function ee(Ce,ze){var le=Ce.dragmode,de=Ce.plotinfo,be=Ce.gd;(function(ht){return ht._fullLayout._activeShapeIndex>=0})(be)&&be._fullLayout._deactivateShape(be),function(ht){return ht._fullLayout._activeSelectionIndex>=0}(be)&&be._fullLayout._deactivateSelection(be);var Fe=be._fullLayout._zoomlayer,Ve=n(le),He=i(le);if(Ve||He){var rt,tt,ot=Fe.selectAll(".select-outline-"+de.id);ot&&be._fullLayout._outlining&&(Ve&&(rt=p(ot,Ce)),rt&&l.call("_guiRelayout",be,{shapes:rt}),He&&!K(Ce)&&(tt=m(ot,Ce)),tt&&(be._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",be,{selections:tt}).then(function(){ze&&w(be)})),be._fullLayout._outlining=!1)}de.selection={},de.selection.selectionDefs=Ce.selectionDefs=[],de.selection.mergedPolygons=Ce.mergedPolygons=[]}function re(Ce){return Ce._id}function ie(Ce,ze,le,de){if(!Ce.calcdata)return[];var be,Fe,Ve,He=[],rt=ze.map(re),tt=le.map(re);for(Ve=0;Ve<Ce.calcdata.length;Ve++)if((Fe=(be=Ce.calcdata[Ve])[0].trace).visible===!0&&Fe._module&&Fe._module.selectPoints)if(!K({subplot:de})||Fe.subplot!==de&&Fe.geo!==de)if(Fe.type==="splom"){if(Fe._xaxes[rt[0]]&&Fe._yaxes[tt[0]]){var ot=se(Fe._module,be,ze[0],le[0]);ot.scene=Ce._fullLayout._splomScenes[Fe.uid],He.push(ot)}}else if(Fe.type==="sankey"){var ht=se(Fe._module,be,ze[0],le[0]);He.push(ht)}else{if(rt.indexOf(Fe.xaxis)===-1||tt.indexOf(Fe.yaxis)===-1)continue;He.push(se(Fe._module,be,L(Ce,Fe.xaxis),L(Ce,Fe.yaxis)))}else He.push(se(Fe._module,be,ze[0],le[0]));return He}function se(Ce,ze,le,de){return{_module:Ce,cd:ze,xaxis:le,yaxis:de}}function fe(Ce){var ze=Ce.searchInfo.cd[0].trace,le=Ce.pointNumber,de=Ce.pointNumbers,be=de.length>0?de[0]:le;return!!ze.selectedpoints&&ze.selectedpoints.indexOf(be)>-1}function ye(Ce,ze,le){var de,be;for(de=0;de<ze.length;de++){var Fe=ze[de].cd[0].trace._fullInput,Ve=Ce._fullLayout._tracePreGUI[Fe.uid]||{};Ve.selectedpoints===void 0&&(Ve.selectedpoints=Fe._input.selectedpoints||null)}if(le){var He=le.points||[];for(de=0;de<ze.length;de++)(be=ze[de].cd[0].trace)._input.selectedpoints=be._fullInput.selectedpoints=[],be._fullInput!==be&&(be.selectedpoints=[]);for(var rt=0;rt<He.length;rt++){var tt=He[rt],ot=tt.data,ht=tt.fullData,_t=tt.pointIndex,dt=tt.pointIndices;dt?([].push.apply(ot.selectedpoints,dt),be._fullInput!==be&&[].push.apply(ht.selectedpoints,dt)):(ot.selectedpoints.push(_t),be._fullInput!==be&&ht.selectedpoints.push(_t))}}else for(de=0;de<ze.length;de++)delete(be=ze[de].cd[0].trace).selectedpoints,delete be._input.selectedpoints,be._fullInput!==be&&delete be._fullInput.selectedpoints;(function(bt,St){for(var Et=!1,zt=0;zt<St.length;zt++){var Ut=St[zt],Pt=Ut.cd;l.traceIs(Pt[0].trace,"regl")&&(Et=!0);var Ze=Ut._module,Ye=Ze.styleOnSelect||Ze.style;Ye&&(Ye(bt,Pt,Pt[0].node3),Pt[0].nodeRangePlot3&&Ye(bt,Pt,Pt[0].nodeRangePlot3))}Et&&(C(bt),P(bt))})(Ce,ze)}function ge(Ce,ze,le){for(var de=(le?A.difference:A.union)({regions:Ce},{regions:[ze]}).regions.reverse(),be=0;be<de.length;be++){var Fe=de[be];Fe.subtract=Q(Fe,de.slice(0,be))}return de}function he(Ce,ze){if(Array.isArray(Ce))for(var le=ze.cd,de=ze.cd[0].trace,be=0;be<Ce.length;be++)Ce[be]=s(Ce[be],de,le);return Ce}function ve(Ce,ze){for(var le=[],de=0;de<Ce.length;de++){le[de]=[];for(var be=0;be<Ce[de].length;be++){le[de][be]=[],le[de][be][0]=be?"L":"M";for(var Fe=0;Fe<Ce[de][be].length;Fe++)le[de][be].push(Ce[de][be][Fe])}ze||le[de].push(["Z",le[de][0][1],le[de][0][2]])}return le}function Ie(Ce,ze){for(var le,de,be=[],Fe=[],Ve=0;Ve<ze.length;Ve++){var He=ze[Ve];de=He._module.selectPoints(He,Ce),Fe.push(de),le=he(de,He),be=be.concat(le)}return be}function xe(Ce,ze,le,de,be){var Fe,Ve,He,rt=!!de;be&&(Fe=be.plotinfo,Ve=be.xaxes[0]._id,He=be.yaxes[0]._id);var tt=[],ot=[],ht=Te(Ce),_t=Ce._fullLayout;if(Fe){var dt=_t._zoomlayer,bt=_t.dragmode,St=n(bt),Et=i(bt);if(St||Et){var zt=L(Ce,Ve,"x"),Ut=L(Ce,He,"y");if(zt&&Ut){var Pt=dt.selectAll(".select-outline-"+Fe.id);if(Pt&&Ce._fullLayout._outlining&&Pt.length){for(var Ze=Pt[0][0].getAttribute("d"),Ye=y(Ze,Ce,Fe),Be=[],ke=0;ke<Ye.length;ke++){for(var Pe=Ye[ke],qe=[],Xe=0;Xe<Pe.length;Xe++)qe.push([oe(zt,Pe[Xe][1]),oe(Ut,Pe[Xe][2])]);qe.xref=Ve,qe.yref=He,qe.subtract=Q(qe,Be),Be.push(qe)}ht=ht.concat(Be)}}}}var nt=Ve&&He?[Ve+He]:_t._subplots.cartesian;(function(Dn){var Zn=Dn.calcdata;if(Zn)for(var Fn=0;Fn<Zn.length;Fn++){var nr=Zn[Fn][0].trace,$n=Dn._fullLayout._splomScenes;if($n){var mr=$n[nr.uid];mr&&(mr.selectBatch=[])}}})(Ce);for(var ut={},ct=0;ct<nt.length;ct++){var Ct=nt[ct],Lt=Ct.indexOf("y"),Mt=Ct.slice(0,Lt),mt=Ct.slice(Lt),kt=Ve&&He?le:void 0;if(kt=Se(ht,Mt,mt,kt)){var wt=de;if(!rt){var Ot=L(Ce,Mt,"x"),It=L(Ce,mt,"y");wt=ie(Ce,[Ot],[It],Ct);for(var Nt=0;Nt<wt.length;Nt++){var Dt=wt[Nt],qt=Dt.cd[0],Xt=qt.trace;if(Dt._module.name==="scattergl"&&!qt.t.xpx){var cn=Xt.x,yn=Xt.y,Kt=Xt._length;qt.t.xpx=[],qt.t.ypx=[];for(var Mn=0;Mn<Kt;Mn++)qt.t.xpx[Mn]=Ot.c2p(cn[Mn]),qt.t.ypx[Mn]=It.c2p(yn[Mn])}Dt._module.name==="splom"&&(ut[Xt.uid]||(ut[Xt.uid]=!0))}}var Un=Ie(kt,wt);tt=tt.concat(Un),ot=ot.concat(wt)}}var xn={points:tt};ye(Ce,ot,xn);var dn=_t.clickmode.indexOf("event")>-1&&ze;if(!Fe&&ze){var gn=Te(Ce,!0);if(gn.length){var an=gn[0].xref,sn=gn[0].yref;if(an&&sn){var On=ce(gn);me([L(Ce,an,"x"),L(Ce,sn,"y")])(xn,On)}}Ce._fullLayout._noEmitSelectedAtStart?Ce._fullLayout._noEmitSelectedAtStart=!1:dn&&Me(Ce,xn),_t._reselect=!1}if(!Fe&&_t._deselect){var En=_t._deselect;(function(Dn,Zn,Fn){for(var nr=0;nr<Fn.length;nr++){var $n=Fn[nr];if($n.xaxis&&$n.xaxis._id===Dn&&$n.yaxis&&$n.yaxis._id===Zn)return!0}return!1})(Ve=En.xref,He=En.yref,ot)||Ae(Ce,Ve,He,de),dn&&(xn.points.length?Me(Ce,xn):Re(Ce)),_t._deselect=!1}return{eventData:xn,selectionTesters:le}}function Ae(Ce,ze,le,de){de=ie(Ce,[L(Ce,ze,"x")],[L(Ce,le,"y")],ze+le);for(var be=0;be<de.length;be++){var Fe=de[be];Fe._module.selectPoints(Fe,!1)}ye(Ce,de)}function Se(Ce,ze,le,de){for(var be,Fe=0;Fe<Ce.length;Fe++){var Ve=Ce[Fe];ze===Ve.xref&&le===Ve.yref&&(be?de=J(be=ge(be,Ve,!!Ve.subtract)):(be=[Ve],de=H(Ve)))}return de}function Te(Ce,ze){for(var le=[],de=Ce._fullLayout,be=de.selections,Fe=be.length,Ve=0;Ve<Fe;Ve++)if(!ze||Ve===de._activeSelectionIndex){var He=be[Ve];if(He){var rt,tt,ot,ht,_t,dt=He.xref,bt=He.yref,St=L(Ce,dt,"x"),Et=L(Ce,bt,"y");if(He.type==="rect"){_t=[];var zt=oe(St,He.x0),Ut=oe(St,He.x1),Pt=oe(Et,He.y0),Ze=oe(Et,He.y1);_t=[[zt,Pt],[zt,Ze],[Ut,Ze],[Ut,Pt]],rt=Math.min(zt,Ut),tt=Math.max(zt,Ut),ot=Math.min(Pt,Ze),ht=Math.max(Pt,Ze),_t.xmin=rt,_t.xmax=tt,_t.ymin=ot,_t.ymax=ht,_t.xref=dt,_t.yref=bt,_t.subtract=!1,_t.isRect=!0,le.push(_t)}else if(He.type==="path")for(var Ye=He.path.split("Z"),Be=[],ke=0;ke<Ye.length;ke++){var Pe=Ye[ke];if(Pe){Pe+="Z";var qe=c.extractPathCoords(Pe,h.paramIsX,"raw"),Xe=c.extractPathCoords(Pe,h.paramIsY,"raw");rt=1/0,tt=-1/0,ot=1/0,ht=-1/0,_t=[];for(var nt=0;nt<qe.length;nt++){var ut=oe(St,qe[nt]),ct=oe(Et,Xe[nt]);_t.push([ut,ct]),rt=Math.min(ut,rt),tt=Math.max(ut,tt),ot=Math.min(ct,ot),ht=Math.max(ct,ht)}_t.xmin=rt,_t.xmax=tt,_t.ymin=ot,_t.ymax=ht,_t.xref=dt,_t.yref=bt,_t.subtract=Q(_t,Be),Be.push(_t),le.push(_t)}}}}return le}function Q(Ce,ze){for(var le=!1,de=0;de<ze.length;de++)for(var be=ze[de],Fe=0;Fe<Ce.length;Fe++)if(k(Ce[Fe],be)){le=!le;break}return le}function oe(Ce,ze){return Ce.type==="date"&&(ze=ze.replace("_"," ")),Ce.type==="log"?Ce.c2p(ze):Ce.r2p(ze,null,Ce.calendar)}function ce(Ce){for(var ze=Ce.length,le=[],de=0;de<ze;de++){var be=Ce[de];le=(le=le.concat(be)).concat([be[0]])}return(Fe=le).isRect=Fe.length===5&&Fe[0][0]===Fe[4][0]&&Fe[0][1]===Fe[4][1]&&Fe[0][0]===Fe[1][0]&&Fe[2][0]===Fe[3][0]&&Fe[0][1]===Fe[3][1]&&Fe[1][1]===Fe[2][1]||Fe[0][1]===Fe[1][1]&&Fe[2][1]===Fe[3][1]&&Fe[0][0]===Fe[3][0]&&Fe[1][0]===Fe[2][0],Fe.isRect&&(Fe.xmin=Math.min(Fe[0][0],Fe[2][0]),Fe.xmax=Math.max(Fe[0][0],Fe[2][0]),Fe.ymin=Math.min(Fe[0][1],Fe[2][1]),Fe.ymax=Math.max(Fe[0][1],Fe[2][1])),Fe;var Fe}function me(Ce){return function(ze,le){for(var de,be,Fe=0;Fe<Ce.length;Fe++){var Ve=Ce[Fe],He=Ve._id,rt=He.charAt(0);if(le.isRect){de||(de={});var tt=le[rt+"min"],ot=le[rt+"max"];tt!==void 0&&ot!==void 0&&(de[He]=[N(Ve,tt),N(Ve,ot)].sort(S))}else be||(be={}),be[He]=le.map(B(Ve))}de&&(ze.range=de),be&&(ze.lassoPoints=be)}}function Me(Ce,ze){ze&&(ze.selections=(Ce.layout||{}).selections||[]),Ce.emit("plotly_selected",ze)}function Re(Ce){Ce.emit("plotly_deselect",null)}$.exports={reselect:xe,prepSelect:function(Ce,ze,le,de,be){var Fe=!K(de),Ve=o(be),He=r(be),rt=a(be),tt=n(be),ot=i(be),ht=be==="drawcircle",_t=be==="drawline"||ht,dt=de.gd,bt=dt._fullLayout,St=ot&&bt.newselection.mode==="immediate"&&Fe,Et=bt._zoomlayer,zt=de.element.getBoundingClientRect(),Ut=de.plotinfo,Pt=j(Ut),Ze=ze-zt.left,Ye=le-zt.top;bt._calcInverseTransform(dt);var Be=u.apply3DTransform(bt._invTransform)(Ze,Ye);Ze=Be[0],Ye=Be[1];var ke,Pe,qe,Xe,nt,ut,ct,Ct=bt._invScaleX,Lt=bt._invScaleY,Mt=Ze,mt=Ye,kt="M"+Ze+","+Ye,wt=de.xaxes[0],Ot=de.yaxes[0],It=wt._length,Nt=Ot._length,Dt=Ce.altKey&&!(n(be)&&rt);X(Ce,dt,de),Ve&&(ke=z([[Ze,Ye]],I.BENDPX));var qt=Et.selectAll("path.select-outline-"+Ut.id).data([1]),Xt=tt?bt.newshape:bt.newselection,cn=tt&&!rt?Xt.fillcolor:"rgba(0,0,0,0)",yn=Xt.line.color||(Fe?x.contrast(dt._fullLayout.plot_bgcolor):"#7f7f7f");qt.enter().append("path").attr("class","select-outline select-outline-"+Ut.id).style({opacity:tt?Xt.opacity/2:1,"stroke-dasharray":T(Xt.line.dash,Xt.line.width),"stroke-width":Xt.line.width+"px","shape-rendering":"crispEdges"}).call(x.stroke,yn).call(x.fill,cn).attr("fill-rule","evenodd").classed("cursor-move",!!tt).attr("transform",Pt).attr("d",kt+"Z");var Kt=Et.append("path").attr("class","zoombox-corners").style({fill:x.background,stroke:x.defaultLine,"stroke-width":1}).attr("transform",Pt).attr("d","M0,0Z"),Mn=bt._uid+I.SELECTID,Un=[],xn=ie(dt,de.xaxes,de.yaxes,de.subplot);St&&!Ce.shiftKey&&(de._clearSubplotSelections=function(){if(Fe){var gn=wt._id,an=Ot._id;Ae(dt,gn,an,xn);for(var sn=(dt.layout||{}).selections||[],On=[],En=!1,Dn=0;Dn<sn.length;Dn++){var Zn=bt.selections[Dn];Zn.xref!==gn||Zn.yref!==an?On.push(sn[Dn]):En=!0}En&&(dt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",dt,{selections:On}))}});var dn=function(gn){return gn.plotinfo.fillRangeItems||me(gn.xaxes.concat(gn.yaxes))}(de);de.moveFn=function(gn,an){de._clearSubplotSelections&&(de._clearSubplotSelections(),de._clearSubplotSelections=void 0),Mt=Math.max(0,Math.min(It,Ct*gn+Ze)),mt=Math.max(0,Math.min(Nt,Lt*an+Ye));var sn=Math.abs(Mt-Ze),On=Math.abs(mt-Ye);if(He){var En,Dn,Zn;if(ot){var Fn=bt.selectdirection;switch(En=Fn==="any"?On<Math.min(.6*sn,U)?"h":sn<Math.min(.6*On,U)?"v":"d":Fn){case"h":Dn=ht?Nt/2:0,Zn=Nt;break;case"v":Dn=ht?It/2:0,Zn=It}}if(tt)switch(bt.newshape.drawdirection){case"vertical":En="h",Dn=ht?Nt/2:0,Zn=Nt;break;case"horizontal":En="v",Dn=ht?It/2:0,Zn=It;break;case"ortho":sn<On?(En="h",Dn=Ye,Zn=mt):(En="v",Dn=Ze,Zn=Mt);break;default:En="d"}En==="h"?((Xe=_t?g(ht,[Mt,Dn],[Mt,Zn]):[[Ze,Dn],[Ze,Zn],[Mt,Zn],[Mt,Dn]]).xmin=_t?Mt:Math.min(Ze,Mt),Xe.xmax=_t?Mt:Math.max(Ze,Mt),Xe.ymin=Math.min(Dn,Zn),Xe.ymax=Math.max(Dn,Zn),Kt.attr("d","M"+Xe.xmin+","+(Ye-U)+"h-4v"+2*U+"h4ZM"+(Xe.xmax-1)+","+(Ye-U)+"h4v"+2*U+"h-4Z")):En==="v"?((Xe=_t?g(ht,[Dn,mt],[Zn,mt]):[[Dn,Ye],[Dn,mt],[Zn,mt],[Zn,Ye]]).xmin=Math.min(Dn,Zn),Xe.xmax=Math.max(Dn,Zn),Xe.ymin=_t?mt:Math.min(Ye,mt),Xe.ymax=_t?mt:Math.max(Ye,mt),Kt.attr("d","M"+(Ze-U)+","+Xe.ymin+"v-4h"+2*U+"v4ZM"+(Ze-U)+","+(Xe.ymax-1)+"v4h"+2*U+"v-4Z")):En==="d"&&((Xe=_t?g(ht,[Ze,Ye],[Mt,mt]):[[Ze,Ye],[Ze,mt],[Mt,mt],[Mt,Ye]]).xmin=Math.min(Ze,Mt),Xe.xmax=Math.max(Ze,Mt),Xe.ymin=Math.min(Ye,mt),Xe.ymax=Math.max(Ye,mt),Kt.attr("d","M0,0Z"))}else Ve&&(ke.addPt([Mt,mt]),Xe=ke.filtered);if(de.selectionDefs&&de.selectionDefs.length?(qe=ge(de.mergedPolygons,Xe,Dt),Xe.subtract=Dt,Pe=J(de.selectionDefs.concat([Xe]))):(qe=[Xe],Pe=H(Xe)),f(ve(qe,rt),qt,de),ot){var nr,$n=xe(dt,!1),mr=$n.eventData?$n.eventData.points.slice():[];$n=xe(dt,!1,Pe,xn,de),Pe=$n.selectionTesters,ct=$n.eventData,nr=ke?ke.filtered:ce(qe),E.throttle(Mn,I.SELECTDELAY,function(){for(var dr=(Un=Ie(Pe,xn)).slice(),Yn=0;Yn<mr.length;Yn++){for(var Vn=mr[Yn],ur=!1,Gt=0;Gt<dr.length;Gt++)if(dr[Gt].curveNumber===Vn.curveNumber&&dr[Gt].pointNumber===Vn.pointNumber){ur=!0;break}ur||dr.push(Vn)}dr.length&&(ct||(ct={}),ct.points=dr),dn(ct,nr),function(tn,In){tn.emit("plotly_selecting",In)}(dt,ct)})}},de.clickFn=function(gn,an){if(Kt.remove(),dt._fullLayout._activeShapeIndex>=0)dt._fullLayout._deactivateShape(dt);else if(!tt){var sn=bt.clickmode;E.done(Mn).then(function(){if(E.clear(Mn),gn===2){for(qt.remove(),nt=0;nt<xn.length;nt++)(ut=xn[nt])._module.selectPoints(ut,!1);if(ye(dt,xn),ee(de),Re(dt),xn.length){var On=xn[0].xaxis,En=xn[0].yaxis;if(On&&En){for(var Dn=[],Zn=dt._fullLayout.selections,Fn=0;Fn<Zn.length;Fn++){var nr=Zn[Fn];nr&&(nr.xref===On._id&&nr.yref===En._id||Dn.push(nr))}Dn.length<Zn.length&&(dt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",dt,{selections:Dn}))}}}else sn.indexOf("select")>-1&&G(an,dt,de.xaxes,de.yaxes,de.subplot,de,qt),sn==="event"&&Me(dt,void 0);d.click(dt,an)}).catch(u.error)}},de.doneFn=function(){Kt.remove(),E.done(Mn).then(function(){E.clear(Mn),!St&&Xe&&de.selectionDefs&&(Xe.subtract=Dt,de.selectionDefs.push(Xe),de.mergedPolygons.length=0,[].push.apply(de.mergedPolygons,qe)),(St||tt)&&ee(de,St),de.doneFnCompleted&&de.doneFnCompleted(Un),ot&&Me(dt,ct)}).catch(u.error)}},clearOutline:b,clearSelectionsCache:ee,selectOnClick:G}},89827:function($,R,e){var A=e(50215),k=e(82196).line,l=e(79952).P,T=e(1426).extendFlat,x=e(44467).templatedArray;e(24695),$.exports=x("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},A.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},A.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},k.color,{editType:"arraydraw"}),width:T({},k.width,{editType:"calc+arraydraw"}),dash:T({},l,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},5627:function($,R,e){var A=e(71828),k=e(89298),l=e(21459),T=e(30477);function x(o){return s(o.line.width,o.xsizemode,o.x0,o.x1,o.path,!1)}function d(o){return s(o.line.width,o.ysizemode,o.y0,o.y1,o.path,!0)}function s(o,r,n,a,i,c){var h=o/2,f=c;if(r==="pixel"){var b=i?T.extractPathCoords(i,c?l.paramIsY:l.paramIsX):[n,a],v=A.aggNums(Math.max,null,b),g=A.aggNums(Math.min,null,b),y=g<0?Math.abs(g)+h:h,p=v>0?v+h:h;return{ppad:h,ppadplus:f?y:p,ppadminus:f?p:y}}return{ppad:h}}function t(o,r,n,a,i){var c=o.type==="category"||o.type==="multicategory"?o.r2c:o.d2c;if(r!==void 0)return[c(r),c(n)];if(a){var h,f,b,v,g=1/0,y=-1/0,p=a.match(l.segmentRE);for(o.type==="date"&&(c=T.decodeDate(c)),h=0;h<p.length;h++)(f=i[p[h].charAt(0)].drawn)!==void 0&&(!(b=p[h].substr(1).match(l.paramRE))||b.length<f||((v=c(b[f]))<g&&(g=v),v>y&&(y=v)));return y>=g?[g,y]:void 0}}$.exports=function(o){var r=o._fullLayout,n=A.filterVisible(r.shapes);if(n.length&&o._fullData.length)for(var a=0;a<n.length;a++){var i,c,h=n[a];h._extremes={};var f=k.getRefType(h.xref),b=k.getRefType(h.yref);if(h.xref!=="paper"&&f!=="domain"){var v=h.xsizemode==="pixel"?h.xanchor:h.x0,g=h.xsizemode==="pixel"?h.xanchor:h.x1;(c=t(i=k.getFromId(o,h.xref),v,g,h.path,l.paramIsX))&&(h._extremes[i._id]=k.findExtremes(i,c,x(h)))}if(h.yref!=="paper"&&b!=="domain"){var y=h.ysizemode==="pixel"?h.yanchor:h.y0,p=h.ysizemode==="pixel"?h.yanchor:h.y1;(c=t(i=k.getFromId(o,h.yref),y,p,h.path,l.paramIsY))&&(h._extremes[i._id]=k.findExtremes(i,c,d(h)))}}}},21459:function($){$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function($,R,e){var A=e(71828),k=e(89298),l=e(85501),T=e(89827),x=e(30477);function d(s,t,o){function r(P,I){return A.coerce(s,t,T,P,I)}if(r("visible")){var n=r("path"),a=r("type",n?"path":"rect")!=="path";a&&delete t.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var i=r("xsizemode"),c=r("ysizemode"),h=["x","y"],f=0;f<2;f++){var b,v,g,y=h[f],p=y+"anchor",m=y==="x"?i:c,w={_fullLayout:o},u=k.coerceRef(s,t,w,y,void 0,"paper");if(k.getRefType(u)==="range"?((b=k.getFromId(w,u))._shapeIndices.push(t._index),g=x.rangeToShapePosition(b),v=x.shapePositionToRange(b)):v=g=A.identity,a){var S=y+"0",_=y+"1",E=s[S],L=s[_];s[S]=v(s[S],!0),s[_]=v(s[_],!0),m==="pixel"?(r(S,0),r(_,10)):(k.coercePosition(t,w,r,u,S,.25),k.coercePosition(t,w,r,u,_,.75)),t[S]=g(t[S]),t[_]=g(t[_]),s[S]=E,s[_]=L}if(m==="pixel"){var C=s[p];s[p]=v(s[p],!0),k.coercePosition(t,w,r,u,p,.25),t[p]=g(t[p]),s[p]=C}}a&&A.noneOrAll(s,t,["x0","x1","y0","y1"])}}$.exports=function(s,t){l(s,t,{name:"shapes",handleItemDefaults:d})}},42359:function($,R,e){var A=e(71828).strTranslate,k=e(28569),l=e(64505),T=l.drawMode,x=l.selectMode,d=e(73972),s=e(7901),t=e(89995),o=t.i000,r=t.i090,n=t.i180,a=t.i270,i=e(51873).clearOutlineControllers,c=e(60165),h=c.pointsOnRectangle,f=c.pointsOnEllipse,b=c.writePaths,v=e(90551),g=e(35855);function y(p,m){var w,u,S,_=p[m][1],E=p[m][2],L=p.length;return u=p[w=(m+1)%L][1],S=p[w][2],u===_&&S===E&&(u=p[w=(m+2)%L][1],S=p[w][2]),[w,u,S]}$.exports=function p(m,w,u,S){S||(S=0);var _=u.gd;function E(){p(m,w,u,S++),f(m[0])&&L({redrawing:!0})}function L(re){var ie={};u.isActiveShape!==void 0&&(u.isActiveShape=!1,ie=v(w,u)),u.isActiveSelection!==void 0&&(u.isActiveSelection=!1,ie=g(w,u),_._fullLayout._reselect=!0),Object.keys(ie).length&&d.call((re||{}).redrawing?"relayout":"_guiRelayout",_,ie)}var C,P,I,U,z,H=_._fullLayout._zoomlayer,F=u.dragmode,N=T(F),B=x(F);function j(re){I=+re.srcElement.getAttribute("data-i"),U=+re.srcElement.getAttribute("data-j"),C[I][U].moveFn=K}function K(re,ie){if(m.length){var se=z[I][U][1],fe=z[I][U][2],ye=m[I],ge=ye.length;if(h(ye)){var he=re,ve=ie;u.isActiveSelection&&(y(ye,U)[1]===ye[U][1]?ve=0:he=0);for(var Ie=0;Ie<ge;Ie++)if(Ie!==U){var xe=ye[Ie];xe[1]===ye[U][1]&&(xe[1]=se+he),xe[2]===ye[U][2]&&(xe[2]=fe+ve)}if(ye[U][1]=se+he,ye[U][2]=fe+ve,!h(ye))for(var Ae=0;Ae<ge;Ae++)for(var Se=0;Se<ye[Ae].length;Se++)ye[Ae][Se]=z[I][Ae][Se]}else ye[U][1]=se+re,ye[U][2]=fe+ie;E()}}function G(){L()}function V(re,ie){if(re===2){I=+ie.srcElement.getAttribute("data-i"),U=+ie.srcElement.getAttribute("data-j");var se=m[I];h(se)||f(se)||function(){if(m.length&&m[I]&&m[I].length){for(var fe=[],ye=0;ye<m[I].length;ye++)ye!==U&&fe.push(m[I][ye]);fe.length>1&&(fe.length!==2||fe[1][0]!=="Z")&&(U===0&&(fe[0][0]="M"),m[I]=fe,E(),L())}}()}}function W(re,ie){(function(se,fe){if(m.length)for(var ye=0;ye<m.length;ye++)for(var ge=0;ge<m[ye].length;ge++)for(var he=0;he+2<m[ye][ge].length;he+=2)m[ye][ge][he+1]=z[ye][ge][he+1]+se,m[ye][ge][he+2]=z[ye][ge][he+2]+fe})(re,ie),E()}function J(re){(I=+re.srcElement.getAttribute("data-i"))||(I=0),P[I].moveFn=W}function X(){L()}function ee(re){re===2&&function(ie){if(x(ie._fullLayout.dragmode)){i(ie);var se=ie._fullLayout._activeSelectionIndex,fe=(ie.layout||{}).selections||[];if(se<fe.length){for(var ye=[],ge=0;ge<fe.length;ge++)ge!==se&&ye.push(fe[ge]);delete ie._fullLayout._activeSelectionIndex;var he=ie._fullLayout.selections[se];ie._fullLayout._deselect={xref:he.xref,yref:he.yref},d.call("_guiRelayout",ie,{selections:ye})}}}(_)}(N||B)&&(_._fullLayout._outlining=!0),i(_),w.attr("d",b(m)),S||!u.isActiveShape&&!u.isActiveSelection||(z=function(re,ie){for(var se=0;se<ie.length;se++){var fe=ie[se];re[se]=[];for(var ye=0;ye<fe.length;ye++){re[se][ye]=[];for(var ge=0;ge<fe[ye].length;ge++)re[se][ye][ge]=fe[ye][ge]}}return re}([],m),function(re){C=[];for(var ie=0;ie<m.length;ie++){var se=m[ie],fe=h(se),ye=!fe&&f(se);C[ie]=[];for(var ge=se.length,he=0;he<ge;he++)if(se[he][0]!=="Z"&&(!ye||he===o||he===r||he===n||he===a)){var ve,Ie=fe&&u.isActiveSelection;Ie&&(ve=y(se,he));var xe=se[he][1],Ae=se[he][2],Se=re.append(Ie?"rect":"circle").attr("data-i",ie).attr("data-j",he).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Ie){var Te=ve[1]-xe,Q=ve[2]-Ae,oe=Q?5:Math.max(Math.min(25,Math.abs(Te)-5),5),ce=Te?5:Math.max(Math.min(25,Math.abs(Q)-5),5);Se.classed(Q?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",oe).attr("height",ce).attr("x",xe-oe/2).attr("y",Ae-ce/2).attr("transform",A(Te/2,Q/2))}else Se.classed("cursor-grab",!0).attr("r",5).attr("cx",xe).attr("cy",Ae);C[ie][he]={element:Se.node(),gd:_,prepFn:j,doneFn:G,clickFn:V},k.init(C[ie][he])}}}(H.append("g").attr("class","outline-controllers")),function(){P=[],m.length&&(P[0]={element:w[0][0],gd:_,prepFn:J,doneFn:X,clickFn:ee},k.init(P[0]))}())}},34031:function($,R,e){var A=e(73972),k=e(71828),l=e(89298),T=e(60165).readPaths,x=e(42359),d=e(51873).clearOutlineControllers,s=e(7901),t=e(91424),o=e(44467).arrayEditor,r=e(28569),n=e(6964),a=e(21459),i=e(30477),c=i.getPathString;function h(m){var w=m._fullLayout;for(var u in w._shapeUpperLayer.selectAll("path").remove(),w._shapeLowerLayer.selectAll("path").remove(),w._plots){var S=w._plots[u].shapelayer;S&&S.selectAll("path").remove()}for(var _=0;_<w.shapes.length;_++)w.shapes[_].visible&&v(m,_)}function f(m){return!!m._fullLayout._outlining}function b(m){return!m._context.edits.shapePosition}function v(m,w){m._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+w+'"]').remove();var u=i.makeShapesOptionsAndPlotinfo(m,w),S=u.options,_=u.plotinfo;function E(L){var C=c(m,S),P={"data-index":w,"fill-rule":S.fillrule,d:C},I=S.opacity,U=S.fillcolor,z=S.line.width?S.line.color:"rgba(0,0,0,0)",H=S.line.width,F=S.line.dash;H||S.editable!==!0||(H=5,F="solid");var N=C[C.length-1]!=="Z",B=b(m)&&S.editable&&m._fullLayout._activeShapeIndex===w;B&&(U=N?"rgba(0,0,0,0)":m._fullLayout.activeshape.fillcolor,I=m._fullLayout.activeshape.opacity);var j,K=L.append("path").attr(P).style("opacity",I).call(s.stroke,z).call(s.fill,U).call(t.dashLine,F,H);if(g(K,m,S),(B||m._context.edits.shapePosition)&&(j=o(m.layout,"shapes",S)),B){K.style({cursor:"move"});var G={element:K.node(),plotinfo:_,gd:m,editHelpers:j,isActiveShape:!0},V=T(C,m);x(V,K,G)}else m._context.edits.shapePosition?function(W,J,X,ee,re,ie){var se,fe,ye,ge,he,ve,Ie,xe,Ae,Se,Te,Q,oe,ce,me,Me,Re=X.xsizemode==="pixel",Ce=X.ysizemode==="pixel",ze=X.type==="line",le=X.type==="path",de=ie.modifyItem,be=l.getFromId(W,X.xref),Fe=l.getRefType(X.xref),Ve=l.getFromId(W,X.yref),He=l.getRefType(X.yref),rt=i.getDataToPixel(W,be,!1,Fe),tt=i.getDataToPixel(W,Ve,!0,He),ot=i.getPixelToData(W,be,!1,Fe),ht=i.getPixelToData(W,Ve,!0,He),_t=ze?function(){var Pt=10,Ze=Math.max(X.line.width,Pt),Ye=re.append("g").attr("data-index",ee);Ye.append("path").attr("d",J.attr("d")).style({cursor:"move","stroke-width":Ze,"stroke-opacity":"0"});var Be={"fill-opacity":"0"},ke=Math.max(Ze/2,Pt);return Ye.append("circle").attr({"data-line-point":"start-point",cx:Re?rt(X.xanchor)+X.x0:rt(X.x0),cy:Ce?tt(X.yanchor)-X.y0:tt(X.y0),r:ke}).style(Be).classed("cursor-grab",!0),Ye.append("circle").attr({"data-line-point":"end-point",cx:Re?rt(X.xanchor)+X.x1:rt(X.x1),cy:Ce?tt(X.yanchor)-X.y1:tt(X.y1),r:ke}).style(Be).classed("cursor-grab",!0),Ye}():J,dt={element:_t.node(),gd:W,prepFn:function(Pt){f(W)||(Re&&(he=rt(X.xanchor)),Ce&&(ve=tt(X.yanchor)),X.type==="path"?me=X.path:(se=Re?X.x0:rt(X.x0),fe=Ce?X.y0:tt(X.y0),ye=Re?X.x1:rt(X.x1),ge=Ce?X.y1:tt(X.y1)),se<ye?(Ae=se,oe="x0",Se=ye,ce="x1"):(Ae=ye,oe="x1",Se=se,ce="x0"),!Ce&&fe<ge||Ce&&fe>ge?(Ie=fe,Te="y0",xe=ge,Q="y1"):(Ie=ge,Te="y1",xe=fe,Q="y0"),bt(Pt),zt(re,X),function(Ze,Ye,Be){var ke=Ye.xref,Pe=Ye.yref,qe=l.getFromId(Be,ke),Xe=l.getFromId(Be,Pe),nt="";ke==="paper"||qe.autorange||(nt+=ke),Pe==="paper"||Xe.autorange||(nt+=Pe),t.setClipUrl(Ze,nt?"clip"+Be._fullLayout._uid+nt:null,Be)}(J,X,W),dt.moveFn=Me==="move"?St:Et,dt.altKey=Pt.altKey)},doneFn:function(){f(W)||(n(J),Ut(re),g(J,W,X),A.call("_guiRelayout",W,ie.getUpdateObj()))},clickFn:function(){f(W)||Ut(re)}};function bt(Pt){if(f(W))Me=null;else if(ze)Me=Pt.target.tagName==="path"?"move":Pt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Ze=dt.element.getBoundingClientRect(),Ye=Ze.right-Ze.left,Be=Ze.bottom-Ze.top,ke=Pt.clientX-Ze.left,Pe=Pt.clientY-Ze.top,qe=!le&&Ye>10&&Be>10&&!Pt.shiftKey?r.getCursor(ke/Ye,1-Pe/Be):"move";n(J,qe),Me=qe.split("-")[0]}}function St(Pt,Ze){if(X.type==="path"){var Ye=function(Pe){return Pe},Be=Ye,ke=Ye;Re?de("xanchor",X.xanchor=ot(he+Pt)):(Be=function(Pe){return ot(rt(Pe)+Pt)},be&&be.type==="date"&&(Be=i.encodeDate(Be))),Ce?de("yanchor",X.yanchor=ht(ve+Ze)):(ke=function(Pe){return ht(tt(Pe)+Ze)},Ve&&Ve.type==="date"&&(ke=i.encodeDate(ke))),de("path",X.path=y(me,Be,ke))}else Re?de("xanchor",X.xanchor=ot(he+Pt)):(de("x0",X.x0=ot(se+Pt)),de("x1",X.x1=ot(ye+Pt))),Ce?de("yanchor",X.yanchor=ht(ve+Ze)):(de("y0",X.y0=ht(fe+Ze)),de("y1",X.y1=ht(ge+Ze)));J.attr("d",c(W,X)),zt(re,X)}function Et(Pt,Ze){if(le){var Ye=function(It){return It},Be=Ye,ke=Ye;Re?de("xanchor",X.xanchor=ot(he+Pt)):(Be=function(It){return ot(rt(It)+Pt)},be&&be.type==="date"&&(Be=i.encodeDate(Be))),Ce?de("yanchor",X.yanchor=ht(ve+Ze)):(ke=function(It){return ht(tt(It)+Ze)},Ve&&Ve.type==="date"&&(ke=i.encodeDate(ke))),de("path",X.path=y(me,Be,ke))}else if(ze){if(Me==="resize-over-start-point"){var Pe=se+Pt,qe=Ce?fe-Ze:fe+Ze;de("x0",X.x0=Re?Pe:ot(Pe)),de("y0",X.y0=Ce?qe:ht(qe))}else if(Me==="resize-over-end-point"){var Xe=ye+Pt,nt=Ce?ge-Ze:ge+Ze;de("x1",X.x1=Re?Xe:ot(Xe)),de("y1",X.y1=Ce?nt:ht(nt))}}else{var ut=function(It){return Me.indexOf(It)!==-1},ct=ut("n"),Ct=ut("s"),Lt=ut("w"),Mt=ut("e"),mt=ct?Ie+Ze:Ie,kt=Ct?xe+Ze:xe,wt=Lt?Ae+Pt:Ae,Ot=Mt?Se+Pt:Se;Ce&&(ct&&(mt=Ie-Ze),Ct&&(kt=xe-Ze)),(!Ce&&kt-mt>10||Ce&&mt-kt>10)&&(de(Te,X[Te]=Ce?mt:ht(mt)),de(Q,X[Q]=Ce?kt:ht(kt))),Ot-wt>10&&(de(oe,X[oe]=Re?wt:ot(wt)),de(ce,X[ce]=Re?Ot:ot(Ot)))}J.attr("d",c(W,X)),zt(re,X)}function zt(Pt,Ze){(Re||Ce)&&function(){var Ye=Ze.type!=="path",Be=Pt.selectAll(".visual-cue").data([0]);Be.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var ke=rt(Re?Ze.xanchor:k.midRange(Ye?[Ze.x0,Ze.x1]:i.extractPathCoords(Ze.path,a.paramIsX))),Pe=tt(Ce?Ze.yanchor:k.midRange(Ye?[Ze.y0,Ze.y1]:i.extractPathCoords(Ze.path,a.paramIsY)));if(ke=i.roundPositionForSharpStrokeRendering(ke,1),Pe=i.roundPositionForSharpStrokeRendering(Pe,1),Re&&Ce){var qe="M"+(ke-1-1)+","+(Pe-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Be.attr("d",qe)}else if(Re){var Xe="M"+(ke-1-1)+","+(Pe-9-1)+"v18 h2 v-18 Z";Be.attr("d",Xe)}else{var nt="M"+(ke-9-1)+","+(Pe-1-1)+"h18 v2 h-18 Z";Be.attr("d",nt)}}()}function Ut(Pt){Pt.selectAll(".visual-cue").remove()}r.init(dt),_t.node().onmousemove=bt}(m,K,S,w,L,j):S.editable===!0&&K.style("pointer-events",N||s.opacity(U)*I<=.5?"stroke":"all");K.node().addEventListener("click",function(){return function(W,J){if(b(W)){var X=+J.node().getAttribute("data-index");if(X>=0){if(X===W._fullLayout._activeShapeIndex)return void p(W);W._fullLayout._activeShapeIndex=X,W._fullLayout._deactivateShape=p,h(W)}}}(m,K)})}S._input&&S.visible!==!1&&(S.layer!=="below"?E(m._fullLayout._shapeUpperLayer):S.xref==="paper"||S.yref==="paper"?E(m._fullLayout._shapeLowerLayer):_._hadPlotinfo?E((_.mainplotinfo||_).shapelayer):E(m._fullLayout._shapeLowerLayer))}function g(m,w,u){var S=(u.xref+u.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");t.setClipUrl(m,S?"clip"+w._fullLayout._uid+S:null,w)}function y(m,w,u){return m.replace(a.segmentRE,function(S){var _=0,E=S.charAt(0),L=a.paramIsX[E],C=a.paramIsY[E],P=a.numParams[E];return E+S.substr(1).replace(a.paramRE,function(I){return _>=P||(L[_]?I=w(I):C[_]&&(I=u(I)),_++),I})})}function p(m){b(m)&&m._fullLayout._activeShapeIndex>=0&&(d(m),delete m._fullLayout._activeShapeIndex,h(m))}$.exports={draw:h,drawOne:v,eraseActiveShape:function(m){if(b(m)){d(m);var w=m._fullLayout._activeShapeIndex,u=(m.layout||{}).shapes||[];if(w<u.length){for(var S=[],_=0;_<u.length;_++)_!==w&&S.push(u[_]);delete m._fullLayout._activeShapeIndex,A.call("_guiRelayout",m,{shapes:S})}}}}},29241:function($,R,e){var A=e(79952).P,k=e(1426).extendFlat;$.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:k({},A,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},89995:function($){$.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function($,R,e){var A=e(7901);$.exports=function(k,l,T){if(T("newshape.drawdirection"),T("newshape.layer"),T("newshape.fillcolor"),T("newshape.fillrule"),T("newshape.opacity"),T("newshape.line.width")){var x=(k||{}).plot_bgcolor||"#FFF";T("newshape.line.color",A.contrast(x)),T("newshape.line.dash")}T("activeshape.fillcolor"),T("activeshape.opacity")}},60165:function($,R,e){var A=e(95616),k=e(89995),l=k.CIRCLE_SIDES,T=k.SQRT2,x=e(75549),d=x.p2r,s=x.r2p,t=[0,3,4,5,6,1,2],o=[0,3,4,1,2];function r(a,i){return Math.abs(a-i)<=1e-6}function n(a,i){var c=i[1]-a[1],h=i[2]-a[2];return Math.sqrt(c*c+h*h)}R.writePaths=function(a){var i=a.length;if(!i)return"M0,0Z";for(var c="",h=0;h<i;h++)for(var f=a[h].length,b=0;b<f;b++){var v=a[h][b][0];if(v==="Z")c+="Z";else for(var g=a[h][b].length,y=0;y<g;y++){var p=y;v==="Q"||v==="S"?p=o[y]:v==="C"&&(p=t[y]),c+=a[h][b][p],y>0&&y<g-1&&(c+=",")}}return c},R.readPaths=function(a,i,c,h){var f,b,v,g=A(a),y=[],p=-1,m=0,w=0,u=function(){b=m,v=w};u();for(var S=0;S<g.length;S++){var _,E,L,C,P=[],I=g[S][0],U=I;switch(I){case"M":y[++p]=[],m=+g[S][1],w=+g[S][2],P.push([U,m,w]),u();break;case"Q":case"S":_=+g[S][1],L=+g[S][2],m=+g[S][3],w=+g[S][4],P.push([U,m,w,_,L]);break;case"C":_=+g[S][1],L=+g[S][2],E=+g[S][3],C=+g[S][4],m=+g[S][5],w=+g[S][6],P.push([U,m,w,_,L,E,C]);break;case"T":case"L":m=+g[S][1],w=+g[S][2],P.push([U,m,w]);break;case"H":U="L",m=+g[S][1],P.push([U,m,w]);break;case"V":U="L",w=+g[S][1],P.push([U,m,w]);break;case"A":U="L";var z=+g[S][1],H=+g[S][2];+g[S][4]||(z=-z,H=-H);var F=m-z,N=w;for(f=1;f<=l/2;f++){var B=2*Math.PI*f/l;P.push([U,F+z*Math.cos(B),N+H*Math.sin(B)])}break;case"Z":m===b&&w===v||(m=b,w=v,P.push([U,m,w]))}for(var j=(c||{}).domain,K=i._fullLayout._size,G=c&&c.xsizemode==="pixel",V=c&&c.ysizemode==="pixel",W=h===!1,J=0;J<P.length;J++){for(f=0;f+2<7;f+=2){var X=P[J][f+1],ee=P[J][f+2];X!==void 0&&ee!==void 0&&(m=X,w=ee,c&&(c.xaxis&&c.xaxis.p2r?(W&&(X-=c.xaxis._offset),X=G?s(c.xaxis,c.xanchor)+X:d(c.xaxis,X)):(W&&(X-=K.l),j?X=j.x[0]+X/K.w:X/=K.w),c.yaxis&&c.yaxis.p2r?(W&&(ee-=c.yaxis._offset),ee=V?s(c.yaxis,c.yanchor)-ee:d(c.yaxis,ee)):(W&&(ee-=K.t),ee=j?j.y[1]-ee/K.h:1-ee/K.h)),P[J][f+1]=X,P[J][f+2]=ee)}y[p].push(P[J].slice())}}return y},R.pointsOnRectangle=function(a){if(a.length!==5)return!1;for(var i=1;i<3;i++)if(!r(a[0][i]-a[1][i],a[3][i]-a[2][i])||!r(a[0][i]-a[3][i],a[1][i]-a[2][i]))return!1;return!(!r(a[0][1],a[1][1])&&!r(a[0][1],a[3][1])||!(n(a[0],a[1])*n(a[0],a[3])))},R.pointsOnEllipse=function(a){var i=a.length;if(i!==l+1)return!1;i=l;for(var c=0;c<i;c++){var h=(2*i-c)%i,f=(i/2+h)%i,b=(i/2+c)%i;if(!r(n(a[c],a[b]),n(a[h],a[f])))return!1}return!0},R.handleEllipse=function(a,i,c){if(!a)return[i,c];var h=R.ellipseOver({x0:i[0],y0:i[1],x1:c[0],y1:c[1]}),f=(h.x1+h.x0)/2,b=(h.y1+h.y0)/2,v=(h.x1-h.x0)/2,g=(h.y1-h.y0)/2;v||(v=g/=T),g||(g=v/=T);for(var y=[],p=0;p<l;p++){var m=2*p*Math.PI/l;y.push([f+v*Math.cos(m),b+g*Math.sin(m)])}return y},R.ellipseOver=function(a){var i=a.x0,c=a.y0,h=a.x1,f=a.y1,b=h-i,v=f-c,g=((i-=b)+h)/2,y=((c-=v)+f)/2;return{x0:g-(b*=T),y0:y-(v*=T),x1:g+b,y1:y+v}},R.fixDatesForPaths=function(a,i,c){var h=i.type==="date",f=c.type==="date";if(!h&&!f)return a;for(var b=0;b<a.length;b++)for(var v=0;v<a[b].length;v++)for(var g=0;g+2<a[b][v].length;g+=2)h&&(a[b][v][g+1]=a[b][v][g+1].replace(" ","_")),f&&(a[b][v][g+2]=a[b][v][g+2].replace(" ","_"));return a}},90551:function($,R,e){var A=e(64505),k=A.drawMode,l=A.openMode,T=e(89995),x=T.i000,d=T.i090,s=T.i180,t=T.i270,o=T.cos45,r=T.sin45,n=e(75549),a=n.p2r,i=n.r2p,c=e(51873).clearOutline,h=e(60165),f=h.readPaths,b=h.writePaths,v=h.ellipseOver,g=h.fixDatesForPaths;$.exports=function(y,p){if(y.length){var m=y[0][0];if(m){var w=m.getAttribute("d"),u=p.gd,S=u._fullLayout.newshape,_=p.plotinfo,E=_.xaxis,L=_.yaxis,C=!!_.domain||!_.xaxis,P=!!_.domain||!_.yaxis,I=p.isActiveShape,U=p.dragmode,z=(u.layout||{}).shapes||[];if(!k(U)&&I!==void 0){var H=u._fullLayout._activeShapeIndex;if(H<z.length)switch(u._fullLayout.shapes[H].type){case"rect":U="drawrect";break;case"circle":U="drawcircle";break;case"line":U="drawline";break;case"path":var F=z[H].path||"";U=F[F.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var N,B=l(U),j=f(w,u,_,I),K={editable:!0,xref:C?"paper":E._id,yref:P?"paper":L._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};if(B||(K.fillcolor=S.fillcolor,K.fillrule=S.fillrule),j.length===1&&(N=j[0]),N&&N.length===5&&U==="drawrect")K.type="rect",K.x0=N[0][1],K.y0=N[0][2],K.x1=N[2][1],K.y1=N[2][2];else if(N&&U==="drawline")K.type="line",K.x0=N[0][1],K.y0=N[0][2],K.x1=N[1][1],K.y1=N[1][2];else if(N&&U==="drawcircle"){K.type="circle";var G=N[x][1],V=N[d][1],W=N[s][1],J=N[t][1],X=N[x][2],ee=N[d][2],re=N[s][2],ie=N[t][2],se=_.xaxis&&(_.xaxis.type==="date"||_.xaxis.type==="log"),fe=_.yaxis&&(_.yaxis.type==="date"||_.yaxis.type==="log");se&&(G=i(_.xaxis,G),V=i(_.xaxis,V),W=i(_.xaxis,W),J=i(_.xaxis,J)),fe&&(X=i(_.yaxis,X),ee=i(_.yaxis,ee),re=i(_.yaxis,re),ie=i(_.yaxis,ie));var ye=(V+J)/2,ge=(X+re)/2,he=v({x0:ye,y0:ge,x1:ye+(J-V+W-G)/2*o,y1:ge+(ie-ee+re-X)/2*r});se&&(he.x0=a(_.xaxis,he.x0),he.x1=a(_.xaxis,he.x1)),fe&&(he.y0=a(_.yaxis,he.y0),he.y1=a(_.yaxis,he.y1)),K.x0=he.x0,K.y0=he.y0,K.x1=he.x1,K.y1=he.y1}else K.type="path",E&&L&&g(j,E,L),K.path=b(j),N=null;c(u);for(var ve=p.editHelpers,Ie=(ve||{}).modifyItem,xe=[],Ae=0;Ae<z.length;Ae++){var Se=u._fullLayout.shapes[Ae];if(xe[Ae]=Se._input,I!==void 0&&Ae===u._fullLayout._activeShapeIndex){var Te=K;switch(Se.type){case"line":case"rect":case"circle":Ie("x0",Te.x0),Ie("x1",Te.x1),Ie("y0",Te.y0),Ie("y1",Te.y1);break;case"path":Ie("path",Te.path)}}}return I===void 0?(xe.push(K),xe):ve?ve.getUpdateObj():{}}}}},51873:function($){$.exports={clearOutlineControllers:function(R){var e=R._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(R){var e=R._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),R._fullLayout._outlining=!1}}},30477:function($,R,e){var A=e(21459),k=e(71828),l=e(89298);R.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(x){return x}},R.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(x){return x}},R.decodeDate=function(T){return function(x){return x.replace&&(x=x.replace("_"," ")),T(x)}},R.encodeDate=function(T){return function(x){return T(x).replace(" ","_")}},R.extractPathCoords=function(T,x,d){var s=[];return T.match(A.segmentRE).forEach(function(t){var o=x[t.charAt(0)].drawn;if(o!==void 0){var r=t.substr(1).match(A.paramRE);if(r&&!(r.length<o)){var n=r[o],a=d?n:k.cleanNumber(n);s.push(a)}}}),s},R.getDataToPixel=function(T,x,d,s){var t,o=T._fullLayout._size;if(x)if(s==="domain")t=function(n){return x._length*(d?1-n:n)+x._offset};else{var r=R.shapePositionToRange(x);t=function(n){return x._offset+x.r2p(r(n,!0))},x.type==="date"&&(t=R.decodeDate(t))}else t=d?function(n){return o.t+o.h*(1-n)}:function(n){return o.l+o.w*n};return t},R.getPixelToData=function(T,x,d,s){var t,o=T._fullLayout._size;if(x)if(s==="domain")t=function(n){var a=(n-x._offset)/x._length;return d?1-a:a};else{var r=R.rangeToShapePosition(x);t=function(n){return r(x.p2r(n-x._offset))}}else t=d?function(n){return 1-(n-o.t)/o.h}:function(n){return(n-o.l)/o.w};return t},R.roundPositionForSharpStrokeRendering=function(T,x){var d=Math.round(x%2)===1,s=Math.round(T);return d?s+.5:s},R.makeShapesOptionsAndPlotinfo=function(T,x){var d=T._fullLayout.shapes[x]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&d.xref!=="paper"&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&d.yref!=="paper"&&(s.yaxis=T._fullLayout[d.yref+"axis"])),s.xsizemode=d.xsizemode,s.ysizemode=d.ysizemode,s.xanchor=d.xanchor,s.yanchor=d.yanchor,{options:d,plotinfo:s}},R.makeSelectionsOptionsAndPlotinfo=function(T,x){var d=T._fullLayout.selections[x]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&(s.yaxis=T._fullLayout[d.yref+"axis"])),{options:d,plotinfo:s}},R.getPathString=function(T,x){var d,s,t,o,r,n,a,i,c=x.type,h=l.getRefType(x.xref),f=l.getRefType(x.yref),b=l.getFromId(T,x.xref),v=l.getFromId(T,x.yref),g=T._fullLayout._size;if(b?h==="domain"?s=function(L){return b._offset+b._length*L}:(d=R.shapePositionToRange(b),s=function(L){return b._offset+b.r2p(d(L,!0))}):s=function(L){return g.l+g.w*L},v?f==="domain"?o=function(L){return v._offset+v._length*(1-L)}:(t=R.shapePositionToRange(v),o=function(L){return v._offset+v.r2p(t(L,!0))}):o=function(L){return g.t+g.h*(1-L)},c==="path")return b&&b.type==="date"&&(s=R.decodeDate(s)),v&&v.type==="date"&&(o=R.decodeDate(o)),function(L,C,P){var I=L.path,U=L.xsizemode,z=L.ysizemode,H=L.xanchor,F=L.yanchor;return I.replace(A.segmentRE,function(N){var B=0,j=N.charAt(0),K=A.paramIsX[j],G=A.paramIsY[j],V=A.numParams[j],W=N.substr(1).replace(A.paramRE,function(J){return K[B]?J=U==="pixel"?C(H)+Number(J):C(J):G[B]&&(J=z==="pixel"?P(F)-Number(J):P(J)),++B>V&&(J="X"),J});return B>V&&(W=W.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+N)),j+W})}(x,s,o);if(x.xsizemode==="pixel"){var y=s(x.xanchor);r=y+x.x0,n=y+x.x1}else r=s(x.x0),n=s(x.x1);if(x.ysizemode==="pixel"){var p=o(x.yanchor);a=p-x.y0,i=p-x.y1}else a=o(x.y0),i=o(x.y1);if(c==="line")return"M"+r+","+a+"L"+n+","+i;if(c==="rect")return"M"+r+","+a+"H"+n+"V"+i+"H"+r+"Z";var m=(r+n)/2,w=(a+i)/2,u=Math.abs(m-r),S=Math.abs(w-a),_="A"+u+","+S,E=m+u+","+w;return"M"+E+_+" 0 1,1 "+m+","+(w-S)+_+" 0 0,1 "+E+"Z"}},89853:function($,R,e){var A=e(34031);$.exports={moduleType:"component",name:"shapes",layoutAttributes:e(89827),supplyLayoutDefaults:e(84726),supplyDrawNewShapeDefaults:e(45547),includeBasePlot:e(76325)("shapes"),calcAutorange:e(5627),draw:A.draw,drawOne:A.drawOne}},75067:function($,R,e){var A=e(41940),k=e(35025),l=e(1426).extendDeepAll,T=e(30962).overrideAll,x=e(85594),d=e(44467).templatedArray,s=e(98292),t=d("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});$.exports=T(d("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:l(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:x.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:A({})},font:A({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},98292:function($){$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function($,R,e){var A=e(71828),k=e(85501),l=e(75067),T=e(98292).name,x=l.steps;function d(t,o,r){function n(f,b){return A.coerce(t,o,l,f,b)}for(var a=k(t,o,{name:"steps",handleItemDefaults:s}),i=0,c=0;c<a.length;c++)a[c].visible&&i++;if(i<2?o.visible=!1:n("visible")){o._stepCount=i;var h=o._visibleSteps=A.filterVisible(a);(a[n("active")]||{}).visible||(o.active=h[0]._index),n("x"),n("y"),A.noneOrAll(t,o,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),A.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),A.coerceFont(n,"currentvalue.font",o.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function s(t,o){function r(a,i){return A.coerce(t,o,x,a,i)}if(t.method==="skip"||Array.isArray(t.args)?r("visible"):o.visible=!1){r("method"),r("args");var n=r("label","step-"+o._index);r("value",n),r("execute")}}$.exports=function(t,o){k(t,o,{name:T,handleItemDefaults:d})}},44504:function($,R,e){var A=e(39898),k=e(74875),l=e(7901),T=e(91424),x=e(71828),d=x.strTranslate,s=e(63893),t=e(44467).arrayEditor,o=e(98292),r=e(18783),n=r.LINE_SPACING,a=r.FROM_TL,i=r.FROM_BR;function c(P){return o.autoMarginIdRoot+P._index}function h(P){return P._index}function f(P,I){var U=T.tester.selectAll("g."+o.labelGroupClass).data(I._visibleSteps);U.enter().append("g").classed(o.labelGroupClass,!0);var z=0,H=0;U.each(function(J){var X=g(A.select(this),{step:J},I).node();if(X){var ee=T.bBox(X);H=Math.max(H,ee.height),z=Math.max(z,ee.width)}}),U.remove();var F=I._dims={};F.inputAreaWidth=Math.max(o.railWidth,o.gripHeight);var N=P._fullLayout._size;F.lx=N.l+N.w*I.x,F.ly=N.t+N.h*(1-I.y),I.lenmode==="fraction"?F.outerLength=Math.round(N.w*I.len):F.outerLength=I.len,F.inputAreaStart=0,F.inputAreaLength=Math.round(F.outerLength-I.pad.l-I.pad.r);var B=(F.inputAreaLength-2*o.stepInset)/(I._stepCount-1),j=z+o.labelPadding;if(F.labelStride=Math.max(1,Math.ceil(j/B)),F.labelHeight=H,F.currentValueMaxWidth=0,F.currentValueHeight=0,F.currentValueTotalHeight=0,F.currentValueMaxLines=1,I.currentvalue.visible){var K=T.tester.append("g");U.each(function(J){var X=b(K,I,J.label),ee=X.node()&&T.bBox(X.node())||{width:0,height:0},re=s.lineCount(X);F.currentValueMaxWidth=Math.max(F.currentValueMaxWidth,Math.ceil(ee.width)),F.currentValueHeight=Math.max(F.currentValueHeight,Math.ceil(ee.height)),F.currentValueMaxLines=Math.max(F.currentValueMaxLines,re)}),F.currentValueTotalHeight=F.currentValueHeight+I.currentvalue.offset,K.remove()}F.height=F.currentValueTotalHeight+o.tickOffset+I.ticklen+o.labelOffset+F.labelHeight+I.pad.t+I.pad.b;var G="left";x.isRightAnchor(I)&&(F.lx-=F.outerLength,G="right"),x.isCenterAnchor(I)&&(F.lx-=F.outerLength/2,G="center");var V="top";x.isBottomAnchor(I)&&(F.ly-=F.height,V="bottom"),x.isMiddleAnchor(I)&&(F.ly-=F.height/2,V="middle"),F.outerLength=Math.ceil(F.outerLength),F.height=Math.ceil(F.height),F.lx=Math.round(F.lx),F.ly=Math.round(F.ly);var W={y:I.y,b:F.height*i[V],t:F.height*a[V]};I.lenmode==="fraction"?(W.l=0,W.xl=I.x-I.len*a[G],W.r=0,W.xr=I.x+I.len*i[G]):(W.x=I.x,W.l=F.outerLength*a[G],W.r=F.outerLength*i[G]),k.autoMargin(P,c(I),W)}function b(P,I,U){if(I.currentvalue.visible){var z,H,F=I._dims;switch(I.currentvalue.xanchor){case"right":z=F.inputAreaLength-o.currentValueInset-F.currentValueMaxWidth,H="left";break;case"center":z=.5*F.inputAreaLength,H="middle";break;default:z=o.currentValueInset,H="left"}var N=x.ensureSingle(P,"text",o.labelClass,function(W){W.attr({"text-anchor":H,"data-notex":1})}),B=I.currentvalue.prefix?I.currentvalue.prefix:"";if(typeof U=="string")B+=U;else{var j=I.steps[I.active].label,K=I._gd._fullLayout._meta;K&&(j=x.templateString(j,K)),B+=j}I.currentvalue.suffix&&(B+=I.currentvalue.suffix),N.call(T.font,I.currentvalue.font).text(B).call(s.convertToTspans,I._gd);var G=s.lineCount(N),V=(F.currentValueMaxLines+1-G)*I.currentvalue.font.size*n;return s.positionText(N,z,V),N}}function v(P,I,U){x.ensureSingle(P,"rect",o.gripRectClass,function(z){z.call(w,I,P,U).style("pointer-events","all")}).attr({width:o.gripWidth,height:o.gripHeight,rx:o.gripRadius,ry:o.gripRadius}).call(l.stroke,U.bordercolor).call(l.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function g(P,I,U){var z=x.ensureSingle(P,"text",o.labelClass,function(N){N.attr({"text-anchor":"middle","data-notex":1})}),H=I.step.label,F=U._gd._fullLayout._meta;return F&&(H=x.templateString(H,F)),z.call(T.font,U.font).text(H).call(s.convertToTspans,U._gd),z}function y(P,I){var U=x.ensureSingle(P,"g",o.labelsClass),z=I._dims,H=U.selectAll("g."+o.labelGroupClass).data(z.labelSteps);H.enter().append("g").classed(o.labelGroupClass,!0),H.exit().remove(),H.each(function(F){var N=A.select(this);N.call(g,F,I),T.setTranslate(N,_(I,F.fraction),o.tickOffset+I.ticklen+I.font.size*n+o.labelOffset+z.currentValueTotalHeight)})}function p(P,I,U,z,H){var F=Math.round(z*(U._stepCount-1)),N=U._visibleSteps[F]._index;N!==U.active&&m(P,I,U,N,!0,H)}function m(P,I,U,z,H,F){var N=U.active;U.active=z,t(P.layout,o.name,U).applyUpdate("active",z);var B=U.steps[U.active];I.call(S,U,F),I.call(b,U),P.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:H,previousActive:N}),B&&B.method&&H&&(I._nextMethod?(I._nextMethod.step=B,I._nextMethod.doCallback=H,I._nextMethod.doTransition=F):(I._nextMethod={step:B,doCallback:H,doTransition:F},I._nextMethodRaf=window.requestAnimationFrame(function(){var j=I._nextMethod.step;j.method&&(j.execute&&k.executeAPICommand(P,j.method,j.args),I._nextMethod=null,I._nextMethodRaf=null)})))}function w(P,I,U){if(!I._context.staticPlot){var z=U.node(),H=A.select(I);P.on("mousedown",N),P.on("touchstart",N)}function F(){return U.data()[0]}function N(){var B=F();I.emit("plotly_sliderstart",{slider:B});var j=U.select("."+o.gripRectClass);A.event.stopPropagation(),A.event.preventDefault(),j.call(l.fill,B.activebgcolor);var K=E(B,A.mouse(z)[0]);function G(){var W=F(),J=E(W,A.mouse(z)[0]);p(I,U,W,J,!1)}function V(){var W=F();W._dragging=!1,j.call(l.fill,W.bgcolor),H.on("mouseup",null),H.on("mousemove",null),H.on("touchend",null),H.on("touchmove",null),I.emit("plotly_sliderend",{slider:W,step:W.steps[W.active]})}p(I,U,B,K,!0),B._dragging=!0,H.on("mousemove",G),H.on("touchmove",G),H.on("mouseup",V),H.on("touchend",V)}}function u(P,I){var U=P.selectAll("rect."+o.tickRectClass).data(I._visibleSteps),z=I._dims;U.enter().append("rect").classed(o.tickRectClass,!0),U.exit().remove(),U.attr({width:I.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(H,F){var N=F%z.labelStride==0,B=A.select(this);B.attr({height:N?I.ticklen:I.minorticklen}).call(l.fill,I.tickcolor),T.setTranslate(B,_(I,F/(I._stepCount-1))-.5*I.tickwidth,(N?o.tickOffset:o.minorTickOffset)+z.currentValueTotalHeight)})}function S(P,I,U){for(var z=P.select("rect."+o.gripRectClass),H=0,F=0;F<I._stepCount;F++)if(I._visibleSteps[F]._index===I.active){H=F;break}var N=_(I,H/(I._stepCount-1));if(!I._invokingCommand){var B=z;U&&I.transition.duration>0&&(B=B.transition().duration(I.transition.duration).ease(I.transition.easing)),B.attr("transform",d(N-.5*o.gripWidth,I._dims.currentValueTotalHeight))}}function _(P,I){var U=P._dims;return U.inputAreaStart+o.stepInset+(U.inputAreaLength-2*o.stepInset)*Math.min(1,Math.max(0,I))}function E(P,I){var U=P._dims;return Math.min(1,Math.max(0,(I-o.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*o.stepInset-2*U.inputAreaStart)))}function L(P,I,U){var z=U._dims,H=x.ensureSingle(P,"rect",o.railTouchRectClass,function(F){F.call(w,I,P,U).style("pointer-events","all")});H.attr({width:z.inputAreaLength,height:Math.max(z.inputAreaWidth,o.tickOffset+U.ticklen+z.labelHeight)}).call(l.fill,U.bgcolor).attr("opacity",0),T.setTranslate(H,0,z.currentValueTotalHeight)}function C(P,I){var U=I._dims,z=U.inputAreaLength-2*o.railInset,H=x.ensureSingle(P,"rect",o.railRectClass);H.attr({width:z,height:o.railWidth,rx:o.railRadius,ry:o.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,I.bordercolor).call(l.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px"),T.setTranslate(H,o.railInset,.5*(U.inputAreaWidth-o.railWidth)+U.currentValueTotalHeight)}$.exports=function(P){var I=P._context.staticPlot,U=P._fullLayout,z=function(K,G){for(var V=K[o.name],W=[],J=0;J<V.length;J++){var X=V[J];X.visible&&(X._gd=G,W.push(X))}return W}(U,P),H=U._infolayer.selectAll("g."+o.containerClassName).data(z.length>0?[0]:[]);function F(K){K._commandObserver&&(K._commandObserver.remove(),delete K._commandObserver),k.autoMargin(P,c(K))}if(H.enter().append("g").classed(o.containerClassName,!0).style("cursor",I?null:"ew-resize"),H.exit().each(function(){A.select(this).selectAll("g."+o.groupClassName).each(F)}).remove(),z.length!==0){var N=H.selectAll("g."+o.groupClassName).data(z,h);N.enter().append("g").classed(o.groupClassName,!0),N.exit().each(F).remove();for(var B=0;B<z.length;B++){var j=z[B];f(P,j)}N.each(function(K){var G=A.select(this);(function(V){var W=V._dims;W.labelSteps=[];for(var J=V._stepCount,X=0;X<J;X+=W.labelStride)W.labelSteps.push({fraction:X/(J-1),step:V._visibleSteps[X]})})(K),k.manageCommandObserver(P,K,K._visibleSteps,function(V){var W=G.data()[0];W.active!==V.index&&(W._dragging||m(P,G,W,V.index,!1,!0))}),function(V,W,J){(J.steps[J.active]||{}).visible||(J.active=J._visibleSteps[0]._index),W.call(b,J).call(C,J).call(y,J).call(u,J).call(L,V,J).call(v,V,J);var X=J._dims;T.setTranslate(W,X.lx+J.pad.l,X.ly+J.pad.t),W.call(S,J,!1),W.call(b,J)}(P,A.select(this),K)})}}},23243:function($,R,e){var A=e(98292);$.exports={moduleType:"component",name:A.name,layoutAttributes:e(75067),supplyLayoutDefaults:e(12343),draw:e(44504)}},92998:function($,R,e){var A=e(39898),k=e(92770),l=e(74875),T=e(73972),x=e(71828),d=x.strTranslate,s=e(91424),t=e(7901),o=e(63893),r=e(37822),n=e(18783).OPPOSITE_SIDE,a=/ [XY][0-9]* /;$.exports={draw:function(i,c,h){var f,b=h.propContainer,v=h.propName,g=h.placeholder,y=h.traceIndex,p=h.avoid||{},m=h.attributes,w=h.transform,u=h.containerGroup,S=i._fullLayout,_=1,E=!1,L=b.title,C=(L&&L.text?L.text:"").trim(),P=L&&L.font?L.font:{},I=P.family,U=P.size,z=P.color;v==="title.text"?f="titleText":v.indexOf("axis")!==-1?f="axisTitleText":v.indexOf(!0)&&(f="colorbarTitleText");var H=i._context.edits[f];C===""?_=0:C.replace(a," % ")===g.replace(a," % ")&&(_=.2,E=!0,H||(C="")),h._meta?C=x.templateString(C,h._meta):S._meta&&(C=x.templateString(C,S._meta));var F,N=C||H;u||(u=x.ensureSingle(S._infolayer,"g","g-"+c),F=S._hColorbarMoveTitle);var B=u.selectAll("text").data(N?[0]:[]);if(B.enter().append("text"),B.text(C).attr("class",c),B.exit().remove(),!N)return u;function j(V){x.syncOrAsync([K,G],V)}function K(V){var W;return!w&&F&&(w={}),w?(W="",w.rotate&&(W+="rotate("+[w.rotate,m.x,m.y]+")"),(w.offset||F)&&(W+=d(0,(w.offset||0)-(F||0)))):W=null,V.attr("transform",W),V.style({"font-family":I,"font-size":A.round(U,2)+"px",fill:t.rgb(z),opacity:_*t.opacity(z),"font-weight":l.fontWeight}).attr(m).call(o.convertToTspans,i),l.previousPromises(i)}function G(V){var W=A.select(V.node().parentNode);if(p&&p.selection&&p.side&&C){W.attr("transform",null);var J=n[p.side],X=p.side==="left"||p.side==="top"?-1:1,ee=k(p.pad)?p.pad:2,re=s.bBox(W.node()),ie={left:0,top:0,right:S.width,bottom:S.height},se=p.maxShift||X*(ie[p.side]-re[p.side]),fe=0;if(se<0)fe=se;else{var ye=p.offsetLeft||0,ge=p.offsetTop||0;re.left-=ye,re.right-=ye,re.top-=ge,re.bottom-=ge,p.selection.each(function(){var ve=s.bBox(this);x.bBoxIntersect(re,ve,ee)&&(fe=Math.max(fe,X*(ve[p.side]-re[J])+ee))}),fe=Math.min(se,fe),b._titleScoot=Math.abs(fe)}if(fe>0||se<0){var he={left:[-fe,0],right:[fe,0],top:[0,-fe],bottom:[0,fe]}[p.side];W.attr("transform",d(he[0],he[1]))}}}return B.call(j),H&&(C?B.on(".opacity",null):(_=0,E=!0,B.text(g).on("mouseover.opacity",function(){A.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){A.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),B.call(o.makeEditable,{gd:i}).on("edit",function(V){y!==void 0?T.call("_guiRestyle",i,v,V,y):T.call("_guiRelayout",i,v,V)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(j)}).on("input",function(V){this.text(V||" ").call(o.positionText,m.x,m.y)})),B.classed("js-placeholder",E),u}}},7163:function($,R,e){var A=e(41940),k=e(22399),l=e(1426).extendFlat,T=e(30962).overrideAll,x=e(35025),d=e(44467).templatedArray,s=d("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});$.exports=T(d("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:l(x({editType:"arraydraw"}),{}),font:A({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function($){$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},64897:function($,R,e){var A=e(71828),k=e(85501),l=e(7163),T=e(75909).name,x=l.buttons;function d(t,o,r){function n(a,i){return A.coerce(t,o,l,a,i)}n("visible",k(t,o,{name:"buttons",handleItemDefaults:s}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),A.noneOrAll(t,o,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),A.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function s(t,o){function r(n,a){return A.coerce(t,o,x,n,a)}r("visible",t.method==="skip"||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}$.exports=function(t,o){k(t,o,{name:T,handleItemDefaults:d})}},13689:function($,R,e){var A=e(39898),k=e(74875),l=e(7901),T=e(91424),x=e(71828),d=e(63893),s=e(44467).arrayEditor,t=e(18783).LINE_SPACING,o=e(75909),r=e(25849);function n(_){return _._index}function a(_,E){return+_.attr(o.menuIndexAttrName)===E._index}function i(_,E,L,C,P,I,U,z){E.active=U,s(_.layout,o.name,E).applyUpdate("active",U),E.type==="buttons"?h(_,C,null,null,E):E.type==="dropdown"&&(P.attr(o.menuIndexAttrName,"-1"),c(_,C,P,I,E),z||h(_,C,P,I,E))}function c(_,E,L,C,P){var I=x.ensureSingle(E,"g",o.headerClassName,function(B){B.style("pointer-events","all")}),U=P._dims,z=P.active,H=P.buttons[z]||o.blankHeaderOpts,F={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},N={width:U.headerWidth,height:U.headerHeight};I.call(f,P,H,_).call(u,P,F,N),x.ensureSingle(E,"text",o.headerArrowClassName,function(B){B.attr("text-anchor","end").call(T.font,P.font).text(o.arrowSymbol[P.direction])}).attr({x:U.headerWidth-o.arrowOffsetX+P.pad.l,y:U.headerHeight/2+o.textOffsetY+P.pad.t}),I.on("click",function(){L.call(S,String(a(L,P)?-1:P._index)),h(_,E,L,C,P)}),I.on("mouseover",function(){I.call(y)}),I.on("mouseout",function(){I.call(p,P)}),T.setTranslate(E,U.lx,U.ly)}function h(_,E,L,C,P){L||(L=E).attr("pointer-events","all");var I=function(W){return+W.attr(o.menuIndexAttrName)==-1}(L)&&P.type!=="buttons"?[]:P.buttons,U=P.type==="dropdown"?o.dropdownButtonClassName:o.buttonClassName,z=L.selectAll("g."+U).data(x.filterVisible(I)),H=z.enter().append("g").classed(U,!0),F=z.exit();P.type==="dropdown"?(H.attr("opacity","0").transition().attr("opacity","1"),F.transition().attr("opacity","0").remove()):F.remove();var N=0,B=0,j=P._dims,K=["up","down"].indexOf(P.direction)!==-1;P.type==="dropdown"&&(K?B=j.headerHeight+o.gapButtonHeader:N=j.headerWidth+o.gapButtonHeader),P.type==="dropdown"&&P.direction==="up"&&(B=-o.gapButtonHeader+o.gapButton-j.openHeight),P.type==="dropdown"&&P.direction==="left"&&(N=-o.gapButtonHeader+o.gapButton-j.openWidth);var G={x:j.lx+N+P.pad.l,y:j.ly+B+P.pad.t,yPad:o.gapButton,xPad:o.gapButton,index:0},V={l:G.x+P.borderwidth,t:G.y+P.borderwidth};z.each(function(W,J){var X=A.select(this);X.call(f,P,W,_).call(u,P,G),X.on("click",function(){A.event.defaultPrevented||(W.execute&&(W.args2&&P.active===J?(i(_,P,0,E,L,C,-1),k.executeAPICommand(_,W.method,W.args2)):(i(_,P,0,E,L,C,J),k.executeAPICommand(_,W.method,W.args))),_.emit("plotly_buttonclicked",{menu:P,button:W,active:P.active}))}),X.on("mouseover",function(){X.call(y)}),X.on("mouseout",function(){X.call(p,P),z.call(g,P)})}),z.call(g,P),K?(V.w=Math.max(j.openWidth,j.headerWidth),V.h=G.y-V.t):(V.w=G.x-V.l,V.h=Math.max(j.openHeight,j.headerHeight)),V.direction=P.direction,C&&(z.size()?function(W,J,X,ee,re,ie){var se,fe,ye,ge=re.direction,he=ge==="up"||ge==="down",ve=re._dims,Ie=re.active;if(he)for(fe=0,ye=0;ye<Ie;ye++)fe+=ve.heights[ye]+o.gapButton;else for(se=0,ye=0;ye<Ie;ye++)se+=ve.widths[ye]+o.gapButton;ee.enable(ie,se,fe),ee.hbar&&ee.hbar.attr("opacity","0").transition().attr("opacity","1"),ee.vbar&&ee.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,P,V):function(W){var J=!!W.hbar,X=!!W.vbar;J&&W.hbar.transition().attr("opacity","0").each("end",function(){J=!1,X||W.disable()}),X&&W.vbar.transition().attr("opacity","0").each("end",function(){X=!1,J||W.disable()})}(C))}function f(_,E,L,C){_.call(b,E).call(v,E,L,C)}function b(_,E){x.ensureSingle(_,"rect",o.itemRectClassName,function(L){L.attr({rx:o.rx,ry:o.ry,"shape-rendering":"crispEdges"})}).call(l.stroke,E.bordercolor).call(l.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function v(_,E,L,C){var P=x.ensureSingle(_,"text",o.itemTextClassName,function(z){z.attr({"text-anchor":"start","data-notex":1})}),I=L.label,U=C._fullLayout._meta;U&&(I=x.templateString(I,U)),P.call(T.font,E.font).text(I).call(d.convertToTspans,C)}function g(_,E){var L=E.active;_.each(function(C,P){var I=A.select(this);P===L&&E.showactive&&I.select("rect."+o.itemRectClassName).call(l.fill,o.activeColor)})}function y(_){_.select("rect."+o.itemRectClassName).call(l.fill,o.hoverColor)}function p(_,E){_.select("rect."+o.itemRectClassName).call(l.fill,E.bgcolor)}function m(_,E){var L=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+o.dropdownButtonClassName).data(x.filterVisible(E.buttons));C.enter().append("g").classed(o.dropdownButtonClassName,!0);var P=["up","down"].indexOf(E.direction)!==-1;C.each(function(N,B){var j=A.select(this);j.call(f,E,N,_);var K=j.select("."+o.itemTextClassName),G=K.node()&&T.bBox(K.node()).width,V=Math.max(G+o.textPadX,o.minWidth),W=E.font.size*t,J=d.lineCount(K),X=Math.max(W*J,o.minHeight)+o.textOffsetY;X=Math.ceil(X),V=Math.ceil(V),L.widths[B]=V,L.heights[B]=X,L.height1=Math.max(L.height1,X),L.width1=Math.max(L.width1,V),P?(L.totalWidth=Math.max(L.totalWidth,V),L.openWidth=L.totalWidth,L.totalHeight+=X+o.gapButton,L.openHeight+=X+o.gapButton):(L.totalWidth+=V+o.gapButton,L.openWidth+=V+o.gapButton,L.totalHeight=Math.max(L.totalHeight,X),L.openHeight=L.totalHeight)}),P?L.totalHeight-=o.gapButton:L.totalWidth-=o.gapButton,L.headerWidth=L.width1+o.arrowPadX,L.headerHeight=L.height1,E.type==="dropdown"&&(P?(L.width1+=o.arrowPadX,L.totalHeight=L.height1):L.totalWidth=L.width1,L.totalWidth+=o.arrowPadX),C.remove();var I=L.totalWidth+E.pad.l+E.pad.r,U=L.totalHeight+E.pad.t+E.pad.b,z=_._fullLayout._size;L.lx=z.l+z.w*E.x,L.ly=z.t+z.h*(1-E.y);var H="left";x.isRightAnchor(E)&&(L.lx-=I,H="right"),x.isCenterAnchor(E)&&(L.lx-=I/2,H="center");var F="top";x.isBottomAnchor(E)&&(L.ly-=U,F="bottom"),x.isMiddleAnchor(E)&&(L.ly-=U/2,F="middle"),L.totalWidth=Math.ceil(L.totalWidth),L.totalHeight=Math.ceil(L.totalHeight),L.lx=Math.round(L.lx),L.ly=Math.round(L.ly),k.autoMargin(_,w(E),{x:E.x,y:E.y,l:I*({right:1,center:.5}[H]||0),r:I*({left:1,center:.5}[H]||0),b:U*({top:1,middle:.5}[F]||0),t:U*({bottom:1,middle:.5}[F]||0)})}function w(_){return o.autoMarginIdRoot+_._index}function u(_,E,L,C){C=C||{};var P=_.select("."+o.itemRectClassName),I=_.select("."+o.itemTextClassName),U=E.borderwidth,z=L.index,H=E._dims;T.setTranslate(_,U+L.x,U+L.y);var F=["up","down"].indexOf(E.direction)!==-1,N=C.height||(F?H.heights[z]:H.height1);P.attr({x:0,y:0,width:C.width||(F?H.width1:H.widths[z]),height:N});var B=E.font.size*t,j=(d.lineCount(I)-1)*B/2;d.positionText(I,o.textOffsetX,N/2-j+o.textOffsetY),F?L.y+=H.heights[z]+L.yPad:L.x+=H.widths[z]+L.xPad,L.index++}function S(_,E){_.attr(o.menuIndexAttrName,E||"-1").selectAll("g."+o.dropdownButtonClassName).remove()}$.exports=function(_){var E=_._fullLayout,L=x.filterVisible(E[o.name]);function C(B){k.autoMargin(_,w(B))}var P=E._menulayer.selectAll("g."+o.containerClassName).data(L.length>0?[0]:[]);if(P.enter().append("g").classed(o.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){A.select(this).selectAll("g."+o.headerGroupClassName).each(C)}).remove(),L.length!==0){var I=P.selectAll("g."+o.headerGroupClassName).data(L,n);I.enter().append("g").classed(o.headerGroupClassName,!0);for(var U=x.ensureSingle(P,"g",o.dropdownButtonGroupClassName,function(B){B.style("pointer-events","all")}),z=0;z<L.length;z++){var H=L[z];m(_,H)}var F="updatemenus"+E._uid,N=new r(_,U,F);I.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(S)),I.exit().each(function(B){U.call(S),C(B)}).remove(),I.each(function(B){var j=A.select(this),K=B.type==="dropdown"?U:null;k.manageCommandObserver(_,B,B.buttons,function(G){i(_,B,B.buttons[G.index],j,K,N,G.index,!0)}),B.type==="dropdown"?(c(_,j,U,N,B),a(U,B)&&h(_,j,U,N,B)):h(_,j,null,null,B)})}}},20763:function($,R,e){var A=e(75909);$.exports={moduleType:"component",name:A.name,layoutAttributes:e(7163),supplyLayoutDefaults:e(64897),draw:e(13689)}},25849:function($,R,e){$.exports=x;var A=e(39898),k=e(7901),l=e(91424),T=e(71828);function x(d,s,t){this.gd=d,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}x.barWidth=2,x.barLength=20,x.barRadius=2,x.barPad=1,x.barColor="#808BA4",x.prototype.enable=function(d,s,t){var o=this.gd._fullLayout,r=o.width,n=o.height;this.position=d;var a,i,c,h,f=this.position.l,b=this.position.w,v=this.position.t,g=this.position.h,y=this.position.direction,p=y==="down",m=y==="left",w=y==="up",u=b,S=g;p||m||y==="right"||w||(this.position.direction="down",p=!0),p||w?(i=(a=f)+u,p?(c=v,S=(h=Math.min(c+S,n))-c):S=(h=v+S)-(c=Math.max(h-S,0))):(h=(c=v)+S,m?u=(i=f+u)-(a=Math.max(i-u,0)):(a=f,u=(i=Math.min(a+u,r))-a)),this._box={l:a,t:c,w:u,h:S};var _=b>u,E=x.barLength+2*x.barPad,L=x.barWidth+2*x.barPad,C=f,P=v+g;P+L>n&&(P=n-L);var I=this.container.selectAll("rect.scrollbar-horizontal").data(_?[0]:[]);I.exit().on(".drag",null).remove(),I.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,x.barColor),_?(this.hbar=I.attr({rx:x.barRadius,ry:x.barRadius,x:C,y:P,width:E,height:L}),this._hbarXMin=C+E/2,this._hbarTranslateMax=u-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=g>S,z=x.barWidth+2*x.barPad,H=x.barLength+2*x.barPad,F=f+b,N=v;F+z>r&&(F=r-z);var B=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,x.barColor),U?(this.vbar=B.attr({rx:x.barRadius,ry:x.barRadius,x:F,y:N,width:z,height:H}),this._vbarYMin=N+H/2,this._vbarTranslateMax=S-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var j=this.id,K=a-.5,G=U?i+z+.5:i+.5,V=c-.5,W=_?h+L+.5:h+.5,J=o._topdefs.selectAll("#"+j).data(_||U?[0]:[]);if(J.exit().remove(),J.enter().append("clipPath").attr("id",j).append("rect"),_||U?(this._clipRect=J.select("rect").attr({x:Math.floor(K),y:Math.floor(V),width:Math.ceil(G)-Math.floor(K),height:Math.ceil(W)-Math.floor(V)}),this.container.call(l.setClipUrl,j,this.gd),this.bg.attr({x:f,y:v,width:b,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),_||U){var X=A.behavior.drag().on("dragstart",function(){A.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(X);var ee=A.behavior.drag().on("dragstart",function(){A.event.sourceEvent.preventDefault(),A.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));_&&this.hbar.on(".drag",null).call(ee),U&&this.vbar.on(".drag",null).call(ee)}this.setTranslate(s,t)},x.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},x.prototype._onBoxDrag=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d-=A.event.dx),this.vbar&&(s-=A.event.dy),this.setTranslate(d,s)},x.prototype._onBoxWheel=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d+=A.event.deltaY),this.vbar&&(s+=A.event.deltaY),this.setTranslate(d,s)},x.prototype._onBarDrag=function(){var d=this.translateX,s=this.translateY;if(this.hbar){var t=d+this._hbarXMin,o=t+this._hbarTranslateMax;d=(T.constrain(A.event.x,t,o)-t)/(o-t)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,n=r+this._vbarTranslateMax;s=(T.constrain(A.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(d,s)},x.prototype.setTranslate=function(d,s){var t=this.position.w-this._box.w,o=this.position.h-this._box.h;if(d=T.constrain(d||0,0,t),s=T.constrain(s||0,0,o),this.translateX=d,this.translateY=s,this.container.call(l.setTranslate,this._box.l-this.position.l-d,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+d-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var r=d/t;this.hbar.call(l.setTranslate,d+r*this._hbarTranslateMax,s)}if(this.vbar){var n=s/o;this.vbar.call(l.setTranslate,d,s+n*this._vbarTranslateMax)}}},18783:function($){$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function($){$.exports={axisRefDescription:function(R,e,A){return["If set to a",R,"axis id (e.g. *"+R+"* or","*"+R+"2*), the `"+R+"` position refers to a",R,"coordinate. If set to *paper*, the `"+R+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+A+"). If set to a",R,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+R+"2 domain* refers to the domain of the second",R," axis and a",R,"position of 0.5 refers to the","point between the",e,"and the",A,"of the domain of the","second",R,"axis."].join(" ")}}},22372:function($){$.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},31562:function($){$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function($){$.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function($){$.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function($){$.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},37822:function($){$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function($){$.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"}},77922:function($,R){R.xmlns="http://www.w3.org/2000/xmlns/",R.svg="http://www.w3.org/2000/svg",R.xlink="http://www.w3.org/1999/xlink",R.svgAttrs={xmlns:R.svg,"xmlns:xlink":R.xlink}},8729:function($,R,e){R.version=e(11506).version,e(7417),e(98847);for(var A=e(73972),k=R.register=A.register,l=e(10641),T=Object.keys(l),x=0;x<T.length;x++){var d=T[x];d.charAt(0)!=="_"&&(R[d]=l[d]),k({moduleType:"apiMethod",name:d,fn:l[d]})}k(e(67368)),k([e(2199),e(30211),e(32745),e(2468),e(47322),e(89853),e(68804),e(20763),e(23243),e(13137),e(97218),e(83312),e(37369),e(21081),e(12311),e(64168)]),k([e(92177),e(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),R.Icons=e(24255);var s=e(30211),t=e(74875);R.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},R.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},R.Snapshot=e(44511),R.PlotSchema=e(86281)},24255:function($){$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function($,R){R.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},R.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},R.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},R.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},R.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},R.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},26348:function($,R,e){var A=e(64872),k=A.mod,l=A.modHalf,T=Math.PI,x=2*T;function d(r){return Math.abs(r[1]-r[0])>x-1e-14}function s(r,n){return l(n-r,x)}function t(r,n){if(d(n))return!0;var a,i;n[0]<n[1]?(a=n[0],i=n[1]):(a=n[1],i=n[0]),(a=k(a,x))>(i=k(i,x))&&(i+=x);var c=k(r,x),h=c+x;return c>=a&&c<=i||h>=a&&h<=i}function o(r,n,a,i,c,h,f){c=c||0,h=h||0;var b,v,g,y,p,m=d([a,i]);function w(E,L){return[E*Math.cos(L)+c,h-E*Math.sin(L)]}m?(b=0,v=T,g=x):a<i?(b=a,g=i):(b=i,g=a),r<n?(y=r,p=n):(y=n,p=r);var u,S=Math.abs(g-b)<=T?0:1;function _(E,L,C){return"A"+[E,E]+" "+[0,S,C]+" "+w(E,L)}return m?u=y===null?"M"+w(p,b)+_(p,v,0)+_(p,g,0)+"Z":"M"+w(y,b)+_(y,v,0)+_(y,g,0)+"ZM"+w(p,b)+_(p,v,1)+_(p,g,1)+"Z":y===null?(u="M"+w(p,b)+_(p,g,0),f&&(u+="L0,0Z")):u="M"+w(y,b)+"L"+w(p,b)+_(p,g,0)+"L"+w(y,g)+_(y,b,1)+"Z",u}$.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:s,angleDist:function(r,n){return Math.abs(s(r,n))},isFullCircle:d,isAngleInsideSector:t,isPtInsideSector:function(r,n,a,i){return!!t(n,i)&&(a[0]<a[1]?(c=a[0],h=a[1]):(c=a[1],h=a[0]),r>=c&&r<=h);var c,h},pathArc:function(r,n,a,i,c){return o(null,r,n,a,i,c,0)},pathSector:function(r,n,a,i,c){return o(null,r,n,a,i,c,1)},pathAnnulus:function(r,n,a,i,c,h){return o(r,n,a,i,c,h,1)}}},73627:function($,R){var e=Array.isArray,A=ArrayBuffer,k=DataView;function l(d){return A.isView(d)&&!(d instanceof k)}function T(d){return e(d)||l(d)}function x(d,s,t){if(T(d)){if(T(d[0])){for(var o=t,r=0;r<d.length;r++)o=s(o,d[r].length);return o}return d.length}return 0}R.isTypedArray=l,R.isArrayOrTypedArray=T,R.isArray1D=function(d){return!T(d[0])},R.ensureArray=function(d,s){return e(d)||(d=[]),d.length=s,d},R.concat=function(){var d,s,t,o,r,n,a,i,c=[],h=!0,f=0;for(t=0;t<arguments.length;t++)(n=(o=arguments[t]).length)&&(s?c.push(o):(s=o,r=n),e(o)?d=!1:(h=!1,f?d!==o.constructor&&(d=!1):d=o.constructor),f+=n);if(!f)return[];if(!c.length)return s;if(h)return s.concat.apply(s,c);if(d){for((a=new d(f)).set(s),t=0;t<c.length;t++)o=c[t],a.set(o,r),r+=o.length;return a}for(a=new Array(f),i=0;i<s.length;i++)a[i]=s[i];for(t=0;t<c.length;t++){for(o=c[t],i=0;i<o.length;i++)a[r+i]=o[i];r+=i}return a},R.maxRowLength=function(d){return x(d,Math.max,0)},R.minRowLength=function(d){return x(d,Math.min,1/0)}},95218:function($,R,e){var A=e(92770),k=e(50606).BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(T){return typeof T=="string"&&(T=T.replace(l,"")),A(T)?Number(T):k}},33306:function($){$.exports=function(R){var e=R._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(A){A.regl&&A.regl.clear({color:!0,depth:!0})})}},86367:function($){$.exports=function(R){R._responsiveChartHandler&&(window.removeEventListener("resize",R._responsiveChartHandler),delete R._responsiveChartHandler)}},96554:function($,R,e){var A=e(92770),k=e(84267),l=e(9012),T=e(63282),x=e(7901),d=e(37822).DESELECTDIM,s=e(65487),t=e(30587).counter,o=e(64872).modHalf,r=e(73627).isArrayOrTypedArray;function n(a,i){var c=R.valObjectMeta[i.valType];if(i.arrayOk&&r(a))return!0;if(c.validateFunction)return c.validateFunction(a,i);var h={},f=h,b={set:function(v){f=v}};return c.coerceFunction(a,b,h,i),f!==h}R.valObjectMeta={data_array:{coerceFunction:function(a,i,c){r(a)?i.set(a):c!==void 0&&i.set(c)}},enumerated:{coerceFunction:function(a,i,c,h){h.coerceNumber&&(a=+a),h.values.indexOf(a)===-1?i.set(c):i.set(a)},validateFunction:function(a,i){i.coerceNumber&&(a=+a);for(var c=i.values,h=0;h<c.length;h++){var f=String(c[h]);if(f.charAt(0)==="/"&&f.charAt(f.length-1)==="/"){if(new RegExp(f.substr(1,f.length-2)).test(a))return!0}else if(a===c[h])return!0}return!1}},boolean:{coerceFunction:function(a,i,c){a===!0||a===!1?i.set(a):i.set(c)}},number:{coerceFunction:function(a,i,c,h){!A(a)||h.min!==void 0&&a<h.min||h.max!==void 0&&a>h.max?i.set(c):i.set(+a)}},integer:{coerceFunction:function(a,i,c,h){a%1||!A(a)||h.min!==void 0&&a<h.min||h.max!==void 0&&a>h.max?i.set(c):i.set(+a)}},string:{coerceFunction:function(a,i,c,h){if(typeof a!="string"){var f=typeof a=="number";h.strict!==!0&&f?i.set(String(a)):i.set(c)}else h.noBlank&&!a?i.set(c):i.set(a)}},color:{coerceFunction:function(a,i,c){k(a).isValid()?i.set(a):i.set(c)}},colorlist:{coerceFunction:function(a,i,c){Array.isArray(a)&&a.length&&a.every(function(h){return k(h).isValid()})?i.set(a):i.set(c)}},colorscale:{coerceFunction:function(a,i,c){i.set(T.get(a,c))}},angle:{coerceFunction:function(a,i,c){a==="auto"?i.set("auto"):A(a)?i.set(o(+a,360)):i.set(c)}},subplotid:{coerceFunction:function(a,i,c,h){var f=h.regex||t(c);typeof a=="string"&&f.test(a)?i.set(a):i.set(c)},validateFunction:function(a,i){var c=i.dflt;return a===c||typeof a=="string"&&!!t(c).test(a)}},flaglist:{coerceFunction:function(a,i,c,h){if((h.extras||[]).indexOf(a)===-1)if(typeof a=="string"){for(var f=a.split("+"),b=0;b<f.length;){var v=f[b];h.flags.indexOf(v)===-1||f.indexOf(v)<b?f.splice(b,1):b++}f.length?i.set(f.join("+")):i.set(c)}else i.set(c);else i.set(a)}},any:{coerceFunction:function(a,i,c){a===void 0?i.set(c):i.set(a)}},info_array:{coerceFunction:function(a,i,c,h){function f(P,I,U){var z,H={set:function(F){z=F}};return U===void 0&&(U=I.dflt),R.valObjectMeta[I.valType].coerceFunction(P,H,U,I),z}var b=h.dimensions===2||h.dimensions==="1-2"&&Array.isArray(a)&&Array.isArray(a[0]);if(Array.isArray(a)){var v,g,y,p,m,w,u=h.items,S=[],_=Array.isArray(u),E=_&&b&&Array.isArray(u[0]),L=b&&_&&!E,C=_&&!L?u.length:a.length;if(c=Array.isArray(c)?c:[],b)for(v=0;v<C;v++)for(S[v]=[],y=Array.isArray(a[v])?a[v]:[],m=L?u.length:_?u[v].length:y.length,g=0;g<m;g++)p=L?u[g]:_?u[v][g]:u,(w=f(y[g],p,(c[v]||[])[g]))!==void 0&&(S[v][g]=w);else for(v=0;v<C;v++)(w=f(a[v],_?u[v]:u,c[v]))!==void 0&&(S[v]=w);i.set(S)}else i.set(c)},validateFunction:function(a,i){if(!Array.isArray(a))return!1;var c=i.items,h=Array.isArray(c),f=i.dimensions===2;if(!i.freeLength&&a.length!==c.length)return!1;for(var b=0;b<a.length;b++)if(f){if(!Array.isArray(a[b])||!i.freeLength&&a[b].length!==c[b].length)return!1;for(var v=0;v<a[b].length;v++)if(!n(a[b][v],h?c[b][v]:c))return!1}else if(!n(a[b],h?c[b]:c))return!1;return!0}}},R.coerce=function(a,i,c,h,f){var b=s(c,h).get(),v=s(a,h),g=s(i,h),y=v.get(),p=i._template;if(y===void 0&&p&&(y=s(p,h).get(),p=0),f===void 0&&(f=b.dflt),b.arrayOk&&r(y))return g.set(y),y;var m=R.valObjectMeta[b.valType].coerceFunction;m(y,g,f,b);var w=g.get();return p&&w===f&&!n(y,b)&&(m(y=s(p,h).get(),g,f,b),w=g.get()),w},R.coerce2=function(a,i,c,h,f){var b=s(a,h),v=R.coerce(a,i,c,h,f);return b.get()!=null&&v},R.coerceFont=function(a,i,c){var h={};return c=c||{},h.family=a(i+".family",c.family),h.size=a(i+".size",c.size),h.color=a(i+".color",c.color),h},R.coercePattern=function(a,i,c,h){if(a(i+".shape")){a(i+".solidity"),a(i+".size");var f=a(i+".fillmode")==="overlay";if(!h){var b=a(i+".bgcolor",f?c:void 0);a(i+".fgcolor",f?x.contrast(b):c)}a(i+".fgopacity",f?.5:1)}},R.coerceHoverinfo=function(a,i,c){var h,f=i._module.attributes,b=f.hoverinfo?f:l,v=b.hoverinfo;if(c._dataLength===1){var g=v.dflt==="all"?v.flags.slice():v.dflt.split("+");g.splice(g.indexOf("name"),1),h=g.join("+")}return R.coerce(a,i,b,"hoverinfo",h)},R.coerceSelectionMarkerOpacity=function(a,i){if(a.marker){var c,h,f=a.marker.opacity;f!==void 0&&(r(f)||a.selected||a.unselected||(c=f,h=d*f),i("selected.marker.opacity",c),i("unselected.marker.opacity",h))}},R.validate=n},41631:function($,R,e){var A,k,l=e(84096).i$,T=e(92770),x=e(47769),d=e(64872).mod,s=e(50606),t=s.BADNUM,o=s.ONEDAY,r=s.ONEHOUR,n=s.ONEMIN,a=s.ONESEC,i=s.EPOCHJD,c=e(73972),h=e(84096).g0,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=new Date().getFullYear()-70;function g(I){return I&&c.componentsRegistry.calendars&&typeof I=="string"&&I!=="gregorian"}function y(I,U){return String(I+Math.pow(10,U)).substr(1)}R.dateTick0=function(I,U){var z=function(F,N){return g(F)?N?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[F]:c.getComponentMethod("calendars","CANONICAL_TICK")[F]:N?"2000-01-02":"2000-01-01"}(I,!!U);if(U<2)return z;var H=R.dateTime2ms(z,I);return H+=o*(U-1),R.ms2DateTime(H,0,I)},R.dfltRange=function(I){return g(I)?c.getComponentMethod("calendars","DFLTRANGE")[I]:["2000-01-01","2001-01-01"]},R.isJSDate=function(I){return typeof I=="object"&&I!==null&&typeof I.getTime=="function"},R.dateTime2ms=function(I,U){if(R.isJSDate(I)){var z=I.getTimezoneOffset()*n,H=(I.getUTCMinutes()-I.getMinutes())*n+(I.getUTCSeconds()-I.getSeconds())*a+(I.getUTCMilliseconds()-I.getMilliseconds());if(H){var F=3*n;z=z-F/2+d(H-z+F/2,F)}return(I=Number(I)-z)>=A&&I<=k?I:t}if(typeof I!="string"&&typeof I!="number")return t;I=String(I);var N=g(U),B=I.charAt(0);!N||B!=="G"&&B!=="g"||(I=I.substr(1),U="");var j=N&&U.substr(0,7)==="chinese",K=I.match(j?b:f);if(!K)return t;var G=K[1],V=K[3]||"1",W=Number(K[5]||1),J=Number(K[7]||0),X=Number(K[9]||0),ee=Number(K[11]||0);if(N){if(G.length===2)return t;var re;G=Number(G);try{var ie=c.getComponentMethod("calendars","getCal")(U);if(j){var se=V.charAt(V.length-1)==="i";V=parseInt(V,10),re=ie.newDate(G,ie.toMonthIndex(G,V,se),W)}else re=ie.newDate(G,Number(V),W)}catch{return t}return re?(re.toJD()-i)*o+J*r+X*n+ee*a:t}G=G.length===2?(Number(G)+2e3-v)%100+v:Number(G),V-=1;var fe=new Date(Date.UTC(2e3,V,W,J,X));return fe.setUTCFullYear(G),fe.getUTCMonth()!==V||fe.getUTCDate()!==W?t:fe.getTime()+ee*a},A=R.MIN_MS=R.dateTime2ms("-9999"),k=R.MAX_MS=R.dateTime2ms("9999-12-31 23:59:59.9999"),R.isDateTime=function(I,U){return R.dateTime2ms(I,U)!==t};var p=90*o,m=3*r,w=5*n;function u(I,U,z,H,F){if((U||z||H||F)&&(I+=" "+y(U,2)+":"+y(z,2),(H||F)&&(I+=":"+y(H,2),F))){for(var N=4;F%10==0;)N-=1,F/=10;I+="."+y(F,N)}return I}R.ms2DateTime=function(I,U,z){if(typeof I!="number"||!(I>=A&&I<=k))return t;U||(U=0);var H,F,N,B,j,K,G=Math.floor(10*d(I+.05,1)),V=Math.round(I-G/10);if(g(z)){var W=Math.floor(V/o)+i,J=Math.floor(d(I,o));try{H=c.getComponentMethod("calendars","getCal")(z).fromJD(W).formatDate("yyyy-mm-dd")}catch{H=h("G%Y-%m-%d")(new Date(V))}if(H.charAt(0)==="-")for(;H.length<11;)H="-0"+H.substr(1);else for(;H.length<10;)H="0"+H;F=U<p?Math.floor(J/r):0,N=U<p?Math.floor(J%r/n):0,B=U<m?Math.floor(J%n/a):0,j=U<w?J%a*10+G:0}else K=new Date(V),H=h("%Y-%m-%d")(K),F=U<p?K.getUTCHours():0,N=U<p?K.getUTCMinutes():0,B=U<m?K.getUTCSeconds():0,j=U<w?10*K.getUTCMilliseconds()+G:0;return u(H,F,N,B,j)},R.ms2DateTimeLocal=function(I){if(!(I>=A+o&&I<=k-o))return t;var U=Math.floor(10*d(I+.05,1)),z=new Date(Math.round(I-U/10));return u(l("%Y-%m-%d")(z),z.getHours(),z.getMinutes(),z.getSeconds(),10*z.getUTCMilliseconds()+U)},R.cleanDate=function(I,U,z){if(I===t)return U;if(R.isJSDate(I)||typeof I=="number"&&isFinite(I)){if(g(z))return x.error("JS Dates and milliseconds are incompatible with world calendars",I),U;if(!(I=R.ms2DateTimeLocal(+I))&&U!==void 0)return U}else if(!R.isDateTime(I,z))return x.error("unrecognized date",I),U;return I};var S=/%\d?f/g,_=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function L(I,U,z,H){I=I.replace(S,function(N){var B=Math.min(+N.charAt(1)||6,6);return(U/1e3%1+2).toFixed(B).substr(2).replace(/0+$/,"")||"0"});var F=new Date(Math.floor(U+.05));if(I=I.replace(_,function(){return E[z("%q")(F)]}),g(H))try{I=c.getComponentMethod("calendars","worldCalFmt")(I,U,H)}catch{return"Invalid"}return z(I)(F)}var C=[59,59.9,59.99,59.999,59.9999];R.formatDate=function(I,U,z,H,F,N){if(F=g(F)&&F,!U)if(z==="y")U=N.year;else if(z==="m")U=N.month;else{if(z!=="d")return function(B,j){var K=d(B+.05,o),G=y(Math.floor(K/r),2)+":"+y(d(Math.floor(K/n),60),2);if(j!=="M"){T(j)||(j=0);var V=(100+Math.min(d(B/a,60),C[j])).toFixed(j).substr(1);j>0&&(V=V.replace(/0+$/,"").replace(/[\.]$/,"")),G+=":"+V}return G}(I,z)+`
`+L(N.dayMonthYear,I,H,F);U=N.dayMonth+`
`+N.year}return L(U,I,H,F)};var P=3*o;R.incrementMonth=function(I,U,z){z=g(z)&&z;var H=d(I,o);if(I=Math.round(I-H),z)try{var F=Math.round(I/o)+i,N=c.getComponentMethod("calendars","getCal")(z),B=N.fromJD(F);return U%12?N.add(B,U,"m"):N.add(B,U/12,"y"),(B.toJD()-i)*o+H}catch{x.error("invalid ms "+I+" in calendar "+z)}var j=new Date(I+P);return j.setUTCMonth(j.getUTCMonth()+U)+H-P},R.findExactDates=function(I,U){for(var z,H,F=0,N=0,B=0,j=0,K=g(U)&&c.getComponentMethod("calendars","getCal")(U),G=0;G<I.length;G++)if(H=I[G],T(H)){if(!(H%o))if(K)try{(z=K.fromJD(H/o+i)).day()===1?z.month()===1?F++:N++:B++}catch{}else(z=new Date(H)).getUTCDate()===1?z.getUTCMonth()===0?F++:N++:B++}else j++;B+=N+=F;var V=I.length-j;return{exactYears:F/V,exactMonths:N/V,exactDays:B/V}}},24401:function($,R,e){var A=e(39898),k=e(47769),l=e(35657),T=e(79576);function x(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function d(r,n,a){var i="plotly.js-style-"+r,c=document.getElementById(i);c||((c=document.createElement("style")).setAttribute("id",i),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var h=c.sheet;h.insertRule?h.insertRule(n+"{"+a+"}",0):h.addRule?h.addRule(n,a,0):k.warn("addStyleRule failed")}function s(r){var n=window.getComputedStyle(r,null),a=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function t(r){for(var n=[];o(r);)n.push(r),r=r.parentNode;return n}function o(r){return r&&(r instanceof Element||r instanceof HTMLElement)}$.exports={getGraphDiv:function(r){var n;if(typeof r=="string"){if((n=document.getElementById(r))===null)throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(r==null)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=A.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:x,addStyleRule:function(r,n){d("global",r,n)},addRelatedStyleRule:d,deleteRelatedStyleRule:function(r){var n="plotly.js-style-"+r,a=document.getElementById(n);a&&x(a)},getFullTransformMatrix:function(r){var n=t(r),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(i){var c=s(i);if(c){var h=l.convertCssMatrix(c);a=T.multiply(a,a,h)}}),a},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(r,n){return r&&n&&r.x===n.x&&r.y===n.y&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},11086:function($,R,e){var A=e(15398).EventEmitter,k={init:function(l){if(l._ev instanceof A)return l;var T=new A,x=new A;return l._ev=T,l._internalEv=x,l.on=T.on.bind(T),l.once=T.once.bind(T),l.removeListener=T.removeListener.bind(T),l.removeAllListeners=T.removeAllListeners.bind(T),l._internalOn=x.on.bind(x),l._internalOnce=x.once.bind(x),l._removeInternalListener=x.removeListener.bind(x),l._removeAllInternalListeners=x.removeAllListeners.bind(x),l.emit=function(d,s){typeof jQuery<"u"&&jQuery(l).trigger(d,s),T.emit(d,s),x.emit(d,s)},l},triggerHandler:function(l,T,x){var d,s;typeof jQuery<"u"&&(d=jQuery(l).triggerHandler(T,x));var t=l._ev;if(!t)return d;var o,r=t._events[T];if(!r)return d;function n(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[x]))):a.apply(t,[x])}for(r=Array.isArray(r)?r:[r],o=0;o<r.length-1;o++)n(r[o]);return s=n(r[o]),d!==void 0?d:s},purge:function(l){return delete l._ev,delete l.on,delete l.once,delete l.removeListener,delete l.removeAllListeners,delete l.emit,delete l._ev,delete l._internalEv,delete l._internalOn,delete l._internalOnce,delete l._removeInternalListener,delete l._removeAllInternalListeners,l}};$.exports=k},1426:function($,R,e){var A=e(41965),k=Array.isArray;function l(T,x,d,s){var t,o,r,n,a,i,c,h=T[0],f=T.length;if(f===2&&k(h)&&k(T[1])&&h.length===0){if(c=function(v,g){var y,p;for(y=0;y<v.length;y++){if((p=v[y])!==null&&typeof p=="object")return!1;p!==void 0&&(g[y]=p)}return!0}(T[1],h),c)return h;h.splice(0,h.length)}for(var b=1;b<f;b++)for(o in t=T[b])r=h[o],n=t[o],s&&k(n)?h[o]=n:x&&n&&(A(n)||(a=k(n)))?(a?(a=!1,i=r&&k(r)?r:[]):i=r&&A(r)?r:{},h[o]=l([i,n],x,d,s)):(n!==void 0||d)&&(h[o]=n);return h}R.extendFlat=function(){return l(arguments,!1,!1,!1)},R.extendDeep=function(){return l(arguments,!0,!1,!1)},R.extendDeepAll=function(){return l(arguments,!0,!0,!1)},R.extendDeepNoArrays=function(){return l(arguments,!0,!1,!0)}},75744:function($){$.exports=function(R){for(var e={},A=[],k=0,l=0;l<R.length;l++){var T=R[l];e[T]!==1&&(e[T]=1,A[k++]=T)}return A}},76756:function($){function R(A){return A.visible===!0}function e(A){var k=A[0].trace;return k.visible===!0&&k._length!==0}$.exports=function(A){for(var k,l=(k=A,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:R),T=[],x=0;x<A.length;x++){var d=A[x];l(d)&&T.push(d)}return T}},41327:function($,R,e){var A=e(39898),k=e(24138),l=e(30774),T=e(29261),x=e(85268),d=e(23389),s=e(47769),t=e(41965),o=e(65487),r=e(61082),n=Object.keys(k),a={"ISO-3":d,"USA-states":d,"country names":function(c){for(var h=0;h<n.length;h++){var f=n[h];if(new RegExp(k[f]).test(c.trim().toLowerCase()))return f}return s.log("Unrecognized country name: "+c+"."),!1}};function i(c){var h=c.geojson,f=window.PlotlyGeoAssets||{},b=typeof h=="string"?f[h]:h;return t(b)?b:(s.error("Oops ... something went wrong when fetching "+h),!1)}$.exports={locationToFeature:function(c,h,f){if(!h||typeof h!="string")return!1;var b,v,g,y=a[c](h);if(y){if(c==="USA-states")for(b=[],g=0;g<f.length;g++)(v=f[g]).properties&&v.properties.gu&&v.properties.gu==="USA"&&b.push(v);else b=f;for(g=0;g<b.length;g++)if((v=b[g]).id===y)return v;s.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var h,f,b,v,g=c.geometry,y=g.coordinates,p=c.id,m=[];function w(u){for(var S=0;S<u.length-1;S++)if(u[S][0]>0&&u[S+1][0]<0)return S;return null}switch(h=p==="RUS"||p==="FJI"?function(u){var S;if(w(u)===null)S=u;else for(S=new Array(u.length),v=0;v<u.length;v++)S[v]=[u[v][0]<0?u[v][0]+360:u[v][0],u[v][1]];m.push(r.tester(S))}:p==="ATA"?function(u){var S=w(u);if(S===null)return m.push(r.tester(u));var _=new Array(u.length+1),E=0;for(v=0;v<u.length;v++)v>S?_[E++]=[u[v][0]+360,u[v][1]]:v===S?(_[E++]=u[v],_[E++]=[u[v][0],-90]):_[E++]=u[v];var L=r.tester(_);L.pts.pop(),m.push(L)}:function(u){m.push(r.tester(u))},g.type){case"MultiPolygon":for(f=0;f<y.length;f++)for(b=0;b<y[f].length;b++)h(y[f][b]);break;case"Polygon":for(f=0;f<y.length;f++)h(y[f])}return m},getTraceGeojson:i,extractTraceFeature:function(c){var h=c[0].trace,f=i(h);if(!f)return!1;var b,v={},g=[];for(b=0;b<h._length;b++){var y=c[b];(y.loc||y.loc===0)&&(v[y.loc]=y)}function p(u){var S=o(u,h.featureidkey||"id").get(),_=v[S];if(_){var E=u.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var L={type:"Feature",id:S,geometry:E,properties:{}};L.properties.ct=function(C){var P,I=C.geometry;if(I.type==="MultiPolygon")for(var U=I.coordinates,z=0,H=0;H<U.length;H++){var F={type:"Polygon",coordinates:U[H]},N=l.default(F);N>z&&(z=N,P=F)}else P=I;return T.default(P).geometry.coordinates}(L),_.fIn=u,_.fOut=L,g.push(L)}else s.log(["Location",_.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete v[S]}switch(f.type){case"FeatureCollection":var m=f.features;for(b=0;b<m.length;b++)p(m[b]);break;case"Feature":p(f);break;default:return s.warn(["Invalid GeoJSON type",(f.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var w in v)s.log(["Location *"+w+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return g},fetchTraceGeoData:function(c){var h=window.PlotlyGeoAssets||{},f=[];function b(p){return new Promise(function(m,w){A.json(p,function(u,S){if(u){delete h[p];var _=u.status===404?'GeoJSON at URL "'+p+'" does not exist.':"Unexpected error while fetching from "+p;return w(new Error(_))}return h[p]=S,m(S)})})}function v(p){return new Promise(function(m,w){var u=0,S=setInterval(function(){return h[p]&&h[p]!=="pending"?(clearInterval(S),m(h[p])):u>100?(clearInterval(S),w("Unexpected error while fetching from "+p)):void u++},50)})}for(var g=0;g<c.length;g++){var y=c[g][0].trace.geojson;typeof y=="string"&&(h[y]?h[y]==="pending"&&f.push(v(y)):(h[y]="pending",f.push(b(y))))}return f},computeBbox:function(c){return x.default(c)}}},18214:function($,R,e){var A=e(50606).BADNUM;R.calcTraceToLineCoords=function(k){for(var l=k[0].trace.connectgaps,T=[],x=[],d=0;d<k.length;d++){var s=k[d].lonlat;s[0]!==A?x.push(s):!l&&x.length>0&&(T.push(x),x=[])}return x.length>0&&T.push(x),T},R.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},R.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var l=new Array(k.length),T=0;T<k.length;T++)l[T]=[k[T]];return{type:"MultiPolygon",coordinates:l}},R.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function($,R,e){var A,k,l,T=e(64872).mod;function x(s,t,o,r,n,a,i,c){var h=o-s,f=n-s,b=i-n,v=r-t,g=a-t,y=c-a,p=h*y-b*v;if(p===0)return null;var m=(f*y-b*g)/p,w=(f*v-h*g)/p;return w<0||w>1||m<0||m>1?null:{x:s+h*m,y:t+v*m}}function d(s,t,o,r,n){var a=r*s+n*t;if(a<0)return r*r+n*n;if(a>o){var i=r-s,c=n-t;return i*i+c*c}var h=r*t-n*s;return h*h/o}R.segmentsIntersect=x,R.segmentDistance=function(s,t,o,r,n,a,i,c){if(x(s,t,o,r,n,a,i,c))return 0;var h=o-s,f=r-t,b=i-n,v=c-a,g=h*h+f*f,y=b*b+v*v,p=Math.min(d(h,f,g,n-s,a-t),d(h,f,g,i-s,c-t),d(b,v,y,s-n,t-a),d(b,v,y,o-n,r-a));return Math.sqrt(p)},R.getTextLocation=function(s,t,o,r){if(s===k&&r===l||(A={},k=s,l=r),A[o])return A[o];var n=s.getPointAtLength(T(o-r/2,t)),a=s.getPointAtLength(T(o+r/2,t)),i=Math.atan((a.y-n.y)/(a.x-n.x)),c=s.getPointAtLength(T(o,t)),h={x:(4*c.x+n.x+a.x)/6,y:(4*c.y+n.y+a.y)/6,theta:i};return A[o]=h,h},R.clearLocationCache=function(){k=null},R.getVisibleSegment=function(s,t,o){var r,n,a=t.left,i=t.right,c=t.top,h=t.bottom,f=0,b=s.getTotalLength(),v=b;function g(p){var m=s.getPointAtLength(p);p===0?r=m:p===b&&(n=m);var w=m.x<a?a-m.x:m.x>i?m.x-i:0,u=m.y<c?c-m.y:m.y>h?m.y-h:0;return Math.sqrt(w*w+u*u)}for(var y=g(f);y;){if((f+=y+o)>v)return;y=g(f)}for(y=g(v);y;){if(f>(v-=y+o))return;y=g(v)}return{min:f,max:v,len:v-f,total:b,isClosed:f===0&&v===b&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},R.findPointOnPath=function(s,t,o,r){for(var n,a,i,c=(r=r||{}).pathLength||s.getTotalLength(),h=r.tolerance||.001,f=r.iterationLimit||30,b=s.getPointAtLength(0)[o]>s.getPointAtLength(c)[o]?-1:1,v=0,g=0,y=c;v<f;){if(n=(g+y)/2,i=(a=s.getPointAtLength(n))[o]-t,Math.abs(i)<h)return a;b*i>0?y=n:g=n,v++}return a}},81697:function($,R,e){var A=e(92770),k=e(84267),l=e(25075),T=e(21081),x=e(22399).defaultLine,d=e(73627).isArrayOrTypedArray,s=l(x);function t(n,a){var i=n;return i[3]*=a,i}function o(n){if(A(n))return s;var a=l(n);return a.length?a:s}function r(n){return A(n)?n:1}$.exports={formatColor:function(n,a,i){var c,h,f,b,v,g=n.color,y=d(g),p=d(a),m=T.extractOpts(n),w=[];if(c=m.colorscale!==void 0?T.makeColorScaleFuncFromTrace(n):o,h=y?function(S,_){return S[_]===void 0?s:l(c(S[_]))}:o,f=p?function(S,_){return S[_]===void 0?1:r(S[_])}:r,y||p)for(var u=0;u<i;u++)b=h(g,u),v=f(a,u),w[u]=t(b,v);else w=t(l(g),a);return w},parseColorScale:function(n){var a=T.extractOpts(n),i=a.colorscale;return a.reversescale&&(i=T.flipScale(a.colorscale)),i.map(function(c){var h=c[0],f=k(c[1]).toRgb();return{index:h,rgb:[f.r,f.g,f.b,f.a]}})}}},28984:function($,R,e){var A=e(23389);function k(l){return[l]}$.exports={keyFun:function(l){return l.key},repeat:k,descend:A,wrap:k,unwrap:function(l){return l[0]}}},23389:function($){$.exports=function(R){return R}},39240:function($){$.exports=function(R,e){if(!e)return R;var A=1/Math.abs(e),k=A>1?(A*R+A*e)/A:R+e,l=String(k).length;if(l>16){var T=String(e).length;if(l>=String(R).length+T){var x=parseFloat(k).toPrecision(12);x.indexOf("e+")===-1&&(k=+x)}}return k}},71828:function($,R,e){var A=e(39898),k=e(84096).g0,l=e(60721).WU,T=e(92770),x=e(50606),d=x.FP_SAFE,s=-d,t=x.BADNUM,o=$.exports={};o.adjustFormat=function(G){return!G||/^\d[.]\df/.test(G)||/[.]\d%/.test(G)?G:G==="0.f"?"~f":/^\d%/.test(G)?"~%":/^\ds/.test(G)?"~s":!/^[~,.0$]/.test(G)&&/[&fps]/.test(G)?"~"+G:G};var r={};o.warnBadFormat=function(G){var V=String(G);r[V]||(r[V]=1,o.warn('encountered bad format: "'+V+'"'))},o.noFormat=function(G){return String(G)},o.numberFormat=function(G){var V;try{V=l(o.adjustFormat(G))}catch{return o.warnBadFormat(G),o.noFormat}return V},o.nestedProperty=e(65487),o.keyedContainer=e(66636),o.relativeAttr=e(6962),o.isPlainObject=e(41965),o.toLogRange=e(58163),o.relinkPrivateKeys=e(51332);var n=e(73627);o.isTypedArray=n.isTypedArray,o.isArrayOrTypedArray=n.isArrayOrTypedArray,o.isArray1D=n.isArray1D,o.ensureArray=n.ensureArray,o.concat=n.concat,o.maxRowLength=n.maxRowLength,o.minRowLength=n.minRowLength;var a=e(64872);o.mod=a.mod,o.modHalf=a.modHalf;var i=e(96554);o.valObjectMeta=i.valObjectMeta,o.coerce=i.coerce,o.coerce2=i.coerce2,o.coerceFont=i.coerceFont,o.coercePattern=i.coercePattern,o.coerceHoverinfo=i.coerceHoverinfo,o.coerceSelectionMarkerOpacity=i.coerceSelectionMarkerOpacity,o.validate=i.validate;var c=e(41631);o.dateTime2ms=c.dateTime2ms,o.isDateTime=c.isDateTime,o.ms2DateTime=c.ms2DateTime,o.ms2DateTimeLocal=c.ms2DateTimeLocal,o.cleanDate=c.cleanDate,o.isJSDate=c.isJSDate,o.formatDate=c.formatDate,o.incrementMonth=c.incrementMonth,o.dateTick0=c.dateTick0,o.dfltRange=c.dfltRange,o.findExactDates=c.findExactDates,o.MIN_MS=c.MIN_MS,o.MAX_MS=c.MAX_MS;var h=e(65888);o.findBin=h.findBin,o.sorterAsc=h.sorterAsc,o.sorterDes=h.sorterDes,o.distinctVals=h.distinctVals,o.roundUp=h.roundUp,o.sort=h.sort,o.findIndexOfMin=h.findIndexOfMin,o.sortObjectKeys=e(78607);var f=e(80038);o.aggNums=f.aggNums,o.len=f.len,o.mean=f.mean,o.median=f.median,o.midRange=f.midRange,o.variance=f.variance,o.stdev=f.stdev,o.interp=f.interp;var b=e(35657);o.init2dArray=b.init2dArray,o.transposeRagged=b.transposeRagged,o.dot=b.dot,o.translationMatrix=b.translationMatrix,o.rotationMatrix=b.rotationMatrix,o.rotationXYMatrix=b.rotationXYMatrix,o.apply3DTransform=b.apply3DTransform,o.apply2DTransform=b.apply2DTransform,o.apply2DTransform2=b.apply2DTransform2,o.convertCssMatrix=b.convertCssMatrix,o.inverseTransformMatrix=b.inverseTransformMatrix;var v=e(26348);o.deg2rad=v.deg2rad,o.rad2deg=v.rad2deg,o.angleDelta=v.angleDelta,o.angleDist=v.angleDist,o.isFullCircle=v.isFullCircle,o.isAngleInsideSector=v.isAngleInsideSector,o.isPtInsideSector=v.isPtInsideSector,o.pathArc=v.pathArc,o.pathSector=v.pathSector,o.pathAnnulus=v.pathAnnulus;var g=e(99863);o.isLeftAnchor=g.isLeftAnchor,o.isCenterAnchor=g.isCenterAnchor,o.isRightAnchor=g.isRightAnchor,o.isTopAnchor=g.isTopAnchor,o.isMiddleAnchor=g.isMiddleAnchor,o.isBottomAnchor=g.isBottomAnchor;var y=e(87642);o.segmentsIntersect=y.segmentsIntersect,o.segmentDistance=y.segmentDistance,o.getTextLocation=y.getTextLocation,o.clearLocationCache=y.clearLocationCache,o.getVisibleSegment=y.getVisibleSegment,o.findPointOnPath=y.findPointOnPath;var p=e(1426);o.extendFlat=p.extendFlat,o.extendDeep=p.extendDeep,o.extendDeepAll=p.extendDeepAll,o.extendDeepNoArrays=p.extendDeepNoArrays;var m=e(47769);o.log=m.log,o.warn=m.warn,o.error=m.error;var w=e(30587);o.counterRegex=w.counter;var u=e(79990);o.throttle=u.throttle,o.throttleDone=u.done,o.clearThrottle=u.clear;var S=e(24401);function _(G){var V={};for(var W in G)for(var J=G[W],X=0;X<J.length;X++)V[J[X]]=+W;return V}o.getGraphDiv=S.getGraphDiv,o.isPlotDiv=S.isPlotDiv,o.removeElement=S.removeElement,o.addStyleRule=S.addStyleRule,o.addRelatedStyleRule=S.addRelatedStyleRule,o.deleteRelatedStyleRule=S.deleteRelatedStyleRule,o.getFullTransformMatrix=S.getFullTransformMatrix,o.getElementTransformMatrix=S.getElementTransformMatrix,o.getElementAndAncestors=S.getElementAndAncestors,o.equalDomRects=S.equalDomRects,o.clearResponsive=e(86367),o.preserveDrawingBuffer=e(45142),o.makeTraceGroups=e(77310),o._=e(15867),o.notifier=e(75046),o.filterUnique=e(75744),o.filterVisible=e(76756),o.pushUnique=e(75138),o.increment=e(39240),o.cleanNumber=e(95218),o.ensureNumber=function(G){return T(G)?(G=Number(G))>d||G<s?t:G:t},o.isIndex=function(G,V){return!(V!==void 0&&G>=V)&&T(G)&&G>=0&&G%1==0},o.noop=e(64213),o.identity=e(23389),o.repeat=function(G,V){for(var W=new Array(V),J=0;J<V;J++)W[J]=G;return W},o.swapAttrs=function(G,V,W,J){W||(W="x"),J||(J="y");for(var X=0;X<V.length;X++){var ee=V[X],re=o.nestedProperty(G,ee.replace("?",W)),ie=o.nestedProperty(G,ee.replace("?",J)),se=re.get();re.set(ie.get()),ie.set(se)}},o.raiseToTop=function(G){G.parentNode.appendChild(G)},o.cancelTransition=function(G){return G.transition().duration(0)},o.constrain=function(G,V,W){return V>W?Math.max(W,Math.min(V,G)):Math.max(V,Math.min(W,G))},o.bBoxIntersect=function(G,V,W){return W=W||0,G.left<=V.right+W&&V.left<=G.right+W&&G.top<=V.bottom+W&&V.top<=G.bottom+W},o.simpleMap=function(G,V,W,J,X){for(var ee=G.length,re=new Array(ee),ie=0;ie<ee;ie++)re[ie]=V(G[ie],W,J,X);return re},o.randstr=function G(V,W,J,X){if(J||(J=16),W===void 0&&(W=24),W<=0)return"0";var ee,re,ie=Math.log(Math.pow(2,W))/Math.log(J),se="";for(ee=2;ie===1/0;ee*=2)ie=Math.log(Math.pow(2,W/ee))/Math.log(J)*ee;var fe=ie-Math.floor(ie);for(ee=0;ee<Math.floor(ie);ee++)se=Math.floor(Math.random()*J).toString(J)+se;fe&&(re=Math.pow(J,fe),se=Math.floor(Math.random()*re).toString(J)+se);var ye=parseInt(se,J);return V&&V[se]||ye!==1/0&&ye>=Math.pow(2,W)?X>10?(o.warn("randstr failed uniqueness"),se):G(V,W,J,(X||0)+1):se},o.OptionControl=function(G,V){G||(G={}),V||(V="opt");var W={optionList:[],_newoption:function(J){J[V]=G,W[J.name]=J,W.optionList.push(J)}};return W["_"+V]=G,W},o.smooth=function(G,V){if((V=Math.round(V)||0)<2)return G;var W,J,X,ee,re=G.length,ie=2*re,se=2*V-1,fe=new Array(se),ye=new Array(re);for(W=0;W<se;W++)fe[W]=(1-Math.cos(Math.PI*(W+1)/V))/(2*V);for(W=0;W<re;W++){for(ee=0,J=0;J<se;J++)(X=W+J+1-V)<-re?X-=ie*Math.round(X/ie):X>=ie&&(X-=ie*Math.floor(X/ie)),X<0?X=-1-X:X>=re&&(X=ie-1-X),ee+=G[X]*fe[J];ye[W]=ee}return ye},o.syncOrAsync=function(G,V,W){var J;function X(){return o.syncOrAsync(G,V,W)}for(;G.length;)if((J=(0,G.splice(0,1)[0])(V))&&J.then)return J.then(X);return W&&W(V)},o.stripTrailingSlash=function(G){return G.substr(-1)==="/"?G.substr(0,G.length-1):G},o.noneOrAll=function(G,V,W){if(G){var J,X=!1,ee=!0;for(J=0;J<W.length;J++)G[W[J]]!=null?X=!0:ee=!1;if(X&&!ee)for(J=0;J<W.length;J++)G[W[J]]=V[W[J]]}},o.mergeArray=function(G,V,W,J){var X=typeof J=="function";if(o.isArrayOrTypedArray(G))for(var ee=Math.min(G.length,V.length),re=0;re<ee;re++){var ie=G[re];V[re][W]=X?J(ie):ie}},o.mergeArrayCastPositive=function(G,V,W){return o.mergeArray(G,V,W,function(J){var X=+J;return isFinite(X)&&X>0?X:0})},o.fillArray=function(G,V,W,J){if(J=J||o.identity,o.isArrayOrTypedArray(G))for(var X=0;X<V.length;X++)V[X][W]=J(G[X])},o.castOption=function(G,V,W,J){J=J||o.identity;var X=o.nestedProperty(G,W).get();return o.isArrayOrTypedArray(X)?Array.isArray(V)&&o.isArrayOrTypedArray(X[V[0]])?J(X[V[0]][V[1]]):J(X[V]):X},o.extractOption=function(G,V,W,J){if(W in G)return G[W];var X=o.nestedProperty(V,J).get();return Array.isArray(X)?void 0:X},o.tagSelected=function(G,V,W){var J,X,ee=V.selectedpoints,re=V._indexToPoints;re&&(J=_(re));for(var ie=0;ie<ee.length;ie++){var se=ee[ie];if(o.isIndex(se)||o.isArrayOrTypedArray(se)&&o.isIndex(se[0])&&o.isIndex(se[1])){var fe=J?J[se]:se,ye=W?W[fe]:fe;(X=ye)!==void 0&&X<G.length&&(G[ye].selected=1)}}},o.selIndices2selPoints=function(G){var V=G.selectedpoints,W=G._indexToPoints;if(W){for(var J=_(W),X=[],ee=0;ee<V.length;ee++){var re=V[ee];if(o.isIndex(re)){var ie=J[re];o.isIndex(ie)&&X.push(ie)}}return X}return V},o.getTargetArray=function(G,V){var W=V.target;if(typeof W=="string"&&W){var J=o.nestedProperty(G,W).get();return!!Array.isArray(J)&&J}return!!Array.isArray(W)&&W},o.minExtend=function(G,V){var W={};typeof V!="object"&&(V={});var J,X,ee,re=Object.keys(G);for(J=0;J<re.length;J++)ee=G[X=re[J]],X.charAt(0)!=="_"&&typeof ee!="function"&&(X==="module"?W[X]=ee:Array.isArray(ee)?W[X]=X==="colorscale"?ee.slice():ee.slice(0,3):o.isTypedArray(ee)?W[X]=ee.subarray(0,3):W[X]=ee&&typeof ee=="object"?o.minExtend(G[X],V[X]):ee);for(re=Object.keys(V),J=0;J<re.length;J++)typeof(ee=V[X=re[J]])=="object"&&X in W&&typeof W[X]=="object"||(W[X]=ee);return W},o.titleCase=function(G){return G.charAt(0).toUpperCase()+G.substr(1)},o.containsAny=function(G,V){for(var W=0;W<V.length;W++)if(G.indexOf(V[W])!==-1)return!0;return!1},o.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;o.isSafari=function(){return E.test(window.navigator.userAgent)};var L=/iPad|iPhone|iPod/;o.isIOS=function(){return L.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;o.getFirefoxVersion=function(){var G=C.exec(window.navigator.userAgent);if(G&&G.length===2){var V=parseInt(G[1]);if(!isNaN(V))return V}return null},o.isD3Selection=function(G){return G instanceof A.selection},o.ensureSingle=function(G,V,W,J){var X=G.select(V+(W?"."+W:""));if(X.size())return X;var ee=G.append(V);return W&&ee.classed(W,!0),J&&ee.call(J),ee},o.ensureSingleById=function(G,V,W,J){var X=G.select(V+"#"+W);if(X.size())return X;var ee=G.append(V).attr("id",W);return J&&ee.call(J),ee},o.objectFromPath=function(G,V){for(var W,J=G.split("."),X=W={},ee=0;ee<J.length;ee++){var re=J[ee],ie=null,se=J[ee].match(/(.*)\[([0-9]+)\]/);se?(re=se[1],ie=se[2],W=W[re]=[],ee===J.length-1?W[ie]=V:W[ie]={},W=W[ie]):(ee===J.length-1?W[re]=V:W[re]={},W=W[re])}return X};var P=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;o.expandObjectPaths=function(G){var V,W,J,X,ee,re,ie;if(typeof G=="object"&&!Array.isArray(G))for(W in G)G.hasOwnProperty(W)&&((V=W.match(P))?(X=G[W],J=V[1],delete G[W],G[J]=o.extendDeepNoArrays(G[J]||{},o.objectFromPath(W,o.expandObjectPaths(X))[J])):(V=W.match(I))?(X=G[W],J=V[1],ee=parseInt(V[2]),delete G[W],G[J]=G[J]||[],V[3]==="."?(ie=V[4],re=G[J][ee]=G[J][ee]||{},o.extendDeepNoArrays(re,o.objectFromPath(ie,o.expandObjectPaths(X)))):G[J][ee]=o.expandObjectPaths(X)):G[W]=o.expandObjectPaths(G[W]));return G},o.numSeparate=function(G,V,W){if(W||(W=!1),typeof V!="string"||V.length===0)throw new Error("Separator string required for formatting!");typeof G=="number"&&(G=String(G));var J=/(\d+)(\d{3})/,X=V.charAt(0),ee=V.charAt(1),re=G.split("."),ie=re[0],se=re.length>1?X+re[1]:"";if(ee&&(re.length>1||ie.length>4||W))for(;J.test(ie);)ie=ie.replace(J,"$1"+ee+"$2");return ie+se},o.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var U=/^\w*$/;o.templateString=function(G,V){var W={};return G.replace(o.TEMPLATE_STRING_REGEX,function(J,X){var ee;return U.test(X)?ee=V[X]:(W[X]=W[X]||o.nestedProperty(V,X).get,ee=W[X]()),o.isValidTextValue(ee)?ee:""})};var z={max:10,count:0,name:"hovertemplate"};o.hovertemplateString=function(){return N.apply(z,arguments)};var H={max:10,count:0,name:"texttemplate"};o.texttemplateString=function(){return N.apply(H,arguments)};var F=/^[:|\|]/;function N(G,V,W){var J=this,X=arguments;V||(V={});var ee={};return G.replace(o.TEMPLATE_STRING_REGEX,function(re,ie,se){var fe,ye,ge,he=ie==="_xother"||ie==="_yother",ve=ie==="_xother_"||ie==="_yother_",Ie=ie==="xother_"||ie==="yother_",xe=ie==="xother"||ie==="yother"||he||Ie||ve,Ae=ie;if((he||ve)&&(Ae=Ae.substring(1)),(Ie||ve)&&(Ae=Ae.substring(0,Ae.length-1)),xe){if((fe=V[Ae])===void 0)return""}else for(ge=3;ge<X.length;ge++)if(ye=X[ge]){if(ye.hasOwnProperty(Ae)){fe=ye[Ae];break}if(U.test(Ae)||(fe=o.nestedProperty(ye,Ae).get(),(fe=ee[Ae]||o.nestedProperty(ye,Ae).get())&&(ee[Ae]=fe)),fe!==void 0)break}if(fe===void 0&&J)return J.count<J.max&&(o.warn("Variable '"+Ae+"' in "+J.name+" could not be found!"),fe=re),J.count===J.max&&o.warn("Too many "+J.name+" warnings - additional warnings will be suppressed"),J.count++,re;if(se){var Se;if(se[0]===":"&&(fe=(Se=W?W.numberFormat:o.numberFormat)(se.replace(F,""))(fe)),se[0]==="|"){Se=W?W.timeFormat:k;var Te=o.dateTime2ms(fe);fe=o.formatDate(Te,se.replace(F,""),!1,Se)}}else{var Q=Ae+"Label";V.hasOwnProperty(Q)&&(fe=V[Q])}return xe&&(fe="("+fe+")",(he||ve)&&(fe=" "+fe),(Ie||ve)&&(fe+=" ")),fe})}o.subplotSort=function(G,V){for(var W=Math.min(G.length,V.length)+1,J=0,X=0,ee=0;ee<W;ee++){var re=G.charCodeAt(ee)||0,ie=V.charCodeAt(ee)||0,se=re>=48&&re<=57,fe=ie>=48&&ie<=57;if(se&&(J=10*J+re-48),fe&&(X=10*X+ie-48),!se||!fe){if(J!==X)return J-X;if(re!==ie)return re-ie}}return X-J};var B=2e9;o.seedPseudoRandom=function(){B=2e9},o.pseudoRandom=function(){var G=B;return B=(69069*B+1)%4294967296,Math.abs(B-G)<429496729?o.pseudoRandom():B/4294967296},o.fillText=function(G,V,W){var J=Array.isArray(W)?function(re){W.push(re)}:function(re){W.text=re},X=o.extractOption(G,V,"htx","hovertext");if(o.isValidTextValue(X))return J(X);var ee=o.extractOption(G,V,"tx","text");return o.isValidTextValue(ee)?J(ee):void 0},o.isValidTextValue=function(G){return G||G===0},o.formatPercent=function(G,V){V=V||0;for(var W=(Math.round(100*G*Math.pow(10,V))*Math.pow(.1,V)).toFixed(V)+"%",J=0;J<V;J++)W.indexOf(".")!==-1&&(W=(W=W.replace("0%","%")).replace(".%","%"));return W},o.isHidden=function(G){var V=window.getComputedStyle(G).display;return!V||V==="none"},o.strTranslate=function(G,V){return G||V?"translate("+G+","+V+")":""},o.strRotate=function(G){return G?"rotate("+G+")":""},o.strScale=function(G){return G!==1?"scale("+G+")":""},o.getTextTransform=function(G){var V=G.noCenter,W=G.textX,J=G.textY,X=G.targetX,ee=G.targetY,re=G.anchorX||0,ie=G.anchorY||0,se=G.rotate,fe=G.scale;return fe?fe>1&&(fe=1):fe=0,o.strTranslate(X-fe*(W+re),ee-fe*(J+ie))+o.strScale(fe)+(se?"rotate("+se+(V?"":" "+W+" "+J)+")":"")},o.setTransormAndDisplay=function(G,V){G.attr("transform",o.getTextTransform(V)),G.style("display",V.scale?null:"none")},o.ensureUniformFontSize=function(G,V){var W=o.extendFlat({},V);return W.size=Math.max(V.size,G._fullLayout.uniformtext.minsize||0),W},o.join2=function(G,V,W){var J=G.length;return J>1?G.slice(0,-1).join(V)+W+G[J-1]:G.join(V)},o.bigFont=function(G){return Math.round(1.2*G)};var j=o.getFirefoxVersion(),K=j!==null&&j<86;o.getPositionFromD3Event=function(){return K?[A.event.layerX,A.event.layerY]:[A.event.offsetX,A.event.offsetY]}},41965:function($){$.exports=function(R){return window&&window.process&&window.process.versions?Object.prototype.toString.call(R)==="[object Object]":Object.prototype.toString.call(R)==="[object Object]"&&Object.getPrototypeOf(R).hasOwnProperty("hasOwnProperty")}},66636:function($,R,e){var A=e(65487),k=/^\w*$/;$.exports=function(l,T,x,d){var s,t,o;x=x||"name",d=d||"value";var r={};T&&T.length?(o=A(l,T),t=o.get()):t=l,T=T||"";var n={};if(t)for(s=0;s<t.length;s++)n[t[s][x]]=s;var a=k.test(d),i={set:function(c,h){var f=h===null?4:0;if(!t){if(!o||f===4)return;t=[],o.set(t)}var b=n[c];if(b===void 0){if(f===4)return;f|=3,b=t.length,n[c]=b}else h!==(a?t[b][d]:A(t[b],d).get())&&(f|=2);var v=t[b]=t[b]||{};return v[x]=c,a?v[d]=h:A(v,d).set(h),h!==null&&(f&=-5),r[b]=r[b]|f,i},get:function(c){if(t){var h=n[c];return h===void 0?void 0:a?t[h][d]:A(t[h],d).get()}},rename:function(c,h){var f=n[c];return f===void 0||(r[f]=1|r[f],n[h]=f,delete n[c],t[f][x]=h),i},remove:function(c){var h=n[c];if(h===void 0)return i;var f=t[h];if(Object.keys(f).length>2)return r[h]=2|r[h],i.set(c,null);if(a){for(s=h;s<t.length;s++)r[s]=3|r[s];for(s=h;s<t.length;s++)n[t[s][x]]--;t.splice(h,1),delete n[c]}else A(f,d).set(null),r[h]=6|r[h];return i},constructUpdate:function(){for(var c,h,f={},b=Object.keys(r),v=0;v<b.length;v++)h=b[v],c=T+"["+h+"]",t[h]?(1&r[h]&&(f[c+"."+x]=t[h][x]),2&r[h]&&(f[c+"."+d]=a?4&r[h]?null:t[h][d]:4&r[h]?null:A(t[h],d).get())):f[c]=null;return f}};return i}},15867:function($,R,e){var A=e(73972);$.exports=function(k,l){for(var T=k._context.locale,x=0;x<2;x++){for(var d=k._context.locales,s=0;s<2;s++){var t=(d[T]||{}).dictionary;if(t){var o=t[l];if(o)return o}d=A.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return l}},47769:function($,R,e){var A=e(72075).dfltConfig,k=e(75046),l=$.exports={};l.log=function(){var T;if(A.logging>1){var x=["LOG:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.trace.apply(console,x)}if(A.notifyOnLogging>1){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"long")}},l.warn=function(){var T;if(A.logging>0){var x=["WARN:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.trace.apply(console,x)}if(A.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"stick")}},l.error=function(){var T;if(A.logging>0){var x=["ERROR:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.error.apply(console,x)}if(A.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);k(d.join("<br>"),"stick")}}},77310:function($,R,e){var A=e(39898);$.exports=function(k,l,T){var x=k.selectAll("g."+T.replace(/\s/g,".")).data(l,function(s){return s[0].trace.uid});x.exit().remove(),x.enter().append("g").attr("class",T),x.order();var d=k.classed("rangeplot")?"nodeRangePlot3":"node3";return x.each(function(s){s[0][d]=A.select(this)}),x}},35657:function($,R,e){var A=e(79576);R.init2dArray=function(k,l){for(var T=new Array(k),x=0;x<k;x++)T[x]=new Array(l);return T},R.transposeRagged=function(k){var l,T,x=0,d=k.length;for(l=0;l<d;l++)x=Math.max(x,k[l].length);var s=new Array(x);for(l=0;l<x;l++)for(s[l]=new Array(d),T=0;T<d;T++)s[l][T]=k[T][l];return s},R.dot=function(k,l){if(!k.length||!l.length||k.length!==l.length)return null;var T,x,d=k.length;if(k[0].length)for(T=new Array(d),x=0;x<d;x++)T[x]=R.dot(k[x],l);else if(l[0].length){var s=R.transposeRagged(l);for(T=new Array(s.length),x=0;x<s.length;x++)T[x]=R.dot(k,s[x])}else for(T=0,x=0;x<d;x++)T+=k[x]*l[x];return T},R.translationMatrix=function(k,l){return[[1,0,k],[0,1,l],[0,0,1]]},R.rotationMatrix=function(k){var l=k*Math.PI/180;return[[Math.cos(l),-Math.sin(l),0],[Math.sin(l),Math.cos(l),0],[0,0,1]]},R.rotationXYMatrix=function(k,l,T){return R.dot(R.dot(R.translationMatrix(l,T),R.rotationMatrix(k)),R.translationMatrix(-l,-T))},R.apply3DTransform=function(k){return function(){var l=arguments,T=arguments.length===1?l[0]:[l[0],l[1],l[2]||0];return R.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},R.apply2DTransform=function(k){return function(){var l=arguments;l.length===3&&(l=l[0]);var T=arguments.length===1?l[0]:[l[0],l[1]];return R.dot(k,[T[0],T[1],1]).slice(0,2)}},R.apply2DTransform2=function(k){var l=R.apply2DTransform(k);return function(T){return l(T.slice(0,2)).concat(l(T.slice(2,4)))}},R.convertCssMatrix=function(k){if(k){var l=k.length;if(l===16)return k;if(l===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},R.inverseTransformMatrix=function(k){var l=[];return A.invert(l,k),[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}},64872:function($){$.exports={mod:function(R,e){var A=R%e;return A<0?A+e:A},modHalf:function(R,e){return Math.abs(R)>e/2?R-Math.round(R/e)*e:R}}},65487:function($,R,e){var A=e(92770),k=e(73627).isArrayOrTypedArray;function l(r,n){return function(){var a,i,c,h,f,b=r;for(h=0;h<n.length-1;h++){if((a=n[h])===-1){for(i=!0,c=[],f=0;f<b.length;f++)c[f]=l(b[f],n.slice(h+1))(),c[f]!==c[0]&&(i=!1);return i?c[0]:c}if(typeof a=="number"&&!k(b)||typeof(b=b[a])!="object"||b===null)return}if(typeof b=="object"&&b!==null&&(c=b[n[h]])!==null)return c}}$.exports=function(r,n){if(A(n))n=String(n);else if(typeof n!="string"||n.substr(n.length-4)==="[-1]")throw"bad property string";for(var a,i,c,h=0,f=n.split(".");h<f.length;){if(a=String(f[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])f[h]=a[1];else{if(h!==0)throw"bad property string";f.splice(0,1)}for(i=a[2].substr(1,a[2].length-2).split("]["),c=0;c<i.length;c++)h++,f.splice(h,0,Number(i[c]))}h++}return typeof r!="object"?function(b,v,g){return{set:function(){throw"bad container"},get:function(){},astr:v,parts:g,obj:b}}(r,n,f):{set:d(r,f,n),get:l(r,f),astr:n,parts:f,obj:r}};var T=/(^|\.)args\[/;function x(r,n){return r===void 0||r===null&&!n.match(T)}function d(r,n,a){return function(i){var c,h,f=r,b="",v=x(i,a);for(h=0;h<n.length-1;h++){if(typeof(c=n[h])=="number"&&!k(f))throw"array index but container is not an array";if(c===-1){if(v=!t(f,n.slice(h+1),i,a))break;return}if(!o(f,c,n[h+1],v))break;if(typeof(f=f[c])!="object"||f===null)throw"container is not an object";b=s(b,c)}if(v){if(h===n.length-1&&(delete f[n[h]],Array.isArray(f)&&+n[h]==f.length-1))for(;f.length&&f[f.length-1]===void 0;)f.pop()}else f[n[h]]=i}}function s(r,n){var a=n;return A(n)?a="["+n+"]":r&&(a="."+n),r+a}function t(r,n,a,i){var c,h=k(a),f=!0,b=a,v=i.replace("-1",0),g=!h&&x(a,v),y=n[0];for(c=0;c<r.length;c++)v=i.replace("-1",c),h&&(g=x(b=a[c%a.length],v)),g&&(f=!1),o(r,c,y,g)&&d(r[c],n,i.replace("-1",c))(b);return f}function o(r,n,a,i){if(r[n]===void 0){if(i)return!1;r[n]=typeof a=="number"?[]:{}}return!0}},64213:function($){$.exports=function(){}},75046:function($,R,e){var A=e(39898),k=e(92770),l=[];$.exports=function(T,x){if(l.indexOf(T)===-1){l.push(T);var d=1e3;k(x)?d=x:x==="long"&&(d=3e3);var s=A.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var r=A.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(t)});for(var n=r.append("p"),a=o.split(/<br\s*\/?>/g),i=0;i<a.length;i++)i&&n.append("br"),n.append("span").text(a[i]);x==="stick"?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(d).call(t)})}function t(o){o.duration(700).style("opacity",0).each("end",function(r){var n=l.indexOf(r);n!==-1&&l.splice(n,1),A.select(this).remove()})}}},39918:function($,R,e){var A=e(6964),k="data-savedcursor";$.exports=function(l,T){var x=l.attr(k);if(T){if(!x){for(var d=(l.attr("class")||"").split(" "),s=0;s<d.length;s++){var t=d[s];t.indexOf("cursor-")===0&&l.attr(k,t.substr(7)).classed(t,!1)}l.attr(k)||l.attr(k,"!!")}A(l,T)}else x&&(l.attr(k,null),x==="!!"?A(l):A(l,x))}},61082:function($,R,e){var A=e(35657).dot,k=e(50606).BADNUM,l=$.exports={};l.tester=function(T){var x,d=T.slice(),s=d[0][0],t=s,o=d[0][1],r=o;for(d[d.length-1][0]===d[0][0]&&d[d.length-1][1]===d[0][1]||d.push(d[0]),x=1;x<d.length;x++)s=Math.min(s,d[x][0]),t=Math.max(t,d[x][0]),o=Math.min(o,d[x][1]),r=Math.max(r,d[x][1]);var n,a=!1;d.length===5&&(d[0][0]===d[1][0]?d[2][0]===d[3][0]&&d[0][1]===d[3][1]&&d[1][1]===d[2][1]&&(a=!0,n=function(h){return h[0]===d[0][0]}):d[0][1]===d[1][1]&&d[2][1]===d[3][1]&&d[0][0]===d[3][0]&&d[1][0]===d[2][0]&&(a=!0,n=function(h){return h[1]===d[0][1]}));var i=!0,c=d[0];for(x=1;x<d.length;x++)if(c[0]!==d[x][0]||c[1]!==d[x][1]){i=!1;break}return{xmin:s,xmax:t,ymin:o,ymax:r,pts:d,contains:a?function(h,f){var b=h[0],v=h[1];return!(b===k||b<s||b>t||v===k||v<o||v>r||f&&n(h))}:function(h,f){var b=h[0],v=h[1];if(b===k||b<s||b>t||v===k||v<o||v>r)return!1;var g,y,p,m,w,u=d.length,S=d[0][0],_=d[0][1],E=0;for(g=1;g<u;g++)if(y=S,p=_,S=d[g][0],_=d[g][1],!(b<(m=Math.min(y,S))||b>Math.max(y,S)||v>Math.max(p,_)))if(v<Math.min(p,_))b!==m&&E++;else{if(v===(w=S===y?v:p+(b-y)*(_-p)/(S-y)))return g!==1||!f;v<=w&&b!==m&&E++}return E%2==1},isRect:a,degenerate:i}},l.isSegmentBent=function(T,x,d,s){var t,o,r,n=T[x],a=[T[d][0]-n[0],T[d][1]-n[1]],i=A(a,a),c=Math.sqrt(i),h=[-a[1]/c,a[0]/c];for(t=x+1;t<d;t++)if(o=[T[t][0]-n[0],T[t][1]-n[1]],(r=A(o,a))<0||r>i||Math.abs(A(o,h))>s)return!0;return!1},l.filter=function(T,x){var d=[T[0]],s=0,t=0;function o(r){T.push(r);var n=d.length,a=s;d.splice(t+1);for(var i=a+1;i<T.length;i++)(i===T.length-1||l.isSegmentBent(T,a,i+1,x))&&(d.push(T[i]),d.length<n-2&&(s=i,t=d.length-1),a=i)}return T.length>1&&o(T.pop()),{addPt:o,raw:T,filtered:d}}},79749:function($,R,e){var A=e(58617),k=e(98580);$.exports=function(l,T,x){var d=l._fullLayout,s=!0;return d._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(x);else if(!t.pick||d._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:l._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:x||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(o){l&&l.emit&&l.emit("plotly_webglcontextlost",{event:o,layer:t.key})},!1)}}),s||A({container:d._glcontainer.node()}),s}},45142:function($,R,e){var A=e(92770),k=e(15539);$.exports=function(l){var T;if(typeof(T=l&&l.hasOwnProperty("userAgent")?l.userAgent:function(){var n;return typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),n}())!="string")return!0;var x=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!x){for(var d=T.split(" "),s=1;s<d.length;s++)if(d[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var o=d[t];if(o.substr(0,8)==="Version/"){var r=o.substr(8).split(".")[0];if(A(r)&&(r=+r),r>=13)return!0}}}return x}},75138:function($){$.exports=function(R,e){if(e instanceof RegExp){for(var A=e.toString(),k=0;k<R.length;k++)if(R[k]instanceof RegExp&&R[k].toString()===A)return R;R.push(e)}else!e&&e!==0||R.indexOf(e)!==-1||R.push(e);return R}},10847:function($,R,e){var A=e(71828),k=e(72075).dfltConfig,l={add:function(T,x,d,s,t){var o,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,o),T.undoQueue.index+=1):o=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(x),o.undo.args.unshift(d),o.redo.calls.push(s),o.redo.args.push(t)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var x,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,x=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<x.undo.calls.length;d++)l.plotDo(T,x.undo.calls[d],x.undo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var x,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(x=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<x.redo.calls.length;d++)l.plotDo(T,x.redo.calls[d],x.redo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,x,d){T.autoplay=!0,d=function(s,t){for(var o,r=[],n=0;n<t.length;n++)o=t[n],r[n]=o===s?o:typeof o=="object"?Array.isArray(o)?A.extendDeep([],o):A.extendDeepAll({},o):o;return r}(T,d),x.apply(null,d)}};$.exports=l},30587:function($,R){R.counter=function(e,A,k,l){var T=(A||"")+(k?"":"$"),x=l===!1?"":"^";return e==="xy"?new RegExp(x+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(x+e+"([2-9]|[1-9][0-9]+)?"+T)}},6962:function($){var R=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;$.exports=function(A,k){for(;k;){var l=A.match(R);if(l)A=l[1];else{if(!A.match(e))throw new Error("bad relativeAttr call:"+[A,k]);A=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return A&&k.charAt(0)!=="["?A+"."+k:A+k}},51332:function($,R,e){var A=e(73627).isArrayOrTypedArray,k=e(41965);$.exports=function l(T,x){for(var d in x){var s=x[d],t=T[d];if(t!==s)if(d.charAt(0)==="_"||typeof s=="function"){if(d in T)continue;T[d]=s}else if(A(s)&&A(t)&&k(s[0])){if(d==="customdata"||d==="ids")continue;for(var o=Math.min(s.length,t.length),r=0;r<o;r++)t[r]!==s[r]&&k(s[r])&&k(t[r])&&l(t[r],s[r])}else k(s)&&k(t)&&(l(t,s),Object.keys(t).length||delete T[d])}}},65888:function($,R,e){var A=e(92770),k=e(47769),l=e(23389),T=e(50606).BADNUM,x=1e-9;function d(r,n){return r<n}function s(r,n){return r<=n}function t(r,n){return r>n}function o(r,n){return r>=n}R.findBin=function(r,n,a){if(A(n.start))return a?Math.ceil((r-n.start)/n.size-x)-1:Math.floor((r-n.start)/n.size+x);var i,c,h=0,f=n.length,b=0,v=f>1?(n[f-1]-n[0])/(f-1):1;for(c=v>=0?a?d:s:a?o:t,r+=v*x*(a?-1:1)*(v>=0?1:-1);h<f&&b++<100;)c(n[i=Math.floor((h+f)/2)],r)?h=i+1:f=i;return b>90&&k.log("Long binary search..."),h-1},R.sorterAsc=function(r,n){return r-n},R.sorterDes=function(r,n){return n-r},R.distinctVals=function(r){var n,a=r.slice();for(a.sort(R.sorterAsc),n=a.length-1;n>-1&&a[n]===T;n--);for(var i,c=a[n]-a[0]||1,h=c/(n||1)/1e4,f=[],b=0;b<=n;b++){var v=a[b],g=v-i;i===void 0?(f.push(v),i=v):g>h&&(c=Math.min(c,g),f.push(v),i=v)}return{vals:f,minDiff:c}},R.roundUp=function(r,n,a){for(var i,c=0,h=n.length-1,f=0,b=a?0:1,v=a?1:0,g=a?Math.ceil:Math.floor;c<h&&f++<100;)n[i=g((c+h)/2)]<=r?c=i+b:h=i-v;return n[c]},R.sort=function(r,n){for(var a=0,i=0,c=1;c<r.length;c++){var h=n(r[c],r[c-1]);if(h<0?a=1:h>0&&(i=1),a&&i)return r.sort(n)}return i?r:r.reverse()},R.findIndexOfMin=function(r,n){n=n||l;for(var a,i=1/0,c=0;c<r.length;c++){var h=n(r[c]);h<i&&(i=h,a=c)}return a}},6964:function($){$.exports=function(R,e){(R.attr("class")||"").split(" ").forEach(function(A){A.indexOf("cursor-")===0&&R.classed(A,!1)}),e&&R.classed("cursor-"+e,!0)}},58617:function($,R,e){var A=e(7901),k=function(){};$.exports=function(l){for(var T in l)typeof l[T]=="function"&&(l[T]=k);l.destroy=function(){l.container.parentNode.removeChild(l.container)};var x=document.createElement("div");x.className="no-webgl",x.style.cursor="pointer",x.style.fontSize="24px",x.style.color=A.defaults[0],x.style.position="absolute",x.style.left=x.style.top="0px",x.style.width=x.style.height="100%",x.style["background-color"]=A.lightLine,x.style["z-index"]=30;var d=document.createElement("p");return d.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",d.style.position="relative",d.style.top="50%",d.style.left="50%",d.style.height="30%",d.style.width="50%",d.style.margin="-15% 0 0 -25%",x.appendChild(d),l.container.appendChild(x),l.container.style.background="#FFFFFF",l.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function($){$.exports=function(R){return Object.keys(R).sort()}},80038:function($,R,e){var A=e(92770),k=e(73627).isArrayOrTypedArray;R.aggNums=function(l,T,x,d){var s,t;if((!d||d>x.length)&&(d=x.length),A(T)||(T=!1),k(x[0])){for(t=new Array(d),s=0;s<d;s++)t[s]=R.aggNums(l,T,x[s]);x=t}for(s=0;s<d;s++)A(T)?A(x[s])&&(T=l(+T,+x[s])):T=x[s];return T},R.len=function(l){return R.aggNums(function(T){return T+1},0,l)},R.mean=function(l,T){return T||(T=R.len(l)),R.aggNums(function(x,d){return x+d},0,l)/T},R.midRange=function(l){if(l!==void 0&&l.length!==0)return(R.aggNums(Math.max,null,l)+R.aggNums(Math.min,null,l))/2},R.variance=function(l,T,x){return T||(T=R.len(l)),A(x)||(x=R.mean(l,T)),R.aggNums(function(d,s){return d+Math.pow(s-x,2)},0,l)/T},R.stdev=function(l,T,x){return Math.sqrt(R.variance(l,T,x))},R.median=function(l){var T=l.slice().sort();return R.interp(T,.5)},R.interp=function(l,T){if(!A(T))throw"n should be a finite number";if((T=T*l.length-.5)<0)return l[0];if(T>l.length-1)return l[l.length-1];var x=T%1;return x*l[Math.ceil(T)]+(1-x)*l[Math.floor(T)]}},78614:function($,R,e){var A=e(25075);$.exports=function(k){return k?A(k):[0,0,0,1]}},63893:function($,R,e){var A=e(39898),k=e(71828),l=k.strTranslate,T=e(77922),x=e(18783).LINE_SPACING,d=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;R.convertToTspans=function(I,U,z){var H=I.text(),F=!I.attr("data-notex")&&U&&U._context.typesetMath&&typeof MathJax<"u"&&H.match(d),N=A.select(I.node().parentNode);if(!N.empty()){var B=I.attr("class")?I.attr("class").split(" ")[0]:"text";return B+="-math",N.selectAll("svg."+B).remove(),N.selectAll("g."+B+"-group").remove(),I.style("display",null).attr({"data-unformatted":H,"data-math":"N"}),F?(U&&U._promises||[]).push(new Promise(function(K){I.style("display","none");var G=parseInt(I.node().style.fontSize,10),V={fontSize:G};(function(W,J,X){var ee,re,ie,se,fe=parseInt((MathJax.version||"").split(".")[0]);if(fe===2||fe===3){var ye=function(){var he="math-output-"+k.randstr({},64),ve=(se=A.select("body").append("div").attr({id:he}).style({visibility:"hidden",position:"absolute","font-size":J.fontSize+"px"}).text(W.replace(s,"\\lt ").replace(t,"\\gt "))).node();return fe===2?MathJax.Hub.Typeset(ve):MathJax.typeset([ve])},ge=function(){var he=se.select(fe===2?".MathJax_SVG":".MathJax"),ve=!he.empty()&&se.select("svg").node();if(ve){var Ie,xe=ve.getBoundingClientRect();Ie=fe===2?A.select("body").select("#MathJax_SVG_glyphs"):he.select("defs"),X(he,Ie,xe)}else k.log("There was an error in the tex syntax.",W),X();se.remove()};fe===2?MathJax.Hub.Queue(function(){return re=k.extendDeepAll({},MathJax.Hub.config),ie=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:o},displayAlign:"left"})},function(){if((ee=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},ye,ge,function(){if(ee!=="SVG")return MathJax.Hub.setRenderer(ee)},function(){return ie!==void 0&&(MathJax.Hub.processSectionDelay=ie),MathJax.Hub.Config(re)}):fe===3&&(re=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=o,(ee=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ye(),ge(),ee!=="svg"&&(MathJax.config.startup.output=ee),MathJax.config=re}))}else k.warn("No MathJax version:",MathJax.version)})(F[2],V,function(W,J,X){N.selectAll("svg."+B).remove(),N.selectAll("g."+B+"-group").remove();var ee=W&&W.select("svg");if(!ee||!ee.node())return j(),void K();var re=N.append("g").classed(B+"-group",!0).attr({"pointer-events":"none","data-unformatted":H,"data-math":"Y"});re.node().appendChild(ee.node()),J&&J.node()&&ee.node().insertBefore(J.node().cloneNode(!0),ee.node().firstChild);var ie=X.width,se=X.height;ee.attr({class:B,height:se,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var fe=I.node().style.fill||"black",ye=ee.select("g");ye.attr({fill:fe,stroke:fe});var ge=ye.node().getBoundingClientRect(),he=ge.width,ve=ge.height;(he>ie||ve>se)&&(ee.style("overflow","hidden"),he=(ge=ee.node().getBoundingClientRect()).width,ve=ge.height);var Ie=+I.attr("x"),xe=+I.attr("y"),Ae=-(G||I.node().getBoundingClientRect().height)/4;if(B[0]==="y")re.attr({transform:"rotate("+[-90,Ie,xe]+")"+l(-he/2,Ae-ve/2)});else if(B[0]==="l")xe=Ae-ve/2;else if(B[0]==="a"&&B.indexOf("atitle")!==0)Ie=0,xe=Ae;else{var Se=I.attr("text-anchor");Ie-=he*(Se==="middle"?.5:Se==="end"?1:0),xe=xe+Ae-ve/2}ee.attr({x:Ie,y:xe}),z&&z.call(I,re),K(re)})})):j(),I}function j(){N.empty()||(B=I.attr("class")+"-math",N.select("svg."+B).remove()),I.text("").style("white-space","pre");var K=function(G,V){V=V.replace(h," ");var W,J=!1,X=[],ee=-1;function re(){ee++;var ce=document.createElementNS(T.svg,"tspan");A.select(ce).attr({class:"line",dy:ee*x+"em"}),G.appendChild(ce),W=ce;var me=X;if(X=[{node:ce}],me.length>1)for(var Me=1;Me<me.length;Me++)ie(me[Me])}function ie(ce){var me,Me=ce.type,Re={};if(Me==="a"){me="a";var Ce=ce.target,ze=ce.href,le=ce.popup;ze&&(Re={"xlink:xlink:show":Ce==="_blank"||Ce.charAt(0)!=="_"?"new":"replace",target:Ce,"xlink:xlink:href":ze},le&&(Re.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+le+'");return false;'))}else me="tspan";ce.style&&(Re.style=ce.style);var de=document.createElementNS(T.svg,me);if(Me==="sup"||Me==="sub"){se(W,i),W.appendChild(de);var be=document.createElementNS(T.svg,"tspan");se(be,i),A.select(be).attr("dy",a[Me]),Re.dy=n[Me],W.appendChild(de),W.appendChild(be)}else W.appendChild(de);A.select(de).attr(Re),W=ce.node=de,X.push(ce)}function se(ce,me){ce.appendChild(document.createTextNode(me))}function fe(ce){if(X.length!==1){var me=X.pop();ce!==me.type&&k.log("Start tag <"+me.type+"> doesnt match end tag <"+ce+">. Pretending it did match.",V),W=X[X.length-1].node}else k.log("Ignoring unexpected end tag </"+ce+">.",V)}v.test(V)?re():(W=G,X=[{node:G}]);for(var ye=V.split(f),ge=0;ge<ye.length;ge++){var he=ye[ge],ve=he.match(b),Ie=ve&&ve[2].toLowerCase(),xe=r[Ie];if(Ie==="br")re();else if(xe===void 0)se(W,E(he));else if(ve[1])fe(Ie);else{var Ae=ve[4],Se={type:Ie},Te=w(Ae,g);if(Te?(Te=Te.replace(u,"$1 fill:"),xe&&(Te+=";"+xe)):xe&&(Te=xe),Te&&(Se.style=Te),Ie==="a"){J=!0;var Q=w(Ae,y);if(Q){var oe=L(Q);oe&&(Se.href=oe,Se.target=w(Ae,p)||"_blank",Se.popup=w(Ae,m))}}ie(Se)}}return J}(I.node(),H);K&&I.style("pointer-events","all"),R.positionText(I),z&&z.call(I)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,o=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},i="​",c=["http:","https:","mailto:","",void 0,":"],h=R.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;R.BR_TAG_ALL=/<br(\s+.*)?>/gi;var g=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,p=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(I,U){if(!I)return null;var z=I.match(U),H=z&&(z[3]||z[4]);return H&&E(H)}var u=/(^|;)\s*color:/;R.plainText=function(I,U){for(var z=(U=U||{}).len!==void 0&&U.len!==-1?U.len:1/0,H=U.allowedTags!==void 0?U.allowedTags:["br"],F=3,N=I.split(f),B=[],j="",K=0,G=0;G<N.length;G++){var V=N[G],W=V.match(b),J=W&&W[2].toLowerCase();if(J)H.indexOf(J)!==-1&&(B.push(V),j=J);else{var X=V.length;if(K+X<z)B.push(V),K+=X;else if(K<z){var ee=z-K;j&&(j!=="br"||ee<=F||X<=F)&&B.pop(),z>F?B.push(V.substr(0,ee-F)+"..."):B.push(V.substr(0,ee));break}j=""}}return B.join("")};var S={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},_=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(I){return I.replace(_,function(U,z){return(z.charAt(0)==="#"?function(H){if(!(H>1114111)){var F=String.fromCodePoint;if(F)return F(H);var N=String.fromCharCode;return H<=65535?N(H):N(55232+(H>>10),H%1024+56320)}}(z.charAt(1)==="x"?parseInt(z.substr(2),16):parseInt(z.substr(1),10)):S[z])||U})}function L(I){var U=encodeURI(decodeURI(I)),z=document.createElement("a"),H=document.createElement("a");z.href=I,H.href=U;var F=z.protocol,N=H.protocol;return c.indexOf(F)!==-1&&c.indexOf(N)!==-1?U:""}function C(I,U,z){var H,F,N,B=z.horizontalAlign,j=z.verticalAlign||"top",K=I.node().getBoundingClientRect(),G=U.node().getBoundingClientRect();return F=j==="bottom"?function(){return K.bottom-H.height}:j==="middle"?function(){return K.top+(K.height-H.height)/2}:function(){return K.top},N=B==="right"?function(){return K.right-H.width}:B==="center"?function(){return K.left+(K.width-H.width)/2}:function(){return K.left},function(){H=this.node().getBoundingClientRect();var V=N()-G.left,W=F()-G.top,J=z.gd||{};if(z.gd){J._fullLayout._calcInverseTransform(J);var X=k.apply3DTransform(J._fullLayout._invTransform)(V,W);V=X[0],W=X[1]}return this.style({top:W+"px",left:V+"px","z-index":1e3}),this}}R.convertEntities=E,R.sanitizeHTML=function(I){I=I.replace(h," ");for(var U=document.createElement("p"),z=U,H=[],F=I.split(f),N=0;N<F.length;N++){var B=F[N],j=B.match(b),K=j&&j[2].toLowerCase();if(K in r)if(j[1])H.length&&(z=H.pop());else{var G=j[4],V=w(G,g),W=V?{style:V}:{};if(K==="a"){var J=w(G,y);if(J){var X=L(J);if(X){W.href=X;var ee=w(G,p);ee&&(W.target=ee)}}}var re=document.createElement(K);z.appendChild(re),A.select(re).attr(W),z=re,H.push(re)}else z.appendChild(document.createTextNode(E(B)))}return U.innerHTML},R.lineCount=function(I){return I.selectAll("tspan.line").size()||1},R.positionText=function(I,U,z){return I.each(function(){var H=A.select(this);function F(j,K){return K===void 0?(K=H.attr(j))===null&&(H.attr(j,0),K=0):H.attr(j,K),K}var N=F("x",U),B=F("y",z);this.nodeName==="text"&&H.selectAll("tspan.line").attr({x:N,y:B})})};var P="1px ";R.makeTextShadow=function(I){return"1px 1px 1px "+I+", -1px -"+P+P+I+", 1px -"+P+P+I+", -"+P+P+P+I},R.makeEditable=function(I,U){var z=U.gd,H=U.delegate,F=A.dispatch("edit","input","cancel"),N=H||I;if(I.style({"pointer-events":H?"none":"all"}),I.size()!==1)throw new Error("boo");function B(){var K,G,V,W,J;K=A.select(z).select(".svg-container"),G=K.append("div"),V=I.node().style,W=parseFloat(V.fontSize||12),(J=U.text)===void 0&&(J=I.attr("data-unformatted")),G.classed("plugin-editable editable",!0).style({position:"absolute","font-family":V.fontFamily||"Arial","font-size":W,color:U.fill||V.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-W/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(J).call(C(I,K,U)).on("blur",function(){z._editing=!1,I.text(this.textContent).style({opacity:1});var re,ie=A.select(this).attr("class");(re=ie?"."+ie.split(" ")[0]+"-math-group":"[class*=-math-group]")&&A.select(I.node().parentNode).select(re).style({opacity:0});var se=this.textContent;A.select(this).transition().duration(0).remove(),A.select(document).on("mouseup",null),F.edit.call(I,se)}).on("focus",function(){var re=this;z._editing=!0,A.select(document).on("mouseup",function(){if(A.event.target===re)return!1;document.activeElement===G.node()&&G.node().blur()})}).on("keyup",function(){A.event.which===27?(z._editing=!1,I.style({opacity:1}),A.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),F.cancel.call(I,this.textContent)):(F.input.call(I,this.textContent),A.select(this).call(C(I,K,U)))}).on("keydown",function(){A.event.which===13&&this.blur()}).call(j),I.style({opacity:0});var X,ee=N.attr("class");(X=ee?"."+ee.split(" ")[0]+"-math-group":"[class*=-math-group]")&&A.select(I.node().parentNode).select(X).style({opacity:0})}function j(K){var G=K.node(),V=document.createRange();V.selectNodeContents(G);var W=window.getSelection();W.removeAllRanges(),W.addRange(V),G.focus()}return U.immediate?B():N.on("click",B),A.rebind(I,F,"on")}},79990:function($,R){var e={};function A(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}R.throttle=function(k,l,T){var x=e[k],d=Date.now();if(!x){for(var s in e)e[s].ts<d-6e4&&delete e[s];x=e[k]={ts:0,timer:null}}function t(){T(),x.ts=Date.now(),x.onDone&&(x.onDone(),x.onDone=null)}A(x),d>x.ts+l?t():x.timer=setTimeout(function(){t(),x.timer=null},l)},R.done=function(k){var l=e[k];return l&&l.timer?new Promise(function(T){var x=l.onDone;l.onDone=function(){x&&x(),T(),l.onDone=null}}):Promise.resolve()},R.clear=function(k){if(k)A(e[k]),delete e[k];else for(var l in e)R.clear(l)}},58163:function($,R,e){var A=e(92770);$.exports=function(k,l){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(l[0],l[1]))/Math.LN10;return A(T)||(T=Math.log(Math.max(l[0],l[1]))/Math.LN10-6),T}},90973:function($,R,e){var A=$.exports={},k=e(78776).locationmodeToLayer,l=e(96892).zL;A.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},A.getTopojsonPath=function(T,x){return T+x+".json"},A.getTopojsonFeatures=function(T,x){var d=k[T.locationmode],s=x.objects[d];return l(x,s).features}},37815:function($){$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function($){$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function($,R,e){var A=e(73972);$.exports=function(k){for(var l,T,x=A.layoutArrayContainers,d=A.layoutArrayRegexes,s=k.split("[")[0],t=0;t<d.length;t++)if((T=k.match(d[t]))&&T.index===0){l=T[0];break}if(l||(l=x[x.indexOf(s)]),!l)return!1;var o=k.substr(l.length);return o?!!(T=o.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:l,index:Number(T[1]),property:T[3]||""}:{array:l,index:"",property:""}}},30962:function($,R,e){var A=e(71828),k=A.extendFlat,l=A.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},x={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},d=T.flags.slice().concat(["fullReplot"]),s=x.flags.slice().concat("layoutReplot");function t(n){for(var a={},i=0;i<n.length;i++)a[n[i]]=!1;return a}function o(n,a,i){var c=k({},n);for(var h in c){var f=c[h];l(f)&&(c[h]=r(f,a,0,h))}return i==="from-root"&&(c.editType=a),c}function r(n,a,i,c){if(n.valType){var h=k({},n);if(h.editType=a,Array.isArray(n.items)){h.items=new Array(n.items.length);for(var f=0;f<n.items.length;f++)h.items[f]=r(n.items[f],a)}return h}return o(n,a,c.charAt(0)==="_"?"nested":"from-root")}$.exports={traces:T,layout:x,traceFlags:function(){return t(d)},layoutFlags:function(){return t(s)},update:function(n,a){var i=a.editType;if(i&&i!=="none")for(var c=i.split("+"),h=0;h<c.length;h++)n[c[h]]=!0},overrideAll:o}},58377:function($,R,e){var A=e(92770),k=e(27812),l=e(73972),T=e(71828),x=e(74875),d=e(41675),s=e(7901),t=d.cleanId,o=d.getFromTrace,r=l.traceIs;function n(y,p){var m=y[p],w=p.charAt(0);m&&m!=="paper"&&(y[p]=t(m,w,!0))}function a(y){function p(m,w){var u=y[m],S=y.title&&y.title[w];u&&!S&&(y.title||(y.title={}),y.title[w]=y[m],delete y[m])}y&&(typeof y.title!="string"&&typeof y.title!="number"||(y.title={text:y.title}),p("titlefont","font"),p("titleposition","position"),p("titleside","side"),p("titleoffset","offset"))}function i(y){if(!T.isPlainObject(y))return!1;var p=y.name;return delete y.name,delete y.showlegend,(typeof p=="string"||typeof p=="number")&&String(p)}function c(y,p,m,w){if(m&&!w)return y;if(w&&!m||!y.trim())return p;if(!p.trim())return y;var u,S=Math.min(y.length,p.length);for(u=0;u<S&&y.charAt(u)===p.charAt(u);u++);return y.substr(0,u).trim()}function h(y){var p="middle",m="center";return typeof y=="string"&&(y.indexOf("top")!==-1?p="top":y.indexOf("bottom")!==-1&&(p="bottom"),y.indexOf("left")!==-1?m="left":y.indexOf("right")!==-1&&(m="right")),p+" "+m}function f(y,p){return p in y&&typeof y[p]=="object"&&Object.keys(y[p]).length===0}R.clearPromiseQueue=function(y){Array.isArray(y._promises)&&y._promises.length>0&&T.log("Clearing previous rejected promises from queue."),y._promises=[]},R.cleanLayout=function(y){var p,m;y||(y={}),y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1),y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1),y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var w=(x.subplotsRegistry.cartesian||{}).attrRegex,u=(x.subplotsRegistry.polar||{}).attrRegex,S=(x.subplotsRegistry.ternary||{}).attrRegex,_=(x.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(y);for(p=0;p<E.length;p++){var L=E[p];if(w&&w.test(L)){var C=y[L];C.anchor&&C.anchor!=="free"&&(C.anchor=t(C.anchor)),C.overlaying&&(C.overlaying=t(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":C.isdate===!1&&C.islog===!1&&(C.type="linear")),C.autorange!=="withzero"&&C.autorange!=="tozero"||(C.autorange=!0,C.rangemode="tozero"),delete C.islog,delete C.isdate,delete C.categories,f(C,"domain")&&delete C.domain,C.autotick!==void 0&&(C.tickmode===void 0&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),a(C)}else if(u&&u.test(L))a(y[L].radialaxis);else if(S&&S.test(L)){var P=y[L];a(P.aaxis),a(P.baxis),a(P.caxis)}else if(_&&_.test(L)){var I=y[L],U=I.cameraposition;if(Array.isArray(U)&&U[0].length===4){var z=U[0],H=U[1],F=U[2],N=k([],z),B=[];for(m=0;m<3;++m)B[m]=H[m]+F*N[2+4*m];I.camera={eye:{x:B[0],y:B[1],z:B[2]},center:{x:H[0],y:H[1],z:H[2]},up:{x:0,y:0,z:1}},delete I.cameraposition}a(I.xaxis),a(I.yaxis),a(I.zaxis)}}var j=Array.isArray(y.annotations)?y.annotations.length:0;for(p=0;p<j;p++){var K=y.annotations[p];T.isPlainObject(K)&&(K.ref&&(K.ref==="paper"?(K.xref="paper",K.yref="paper"):K.ref==="data"&&(K.xref="x",K.yref="y"),delete K.ref),n(K,"xref"),n(K,"yref"))}var G=Array.isArray(y.shapes)?y.shapes.length:0;for(p=0;p<G;p++){var V=y.shapes[p];T.isPlainObject(V)&&(n(V,"xref"),n(V,"yref"))}var W=Array.isArray(y.images)?y.images.length:0;for(p=0;p<W;p++){var J=y.images[p];T.isPlainObject(J)&&(n(J,"xref"),n(J,"yref"))}var X=y.legend;return X&&(X.x>3?(X.x=1.02,X.xanchor="left"):X.x<-2&&(X.x=-.02,X.xanchor="right"),X.y>3?(X.y=1.02,X.yanchor="bottom"):X.y<-2&&(X.y=-.02,X.yanchor="top")),a(y),y.dragmode==="rotate"&&(y.dragmode="orbit"),s.clean(y),y.template&&y.template.layout&&R.cleanLayout(y.template.layout),y},R.cleanData=function(y){for(var p=0;p<y.length;p++){var m,w=y[p];if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var u=s.defaults,S=w.error_y.color||(r(w,"bar")?s.defaultLine:u[p%u.length]);w.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir!=="h"||!r(w,"bar")&&w.type.substr(0,9)!=="histogram"||(w.orientation="h",R.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&R.swapXYData(w),w.type!=="histogramx"&&w.type!=="histogramy"||(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=t(w.xaxis,"x")),w.yaxis&&(w.yaxis=t(w.yaxis,"y")),r(w,"gl3d")&&w.scene&&(w.scene=x.subplotsRegistry.gl3d.cleanId(w.scene)),!r(w,"pie-like")&&!r(w,"bar-like"))if(Array.isArray(w.textposition))for(m=0;m<w.textposition.length;m++)w.textposition[m]=h(w.textposition[m]);else w.textposition&&(w.textposition=h(w.textposition));var _=l.getModule(w);if(_&&_.colorbar){var E=_.colorbar.container,L=E?w[E]:w;L&&L.colorscale&&(L.colorscale==="YIGnBu"&&(L.colorscale="YlGnBu"),L.colorscale==="YIOrRd"&&(L.colorscale="YlOrRd"))}if(w.type==="surface"&&T.isPlainObject(w.contours)){var C=["x","y","z"];for(m=0;m<C.length;m++){var P=w.contours[C[m]];T.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var I=(w.increasing||{}).showlegend!==!1,U=(w.decreasing||{}).showlegend!==!1,z=i(w.increasing),H=i(w.decreasing);if(z!==!1&&H!==!1){var F=c(z,H,I,U);F&&(w.name=F)}else!z&&!H||w.name||(w.name=z||H)}if(Array.isArray(w.transforms)){var N=w.transforms;for(m=0;m<N.length;m++){var B=N[m];if(T.isPlainObject(B))switch(B.type){case"filter":B.filtersrc&&(B.target=B.filtersrc,delete B.filtersrc),B.calendar&&(B.valuecalendar||(B.valuecalendar=B.calendar),delete B.calendar);break;case"groupby":if(B.styles=B.styles||B.style,B.styles&&!Array.isArray(B.styles)){var j=B.styles,K=Object.keys(j);B.styles=[];for(var G=0;G<K.length;G++)B.styles.push({target:K[G],value:j[K[G]]})}}}}f(w,"line")&&delete w.line,"marker"in w&&(f(w.marker,"line")&&delete w.marker.line,f(w,"marker")&&delete w.marker),s.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),a(w),w.colorbar&&a(w.colorbar),w.marker&&w.marker.colorbar&&a(w.marker.colorbar),w.line&&w.line.colorbar&&a(w.line.colorbar),w.aaxis&&a(w.aaxis),w.baxis&&a(w.baxis)}},R.swapXYData=function(y){var p;if(T.swapAttrs(y,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0),y.error_x&&y.error_y){var m=y.error_y,w="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(y,["error_?.copy_ystyle"]),w&&T.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if(typeof y.hoverinfo=="string"){var u=y.hoverinfo.split("+");for(p=0;p<u.length;p++)u[p]==="x"?u[p]="y":u[p]==="y"&&(u[p]="x");y.hoverinfo=u.join("+")}},R.coerceTraceIndices=function(y,p){if(A(p))return[p];if(!Array.isArray(p)||!p.length)return y.data.map(function(u,S){return S});if(Array.isArray(p)){for(var m=[],w=0;w<p.length;w++)T.isIndex(p[w],y.data.length)?m.push(p[w]):T.warn("trace index (",p[w],") is not a number or is out of bounds");return m}return p},R.manageArrayContainers=function(y,p,m){var w=y.obj,u=y.parts,S=u.length,_=u[S-1],E=A(_);if(E&&p===null){var L=u.slice(0,S-1).join(".");T.nestedProperty(w,L).get().splice(_,1)}else E&&y.get()===void 0&&y.get()===void 0&&(m[y.astr]=null),y.set(p)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function v(y){var p=y.search(b);if(p>0)return y.substr(0,p)}R.hasParent=function(y,p){for(var m=v(p);m;){if(m in y)return!0;m=v(m)}return!1};var g=["x","y","z"];R.clearAxisTypes=function(y,p,m){for(var w=0;w<p.length;w++)for(var u=y._fullData[w],S=0;S<3;S++){var _=o(y,u,g[S]);if(_&&_.type!=="log"){var E=_._name,L=_._id.substr(1);if(L.substr(0,5)==="scene"){if(m[L]!==void 0)continue;E=L+"."+E}var C=E+".type";m[E]===void 0&&m[C]===void 0&&T.nestedProperty(y.layout,C).set(null)}}}},10641:function($,R,e){var A=e(72391);R._doPlot=A._doPlot,R.newPlot=A.newPlot,R.restyle=A.restyle,R.relayout=A.relayout,R.redraw=A.redraw,R.update=A.update,R._guiRestyle=A._guiRestyle,R._guiRelayout=A._guiRelayout,R._guiUpdate=A._guiUpdate,R._storeDirectGUIEdit=A._storeDirectGUIEdit,R.react=A.react,R.extendTraces=A.extendTraces,R.prependTraces=A.prependTraces,R.addTraces=A.addTraces,R.deleteTraces=A.deleteTraces,R.moveTraces=A.moveTraces,R.purge=A.purge,R.addFrames=A.addFrames,R.deleteFrames=A.deleteFrames,R.animate=A.animate,R.setPlotConfig=A.setPlotConfig,R.toImage=e(403),R.validate=e(84936),R.downloadImage=e(7239);var k=e(96318);R.makeTemplate=k.makeTemplate,R.validateTemplate=k.validateTemplate},6611:function($,R,e){var A=e(41965),k=e(64213),l=e(47769),T=e(65888).sorterAsc,x=e(73972);R.containerArrayMatch=e(14458);var d=R.isAddVal=function(t){return t==="add"||A(t)},s=R.isRemoveVal=function(t){return t===null||t==="remove"};R.applyContainerArrayChanges=function(t,o,r,n,a){var i=o.astr,c=x.getComponentMethod(i,"supplyLayoutDefaults"),h=x.getComponentMethod(i,"draw"),f=x.getComponentMethod(i,"drawOne"),b=n.replot||n.recalc||c===k||h===k,v=t.layout,g=t._fullLayout;if(r[""]){Object.keys(r).length>1&&l.warn("Full array edits are incompatible with other edits",i);var y=r[""][""];if(s(y))o.set(null);else{if(!Array.isArray(y))return l.warn("Unrecognized full array edit value",i,y),!0;o.set(y)}return!b&&(c(v,g),h(t),!0)}var p,m,w,u,S,_,E,L,C=Object.keys(r).map(Number).sort(T),P=o.get(),I=P||[],U=a(g,i).get(),z=[],H=-1,F=I.length;for(p=0;p<C.length;p++)if(u=r[w=C[p]],S=Object.keys(u),_=u[""],E=d(_),w<0||w>I.length-(E?0:1))l.warn("index out of range",i,w);else if(_!==void 0)S.length>1&&l.warn("Insertion & removal are incompatible with edits to the same index.",i,w),s(_)?z.push(w):E?(_==="add"&&(_={}),I.splice(w,0,_),U&&U.splice(w,0,{})):l.warn("Unrecognized full object edit value",i,w,_),H===-1&&(H=w);else for(m=0;m<S.length;m++)L=i+"["+w+"].",a(I[w],S[m],L).set(u[S[m]]);for(p=z.length-1;p>=0;p--)I.splice(z[p],1),U&&U.splice(z[p],1);if(I.length?P||o.set(I):o.set(null),b)return!1;if(c(v,g),f!==k){var N;if(H===-1)N=C;else{for(F=Math.max(I.length,F),N=[],p=0;p<C.length&&!((w=C[p])>=H);p++)N.push(w);for(p=H;p<F;p++)N.push(p)}for(p=0;p<N.length;p++)f(t,N[p])}else h(t);return!0}},72391:function($,R,e){var A=e(39898),k=e(92770),l=e(57035),T=e(71828),x=T.nestedProperty,d=e(11086),s=e(10847),t=e(73972),o=e(86281),r=e(74875),n=e(89298),a=e(91424),i=e(7901),c=e(4305).initInteractions,h=e(77922),f=e(47322).clearOutline,b=e(72075).dfltConfig,v=e(6611),g=e(58377),y=e(61549),p=e(30962),m=e(85555).AX_NAME_PATTERN,w=0;function u(Q){var oe=Q._fullLayout;oe._redrawFromAutoMarginCount?oe._redrawFromAutoMarginCount--:Q.emit("plotly_afterplot")}function S(Q,oe){try{Q._fullLayout._paper.style("background",oe)}catch(ce){T.error(ce)}}function _(Q,oe){S(Q,i.combine(oe,"white"))}function E(Q,oe){if(!Q._context){Q._context=T.extendDeep({},b);var ce=A.select("base");Q._context._baseUrl=ce.size()&&ce.attr("href")?window.location.href.split("#")[0]:""}var me,Me,Re,Ce=Q._context;if(oe){for(Me=Object.keys(oe),me=0;me<Me.length;me++)(Re=Me[me])!=="editable"&&Re!=="edits"&&Re in Ce&&(Re==="setBackground"&&oe[Re]==="opaque"?Ce[Re]=_:Ce[Re]=oe[Re]);oe.plot3dPixelRatio&&!Ce.plotGlPixelRatio&&(Ce.plotGlPixelRatio=Ce.plot3dPixelRatio);var ze=oe.editable;if(ze!==void 0)for(Ce.editable=ze,Me=Object.keys(Ce.edits),me=0;me<Me.length;me++)Ce.edits[Me[me]]=ze;if(oe.edits)for(Me=Object.keys(oe.edits),me=0;me<Me.length;me++)(Re=Me[me])in Ce.edits&&(Ce.edits[Re]=oe.edits[Re]);Ce._exportedPlot=oe._exportedPlot}Ce.staticPlot&&(Ce.editable=!1,Ce.edits={},Ce.autosizable=!1,Ce.scrollZoom=!1,Ce.doubleClick=!1,Ce.showTips=!1,Ce.showLink=!1,Ce.displayModeBar=!1),Ce.displayModeBar!=="hover"||l||(Ce.displayModeBar=!0),Ce.setBackground!=="transparent"&&typeof Ce.setBackground=="function"||(Ce.setBackground=S),Ce._hasZeroHeight=Ce._hasZeroHeight||Q.clientHeight===0,Ce._hasZeroWidth=Ce._hasZeroWidth||Q.clientWidth===0;var le=Ce.scrollZoom,de=Ce._scrollZoom={};if(le===!0)de.cartesian=1,de.gl3d=1,de.geo=1,de.mapbox=1;else if(typeof le=="string"){var be=le.split("+");for(me=0;me<be.length;me++)de[be[me]]=1}else le!==!1&&(de.gl3d=1,de.geo=1,de.mapbox=1)}function L(Q,oe){var ce,me,Me=oe+1,Re=[];for(ce=0;ce<Q.length;ce++)(me=Q[ce])<0?Re.push(Me+me):Re.push(me);return Re}function C(Q,oe,ce){var me,Me;for(me=0;me<oe.length;me++){if((Me=oe[me])!==parseInt(Me,10))throw new Error("all values in "+ce+" must be integers");if(Me>=Q.data.length||Me<-Q.data.length)throw new Error(ce+" must be valid indices for gd.data.");if(oe.indexOf(Me,me+1)>-1||Me>=0&&oe.indexOf(-Q.data.length+Me)>-1||Me<0&&oe.indexOf(Q.data.length+Me)>-1)throw new Error("each index in "+ce+" must be unique.")}}function P(Q,oe,ce){if(!Array.isArray(Q.data))throw new Error("gd.data must be an array.");if(oe===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(oe)||(oe=[oe]),C(Q,oe,"currentIndices"),ce===void 0||Array.isArray(ce)||(ce=[ce]),ce!==void 0&&C(Q,ce,"newIndices"),ce!==void 0&&oe.length!==ce.length)throw new Error("current and new indices must be of equal length.")}function I(Q,oe,ce,me,Me){(function(Ve,He,rt,tt){var ot=T.isPlainObject(tt);if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(He))throw new Error("update must be a key:value object");if(rt===void 0)throw new Error("indices must be an integer or array of integers");for(var ht in C(Ve,rt,"indices"),He){if(!Array.isArray(He[ht])||He[ht].length!==rt.length)throw new Error("attribute "+ht+" must be an array of length equal to indices array length");if(ot&&(!(ht in tt)||!Array.isArray(tt[ht])||tt[ht].length!==He[ht].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(Q,oe,ce,me);for(var Re=function(Ve,He,rt,tt){var ot,ht,_t,dt,bt,St=T.isPlainObject(tt),Et=[];for(var zt in Array.isArray(rt)||(rt=[rt]),rt=L(rt,Ve.data.length-1),He)for(var Ut=0;Ut<rt.length;Ut++){if(ot=Ve.data[rt[Ut]],ht=(_t=x(ot,zt)).get(),dt=He[zt][Ut],!T.isArrayOrTypedArray(dt))throw new Error("attribute: "+zt+" index: "+Ut+" must be an array");if(!T.isArrayOrTypedArray(ht))throw new Error("cannot extend missing or non-array attribute: "+zt);if(ht.constructor!==dt.constructor)throw new Error("cannot extend array with an array of a different type: "+zt);bt=St?tt[zt][Ut]:tt,k(bt)||(bt=-1),Et.push({prop:_t,target:ht,insert:dt,maxp:Math.floor(bt)})}return Et}(Q,oe,ce,me),Ce={},ze={},le=0;le<Re.length;le++){var de=Re[le].prop,be=Re[le].maxp,Fe=Me(Re[le].target,Re[le].insert,be);de.set(Fe[0]),Array.isArray(Ce[de.astr])||(Ce[de.astr]=[]),Ce[de.astr].push(Fe[1]),Array.isArray(ze[de.astr])||(ze[de.astr]=[]),ze[de.astr].push(Re[le].target.length)}return{update:Ce,maxPoints:ze}}function U(Q,oe){var ce=new Q.constructor(Q.length+oe.length);return ce.set(Q),ce.set(oe,Q.length),ce}function z(Q,oe,ce,me){Q=T.getGraphDiv(Q),g.clearPromiseQueue(Q);var Me={};if(typeof oe=="string")Me[oe]=ce;else{if(!T.isPlainObject(oe))return T.warn("Restyle fail.",oe,ce,me),Promise.reject();Me=T.extendFlat({},oe),me===void 0&&(me=ce)}Object.keys(Me).length&&(Q.changed=!0);var Re=g.coerceTraceIndices(Q,me),Ce=B(Q,Me,Re),ze=Ce.flags;ze.calc&&(Q.calcdata=void 0),ze.clearAxisTypes&&g.clearAxisTypes(Q,Re,{});var le=[];ze.fullReplot?le.push(R._doPlot):(le.push(r.previousPromises),r.supplyDefaults(Q),ze.markerSize&&(r.doCalcdata(Q),V(le)),ze.style&&le.push(y.doTraceStyle),ze.colorbars&&le.push(y.doColorBars),le.push(u)),le.push(r.rehover,r.redrag,r.reselect),s.add(Q,z,[Q,Ce.undoit,Ce.traces],z,[Q,Ce.redoit,Ce.traces]);var de=T.syncOrAsync(le,Q);return de&&de.then||(de=Promise.resolve()),de.then(function(){return Q.emit("plotly_restyle",Ce.eventData),Q})}function H(Q){return Q===void 0?null:Q}function F(Q,oe){return oe?function(ce,me,Me){var Re=x(ce,me),Ce=Re.set;return Re.set=function(ze){N((Me||"")+me,Re.get(),ze,Q),Ce(ze)},Re}:x}function N(Q,oe,ce,me){if(Array.isArray(oe)||Array.isArray(ce))for(var Me=Array.isArray(oe)?oe:[],Re=Array.isArray(ce)?ce:[],Ce=Math.max(Me.length,Re.length),ze=0;ze<Ce;ze++)N(Q+"["+ze+"]",Me[ze],Re[ze],me);else if(T.isPlainObject(oe)||T.isPlainObject(ce)){var le=T.isPlainObject(oe)?oe:{},de=T.isPlainObject(ce)?ce:{},be=T.extendFlat({},le,de);for(var Fe in be)N(Q+"."+Fe,le[Fe],de[Fe],me)}else me[Q]===void 0&&(me[Q]=H(oe))}function B(Q,oe,ce){var me,Me=Q._fullLayout,Re=Q._fullData,Ce=Q.data,ze=Me._guiEditing,le=F(Me._preGUI,ze),de=T.extendDeepAll({},oe);j(oe);var be,Fe=p.traceFlags(),Ve={},He={};function rt(){return ce.map(function(){})}function tt(qt){var Xt=n.id2name(qt);be.indexOf(Xt)===-1&&be.push(Xt)}function ot(qt){return"LAYOUT"+qt+".autorange"}function ht(qt){return"LAYOUT"+qt+".range"}function _t(qt){for(var Xt=qt;Xt<Re.length;Xt++)if(Re[Xt]._input===Ce[qt])return Re[Xt]}function dt(qt,Xt,cn){if(Array.isArray(qt))qt.forEach(function(Mn){dt(Mn,Xt,cn)});else if(!(qt in oe)&&!g.hasParent(oe,qt)){var yn;if(qt.substr(0,6)==="LAYOUT")yn=le(Q.layout,qt.replace("LAYOUT",""));else{var Kt=ce[cn];yn=F(Me._tracePreGUI[_t(Kt)._fullInput.uid],ze)(Ce[Kt],qt)}qt in He||(He[qt]=rt()),He[qt][cn]===void 0&&(He[qt][cn]=H(yn.get())),Xt!==void 0&&yn.set(Xt)}}function bt(qt){return function(Xt){return Re[Xt][qt]}}function St(qt){return function(Xt,cn){return Xt===!1?Re[ce[cn]][qt]:null}}for(var Et in oe){if(g.hasParent(oe,Et))throw new Error("cannot set "+Et+" and a parent attribute simultaneously");var zt,Ut,Pt,Ze,Ye,Be,ke=oe[Et];if(Et!=="autobinx"&&Et!=="autobiny"||(Et=Et.charAt(Et.length-1)+"bins",ke=Array.isArray(ke)?ke.map(St(Et)):ke===!1?ce.map(bt(Et)):null),Ve[Et]=ke,Et.substr(0,6)!=="LAYOUT"){for(He[Et]=rt(),me=0;me<ce.length;me++)if(zt=Ce[ce[me]],Ut=_t(ce[me]),Ze=(Pt=F(Me._tracePreGUI[Ut._fullInput.uid],ze)(zt,Et)).get(),(Ye=Array.isArray(ke)?ke[me%ke.length]:ke)!==void 0){var Pe=Pt.parts[Pt.parts.length-1],qe=Et.substr(0,Et.length-Pe.length-1),Xe=qe?qe+".":"",nt=qe?x(Ut,qe).get():Ut;if((Be=o.getTraceValObject(Ut,Pt.parts))&&Be.impliedEdits&&Ye!==null)for(var ut in Be.impliedEdits)dt(T.relativeAttr(Et,ut),Be.impliedEdits[ut],me);else if(Pe!=="thicknessmode"&&Pe!=="lenmode"||Ze===Ye||Ye!=="fraction"&&Ye!=="pixels"||!nt){if(Et==="type"&&(Ye==="pie"!=(Ze==="pie")||Ye==="funnelarea"!=(Ze==="funnelarea"))){var ct="x",Ct="y";Ye!=="bar"&&Ze!=="bar"||zt.orientation!=="h"||(ct="y",Ct="x"),T.swapAttrs(zt,["?","?src"],"labels",ct),T.swapAttrs(zt,["d?","?0"],"label",ct),T.swapAttrs(zt,["?","?src"],"values",Ct),Ze==="pie"||Ze==="funnelarea"?(x(zt,"marker.color").set(x(zt,"marker.colors").get()),Me._pielayer.selectAll("g.trace").remove()):t.traceIs(zt,"cartesian")&&x(zt,"marker.colors").set(x(zt,"marker.color").get())}}else{var Lt=Me._size,Mt=nt.orient,mt=Mt==="top"||Mt==="bottom";if(Pe==="thicknessmode"){var kt=mt?Lt.h:Lt.w;dt(Xe+"thickness",nt.thickness*(Ye==="fraction"?1/kt:kt),me)}else{var wt=mt?Lt.w:Lt.h;dt(Xe+"len",nt.len*(Ye==="fraction"?1/wt:wt),me)}}if(He[Et][me]=H(Ze),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Et)!==-1){if(Et==="orientation"){Pt.set(Ye);var Ot=zt.x&&!zt.y?"h":"v";if((Pt.get()||Ot)===Ut.orientation)continue}else Et==="orientationaxes"&&(zt.orientation={v:"h",h:"v"}[Ut.orientation]);g.swapXYData(zt),Fe.calc=Fe.clearAxisTypes=!0}else r.dataArrayContainers.indexOf(Pt.parts[0])!==-1?(g.manageArrayContainers(Pt,Ye,He),Fe.calc=!0):(Be?Be.arrayOk&&!t.traceIs(Ut,"regl")&&(T.isArrayOrTypedArray(Ye)||T.isArrayOrTypedArray(Ze))?Fe.calc=!0:p.update(Fe,Be):Fe.calc=!0,Pt.set(Ye))}if(["swapxyaxes","orientationaxes"].indexOf(Et)!==-1&&n.swap(Q,ce),Et==="orientationaxes"){var It=x(Q.layout,"hovermode"),Nt=It.get();Nt==="x"?It.set("y"):Nt==="y"?It.set("x"):Nt==="x unified"?It.set("y unified"):Nt==="y unified"&&It.set("x unified")}if(["orientation","type"].indexOf(Et)!==-1){for(be=[],me=0;me<ce.length;me++){var Dt=Ce[ce[me]];t.traceIs(Dt,"cartesian")&&(tt(Dt.xaxis||"x"),tt(Dt.yaxis||"y"))}dt(be.map(ot),!0,0),dt(be.map(ht),[0,1],0)}}else Pt=le(Q.layout,Et.replace("LAYOUT","")),He[Et]=[H(Pt.get())],Pt.set(Array.isArray(ke)?ke[0]:ke),Fe.calc=!0}return(Fe.calc||Fe.plot)&&(Fe.fullReplot=!0),{flags:Fe,undoit:He,redoit:Ve,traces:ce,eventData:T.extendDeepNoArrays([],[de,ce])}}function j(Q){var oe,ce,me,Me=T.counterRegex("axis",".title",!1,!1),Re=/colorbar\.title$/,Ce=Object.keys(Q);for(oe=0;oe<Ce.length;oe++)ce=Ce[oe],me=Q[ce],ce!=="title"&&!Me.test(ce)&&!Re.test(ce)||typeof me!="string"&&typeof me!="number"?ce.indexOf("titlefont")>-1&&ce.indexOf("grouptitlefont")===-1?ze(ce,ce.replace("titlefont","title.font")):ce.indexOf("titleposition")>-1?ze(ce,ce.replace("titleposition","title.position")):ce.indexOf("titleside")>-1?ze(ce,ce.replace("titleside","title.side")):ce.indexOf("titleoffset")>-1&&ze(ce,ce.replace("titleoffset","title.offset")):ze(ce,ce.replace("title","title.text"));function ze(le,de){Q[de]=Q[le],delete Q[le]}}function K(Q,oe,ce){Q=T.getGraphDiv(Q),g.clearPromiseQueue(Q);var me={};if(typeof oe=="string")me[oe]=ce;else{if(!T.isPlainObject(oe))return T.warn("Relayout fail.",oe,ce),Promise.reject();me=T.extendFlat({},oe)}Object.keys(me).length&&(Q.changed=!0);var Me=ee(Q,me),Re=Me.flags;Re.calc&&(Q.calcdata=void 0);var Ce=[r.previousPromises];Re.layoutReplot?Ce.push(y.layoutReplot):Object.keys(me).length&&(G(Q,Re,Me)||r.supplyDefaults(Q),Re.legend&&Ce.push(y.doLegend),Re.layoutstyle&&Ce.push(y.layoutStyles),Re.axrange&&V(Ce,Me.rangesAltered),Re.ticks&&Ce.push(y.doTicksRelayout),Re.modebar&&Ce.push(y.doModeBar),Re.camera&&Ce.push(y.doCamera),Re.colorbars&&Ce.push(y.doColorBars),Ce.push(u)),Ce.push(r.rehover,r.redrag,r.reselect),s.add(Q,K,[Q,Me.undoit],K,[Q,Me.redoit]);var ze=T.syncOrAsync(Ce,Q);return ze&&ze.then||(ze=Promise.resolve(Q)),ze.then(function(){return Q.emit("plotly_relayout",Me.eventData),Q})}function G(Q,oe,ce){var me=Q._fullLayout;if(!oe.axrange)return!1;for(var Me in oe)if(Me!=="axrange"&&oe[Me])return!1;for(var Re in ce.rangesAltered){var Ce=n.id2name(Re),ze=Q.layout[Ce],le=me[Ce];if(le.autorange=ze.autorange,ze.range&&(le.range=ze.range.slice()),le.cleanRange(),le._matchGroup){for(var de in le._matchGroup)if(de!==Re){var be=me[n.id2name(de)];be.autorange=le.autorange,be.range=le.range.slice(),be._input.range=le.range.slice()}}}return!0}function V(Q,oe){var ce=oe?function(me){var Me=[];for(var Re in oe){var Ce=n.getFromId(me,Re);if(Me.push(Re),(Ce.ticklabelposition||"").indexOf("inside")!==-1&&Ce._anchorAxis&&Me.push(Ce._anchorAxis._id),Ce._matchGroup)for(var ze in Ce._matchGroup)oe[ze]||Me.push(ze)}return n.draw(me,Me,{skipTitle:!0})}:function(me){return n.draw(me,"redraw")};Q.push(f,y.doAutoRangeAndConstraints,ce,y.drawData,y.finalDraw)}var W=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,J=/^[xyz]axis[0-9]*\.autorange$/,X=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ee(Q,oe){var ce,me,Me,Re=Q.layout,Ce=Q._fullLayout,ze=Ce._guiEditing,le=F(Ce._preGUI,ze),de=Object.keys(oe),be=n.list(Q),Fe=T.extendDeepAll({},oe),Ve={};for(j(oe),de=Object.keys(oe),me=0;me<de.length;me++)if(de[me].indexOf("allaxes")===0){for(Me=0;Me<be.length;Me++){var He=be[Me]._id.substr(1),rt=He.indexOf("scene")!==-1?He+".":"",tt=de[me].replace("allaxes",rt+be[Me]._name);oe[tt]||(oe[tt]=oe[de[me]])}delete oe[de[me]]}var ot=p.layoutFlags(),ht={},_t={};function dt(Kt,Mn){if(Array.isArray(Kt))Kt.forEach(function(xn){dt(xn,Mn)});else if(!(Kt in oe)&&!g.hasParent(oe,Kt)){var Un=le(Re,Kt);Kt in _t||(_t[Kt]=H(Un.get())),Mn!==void 0&&Un.set(Mn)}}var bt,St={};function Et(Kt){var Mn=n.name2id(Kt.split(".")[0]);return St[Mn]=1,Mn}for(var zt in oe){if(g.hasParent(oe,zt))throw new Error("cannot set "+zt+" and a parent attribute simultaneously");for(var Ut=le(Re,zt),Pt=oe[zt],Ze=Ut.parts.length-1;Ze>0&&typeof Ut.parts[Ze]!="string";)Ze--;var Ye=Ut.parts[Ze],Be=Ut.parts[Ze-1]+"."+Ye,ke=Ut.parts.slice(0,Ze).join("."),Pe=x(Q.layout,ke).get(),qe=x(Ce,ke).get(),Xe=Ut.get();if(Pt!==void 0){ht[zt]=Pt,_t[zt]=Ye==="reverse"?Pt:H(Xe);var nt=o.getLayoutValObject(Ce,Ut.parts);if(nt&&nt.impliedEdits&&Pt!==null)for(var ut in nt.impliedEdits)dt(T.relativeAttr(zt,ut),nt.impliedEdits[ut]);if(["width","height"].indexOf(zt)!==-1)if(Pt){dt("autosize",null);var ct=zt==="height"?"width":"height";dt(ct,Ce[ct])}else Ce[zt]=Q._initialAutoSize[zt];else if(zt==="autosize")dt("width",Pt?null:Ce.width),dt("height",Pt?null:Ce.height);else if(Be.match(W))Et(Be),x(Ce,ke+"._inputRange").set(null);else if(Be.match(J)){Et(Be),x(Ce,ke+"._inputRange").set(null);var Ct=x(Ce,ke).get();Ct._inputDomain&&(Ct._input.domain=Ct._inputDomain.slice())}else Be.match(X)&&x(Ce,ke+"._inputDomain").set(null);if(Ye==="type"){bt=Pe;var Lt=qe.type==="linear"&&Pt==="log",Mt=qe.type==="log"&&Pt==="linear";if(Lt||Mt){if(bt&&bt.range)if(qe.autorange)Lt&&(bt.range=bt.range[1]>bt.range[0]?[1,2]:[2,1]);else{var mt=bt.range[0],kt=bt.range[1];Lt?(mt<=0&&kt<=0&&dt(ke+".autorange",!0),mt<=0?mt=kt/1e6:kt<=0&&(kt=mt/1e6),dt(ke+".range[0]",Math.log(mt)/Math.LN10),dt(ke+".range[1]",Math.log(kt)/Math.LN10)):(dt(ke+".range[0]",Math.pow(10,mt)),dt(ke+".range[1]",Math.pow(10,kt)))}else dt(ke+".autorange",!0);Array.isArray(Ce._subplots.polar)&&Ce._subplots.polar.length&&Ce[Ut.parts[0]]&&Ut.parts[1]==="radialaxis"&&delete Ce[Ut.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(Q,qe,Pt,dt),t.getComponentMethod("images","convertCoords")(Q,qe,Pt,dt)}else dt(ke+".autorange",!0),dt(ke+".range",null);x(Ce,ke+"._inputRange").set(null)}else if(Ye.match(m)){var wt=x(Ce,zt).get(),Ot=(Pt||{}).type;Ot&&Ot!=="-"||(Ot="linear"),t.getComponentMethod("annotations","convertCoords")(Q,wt,Ot,dt),t.getComponentMethod("images","convertCoords")(Q,wt,Ot,dt)}var It=v.containerArrayMatch(zt);if(It){ce=It.array,me=It.index;var Nt=It.property,Dt=nt||{editType:"calc"};me!==""&&Nt===""&&(v.isAddVal(Pt)?_t[zt]=null:v.isRemoveVal(Pt)?_t[zt]=(x(Re,ce).get()||[])[me]:T.warn("unrecognized full object value",oe)),p.update(ot,Dt),Ve[ce]||(Ve[ce]={});var qt=Ve[ce][me];qt||(qt=Ve[ce][me]={}),qt[Nt]=Pt,delete oe[zt]}else Ye==="reverse"?(Pe.range?Pe.range.reverse():(dt(ke+".autorange",!0),Pe.range=[1,0]),qe.autorange?ot.calc=!0:ot.plot=!0):(zt==="dragmode"&&(Pt===!1&&Xe!==!1||Pt!==!1&&Xe===!1)||Ce._has("scatter-like")&&Ce._has("regl")&&zt==="dragmode"&&(Pt==="lasso"||Pt==="select")&&Xe!=="lasso"&&Xe!=="select"||Ce._has("gl2d")?ot.plot=!0:nt?p.update(ot,nt):ot.calc=!0,Ut.set(Pt))}}for(ce in Ve)v.applyContainerArrayChanges(Q,le(Re,ce),Ve[ce],ot,le)||(ot.plot=!0);for(var Xt in St){var cn=(bt=n.getFromId(Q,Xt))&&bt._constraintGroup;if(cn)for(var yn in ot.calc=!0,cn)St[yn]||(n.getFromId(Q,yn)._constraintShrinkable=!0)}return(re(Q)||oe.height||oe.width)&&(ot.plot=!0),(ot.plot||ot.calc)&&(ot.layoutReplot=!0),{flags:ot,rangesAltered:St,undoit:_t,redoit:ht,eventData:Fe}}function re(Q){var oe=Q._fullLayout,ce=oe.width,me=oe.height;return Q.layout.autosize&&r.plotAutoSize(Q,Q.layout,oe),oe.width!==ce||oe.height!==me}function ie(Q,oe,ce,me){Q=T.getGraphDiv(Q),g.clearPromiseQueue(Q),T.isPlainObject(oe)||(oe={}),T.isPlainObject(ce)||(ce={}),Object.keys(oe).length&&(Q.changed=!0),Object.keys(ce).length&&(Q.changed=!0);var Me=g.coerceTraceIndices(Q,me),Re=B(Q,T.extendFlat({},oe),Me),Ce=Re.flags,ze=ee(Q,T.extendFlat({},ce)),le=ze.flags;(Ce.calc||le.calc)&&(Q.calcdata=void 0),Ce.clearAxisTypes&&g.clearAxisTypes(Q,Me,ce);var de=[];le.layoutReplot?de.push(y.layoutReplot):Ce.fullReplot?de.push(R._doPlot):(de.push(r.previousPromises),G(Q,le,ze)||r.supplyDefaults(Q),Ce.style&&de.push(y.doTraceStyle),(Ce.colorbars||le.colorbars)&&de.push(y.doColorBars),le.legend&&de.push(y.doLegend),le.layoutstyle&&de.push(y.layoutStyles),le.axrange&&V(de,ze.rangesAltered),le.ticks&&de.push(y.doTicksRelayout),le.modebar&&de.push(y.doModeBar),le.camera&&de.push(y.doCamera),de.push(u)),de.push(r.rehover,r.redrag,r.reselect),s.add(Q,ie,[Q,Re.undoit,ze.undoit,Re.traces],ie,[Q,Re.redoit,ze.redoit,Re.traces]);var be=T.syncOrAsync(de,Q);return be&&be.then||(be=Promise.resolve(Q)),be.then(function(){return Q.emit("plotly_update",{data:Re.eventData,layout:ze.eventData}),Q})}function se(Q){return function(oe){oe._fullLayout._guiEditing=!0;var ce=Q.apply(null,arguments);return oe._fullLayout._guiEditing=!1,ce}}var fe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ye=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ge(Q,oe){for(var ce=0;ce<oe.length;ce++){var me=oe[ce],Me=Q.match(me.pattern);if(Me){var Re=Me[1]||"";return{head:Re,tail:Q.substr(Re.length+1),attr:me.attr}}}}function he(Q,oe){var ce=x(oe,Q).get();if(ce!==void 0)return ce;var me=Q.split(".");for(me.pop();me.length>1;)if(me.pop(),(ce=x(oe,me.join(".")+".uirevision").get())!==void 0)return ce;return oe.uirevision}function ve(Q,oe){for(var ce=0;ce<oe.length;ce++)if(oe[ce]._fullInput.uid===Q)return ce;return-1}function Ie(Q,oe,ce){for(var me=0;me<oe.length;me++)if(oe[me].uid===Q)return me;return!oe[ce]||oe[ce].uid?-1:ce}function xe(Q,oe){var ce=T.isPlainObject(Q),me=Array.isArray(Q);return ce||me?(ce&&T.isPlainObject(oe)||me&&Array.isArray(oe))&&JSON.stringify(Q)===JSON.stringify(oe):Q===oe}function Ae(Q,oe,ce,me){var Me,Re,Ce,ze=me.getValObject,le=me.flags,de=me.immutable,be=me.inArray,Fe=me.arrayIndex;function Ve(){var Pe=Me.editType;be&&Pe.indexOf("arraydraw")!==-1?T.pushUnique(le.arrays[be],Fe):(p.update(le,Me),Pe!=="none"&&le.nChanges++,me.transition&&Me.anim&&le.nChangesAnim++,(W.test(Ce)||J.test(Ce))&&(le.rangesAltered[ce[0]]=1),X.test(Ce)&&x(oe,"_inputDomain").set(null),Re==="datarevision"&&(le.newDataRevision=1))}function He(Pe){return Pe.valType==="data_array"||Pe.arrayOk}for(Re in Q){if(le.calc&&!me.transition)return;var rt=Q[Re],tt=oe[Re],ot=ce.concat(Re);if(Ce=ot.join("."),Re.charAt(0)!=="_"&&typeof rt!="function"&&rt!==tt){if((Re==="tick0"||Re==="dtick")&&ce[0]!=="geo"){var ht=oe.tickmode;if(ht==="auto"||ht==="array"||!ht)continue}if((Re!=="range"||!oe.autorange)&&(Re!=="zmin"&&Re!=="zmax"||oe.type!=="contourcarpet")&&(Me=ze(ot))&&(!Me._compareAsJSON||JSON.stringify(rt)!==JSON.stringify(tt))){var _t,dt=Me.valType,bt=He(Me),St=Array.isArray(rt),Et=Array.isArray(tt);if(St&&Et){var zt="_input_"+Re,Ut=Q[zt],Pt=oe[zt];if(Array.isArray(Ut)&&Ut===Pt)continue}if(tt===void 0)bt&&St?le.calc=!0:Ve();else if(Me._isLinkedToArray){var Ze=[],Ye=!1;be||(le.arrays[Re]=Ze);var Be=Math.min(rt.length,tt.length),ke=Math.max(rt.length,tt.length);if(Be!==ke){if(Me.editType!=="arraydraw"){Ve();continue}Ye=!0}for(_t=0;_t<Be;_t++)Ae(rt[_t],tt[_t],ot.concat(_t),T.extendFlat({inArray:Re,arrayIndex:_t},me));if(Ye)for(_t=Be;_t<ke;_t++)Ze.push(_t)}else!dt&&T.isPlainObject(rt)?Ae(rt,tt,ot,me):bt?St&&Et?(de&&(le.calc=!0),(de||me.newDataRevision)&&Ve()):St!==Et?le.calc=!0:Ve():St&&Et&&rt.length===tt.length&&String(rt)===String(tt)||Ve()}}}for(Re in oe)if(!(Re in Q)&&Re.charAt(0)!=="_"&&typeof oe[Re]!="function"){if(He(Me=ze(ce.concat(Re)))&&Array.isArray(oe[Re]))return void(le.calc=!0);Ve()}}function Se(Q,oe){var ce;for(ce in Q)if(ce.charAt(0)!=="_"){var me=Q[ce],Me=oe[ce];if(me!==Me)if(T.isPlainObject(me)&&T.isPlainObject(Me)){if(Se(me,Me))return!0}else{if(!Array.isArray(me)||!Array.isArray(Me)||me.length!==Me.length)return!0;for(var Re=0;Re<me.length;Re++)if(me[Re]!==Me[Re]&&(!T.isPlainObject(me[Re])||!T.isPlainObject(Me[Re])||Se(me[Re],Me[Re])))return!0}}}function Te(Q){var oe=Q._fullLayout,ce=Q.getBoundingClientRect();if(!T.equalDomRects(ce,oe._lastBBox)){var me=oe._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(Q));oe._invScaleX=Math.sqrt(me[0][0]*me[0][0]+me[0][1]*me[0][1]+me[0][2]*me[0][2]),oe._invScaleY=Math.sqrt(me[1][0]*me[1][0]+me[1][1]*me[1][1]+me[1][2]*me[1][2]),oe._lastBBox=ce}}R.animate=function(Q,oe,ce){if(Q=T.getGraphDiv(Q),!T.isPlotDiv(Q))throw new Error("This element is not a Plotly plot: "+Q+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var me=Q._transitionData;me._frameQueue||(me._frameQueue=[]);var Me=(ce=r.supplyAnimationDefaults(ce)).transition,Re=ce.frame;function Ce(de){return Array.isArray(Me)?de>=Me.length?Me[0]:Me[de]:Me}function ze(de){return Array.isArray(Re)?de>=Re.length?Re[0]:Re[de]:Re}function le(de,be){var Fe=0;return function(){if(de&&++Fe===be)return de()}}return me._frameWaitingCnt===void 0&&(me._frameWaitingCnt=0),new Promise(function(de,be){function Fe(){Q.emit("plotly_animating"),me._lastFrameAt=-1/0,me._timeToNext=0,me._runningTransitions=0,me._currentFrame=null;var zt=function(){me._animationRaf=window.requestAnimationFrame(zt),Date.now()-me._lastFrameAt>me._timeToNext&&function(){me._currentFrame&&me._currentFrame.onComplete&&me._currentFrame.onComplete();var Ut=me._currentFrame=me._frameQueue.shift();if(Ut){var Pt=Ut.name?Ut.name.toString():null;Q._fullLayout._currentFrame=Pt,me._lastFrameAt=Date.now(),me._timeToNext=Ut.frameOpts.duration,r.transition(Q,Ut.frame.data,Ut.frame.layout,g.coerceTraceIndices(Q,Ut.frame.traces),Ut.frameOpts,Ut.transitionOpts).then(function(){Ut.onComplete&&Ut.onComplete()}),Q.emit("plotly_animatingframe",{name:Pt,frame:Ut.frame,animation:{frame:Ut.frameOpts,transition:Ut.transitionOpts}})}else Q.emit("plotly_animated"),window.cancelAnimationFrame(me._animationRaf),me._animationRaf=null}()};zt()}var Ve,He,rt=0;function tt(zt){return Array.isArray(Me)?rt>=Me.length?zt.transitionOpts=Me[rt]:zt.transitionOpts=Me[0]:zt.transitionOpts=Me,rt++,zt}var ot=[],ht=oe==null,_t=Array.isArray(oe);if(ht||_t||!T.isPlainObject(oe)){if(ht||["string","number"].indexOf(typeof oe)!==-1)for(Ve=0;Ve<me._frames.length;Ve++)(He=me._frames[Ve])&&(ht||String(He.group)===String(oe))&&ot.push({type:"byname",name:String(He.name),data:tt({name:He.name})});else if(_t)for(Ve=0;Ve<oe.length;Ve++){var dt=oe[Ve];["number","string"].indexOf(typeof dt)!==-1?(dt=String(dt),ot.push({type:"byname",name:dt,data:tt({name:dt})})):T.isPlainObject(dt)&&ot.push({type:"object",data:tt(T.extendFlat({},dt))})}}else ot.push({type:"object",data:tt(T.extendFlat({},oe))});for(Ve=0;Ve<ot.length;Ve++)if((He=ot[Ve]).type==="byname"&&!me._frameHash[He.data.name])return T.warn('animate failure: frame not found: "'+He.data.name+'"'),void be();["next","immediate"].indexOf(ce.mode)!==-1&&function(){if(me._frameQueue.length!==0){for(;me._frameQueue.length;){var zt=me._frameQueue.pop();zt.onInterrupt&&zt.onInterrupt()}Q.emit("plotly_animationinterrupted",[])}}(),ce.direction==="reverse"&&ot.reverse();var bt=Q._fullLayout._currentFrame;if(bt&&ce.fromcurrent){var St=-1;for(Ve=0;Ve<ot.length;Ve++)if((He=ot[Ve]).type==="byname"&&He.name===bt){St=Ve;break}if(St>0&&St<ot.length-1){var Et=[];for(Ve=0;Ve<ot.length;Ve++)He=ot[Ve],(ot[Ve].type!=="byname"||Ve>St)&&Et.push(He);ot=Et}}ot.length>0?function(zt){if(zt.length!==0){for(var Ut=0;Ut<zt.length;Ut++){var Pt;Pt=zt[Ut].type==="byname"?r.computeFrame(Q,zt[Ut].name):zt[Ut].data;var Ze=ze(Ut),Ye=Ce(Ut);Ye.duration=Math.min(Ye.duration,Ze.duration);var Be={frame:Pt,name:zt[Ut].name,frameOpts:Ze,transitionOpts:Ye};Ut===zt.length-1&&(Be.onComplete=le(de,2),Be.onInterrupt=be),me._frameQueue.push(Be)}ce.mode==="immediate"&&(me._lastFrameAt=-1/0),me._animationRaf||Fe()}}(ot):(Q.emit("plotly_animated"),de())})},R.addFrames=function(Q,oe,ce){if(Q=T.getGraphDiv(Q),oe==null)return Promise.resolve();if(!T.isPlotDiv(Q))throw new Error("This element is not a Plotly plot: "+Q+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var me,Me,Re,Ce,ze=Q._transitionData._frames,le=Q._transitionData._frameHash;if(!Array.isArray(oe))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+oe);var de=ze.length+2*oe.length,be=[],Fe={};for(me=oe.length-1;me>=0;me--)if(T.isPlainObject(oe[me])){var Ve=oe[me].name,He=(le[Ve]||Fe[Ve]||{}).name,rt=oe[me].name,tt=le[He]||Fe[He];He&&rt&&typeof rt=="number"&&tt&&w<5&&(w++,T.warn('addFrames: overwriting frame "'+(le[He]||Fe[He]).name+'" with a frame whose name of type "number" also equates to "'+He+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),w===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Fe[Ve]={name:Ve},be.push({frame:r.supplyFrameDefaults(oe[me]),index:ce&&ce[me]!==void 0&&ce[me]!==null?ce[me]:de+me})}be.sort(function(zt,Ut){return zt.index>Ut.index?-1:zt.index<Ut.index?1:0});var ot=[],ht=[],_t=ze.length;for(me=be.length-1;me>=0;me--){if(typeof(Me=be[me].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Me.name)for(;le[Me.name="frame "+Q._transitionData._counter++];);if(le[Me.name]){for(Re=0;Re<ze.length&&(ze[Re]||{}).name!==Me.name;Re++);ot.push({type:"replace",index:Re,value:Me}),ht.unshift({type:"replace",index:Re,value:ze[Re]})}else Ce=Math.max(0,Math.min(be[me].index,_t)),ot.push({type:"insert",index:Ce,value:Me}),ht.unshift({type:"delete",index:Ce}),_t++}var dt=r.modifyFrames,bt=r.modifyFrames,St=[Q,ht],Et=[Q,ot];return s&&s.add(Q,dt,St,bt,Et),r.modifyFrames(Q,ot)},R.deleteFrames=function(Q,oe){if(Q=T.getGraphDiv(Q),!T.isPlotDiv(Q))throw new Error("This element is not a Plotly plot: "+Q);var ce,me,Me=Q._transitionData._frames,Re=[],Ce=[];if(!oe)for(oe=[],ce=0;ce<Me.length;ce++)oe.push(ce);for((oe=oe.slice()).sort(),ce=oe.length-1;ce>=0;ce--)me=oe[ce],Re.push({type:"delete",index:me}),Ce.unshift({type:"insert",index:me,value:Me[me]});var ze=r.modifyFrames,le=r.modifyFrames,de=[Q,Ce],be=[Q,Re];return s&&s.add(Q,ze,de,le,be),r.modifyFrames(Q,Re)},R.addTraces=function Q(oe,ce,me){oe=T.getGraphDiv(oe);var Me,Re,Ce=[],ze=R.deleteTraces,le=Q,de=[oe,Ce],be=[oe,ce];for(function(Fe,Ve,He){var rt,tt;if(!Array.isArray(Fe.data))throw new Error("gd.data must be an array.");if(Ve===void 0)throw new Error("traces must be defined.");for(Array.isArray(Ve)||(Ve=[Ve]),rt=0;rt<Ve.length;rt++)if(typeof(tt=Ve[rt])!="object"||Array.isArray(tt)||tt===null)throw new Error("all values in traces array must be non-array objects");if(He===void 0||Array.isArray(He)||(He=[He]),He!==void 0&&He.length!==Ve.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(oe,ce,me),Array.isArray(ce)||(ce=[ce]),ce=ce.map(function(Fe){return T.extendFlat({},Fe)}),g.cleanData(ce),Me=0;Me<ce.length;Me++)oe.data.push(ce[Me]);for(Me=0;Me<ce.length;Me++)Ce.push(-ce.length+Me);if(me===void 0)return Re=R.redraw(oe),s.add(oe,ze,de,le,be),Re;Array.isArray(me)||(me=[me]);try{P(oe,Ce,me)}catch(Fe){throw oe.data.splice(oe.data.length-ce.length,ce.length),Fe}return s.startSequence(oe),s.add(oe,ze,de,le,be),Re=R.moveTraces(oe,Ce,me),s.stopSequence(oe),Re},R.deleteTraces=function Q(oe,ce){oe=T.getGraphDiv(oe);var me,Me,Re=[],Ce=R.addTraces,ze=Q,le=[oe,Re,ce],de=[oe,ce];if(ce===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(ce)||(ce=[ce]),C(oe,ce,"indices"),(ce=L(ce,oe.data.length-1)).sort(T.sorterDes),me=0;me<ce.length;me+=1)Me=oe.data.splice(ce[me],1)[0],Re.push(Me);var be=R.redraw(oe);return s.add(oe,Ce,le,ze,de),be},R.extendTraces=function Q(oe,ce,me,Me){function Re(de,be,Fe){var Ve,He;if(T.isTypedArray(de))if(Fe<0){var rt=new de.constructor(0),tt=U(de,be);Fe<0?(Ve=tt,He=rt):(Ve=rt,He=tt)}else if(Ve=new de.constructor(Fe),He=new de.constructor(de.length+be.length-Fe),Fe===be.length)Ve.set(be),He.set(de);else if(Fe<be.length){var ot=be.length-Fe;Ve.set(be.subarray(ot)),He.set(de),He.set(be.subarray(0,ot),de.length)}else{var ht=Fe-be.length,_t=de.length-ht;Ve.set(de.subarray(_t)),Ve.set(be,ht),He.set(de.subarray(0,_t))}else Ve=de.concat(be),He=Fe>=0&&Fe<Ve.length?Ve.splice(0,Ve.length-Fe):[];return[Ve,He]}var Ce=I(oe=T.getGraphDiv(oe),ce,me,Me,Re),ze=R.redraw(oe),le=[oe,Ce.update,me,Ce.maxPoints];return s.add(oe,R.prependTraces,le,Q,arguments),ze},R.moveTraces=function Q(oe,ce,me){var Me,Re=[],Ce=[],ze=Q,le=Q,de=[oe=T.getGraphDiv(oe),me,ce],be=[oe,ce,me];if(P(oe,ce,me),ce=Array.isArray(ce)?ce:[ce],me===void 0)for(me=[],Me=0;Me<ce.length;Me++)me.push(-ce.length+Me);for(me=Array.isArray(me)?me:[me],ce=L(ce,oe.data.length-1),me=L(me,oe.data.length-1),Me=0;Me<oe.data.length;Me++)ce.indexOf(Me)===-1&&Re.push(oe.data[Me]);for(Me=0;Me<ce.length;Me++)Ce.push({newIndex:me[Me],trace:oe.data[ce[Me]]});for(Ce.sort(function(Ve,He){return Ve.newIndex-He.newIndex}),Me=0;Me<Ce.length;Me+=1)Re.splice(Ce[Me].newIndex,0,Ce[Me].trace);oe.data=Re;var Fe=R.redraw(oe);return s.add(oe,ze,de,le,be),Fe},R.prependTraces=function Q(oe,ce,me,Me){function Re(de,be,Fe){var Ve,He;if(T.isTypedArray(de))if(Fe<=0){var rt=new de.constructor(0),tt=U(be,de);Fe<0?(Ve=tt,He=rt):(Ve=rt,He=tt)}else if(Ve=new de.constructor(Fe),He=new de.constructor(de.length+be.length-Fe),Fe===be.length)Ve.set(be),He.set(de);else if(Fe<be.length){var ot=be.length-Fe;Ve.set(be.subarray(0,ot)),He.set(be.subarray(ot)),He.set(de,ot)}else{var ht=Fe-be.length;Ve.set(be),Ve.set(de.subarray(0,ht),be.length),He.set(de.subarray(ht))}else Ve=be.concat(de),He=Fe>=0&&Fe<Ve.length?Ve.splice(Fe,Ve.length):[];return[Ve,He]}var Ce=I(oe=T.getGraphDiv(oe),ce,me,Me,Re),ze=R.redraw(oe),le=[oe,Ce.update,me,Ce.maxPoints];return s.add(oe,R.extendTraces,le,Q,arguments),ze},R.newPlot=function(Q,oe,ce,me){return Q=T.getGraphDiv(Q),r.cleanPlot([],{},Q._fullData||[],Q._fullLayout||{}),r.purge(Q),R._doPlot(Q,oe,ce,me)},R._doPlot=function(Q,oe,ce,me){var Me;if(Q=T.getGraphDiv(Q),d.init(Q),T.isPlainObject(oe)){var Re=oe;oe=Re.data,ce=Re.layout,me=Re.config,Me=Re.frames}if(d.triggerHandler(Q,"plotly_beforeplot",[oe,ce,me])===!1)return Promise.reject();oe||ce||T.isPlotDiv(Q)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Q),E(Q,me),ce||(ce={}),A.select(Q).classed("js-plotly-plot",!0),a.makeTester(),Array.isArray(Q._promises)||(Q._promises=[]);var Ce=(Q.data||[]).length===0&&Array.isArray(oe);Array.isArray(oe)&&(g.cleanData(oe),Ce?Q.data=oe:Q.data.push.apply(Q.data,oe),Q.empty=!1),Q.layout&&!Ce||(Q.layout=g.cleanLayout(ce)),r.supplyDefaults(Q);var ze=Q._fullLayout,le=ze._has("cartesian");ze._replotting=!0,(Ce||ze._shouldCreateBgLayer)&&(function(ht){var _t=A.select(ht),dt=ht._fullLayout;if(dt._calcInverseTransform=Te,dt._calcInverseTransform(ht),dt._container=_t.selectAll(".plot-container").data([0]),dt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),dt._paperdiv=dt._container.selectAll(".svg-container").data([0]),dt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),dt._glcontainer=dt._paperdiv.selectAll(".gl-container").data([{}]),dt._glcontainer.enter().append("div").classed("gl-container",!0),dt._paperdiv.selectAll(".main-svg").remove(),dt._paperdiv.select(".modebar-container").remove(),dt._paper=dt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),dt._toppaper=dt._paperdiv.append("svg").classed("main-svg",!0),dt._modebardiv=dt._paperdiv.append("div"),delete dt._modeBar,dt._hoverpaper=dt._paperdiv.append("svg").classed("main-svg",!0),!dt._uid){var bt={};A.selectAll("defs").each(function(){this.id&&(bt[this.id.split("-")[1]]=1)}),dt._uid=T.randstr(bt)}dt._paperdiv.selectAll(".main-svg").attr(h.svgAttrs),dt._defs=dt._paper.append("defs").attr("id","defs-"+dt._uid),dt._clips=dt._defs.append("g").classed("clips",!0),dt._topdefs=dt._toppaper.append("defs").attr("id","topdefs-"+dt._uid),dt._topclips=dt._topdefs.append("g").classed("clips",!0),dt._bgLayer=dt._paper.append("g").classed("bglayer",!0),dt._draggers=dt._paper.append("g").classed("draglayer",!0);var St=dt._paper.append("g").classed("layer-below",!0);dt._imageLowerLayer=St.append("g").classed("imagelayer",!0),dt._shapeLowerLayer=St.append("g").classed("shapelayer",!0),dt._cartesianlayer=dt._paper.append("g").classed("cartesianlayer",!0),dt._polarlayer=dt._paper.append("g").classed("polarlayer",!0),dt._smithlayer=dt._paper.append("g").classed("smithlayer",!0),dt._ternarylayer=dt._paper.append("g").classed("ternarylayer",!0),dt._geolayer=dt._paper.append("g").classed("geolayer",!0),dt._funnelarealayer=dt._paper.append("g").classed("funnelarealayer",!0),dt._pielayer=dt._paper.append("g").classed("pielayer",!0),dt._iciclelayer=dt._paper.append("g").classed("iciclelayer",!0),dt._treemaplayer=dt._paper.append("g").classed("treemaplayer",!0),dt._sunburstlayer=dt._paper.append("g").classed("sunburstlayer",!0),dt._indicatorlayer=dt._toppaper.append("g").classed("indicatorlayer",!0),dt._glimages=dt._paper.append("g").classed("glimages",!0);var Et=dt._toppaper.append("g").classed("layer-above",!0);dt._imageUpperLayer=Et.append("g").classed("imagelayer",!0),dt._shapeUpperLayer=Et.append("g").classed("shapelayer",!0),dt._selectionLayer=dt._toppaper.append("g").classed("selectionlayer",!0),dt._infolayer=dt._toppaper.append("g").classed("infolayer",!0),dt._menulayer=dt._toppaper.append("g").classed("menulayer",!0),dt._zoomlayer=dt._toppaper.append("g").classed("zoomlayer",!0),dt._hoverlayer=dt._hoverpaper.append("g").classed("hoverlayer",!0),dt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ht.emit("plotly_framework")}(Q),ze._shouldCreateBgLayer&&delete ze._shouldCreateBgLayer),a.initGradients(Q),a.initPatterns(Q),Ce&&n.saveShowSpikeInitial(Q);var de=!Q.calcdata||Q.calcdata.length!==(Q._fullData||[]).length;de&&r.doCalcdata(Q);for(var be=0;be<Q.calcdata.length;be++)Q.calcdata[be][0].trace=Q._fullData[be];Q._context.responsive?Q._responsiveChartHandler||(Q._responsiveChartHandler=function(){T.isHidden(Q)||r.resize(Q)},window.addEventListener("resize",Q._responsiveChartHandler)):T.clearResponsive(Q);var Fe=T.extendFlat({},ze._size),Ve=0;function He(){if(r.clearAutoMarginIds(Q),y.drawMarginPushers(Q),n.allowAutoMargin(Q),ze._has("pie"))for(var ht=Q._fullData,_t=0;_t<ht.length;_t++){var dt=ht[_t];dt.type==="pie"&&dt.automargin&&r.allowAutoMargin(Q,"pie."+dt.uid+".automargin")}return r.doAutoMargin(Q),r.previousPromises(Q)}function rt(){Q._transitioning||(y.doAutoRangeAndConstraints(Q),Ce&&n.saveRangeInitial(Q),t.getComponentMethod("rangeslider","calcAutorange")(Q))}var tt=[r.previousPromises,function(){if(Me)return R.addFrames(Q,Me)},function ht(){for(var _t=ze._basePlotModules,dt=0;dt<_t.length;dt++)_t[dt].drawFramework&&_t[dt].drawFramework(Q);!ze._glcanvas&&ze._has("gl")&&(ze._glcanvas=ze._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(zt){return zt.key}),ze._glcanvas.enter().append("canvas").attr("class",function(zt){return"gl-canvas gl-canvas-"+zt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var bt=Q._context.plotGlPixelRatio;if(ze._glcanvas){ze._glcanvas.attr("width",ze.width*bt).attr("height",ze.height*bt).style("width",ze.width+"px").style("height",ze.height+"px");var St=ze._glcanvas.data()[0].regl;if(St&&(Math.floor(ze.width*bt)!==St._gl.drawingBufferWidth||Math.floor(ze.height*bt)!==St._gl.drawingBufferHeight)){var Et="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ve)return T.log(Et+" Clearing graph and plotting again."),r.cleanPlot([],{},Q._fullData,ze),r.supplyDefaults(Q),ze=Q._fullLayout,r.doCalcdata(Q),Ve++,ht();T.error(Et)}}return ze.modebar.orientation==="h"?ze._modebardiv.style("height",null).style("width","100%"):ze._modebardiv.style("width",null).style("height",ze.height+"px"),r.previousPromises(Q)},He,function(){if(r.didMarginChange(Fe,ze._size))return T.syncOrAsync([He,y.layoutStyles],Q)}];le&&tt.push(function(){if(de)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),rt],Q);rt()}),tt.push(y.layoutStyles),le&&tt.push(function(){return n.draw(Q,Ce?"":"redraw")},function(ht){ht._fullLayout._insideTickLabelsAutorange&&K(ht,ht._fullLayout._insideTickLabelsAutorange).then(function(){ht._fullLayout._insideTickLabelsAutorange=void 0})}),tt.push(y.drawData,y.finalDraw,c,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,function(ht){ht._fullLayout._insideTickLabelsAutorange&&Ce&&n.saveRangeInitial(ht,!0)},r.previousPromises);var ot=T.syncOrAsync(tt,Q);return ot&&ot.then||(ot=Promise.resolve()),ot.then(function(){return u(Q),Q})},R.purge=function(Q){var oe=(Q=T.getGraphDiv(Q))._fullLayout||{},ce=Q._fullData||[];return r.cleanPlot([],{},ce,oe),r.purge(Q),d.purge(Q),oe._container&&oe._container.remove(),delete Q._context,Q},R.react=function(Q,oe,ce,me){var Me,Re;Q=T.getGraphDiv(Q),g.clearPromiseQueue(Q);var Ce=Q._fullData,ze=Q._fullLayout;if(T.isPlotDiv(Q)&&Ce&&ze){if(T.isPlainObject(oe)){var le=oe;oe=le.data,ce=le.layout,me=le.config,Me=le.frames}var de=!1;if(me){var be=T.extendDeep({},Q._context);Q._context=void 0,E(Q,me),de=Se(be,Q._context)}Q.data=oe||[],g.cleanData(Q.data),Q.layout=ce||{},g.cleanLayout(Q.layout),function(ke,Pe,qe,Xe){var nt,ut,ct,Ct,Lt,Mt,mt,kt,wt,Ot,It=Xe._preGUI,Nt=[],Dt={},qt={};for(nt in It){if(Lt=ge(nt,fe)){if(wt=Lt.head,Ot=Lt.tail,ut=Lt.attr||wt+".uirevision",(Ct=(ct=x(Xe,ut).get())&&he(ut,Pe))&&Ct===ct){if((Mt=It[nt])===null&&(Mt=void 0),xe(kt=(mt=x(Pe,nt)).get(),Mt)){kt===void 0&&Ot==="autorange"&&Nt.push(wt),mt.set(H(x(Xe,nt).get()));continue}if(Ot==="autorange"||Ot.substr(0,6)==="range["){var Xt=It[wt+".range[0]"],cn=It[wt+".range[1]"],yn=It[wt+".autorange"];if(yn||yn===null&&Xt===null&&cn===null){if(!(wt in Dt)){var Kt=x(Pe,wt).get();Dt[wt]=Kt&&(Kt.autorange||Kt.autorange!==!1&&(!Kt.range||Kt.range.length!==2))}if(Dt[wt]){mt.set(H(x(Xe,nt).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+nt);delete It[nt],Lt&&Lt.tail.substr(0,6)==="range["&&(qt[Lt.head]=1)}for(var Mn=0;Mn<Nt.length;Mn++){var Un=Nt[Mn];if(qt[Un]){var xn=x(Pe,Un).get();xn&&delete xn.autorange}}var dn=Xe._tracePreGUI;for(var gn in dn){var an,sn=dn[gn],On=null;for(nt in sn){if(!On){var En=ve(gn,qe);if(En<0){delete dn[gn];break}var Dn=Ie(gn,ke,(an=qe[En]._fullInput).index);if(Dn<0){delete dn[gn];break}On=ke[Dn]}if(Lt=ge(nt,ye)){if(Lt.attr?Ct=(ct=x(Xe,Lt.attr).get())&&he(Lt.attr,Pe):(ct=an.uirevision,(Ct=On.uirevision)===void 0&&(Ct=Pe.uirevision)),Ct&&Ct===ct&&((Mt=sn[nt])===null&&(Mt=void 0),xe(kt=(mt=x(On,nt)).get(),Mt))){mt.set(H(x(an,nt).get()));continue}}else T.warn("unrecognized GUI edit: "+nt+" in trace uid "+gn);delete sn[nt]}}}(Q.data,Q.layout,Ce,ze),r.supplyDefaults(Q,{skipUpdateCalc:!0});var Fe=Q._fullData,Ve=Q._fullLayout,He=Ve.datarevision===void 0,rt=Ve.transition,tt=function(ke,Pe,qe,Xe,nt){var ut=p.layoutFlags();return ut.arrays={},ut.rangesAltered={},ut.nChanges=0,ut.nChangesAnim=0,Ae(Pe,qe,[],{getValObject:function(ct){return o.getLayoutValObject(qe,ct)},flags:ut,immutable:Xe,transition:nt,gd:ke}),(ut.plot||ut.calc)&&(ut.layoutReplot=!0),nt&&ut.nChanges&&ut.nChangesAnim&&(ut.anim=ut.nChanges===ut.nChangesAnim?"all":"some"),ut}(Q,ze,Ve,He,rt),ot=tt.newDataRevision,ht=function(ke,Pe,qe,Xe,nt,ut){var ct=Pe.length===qe.length;if(!nt&&!ct)return{fullReplot:!0,calc:!0};var Ct,Lt,Mt=p.traceFlags();Mt.arrays={},Mt.nChanges=0,Mt.nChangesAnim=0;var mt={getValObject:function(wt){var Ot=o.getTraceValObject(Lt,wt);return!Lt._module.animatable&&Ot.anim&&(Ot.anim=!1),Ot},flags:Mt,immutable:Xe,transition:nt,newDataRevision:ut,gd:ke},kt={};for(Ct=0;Ct<Pe.length;Ct++)if(qe[Ct]){if(Lt=qe[Ct]._fullInput,r.hasMakesDataTransform(Lt)&&(Lt=qe[Ct]),kt[Lt.uid])continue;kt[Lt.uid]=1,Ae(Pe[Ct]._fullInput,Lt,[],mt)}return(Mt.calc||Mt.plot)&&(Mt.fullReplot=!0),nt&&Mt.nChanges&&Mt.nChangesAnim&&(Mt.anim=Mt.nChanges===Mt.nChangesAnim&&ct?"all":"some"),Mt}(Q,Ce,Fe,He,rt,ot);if(re(Q)&&(tt.layoutReplot=!0),ht.calc||tt.calc){Q.calcdata=void 0;for(var _t=Object.getOwnPropertyNames(Ve),dt=0;dt<_t.length;dt++){var bt=_t[dt],St=bt.substring(0,5);if(St==="xaxis"||St==="yaxis"){var Et=Ve[bt]._emptyCategories;Et&&Et()}}}else r.supplyDefaultsUpdateCalc(Q.calcdata,Fe);var zt=[];if(Me&&(Q._transitionData={},r.createTransitionData(Q),zt.push(function(){return R.addFrames(Q,Me)})),Ve.transition&&!de&&(ht.anim||tt.anim))tt.ticks&&zt.push(y.doTicksRelayout),r.doCalcdata(Q),y.doAutoRangeAndConstraints(Q),zt.push(function(){return r.transitionFromReact(Q,ht,tt,ze)});else if(ht.fullReplot||tt.layoutReplot||de)Q._fullLayout._skipDefaults=!0,zt.push(R._doPlot);else{for(var Ut in tt.arrays){var Pt=tt.arrays[Ut];if(Pt.length){var Ze=t.getComponentMethod(Ut,"drawOne");if(Ze!==T.noop)for(var Ye=0;Ye<Pt.length;Ye++)Ze(Q,Pt[Ye]);else{var Be=t.getComponentMethod(Ut,"draw");if(Be===T.noop)throw new Error("cannot draw components: "+Ut);Be(Q)}}}zt.push(r.previousPromises),ht.style&&zt.push(y.doTraceStyle),(ht.colorbars||tt.colorbars)&&zt.push(y.doColorBars),tt.legend&&zt.push(y.doLegend),tt.layoutstyle&&zt.push(y.layoutStyles),tt.axrange&&V(zt),tt.ticks&&zt.push(y.doTicksRelayout),tt.modebar&&zt.push(y.doModeBar),tt.camera&&zt.push(y.doCamera),zt.push(u)}zt.push(r.rehover,r.redrag,r.reselect),(Re=T.syncOrAsync(zt,Q))&&Re.then||(Re=Promise.resolve(Q))}else Re=R.newPlot(Q,oe,ce,me);return Re.then(function(){return Q.emit("plotly_react",{data:oe,layout:ce}),Q})},R.redraw=function(Q){if(Q=T.getGraphDiv(Q),!T.isPlotDiv(Q))throw new Error("This element is not a Plotly plot: "+Q);return g.cleanData(Q.data),g.cleanLayout(Q.layout),Q.calcdata=void 0,R._doPlot(Q).then(function(){return Q.emit("plotly_redraw"),Q})},R.relayout=K,R.restyle=z,R.setPlotConfig=function(Q){return T.extendFlat(b,Q)},R.update=ie,R._guiRelayout=se(K),R._guiRestyle=se(z),R._guiUpdate=se(ie),R._storeDirectGUIEdit=function(Q,oe,ce){for(var me in ce)N(me,x(Q,me).get(),ce[me],oe)}},72075:function($){var R={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function A(k,l){for(var T in k){var x=k[T];x.valType?l[T]=x.dflt:(l[T]||(l[T]={}),A(x,l[T]))}})(R,e),$.exports={configAttributes:R,dfltConfig:e}},86281:function($,R,e){var A=e(73972),k=e(71828),l=e(9012),T=e(10820),x=e(31391),d=e(85594),s=e(72075).configAttributes,t=e(30962),o=k.extendDeepAll,r=k.isPlainObject,n=k.isArrayOrTypedArray,a=k.nestedProperty,i=k.valObjectMeta,c="_isSubplotObj",h="_isLinkedToArray",f="_deprecated",b=[c,h,"_arrayAttrRegexps",f];function v(u,S,_){if(!u)return!1;if(u._isLinkedToArray){if(g(S[_]))_++;else if(_<S.length)return!1}for(;_<S.length;_++){var E=u[S[_]];if(!r(E)||(u=E,_===S.length-1))break;if(u._isLinkedToArray){if(!g(S[++_]))return!1}else if(u.valType==="info_array"){var L=S[++_];if(!g(L))return!1;var C=u.items;if(Array.isArray(C)){if(L>=C.length)return!1;if(u.dimensions===2){if(_++,S.length===_)return u;var P=S[_];if(!g(P))return!1;u=C[L][P]}else u=C[L]}else u=C}}return u}function g(u){return u===Math.round(u)&&u>=0}function y(){var u,S,_={};for(u in o(_,T),A.subplotsRegistry)if((S=A.subplotsRegistry[u]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)m(_,S,S.attr[E]);else m(_,S,S.attr==="subplot"?S.name:S.attr);for(u in A.componentsRegistry){var L=(S=A.componentsRegistry[u]).schema;if(L&&(L.subplots||L.layout)){var C=L.subplots;if(C&&C.xaxis&&!C.yaxis)for(var P in C.xaxis)delete _.yaxis[P];delete _.xaxis.shift,delete _.xaxis.autoshift}else S.name==="colorscale"?o(_,S.layoutAttributes):S.layoutAttributes&&w(_,S.layoutAttributes,S.name)}return{layoutAttributes:p(_)}}function p(u){return function(S){R.crawl(S,function(_,E,L){R.isValObject(_)?_.arrayOk!==!0&&_.valType!=="data_array"||(L[E+"src"]={valType:"string",editType:"none"}):r(_)&&(_.role="object")})}(u),function(S){R.crawl(S,function(_,E,L){if(_){var C=_._isLinkedToArray;C&&(delete _._isLinkedToArray,L[E]={items:{}},L[E].items[C]=_,L[E].role="object")}})}(u),function(S){(function _(E){for(var L in E)if(r(E[L]))_(E[L]);else if(Array.isArray(E[L]))for(var C=0;C<E[L].length;C++)_(E[L][C]);else E[L]instanceof RegExp&&(E[L]=E[L].toString())})(S)}(u),u}function m(u,S,_){var E=a(u,_),L=o({},S.layoutAttributes);L._isSubplotObj=!0,E.set(L)}function w(u,S,_){var E=a(u,_);E.set(o(E.get()||{},S))}R.IS_SUBPLOT_OBJ=c,R.IS_LINKED_TO_ARRAY=h,R.DEPRECATED=f,R.UNDERSCORE_ATTRS=b,R.get=function(){var u={};A.allTypes.forEach(function(E){u[E]=function(L){var C,P;P=(C=A.modules[L]._module).basePlotModule;var I={type:null},U=o({},l),z=o({},C.attributes);R.crawl(z,function(N,B,j,K,G){a(U,G).set(void 0),N===void 0&&a(z,G).set(void 0)}),o(I,U),A.traceIs(L,"noOpacity")&&delete I.opacity,A.traceIs(L,"showLegend")||(delete I.showlegend,delete I.legendgroup),A.traceIs(L,"noHover")&&(delete I.hoverinfo,delete I.hoverlabel),C.selectPoints||delete I.selectedpoints,o(I,z),P.attributes&&o(I,P.attributes),I.type=L;var H={meta:C.meta||{},categories:C.categories||{},animatable:Boolean(C.animatable),type:L,attributes:p(I)};if(C.layoutAttributes){var F={};o(F,C.layoutAttributes),H.layoutAttributes=p(F)}return C.animatable||R.crawl(H,function(N){R.isValObject(N)&&"anim"in N&&delete N.anim}),H}(E)});var S,_={};return Object.keys(A.transformsRegistry).forEach(function(E){_[E]=function(L){var C=A.transformsRegistry[L],P=o({},C.attributes);return Object.keys(A.componentsRegistry).forEach(function(I){var U=A.componentsRegistry[I];U.schema&&U.schema.transforms&&U.schema.transforms[L]&&Object.keys(U.schema.transforms[L]).forEach(function(z){w(P,U.schema.transforms[L][z],z)})}),{attributes:p(P)}}(E)}),{defs:{valObjects:i,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:u,layout:y(),transforms:_,frames:(S={frames:o({},x)},p(S),S.frames),animation:p(d),config:p(s)}},R.crawl=function(u,S,_,E){var L=_||0;E=E||"",Object.keys(u).forEach(function(C){var P=u[C];if(b.indexOf(C)===-1){var I=(E?E+".":"")+C;S(P,C,u,L,I),R.isValObject(P)||r(P)&&C!=="impliedEdits"&&R.crawl(P,S,L+1,I)}})},R.isValObject=function(u){return u&&u.valType!==void 0},R.findArrayAttributes=function(u){var S,_,E=[],L=[],C=[];function P(N,B,j,K){L=L.slice(0,K).concat([B]),C=C.slice(0,K).concat([N&&N._isLinkedToArray]),N&&(N.valType==="data_array"||N.arrayOk===!0)&&(L[K-1]!=="colorbar"||B!=="ticktext"&&B!=="tickvals")&&I(S,0,"")}function I(N,B,j){var K=N[L[B]],G=j+L[B];if(B===L.length-1)n(K)&&E.push(_+G);else if(C[B]){if(Array.isArray(K))for(var V=0;V<K.length;V++)r(K[V])&&I(K[V],B+1,G+"["+V+"].")}else r(K)&&I(K,B+1,G+".")}S=u,_="",R.crawl(l,P),u._module&&u._module.attributes&&R.crawl(u._module.attributes,P);var U=u.transforms;if(U)for(var z=0;z<U.length;z++){var H=U[z],F=H._module;F&&(_="transforms["+z+"].",S=H,R.crawl(F.attributes,P))}return E},R.getTraceValObject=function(u,S){var _,E,L=S[0],C=1;if(L==="transforms"){if(S.length===1)return l.transforms;var P=u.transforms;if(!Array.isArray(P)||!P.length)return!1;var I=S[1];if(!g(I)||I>=P.length)return!1;E=(_=(A.transformsRegistry[P[I].type]||{}).attributes)&&_[S[2]],C=3}else{var U=u._module;if(U||(U=(A.modules[u.type||l.type.dflt]||{})._module),!U)return!1;if(!(E=(_=U.attributes)&&_[L])){var z=U.basePlotModule;z&&z.attributes&&(E=z.attributes[L])}E||(E=l[L])}return v(E,S,C)},R.getLayoutValObject=function(u,S){var _=function(E,L){var C,P,I,U,z=E._basePlotModules;if(z){var H;for(C=0;C<z.length;C++){if((I=z[C]).attrRegex&&I.attrRegex.test(L)){if(I.layoutAttrOverrides)return I.layoutAttrOverrides;!H&&I.layoutAttributes&&(H=I.layoutAttributes)}var F=I.baseLayoutAttrOverrides;if(F&&L in F)return F[L]}if(H)return H}var N=E._modules;if(N){for(C=0;C<N.length;C++)if((U=N[C].layoutAttributes)&&L in U)return U[L]}for(P in A.componentsRegistry){if((I=A.componentsRegistry[P]).name==="colorscale"&&L.indexOf("coloraxis")===0)return I.layoutAttributes[L];if(!I.schema&&L===I.name)return I.layoutAttributes}return L in T&&T[L]}(u,S[0]);return v(_,S,1)}},44467:function($,R,e){var A=e(71828),k=e(9012),l={name:{valType:"string",editType:"none"}};function T(d){return d&&typeof d=="string"}function x(d){var s=d.length-1;return d.charAt(s)!=="s"&&A.warn("bad argument to arrayDefaultKey: "+d),d.substr(0,d.length-1)+"defaults"}l.templateitemname={valType:"string",editType:"calc"},R.templatedArray=function(d,s){return s._isLinkedToArray=d,s.name=l.name,s.templateitemname=l.templateitemname,s},R.traceTemplater=function(d){var s,t,o={};for(s in d)t=d[s],Array.isArray(t)&&t.length&&(o[s]=0);return{newTrace:function(r){var n={type:s=A.coerce(r,{},k,"type"),_template:null};if(s in o){t=d[s];var a=o[s]%t.length;o[s]++,n._template=t[a]}return n}}},R.newContainer=function(d,s,t){var o=d._template,r=o&&(o[s]||t&&o[t]);return A.isPlainObject(r)||(r=null),d[s]={_template:r}},R.arrayTemplater=function(d,s,t){var o=d._template,r=o&&o[x(s)],n=o&&o[s];Array.isArray(n)&&n.length||(n=[]);var a={};return{newItem:function(i){var c={name:i.name,_input:i},h=c.templateitemname=i.templateitemname;if(!T(h))return c._template=r,c;for(var f=0;f<n.length;f++){var b=n[f];if(b.name===h)return a[h]=1,c._template=b,c}return c[t]=i[t]||!1,c._template=!1,c},defaultItems:function(){for(var i=[],c=0;c<n.length;c++){var h=n[c],f=h.name;if(T(f)&&!a[f]){var b={_template:h,name:f,_input:{_templateitemname:f}};b.templateitemname=h.templateitemname,i.push(b),a[f]=1}}return i}}},R.arrayDefaultKey=x,R.arrayEditor=function(d,s,t){var o=(A.nestedProperty(d,s).get()||[]).length,r=t._index,n=r>=o&&(t._input||{})._templateitemname;n&&(r=o);var a,i=s+"["+r+"]";function c(){a={},n&&(a[i]={},a[i].templateitemname=n)}function h(b,v){n?A.nestedProperty(a[i],b).set(v):a[i+"."+b]=v}function f(){var b=a;return c(),b}return c(),{modifyBase:function(b,v){a[b]=v},modifyItem:h,getUpdateObj:f,applyUpdate:function(b,v){b&&h(b,v);var g=f();for(var y in g)A.nestedProperty(d,y).set(g[y])}}}},61549:function($,R,e){var A=e(39898),k=e(73972),l=e(74875),T=e(71828),x=e(33306),d=e(7901),s=e(91424),t=e(92998),o=e(64168),r=e(89298),n=e(18783),a=e(99082),i=a.enforce,c=a.clean,h=e(71739).doAutoRange,f="start";function b(u,S,_){for(var E=0;E<_.length;E++){var L=_[E][0],C=_[E][1];if(!(L[0]>=u[1]||L[1]<=u[0])&&C[0]<S[1]&&C[1]>S[0])return!0}return!1}function v(u){var S,_,E,L,C,P,I=u._fullLayout,U=I._size,z=U.p,H=r.list(u,"",!0);if(I._paperdiv.style({width:u._context.responsive&&I.autosize&&!u._context._hasZeroWidth&&!u.layout.width?"100%":I.width+"px",height:u._context.responsive&&I.autosize&&!u._context._hasZeroHeight&&!u.layout.height?"100%":I.height+"px"}).selectAll(".main-svg").call(s.setSize,I.width,I.height),u._context.setBackground(u,I.paper_bgcolor),R.drawMainTitle(u),o.manage(u),!I._has("cartesian"))return l.previousPromises(u);function F(Ve,He,rt){var tt=Ve._lw/2;return Ve._id.charAt(0)==="x"?He?rt==="top"?He._offset-z-tt:He._offset+He._length+z+tt:U.t+U.h*(1-(Ve.position||0))+tt%1:He?rt==="right"?He._offset+He._length+z+tt:He._offset-z-tt:U.l+U.w*(Ve.position||0)+tt%1}for(S=0;S<H.length;S++){var N=(L=H[S])._anchorAxis;L._linepositions={},L._lw=s.crispRound(u,L.linewidth,1),L._mainLinePosition=F(L,N,L.side),L._mainMirrorPosition=L.mirror&&N?F(L,N,n.OPPOSITE_SIDE[L.side]):null}var B=[],j=[],K=[],G=d.opacity(I.paper_bgcolor)===1&&d.opacity(I.plot_bgcolor)===1&&I.paper_bgcolor===I.plot_bgcolor;for(_ in I._plots)if((E=I._plots[_]).mainplot)E.bg&&E.bg.remove(),E.bg=void 0;else{var V=E.xaxis.domain,W=E.yaxis.domain,J=E.plotgroup;if(b(V,W,K)){var X=J.node(),ee=E.bg=T.ensureSingle(J,"rect","bg");X.insertBefore(ee.node(),X.childNodes[0]),j.push(_)}else J.select("rect.bg").remove(),K.push([V,W]),G||(B.push(_),j.push(_))}var re,ie,se,fe,ye,ge,he,ve,Ie,xe,Ae,Se,Te,Q=I._bgLayer.selectAll(".bg").data(B);for(Q.enter().append("rect").classed("bg",!0),Q.exit().remove(),Q.each(function(Ve){I._plots[Ve].bg=A.select(this)}),S=0;S<j.length;S++)E=I._plots[j[S]],C=E.xaxis,P=E.yaxis,E.bg&&C._offset!==void 0&&P._offset!==void 0&&E.bg.call(s.setRect,C._offset-z,P._offset-z,C._length+2*z,P._length+2*z).call(d.fill,I.plot_bgcolor).style("stroke-width",0);if(!I._hasOnlyLargeSploms)for(_ in I._plots){E=I._plots[_],C=E.xaxis,P=E.yaxis;var oe,ce,me=E.clipId="clip"+I._uid+_+"plot",Me=T.ensureSingleById(I._clips,"clipPath",me,function(Ve){Ve.classed("plotclip",!0).append("rect")});E.clipRect=Me.select("rect").attr({width:C._length,height:P._length}),s.setTranslate(E.plot,C._offset,P._offset),E._hasClipOnAxisFalse?(oe=null,ce=me):(oe=me,ce=null),s.setClipUrl(E.plot,oe,u),E.layerClipId=ce}function Re(Ve){return"M"+re+","+Ve+"H"+ie}function Ce(Ve){return"M"+C._offset+","+Ve+"h"+C._length}function ze(Ve){return"M"+Ve+","+ve+"V"+he}function le(Ve){return P._shift!==void 0&&(Ve+=P._shift),"M"+Ve+","+P._offset+"v"+P._length}function de(Ve,He,rt){if(!Ve.showline||_!==Ve._mainSubplot)return"";if(!Ve._anchorAxis)return rt(Ve._mainLinePosition);var tt=He(Ve._mainLinePosition);return Ve.mirror&&(tt+=He(Ve._mainMirrorPosition)),tt}for(_ in I._plots){E=I._plots[_],C=E.xaxis,P=E.yaxis;var be="M0,0";g(C,_)&&(ye=p(C,"left",P,H),re=C._offset-(ye?z+ye:0),ge=p(C,"right",P,H),ie=C._offset+C._length+(ge?z+ge:0),se=F(C,P,"bottom"),fe=F(C,P,"top"),!(Te=!C._anchorAxis||_!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[_]=[se,fe]),be=de(C,Re,Ce),Te&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(be+=Re(se)+Re(fe)),E.xlines.style("stroke-width",C._lw+"px").call(d.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),E.xlines.attr("d",be);var Fe="M0,0";g(P,_)&&(Ae=p(P,"bottom",C,H),he=P._offset+P._length+(Ae?z:0),Se=p(P,"top",C,H),ve=P._offset-(Se?z:0),Ie=F(P,C,"left"),xe=F(P,C,"right"),!(Te=!P._anchorAxis||_!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[_]=[Ie,xe]),Fe=de(P,ze,le),Te&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Fe+=ze(Ie)+ze(xe)),E.ylines.style("stroke-width",P._lw+"px").call(d.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),E.ylines.attr("d",Fe)}return r.makeClipPaths(u),l.previousPromises(u)}function g(u,S){return(u.ticks||u.showline)&&(S===u._mainSubplot||u.mirror==="all"||u.mirror==="allticks")}function y(u,S,_){if(!_.showline||!_._lw)return!1;if(_.mirror==="all"||_.mirror==="allticks")return!0;var E=_._anchorAxis;if(!E)return!1;var L=n.FROM_BL[S];return _.side===S?E.domain[L]===u.domain[L]:_.mirror&&E.domain[1-L]===u.domain[1-L]}function p(u,S,_,E){if(y(u,S,_))return _._lw;for(var L=0;L<E.length;L++){var C=E[L];if(C._mainAxis===_._mainAxis&&y(u,S,C))return C._lw}return 0}function m(u,S){var _=u.title,E=u._size,L=0;return S===f?L=_.pad.l:S==="end"&&(L=-_.pad.r),_.xref==="paper"?E.l+E.w*_.x+L:u.width*_.x+L}function w(u,S){var _=u.title,E=u._size,L=0;return S!=="0em"&&S?S===n.CAP_SHIFT+"em"&&(L=_.pad.t):L=-_.pad.b,_.y==="auto"?E.t/2:_.yref==="paper"?E.t+E.h-E.h*_.y+L:u.height-u.height*_.y+L}R.layoutStyles=function(u){return T.syncOrAsync([l.doAutoMargin,v],u)},R.drawMainTitle=function(u){var S=u._fullLayout,_=function(L){var C=L.title,P="middle";return T.isRightAnchor(C)?P="end":T.isLeftAnchor(C)&&(P=f),P}(S),E=function(L){var C=L.title,P="0em";return T.isTopAnchor(C)?P=n.CAP_SHIFT+"em":T.isMiddleAnchor(C)&&(P=n.MID_SHIFT+"em"),P}(S);t.draw(u,"gtitle",{propContainer:S,propName:"title.text",placeholder:S._dfltTitle.plot,attributes:{x:m(S,_),y:w(S,E),"text-anchor":_,dy:E}})},R.doTraceStyle=function(u){var S,_=u.calcdata,E=[];for(S=0;S<_.length;S++){var L=_[S],C=L[0]||{},P=C.trace||{},I=P._module||{},U=I.arraysToCalcdata;U&&U(L,P);var z=I.editStyle;z&&E.push({fn:z,cd0:C})}if(E.length){for(S=0;S<E.length;S++){var H=E[S];H.fn(u,H.cd0)}x(u),R.redrawReglTraces(u)}return l.style(u),k.getComponentMethod("legend","draw")(u),l.previousPromises(u)},R.doColorBars=function(u){return k.getComponentMethod("colorbar","draw")(u),l.previousPromises(u)},R.layoutReplot=function(u){var S=u.layout;return u.layout=void 0,k.call("_doPlot",u,"",S)},R.doLegend=function(u){return k.getComponentMethod("legend","draw")(u),l.previousPromises(u)},R.doTicksRelayout=function(u){return r.draw(u,"redraw"),u._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(u),x(u),R.redrawReglTraces(u)),R.drawMainTitle(u),l.previousPromises(u)},R.doModeBar=function(u){var S=u._fullLayout;o.manage(u);for(var _=0;_<S._basePlotModules.length;_++){var E=S._basePlotModules[_].updateFx;E&&E(u)}return l.previousPromises(u)},R.doCamera=function(u){for(var S=u._fullLayout,_=S._subplots.gl3d,E=0;E<_.length;E++){var L=S[_[E]];L._scene.setViewport(L)}},R.drawData=function(u){var S=u._fullLayout;x(u);for(var _=S._basePlotModules,E=0;E<_.length;E++)_[E].plot(u);return R.redrawReglTraces(u),l.style(u),k.getComponentMethod("selections","draw")(u),k.getComponentMethod("shapes","draw")(u),k.getComponentMethod("annotations","draw")(u),k.getComponentMethod("images","draw")(u),S._replotting=!1,l.previousPromises(u)},R.redrawReglTraces=function(u){var S=u._fullLayout;if(S._has("regl")){var _,E,L=u._fullData,C=[],P=[];for(S._hasOnlyLargeSploms&&S._splomGrid.draw(),_=0;_<L.length;_++){var I=L[_];I.visible===!0&&I._length!==0&&(I.type==="splom"?S._splomScenes[I.uid].draw():I.type==="scattergl"?T.pushUnique(C,I.xaxis+I.yaxis):I.type==="scatterpolargl"&&T.pushUnique(P,I.subplot))}for(_=0;_<C.length;_++)(E=S._plots[C[_]])._scene&&E._scene.draw();for(_=0;_<P.length;_++)(E=S[P[_]]._subplot)._scene&&E._scene.draw()}},R.doAutoRangeAndConstraints=function(u){for(var S,_=r.list(u,"",!0),E={},L=0;L<_.length;L++)if(!E[(S=_[L])._id]){E[S._id]=1,c(u,S),h(u,S);var C=S._matchGroup;if(C)for(var P in C){var I=r.getFromId(u,P);h(u,I,S.range),E[P]=1}}i(u)},R.finalDraw=function(u){k.getComponentMethod("rangeslider","draw")(u),k.getComponentMethod("rangeselector","draw")(u)},R.drawMarginPushers=function(u){k.getComponentMethod("legend","draw")(u),k.getComponentMethod("rangeselector","draw")(u),k.getComponentMethod("sliders","draw")(u),k.getComponentMethod("updatemenus","draw")(u),k.getComponentMethod("colorbar","draw")(u)}},96318:function($,R,e){var A=e(71828),k=A.isPlainObject,l=e(86281),T=e(74875),x=e(9012),d=e(44467),s=e(72075).dfltConfig;function t(f,b){f=A.extendDeep({},f);var v,g,y=Object.keys(f).sort();function p(_,E,L){if(k(E)&&k(_))t(_,E);else if(Array.isArray(E)&&Array.isArray(_)){var C=d.arrayTemplater({_template:f},L);for(g=0;g<E.length;g++){var P=E[g],I=C.newItem(P)._template;I&&t(I,P)}var U=C.defaultItems();for(g=0;g<U.length;g++)E.push(U[g]._template);for(g=0;g<E.length;g++)delete E[g].templateitemname}}for(v=0;v<y.length;v++){var m=y[v],w=f[m];if(m in b?p(w,b[m],m):b[m]=w,o(m)===m)for(var u in b){var S=o(u);u===S||S!==m||u in f||p(w,b[u],m)}}}function o(f){return f.replace(/[0-9]+$/,"")}function r(f,b,v,g,y){var p=y&&v(y);for(var m in f){var w=f[m],u=i(f,m,g),S=i(f,m,y),_=v(S);if(!_){var E=o(m);E!==m&&(_=v(S=i(f,E,y)))}if(!(p&&p===_||!_||_._noTemplating||_.valType==="data_array"||_.arrayOk&&Array.isArray(w)))if(!_.valType&&k(w))r(w,b,v,u,S);else if(_._isLinkedToArray&&Array.isArray(w))for(var L=!1,C=0,P={},I=0;I<w.length;I++){var U=w[I];if(k(U)){var z=U.name;if(z)P[z]||(r(U,b,v,i(w,C,u),i(w,C,S)),C++,P[z]=1);else if(!L){var H=i(f,d.arrayDefaultKey(m),g),F=i(w,C,u);r(U,b,v,F,i(w,C,S));var N=A.nestedProperty(b,F);A.nestedProperty(b,H).set(N.get()),N.set(null),L=!0}}}else A.nestedProperty(b,u).set(w)}}function n(f,b){return l.getLayoutValObject(f,A.nestedProperty({},b).parts)}function a(f,b){return l.getTraceValObject(f,A.nestedProperty({},b).parts)}function i(f,b,v){return v?Array.isArray(f)?v+"["+b+"]":v+"."+b:b}function c(f){for(var b=0;b<f.length;b++)if(k(f[b]))return!0}function h(f){var b;switch(f.code){case"data":b="The template has no key data.";break;case"layout":b="The template has no key layout.";break;case"missing":b=f.path?"There are no templates for item "+f.path+" with name "+f.templateitemname:"There are no templates for trace "+f.index+", of type "+f.traceType+".";break;case"unused":b=f.path?"The template item at "+f.path+" was not used in constructing the plot.":f.dataCount?"Some of the templates of type "+f.traceType+" were not used. The template has "+f.templateCount+" traces, the data only has "+f.dataCount+" of this type.":"The template has "+f.templateCount+" traces of type "+f.traceType+" but there are none in the data.";break;case"reused":b="Some of the templates of type "+f.traceType+" were used more than once. The template has "+f.templateCount+" traces, the data has "+f.dataCount+" of this type."}return f.msg=b,f}R.makeTemplate=function(f){f=A.isPlainObject(f)?f:A.getGraphDiv(f),f=A.extendDeep({_context:s},{data:f.data,layout:f.layout}),T.supplyDefaults(f);var b=f.data||[],v=f.layout||{};v._basePlotModules=f._fullLayout._basePlotModules,v._modules=f._fullLayout._modules;var g={data:{},layout:{}};b.forEach(function(C){var P={};r(C,P,a.bind(null,C));var I=A.coerce(C,{},x,"type"),U=g.data[I];U||(U=g.data[I]=[]),U.push(P)}),r(v,g.layout,n.bind(null,v)),delete g.layout.template;var y=v.template;if(k(y)){var p,m,w,u,S,_,E=y.layout;k(E)&&t(E,g.layout);var L=y.data;if(k(L)){for(m in g.data)if(w=L[m],Array.isArray(w)){for(_=(S=g.data[m]).length,u=w.length,p=0;p<_;p++)t(w[p%u],S[p]);for(p=_;p<u;p++)S.push(A.extendDeep({},w[p]))}for(m in L)m in g.data||(g.data[m]=A.extendDeep([],L[m]))}}return g},R.validateTemplate=function(f,b){var v=A.extendDeep({},{_context:s,data:f.data,layout:f.layout}),g=v.layout||{};k(b)||(b=g.template||{});var y=b.layout,p=b.data,m=[];v.layout=g,v.layout.template=b,T.supplyDefaults(v);var w=v._fullLayout,u=v._fullData,S={};if(k(y)?(function U(z,H){for(var F in z)if(F.charAt(0)!=="_"&&k(z[F])){var N,B=o(F),j=[];for(N=0;N<H.length;N++)j.push(i(z,F,H[N])),B!==F&&j.push(i(z,B,H[N]));for(N=0;N<j.length;N++)S[j[N]]=1;U(z[F],j)}}(w,["layout"]),function U(z,H){for(var F in z)if(F.indexOf("defaults")===-1&&k(z[F])){var N=i(z,F,H);S[N]?U(z[F],N):m.push({code:"unused",path:N})}}(y,"layout")):m.push({code:"layout"}),k(p)){for(var _,E={},L=0;L<u.length;L++){var C=u[L];E[_=C.type]=(E[_]||0)+1,C._fullInput._template||m.push({code:"missing",index:C._fullInput.index,traceType:_})}for(_ in p){var P=p[_].length,I=E[_]||0;P>I?m.push({code:"unused",traceType:_,templateCount:P,dataCount:I}):I>P&&m.push({code:"reused",traceType:_,templateCount:P,dataCount:I})}}else m.push({code:"data"});if(function U(z,H){for(var F in z)if(F.charAt(0)!=="_"){var N=z[F],B=i(z,F,H);k(N)?(Array.isArray(z)&&N._template===!1&&N.templateitemname&&m.push({code:"missing",path:B,templateitemname:N.templateitemname}),U(N,B)):Array.isArray(N)&&c(N)&&U(N,B)}}({data:u,layout:w},""),m.length)return m.map(h)}},403:function($,R,e){var A=e(92770),k=e(72391),l=e(74875),T=e(71828),x=e(25095),d=e(5900),s=e(70942),t=e(11506).version,o={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};$.exports=function(r,n){var a,i,c,h;function f(I){return!(I in n)||T.validate(n[I],o[I])}if(n=n||{},T.isPlainObject(r)?(a=r.data||[],i=r.layout||{},c=r.config||{},h={}):(r=T.getGraphDiv(r),a=T.extendDeep([],r.data),i=T.extendDeep({},r.layout),c=r._context,h=r._fullLayout||{}),!f("width")&&n.width!==null||!f("height")&&n.height!==null)throw new Error("Height and width should be pixel values.");if(!f("format"))throw new Error("Export format is not "+T.join2(o.format.values,", "," or ")+".");var b={};function v(I,U){return T.coerce(n,b,o,I,U)}var g=v("format"),y=v("width"),p=v("height"),m=v("scale"),w=v("setBackground"),u=v("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var _=T.extendFlat({},i);y?_.width=y:n.width===null&&A(h.width)&&(_.width=h.width),p?_.height=p:n.height===null&&A(h.height)&&(_.height=h.height);var E=T.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),L=x.getRedrawFunc(S);function C(){return new Promise(function(I){setTimeout(I,x.getDelay(S._fullLayout))})}function P(){return new Promise(function(I,U){var z=d(S,g,m),H=S._fullLayout.width,F=S._fullLayout.height;function N(){k.purge(S),document.body.removeChild(S)}if(g==="full-json"){var B=l.graphJson(S,!1,"keepdata","object",!0,!0);return B.version=t,B=JSON.stringify(B),N(),I(u?B:x.encodeJSON(B))}if(N(),g==="svg")return I(u?z:x.encodeSVG(z));var j=document.createElement("canvas");j.id=T.randstr(),s({format:g,width:H,height:F,scale:m,canvas:j,svg:z,promise:!0}).then(I).catch(U)})}return new Promise(function(I,U){k.newPlot(S,a,_,E).then(L).then(C).then(P).then(function(z){I(function(H){return u?H.replace(x.IMAGE_URL_PREFIX,""):H}(z))}).catch(function(z){U(z)})})}},84936:function($,R,e){var A=e(71828),k=e(74875),l=e(86281),T=e(72075).dfltConfig,x=A.isPlainObject,d=Array.isArray,s=A.isArrayOrTypedArray;function t(b,v,g,y,p,m){m=m||[];for(var w=Object.keys(b),u=0;u<w.length;u++){var S=w[u];if(S!=="transforms"){var _=m.slice();_.push(S);var E=b[S],L=v[S],C=c(g,S),P=(C||{}).valType,I=P==="info_array",U=P==="colorscale",z=(C||{}).items;if(i(g,S))if(x(E)&&x(L)&&P!=="any")t(E,L,C,y,p,_);else if(I&&d(E)){E.length>L.length&&y.push(a("unused",p,_.concat(L.length)));var H,F,N,B,j,K=L.length,G=Array.isArray(z);if(G&&(K=Math.min(K,z.length)),C.dimensions===2)for(F=0;F<K;F++)if(d(E[F])){E[F].length>L[F].length&&y.push(a("unused",p,_.concat(F,L[F].length)));var V=L[F].length;for(H=0;H<(G?Math.min(V,z[F].length):V);H++)N=G?z[F][H]:z,B=E[F][H],j=L[F][H],A.validate(B,N)?j!==B&&j!==+B&&y.push(a("dynamic",p,_.concat(F,H),B,j)):y.push(a("value",p,_.concat(F,H),B))}else y.push(a("array",p,_.concat(F),E[F]));else for(F=0;F<K;F++)N=G?z[F]:z,B=E[F],j=L[F],A.validate(B,N)?j!==B&&j!==+B&&y.push(a("dynamic",p,_.concat(F),B,j)):y.push(a("value",p,_.concat(F),B))}else if(C.items&&!I&&d(E)){var W,J,X=z[Object.keys(z)[0]],ee=[];for(W=0;W<L.length;W++){var re=L[W]._index||W;if((J=_.slice()).push(re),x(E[re])&&x(L[W])){ee.push(re);var ie=E[re],se=L[W];x(ie)&&ie.visible!==!1&&se.visible===!1?y.push(a("invisible",p,J)):t(ie,se,X,y,p,J)}}for(W=0;W<E.length;W++)(J=_.slice()).push(W),x(E[W])?ee.indexOf(W)===-1&&y.push(a("unused",p,J)):y.push(a("object",p,J,E[W]))}else!x(E)&&x(L)?y.push(a("object",p,_,E)):s(E)||!s(L)||I||U?S in v?A.validate(E,C)?C.valType==="enumerated"&&(C.coerceNumber&&E!==+L||E!==L)&&y.push(a("dynamic",p,_,E,L)):y.push(a("value",p,_,E)):y.push(a("unused",p,_,E)):y.push(a("array",p,_,E));else y.push(a("schema",p,_))}}return y}function o(b,v){for(var g=b.layout.layoutAttributes,y=0;y<v.length;y++){var p=v[y],m=b.traces[p.type],w=m.layoutAttributes;w&&(p.subplot?A.extendFlat(g[m.attributes.subplot.dflt],w):A.extendFlat(g,w))}return g}$.exports=function(b,v){b===void 0&&(b=[]),v===void 0&&(v={});var g,y,p=l.get(),m=[],w={_context:A.extendFlat({},T)};d(b)?(w.data=A.extendDeep([],b),g=b):(w.data=[],g=[],m.push(a("array","data"))),x(v)?(w.layout=A.extendDeep({},v),y=v):(w.layout={},y={},arguments.length>1&&m.push(a("object","layout"))),k.supplyDefaults(w);for(var u=w._fullData,S=g.length,_=0;_<S;_++){var E=g[_],L=["data",_];if(x(E)){var C=u[_],P=C.type,I=p.traces[P].attributes;I.type={valType:"enumerated",values:[P]},C.visible===!1&&E.visible!==!1&&m.push(a("invisible",L)),t(E,C,I,m,L);var U=E.transforms,z=C.transforms;if(U){d(U)||m.push(a("array",L,["transforms"])),L.push("transforms");for(var H=0;H<U.length;H++){var F=["transforms",H],N=U[H].type;if(x(U[H])){var B=p.transforms[N]?p.transforms[N].attributes:{};B.type={valType:"enumerated",values:Object.keys(p.transforms)},t(U[H],z[H],B,m,L,F)}else m.push(a("object",L,F))}}}else m.push(a("object",L))}var j=w._fullLayout,K=o(p,u);return t(y,j,K,m,"layout"),m.length===0?void 0:m};var r={object:function(b,v){return(b==="layout"&&v===""?"The layout argument":b[0]==="data"&&v===""?"Trace "+b[1]+" in the data argument":n(b)+"key "+v)+" must be linked to an object container"},array:function(b,v){return(b==="data"?"The data argument":n(b)+"key "+v)+" must be linked to an array container"},schema:function(b,v){return n(b)+"key "+v+" is not part of the schema"},unused:function(b,v,g){var y=x(g)?"container":"key";return n(b)+y+" "+v+" did not get coerced"},dynamic:function(b,v,g,y){return[n(b)+"key",v,"(set to '"+g+"')","got reset to","'"+y+"'","during defaults."].join(" ")},invisible:function(b,v){return(v?n(b)+"item "+v:"Trace "+b[1])+" got defaulted to be not visible"},value:function(b,v,g){return[n(b)+"key "+v,"is set to an invalid value ("+g+")"].join(" ")}};function n(b){return d(b)?"In data trace "+b[1]+", ":"In "+b+", "}function a(b,v,g,y,p){var m,w;g=g||"",d(v)?(m=v[0],w=v[1]):(m=v,w=null);var u=function(_){if(!d(_))return String(_);for(var E="",L=0;L<_.length;L++){var C=_[L];typeof C=="number"?E=E.substr(0,E.length-1)+"["+C+"]":E+=C,L<_.length-1&&(E+=".")}return E}(g),S=r[b](v,u,y,p);return A.log(S),{code:b,container:m,trace:w,path:g,astr:u,msg:S}}function i(b,v){var g=f(v),y=g.keyMinusId,p=g.id;return!!(y in b&&b[y]._isSubplotObj&&p)||v in b}function c(b,v){return v in b?b[v]:b[f(v).keyMinusId]}var h=A.counterRegex("([a-z]+)");function f(b){var v=b.match(h);return{keyMinusId:v&&v[1],id:v&&v[2]}}},85594:function($){$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function($,R,e){var A=e(71828),k=e(44467);$.exports=function(l,T,x){var d,s,t=x.name,o=x.inclusionAttr||"visible",r=T[t],n=A.isArrayOrTypedArray(l[t])?l[t]:[],a=T[t]=[],i=k.arrayTemplater(T,t,o);for(d=0;d<n.length;d++){var c=n[d];A.isPlainObject(c)?s=i.newItem(c):(s=i.newItem({}))[o]=!1,s._index=d,s[o]!==!1&&x.handleItemDefaults(c,s,T,x),a.push(s)}var h=i.defaultItems();for(d=0;d<h.length;d++)(s=h[d])._index=a.length,x.handleItemDefaults({},s,T,x,{}),a.push(s);if(A.isArrayOrTypedArray(r)){var f=Math.min(r.length,a.length);for(d=0;d<f;d++)A.relinkPrivateKeys(a[d],r[d])}return a}},9012:function($,R,e){var A=e(41940),k=e(77914);$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:A({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function($,R,e){var A=e(92770),k=e(71828),l=k.dateTime2ms,T=k.incrementMonth,x=e(50606).ONEAVGMONTH;$.exports=function(d,s,t,o){if(s.type!=="date")return{vals:o};var r=d[t+"periodalignment"];if(!r)return{vals:o};var n,a=d[t+"period"];if(A(a)){if((a=+a)<=0)return{vals:o}}else if(typeof a=="string"&&a.charAt(0)==="M"){var i=+a.substring(1);if(!(i>0&&Math.round(i)===i))return{vals:o};n=i}for(var c=s.calendar,h=r==="start",f=r==="end",b=d[t+"period0"],v=l(b,c)||0,g=[],y=[],p=[],m=o.length,w=0;w<m;w++){var u,S,_,E=o[w];if(n){for(u=Math.round((E-v)/(n*x)),_=T(v,n*u,c);_>E;)_=T(_,-n,c);for(;_<=E;)_=T(_,n,c);S=T(_,-n,c)}else{for(_=v+(u=Math.round((E-v)/a))*a;_>E;)_-=a;for(;_<=E;)_+=a;S=_-a}g[w]=h?S:f?_:(S+_)/2,y[w]=S,p[w]=_}return{vals:g,starts:y,ends:p}}},89502:function($){$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function($,R,e){var A=e(39898),k=e(92770),l=e(71828),T=e(50606).FP_SAFE,x=e(73972),d=e(91424),s=e(41675),t=s.getFromId,o=s.isLinked;function r(y,p){var m,w,u=[],S=y._fullLayout,_=a(S,p,0),E=a(S,p,1),L=i(y,p),C=L.min,P=L.max;if(C.length===0||P.length===0)return l.simpleMap(p.range,p.r2l);var I=C[0].val,U=P[0].val;for(m=1;m<C.length&&I===U;m++)I=Math.min(I,C[m].val);for(m=1;m<P.length&&I===U;m++)U=Math.max(U,P[m].val);var z=!1;if(p.range){var H=l.simpleMap(p.range,p.r2l);z=H[1]<H[0]}p.autorange==="reversed"&&(z=!0,p.autorange=!0);var F,N,B,j,K,G,V=p.rangemode,W=V==="tozero",J=V==="nonnegative",X=p._length,ee=X/10,re=0;for(m=0;m<C.length;m++)for(F=C[m],w=0;w<P.length;w++)(G=(N=P[w]).val-F.val-n(p,F.val,N.val))>0&&((K=X-_(F)-E(N))>ee?G/K>re&&(B=F,j=N,re=G/K):G/X>re&&(B={val:F.val,nopad:1},j={val:N.val,nopad:1},re=G/X));if(I===U){var ie=I-1,se=I+1;if(W)if(I===0)u=[0,1];else{var fe=(I>0?P:C).reduce(function(ge,he){return Math.max(ge,E(he))},0),ye=I/(1-Math.min(.5,fe/X));u=I>0?[0,ye]:[ye,0]}else u=J?[Math.max(0,ie),Math.max(1,se)]:[ie,se]}else W?(B.val>=0&&(B={val:0,nopad:1}),j.val<=0&&(j={val:0,nopad:1})):J&&(B.val-re*_(B)<0&&(B={val:0,nopad:1}),j.val<=0&&(j={val:1,nopad:1})),re=(j.val-B.val-n(p,F.val,N.val))/(X-_(B)-E(j)),u=[B.val-re*_(B),j.val+re*E(j)];return z&&u.reverse(),l.simpleMap(u,p.l2r||Number)}function n(y,p,m){var w=0;if(y.rangebreaks)for(var u=y.locateBreaks(p,m),S=0;S<u.length;S++){var _=u[S];w+=_.max-_.min}return w}function a(y,p,m){var w=.05*p._length,u=p._anchorAxis||{};if((p.ticklabelposition||"").indexOf("inside")!==-1||(u.ticklabelposition||"").indexOf("inside")!==-1){var S=p.autorange==="reversed";if(!S){var _=l.simpleMap(p.range,p.r2l);S=_[1]<_[0]}S&&(m=!m)}var E=0;return o(y,p._id)||(E=function(L,C,P){var I=0,U=C._id.charAt(0)==="x";for(var z in L._plots){var H=L._plots[z];if(C._id===H.xaxis._id||C._id===H.yaxis._id){var F=(U?H.yaxis:H.xaxis)||{};if((F.ticklabelposition||"").indexOf("inside")!==-1&&(!P&&(F.side==="left"||F.side==="bottom")||P&&(F.side==="top"||F.side==="right"))){if(F._vals){var N=l.deg2rad(F._tickAngles[F._id+"tick"]||0),B=Math.abs(Math.cos(N)),j=Math.abs(Math.sin(N));if(!F._vals[0].bb){var K=F._id+"tick";F._selections[K].each(function(X){var ee=A.select(this);ee.select(".text-math-group").empty()&&(X.bb=d.bBox(ee.node()))})}for(var G=0;G<F._vals.length;G++){var V=F._vals[G].bb;if(V){var W=6+V.width,J=6+V.height;I=Math.max(I,U?Math.max(W*B,J*j):Math.max(J*B,W*j))}}}F.ticks==="inside"&&F.ticklabelposition==="inside"&&(I+=F.ticklen||0)}}}return I}(y,p,m)),w=Math.max(E,w),p.constrain==="domain"&&p._inputDomain&&(w*=(p._inputDomain[1]-p._inputDomain[0])/(p.domain[1]-p.domain[0])),function(L){return L.nopad?0:L.pad+(L.extrapad?w:E)}}function i(y,p,m){var w,u,S,_=p._id,E=y._fullData,L=y._fullLayout,C=[],P=[];function I(N,B){for(w=0;w<B.length;w++){var j=N[B[w]],K=(j._extremes||{})[_];if(j.visible===!0&&K){for(u=0;u<K.min.length;u++)S=K.min[u],c(C,S.val,S.pad,{extrapad:S.extrapad});for(u=0;u<K.max.length;u++)S=K.max[u],h(P,S.val,S.pad,{extrapad:S.extrapad})}}}if(I(E,p._traceIndices),I(L.annotations||[],p._annIndices||[]),I(L.shapes||[],p._shapeIndices||[]),p._matchGroup&&!m){for(var U in p._matchGroup)if(U!==p._id){var z=t(y,U),H=i(y,z,!0),F=p._length/z._length;for(u=0;u<H.min.length;u++)S=H.min[u],c(C,S.val,S.pad*F,{extrapad:S.extrapad});for(u=0;u<H.max.length;u++)S=H.max[u],h(P,S.val,S.pad*F,{extrapad:S.extrapad})}}return{min:C,max:P}}function c(y,p,m,w){f(y,p,m,w,v)}function h(y,p,m,w){f(y,p,m,w,g)}function f(y,p,m,w,u){for(var S=w.tozero,_=w.extrapad,E=!0,L=0;L<y.length&&E;L++){var C=y[L];if(u(C.val,p)&&C.pad>=m&&(C.extrapad||!_)){E=!1;break}u(p,C.val)&&C.pad<=m&&(_||!C.extrapad)&&(y.splice(L,1),L--)}if(E){var P=S&&p===0;y.push({val:p,pad:P?0:m,extrapad:!P&&_})}}function b(y){return k(y)&&Math.abs(y)<T}function v(y,p){return y<=p}function g(y,p){return y>=p}$.exports={getAutoRange:r,makePadFn:a,doAutoRange:function(y,p,m){if(p.setScale(),p.autorange){p.range=m?m.slice():r(y,p),p._r=p.range.slice(),p._rl=l.simpleMap(p._r,p.r2l);var w=p._input,u={};u[p._attr+".range"]=p.range,u[p._attr+".autorange"]=p.autorange,x.call("_storeDirectGUIEdit",y.layout,y._fullLayout._preGUI,u),w.range=p.range.slice(),w.autorange=p.autorange}var S=p._anchorAxis;if(S&&S.rangeslider){var _=S.rangeslider[p._name];_&&_.rangemode==="auto"&&(_.range=r(y,p)),S._input.rangeslider[p._name]=l.extendFlat({},_)}},findExtremes:function(y,p,m){m||(m={}),y._m||y.setScale();var w,u,S,_,E,L,C,P,I,U=[],z=[],H=p.length,F=m.padded||!1,N=m.tozero&&(y.type==="linear"||y.type==="-"),B=y.type==="log",j=!1,K=m.vpadLinearized||!1;function G(se){if(Array.isArray(se))return j=!0,function(ye){return Math.max(Number(se[ye]||0),0)};var fe=Math.max(Number(se||0),0);return function(){return fe}}var V=G((y._m>0?m.ppadplus:m.ppadminus)||m.ppad||0),W=G((y._m>0?m.ppadminus:m.ppadplus)||m.ppad||0),J=G(m.vpadplus||m.vpad),X=G(m.vpadminus||m.vpad);if(!j){if(P=1/0,I=-1/0,B)for(w=0;w<H;w++)(u=p[w])<P&&u>0&&(P=u),u>I&&u<T&&(I=u);else for(w=0;w<H;w++)(u=p[w])<P&&u>-T&&(P=u),u>I&&u<T&&(I=u);p=[P,I],H=2}var ee={tozero:N,extrapad:F};function re(se){S=p[se],k(S)&&(L=V(se),C=W(se),K?(_=y.c2l(S)-X(se),E=y.c2l(S)+J(se)):(P=S-X(se),I=S+J(se),B&&P<I/10&&(P=I/10),_=y.c2l(P),E=y.c2l(I)),N&&(_=Math.min(0,_),E=Math.max(0,E)),b(_)&&c(U,_,C,ee),b(E)&&h(z,E,L,ee))}var ie=Math.min(6,H);for(w=0;w<ie;w++)re(w);for(w=H-1;w>=ie;w--)re(w);return{min:U,max:z,opts:m}},concatExtremes:i}},89298:function($,R,e){var A=e(39898),k=e(92770),l=e(74875),T=e(73972),x=e(71828),d=x.strTranslate,s=e(63893),t=e(92998),o=e(7901),r=e(91424),n=e(13838),a=e(66287),i=e(50606),c=i.ONEMAXYEAR,h=i.ONEAVGYEAR,f=i.ONEMINYEAR,b=i.ONEMAXQUARTER,v=i.ONEAVGQUARTER,g=i.ONEMINQUARTER,y=i.ONEMAXMONTH,p=i.ONEAVGMONTH,m=i.ONEMINMONTH,w=i.ONEWEEK,u=i.ONEDAY,S=u/2,_=i.ONEHOUR,E=i.ONEMIN,L=i.ONESEC,C=i.MINUS_SIGN,P=i.BADNUM,I={K:"zeroline"},U={K:"gridline",L:"path"},z={K:"minor-gridline",L:"path"},H={K:"tick",L:"path"},F={K:"tick",L:"text"},N={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},B=e(18783),j=B.MID_SHIFT,K=B.CAP_SHIFT,G=B.LINE_SPACING,V=B.OPPOSITE_SIDE,W=$.exports={};W.setConvert=e(21994);var J=e(4322),X=e(41675),ee=X.idSort,re=X.isLinked;W.id2name=X.id2name,W.name2id=X.name2id,W.cleanId=X.cleanId,W.list=X.list,W.listIds=X.listIds,W.getFromId=X.getFromId,W.getFromTrace=X.getFromTrace;var ie=e(71739);function se(ke){var Pe=1e-4*(ke[1]-ke[0]);return[ke[0]-Pe,ke[1]+Pe]}W.getAutoRange=ie.getAutoRange,W.findExtremes=ie.findExtremes,W.coerceRef=function(ke,Pe,qe,Xe,nt,ut){var ct=Xe.charAt(Xe.length-1),Ct=qe._fullLayout._subplots[ct+"axis"],Lt=Xe+"ref",Mt={};return nt||(nt=Ct[0]||(typeof ut=="string"?ut:ut[0])),ut||(ut=nt),Ct=Ct.concat(Ct.map(function(mt){return mt+" domain"})),Mt[Lt]={valType:"enumerated",values:Ct.concat(ut?typeof ut=="string"?[ut]:ut:[]),dflt:nt},x.coerce(ke,Pe,Mt,Lt)},W.getRefType=function(ke){return ke===void 0?ke:ke==="paper"?"paper":ke==="pixel"?"pixel":/( domain)$/.test(ke)?"domain":"range"},W.coercePosition=function(ke,Pe,qe,Xe,nt,ut){var ct,Ct;if(W.getRefType(Xe)!=="range")ct=x.ensureNumber,Ct=qe(nt,ut);else{var Lt=W.getFromId(Pe,Xe);Ct=qe(nt,ut=Lt.fraction2r(ut)),ct=Lt.cleanPos}ke[nt]=ct(Ct)},W.cleanPosition=function(ke,Pe,qe){return(qe==="paper"||qe==="pixel"?x.ensureNumber:W.getFromId(Pe,qe).cleanPos)(ke)},W.redrawComponents=function(ke,Pe){Pe=Pe||W.listIds(ke);var qe=ke._fullLayout;function Xe(nt,ut,ct,Ct){for(var Lt=T.getComponentMethod(nt,ut),Mt={},mt=0;mt<Pe.length;mt++)for(var kt=qe[W.id2name(Pe[mt])][ct],wt=0;wt<kt.length;wt++){var Ot=kt[wt];if(!Mt[Ot]&&(Lt(ke,Ot),Mt[Ot]=1,Ct))return}}Xe("annotations","drawOne","_annIndices"),Xe("shapes","drawOne","_shapeIndices"),Xe("images","draw","_imgIndices",!0),Xe("selections","drawOne","_selectionIndices")};var fe=W.getDataConversions=function(ke,Pe,qe,Xe){var nt,ut=qe==="x"||qe==="y"||qe==="z"?qe:Xe;if(Array.isArray(ut)){if(nt={type:J(Xe,void 0,{autotypenumbers:ke._fullLayout.autotypenumbers}),_categories:[]},W.setConvert(nt),nt.type==="category")for(var ct=0;ct<Xe.length;ct++)nt.d2c(Xe[ct])}else nt=W.getFromTrace(ke,Pe,ut);return nt?{d2c:nt.d2c,c2d:nt.c2d}:ut==="ids"?{d2c:ge,c2d:ge}:{d2c:ye,c2d:ye}};function ye(ke){return+ke}function ge(ke){return String(ke)}function he(ke,Pe){return Math.abs((ke/Pe+.5)%1-.5)<.001}function ve(ke,Pe){return Math.abs(ke/Pe-1)<.001}function Ie(ke){return+ke.substring(1)}function xe(ke){var Pe=se(x.simpleMap(ke.range,ke.r2l)),qe=Math.min(Pe[0],Pe[1]),Xe=Math.max(Pe[0],Pe[1]),nt=ke.type==="category"?ke.d2l_noadd:ke.d2l;ke.type==="log"&&String(ke.dtick).charAt(0)!=="L"&&(ke.dtick="L"+Math.pow(10,Math.floor(Math.min(ke.range[0],ke.range[1]))-1));for(var ut=[],ct=0;ct<=1;ct++)if(!ct||ke.minor){var Ct=ct?ke.minor.tickvals:ke.tickvals,Lt=ct?[]:ke.ticktext;if(Ct){Array.isArray(Lt)||(Lt=[]);for(var Mt=0;Mt<Ct.length;Mt++){var mt=nt(Ct[Mt]);if(mt>qe&&mt<Xe){var kt=Lt[Mt]===void 0?W.tickText(ke,mt):Ce(ke,mt,String(Lt[Mt]));ct&&(kt.minor=!0,kt.text=""),ut.push(kt)}}}}return ke.rangebreaks&&(ut=ut.filter(function(wt){return ke.maskBreaks(wt.x)!==P})),ut}W.getDataToCoordFunc=function(ke,Pe,qe,Xe){return fe(ke,Pe,qe,Xe).d2c},W.counterLetter=function(ke){var Pe=ke.charAt(0);return Pe==="x"?"y":Pe==="y"?"x":void 0},W.minDtick=function(ke,Pe,qe,Xe){["log","category","multicategory"].indexOf(ke.type)===-1&&Xe?ke._minDtick===void 0?(ke._minDtick=Pe,ke._forceTick0=qe):ke._minDtick&&((ke._minDtick/Pe+1e-6)%1<2e-6&&((qe-ke._forceTick0)/Pe%1+1.000001)%1<2e-6?(ke._minDtick=Pe,ke._forceTick0=qe):((Pe/ke._minDtick+1e-6)%1>2e-6||((qe-ke._forceTick0)/ke._minDtick%1+1.000001)%1>2e-6)&&(ke._minDtick=0)):ke._minDtick=0},W.saveRangeInitial=function(ke,Pe){for(var qe=W.list(ke,"",!0),Xe=!1,nt=0;nt<qe.length;nt++){var ut=qe[nt],ct=ut._rangeInitial===void 0,Ct=ct||!(ut.range[0]===ut._rangeInitial[0]&&ut.range[1]===ut._rangeInitial[1]);(ct&&ut.autorange===!1||Pe&&Ct)&&(ut._rangeInitial=ut.range.slice(),Xe=!0)}return Xe},W.saveShowSpikeInitial=function(ke,Pe){for(var qe=W.list(ke,"",!0),Xe=!1,nt="on",ut=0;ut<qe.length;ut++){var ct=qe[ut],Ct=ct._showSpikeInitial===void 0,Lt=Ct||ct.showspikes!==ct._showspikes;(Ct||Pe&&Lt)&&(ct._showSpikeInitial=ct.showspikes,Xe=!0),nt!=="on"||ct.showspikes||(nt="off")}return ke._fullLayout._cartesianSpikesEnabled=nt,Xe},W.autoBin=function(ke,Pe,qe,Xe,nt,ut){var ct,Ct=x.aggNums(Math.min,null,ke),Lt=x.aggNums(Math.max,null,ke);if(Pe.type==="category"||Pe.type==="multicategory")return{start:Ct-.5,end:Lt+.5,size:Math.max(1,Math.round(ut)||1),_dataSpan:Lt-Ct};if(nt||(nt=Pe.calendar),ct=Pe.type==="log"?{type:"linear",range:[Ct,Lt]}:{type:Pe.type,range:x.simpleMap([Ct,Lt],Pe.c2r,0,nt),calendar:nt},W.setConvert(ct),ut=ut&&a.dtick(ut,ct.type))ct.dtick=ut,ct.tick0=a.tick0(void 0,ct.type,nt);else{var Mt;if(qe)Mt=(Lt-Ct)/qe;else{var mt=x.distinctVals(ke),kt=Math.pow(10,Math.floor(Math.log(mt.minDiff)/Math.LN10)),wt=kt*x.roundUp(mt.minDiff/kt,[.9,1.9,4.9,9.9],!0);Mt=Math.max(wt,2*x.stdev(ke)/Math.pow(ke.length,Xe?.25:.4)),k(Mt)||(Mt=1)}W.autoTicks(ct,Mt)}var Ot,It=ct.dtick,Nt=W.tickIncrement(W.tickFirst(ct),It,"reverse",nt);if(typeof It=="number")Nt=function(Dt,qt,Xt,cn,yn){var Kt=0,Mn=0,Un=0,xn=0;function dn(On){return(1+100*(On-Dt)/Xt.dtick)%100<2}for(var gn=0;gn<qt.length;gn++)qt[gn]%1==0?Un++:k(qt[gn])||xn++,dn(qt[gn])&&Kt++,dn(qt[gn]+Xt.dtick/2)&&Mn++;var an=qt.length-xn;if(Un===an&&Xt.type!=="date")Xt.dtick<1?Dt=cn-.5*Xt.dtick:(Dt-=.5)+Xt.dtick<cn&&(Dt+=Xt.dtick);else if(Mn<.1*an&&(Kt>.3*an||dn(cn)||dn(yn))){var sn=Xt.dtick/2;Dt+=Dt+sn<cn?sn:-sn}return Dt}(Nt,ke,ct,Ct,Lt),Ot=Nt+(1+Math.floor((Lt-Nt)/It))*It;else for(ct.dtick.charAt(0)==="M"&&(Nt=function(Dt,qt,Xt,cn,yn){var Kt=x.findExactDates(qt,yn);if(Kt.exactDays>.8){var Mn=Number(Xt.substr(1));Kt.exactYears>.8&&Mn%12==0?Dt=W.tickIncrement(Dt,"M6","reverse")+1.5*u:Kt.exactMonths>.8?Dt=W.tickIncrement(Dt,"M1","reverse")+15.5*u:Dt-=S;var Un=W.tickIncrement(Dt,Xt);if(Un<=cn)return Un}return Dt}(Nt,ke,It,Ct,nt)),Ot=Nt;Ot<=Lt;)Ot=W.tickIncrement(Ot,It,!1,nt);return{start:Pe.c2r(Nt,0,nt),end:Pe.c2r(Ot,0,nt),size:It,_dataSpan:Lt-Ct}},W.prepMinorTicks=function(ke,Pe,qe){if(!Pe.minor.dtick){delete ke.dtick;var Xe,nt=Pe.dtick&&k(Pe._tmin);if(nt){var ut=W.tickIncrement(Pe._tmin,Pe.dtick,!0);Xe=[Pe._tmin,.99*ut+.01*Pe._tmin]}else{var ct=x.simpleMap(Pe.range,Pe.r2l);Xe=[ct[0],.8*ct[0]+.2*ct[1]]}if(ke.range=x.simpleMap(Xe,Pe.l2r),ke._isMinor=!0,W.prepTicks(ke,qe),nt){var Ct=k(Pe.dtick),Lt=k(ke.dtick),Mt=Ct?Pe.dtick:+Pe.dtick.substring(1),mt=Lt?ke.dtick:+ke.dtick.substring(1);Ct&&Lt?he(Mt,mt)?Mt===2*w&&mt===2*u&&(ke.dtick=w):Mt===2*w&&mt===3*u?ke.dtick=w:Mt!==w||(Pe._input.minor||{}).nticks?ve(Mt/mt,2.5)?ke.dtick=Mt/2:ke.dtick=Mt:ke.dtick=u:String(Pe.dtick).charAt(0)==="M"?Lt?ke.dtick="M1":he(Mt,mt)?Mt>=12&&mt===2&&(ke.dtick="M3"):ke.dtick=Pe.dtick:String(ke.dtick).charAt(0)==="L"?String(Pe.dtick).charAt(0)==="L"?he(Mt,mt)||(ke.dtick=ve(Mt/mt,2.5)?Pe.dtick/2:Pe.dtick):ke.dtick="D1":ke.dtick==="D2"&&+Pe.dtick>1&&(ke.dtick=1)}ke.range=Pe.range}Pe.minor._tick0Init===void 0&&(ke.tick0=Pe.tick0)},W.prepTicks=function(ke,Pe){var qe=x.simpleMap(ke.range,ke.r2l,void 0,void 0,Pe);if(ke.tickmode==="auto"||!ke.dtick){var Xe,nt=ke.nticks;nt||(ke.type==="category"||ke.type==="multicategory"?(Xe=ke.tickfont?x.bigFont(ke.tickfont.size||12):15,nt=ke._length/Xe):(Xe=ke._id.charAt(0)==="y"?40:80,nt=x.constrain(ke._length/Xe,4,9)+1),ke._name==="radialaxis"&&(nt*=2)),ke.minor&&ke.minor.tickmode!=="array"||ke.tickmode==="array"&&(nt*=100),ke._roughDTick=Math.abs(qe[1]-qe[0])/nt,W.autoTicks(ke,ke._roughDTick),ke._minDtick>0&&ke.dtick<2*ke._minDtick&&(ke.dtick=ke._minDtick,ke.tick0=ke.l2r(ke._forceTick0))}ke.ticklabelmode==="period"&&function(ut){var ct;function Ct(){return!(k(ut.dtick)||ut.dtick.charAt(0)!=="M")}var Lt=Ct(),Mt=W.getTickFormat(ut);if(Mt){var mt=ut._dtickInit!==ut.dtick;/%[fLQsSMX]/.test(Mt)||(/%[HI]/.test(Mt)?(ct=_,mt&&!Lt&&ut.dtick<_&&(ut.dtick=_)):/%p/.test(Mt)?(ct=S,mt&&!Lt&&ut.dtick<S&&(ut.dtick=S)):/%[Aadejuwx]/.test(Mt)?(ct=u,mt&&!Lt&&ut.dtick<u&&(ut.dtick=u)):/%[UVW]/.test(Mt)?(ct=w,mt&&!Lt&&ut.dtick<w&&(ut.dtick=w)):/%[Bbm]/.test(Mt)?(ct=p,mt&&(Lt?Ie(ut.dtick)<1:ut.dtick<m)&&(ut.dtick="M1")):/%[q]/.test(Mt)?(ct=v,mt&&(Lt?Ie(ut.dtick)<3:ut.dtick<g)&&(ut.dtick="M3")):/%[Yy]/.test(Mt)&&(ct=h,mt&&(Lt?Ie(ut.dtick)<12:ut.dtick<f)&&(ut.dtick="M12")))}(Lt=Ct())&&ut.tick0===ut._dowTick0&&(ut.tick0=ut._rawTick0),ut._definedDelta=ct}(ke),ke.tick0||(ke.tick0=ke.type==="date"?"2000-01-01":0),ke.type==="date"&&ke.dtick<.1&&(ke.dtick=.1),Re(ke)},W.calcTicks=function(ke,Pe){for(var qe,Xe,nt=ke.type,ut=ke.calendar,ct=ke.ticklabelstep,Ct=ke.ticklabelmode==="period",Lt=x.simpleMap(ke.range,ke.r2l,void 0,void 0,Pe),Mt=Lt[1]<Lt[0],mt=Math.min(Lt[0],Lt[1]),kt=Math.max(Lt[0],Lt[1]),wt=Math.max(1e3,ke._length||0),Ot=[],It=[],Nt=[],Dt=[],qt=ke.minor&&(ke.minor.ticks||ke.minor.showgrid),Xt=1;Xt>=(qt?0:1);Xt--){var cn=!Xt;Xt?(ke._dtickInit=ke.dtick,ke._tick0Init=ke.tick0):(ke.minor._dtickInit=ke.minor.dtick,ke.minor._tick0Init=ke.minor.tick0);var yn=Xt?ke:x.extendFlat({},ke,ke.minor);if(cn?W.prepMinorTicks(yn,ke,Pe):W.prepTicks(yn,Pe),yn.tickmode!=="array"){var Kt=se(Lt),Mn=Kt[0],Un=Kt[1],xn=k(yn.dtick),dn=nt==="log"&&!(xn||yn.dtick.charAt(0)==="L"),gn=W.tickFirst(yn,Pe);if(Xt){if(ke._tmin=gn,gn<Mn!==Mt)break;nt!=="category"&&nt!=="multicategory"||(Un=Mt?Math.max(-.5,Un):Math.min(ke._categories.length-.5,Un))}var an,sn,On=null,En=gn;Xt&&(xn?sn=ke.dtick:nt==="date"?typeof ke.dtick=="string"&&ke.dtick.charAt(0)==="M"&&(sn=p*ke.dtick.substring(1)):sn=ke._roughDTick,an=Math.round((ke.r2l(En)-ke.r2l(ke.tick0))/sn)-1);var Dn=yn.dtick;for(yn.rangebreaks&&yn._tick0Init!==yn.tick0&&(En=Pt(En,ke),Mt||(En=W.tickIncrement(En,Dn,!Mt,ut))),Xt&&Ct&&(En=W.tickIncrement(En,Dn,!Mt,ut),an--);Mt?En>=Un:En<=Un;En=W.tickIncrement(En,Dn,Mt,ut)){if(Xt&&an++,yn.rangebreaks&&!Mt){if(En<Mn)continue;if(yn.maskBreaks(En)===P&&Pt(En,yn)>=kt)break}if(Nt.length>wt||En===On)break;On=En;var Zn={value:En};Xt?(dn&&En!==(0|En)&&(Zn.simpleLabel=!0),ct>1&&an%ct&&(Zn.skipLabel=!0),Nt.push(Zn)):(Zn.minor=!0,Dt.push(Zn))}}else Xt?(Nt=[],Ot=xe(ke)):(Dt=[],It=xe(ke))}if(qt&&!(ke.minor.ticks==="inside"&&ke.ticks==="outside"||ke.minor.ticks==="outside"&&ke.ticks==="inside")){for(var Fn=Nt.map(function(cr){return cr.value}),nr=[],$n=0;$n<Dt.length;$n++){var mr=Dt[$n],dr=mr.value;if(Fn.indexOf(dr)===-1){for(var Yn=!1,Vn=0;!Yn&&Vn<Nt.length;Vn++)1e7+Nt[Vn].value===1e7+dr&&(Yn=!0);Yn||nr.push(mr)}}Dt=nr}if(Ct&&function(cr,$t,An){for(var Rt=0;Rt<cr.length;Rt++){var Yt=cr[Rt].value,rn=Rt,bn=Rt+1;Rt<cr.length-1?(rn=Rt,bn=Rt+1):Rt>0?(rn=Rt-1,bn=Rt):(rn=Rt,bn=Rt);var ln,kn=cr[rn].value,Tn=cr[bn].value,hn=Math.abs(Tn-kn),nn=An||hn,fn=0;nn>=f?fn=hn>=f&&hn<=c?hn:h:An===v&&nn>=g?fn=hn>=g&&hn<=b?hn:v:nn>=m?fn=hn>=m&&hn<=y?hn:p:An===w&&nn>=w?fn=w:nn>=u?fn=u:An===S&&nn>=S?fn=S:An===_&&nn>=_&&(fn=_),fn>=hn&&(fn=hn,ln=!0);var mn=Yt+fn;if($t.rangebreaks&&fn>0){for(var zn=0,Gn=0;Gn<84;Gn++){var Hn=(Gn+.5)/84;$t.maskBreaks(Yt*(1-Hn)+Hn*mn)!==P&&zn++}(fn*=zn/84)||(cr[Rt].drop=!0),ln&&hn>w&&(fn=hn)}(fn>0||Rt===0)&&(cr[Rt].periodX=Yt+fn/2)}}(Nt,ke,ke._definedDelta),ke.rangebreaks){var ur=ke._id.charAt(0)==="y",Gt=1;ke.tickmode==="auto"&&(Gt=ke.tickfont?ke.tickfont.size:12);var tn=NaN;for(qe=Nt.length-1;qe>-1;qe--)if(Nt[qe].drop)Nt.splice(qe,1);else{Nt[qe].value=Pt(Nt[qe].value,ke);var In=ke.c2p(Nt[qe].value);(ur?tn>In-Gt:tn<In+Gt)?Nt.splice(Mt?qe+1:qe,1):tn=In}}Ut(ke)&&Math.abs(Lt[1]-Lt[0])===360&&Nt.pop(),ke._tmax=(Nt[Nt.length-1]||{}).value,ke._prevDateHead="",ke._inCalcTicks=!0;var _n,Sn,jn=function(cr){cr.text="",ke._prevDateHead=Xe};for(Nt=Nt.concat(Dt),qe=0;qe<Nt.length;qe++){var qn=Nt[qe].minor,ar=Nt[qe].value;qn?It.push({x:ar,minor:!0}):(Xe=ke._prevDateHead,_n=W.tickText(ke,ar,!1,Nt[qe].simpleLabel),(Sn=Nt[qe].periodX)!==void 0&&(_n.periodX=Sn,(Sn>kt||Sn<mt)&&(Sn>kt&&(_n.periodX=kt),Sn<mt&&(_n.periodX=mt),jn(_n))),Nt[qe].skipLabel&&jn(_n),Ot.push(_n))}return Ot=Ot.concat(It),ke._inCalcTicks=!1,Ct&&Ot.length&&(Ot[0].noTick=!0),Ot};var Ae=[2,5,10],Se=[1,2,3,6,12],Te=[1,2,5,10,15,30],Q=[1,2,3,7,14],oe=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ce=[-.301,0,.301,.699,1],me=[15,30,45,90,180];function Me(ke,Pe,qe){return Pe*x.roundUp(ke/Pe,qe)}function Re(ke){var Pe=ke.dtick;if(ke._tickexponent=0,k(Pe)||typeof Pe=="string"||(Pe=1),ke.type!=="category"&&ke.type!=="multicategory"||(ke._tickround=null),ke.type==="date"){var qe=ke.r2l(ke.tick0),Xe=ke.l2r(qe).replace(/(^-|i)/g,""),nt=Xe.length;if(String(Pe).charAt(0)==="M")nt>10||Xe.substr(5)!=="01-01"?ke._tickround="d":ke._tickround=+Pe.substr(1)%12==0?"y":"m";else if(Pe>=u&&nt<=10||Pe>=15*u)ke._tickround="d";else if(Pe>=E&&nt<=16||Pe>=_)ke._tickround="M";else if(Pe>=L&&nt<=19||Pe>=E)ke._tickround="S";else{var ut=ke.l2r(qe+Pe).replace(/^-/,"").length;ke._tickround=Math.max(nt,ut)-20,ke._tickround<0&&(ke._tickround=4)}}else if(k(Pe)||Pe.charAt(0)==="L"){var ct=ke.range.map(ke.r2d||Number);k(Pe)||(Pe=Number(Pe.substr(1))),ke._tickround=2-Math.floor(Math.log(Pe)/Math.LN10+.01);var Ct=Math.max(Math.abs(ct[0]),Math.abs(ct[1])),Lt=Math.floor(Math.log(Ct)/Math.LN10+.01),Mt=ke.minexponent===void 0?3:ke.minexponent;Math.abs(Lt)>Mt&&(le(ke.exponentformat)&&!de(Lt)?ke._tickexponent=3*Math.round((Lt-1)/3):ke._tickexponent=Lt)}else ke._tickround=null}function Ce(ke,Pe,qe){var Xe=ke.tickfont||{};return{x:Pe,dx:0,dy:0,text:qe||"",fontSize:Xe.size,font:Xe.family,fontColor:Xe.color}}W.autoTicks=function(ke,Pe,qe){var Xe;function nt(kt){return Math.pow(kt,Math.floor(Math.log(Pe)/Math.LN10))}if(ke.type==="date"){ke.tick0=x.dateTick0(ke.calendar,0);var ut=2*Pe;if(ut>h)Pe/=h,Xe=nt(10),ke.dtick="M"+12*Me(Pe,Xe,Ae);else if(ut>p)Pe/=p,ke.dtick="M"+Me(Pe,1,Se);else if(ut>u){if(ke.dtick=Me(Pe,u,ke._hasDayOfWeekBreaks?[1,2,7,14]:Q),!qe){var ct=W.getTickFormat(ke),Ct=ke.ticklabelmode==="period";Ct&&(ke._rawTick0=ke.tick0),/%[uVW]/.test(ct)?ke.tick0=x.dateTick0(ke.calendar,2):ke.tick0=x.dateTick0(ke.calendar,1),Ct&&(ke._dowTick0=ke.tick0)}}else ut>_?ke.dtick=Me(Pe,_,Se):ut>E?ke.dtick=Me(Pe,E,Te):ut>L?ke.dtick=Me(Pe,L,Te):(Xe=nt(10),ke.dtick=Me(Pe,Xe,Ae))}else if(ke.type==="log"){ke.tick0=0;var Lt=x.simpleMap(ke.range,ke.r2l);if(ke._isMinor&&(Pe*=1.5),Pe>.7)ke.dtick=Math.ceil(Pe);else if(Math.abs(Lt[1]-Lt[0])<1){var Mt=1.5*Math.abs((Lt[1]-Lt[0])/Pe);Pe=Math.abs(Math.pow(10,Lt[1])-Math.pow(10,Lt[0]))/Mt,Xe=nt(10),ke.dtick="L"+Me(Pe,Xe,Ae)}else ke.dtick=Pe>.3?"D2":"D1"}else ke.type==="category"||ke.type==="multicategory"?(ke.tick0=0,ke.dtick=Math.ceil(Math.max(Pe,1))):Ut(ke)?(ke.tick0=0,Xe=1,ke.dtick=Me(Pe,Xe,me)):(ke.tick0=0,Xe=nt(10),ke.dtick=Me(Pe,Xe,Ae));if(ke.dtick===0&&(ke.dtick=1),!k(ke.dtick)&&typeof ke.dtick!="string"){var mt=ke.dtick;throw ke.dtick=1,"ax.dtick error: "+String(mt)}},W.tickIncrement=function(ke,Pe,qe,Xe){var nt=qe?-1:1;if(k(Pe))return x.increment(ke,nt*Pe);var ut=Pe.charAt(0),ct=nt*Number(Pe.substr(1));if(ut==="M")return x.incrementMonth(ke,ct,Xe);if(ut==="L")return Math.log(Math.pow(10,ke)+ct)/Math.LN10;if(ut==="D"){var Ct=Pe==="D2"?ce:oe,Lt=ke+.01*nt,Mt=x.roundUp(x.mod(Lt,1),Ct,qe);return Math.floor(Lt)+Math.log(A.round(Math.pow(10,Mt),1))/Math.LN10}throw"unrecognized dtick "+String(Pe)},W.tickFirst=function(ke,Pe){var qe=ke.r2l||Number,Xe=x.simpleMap(ke.range,qe,void 0,void 0,Pe),nt=Xe[1]<Xe[0],ut=nt?Math.floor:Math.ceil,ct=se(Xe)[0],Ct=ke.dtick,Lt=qe(ke.tick0);if(k(Ct)){var Mt=ut((ct-Lt)/Ct)*Ct+Lt;return ke.type!=="category"&&ke.type!=="multicategory"||(Mt=x.constrain(Mt,0,ke._categories.length-1)),Mt}var mt=Ct.charAt(0),kt=Number(Ct.substr(1));if(mt==="M"){for(var wt,Ot,It,Nt=0,Dt=Lt;Nt<10;){if(((wt=W.tickIncrement(Dt,Ct,nt,ke.calendar))-ct)*(Dt-ct)<=0)return nt?Math.min(Dt,wt):Math.max(Dt,wt);Ot=(ct-(Dt+wt)/2)/(wt-Dt),It=mt+(Math.abs(Math.round(Ot))||1)*kt,Dt=W.tickIncrement(Dt,It,Ot<0?!nt:nt,ke.calendar),Nt++}return x.error("tickFirst did not converge",ke),Dt}if(mt==="L")return Math.log(ut((Math.pow(10,ct)-Lt)/kt)*kt+Lt)/Math.LN10;if(mt==="D"){var qt=Ct==="D2"?ce:oe,Xt=x.roundUp(x.mod(ct,1),qt,nt);return Math.floor(ct)+Math.log(A.round(Math.pow(10,Xt),1))/Math.LN10}throw"unrecognized dtick "+String(Ct)},W.tickText=function(ke,Pe,qe,Xe){var nt,ut=Ce(ke,Pe),ct=ke.tickmode==="array",Ct=qe||ct,Lt=ke.type,Mt=Lt==="category"?ke.d2l_noadd:ke.d2l;if(ct&&Array.isArray(ke.ticktext)){var mt=x.simpleMap(ke.range,ke.r2l),kt=(Math.abs(mt[1]-mt[0])-(ke._lBreaks||0))/1e4;for(nt=0;nt<ke.ticktext.length&&!(Math.abs(Pe-Mt(ke.tickvals[nt]))<kt);nt++);if(nt<ke.ticktext.length)return ut.text=String(ke.ticktext[nt]),ut}function wt(Nt){if(Nt===void 0)return!0;if(qe)return Nt==="none";var Dt={first:ke._tmin,last:ke._tmax}[Nt];return Nt!=="all"&&Pe!==Dt}var Ot=qe?"never":ke.exponentformat!=="none"&&wt(ke.showexponent)?"hide":"";if(Lt==="date"?function(Nt,Dt,qt,Xt){var cn=Nt._tickround,yn=qt&&Nt.hoverformat||W.getTickFormat(Nt);Xt&&(cn=k(cn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[cn]);var Kt,Mn=x.formatDate(Dt.x,yn,cn,Nt._dateFormat,Nt.calendar,Nt._extraFormat),Un=Mn.indexOf(`
`);if(Un!==-1&&(Kt=Mn.substr(Un+1),Mn=Mn.substr(0,Un)),Xt&&(Mn==="00:00:00"||Mn==="00:00"?(Mn=Kt,Kt=""):Mn.length===8&&(Mn=Mn.replace(/:00$/,""))),Kt)if(qt)cn==="d"?Mn+=", "+Kt:Mn=Kt+(Mn?", "+Mn:"");else if(Nt._inCalcTicks&&Nt._prevDateHead===Kt){var xn=Ze(Nt),dn=Nt._trueSide||Nt.side;(!xn&&dn==="top"||xn&&dn==="bottom")&&(Mn+="<br> ")}else Nt._prevDateHead=Kt,Mn+="<br>"+Kt;Dt.text=Mn}(ke,ut,qe,Ct):Lt==="log"?function(Nt,Dt,qt,Xt,cn){var yn=Nt.dtick,Kt=Dt.x,Mn=Nt.tickformat,Un=typeof yn=="string"&&yn.charAt(0);if(cn==="never"&&(cn=""),Xt&&Un!=="L"&&(yn="L3",Un="L"),Mn||Un==="L")Dt.text=be(Math.pow(10,Kt),Nt,cn,Xt);else if(k(yn)||Un==="D"&&x.mod(Kt+.01,1)<.1){var xn=Math.round(Kt),dn=Math.abs(xn),gn=Nt.exponentformat;gn==="power"||le(gn)&&de(xn)?(Dt.text=xn===0?1:xn===1?"10":"10<sup>"+(xn>1?"":C)+dn+"</sup>",Dt.fontSize*=1.25):(gn==="e"||gn==="E")&&dn>2?Dt.text="1"+gn+(xn>0?"+":C)+dn:(Dt.text=be(Math.pow(10,Kt),Nt,"","fakehover"),yn==="D1"&&Nt._id.charAt(0)==="y"&&(Dt.dy-=Dt.fontSize/6))}else{if(Un!=="D")throw"unrecognized dtick "+String(yn);Dt.text=String(Math.round(Math.pow(10,x.mod(Kt,1)))),Dt.fontSize*=.75}if(Nt.dtick==="D1"){var an=String(Dt.text).charAt(0);an!=="0"&&an!=="1"||(Nt._id.charAt(0)==="y"?Dt.dx-=Dt.fontSize/4:(Dt.dy+=Dt.fontSize/2,Dt.dx+=(Nt.range[1]>Nt.range[0]?1:-1)*Dt.fontSize*(Kt<0?.5:.25)))}}(ke,ut,0,Ct,Ot):Lt==="category"?function(Nt,Dt){var qt=Nt._categories[Math.round(Dt.x)];qt===void 0&&(qt=""),Dt.text=String(qt)}(ke,ut):Lt==="multicategory"?function(Nt,Dt,qt){var Xt=Math.round(Dt.x),cn=Nt._categories[Xt]||[],yn=cn[1]===void 0?"":String(cn[1]),Kt=cn[0]===void 0?"":String(cn[0]);qt?Dt.text=Kt+" - "+yn:(Dt.text=yn,Dt.text2=Kt)}(ke,ut,qe):Ut(ke)?function(Nt,Dt,qt,Xt,cn){if(Nt.thetaunit!=="radians"||qt)Dt.text=be(Dt.x,Nt,cn,Xt);else{var yn=Dt.x/180;if(yn===0)Dt.text="0";else{var Kt=function(Un){function xn(sn,On){return Math.abs(sn-On)<=1e-6}var dn=function(sn){for(var On=1;!xn(Math.round(sn*On)/On,sn);)On*=10;return On}(Un),gn=Un*dn,an=Math.abs(function sn(On,En){return xn(En,0)?On:sn(En,On%En)}(gn,dn));return[Math.round(gn/an),Math.round(dn/an)]}(yn);if(Kt[1]>=100)Dt.text=be(x.deg2rad(Dt.x),Nt,cn,Xt);else{var Mn=Dt.x<0;Kt[1]===1?Kt[0]===1?Dt.text="π":Dt.text=Kt[0]+"π":Dt.text=["<sup>",Kt[0],"</sup>","⁄","<sub>",Kt[1],"</sub>","π"].join(""),Mn&&(Dt.text=C+Dt.text)}}}}(ke,ut,qe,Ct,Ot):function(Nt,Dt,qt,Xt,cn){cn==="never"?cn="":Nt.showexponent==="all"&&Math.abs(Dt.x/Nt.dtick)<1e-6&&(cn="hide"),Dt.text=be(Dt.x,Nt,cn,Xt)}(ke,ut,0,Ct,Ot),Xe||(ke.tickprefix&&!wt(ke.showtickprefix)&&(ut.text=ke.tickprefix+ut.text),ke.ticksuffix&&!wt(ke.showticksuffix)&&(ut.text+=ke.ticksuffix)),ke.tickson==="boundaries"||ke.showdividers){var It=function(Nt){var Dt=ke.l2p(Nt);return Dt>=0&&Dt<=ke._length?Nt:null};ut.xbnd=[It(ut.x-.5),It(ut.x+ke.dtick-.5)]}return ut},W.hoverLabelText=function(ke,Pe,qe){qe&&(ke=x.extendFlat({},ke,{hoverformat:qe}));var Xe=Array.isArray(Pe)?Pe[0]:Pe,nt=Array.isArray(Pe)?Pe[1]:void 0;if(nt!==void 0&&nt!==Xe)return W.hoverLabelText(ke,Xe,qe)+" - "+W.hoverLabelText(ke,nt,qe);var ut=ke.type==="log"&&Xe<=0,ct=W.tickText(ke,ke.c2l(ut?-Xe:Xe),"hover").text;return ut?Xe===0?"0":C+ct:ct};var ze=["f","p","n","μ","m","","k","M","G","T"];function le(ke){return ke==="SI"||ke==="B"}function de(ke){return ke>14||ke<-15}function be(ke,Pe,qe,Xe){var nt=ke<0,ut=Pe._tickround,ct=qe||Pe.exponentformat||"B",Ct=Pe._tickexponent,Lt=W.getTickFormat(Pe),Mt=Pe.separatethousands;if(Xe){var mt={exponentformat:ct,minexponent:Pe.minexponent,dtick:Pe.showexponent==="none"?Pe.dtick:k(ke)&&Math.abs(ke)||1,range:Pe.showexponent==="none"?Pe.range.map(Pe.r2d):[0,ke||1]};Re(mt),ut=(Number(mt._tickround)||0)+4,Ct=mt._tickexponent,Pe.hoverformat&&(Lt=Pe.hoverformat)}if(Lt)return Pe._numFormat(Lt)(ke).replace(/-/g,C);var kt,wt=Math.pow(10,-ut)/2;if(ct==="none"&&(Ct=0),(ke=Math.abs(ke))<wt)ke="0",nt=!1;else{if(ke+=wt,Ct&&(ke*=Math.pow(10,-Ct),ut+=Ct),ut===0)ke=String(Math.floor(ke));else if(ut<0){ke=(ke=String(Math.round(ke))).substr(0,ke.length+ut);for(var Ot=ut;Ot<0;Ot++)ke+="0"}else{var It=(ke=String(ke)).indexOf(".")+1;It&&(ke=ke.substr(0,It+ut).replace(/\.?0+$/,""))}ke=x.numSeparate(ke,Pe._separators,Mt)}return Ct&&ct!=="hide"&&(le(ct)&&de(Ct)&&(ct="power"),kt=Ct<0?C+-Ct:ct!=="power"?"+"+Ct:String(Ct),ct==="e"||ct==="E"?ke+=ct+kt:ct==="power"?ke+="×10<sup>"+kt+"</sup>":ct==="B"&&Ct===9?ke+="B":le(ct)&&(ke+=ze[Ct/3+5])),nt?C+ke:ke}function Fe(ke,Pe){if(ke){var qe=Object.keys(N).reduce(function(Xe,nt){return Pe.indexOf(nt)!==-1&&N[nt].forEach(function(ut){Xe[ut]=1}),Xe},{});Object.keys(ke).forEach(function(Xe){qe[Xe]||(Xe.length===1?ke[Xe]=0:delete ke[Xe])})}}function Ve(ke,Pe){for(var qe=[],Xe={},nt=0;nt<Pe.length;nt++){var ut=Pe[nt];Xe[ut.text2]?Xe[ut.text2].push(ut.x):Xe[ut.text2]=[ut.x]}for(var ct in Xe)qe.push(Ce(ke,x.interp(Xe[ct],.5),ct));return qe}function He(ke){return ke.periodX!==void 0?ke.periodX:ke.x}function rt(ke){return[ke.text,ke.x,ke.axInfo,ke.font,ke.fontSize,ke.fontColor].join("_")}function tt(ke){var Pe=ke.title.font.size,qe=(ke.title.text.match(s.BR_TAG_ALL)||[]).length;return ke.title.hasOwnProperty("standoff")?qe?Pe*(K+qe*G):Pe*K:qe?Pe*(qe+1)*G:Pe}function ot(ke,Pe){var qe=ke.l2p(Pe);return qe>1&&qe<ke._length-1}function ht(ke){var Pe=A.select(ke),qe=Pe.select(".text-math-group");return qe.empty()?Pe.select("text"):qe}function _t(ke){return ke._id+".automargin"}function dt(ke){return _t(ke)+".mirror"}function bt(ke){return ke._id+".rangeslider"}function St(ke,Pe){for(var qe=0;qe<Pe.length;qe++)ke.indexOf(Pe[qe])===-1&&ke.push(Pe[qe])}function Et(ke,Pe,qe){var Xe,nt,ut=[],ct=[],Ct=ke.layout;for(Xe=0;Xe<Pe.length;Xe++)ut.push(W.getFromId(ke,Pe[Xe]));for(Xe=0;Xe<qe.length;Xe++)ct.push(W.getFromId(ke,qe[Xe]));var Lt=Object.keys(n),Mt=["anchor","domain","overlaying","position","side","tickangle","editType"],mt=["linear","log"];for(Xe=0;Xe<Lt.length;Xe++){var kt=Lt[Xe],wt=ut[0][kt],Ot=ct[0][kt],It=!0,Nt=!1,Dt=!1;if(kt.charAt(0)!=="_"&&typeof wt!="function"&&Mt.indexOf(kt)===-1){for(nt=1;nt<ut.length&&It;nt++){var qt=ut[nt][kt];kt==="type"&&mt.indexOf(wt)!==-1&&mt.indexOf(qt)!==-1&&wt!==qt?Nt=!0:qt!==wt&&(It=!1)}for(nt=1;nt<ct.length&&It;nt++){var Xt=ct[nt][kt];kt==="type"&&mt.indexOf(Ot)!==-1&&mt.indexOf(Xt)!==-1&&Ot!==Xt?Dt=!0:ct[nt][kt]!==Ot&&(It=!1)}It&&(Nt&&(Ct[ut[0]._name].type="linear"),Dt&&(Ct[ct[0]._name].type="linear"),zt(Ct,kt,ut,ct,ke._fullLayout._dfltTitle))}}for(Xe=0;Xe<ke._fullLayout.annotations.length;Xe++){var cn=ke._fullLayout.annotations[Xe];Pe.indexOf(cn.xref)!==-1&&qe.indexOf(cn.yref)!==-1&&x.swapAttrs(Ct.annotations[Xe],["?"])}}function zt(ke,Pe,qe,Xe,nt){var ut,ct=x.nestedProperty,Ct=ct(ke[qe[0]._name],Pe).get(),Lt=ct(ke[Xe[0]._name],Pe).get();for(Pe==="title"&&(Ct&&Ct.text===nt.x&&(Ct.text=nt.y),Lt&&Lt.text===nt.y&&(Lt.text=nt.x)),ut=0;ut<qe.length;ut++)ct(ke,qe[ut]._name+"."+Pe).set(Lt);for(ut=0;ut<Xe.length;ut++)ct(ke,Xe[ut]._name+"."+Pe).set(Ct)}function Ut(ke){return ke._id==="angularaxis"}function Pt(ke,Pe){for(var qe=Pe._rangebreaks.length,Xe=0;Xe<qe;Xe++){var nt=Pe._rangebreaks[Xe];if(ke>=nt.min&&ke<nt.max)return nt.max}return ke}function Ze(ke){return(ke.ticklabelposition||"").indexOf("inside")!==-1}function Ye(ke,Pe){Ze(ke._anchorAxis||{})&&ke._hideCounterAxisInsideTickLabels&&ke._hideCounterAxisInsideTickLabels(Pe)}function Be(ke,Pe,qe,Xe){var nt,ut=ke.anchor==="free"||ke.overlaying!==void 0&&ke.overlaying!==!1?ke.overlaying:ke._id;nt=Xe?ke.side==="right"?Pe:-Pe:Pe,ut in qe||(qe[ut]={}),ke.side in qe[ut]||(qe[ut][ke.side]=0),qe[ut][ke.side]+=nt}W.getTickFormat=function(ke){var Pe,qe,Xe,nt,ut,ct,Ct,Lt;function Mt(wt){return typeof wt!="string"?wt:Number(wt.replace("M",""))*p}function mt(wt,Ot){var It=["L","D"];if(typeof wt==typeof Ot){if(typeof wt=="number")return wt-Ot;var Nt=It.indexOf(wt.charAt(0)),Dt=It.indexOf(Ot.charAt(0));return Nt===Dt?Number(wt.replace(/(L|D)/g,""))-Number(Ot.replace(/(L|D)/g,"")):Nt-Dt}return typeof wt=="number"?1:-1}function kt(wt,Ot){var It=Ot[0]===null,Nt=Ot[1]===null,Dt=mt(wt,Ot[0])>=0,qt=mt(wt,Ot[1])<=0;return(It||Dt)&&(Nt||qt)}if(ke.tickformatstops&&ke.tickformatstops.length>0)switch(ke.type){case"date":case"linear":for(Pe=0;Pe<ke.tickformatstops.length;Pe++)if((Xe=ke.tickformatstops[Pe]).enabled&&(nt=ke.dtick,ut=Xe.dtickrange,ct=void 0,Ct=void 0,Lt=void 0,ct=Mt||function(wt){return wt},Ct=ut[0],Lt=ut[1],(!Ct&&typeof Ct!="number"||ct(Ct)<=ct(nt))&&(!Lt&&typeof Lt!="number"||ct(Lt)>=ct(nt)))){qe=Xe;break}break;case"log":for(Pe=0;Pe<ke.tickformatstops.length;Pe++)if((Xe=ke.tickformatstops[Pe]).enabled&&kt(ke.dtick,Xe.dtickrange)){qe=Xe;break}}return qe?qe.value:ke.tickformat},W.getSubplots=function(ke,Pe){var qe=ke._fullLayout._subplots,Xe=qe.cartesian.concat(qe.gl2d||[]),nt=Pe?W.findSubplotsWithAxis(Xe,Pe):Xe;return nt.sort(function(ut,ct){var Ct=ut.substr(1).split("y"),Lt=ct.substr(1).split("y");return Ct[0]===Lt[0]?+Ct[1]-+Lt[1]:+Ct[0]-+Lt[0]}),nt},W.findSubplotsWithAxis=function(ke,Pe){for(var qe=new RegExp(Pe._id.charAt(0)==="x"?"^"+Pe._id+"y":Pe._id+"$"),Xe=[],nt=0;nt<ke.length;nt++){var ut=ke[nt];qe.test(ut)&&Xe.push(ut)}return Xe},W.makeClipPaths=function(ke){var Pe=ke._fullLayout;if(!Pe._hasOnlyLargeSploms){var qe,Xe,nt={_offset:0,_length:Pe.width,_id:""},ut={_offset:0,_length:Pe.height,_id:""},ct=W.list(ke,"x",!0),Ct=W.list(ke,"y",!0),Lt=[];for(qe=0;qe<ct.length;qe++)for(Lt.push({x:ct[qe],y:ut}),Xe=0;Xe<Ct.length;Xe++)qe===0&&Lt.push({x:nt,y:Ct[Xe]}),Lt.push({x:ct[qe],y:Ct[Xe]});var Mt=Pe._clips.selectAll(".axesclip").data(Lt,function(mt){return mt.x._id+mt.y._id});Mt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(mt){return"clip"+Pe._uid+mt.x._id+mt.y._id}).append("rect"),Mt.exit().remove(),Mt.each(function(mt){A.select(this).select("rect").attr({x:mt.x._offset||0,y:mt.y._offset||0,width:mt.x._length||1,height:mt.y._length||1})})}},W.draw=function(ke,Pe,qe){var Xe=ke._fullLayout;Pe==="redraw"&&Xe._paper.selectAll("g.subplot").each(function(Ct){var Lt=Ct[0],Mt=Xe._plots[Lt];if(Mt){var mt=Mt.xaxis,kt=Mt.yaxis;Mt.xaxislayer.selectAll("."+mt._id+"tick").remove(),Mt.yaxislayer.selectAll("."+kt._id+"tick").remove(),Mt.xaxislayer.selectAll("."+mt._id+"tick2").remove(),Mt.yaxislayer.selectAll("."+kt._id+"tick2").remove(),Mt.xaxislayer.selectAll("."+mt._id+"divider").remove(),Mt.yaxislayer.selectAll("."+kt._id+"divider").remove(),Mt.minorGridlayer&&Mt.minorGridlayer.selectAll("path").remove(),Mt.gridlayer&&Mt.gridlayer.selectAll("path").remove(),Mt.zerolinelayer&&Mt.zerolinelayer.selectAll("path").remove(),Xe._infolayer.select(".g-"+mt._id+"title").remove(),Xe._infolayer.select(".g-"+kt._id+"title").remove()}});var nt=Pe&&Pe!=="redraw"?Pe:W.listIds(ke),ut=W.list(ke).filter(function(Ct){return Ct.autoshift}).map(function(Ct){return Ct.overlaying}),ct={false:{left:0,right:0}};return x.syncOrAsync(nt.map(function(Ct){return function(){if(Ct){var Lt=W.getFromId(ke,Ct);qe||(qe={}),qe.axShifts=ct,qe.overlayingShiftedAx=ut;var Mt=W.drawOne(ke,Lt,qe);return Lt._shiftPusher&&Be(Lt,Lt._fullDepth||0,ct,!0),Lt._r=Lt.range.slice(),Lt._rl=x.simpleMap(Lt._r,Lt.r2l),Mt}}}))},W.drawOne=function(ke,Pe,qe){var Xe,nt,ut,ct=(qe=qe||{}).axShifts||{},Ct=qe.overlayingShiftedAx||[];Pe.setScale();var Lt=ke._fullLayout,Mt=Pe._id,mt=Mt.charAt(0),kt=W.counterLetter(Mt),wt=Lt._plots[Pe._mainSubplot];if(wt){if(Pe._shiftPusher=Pe.autoshift||Ct.indexOf(Pe._id)!==-1||Ct.indexOf(Pe.overlaying)!==-1,Pe._shiftPusher&Pe.anchor==="free"){var Ot=Pe.linewidth/2||0;Pe.ticks==="inside"&&(Ot+=Pe.ticklen),Be(Pe,Ot,ct,!0),Be(Pe,Pe.shift||0,ct,!1)}qe.skipTitle===!0&&Pe._shift!==void 0||(Pe._shift=function(bn,ln){return bn.autoshift?ln[bn.overlaying][bn.side]:bn.shift||0}(Pe,ct));var It=wt[mt+"axislayer"],Nt=Pe._mainLinePosition,Dt=Nt+=Pe._shift,qt=Pe._mainMirrorPosition,Xt=Pe._vals=W.calcTicks(Pe),cn=[Pe.mirror,Dt,qt].join("_");for(Xe=0;Xe<Xt.length;Xe++)Xt[Xe].axInfo=cn;Pe._selections={},Pe._tickAngles&&(Pe._prevTickAngles=Pe._tickAngles),Pe._tickAngles={},Pe._depth=null;var yn={};if(Pe.visible){var Kt,Mn,Un=W.makeTransTickFn(Pe),xn=W.makeTransTickLabelFn(Pe),dn=Pe.ticks==="inside",gn=Pe.ticks==="outside";if(Pe.tickson==="boundaries"){var an=function(bn,ln){var kn,Tn=[],hn=function(nn,fn){var mn=nn.xbnd[fn];mn!==null&&Tn.push(x.extendFlat({},nn,{x:mn}))};if(ln.length){for(kn=0;kn<ln.length;kn++)hn(ln[kn],0);hn(ln[kn-1],1)}return Tn}(0,Xt);Mn=W.clipEnds(Pe,an),Kt=dn?Mn:an}else Mn=W.clipEnds(Pe,Xt),Kt=dn&&Pe.ticklabelmode!=="period"?Mn:Xt;var sn,On=Pe._gridVals=Mn,En=function(bn,ln){var kn,Tn,hn=[],nn=ln.length&&ln[ln.length-1].x<ln[0].x,fn=function(zn,Gn){var Hn=zn.xbnd[Gn];Hn!==null&&hn.push(x.extendFlat({},zn,{x:Hn}))};if(bn.showdividers&&ln.length){for(kn=0;kn<ln.length;kn++){var mn=ln[kn];mn.text2!==Tn&&fn(mn,nn?1:0),Tn=mn.text2}fn(ln[kn-1],nn?0:1)}return hn}(Pe,Xt);if(!Lt._hasOnlyLargeSploms){var Dn=Pe._subplotsWith,Zn={};for(Xe=0;Xe<Dn.length;Xe++){nt=Dn[Xe];var Fn=(ut=Lt._plots[nt])[kt+"axis"],nr=Fn._mainAxis._id;if(!Zn[nr]){Zn[nr]=1;var $n=mt==="x"?"M0,"+Fn._offset+"v"+Fn._length:"M"+Fn._offset+",0h"+Fn._length;W.drawGrid(ke,Pe,{vals:On,counterAxis:Fn,layer:ut.gridlayer.select("."+Mt),minorLayer:ut.minorGridlayer.select("."+Mt),path:$n,transFn:Un}),W.drawZeroLine(ke,Pe,{counterAxis:Fn,layer:ut.zerolinelayer,path:$n,transFn:Un})}}}var mr=W.getTickSigns(Pe),dr=W.getTickSigns(Pe,"minor");if(Pe.ticks||Pe.minor&&Pe.minor.ticks){var Yn,Vn,ur,Gt,tn=W.makeTickPath(Pe,Dt,mr[2]),In=W.makeTickPath(Pe,Dt,dr[2],{minor:!0});if(Pe._anchorAxis&&Pe.mirror&&Pe.mirror!==!0?(Yn=W.makeTickPath(Pe,qt,mr[3]),Vn=W.makeTickPath(Pe,qt,dr[3],{minor:!0}),ur=tn+Yn,Gt=In+Vn):(Yn="",Vn="",ur=tn,Gt=In),Pe.showdividers&&gn&&Pe.tickson==="boundaries"){var _n={};for(Xe=0;Xe<En.length;Xe++)_n[En[Xe].x]=1;sn=function(bn){return _n[bn.x]?Yn:ur}}else sn=function(bn){return bn.minor?Gt:ur}}if(W.drawTicks(ke,Pe,{vals:Kt,layer:It,path:sn,transFn:Un}),Pe.mirror==="allticks"){var Sn=Object.keys(Pe._linepositions||{});for(Xe=0;Xe<Sn.length;Xe++){nt=Sn[Xe],ut=Lt._plots[nt];var jn=Pe._linepositions[nt]||[],qn=jn[0],ar=jn[1],cr=jn[2],$t=W.makeTickPath(Pe,qn,cr?mr[0]:dr[0],{minor:cr})+W.makeTickPath(Pe,ar,cr?mr[1]:dr[1],{minor:cr});W.drawTicks(ke,Pe,{vals:Kt,layer:ut[mt+"axislayer"],path:$t,transFn:Un})}}var An=[];if(An.push(function(){return W.drawLabels(ke,Pe,{vals:Xt,layer:It,plotinfo:ut,transFn:xn,labelFns:W.makeLabelFns(Pe,Dt)})}),Pe.type==="multicategory"){var Rt={x:2,y:10}[mt];An.push(function(){var bn={x:"height",y:"width"}[mt],ln=rn()[bn]+Rt+(Pe._tickAngles[Mt+"tick"]?Pe.tickfont.size*G:0);return W.drawLabels(ke,Pe,{vals:Ve(Pe,Xt),layer:It,cls:Mt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Un,labelFns:W.makeLabelFns(Pe,Dt+ln*mr[4])})}),An.push(function(){return Pe._depth=mr[4]*(rn("tick2")[Pe.side]-Dt),function(bn,ln,kn){var Tn=ln._id+"divider",hn=kn.vals,nn=kn.layer.selectAll("path."+Tn).data(hn,rt);nn.exit().remove(),nn.enter().insert("path",":first-child").classed(Tn,1).classed("crisp",1).call(o.stroke,ln.dividercolor).style("stroke-width",r.crispRound(bn,ln.dividerwidth,1)+"px"),nn.attr("transform",kn.transFn).attr("d",kn.path)}(ke,Pe,{vals:En,layer:It,path:W.makeTickPath(Pe,Dt,mr[4],{len:Pe._depth}),transFn:Un})})}else Pe.title.hasOwnProperty("standoff")&&An.push(function(){Pe._depth=mr[4]*(rn()[Pe.side]-Dt)});var Yt=T.getComponentMethod("rangeslider","isVisible")(Pe);return qe.skipTitle||Yt&&Pe.side==="bottom"||An.push(function(){return function(bn,ln){var kn,Tn=bn._fullLayout,hn=ln._id,nn=hn.charAt(0),fn=ln.title.font.size;if(ln.title.hasOwnProperty("standoff"))kn=ln._depth+ln.title.standoff+tt(ln);else{var mn=Ze(ln);if(ln.type==="multicategory")kn=ln._depth;else{var zn=1.5*fn;mn&&(zn=.5*fn,ln.ticks==="outside"&&(zn+=ln.ticklen)),kn=10+zn+(ln.linewidth?ln.linewidth-1:0)}mn||(kn+=nn==="x"?ln.side==="top"?fn*(ln.showticklabels?1:0):fn*(ln.showticklabels?1.5:.5):ln.side==="right"?fn*(ln.showticklabels?1:.5):fn*(ln.showticklabels?.5:0))}var Gn,Hn,Qn,rr,er=W.getPxPosition(bn,ln);if(nn==="x"?(Hn=ln._offset+ln._length/2,Qn=ln.side==="top"?er-kn:er+kn):(Qn=ln._offset+ln._length/2,Hn=ln.side==="right"?er+kn:er-kn,Gn={rotate:"-90",offset:0}),ln.type!=="multicategory"){var or=ln._selections[ln._id+"tick"];if(rr={selection:or,side:ln.side},or&&or.node()&&or.node().parentNode){var ir=r.getTranslate(or.node().parentNode);rr.offsetLeft=ir.x,rr.offsetTop=ir.y}ln.title.hasOwnProperty("standoff")&&(rr.pad=0)}return ln._titleStandoff=kn,t.draw(bn,hn+"title",{propContainer:ln,propName:ln._name+".title.text",placeholder:Tn._dfltTitle[nn],avoid:rr,transform:Gn,attributes:{x:Hn,y:Qn,"text-anchor":"middle"}})}(ke,Pe)}),An.push(function(){var bn,ln,kn,Tn,hn=Pe.side.charAt(0),nn=V[Pe.side].charAt(0),fn=W.getPxPosition(ke,Pe),mn=gn?Pe.ticklen:0;(Pe.automargin||Yt||Pe._shiftPusher)&&(Pe.type==="multicategory"?bn=rn("tick2"):(bn=rn(),mt==="x"&&hn==="b"&&(Pe._depth=Math.max(bn.width>0?bn.bottom-fn:0,mn))));var zn=0,Gn=0;if(Pe._shiftPusher&&(zn=Math.max(mn,bn.height>0?hn==="l"?fn-bn.left:bn.right-fn:0),Pe.title.text!==Lt._dfltTitle[mt]&&(Gn=(Pe._titleStandoff||0)+(Pe._titleScoot||0),hn==="l"&&(Gn+=tt(Pe))),Pe._fullDepth=Math.max(zn,Gn)),Pe.automargin){ln={x:0,y:0,r:0,l:0,t:0,b:0};var Hn=[0,1],Qn=typeof Pe._shift=="number"?Pe._shift:0;if(mt==="x"){if(hn==="b"?ln[hn]=Pe._depth:(ln[hn]=Pe._depth=Math.max(bn.width>0?fn-bn.top:0,mn),Hn.reverse()),bn.width>0){var rr=bn.right-(Pe._offset+Pe._length);rr>0&&(ln.xr=1,ln.r=rr);var er=Pe._offset-bn.left;er>0&&(ln.xl=0,ln.l=er)}}else if(hn==="l"?(Pe._depth=Math.max(bn.height>0?fn-bn.left:0,mn),ln[hn]=Pe._depth-Qn):(Pe._depth=Math.max(bn.height>0?bn.right-fn:0,mn),ln[hn]=Pe._depth+Qn,Hn.reverse()),bn.height>0){var or=bn.bottom-(Pe._offset+Pe._length);or>0&&(ln.yb=0,ln.b=or);var ir=Pe._offset-bn.top;ir>0&&(ln.yt=1,ln.t=ir)}ln[kt]=Pe.anchor==="free"?Pe.position:Pe._anchorAxis.domain[Hn[0]],Pe.title.text!==Lt._dfltTitle[mt]&&(ln[hn]+=tt(Pe)+(Pe.title.standoff||0)),Pe.mirror&&Pe.anchor!=="free"&&((kn={x:0,y:0,r:0,l:0,t:0,b:0})[nn]=Pe.linewidth,Pe.mirror&&Pe.mirror!==!0&&(kn[nn]+=mn),Pe.mirror===!0||Pe.mirror==="ticks"?kn[kt]=Pe._anchorAxis.domain[Hn[1]]:Pe.mirror!=="all"&&Pe.mirror!=="allticks"||(kn[kt]=[Pe._counterDomainMin,Pe._counterDomainMax][Hn[1]]))}Yt&&(Tn=T.getComponentMethod("rangeslider","autoMarginOpts")(ke,Pe)),typeof Pe.automargin=="string"&&(Fe(ln,Pe.automargin),Fe(kn,Pe.automargin)),l.autoMargin(ke,_t(Pe),ln),l.autoMargin(ke,dt(Pe),kn),l.autoMargin(ke,bt(Pe),Tn)}),x.syncOrAsync(An)}}function rn(bn){var ln=Mt+(bn||"tick");return yn[ln]||(yn[ln]=function(kn,Tn){var hn,nn,fn,mn;return kn._selections[Tn].size()?(hn=1/0,nn=-1/0,fn=1/0,mn=-1/0,kn._selections[Tn].each(function(){var zn=ht(this),Gn=r.bBox(zn.node().parentNode);hn=Math.min(hn,Gn.top),nn=Math.max(nn,Gn.bottom),fn=Math.min(fn,Gn.left),mn=Math.max(mn,Gn.right)})):(hn=0,nn=0,fn=0,mn=0),{top:hn,bottom:nn,left:fn,right:mn,height:nn-hn,width:mn-fn}}(Pe,ln)),yn[ln]}},W.getTickSigns=function(ke,Pe){var qe=ke._id.charAt(0),Xe={x:"top",y:"right"}[qe],nt=ke.side===Xe?1:-1,ut=[-1,1,nt,-nt];return(Pe?(ke.minor||{}).ticks:ke.ticks)!=="inside"==(qe==="x")&&(ut=ut.map(function(ct){return-ct})),ke.side&&ut.push({l:-1,t:-1,r:1,b:1}[ke.side.charAt(0)]),ut},W.makeTransTickFn=function(ke){return ke._id.charAt(0)==="x"?function(Pe){return d(ke._offset+ke.l2p(Pe.x),0)}:function(Pe){return d(0,ke._offset+ke.l2p(Pe.x))}},W.makeTransTickLabelFn=function(ke){var Pe=function(nt){var ut=nt.ticklabelposition||"",ct=function(qt){return ut.indexOf(qt)!==-1},Ct=ct("top"),Lt=ct("left"),Mt=ct("right"),mt=ct("bottom"),kt=ct("inside"),wt=mt||Lt||Ct||Mt;if(!wt&&!kt)return[0,0];var Ot=nt.side,It=wt?(nt.tickwidth||0)/2:0,Nt=3,Dt=nt.tickfont?nt.tickfont.size:12;return(mt||Ct)&&(It+=Dt*K,Nt+=(nt.linewidth||0)/2),(Lt||Mt)&&(It+=(nt.linewidth||0)/2,Nt+=3),kt&&Ot==="top"&&(Nt-=Dt*(1-K)),(Lt||Ct)&&(It=-It),Ot!=="bottom"&&Ot!=="right"||(Nt=-Nt),[wt?It:0,kt?Nt:0]}(ke),qe=Pe[0],Xe=Pe[1];return ke._id.charAt(0)==="x"?function(nt){return d(qe+ke._offset+ke.l2p(He(nt)),Xe)}:function(nt){return d(Xe,qe+ke._offset+ke.l2p(He(nt)))}},W.makeTickPath=function(ke,Pe,qe,Xe){Xe||(Xe={});var nt=Xe.minor;if(nt&&!ke.minor)return"";var ut=Xe.len!==void 0?Xe.len:nt?ke.minor.ticklen:ke.ticklen,ct=ke._id.charAt(0),Ct=(ke.linewidth||1)/2;return ct==="x"?"M0,"+(Pe+Ct*qe)+"v"+ut*qe:"M"+(Pe+Ct*qe)+",0h"+ut*qe},W.makeLabelFns=function(ke,Pe,qe){var Xe=ke.ticklabelposition||"",nt=function(an){return Xe.indexOf(an)!==-1},ut=nt("top"),ct=nt("left"),Ct=nt("right"),Lt=nt("bottom")||ct||ut||Ct,Mt=nt("inside"),mt=Xe==="inside"&&ke.ticks==="inside"||!Mt&&ke.ticks==="outside"&&ke.tickson!=="boundaries",kt=0,wt=0,Ot=mt?ke.ticklen:0;if(Mt?Ot*=-1:Lt&&(Ot=0),mt&&(kt+=Ot,qe)){var It=x.deg2rad(qe);kt=Ot*Math.cos(It)+1,wt=Ot*Math.sin(It)}ke.showticklabels&&(mt||ke.showline)&&(kt+=.2*ke.tickfont.size);var Nt,Dt,qt,Xt,cn,yn={labelStandoff:kt+=(ke.linewidth||1)/2*(Mt?-1:1),labelShift:wt},Kt=0,Mn=ke.side,Un=ke._id.charAt(0),xn=ke.tickangle;if(Un==="x")Xt=(cn=!Mt&&Mn==="bottom"||Mt&&Mn==="top")?1:-1,Mt&&(Xt*=-1),Nt=wt*Xt,Dt=Pe+kt*Xt,qt=cn?1:-.2,Math.abs(xn)===90&&(Mt?qt+=j:qt=xn===-90&&Mn==="bottom"?K:xn===90&&Mn==="top"?j:.5,Kt=j/2*(xn/90)),yn.xFn=function(an){return an.dx+Nt+Kt*an.fontSize},yn.yFn=function(an){return an.dy+Dt+an.fontSize*qt},yn.anchorFn=function(an,sn){if(Lt){if(ct)return"end";if(Ct)return"start"}return k(sn)&&sn!==0&&sn!==180?sn*Xt<0!==Mt?"end":"start":"middle"},yn.heightFn=function(an,sn,On){return sn<-60||sn>60?-.5*On:ke.side==="top"!==Mt?-On:0};else if(Un==="y"){if(Xt=(cn=!Mt&&Mn==="left"||Mt&&Mn==="right")?1:-1,Mt&&(Xt*=-1),Nt=kt,Dt=wt*Xt,qt=0,Mt||Math.abs(xn)!==90||(qt=xn===-90&&Mn==="left"||xn===90&&Mn==="right"?K:.5),Mt){var dn=k(xn)?+xn:0;if(dn!==0){var gn=x.deg2rad(dn);Kt=Math.abs(Math.sin(gn))*K*Xt,qt=0}}yn.xFn=function(an){return an.dx+Pe-(Nt+an.fontSize*qt)*Xt+Kt*an.fontSize},yn.yFn=function(an){return an.dy+Dt+an.fontSize*j},yn.anchorFn=function(an,sn){return k(sn)&&Math.abs(sn)===90?"middle":cn?"end":"start"},yn.heightFn=function(an,sn,On){return ke.side==="right"&&(sn*=-1),sn<-30?-On:sn<30?-.5*On:0}}return yn},W.drawTicks=function(ke,Pe,qe){qe=qe||{};var Xe=Pe._id+"tick",nt=[].concat(Pe.minor&&Pe.minor.ticks?qe.vals.filter(function(ct){return ct.minor&&!ct.noTick}):[]).concat(Pe.ticks?qe.vals.filter(function(ct){return!ct.minor&&!ct.noTick}):[]),ut=qe.layer.selectAll("path."+Xe).data(nt,rt);ut.exit().remove(),ut.enter().append("path").classed(Xe,1).classed("ticks",1).classed("crisp",qe.crisp!==!1).each(function(ct){return o.stroke(A.select(this),ct.minor?Pe.minor.tickcolor:Pe.tickcolor)}).style("stroke-width",function(ct){return r.crispRound(ke,ct.minor?Pe.minor.tickwidth:Pe.tickwidth,1)+"px"}).attr("d",qe.path).style("display",null),Ye(Pe,[H]),ut.attr("transform",qe.transFn)},W.drawGrid=function(ke,Pe,qe){qe=qe||{};var Xe=Pe._id+"grid",nt=Pe.minor&&Pe.minor.showgrid,ut=nt?qe.vals.filter(function(qt){return qt.minor}):[],ct=Pe.showgrid?qe.vals.filter(function(qt){return!qt.minor}):[],Ct=qe.counterAxis;if(Ct&&W.shouldShowZeroLine(ke,Pe,Ct))for(var Lt=Pe.tickmode==="array",Mt=0;Mt<ct.length;Mt++){var mt=ct[Mt].x;if(Lt?!mt:Math.abs(mt)<Pe.dtick/100){if(ct=ct.slice(0,Mt).concat(ct.slice(Mt+1)),!Lt)break;Mt--}}Pe._gw=r.crispRound(ke,Pe.gridwidth,1);for(var kt=nt?r.crispRound(ke,Pe.minor.gridwidth,1):0,wt=qe.layer,Ot=qe.minorLayer,It=1;It>=0;It--){var Nt=It?wt:Ot;if(Nt){var Dt=Nt.selectAll("path."+Xe).data(It?ct:ut,rt);Dt.exit().remove(),Dt.enter().append("path").classed(Xe,1).classed("crisp",qe.crisp!==!1),Dt.attr("transform",qe.transFn).attr("d",qe.path).each(function(qt){return o.stroke(A.select(this),qt.minor?Pe.minor.gridcolor:Pe.gridcolor||"#ddd")}).style("stroke-dasharray",function(qt){return r.dashStyle(qt.minor?Pe.minor.griddash:Pe.griddash,qt.minor?Pe.minor.gridwidth:Pe.gridwidth)}).style("stroke-width",function(qt){return(qt.minor?kt:Pe._gw)+"px"}).style("display",null),typeof qe.path=="function"&&Dt.attr("d",qe.path)}}Ye(Pe,[U,z])},W.drawZeroLine=function(ke,Pe,qe){qe=qe||qe;var Xe=Pe._id+"zl",nt=W.shouldShowZeroLine(ke,Pe,qe.counterAxis),ut=qe.layer.selectAll("path."+Xe).data(nt?[{x:0,id:Pe._id}]:[]);ut.exit().remove(),ut.enter().append("path").classed(Xe,1).classed("zl",1).classed("crisp",qe.crisp!==!1).each(function(){qe.layer.selectAll("path").sort(function(ct,Ct){return ee(ct.id,Ct.id)})}),ut.attr("transform",qe.transFn).attr("d",qe.path).call(o.stroke,Pe.zerolinecolor||o.defaultLine).style("stroke-width",r.crispRound(ke,Pe.zerolinewidth,Pe._gw||1)+"px").style("display",null),Ye(Pe,[I])},W.drawLabels=function(ke,Pe,qe){qe=qe||{};var Xe=ke._fullLayout,nt=Pe._id,ut=nt.charAt(0),ct=qe.cls||nt+"tick",Ct=qe.vals.filter(function(Xt){return Xt.text}),Lt=qe.labelFns,Mt=qe.secondary?0:Pe.tickangle,mt=(Pe._prevTickAngles||{})[ct],kt=qe.layer.selectAll("g."+ct).data(Pe.showticklabels?Ct:[],rt),wt=[];function Ot(Xt,cn){Xt.each(function(yn){var Kt=A.select(this),Mn=Kt.select(".text-math-group"),Un=Lt.anchorFn(yn,cn),xn=qe.transFn.call(Kt.node(),yn)+(k(cn)&&+cn!=0?" rotate("+cn+","+Lt.xFn(yn)+","+(Lt.yFn(yn)-yn.fontSize/2)+")":""),dn=s.lineCount(Kt),gn=G*yn.fontSize,an=Lt.heightFn(yn,k(cn)?+cn:0,(dn-1)*gn);if(an&&(xn+=d(0,an)),Mn.empty()){var sn=Kt.select("text");sn.attr({transform:xn,"text-anchor":Un}),sn.style("opacity",1),Pe._adjustTickLabelsOverflow&&Pe._adjustTickLabelsOverflow()}else{var On=r.bBox(Mn.node()).width*{end:-.5,start:.5}[Un];Mn.attr("transform",xn+d(On,0))}})}kt.enter().append("g").classed(ct,1).append("text").attr("text-anchor","middle").each(function(Xt){var cn=A.select(this),yn=ke._promises.length;cn.call(s.positionText,Lt.xFn(Xt),Lt.yFn(Xt)).call(r.font,Xt.font,Xt.fontSize,Xt.fontColor).text(Xt.text).call(s.convertToTspans,ke),ke._promises[yn]?wt.push(ke._promises.pop().then(function(){Ot(cn,Mt)})):Ot(cn,Mt)}),Ye(Pe,[F]),kt.exit().remove(),qe.repositionOnUpdate&&kt.each(function(Xt){A.select(this).select("text").call(s.positionText,Lt.xFn(Xt),Lt.yFn(Xt))}),Pe._adjustTickLabelsOverflow=function(){var Xt=Pe.ticklabeloverflow;if(Xt&&Xt!=="allow"){var cn=Xt.indexOf("hide")!==-1,yn=Pe._id.charAt(0)==="x",Kt=0,Mn=yn?ke._fullLayout.width:ke._fullLayout.height;if(Xt.indexOf("domain")!==-1){var Un=x.simpleMap(Pe.range,Pe.r2l);Kt=Pe.l2p(Un[0])+Pe._offset,Mn=Pe.l2p(Un[1])+Pe._offset}var xn=Math.min(Kt,Mn),dn=Math.max(Kt,Mn),gn=Pe.side,an=1/0,sn=-1/0;for(var On in kt.each(function(Zn){var Fn=A.select(this);if(Fn.select(".text-math-group").empty()){var nr=r.bBox(Fn.node()),$n=0;yn?(nr.right>dn||nr.left<xn)&&($n=1):(nr.bottom>dn||nr.top+(Pe.tickangle?0:Zn.fontSize/4)<xn)&&($n=1);var mr=Fn.select("text");$n?cn&&mr.style("opacity",0):(mr.style("opacity",1),an=gn==="bottom"||gn==="right"?Math.min(an,yn?nr.top:nr.left):-1/0,sn=gn==="top"||gn==="left"?Math.max(sn,yn?nr.bottom:nr.right):1/0)}}),Xe._plots){var En=Xe._plots[On];if(Pe._id===En.xaxis._id||Pe._id===En.yaxis._id){var Dn=yn?En.yaxis:En.xaxis;Dn&&(Dn["_visibleLabelMin_"+Pe._id]=an,Dn["_visibleLabelMax_"+Pe._id]=sn)}}}},Pe._hideCounterAxisInsideTickLabels=function(Xt){var cn=Pe._id.charAt(0)==="x",yn=[];for(var Kt in Xe._plots){var Mn=Xe._plots[Kt];Pe._id!==Mn.xaxis._id&&Pe._id!==Mn.yaxis._id||yn.push(cn?Mn.yaxis:Mn.xaxis)}yn.forEach(function(Un,xn){Un&&Ze(Un)&&(Xt||[I,z,U,H,F]).forEach(function(dn){var gn=dn.K==="tick"&&dn.L==="text"&&Pe.ticklabelmode==="period",an=Xe._plots[Pe._mainSubplot];(dn.K===I.K?an.zerolinelayer.selectAll("."+Pe._id+"zl"):dn.K===z.K?an.minorGridlayer.selectAll("."+Pe._id):dn.K===U.K?an.gridlayer.selectAll("."+Pe._id):an[Pe._id.charAt(0)+"axislayer"]).each(function(){var sn=A.select(this);dn.L&&(sn=sn.selectAll(dn.L)),sn.each(function(On){var En=Pe.l2p(gn?He(On):On.x)+Pe._offset,Dn=A.select(this);En<Pe["_visibleLabelMax_"+Un._id]&&En>Pe["_visibleLabelMin_"+Un._id]?Dn.style("display","none"):dn.K!=="tick"||xn||Dn.style("display",null)})})})})},Ot(kt,mt+1?mt:Mt);var It=null;Pe._selections&&(Pe._selections[ct]=kt);var Nt=[function(){return wt.length&&Promise.all(wt)}];Pe.automargin&&Xe._redrawFromAutoMarginCount&&mt===90?(It=90,Nt.push(function(){Ot(kt,mt)})):Nt.push(function(){if(Ot(kt,Mt),Ct.length&&ut==="x"&&!k(Mt)&&(Pe.type!=="log"||String(Pe.dtick).charAt(0)!=="D")){It=0;var Xt,cn=0,yn=[];if(kt.each(function(Fn){cn=Math.max(cn,Fn.fontSize);var nr=Pe.l2p(Fn.x),$n=ht(this),mr=r.bBox($n.node());yn.push({top:0,bottom:10,height:10,left:nr-mr.width/2,right:nr+mr.width/2+2,width:mr.width+2})}),Pe.tickson!=="boundaries"&&!Pe.showdividers||qe.secondary){var Kt=Ct.length,Mn=Math.abs((Ct[Kt-1].x-Ct[0].x)*Pe._m)/(Kt-1),Un=Pe.ticklabelposition||"",xn=function(Fn){return Un.indexOf(Fn)!==-1},dn=xn("top"),gn=xn("left"),an=xn("right"),sn=xn("bottom")||gn||dn||an?(Pe.tickwidth||0)+6:0,On=Mn<2.5*cn||Pe.type==="multicategory"||Pe._name==="realaxis";for(Xt=0;Xt<yn.length-1;Xt++)if(x.bBoxIntersect(yn[Xt],yn[Xt+1],sn)){It=On?90:30;break}}else{var En=2;for(Pe.ticks&&(En+=Pe.tickwidth/2),Xt=0;Xt<yn.length;Xt++){var Dn=Ct[Xt].xbnd,Zn=yn[Xt];if(Dn[0]!==null&&Zn.left-Pe.l2p(Dn[0])<En||Dn[1]!==null&&Pe.l2p(Dn[1])-Zn.right<En){It=90;break}}}It&&Ot(kt,It)}}),Pe._tickAngles&&Nt.push(function(){Pe._tickAngles[ct]=It===null?k(Mt)?Mt:0:It});var Dt=Pe._anchorAxis;Dt&&Dt.autorange&&Ze(Pe)&&!re(Xe,Pe._id)&&(Xe._insideTickLabelsAutorange||(Xe._insideTickLabelsAutorange={}),Xe._insideTickLabelsAutorange[Dt._name+".autorange"]=Dt.autorange,Nt.push(function(){kt.each(function(Xt,cn){var yn=ht(this);yn.select(".text-math-group").empty()&&(Pe._vals[cn].bb=r.bBox(yn.node()))})}));var qt=x.syncOrAsync(Nt);return qt&&qt.then&&ke._promises.push(qt),qt},W.getPxPosition=function(ke,Pe){var qe,Xe=ke._fullLayout._size,nt=Pe._id.charAt(0),ut=Pe.side;return Pe.anchor!=="free"?qe=Pe._anchorAxis:nt==="x"?qe={_offset:Xe.t+(1-(Pe.position||0))*Xe.h,_length:0}:nt==="y"&&(qe={_offset:Xe.l+(Pe.position||0)*Xe.w+Pe._shift,_length:0}),ut==="top"||ut==="left"?qe._offset:ut==="bottom"||ut==="right"?qe._offset+qe._length:void 0},W.shouldShowZeroLine=function(ke,Pe,qe){var Xe=x.simpleMap(Pe.range,Pe.r2l);return Xe[0]*Xe[1]<=0&&Pe.zeroline&&(Pe.type==="linear"||Pe.type==="-")&&!(Pe.rangebreaks&&Pe.maskBreaks(0)===P)&&(ot(Pe,0)||!function(nt,ut,ct,Ct){var Lt=ct._mainAxis;if(Lt){var Mt=nt._fullLayout,mt=ut._id.charAt(0),kt=W.counterLetter(ut._id),wt=ut._offset+(Math.abs(Ct[0])<Math.abs(Ct[1])==(mt==="x")?0:ut._length),Ot=Mt._plots[ct._mainSubplot];if(!(Ot.mainplotinfo||Ot).overlays.length)return qt(ct);for(var It=W.list(nt,kt),Nt=0;Nt<It.length;Nt++){var Dt=It[Nt];if(Dt._mainAxis===Lt&&qt(Dt))return!0}}function qt(Xt){if(!Xt.showline||!Xt.linewidth)return!1;var cn=Math.max((Xt.linewidth+ut.zerolinewidth)/2,1);function yn(Un){return typeof Un=="number"&&Math.abs(Un-wt)<cn}if(yn(Xt._mainLinePosition)||yn(Xt._mainMirrorPosition))return!0;var Kt=Xt._linepositions||{};for(var Mn in Kt)if(yn(Kt[Mn][0])||yn(Kt[Mn][1]))return!0}}(ke,Pe,qe,Xe)||function(nt,ut){for(var ct=nt._fullData,Ct=ut._mainSubplot,Lt=ut._id.charAt(0),Mt=0;Mt<ct.length;Mt++){var mt=ct[Mt];if(mt.visible===!0&&mt.xaxis+mt.yaxis===Ct&&(T.traceIs(mt,"bar-like")&&mt.orientation==={x:"h",y:"v"}[Lt]||mt.fill&&mt.fill.charAt(mt.fill.length-1)===Lt))return!0}return!1}(ke,Pe))},W.clipEnds=function(ke,Pe){return Pe.filter(function(qe){return ot(ke,qe.x)})},W.allowAutoMargin=function(ke){for(var Pe=W.list(ke,"",!0),qe=0;qe<Pe.length;qe++){var Xe=Pe[qe];Xe.automargin&&(l.allowAutoMargin(ke,_t(Xe)),Xe.mirror&&l.allowAutoMargin(ke,dt(Xe))),T.getComponentMethod("rangeslider","isVisible")(Xe)&&l.allowAutoMargin(ke,bt(Xe))}},W.swap=function(ke,Pe){for(var qe=function(nt,ut){var ct,Ct,Lt=[];for(ct=0;ct<ut.length;ct++){var Mt=[],mt=nt._fullData[ut[ct]].xaxis,kt=nt._fullData[ut[ct]].yaxis;if(mt&&kt){for(Ct=0;Ct<Lt.length;Ct++)Lt[Ct].x.indexOf(mt)===-1&&Lt[Ct].y.indexOf(kt)===-1||Mt.push(Ct);if(Mt.length){var wt,Ot=Lt[Mt[0]];if(Mt.length>1)for(Ct=1;Ct<Mt.length;Ct++)wt=Lt[Mt[Ct]],St(Ot.x,wt.x),St(Ot.y,wt.y);St(Ot.x,[mt]),St(Ot.y,[kt])}else Lt.push({x:[mt],y:[kt]})}}return Lt}(ke,Pe),Xe=0;Xe<qe.length;Xe++)Et(ke,qe[Xe].x,qe[Xe].y)}},4322:function($,R,e){var A=e(92770),k=e(71828),l=e(50606).BADNUM,T=k.isArrayOrTypedArray,x=k.isDateTime,d=k.cleanNumber,s=Math.round;function t(r,n){return n?A(r):typeof r=="number"}function o(r){return Math.max(1,(r-1)/1e3)}$.exports=function(r,n,a){var i=r,c=a.noMultiCategory;if(T(i)&&!i.length)return"-";if(!c&&function(g){return T(g[0])&&T(g[1])}(i))return"multicategory";if(c&&Array.isArray(i[0])){for(var h=[],f=0;f<i.length;f++)if(T(i[f]))for(var b=0;b<i[f].length;b++)h.push(i[f][b]);i=h}if(function(g,y){for(var p=g.length,m=o(p),w=0,u=0,S={},_=0;_<p;_+=m){var E=g[s(_)],L=String(E);S[L]||(S[L]=1,x(E,y)&&w++,A(E)&&u++)}return w>2*u}(i,n))return"date";var v=a.autotypenumbers!=="strict";return function(g,y){for(var p=g.length,m=o(p),w=0,u=0,S={},_=0;_<p;_+=m){var E=g[s(_)],L=String(E);if(!S[L]){S[L]=1;var C=typeof E;C==="boolean"?u++:(y?d(E)!==l:C==="number")?w++:C==="string"&&u++}}return u>2*w}(i,v)?"category":function(g,y){for(var p=g.length,m=0;m<p;m++)if(t(g[m],y))return!0;return!1}(i,v)?"linear":"-"}},71453:function($,R,e){var A=e(92770),k=e(73972),l=e(71828),T=e(44467),x=e(85501),d=e(13838),s=e(26218),t=e(38701),o=e(96115),r=e(89426),n=e(15258),a=e(92128),i=e(21994),c=e(85555).WEEKDAY_PATTERN,h=e(85555).HOUR_PATTERN;function f(g,y,p){function m(P,I){return l.coerce(g,y,d.rangebreaks,P,I)}if(m("enabled")){var w=m("bounds");if(w&&w.length>=2){var u,S,_="";if(w.length===2){for(u=0;u<2;u++)if(S=v(w[u])){_=c;break}}var E=m("pattern",_);if(E===c)for(u=0;u<2;u++)(S=v(w[u]))&&(y.bounds[u]=w[u]=S-1);if(E)for(u=0;u<2;u++)switch(S=w[u],E){case c:if(!A(S)||(S=+S)!==Math.floor(S)||S<0||S>=7)return void(y.enabled=!1);y.bounds[u]=w[u]=S;break;case h:if(!A(S)||(S=+S)<0||S>24)return void(y.enabled=!1);y.bounds[u]=w[u]=S}if(p.autorange===!1){var L=p.range;if(L[0]<L[1]){if(w[0]<L[0]&&w[1]>L[1])return void(y.enabled=!1)}else if(w[0]>L[0]&&w[1]<L[1])return void(y.enabled=!1)}}else{var C=m("values");if(!C||!C.length)return void(y.enabled=!1);m("dvalue")}}}$.exports=function(g,y,p,m,w){var u,S=m.letter,_=m.font||{},E=m.splomStash||{},L=p("visible",!m.visibleDflt),C=y._template||{},P=y.type||C.type||"-";P==="date"&&(k.getComponentMethod("calendars","handleDefaults")(g,y,"calendar",m.calendar),m.noTicklabelmode||(u=p("ticklabelmode")));var I="";m.noTicklabelposition&&P!=="multicategory"||(I=l.coerce(g,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:u==="period"?["outside","inside"]:S==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),m.noTicklabeloverflow||p("ticklabeloverflow",I.indexOf("inside")!==-1?"hide past domain":P==="category"||P==="multicategory"?"allow":"hide past div"),i(y,w);var U=!y.isValidRange(g.range);U&&m.reverseDflt&&(U="reversed"),!p("autorange",U)||P!=="linear"&&P!=="-"||p("rangemode"),p("range"),y.cleanRange(),n(g,y,p,m),P==="category"||m.noHover||p("hoverformat");var z=p("color"),H=z!==d.color.dflt?z:_.color,F=E.label||w._dfltTitle[S];if(r(g,y,p,P,m),!L)return y;p("title.text",F),l.coerceFont(p,"title.font",{family:_.family,size:l.bigFont(_.size),color:H}),s(g,y,p,P);var N=m.hasMinor;if(N&&(T.newContainer(y,"minor"),s(g,y,p,P,{isMinor:!0})),o(g,y,p,P,m),t(g,y,p,m),N){var B=m.isMinor;m.isMinor=!0,t(g,y,p,m),m.isMinor=B}a(g,y,p,{dfltColor:z,bgColor:m.bgColor,showGrid:m.showGrid,hasMinor:N,attributes:d}),!N||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&p("mirror");var j,K=P==="multicategory";if(m.noTickson||P!=="category"&&!K||!y.ticks&&!y.showgrid||(K&&(j="boundaries"),p("tickson",j)==="boundaries"&&delete y.ticklabelposition),K&&p("showdividers")&&(p("dividercolor"),p("dividerwidth")),P==="date")if(x(g,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:f}),y.rangebreaks.length){for(var G=0;G<y.rangebreaks.length;G++)if(y.rangebreaks[G].pattern===c){y._hasDayOfWeekBreaks=!0;break}if(i(y,w),w._has("scattergl")||w._has("splom"))for(var V=0;V<m.data.length;V++){var W=m.data[V];W.type!=="scattergl"&&W.type!=="splom"||(W.visible=!1,l.warn(W.type+" traces do not work on axes with rangebreaks. Setting trace "+W.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var b={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function v(g){if(typeof g=="string")return b[g.substr(0,3).toLowerCase()]}},12663:function($,R,e){var A=e(31562),k=A.FORMAT_LINK,l=A.DATE_FORMAT_LINK;function T(d,s){return["Sets the "+d+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function x(d,s){return T(d,s)+[" And for dates see: "+l+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:function(d,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:x)("hover text",d)+["By default the values are formatted using "+(s?"generic number format":"`"+d+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:x}},41675:function($,R,e){var A=e(73972),k=e(85555);function l(T,x){if(x&&x.length){for(var d=0;d<x.length;d++)if(x[d][T])return!0}return!1}R.id2name=function(T){if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)){var x=T.split(" ")[0].substr(1);return x==="1"&&(x=""),T.charAt(0)+"axis"+x}},R.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var x=T.substr(5);return x==="1"&&(x=""),T.charAt(0)+x}},R.cleanId=function(T,x,d){var s=/( domain)$/.test(T);if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)&&(!x||T.charAt(0)===x)&&(!s||d)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(s&&d?" domain":"")}},R.list=function(T,x,d){var s=T._fullLayout;if(!s)return[];var t,o=R.listIds(T,x),r=new Array(o.length);for(t=0;t<o.length;t++){var n=o[t];r[t]=s[n.charAt(0)+"axis"+n.substr(1)]}if(!d){var a=s._subplots.gl3d||[];for(t=0;t<a.length;t++){var i=s[a[t]];x?r.push(i[x+"axis"]):r.push(i.xaxis,i.yaxis,i.zaxis)}}return r},R.listIds=function(T,x){var d=T._fullLayout;if(!d)return[];var s=d._subplots;return x?s[x+"axis"]:s.xaxis.concat(s.yaxis)},R.getFromId=function(T,x,d){var s=T._fullLayout;return x=x===void 0||typeof x!="string"?x:x.replace(" domain",""),d==="x"?x=x.replace(/y[0-9]*/,""):d==="y"&&(x=x.replace(/x[0-9]*/,"")),s[R.id2name(x)]},R.getFromTrace=function(T,x,d){var s=T._fullLayout,t=null;if(A.traceIs(x,"gl3d")){var o=x.scene;o.substr(0,5)==="scene"&&(t=s[o][d+"axis"])}else t=R.getFromId(T,x[d+"axis"]||d);return t},R.idSort=function(T,x){var d=T.charAt(0),s=x.charAt(0);return d!==s?d>s?1:-1:+(T.substr(1)||1)-+(x.substr(1)||1)},R.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},R.isLinked=function(T,x){return l(x,T._axisMatchGroups)||l(x,T._axisConstraintGroups)}},15258:function($){$.exports=function(R,e,A,k){if(e.type==="category"){var l,T=R.categoryarray,x=Array.isArray(T)&&T.length>0;x&&(l="array");var d,s=A("categoryorder",l);s==="array"&&(d=A("categoryarray")),x||s!=="array"||(s=e.categoryorder="trace"),s==="trace"?e._initialCategories=[]:s==="array"?e._initialCategories=d.slice():(d=function(t,o){var r,n,a,i=o.dataAttr||t._id.charAt(0),c={};if(o.axData)r=o.axData;else for(r=[],n=0;n<o.data.length;n++){var h=o.data[n];h[i+"axis"]===t._id&&r.push(h)}for(n=0;n<r.length;n++){var f=r[n][i];for(a=0;a<f.length;a++){var b=f[a];b!=null&&(c[b]=1)}}return Object.keys(c)}(e,k).sort(),s==="category ascending"?e._initialCategories=d:s==="category descending"&&(e._initialCategories=d.reverse()))}}},66287:function($,R,e){var A=e(92770),k=e(71828),l=e(50606),T=l.ONEDAY,x=l.ONEWEEK;R.dtick=function(d,s){var t=s==="log",o=s==="date",r=s==="category",n=o?T:1;if(!d)return n;if(A(d))return(d=Number(d))<=0?n:r?Math.max(1,Math.round(d)):o?Math.max(.1,d):d;if(typeof d!="string"||!o&&!t)return n;var a=d.charAt(0),i=d.substr(1);return(i=A(i)?Number(i):0)<=0||!(o&&a==="M"&&i===Math.round(i)||t&&a==="L"||t&&a==="D"&&(i===1||i===2))?n:d},R.tick0=function(d,s,t,o){return s==="date"?k.cleanDate(d,k.dateTick0(t,o%x==0?1:0)):o!=="D1"&&o!=="D2"?A(d)?Number(d):0:void 0}},85555:function($,R,e){var A=e(30587).counter;$.exports={idRegex:{x:A("x","( domain)?"),y:A("y","( domain)?")},attrRegex:A("[xy]axis"),xAxisMatch:A("xaxis"),yAxisMatch:A("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function($,R,e){var A=e(71828),k=e(71739),l=e(41675).id2name,T=e(13838),x=e(42449),d=e(21994),s=e(50606).ALMOST_EQUAL,t=e(18783).FROM_BL;function o(f,b,v){var g=v.axIds,y=v.layoutOut,p=v.hasImage,m=y._axisConstraintGroups,w=y._axisMatchGroups,u=b._id,S=u.charAt(0),_=((y._splomAxes||{})[S]||{})[u]||{},E=b._id,L=E.charAt(0)==="x";function C(J,X){return A.coerce(f,b,T,J,X)}b._matchGroup=null,b._constraintGroup=null,C("constrain",p?"domain":"range"),A.coerce(f,b,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var P,I,U=b.type,z=[];for(P=0;P<g.length;P++)(I=g[P])!==E&&y[l(I)].type===U&&z.push(I);var H=n(m,E);if(H){var F=[];for(P=0;P<z.length;P++)H[I=z[P]]||F.push(I);z=F}var N,B,j=z.length;j&&(f.matches||_.matches)&&(N=A.coerce(f,b,{matches:{valType:"enumerated",values:z,dflt:z.indexOf(_.matches)!==-1?_.matches:void 0}},"matches"));var K=p&&!L?b.anchor:void 0;if(j&&!N&&(f.scaleanchor||K)&&(B=A.coerce(f,b,{scaleanchor:{valType:"enumerated",values:z}},"scaleanchor",K)),N){b._matchGroup=a(w,E,N,1);var G=y[l(N)],V=r(y,b)/r(y,G);L!==(N.charAt(0)==="x")&&(V=(L?"x":"y")+V),a(m,E,N,V)}else f.matches&&g.indexOf(f.matches)!==-1&&A.warn("ignored "+b._name+'.matches: "'+f.matches+'" to avoid an infinite loop');if(B){var W=C("scaleratio");W||(W=b.scaleratio=1),a(m,E,B,W)}else f.scaleanchor&&g.indexOf(f.scaleanchor)!==-1&&A.warn("ignored "+b._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(f,b){var v=b.domain;return v||(v=f[l(b.overlaying)].domain),v[1]-v[0]}function n(f,b){for(var v=0;v<f.length;v++)if(f[v][b])return f[v];return null}function a(f,b,v,g){var y,p,m,w,u,S=n(f,b);S===null?((S={})[b]=1,u=f.length,f.push(S)):u=f.indexOf(S);var _=Object.keys(S);for(y=0;y<f.length;y++)if(m=f[y],y!==u&&m[v]){var E=m[v];for(p=0;p<_.length;p++)m[w=_[p]]=i(E,i(g,S[w]));return void f.splice(u,1)}if(g!==1)for(p=0;p<_.length;p++){var L=_[p];S[L]=i(g,S[L])}S[v]=1}function i(f,b){var v,g,y="",p="";typeof f=="string"&&(v=(y=f.match(/^[xy]*/)[0]).length,f=+f.substr(v)),typeof b=="string"&&(g=(p=b.match(/^[xy]*/)[0]).length,b=+b.substr(g));var m=f*b;return v||g?v&&g&&y.charAt(0)!==p.charAt(0)?v===g?m:(v>g?y.substr(g):p.substr(v))+m:y+p+f*b:m}function c(f,b){for(var v=b._size,g=v.h/v.w,y={},p=Object.keys(f),m=0;m<p.length;m++){var w=p[m],u=f[w];if(typeof u=="string"){var S=u.match(/^[xy]*/)[0],_=S.length;u=+u.substr(_);for(var E=S.charAt(0)==="y"?g:1/g,L=0;L<_;L++)u*=E}y[w]=u}return y}function h(f,b){var v=f._inputDomain,g=t[f.constraintoward],y=v[0]+(v[1]-v[0])*g;f.domain=f._input.domain=[y+(v[0]-y)/b,y+(v[1]-y)/b],f.setScale()}R.handleDefaults=function(f,b,v){var g,y,p,m,w,u,S,_,E=v.axIds,L=v.axHasImage,C=b._axisConstraintGroups=[],P=b._axisMatchGroups=[];for(g=0;g<E.length;g++)o(w=f[m=l(E[g])],u=b[m],{axIds:E,layoutOut:b,hasImage:L[m]});function I(G,V){for(g=0;g<G.length;g++)for(p in y=G[g])b[l(p)][V]=y}for(I(P,"_matchGroup"),g=0;g<C.length;g++)for(p in y=C[g])if((u=b[l(p)]).fixedrange){for(var U in y){var z=l(U);(f[z]||{}).fixedrange===!1&&A.warn("fixedrange was specified as false for axis "+z+" but was overridden because another axis in its constraint group has fixedrange true"),b[z].fixedrange=!0}break}for(g=0;g<C.length;){for(p in y=C[g]){(u=b[l(p)])._matchGroup&&Object.keys(u._matchGroup).length===Object.keys(y).length&&(C.splice(g,1),g--);break}g++}I(C,"_constraintGroup");var H=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],F=!1,N=!1;function B(){_=u[S],S==="rangebreaks"&&(N=u._hasDayOfWeekBreaks)}for(g=0;g<P.length;g++){y=P[g];for(var j=0;j<H.length;j++){var K;for(p in S=H[j],_=null,y)if(w=f[m=l(p)],u=b[m],S in u){if(!u.matches&&(K=u,S in w)){B();break}_===null&&S in w&&B()}if(S==="range"&&_&&(F=!0),S==="autorange"&&_===null&&F&&(_=!1),_===null&&S in K&&(_=K[S]),_!==null)for(p in y)(u=b[l(p)])[S]=S==="range"?_.slice():_,S==="rangebreaks"&&(u._hasDayOfWeekBreaks=N,d(u,b))}}},R.enforce=function(f){var b,v,g,y,p,m,w,u,S=f._fullLayout,_=S._axisConstraintGroups||[];for(b=0;b<_.length;b++){g=c(_[b],S);var E=Object.keys(g),L=1/0,C=0,P=1/0,I={},U={},z=!1;for(v=0;v<E.length;v++)U[y=E[v]]=p=S[l(y)],p._inputDomain?p.domain=p._inputDomain.slice():p._inputDomain=p.domain.slice(),p._inputRange||(p._inputRange=p.range.slice()),p.setScale(),I[y]=m=Math.abs(p._m)/g[y],L=Math.min(L,m),p.constrain!=="domain"&&p._constraintShrinkable||(P=Math.min(P,m)),delete p._constraintShrinkable,C=Math.max(C,m),p.constrain==="domain"&&(z=!0);if(!(L>s*C)||z){for(v=0;v<E.length;v++)if(m=I[y=E[v]],w=(p=U[y]).constrain,m!==P||w==="domain")if(u=m/P,w==="range")x(p,u);else{var H=p._inputDomain,F=(p.domain[1]-p.domain[0])/(H[1]-H[0]),N=(p.r2l(p.range[1])-p.r2l(p.range[0]))/(p.r2l(p._inputRange[1])-p.r2l(p._inputRange[0]));if((u/=F)*N<1){p.domain=p._input.domain=H.slice(),x(p,u);continue}if(N<1&&(p.range=p._input.range=p._inputRange.slice(),u*=N),p.autorange){var B=p.r2l(p.range[0]),j=p.r2l(p.range[1]),K=(B+j)/2,G=K,V=K,W=Math.abs(j-K),J=K-W*u*1.0001,X=K+W*u*1.0001,ee=k.makePadFn(S,p,0),re=k.makePadFn(S,p,1);h(p,u);var ie,se,fe=Math.abs(p._m),ye=k.concatExtremes(f,p),ge=ye.min,he=ye.max;for(se=0;se<ge.length;se++)(ie=ge[se].val-ee(ge[se])/fe)>J&&ie<G&&(G=ie);for(se=0;se<he.length;se++)(ie=he[se].val+re(he[se])/fe)<X&&ie>V&&(V=ie);u/=(V-G)/(2*W),G=p.l2r(G),V=p.l2r(V),p.range=p._input.range=B<j?[G,V]:[V,G]}h(p,u)}}}},R.getAxisGroup=function(f,b){for(var v=f._axisMatchGroups,g=0;g<v.length;g++)if(v[g][b])return"g"+g;return b},R.clean=function(f,b){if(b._inputDomain){for(var v=!1,g=b._id,y=f._fullLayout._axisConstraintGroups,p=0;p<y.length;p++)if(y[p][g]){v=!0;break}v&&b.constrain==="domain"||(b._input.domain=b.domain=b._inputDomain,delete b._inputDomain)}}},29323:function($,R,e){var A=e(39898),k=e(71828),l=k.numberFormat,T=e(84267),x=e(38520),d=e(73972),s=k.strTranslate,t=e(63893),o=e(7901),r=e(91424),n=e(30211),a=e(89298),i=e(6964),c=e(28569),h=e(64505),f=h.selectingOrDrawing,b=h.freeMode,v=e(18783).FROM_TL,g=e(33306),y=e(61549).redrawReglTraces,p=e(74875),m=e(41675).getFromId,w=e(47322).prepSelect,u=e(47322).clearOutline,S=e(47322).selectOnClick,_=e(42449),E=e(85555),L=E.MINDRAG,C=E.MINZOOM,P=!0;function I(ie,se,fe,ye){var ge=k.ensureSingle(ie.draglayer,se,fe,function(he){he.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ie.id)});return ge.call(i,ye),ge.node()}function U(ie,se,fe,ye,ge,he,ve){var Ie=I(ie,"rect",se,fe);return A.select(Ie).call(r.setRect,ye,ge,he,ve),Ie}function z(ie,se){for(var fe=0;fe<ie.length;fe++)if(!ie[fe].fixedrange)return se;return""}function H(ie,se,fe,ye,ge){for(var he=0;he<ie.length;he++){var ve=ie[he];if(!ve.fixedrange)if(ve.rangebreaks){var Ie=ve._id.charAt(0)==="y",xe=Ie?1-se:se,Ae=Ie?1-fe:fe;ye[ve._name+".range[0]"]=ve.l2r(ve.p2l(xe*ve._length)),ye[ve._name+".range[1]"]=ve.l2r(ve.p2l(Ae*ve._length))}else{var Se=ve._rl[0],Te=ve._rl[1]-Se;ye[ve._name+".range[0]"]=ve.l2r(Se+Te*se),ye[ve._name+".range[1]"]=ve.l2r(Se+Te*fe)}}if(ge&&ge.length){var Q=(se+(1-fe))/2;H(ge,Q,1-Q,ye,[])}}function F(ie,se){for(var fe=0;fe<ie.length;fe++){var ye=ie[fe];if(!ye.fixedrange)if(ye.rangebreaks){var ge=ye._length,he=(ye.p2l(0+se)-ye.p2l(0)+(ye.p2l(ge+se)-ye.p2l(ge)))/2;ye.range=[ye.l2r(ye._rl[0]-he),ye.l2r(ye._rl[1]-he)]}else ye.range=[ye.l2r(ye._rl[0]-se/ye._m),ye.l2r(ye._rl[1]-se/ye._m)]}}function N(ie){return 1-(ie>=0?Math.min(ie,.9):1/(1/Math.max(ie,-.3)+3.222))}function B(ie,se,fe,ye,ge){return ie.append("path").attr("class","zoombox").style({fill:se>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(fe,ye)).attr("d",ge+"Z")}function j(ie,se,fe){return ie.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(se,fe)).attr("d","M0,0Z")}function K(ie,se,fe,ye,ge,he){ie.attr("d",ye+"M"+fe.l+","+fe.t+"v"+fe.h+"h"+fe.w+"v-"+fe.h+"h-"+fe.w+"Z"),G(ie,se,ge,he)}function G(ie,se,fe,ye){fe||(ie.transition().style("fill",ye>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),se.transition().style("opacity",1).duration(200))}function V(ie){A.select(ie).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function W(ie){P&&ie.data&&ie._context.showTips&&(k.notifier(k._(ie,"Double-click to zoom back out"),"long"),P=!1)}function J(ie){var se=Math.floor(Math.min(ie.b-ie.t,ie.r-ie.l,C)/2);return"M"+(ie.l-3.5)+","+(ie.t-.5+se)+"h3v"+-se+"h"+se+"v-3h-"+(se+3)+"ZM"+(ie.r+3.5)+","+(ie.t-.5+se)+"h-3v"+-se+"h"+-se+"v-3h"+(se+3)+"ZM"+(ie.r+3.5)+","+(ie.b+.5-se)+"h-3v"+se+"h"+-se+"v3h"+(se+3)+"ZM"+(ie.l-3.5)+","+(ie.b+.5-se)+"h3v"+se+"h"+se+"v3h-"+(se+3)+"Z"}function X(ie,se,fe,ye,ge){for(var he,ve,Ie,xe,Ae=!1,Se={},Te={},Q=(ge||{}).xaHash,oe=(ge||{}).yaHash,ce=0;ce<se.length;ce++){var me=se[ce];for(he in fe)if(me[he]){for(Ie in me)ge&&(Q[Ie]||oe[Ie])||(Ie.charAt(0)==="x"?fe:ye)[Ie]||(Se[Ie]=he);for(ve in ye)ge&&(Q[ve]||oe[ve])||!me[ve]||(Ae=!0)}for(ve in ye)if(me[ve])for(xe in me)ge&&(Q[xe]||oe[xe])||(xe.charAt(0)==="x"?fe:ye)[xe]||(Te[xe]=ve)}Ae&&(k.extendFlat(Se,Te),Te={});var Me={},Re=[];for(Ie in Se){var Ce=m(ie,Ie);Re.push(Ce),Me[Ce._id]=Ce}var ze={},le=[];for(xe in Te){var de=m(ie,xe);le.push(de),ze[de._id]=de}return{xaHash:Me,yaHash:ze,xaxes:Re,yaxes:le,xLinks:Se,yLinks:Te,isSubplotConstrained:Ae}}function ee(ie,se){if(x){var fe=ie.onwheel!==void 0?"wheel":"mousewheel";ie._onwheel&&ie.removeEventListener(fe,ie._onwheel),ie._onwheel=se,ie.addEventListener(fe,se,{passive:!1})}else ie.onwheel!==void 0?ie.onwheel=se:ie.onmousewheel!==void 0?ie.onmousewheel=se:ie.isAddedWheelEvent||(ie.isAddedWheelEvent=!0,ie.addEventListener("wheel",se,{passive:!1}))}function re(ie){var se=[];for(var fe in ie)se.push(ie[fe]);return se}$.exports={makeDragBox:function(ie,se,fe,ye,ge,he,ve,Ie){var xe,Ae,Se,Te,Q,oe,ce,me,Me,Re,Ce,ze,le,de,be,Fe,Ve,He,rt,tt,ot,ht,_t,dt=ie._fullLayout._zoomlayer,bt=ve+Ie==="nsew",St=(ve+Ie).length===1;function Et(){if(xe=se.xaxis,Ae=se.yaxis,Me=xe._length,Re=Ae._length,ce=xe._offset,me=Ae._offset,(Se={})[xe._id]=xe,(Te={})[Ae._id]=Ae,ve&&Ie)for(var dn=se.overlays,gn=0;gn<dn.length;gn++){var an=dn[gn].xaxis;Se[an._id]=an;var sn=dn[gn].yaxis;Te[sn._id]=sn}Q=re(Se),oe=re(Te),le=z(Q,Ie),de=z(oe,ve),be=!de&&!le,ze=X(ie,ie._fullLayout._axisMatchGroups,Se,Te);var On=(Ce=X(ie,ie._fullLayout._axisConstraintGroups,Se,Te,ze)).isSubplotConstrained||ze.isSubplotConstrained;Fe=Ie||On,Ve=ve||On;var En=ie._fullLayout;He=En._has("scattergl"),rt=En._has("splom"),tt=En._has("svg")}fe+=se.yaxis._shift,Et();var zt=function(dn,gn,an){return dn?dn==="nsew"?an?"":gn==="pan"?"move":"crosshair":dn.toLowerCase()+"-resize":"pointer"}(de+le,ie._fullLayout.dragmode,bt),Ut=U(se,ve+Ie+"drag",zt,fe,ye,ge,he);if(be&&!bt)return Ut.onmousedown=null,Ut.style.pointerEvents="none",Ut;var Pt,Ze,Ye,Be,ke,Pe,qe,Xe,nt,ut,ct={element:Ut,gd:ie,plotinfo:se};function Ct(){ct.plotinfo.selection=!1,u(ie)}function Lt(dn,gn){var an=ct.gd;if(an._fullLayout._activeShapeIndex>=0)an._fullLayout._deactivateShape(an);else{var sn=an._fullLayout.clickmode;if(V(an),dn!==2||St||cn(),bt)sn.indexOf("select")>-1&&S(gn,an,Q,oe,se.id,ct),sn.indexOf("event")>-1&&n.click(an,gn,se.id);else if(dn===1&&St){var On=ve?Ae:xe,En=ve==="s"||Ie==="w"?0:1,Dn=On._name+".range["+En+"]",Zn=function($n,mr){var dr,Yn=$n.range[mr],Vn=Math.abs(Yn-$n.range[1-mr]);return $n.type==="date"?Yn:$n.type==="log"?(dr=Math.ceil(Math.max(0,-Math.log(Vn)/Math.LN10))+3,l("."+dr+"g")(Math.pow(10,Yn))):(dr=Math.floor(Math.log(Math.abs(Yn))/Math.LN10)-Math.floor(Math.log(Vn)/Math.LN10)+4,l("."+String(dr)+"g")(Yn))}(On,En),Fn="left",nr="middle";if(On.fixedrange)return;ve?(nr=ve==="n"?"top":"bottom",On.side==="right"&&(Fn="right")):Ie==="e"&&(Fn="right"),an._context.showAxisRangeEntryBoxes&&A.select(Ut).call(t.makeEditable,{gd:an,immediate:!0,background:an._fullLayout.paper_bgcolor,text:String(Zn),fill:On.tickfont?On.tickfont.color:"#444",horizontalAlign:Fn,verticalAlign:nr}).on("edit",function($n){var mr=On.d2r($n);mr!==void 0&&d.call("_guiRelayout",an,Dn,mr)})}}}function Mt(dn,gn){if(ie._transitioningWithDuration)return!1;var an=Math.max(0,Math.min(Me,ht*dn+Pt)),sn=Math.max(0,Math.min(Re,_t*gn+Ze)),On=Math.abs(an-Pt),En=Math.abs(sn-Ze);function Dn(){qe="",Ye.r=Ye.l,Ye.t=Ye.b,nt.attr("d","M0,0Z")}if(Ye.l=Math.min(Pt,an),Ye.r=Math.max(Pt,an),Ye.t=Math.min(Ze,sn),Ye.b=Math.max(Ze,sn),Ce.isSubplotConstrained)On>C||En>C?(qe="xy",On/Me>En/Re?(En=On*Re/Me,Ze>sn?Ye.t=Ze-En:Ye.b=Ze+En):(On=En*Me/Re,Pt>an?Ye.l=Pt-On:Ye.r=Pt+On),nt.attr("d",J(Ye))):Dn();else if(ze.isSubplotConstrained)if(On>C||En>C){qe="xy";var Zn=Math.min(Ye.l/Me,(Re-Ye.b)/Re),Fn=Math.max(Ye.r/Me,(Re-Ye.t)/Re);Ye.l=Zn*Me,Ye.r=Fn*Me,Ye.b=(1-Zn)*Re,Ye.t=(1-Fn)*Re,nt.attr("d",J(Ye))}else Dn();else!de||En<Math.min(Math.max(.6*On,L),C)?On<L||!le?Dn():(Ye.t=0,Ye.b=Re,qe="x",nt.attr("d",function(nr,$n){return"M"+(nr.l-.5)+","+($n-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(nr.r+.5)+","+($n-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(Ye,Ze))):!le||On<Math.min(.6*En,C)?(Ye.l=0,Ye.r=Me,qe="y",nt.attr("d",function(nr,$n){return"M"+($n-C-.5)+","+(nr.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+($n-C-.5)+","+(nr.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(Ye,Pt))):(qe="xy",nt.attr("d",J(Ye)));Ye.w=Ye.r-Ye.l,Ye.h=Ye.b-Ye.t,qe&&(ut=!0),ie._dragged=ut,K(Xe,nt,Ye,ke,Pe,Be),mt(),ie.emit("plotly_relayouting",ot),Pe=!0}function mt(){ot={},qe!=="xy"&&qe!=="x"||(H(Q,Ye.l/Me,Ye.r/Me,ot,Ce.xaxes),qt("x",ot)),qe!=="xy"&&qe!=="y"||(H(oe,(Re-Ye.b)/Re,(Re-Ye.t)/Re,ot,Ce.yaxes),qt("y",ot))}function kt(){mt(),V(ie),yn(),W(ie)}ct.prepFn=function(dn,gn,an){var sn=ct.dragmode,On=ie._fullLayout.dragmode;On!==sn&&(ct.dragmode=On),Et(),ht=ie._fullLayout._invScaleX,_t=ie._fullLayout._invScaleY,be||(bt?dn.shiftKey?On==="pan"?On="zoom":f(On)||(On="pan"):dn.ctrlKey&&(On="pan"):On="pan"),b(On)?ct.minDrag=1:ct.minDrag=void 0,f(On)?(ct.xaxes=Q,ct.yaxes=oe,w(dn,gn,an,ct,On)):(ct.clickFn=Lt,f(sn)&&Ct(),be||(On==="zoom"?(ct.moveFn=Mt,ct.doneFn=kt,ct.minDrag=1,function(En,Dn,Zn){var Fn=Ut.getBoundingClientRect();Pt=Dn-Fn.left,Ze=Zn-Fn.top,ie._fullLayout._calcInverseTransform(ie);var nr=k.apply3DTransform(ie._fullLayout._invTransform)(Pt,Ze);Pt=nr[0],Ze=nr[1],Ye={l:Pt,r:Pt,w:0,t:Ze,b:Ze,h:0},Be=ie._hmpixcount?ie._hmlumcount/ie._hmpixcount:T(ie._fullLayout.plot_bgcolor).getLuminance(),Pe=!1,qe="xy",ut=!1,Xe=B(dt,Be,ce,me,ke="M0,0H"+Me+"V"+Re+"H0V0"),nt=j(dt,ce,me)}(0,gn,an)):On==="pan"&&(ct.moveFn=Dt,ct.doneFn=yn))),ie._fullLayout._redrag=function(){var En=ie._dragdata;if(En&&En.element===Ut){var Dn=ie._fullLayout.dragmode;f(Dn)||(Et(),Kt([0,0,Me,Re]),ct.moveFn(En.dx,En.dy))}}},c.init(ct);var wt=[0,0,Me,Re],Ot=null,It=E.REDRAWDELAY,Nt=se.mainplot?ie._fullLayout._plots[se.mainplot]:se;function Dt(dn,gn){if(dn*=ht,gn*=_t,!ie._transitioningWithDuration){if(ie._fullLayout._replotting=!0,le==="ew"||de==="ns"){var an=le?-dn:0,sn=de?-gn:0;if(ze.isSubplotConstrained){if(le&&de){var On=(dn/Me-gn/Re)/2;an=-(dn=On*Me),sn=-(gn=-On*Re)}de?an=-sn*Me/Re:sn=-an*Re/Me}return le&&(F(Q,dn),qt("x")),de&&(F(oe,gn),qt("y")),Kt([an,sn,Me,Re]),Xt(),void ie.emit("plotly_relayouting",ot)}var En,Dn,Zn=le==="w"==(de==="n")?1:-1;if(le&&de&&(Ce.isSubplotConstrained||ze.isSubplotConstrained)){var Fn=(dn/Me+Zn*gn/Re)/2;dn=Fn*Me,gn=Zn*Fn*Re}if(le==="w"?dn=dr(Q,0,dn):le==="e"?dn=dr(Q,1,-dn):le||(dn=0),de==="n"?gn=dr(oe,1,gn):de==="s"?gn=dr(oe,0,-gn):de||(gn=0),En=le==="w"?dn:0,Dn=de==="n"?gn:0,Ce.isSubplotConstrained&&!ze.isSubplotConstrained||ze.isSubplotConstrained&&le&&de&&Zn>0){var nr;if(ze.isSubplotConstrained||!le&&de.length===1){for(nr=0;nr<Q.length;nr++)Q[nr].range=Q[nr]._r.slice(),_(Q[nr],1-gn/Re);En=(dn=gn*Me/Re)/2}if(ze.isSubplotConstrained||!de&&le.length===1){for(nr=0;nr<oe.length;nr++)oe[nr].range=oe[nr]._r.slice(),_(oe[nr],1-dn/Me);Dn=(gn=dn*Re/Me)/2}}ze.isSubplotConstrained&&de||qt("x"),ze.isSubplotConstrained&&le||qt("y");var $n=Me-dn,mr=Re-gn;!ze.isSubplotConstrained||le&&de||(le?(Dn=En?0:dn*Re/Me,mr=$n*Re/Me):(En=Dn?0:gn*Me/Re,$n=mr*Me/Re)),Kt([En,Dn,$n,mr]),Xt(),ie.emit("plotly_relayouting",ot)}function dr(Yn,Vn,ur){for(var Gt,tn,In=1-Vn,_n=0;_n<Yn.length;_n++){var Sn=Yn[_n];if(!Sn.fixedrange){Gt=Sn,tn=Sn._rl[In]+(Sn._rl[Vn]-Sn._rl[In])/N(ur/Sn._length);var jn=Sn.l2r(tn);jn!==!1&&jn!==void 0&&(Sn.range[Vn]=jn)}}return Gt._length*(Gt._rl[Vn]-tn)/(Gt._rl[Vn]-Gt._rl[In])}}function qt(dn,gn){for(var an=ze.isSubplotConstrained?{x:oe,y:Q}[dn]:ze[dn+"axes"],sn=ze.isSubplotConstrained?{x:Q,y:oe}[dn]:[],On=0;On<an.length;On++){var En=an[On],Dn=En._id,Zn=ze.xLinks[Dn]||ze.yLinks[Dn],Fn=sn[0]||Se[Zn]||Te[Zn];Fn&&(gn?(gn[En._name+".range[0]"]=gn[Fn._name+".range[0]"],gn[En._name+".range[1]"]=gn[Fn._name+".range[1]"]):En.range=Fn.range.slice())}}function Xt(){var dn,gn=[];function an(En){for(dn=0;dn<En.length;dn++)En[dn].fixedrange||gn.push(En[dn]._id)}for(Fe&&(an(Q),an(Ce.xaxes),an(ze.xaxes)),Ve&&(an(oe),an(Ce.yaxes),an(ze.yaxes)),ot={},dn=0;dn<gn.length;dn++){var sn=gn[dn],On=m(ie,sn);a.drawOne(ie,On,{skipTitle:!0}),ot[On._name+".range[0]"]=On.range[0],ot[On._name+".range[1]"]=On.range[1]}a.redrawComponents(ie,gn)}function cn(){if(!ie._transitioningWithDuration){var dn=ie._context.doubleClick,gn=[];le&&(gn=gn.concat(Q)),de&&(gn=gn.concat(oe)),ze.xaxes&&(gn=gn.concat(ze.xaxes)),ze.yaxes&&(gn=gn.concat(ze.yaxes));var an,sn,On,En={};if(dn==="reset+autosize"){for(dn="autosize",sn=0;sn<gn.length;sn++)if((an=gn[sn])._rangeInitial&&(an.range[0]!==an._rangeInitial[0]||an.range[1]!==an._rangeInitial[1])||!an._rangeInitial&&!an.autorange){dn="reset";break}}if(dn==="autosize")for(sn=0;sn<gn.length;sn++)(an=gn[sn]).fixedrange||(En[an._name+".autorange"]=!0);else if(dn==="reset")for((le||Ce.isSubplotConstrained)&&(gn=gn.concat(Ce.xaxes)),de&&!Ce.isSubplotConstrained&&(gn=gn.concat(Ce.yaxes)),Ce.isSubplotConstrained&&(le?de||(gn=gn.concat(oe)):gn=gn.concat(Q)),sn=0;sn<gn.length;sn++)(an=gn[sn]).fixedrange||(an._rangeInitial?(On=an._rangeInitial,En[an._name+".range[0]"]=On[0],En[an._name+".range[1]"]=On[1]):En[an._name+".autorange"]=!0);ie.emit("plotly_doubleclick",null),d.call("_guiRelayout",ie,En)}}function yn(){Kt([0,0,Me,Re]),k.syncOrAsync([p.previousPromises,function(){ie._fullLayout._replotting=!1,d.call("_guiRelayout",ie,ot)}],ie)}function Kt(dn){var gn,an,sn,On,En=ie._fullLayout,Dn=En._plots,Zn=En._subplots.cartesian;if(rt&&d.subplotsRegistry.splom.drag(ie),He){for(gn=0;gn<Zn.length;gn++)if(sn=(an=Dn[Zn[gn]]).xaxis,On=an.yaxis,an._scene){var Fn=k.simpleMap(sn.range,sn.r2l),nr=k.simpleMap(On.range,On.r2l);an._scene.update({range:[Fn[0],nr[0],Fn[1],nr[1]]})}}if((rt||He)&&(g(ie),y(ie)),tt){var $n=dn[2]/xe._length,mr=dn[3]/Ae._length;for(gn=0;gn<Zn.length;gn++){sn=(an=Dn[Zn[gn]]).xaxis,On=an.yaxis;var dr,Yn,Vn,ur,Gt=(Fe||ze.isSubplotConstrained)&&!sn.fixedrange&&Se[sn._id],tn=(Ve||ze.isSubplotConstrained)&&!On.fixedrange&&Te[On._id];if(Gt?(dr=$n,Vn=Ie||ze.isSubplotConstrained?dn[0]:xn(sn,dr)):ze.xaHash[sn._id]?(dr=$n,Vn=dn[0]*sn._length/xe._length):ze.yaHash[sn._id]?(dr=mr,Vn=de==="ns"?-dn[1]*sn._length/Ae._length:xn(sn,dr,{n:"top",s:"bottom"}[de])):Vn=Un(sn,dr=Mn(sn,$n,mr)),tn?(Yn=mr,ur=ve||ze.isSubplotConstrained?dn[1]:xn(On,Yn)):ze.yaHash[On._id]?(Yn=mr,ur=dn[1]*On._length/Ae._length):ze.xaHash[On._id]?(Yn=$n,ur=le==="ew"?-dn[0]*On._length/xe._length:xn(On,Yn,{e:"right",w:"left"}[le])):ur=Un(On,Yn=Mn(On,$n,mr)),dr||Yn){dr||(dr=1),Yn||(Yn=1);var In=sn._offset-Vn/dr,_n=On._offset-ur/Yn;an.clipRect.call(r.setTranslate,Vn,ur).call(r.setScale,dr,Yn),an.plot.call(r.setTranslate,In,_n).call(r.setScale,1/dr,1/Yn),dr===an.xScaleFactor&&Yn===an.yScaleFactor||(r.setPointGroupScale(an.zoomScalePts,dr,Yn),r.setTextPointsScale(an.zoomScaleTxt,dr,Yn)),r.hideOutsideRangePoints(an.clipOnAxisFalseTraces,an),an.xScaleFactor=dr,an.yScaleFactor=Yn}}}}function Mn(dn,gn,an){return dn.fixedrange?0:Fe&&Ce.xaHash[dn._id]?gn:Ve&&(Ce.isSubplotConstrained?Ce.xaHash:Ce.yaHash)[dn._id]?an:0}function Un(dn,gn){return gn?(dn.range=dn._r.slice(),_(dn,gn),xn(dn,gn)):0}function xn(dn,gn,an){return dn._length*(1-gn)*v[an||dn.constraintoward||"middle"]}return ve.length*Ie.length!=1&&ee(Ut,function(dn){if(ie._context._scrollZoom.cartesian||ie._fullLayout._enablescrollzoom){if(Ct(),ie._transitioningWithDuration)return dn.preventDefault(),void dn.stopPropagation();Et(),clearTimeout(Ot);var gn=-dn.deltaY;if(isFinite(gn)||(gn=dn.wheelDelta/10),isFinite(gn)){var an,sn=Math.exp(-Math.min(Math.max(gn,-20),20)/200),On=Nt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),En=(dn.clientX-On.left)/On.width,Dn=(On.bottom-dn.clientY)/On.height;if(Fe){for(Ie||(En=.5),an=0;an<Q.length;an++)Zn(Q[an],En,sn);qt("x"),wt[2]*=sn,wt[0]+=wt[2]*En*(1/sn-1)}if(Ve){for(ve||(Dn=.5),an=0;an<oe.length;an++)Zn(oe[an],Dn,sn);qt("y"),wt[3]*=sn,wt[1]+=wt[3]*(1-Dn)*(1/sn-1)}Kt(wt),Xt(),ie.emit("plotly_relayouting",ot),Ot=setTimeout(function(){ie._fullLayout&&(wt=[0,0,Me,Re],yn())},It),dn.preventDefault()}else k.log("Did not find wheel motion attributes: ",dn)}function Zn(Fn,nr,$n){if(!Fn.fixedrange){var mr=k.simpleMap(Fn.range,Fn.r2l),dr=mr[0]+(mr[1]-mr[0])*nr;Fn.range=mr.map(function(Yn){return Fn.l2r(dr+(Yn-dr)*$n)})}}}),Ut},makeDragger:I,makeRectDragger:U,makeZoombox:B,makeCorners:j,updateZoombox:K,xyCorners:J,transitionZoombox:G,removeZoombox:V,showDoubleClickNotifier:W,attachWheelEventHandler:ee}},4305:function($,R,e){var A=e(39898),k=e(30211),l=e(28569),T=e(6964),x=e(29323).makeDragBox,d=e(85555).DRAGGERSIZE;R.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)A.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,n){if((t._plots[r].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var a=r.split("y"),i=n.split("y");return a[0]===i[0]?Number(a[1]||1)-Number(i[1]||1):Number(a[0]||1)-Number(i[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var n=t._plots[r],a=n.xaxis,i=n.yaxis;if(!n.mainplot){var c=x(s,n,a._offset,i._offset,a._length,i._length,"ns","ew");c.onmousemove=function(b){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&k.hover(s,b,r)},k.hover(s,b,r),s._fullLayout._lasthover=c,s._fullLayout._hoversubplot=r},c.onmouseout=function(b){s._dragging||(s._fullLayout._hoversubplot=null,l.unhover(s,b))},s._context.showAxisDragHandles&&(x(s,n,a._offset-d,i._offset-d,d,d,"n","w"),x(s,n,a._offset+a._length,i._offset-d,d,d,"n","e"),x(s,n,a._offset-d,i._offset+i._length,d,d,"s","w"),x(s,n,a._offset+a._length,i._offset+i._length,d,d,"s","e"))}if(s._context.showAxisDragHandles){if(r===a._mainSubplot){var h=a._mainLinePosition;a.side==="top"&&(h-=d),x(s,n,a._offset+.1*a._length,h,.8*a._length,d,"","ew"),x(s,n,a._offset,h,.1*a._length,d,"","w"),x(s,n,a._offset+.9*a._length,h,.1*a._length,d,"","e")}if(r===i._mainSubplot){var f=i._mainLinePosition;i.side!=="right"&&(f-=d),x(s,n,f,i._offset+.1*i._length,d,.8*i._length,"ns",""),x(s,n,f,i._offset+.9*i._length,d,.1*i._length,"s",""),x(s,n,f,i._offset,d,.1*i._length,"n","")}}});var o=t._hoverlayer.node();o.onmousemove=function(r){r.target=s._fullLayout._lasthover,k.hover(s,r,t._hoversubplot)},o.onclick=function(r){r.target=s._fullLayout._lasthover,k.click(s,r)},o.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},R.updateFx(s)}},R.updateFx=function(s){var t=s._fullLayout,o=t.dragmode==="pan"?"move":"crosshair";T(t._draggers,o)}},76325:function($,R,e){var A=e(73972),k=e(71828),l=e(41675);$.exports=function(T){return function(x,d){var s=x[T];if(Array.isArray(s))for(var t=A.subplotsRegistry.cartesian,o=t.idRegex,r=d._subplots,n=r.xaxis,a=r.yaxis,i=r.cartesian,c=d._has("cartesian")||d._has("gl2d"),h=0;h<s.length;h++){var f=s[h];if(k.isPlainObject(f)){var b=l.cleanId(f.xref,"x",!1),v=l.cleanId(f.yref,"y",!1),g=o.x.test(b),y=o.y.test(v);if(g||y){c||k.pushUnique(d._basePlotModules,t);var p=!1;g&&n.indexOf(b)===-1&&(n.push(b),p=!0),y&&a.indexOf(v)===-1&&(a.push(v),p=!0),p&&g&&y&&i.push(b+v)}}}}}},93612:function($,R,e){var A=e(39898),k=e(73972),l=e(71828),T=e(74875),x=e(91424),d=e(27659).a0,s=e(41675),t=e(85555),o=e(77922),r=l.ensureSingle;function n(f,b,v){return l.ensureSingle(f,b,v,function(g){g.datum(v)})}function a(f,b,v,g,y){for(var p,m,w,u=t.traceLayerClasses,S=f._fullLayout,_=S._modules,E=[],L=[],C=0;C<_.length;C++){var P=(p=_[C]).name,I=k.modules[P].categories;if(I.svg){var U=p.layerName||P+"layer",z=p.plot;w=(m=d(v,z))[0],v=m[1],w.length&&E.push({i:u.indexOf(U),className:U,plotMethod:z,cdModule:w}),I.zoomScale&&L.push("."+U)}}E.sort(function(N,B){return N.i-B.i});var H=b.plot.selectAll("g.mlayer").data(E,function(N){return N.className});if(H.enter().append("g").attr("class",function(N){return N.className}).classed("mlayer",!0).classed("rangeplot",b.isRangePlot),H.exit().remove(),H.order(),H.each(function(N){var B=A.select(this),j=N.className;N.plotMethod(f,b,N.cdModule,B,g,y),t.clipOnAxisFalseQuery.indexOf("."+j)===-1&&x.setClipUrl(B,b.layerClipId,f)}),S._has("scattergl")&&(p=k.getModule("scattergl"),w=d(v,p)[0],p.plot(f,b,w)),!f._context.staticPlot&&(b._hasClipOnAxisFalse&&(b.clipOnAxisFalseTraces=b.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length)){var F=b.plot.selectAll(L.join(",")).selectAll(".trace");b.zoomScalePts=F.selectAll("path.point"),b.zoomScaleTxt=F.selectAll(".textpoint")}}function i(f,b){var v=b.plotgroup,g=b.id,y=t.layerValue2layerClass[b.xaxis.layer],p=t.layerValue2layerClass[b.yaxis.layer],m=f._fullLayout._hasOnlyLargeSploms;if(b.mainplot){var w=b.mainplotinfo,u=w.plotgroup,S=g+"-x",_=g+"-y";b.minorGridlayer=w.minorGridlayer,b.gridlayer=w.gridlayer,b.zerolinelayer=w.zerolinelayer,r(w.overlinesBelow,"path",S),r(w.overlinesBelow,"path",_),r(w.overaxesBelow,"g",S),r(w.overaxesBelow,"g",_),b.plot=r(w.overplot,"g",g),r(w.overlinesAbove,"path",S),r(w.overlinesAbove,"path",_),r(w.overaxesAbove,"g",S),r(w.overaxesAbove,"g",_),b.xlines=u.select(".overlines-"+y).select("."+S),b.ylines=u.select(".overlines-"+p).select("."+_),b.xaxislayer=u.select(".overaxes-"+y).select("."+S),b.yaxislayer=u.select(".overaxes-"+p).select("."+_)}else if(m)b.xlines=r(v,"path","xlines-above"),b.ylines=r(v,"path","ylines-above"),b.xaxislayer=r(v,"g","xaxislayer-above"),b.yaxislayer=r(v,"g","yaxislayer-above");else{var E=r(v,"g","layer-subplot");b.shapelayer=r(E,"g","shapelayer"),b.imagelayer=r(E,"g","imagelayer"),b.minorGridlayer=r(v,"g","minor-gridlayer"),b.gridlayer=r(v,"g","gridlayer"),b.zerolinelayer=r(v,"g","zerolinelayer"),r(v,"path","xlines-below"),r(v,"path","ylines-below"),b.overlinesBelow=r(v,"g","overlines-below"),r(v,"g","xaxislayer-below"),r(v,"g","yaxislayer-below"),b.overaxesBelow=r(v,"g","overaxes-below"),b.plot=r(v,"g","plot"),b.overplot=r(v,"g","overplot"),b.xlines=r(v,"path","xlines-above"),b.ylines=r(v,"path","ylines-above"),b.overlinesAbove=r(v,"g","overlines-above"),r(v,"g","xaxislayer-above"),r(v,"g","yaxislayer-above"),b.overaxesAbove=r(v,"g","overaxes-above"),b.xlines=v.select(".xlines-"+y),b.ylines=v.select(".ylines-"+p),b.xaxislayer=v.select(".xaxislayer-"+y),b.yaxislayer=v.select(".yaxislayer-"+p)}m||(n(b.minorGridlayer,"g",b.xaxis._id),n(b.minorGridlayer,"g",b.yaxis._id),b.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort),n(b.gridlayer,"g",b.xaxis._id),n(b.gridlayer,"g",b.yaxis._id),b.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort)),b.xlines.style("fill","none").classed("crisp",!0),b.ylines.style("fill","none").classed("crisp",!0)}function c(f,b){if(f){var v={};for(var g in f.each(function(w){var u=w[0];A.select(this).remove(),h(u,b),v[u]=!0}),b._plots)for(var y=b._plots[g].overlays||[],p=0;p<y.length;p++){var m=y[p];v[m.id]&&m.plot.selectAll(".trace").remove()}}}function h(f,b){b._draggers.selectAll("g."+f).remove(),b._defs.select("#clip"+b._uid+f+"plot").remove()}R.name="cartesian",R.attr=["xaxis","yaxis"],R.idRoot=["x","y"],R.idRegex=t.idRegex,R.attrRegex=t.attrRegex,R.attributes=e(89502),R.layoutAttributes=e(13838),R.supplyLayoutDefaults=e(86763),R.transitionAxes=e(66847),R.finalizeSubplots=function(f,b){var v,g,y,p=b._subplots,m=p.xaxis,w=p.yaxis,u=p.cartesian,S=u.concat(p.gl2d||[]),_={},E={};for(v=0;v<S.length;v++){var L=S[v].split("y");_[L[0]]=1,E["y"+L[1]]=1}for(v=0;v<m.length;v++)_[g=m[v]]||(y=(f[s.id2name(g)]||{}).anchor,t.idRegex.y.test(y)||(y="y"),u.push(g+y),S.push(g+y),E[y]||(E[y]=1,l.pushUnique(w,y)));for(v=0;v<w.length;v++)E[y=w[v]]||(g=(f[s.id2name(y)]||{}).anchor,t.idRegex.x.test(g)||(g="x"),u.push(g+y),S.push(g+y),_[g]||(_[g]=1,l.pushUnique(m,g)));if(!S.length){for(var C in g="",y="",f)t.attrRegex.test(C)&&(C.charAt(0)==="x"?(!g||+C.substr(5)<+g.substr(5))&&(g=C):(!y||+C.substr(5)<+y.substr(5))&&(y=C));g=g?s.name2id(g):"x",y=y?s.name2id(y):"y",m.push(g),w.push(y),u.push(g+y)}},R.plot=function(f,b,v,g){var y,p=f._fullLayout,m=p._subplots.cartesian,w=f.calcdata;if(!Array.isArray(b))for(b=[],y=0;y<w.length;y++)b.push(y);for(y=0;y<m.length;y++){for(var u,S=m[y],_=p._plots[S],E=[],L=0;L<w.length;L++){var C=w[L],P=C[0].trace;P.xaxis+P.yaxis===S&&((b.indexOf(P.index)!==-1||P.carpet)&&(u&&u[0].trace.xaxis+u[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(P.fill)!==-1&&E.indexOf(u)===-1&&E.push(u),E.push(C)),u=C)}a(f,_,E,v,g)}},R.clean=function(f,b,v,g){var y,p,m,w=g._plots||{},u=b._plots||{},S=g._subplots||{};if(g._hasOnlyLargeSploms&&!b._hasOnlyLargeSploms)for(m in w)(y=w[m]).plotgroup&&y.plotgroup.remove();var _=g._has&&g._has("gl"),E=b._has&&b._has("gl");if(_&&!E)for(m in w)(y=w[m])._scene&&y._scene.destroy();if(S.xaxis&&S.yaxis){var L=s.listIds({_fullLayout:g});for(p=0;p<L.length;p++){var C=L[p];b[s.id2name(C)]||g._infolayer.selectAll(".g-"+C+"title").remove()}}var P=g._has&&g._has("cartesian"),I=b._has&&b._has("cartesian");if(P&&!I)c(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(S.cartesian)for(p=0;p<S.cartesian.length;p++){var U=S.cartesian[p];if(!u[U]){var z="."+U+",."+U+"-x,."+U+"-y";g._cartesianlayer.selectAll(z).remove(),h(U,g)}}},R.drawFramework=function(f){var b=f._fullLayout,v=function(y){var p,m,w,u,S,_,E=y._fullLayout,L=E._subplots.cartesian,C=L.length,P=[],I=[];for(p=0;p<C;p++){w=L[p],S=(u=E._plots[w]).xaxis,_=u.yaxis;var U=S._mainAxis,z=_._mainAxis,H=U._id+z._id,F=E._plots[H];u.overlays=[],H!==w&&F?(u.mainplot=H,u.mainplotinfo=F,I.push(w)):(u.mainplot=void 0,u.mainplotinfo=void 0,P.push(w))}for(p=0;p<I.length;p++)w=I[p],(u=E._plots[w]).mainplotinfo.overlays.push(u);var N=P.concat(I),B=new Array(C);for(p=0;p<C;p++){w=N[p],S=(u=E._plots[w]).xaxis,_=u.yaxis;var j=[w,S.layer,_.layer,S.overlaying||"",_.overlaying||""];for(m=0;m<u.overlays.length;m++)j.push(u.overlays[m].id);B[p]=j}return B}(f),g=b._cartesianlayer.selectAll(".subplot").data(v,String);g.enter().append("g").attr("class",function(y){return"subplot "+y[0]}),g.order(),g.exit().call(c,b),g.each(function(y){var p=y[0],m=b._plots[p];m.plotgroup=A.select(this),i(f,m),m.draglayer=r(b._draggers,"g",p)})},R.rangePlot=function(f,b,v){i(f,b),a(f,b,v),T.style(f)},R.toSVG=function(f){var b=f._fullLayout._glimages,v=A.select(f).selectAll(".svg-container");v.filter(function(g,y){return y===v.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var g=this,y=g.toDataURL("image/png");b.append("svg:image").attr({xmlns:o.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:g.style.width,height:g.style.height})})},R.updateFx=e(4305).updateFx},13838:function($,R,e){var A=e(41940),k=e(22399),l=e(79952).P,T=e(1426).extendFlat,x=e(44467).templatedArray,d=e(12663).descriptionWithDates,s=e(50606).ONEDAY,t=e(85555),o=t.HOUR_PATTERN,r=t.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function a(u){return{valType:"integer",min:0,dflt:u?5:0,editType:"ticks"}}var i={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"data_array",editType:"ticks"},f={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function b(u){var S={valType:"number",min:0,editType:"ticks"};return u||(S.dflt=5),S}function v(u){var S={valType:"number",min:0,editType:"ticks"};return u||(S.dflt=1),S}var g={valType:"color",dflt:k.defaultLine,editType:"ticks"},y={valType:"color",dflt:k.lightLine,editType:"ticks"};function p(u){var S={valType:"number",min:0,editType:"ticks"};return u||(S.dflt=1),S}var m=T({},l,{editType:"ticks"}),w={valType:"boolean",editType:"ticks"};$.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:A({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:x("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:n,nticks:a(),tick0:i,dtick:c,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:h,ticktext:{valType:"data_array",editType:"ticks"},ticks:f,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:b(),tickwidth:v(),tickcolor:g,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},l,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:A({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:d("tick label")},tickformatstops:x("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:d("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:w,gridcolor:y,gridwidth:p(),griddash:m,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:a("minor"),tick0:i,dtick:c,tickvals:h,ticks:f,ticklen:b("minor"),tickwidth:v("minor"),tickcolor:g,gridcolor:y,gridwidth:p("minor"),griddash:m,showgrid:w,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:A({editType:"ticks"})}}},86763:function($,R,e){var A=e(71828),k=e(7901),l=e(23469).isUnifiedHover,T=e(98212),x=e(44467),d=e(10820),s=e(13838),t=e(951),o=e(71453),r=e(99082),n=e(52830),a=e(41675),i=a.id2name,c=a.name2id,h=e(85555).AX_ID_PATTERN,f=e(73972),b=f.traceIs,v=f.getComponentMethod;function g(y,p,m){Array.isArray(y[p])?y[p].push(m):y[p]=[m]}$.exports=function(y,p,m){var w,u,S=p.autotypenumbers,_={},E={},L={},C={},P={},I={},U={},z={},H={},F={};for(w=0;w<m.length;w++){var N=m[w];if(b(N,"cartesian")||b(N,"gl2d")){var B,j;if(N.xaxis)B=i(N.xaxis),g(_,B,N);else if(N.xaxes)for(u=0;u<N.xaxes.length;u++)g(_,i(N.xaxes[u]),N);if(N.yaxis)j=i(N.yaxis),g(_,j,N);else if(N.yaxes)for(u=0;u<N.yaxes.length;u++)g(_,i(N.yaxes[u]),N);N.type==="funnel"?N.orientation==="h"?(B&&(E[B]=!0),j&&(U[j]=!0)):j&&(L[j]=!0):N.type==="image"?(j&&(z[j]=!0),B&&(z[B]=!0)):(j&&(P[j]=!0,I[j]=!0),b(N,"carpet")&&(N.type!=="carpet"||N._cheater)||B&&(C[B]=!0)),N.type==="carpet"&&N._cheater&&B&&(E[B]=!0),b(N,"2dMap")&&(H[B]=!0,H[j]=!0),b(N,"oriented")&&(F[N.orientation==="h"?j:B]=!0)}}var K=p._subplots,G=K.xaxis,V=K.yaxis,W=A.simpleMap(G,i),J=A.simpleMap(V,i),X=W.concat(J),ee=k.background;G.length&&V.length&&(ee=A.coerce(y,p,d,"plot_bgcolor"));var re,ie,se,fe,ye,ge=k.combine(ee,p.paper_bgcolor);function he(){var St=_[re]||[];ye._traceIndices=St.map(function(Et){return Et._expandedIndex}),ye._annIndices=[],ye._shapeIndices=[],ye._selectionIndices=[],ye._imgIndices=[],ye._subplotsWith=[],ye._counterAxes=[],ye._name=ye._attr=re,ye._id=ie}function ve(St,Et){return A.coerce(fe,ye,s,St,Et)}function Ie(St,Et){return A.coerce2(fe,ye,s,St,Et)}function xe(St){return St==="x"?V:G}function Ae(St,Et){for(var zt=St==="x"?W:J,Ut=[],Pt=0;Pt<zt.length;Pt++){var Ze=zt[Pt];Ze===Et||(y[Ze]||{}).overlaying||Ut.push(c(Ze))}return Ut}var Se={x:xe("x"),y:xe("y")},Te=Se.x.concat(Se.y),Q={},oe=[];function ce(){var St=fe.matches;h.test(St)&&Te.indexOf(St)===-1&&(Q[St]=fe.type,oe=Object.keys(Q))}var me=T(y,p),Me=l(me);for(w=0;w<X.length;w++){re=X[w],ie=c(re),se=re.charAt(0),A.isPlainObject(y[re])||(y[re]={}),fe=y[re],ye=x.newContainer(p,re,se+"axis"),he();var Re=se==="x"&&!C[re]&&E[re]||se==="y"&&!P[re]&&L[re],Ce=se==="y"&&(!I[re]&&U[re]||z[re]),ze={hasMinor:!0,letter:se,font:p.font,outerTicks:H[re],showGrid:!F[re],data:_[re]||[],bgColor:ge,calendar:p.calendar,automargin:!0,visibleDflt:Re,reverseDflt:Ce,autotypenumbersDflt:S,splomStash:((p._splomAxes||{})[se]||{})[ie]};ve("uirevision",p.uirevision),t(fe,ye,ve,ze),o(fe,ye,ve,ze,p);var le=Me&&se===me.charAt(0),de=Ie("spikecolor",Me?ye.color:void 0),be=Ie("spikethickness",Me?1.5:void 0),Fe=Ie("spikedash",Me?"dot":void 0),Ve=Ie("spikemode",Me?"across":void 0),He=Ie("spikesnap");ve("showspikes",!!(le||de||be||Fe||Ve||He))||(delete ye.spikecolor,delete ye.spikethickness,delete ye.spikedash,delete ye.spikemode,delete ye.spikesnap);var rt=i(fe.overlaying),tt=[0,1];if(p[rt]!==void 0){var ot=i(p[rt].anchor);p[ot]!==void 0&&(tt=p[ot].domain)}n(fe,ye,ve,{letter:se,counterAxes:Se[se],overlayableAxes:Ae(se,re),grid:p.grid,overlayingDomain:tt}),ve("title.standoff"),ce(),ye._input=fe}for(w=0;w<oe.length;){ie=oe[w++],se=(re=i(ie)).charAt(0),A.isPlainObject(y[re])||(y[re]={}),fe=y[re],ye=x.newContainer(p,re,se+"axis"),he();var ht={letter:se,font:p.font,outerTicks:H[re],showGrid:!F[re],data:[],bgColor:ge,calendar:p.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((p._splomAxes||{})[se]||{})[ie]};ve("uirevision",p.uirevision),ye.type=Q[ie]||"linear",o(fe,ye,ve,ht,p),n(fe,ye,ve,{letter:se,counterAxes:Se[se],overlayableAxes:Ae(se,re),grid:p.grid}),ve("fixedrange"),ce(),ye._input=fe}var _t=v("rangeslider","handleDefaults"),dt=v("rangeselector","handleDefaults");for(w=0;w<W.length;w++)re=W[w],fe=y[re],ye=p[re],_t(y,p,re),ye.type==="date"&&dt(fe,ye,p,J,ye.calendar),ve("fixedrange");for(w=0;w<J.length;w++){re=J[w],fe=y[re],ye=p[re];var bt=p[i(ye.anchor)];ve("fixedrange",v("rangeslider","isVisible")(bt))}r.handleDefaults(y,p,{axIds:Te.concat(oe).sort(a.idSort),axHasImage:z})}},92128:function($,R,e){var A=e(84267).mix,k=e(22399),l=e(71828);$.exports=function(T,x,d,s){var t=(s=s||{}).dfltColor;function o(y,p){return l.coerce2(T,x,s.attributes,y,p)}var r=o("linecolor",t),n=o("linewidth");d("showline",s.showLine||!!r||!!n)||(delete x.linecolor,delete x.linewidth);var a=o("gridcolor",A(t,s.bgColor,s.blend||k.lightFraction).toRgbString()),i=o("gridwidth"),c=o("griddash");if(d("showgrid",s.showGrid||!!a||!!i||!!c)||(delete x.gridcolor,delete x.gridwidth,delete x.griddash),s.hasMinor){var h=o("minor.gridcolor",A(x.gridcolor,s.bgColor,67).toRgbString()),f=o("minor.gridwidth",x.gridwidth||1),b=o("minor.griddash",x.griddash||"solid");d("minor.showgrid",!!h||!!f||!!b)||(delete x.minor.gridcolor,delete x.minor.gridwidth,delete x.minor.griddash)}if(!s.noZeroLine){var v=o("zerolinecolor",t),g=o("zerolinewidth");d("zeroline",s.showGrid||!!v||!!g)||(delete x.zerolinecolor,delete x.zerolinewidth)}}},52830:function($,R,e){var A=e(92770),k=e(71828);$.exports=function(l,T,x,d){var s,t,o,r,n,a,i=d.counterAxes||[],c=d.overlayableAxes||[],h=d.letter,f=d.grid,b=d.overlayingDomain;f&&(t=f._domains[h][f._axisMap[T._id]],s=f._anchors[T._id],t&&(o=f[h+"side"].split(" ")[0],r=f.domain[h][o==="right"||o==="top"?1:0])),t=t||[0,1],s=s||(A(l.position)?"free":i[0]||"free"),o=o||(h==="x"?"bottom":"left"),r=r||0,n=0,a=!1;var v=k.coerce(l,T,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:s}},"anchor"),g=k.coerce(l,T,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:o}},"side");v==="free"&&(h==="y"&&(x("autoshift")&&(r=g==="left"?b[0]:b[1],a=!T.automargin||T.automargin,n=g==="left"?-3:3),x("shift",n)),x("position",r)),x("automargin",a);var y=!1;if(c.length&&(y=k.coerce(l,T,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!y){var p=x("domain",t);p[0]>p[1]-.000244140625&&(T.domain=t),k.noneOrAll(l.domain,T.domain,t)}return x("layer"),T}},89426:function($,R,e){var A=e(59652);$.exports=function(k,l,T,x,d){d||(d={});var s=d.tickSuffixDflt,t=A(k);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",s)&&T("showticksuffix",t)}},42449:function($,R,e){var A=e(18783).FROM_BL;$.exports=function(k,l,T){T===void 0&&(T=A[k.constraintoward||"center"]);var x=[k.r2l(k.range[0]),k.r2l(k.range[1])],d=x[0]+(x[1]-x[0])*T;k.range=k._input.range=[k.l2r(d+(x[0]-d)*l),k.l2r(d+(x[1]-d)*l)],k.setScale()}},21994:function($,R,e){var A=e(39898),k=e(84096).g0,l=e(71828),T=l.numberFormat,x=e(92770),d=l.cleanNumber,s=l.ms2DateTime,t=l.dateTime2ms,o=l.ensureNumber,r=l.isArrayOrTypedArray,n=e(50606),a=n.FP_SAFE,i=n.BADNUM,c=n.LOG_CLIP,h=n.ONEWEEK,f=n.ONEDAY,b=n.ONEHOUR,v=n.ONEMIN,g=n.ONESEC,y=e(41675),p=e(85555),m=p.HOUR_PATTERN,w=p.WEEKDAY_PATTERN;function u(_){return Math.pow(10,_)}function S(_){return _!=null}$.exports=function(_,E){E=E||{};var L=_._id||"x",C=L.charAt(0);function P(X,ee){if(X>0)return Math.log(X)/Math.LN10;if(X<=0&&ee&&_.range&&_.range.length===2){var re=_.range[0],ie=_.range[1];return .5*(re+ie-2*c*Math.abs(re-ie))}return i}function I(X,ee,re,ie){if((ie||{}).msUTC&&x(X))return+X;var se=t(X,re||_.calendar);if(se===i){if(!x(X))return i;X=+X;var fe=Math.floor(10*l.mod(X+.05,1)),ye=Math.round(X-fe/10);se=t(new Date(ye))+fe/10}return se}function U(X,ee,re){return s(X,ee,re||_.calendar)}function z(X){return _._categories[Math.round(X)]}function H(X){if(S(X)){if(_._categoriesMap===void 0&&(_._categoriesMap={}),_._categoriesMap[X]!==void 0)return _._categoriesMap[X];_._categories.push(typeof X=="number"?String(X):X);var ee=_._categories.length-1;return _._categoriesMap[X]=ee,ee}return i}function F(X){if(_._categoriesMap)return _._categoriesMap[X]}function N(X){var ee=F(X);return ee!==void 0?ee:x(X)?+X:void 0}function B(X){return x(X)?+X:F(X)}function j(X,ee,re){return A.round(re+ee*X,2)}function K(X,ee,re){return(X-re)/ee}var G=function(X){return x(X)?j(X,_._m,_._b):i},V=function(X){return K(X,_._m,_._b)};if(_.rangebreaks){var W=C==="y";G=function(X){if(!x(X))return i;var ee=_._rangebreaks.length;if(!ee)return j(X,_._m,_._b);var re=W;_.range[0]>_.range[1]&&(re=!re);for(var ie=re?-1:1,se=ie*X,fe=0,ye=0;ye<ee;ye++){var ge=ie*_._rangebreaks[ye].min,he=ie*_._rangebreaks[ye].max;if(se<ge)break;if(!(se>he)){fe=se<(ge+he)/2?ye:ye+1;break}fe=ye+1}var ve=_._B[fe]||0;return isFinite(ve)?j(X,_._m2,ve):0},V=function(X){var ee=_._rangebreaks.length;if(!ee)return K(X,_._m,_._b);for(var re=0,ie=0;ie<ee&&!(X<_._rangebreaks[ie].pmin);ie++)X>_._rangebreaks[ie].pmax&&(re=ie+1);return K(X,_._m2,_._B[re])}}_.c2l=_.type==="log"?P:o,_.l2c=_.type==="log"?u:o,_.l2p=G,_.p2l=V,_.c2p=_.type==="log"?function(X,ee){return G(P(X,ee))}:G,_.p2c=_.type==="log"?function(X){return u(V(X))}:V,["linear","-"].indexOf(_.type)!==-1?(_.d2r=_.r2d=_.d2c=_.r2c=_.d2l=_.r2l=d,_.c2d=_.c2r=_.l2d=_.l2r=o,_.d2p=_.r2p=function(X){return _.l2p(d(X))},_.p2d=_.p2r=V,_.cleanPos=o):_.type==="log"?(_.d2r=_.d2l=function(X,ee){return P(d(X),ee)},_.r2d=_.r2c=function(X){return u(d(X))},_.d2c=_.r2l=d,_.c2d=_.l2r=o,_.c2r=P,_.l2d=u,_.d2p=function(X,ee){return _.l2p(_.d2r(X,ee))},_.p2d=function(X){return u(V(X))},_.r2p=function(X){return _.l2p(d(X))},_.p2r=V,_.cleanPos=o):_.type==="date"?(_.d2r=_.r2d=l.identity,_.d2c=_.r2c=_.d2l=_.r2l=I,_.c2d=_.c2r=_.l2d=_.l2r=U,_.d2p=_.r2p=function(X,ee,re){return _.l2p(I(X,0,re))},_.p2d=_.p2r=function(X,ee,re){return U(V(X),ee,re)},_.cleanPos=function(X){return l.cleanDate(X,i,_.calendar)}):_.type==="category"?(_.d2c=_.d2l=H,_.r2d=_.c2d=_.l2d=z,_.d2r=_.d2l_noadd=N,_.r2c=function(X){var ee=B(X);return ee!==void 0?ee:_.fraction2r(.5)},_.l2r=_.c2r=o,_.r2l=B,_.d2p=function(X){return _.l2p(_.r2c(X))},_.p2d=function(X){return z(V(X))},_.r2p=_.d2p,_.p2r=V,_.cleanPos=function(X){return typeof X=="string"&&X!==""?X:o(X)}):_.type==="multicategory"&&(_.r2d=_.c2d=_.l2d=z,_.d2r=_.d2l_noadd=N,_.r2c=function(X){var ee=N(X);return ee!==void 0?ee:_.fraction2r(.5)},_.r2c_just_indices=F,_.l2r=_.c2r=o,_.r2l=N,_.d2p=function(X){return _.l2p(_.r2c(X))},_.p2d=function(X){return z(V(X))},_.r2p=_.d2p,_.p2r=V,_.cleanPos=function(X){return Array.isArray(X)||typeof X=="string"&&X!==""?X:o(X)},_.setupMultiCategory=function(X){var ee,re,ie=_._traceIndices,se=_._matchGroup;if(se&&_._categories.length===0){for(var fe in se)if(fe!==L){var ye=E[y.id2name(fe)];ie=ie.concat(ye._traceIndices)}}var ge=[[0,{}],[0,{}]],he=[];for(ee=0;ee<ie.length;ee++){var ve=X[ie[ee]];if(C in ve){var Ie=ve[C],xe=ve._length||l.minRowLength(Ie);if(r(Ie[0])&&r(Ie[1]))for(re=0;re<xe;re++){var Ae=Ie[0][re],Se=Ie[1][re];S(Ae)&&S(Se)&&(he.push([Ae,Se]),Ae in ge[0][1]||(ge[0][1][Ae]=ge[0][0]++),Se in ge[1][1]||(ge[1][1][Se]=ge[1][0]++))}}}for(he.sort(function(Te,Q){var oe=ge[0][1],ce=oe[Te[0]]-oe[Q[0]];if(ce)return ce;var me=ge[1][1];return me[Te[1]]-me[Q[1]]}),ee=0;ee<he.length;ee++)H(he[ee])}),_.fraction2r=function(X){var ee=_.r2l(_.range[0]),re=_.r2l(_.range[1]);return _.l2r(ee+X*(re-ee))},_.r2fraction=function(X){var ee=_.r2l(_.range[0]),re=_.r2l(_.range[1]);return(_.r2l(X)-ee)/(re-ee)},_.cleanRange=function(X,ee){ee||(ee={}),X||(X="range");var re,ie,se=l.nestedProperty(_,X).get();if(ie=(ie=_.type==="date"?l.dfltRange(_.calendar):C==="y"?p.DFLTRANGEY:_._name==="realaxis"?[0,1]:ee.dfltRange||p.DFLTRANGEX).slice(),_.rangemode!=="tozero"&&_.rangemode!=="nonnegative"||(ie[0]=0),se&&se.length===2)for(_.type!=="date"||_.autorange||(se[0]=l.cleanDate(se[0],i,_.calendar),se[1]=l.cleanDate(se[1],i,_.calendar)),re=0;re<2;re++)if(_.type==="date"){if(!l.isDateTime(se[re],_.calendar)){_[X]=ie;break}if(_.r2l(se[0])===_.r2l(se[1])){var fe=l.constrain(_.r2l(se[0]),l.MIN_MS+1e3,l.MAX_MS-1e3);se[0]=_.l2r(fe-1e3),se[1]=_.l2r(fe+1e3);break}}else{if(!x(se[re])){if(!x(se[1-re])){_[X]=ie;break}se[re]=se[1-re]*(re?10:.1)}if(se[re]<-a?se[re]=-a:se[re]>a&&(se[re]=a),se[0]===se[1]){var ye=Math.max(1,Math.abs(1e-6*se[0]));se[0]-=ye,se[1]+=ye}}else l.nestedProperty(_,X).set(ie)},_.setScale=function(X){var ee=E._size;if(_.overlaying){var re=y.getFromId({_fullLayout:E},_.overlaying);_.domain=re.domain}var ie=X&&_._r?"_r":"range",se=_.calendar;_.cleanRange(ie);var fe,ye,ge=_.r2l(_[ie][0],se),he=_.r2l(_[ie][1],se),ve=C==="y";if(ve?(_._offset=ee.t+(1-_.domain[1])*ee.h,_._length=ee.h*(_.domain[1]-_.domain[0]),_._m=_._length/(ge-he),_._b=-_._m*he):(_._offset=ee.l+_.domain[0]*ee.w,_._length=ee.w*(_.domain[1]-_.domain[0]),_._m=_._length/(he-ge),_._b=-_._m*ge),_._rangebreaks=[],_._lBreaks=0,_._m2=0,_._B=[],_.rangebreaks&&(_._rangebreaks=_.locateBreaks(Math.min(ge,he),Math.max(ge,he)),_._rangebreaks.length)){for(fe=0;fe<_._rangebreaks.length;fe++)ye=_._rangebreaks[fe],_._lBreaks+=Math.abs(ye.max-ye.min);var Ie=ve;ge>he&&(Ie=!Ie),Ie&&_._rangebreaks.reverse();var xe=Ie?-1:1;for(_._m2=xe*_._length/(Math.abs(he-ge)-_._lBreaks),_._B.push(-_._m2*(ve?he:ge)),fe=0;fe<_._rangebreaks.length;fe++)ye=_._rangebreaks[fe],_._B.push(_._B[_._B.length-1]-xe*_._m2*(ye.max-ye.min));for(fe=0;fe<_._rangebreaks.length;fe++)(ye=_._rangebreaks[fe]).pmin=G(ye.min),ye.pmax=G(ye.max)}if(!isFinite(_._m)||!isFinite(_._b)||_._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},_.maskBreaks=function(X){var ee,re,ie,se,fe,ye=_.rangebreaks||[];ye._cachedPatterns||(ye._cachedPatterns=ye.map(function(Ae){return Ae.enabled&&Ae.bounds?l.simpleMap(Ae.bounds,Ae.pattern?d:_.d2c):null})),ye._cachedValues||(ye._cachedValues=ye.map(function(Ae){return Ae.enabled&&Ae.values?l.simpleMap(Ae.values,_.d2c).sort(l.sorterAsc):null}));for(var ge=0;ge<ye.length;ge++){var he=ye[ge];if(he.enabled){if(he.bounds){var ve=he.pattern;switch(re=(ee=ye._cachedPatterns[ge])[0],ie=ee[1],ve){case w:se=(fe=new Date(X)).getUTCDay(),re>ie&&(ie+=7,se<re&&(se+=7));break;case m:se=(fe=new Date(X)).getUTCHours()+(fe.getUTCMinutes()/60+fe.getUTCSeconds()/3600+fe.getUTCMilliseconds()/36e5),re>ie&&(ie+=24,se<re&&(se+=24));break;case"":se=X}if(se>=re&&se<ie)return i}else for(var Ie=ye._cachedValues[ge],xe=0;xe<Ie.length;xe++)if(ie=(re=Ie[xe])+he.dvalue,X>=re&&X<ie)return i}}return X},_.locateBreaks=function(X,ee){var re,ie,se,fe,ye=[];if(!_.rangebreaks)return ye;var ge=_.rangebreaks.slice().sort(function(me,Me){return me.pattern===w&&Me.pattern===m?-1:Me.pattern===w&&me.pattern===m?1:0}),he=function(me,Me){if((me=l.constrain(me,X,ee))!==(Me=l.constrain(Me,X,ee))){for(var Re=!0,Ce=0;Ce<ye.length;Ce++){var ze=ye[Ce];me<ze.max&&Me>=ze.min&&(me<ze.min&&(ze.min=me),Me>ze.max&&(ze.max=Me),Re=!1)}Re&&ye.push({min:me,max:Me})}};for(re=0;re<ge.length;re++){var ve=ge[re];if(ve.enabled)if(ve.bounds){var Ie=X,xe=ee;ve.pattern&&(Ie=Math.floor(Ie)),se=(ie=l.simpleMap(ve.bounds,ve.pattern?d:_.r2l))[0],fe=ie[1];var Ae,Se,Te=new Date(Ie);switch(ve.pattern){case w:Se=h,Ae=(fe-se+(fe<se?7:0))*f,Ie+=se*f-(Te.getUTCDay()*f+Te.getUTCHours()*b+Te.getUTCMinutes()*v+Te.getUTCSeconds()*g+Te.getUTCMilliseconds());break;case m:Se=f,Ae=(fe-se+(fe<se?24:0))*b,Ie+=se*b-(Te.getUTCHours()*b+Te.getUTCMinutes()*v+Te.getUTCSeconds()*g+Te.getUTCMilliseconds());break;default:Ie=Math.min(ie[0],ie[1]),Ae=Se=(xe=Math.max(ie[0],ie[1]))-Ie}for(var Q=Ie;Q<xe;Q+=Se)he(Q,Q+Ae)}else for(var oe=l.simpleMap(ve.values,_.d2c),ce=0;ce<oe.length;ce++)he(se=oe[ce],fe=se+ve.dvalue)}return ye.sort(function(me,Me){return me.min-Me.min}),ye},_.makeCalcdata=function(X,ee,re){var ie,se,fe,ye,ge=_.type,he=ge==="date"&&X[ee+"calendar"];if(ee in X){if(ie=X[ee],ye=X._length||l.minRowLength(ie),l.isTypedArray(ie)&&(ge==="linear"||ge==="log")){if(ye===ie.length)return ie;if(ie.subarray)return ie.subarray(0,ye)}if(ge==="multicategory")return function(xe,Ae){for(var Se=new Array(Ae),Te=0;Te<Ae;Te++){var Q=(xe[0]||[])[Te],oe=(xe[1]||[])[Te];Se[Te]=F([Q,oe])}return Se}(ie,ye);for(se=new Array(ye),fe=0;fe<ye;fe++)se[fe]=_.d2c(ie[fe],0,he,re)}else{var ve=ee+"0"in X?_.d2c(X[ee+"0"],0,he):0,Ie=X["d"+ee]?Number(X["d"+ee]):1;for(ie=X[{x:"y",y:"x"}[ee]],ye=X._length||ie.length,se=new Array(ye),fe=0;fe<ye;fe++)se[fe]=ve+fe*Ie}if(_.rangebreaks)for(fe=0;fe<ye;fe++)se[fe]=_.maskBreaks(se[fe]);return se},_.isValidRange=function(X){return Array.isArray(X)&&X.length===2&&x(_.r2l(X[0]))&&x(_.r2l(X[1]))},_.isPtWithinRange=function(X,ee){var re=_.c2l(X[C],null,ee),ie=_.r2l(_.range[0]),se=_.r2l(_.range[1]);return ie<se?ie<=re&&re<=se:se<=re&&re<=ie},_._emptyCategories=function(){_._categories=[],_._categoriesMap={}},_.clearCalc=function(){var X=_._matchGroup;if(X){var ee=null,re=null;for(var ie in X){var se=E[y.id2name(ie)];if(se._categories){ee=se._categories,re=se._categoriesMap;break}}ee&&re?(_._categories=ee,_._categoriesMap=re):_._emptyCategories()}else _._emptyCategories();if(_._initialCategories)for(var fe=0;fe<_._initialCategories.length;fe++)H(_._initialCategories[fe])},_.sortByInitialCategories=function(){var X=[];if(_._emptyCategories(),_._initialCategories)for(var ee=0;ee<_._initialCategories.length;ee++)H(_._initialCategories[ee]);X=X.concat(_._traceIndices);var re=_._matchGroup;for(var ie in re)if(L!==ie){var se=E[y.id2name(ie)];se._categories=_._categories,se._categoriesMap=_._categoriesMap,X=X.concat(se._traceIndices)}return X};var J=E._d3locale;_.type==="date"&&(_._dateFormat=J?J.timeFormat:k,_._extraFormat=E._extraFormat),_._separators=E.separators,_._numFormat=J?J.numberFormat:T,delete _._minDtick,delete _._forceTick0}},59652:function($){$.exports=function(R){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(A){return R[A]!==void 0});if(e.every(function(A){return R[A]===R[e[0]]})||e.length===1)return R[e[0]]}},96115:function($,R,e){var A=e(71828),k=e(7901).contrast,l=e(13838),T=e(59652),x=e(85501);function d(s,t){function o(r,n){return A.coerce(s,t,l.tickformatstops,r,n)}o("enabled")&&(o("dtickrange"),o("value"))}$.exports=function(s,t,o,r,n){n||(n={});var a=T(s);if(o("showticklabels")){var i=n.font||{},c=t.color,h=(t.ticklabelposition||"").indexOf("inside")!==-1?k(n.bgColor):c&&c!==l.color.dflt?c:i.color;if(A.coerceFont(o,"tickfont",{family:i.family,size:i.size,color:h}),n.noTicklabelstep||r==="multicategory"||r==="log"||o("ticklabelstep"),n.noAng||o("tickangle"),r!=="category"){var f=o("tickformat");x(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:d}),t.tickformatstops.length||delete t.tickformatstops,n.noExp||f||r==="date"||(o("showexponent",a),o("exponentformat"),o("minexponent"),o("separatethousands"))}}}},38701:function($,R,e){var A=e(71828),k=e(13838);$.exports=function(l,T,x,d){var s=d.isMinor,t=s?l.minor||{}:l,o=s?T.minor:T,r=s?k.minor:k,n=s?"minor.":"",a=A.coerce2(t,o,r,"ticklen",s?.6*(T.ticklen||5):void 0),i=A.coerce2(t,o,r,"tickwidth",s?T.tickwidth||1:void 0),c=A.coerce2(t,o,r,"tickcolor",(s?T.tickcolor:void 0)||o.color);x(n+"ticks",!s&&d.outerTicks||a||i||c?"outside":"")||(delete o.ticklen,delete o.tickwidth,delete o.tickcolor)}},26218:function($,R,e){var A=e(66287),k=e(71828).isArrayOrTypedArray;$.exports=function(l,T,x,d,s){s||(s={});var t=s.isMinor,o=t?l.minor||{}:l,r=t?T.minor:T,n=t?"minor.":"";function a(v){var g=o[v];return g!==void 0?g:(r._template||{})[v]}var i=a("tick0"),c=a("dtick"),h=a("tickvals"),f=x(n+"tickmode",k(h)?"array":c?"linear":"auto");if(f==="auto")x(n+"nticks");else if(f==="linear"){var b=r.dtick=A.dtick(c,d);r.tick0=A.tick0(i,d,T.calendar,b)}else d!=="multicategory"&&(x(n+"tickvals")===void 0?r.tickmode="auto":t||x("ticktext"))}},66847:function($,R,e){var A=e(39898),k=e(73972),l=e(71828),T=e(91424),x=e(89298);$.exports=function(d,s,t,o){var r=d._fullLayout;if(s.length!==0){var n,a,i,c;o&&(n=o());var h=A.ease(t.easing);return d._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var v={},g=0;g<s.length;g++){var y=s[g],p=y.plotinfo.xaxis,m=y.plotinfo.yaxis;y.xr0&&(v[p._name+".range"]=y.xr0.slice()),y.yr0&&(v[m._name+".range"]=y.yr0.slice())}return k.call("relayout",d,v).then(function(){for(var w=0;w<s.length;w++)f(s[w].plotinfo)})}()}),a=Date.now(),c=window.requestAnimationFrame(function v(){i=Date.now();for(var g=Math.min(1,(i-a)/t.duration),y=h(g),p=0;p<s.length;p++)b(s[p],y);i-a>t.duration?(function(){for(var m={},w=0;w<s.length;w++){var u=s[w],S=u.plotinfo.xaxis,_=u.plotinfo.yaxis;u.xr1&&(m[S._name+".range"]=u.xr1.slice()),u.yr1&&(m[_._name+".range"]=u.yr1.slice())}n&&n(),k.call("relayout",d,m).then(function(){for(var E=0;E<s.length;E++)f(s[E].plotinfo)})}(),c=window.cancelAnimationFrame(v)):c=window.requestAnimationFrame(v)}),Promise.resolve()}function f(v){var g=v.xaxis,y=v.yaxis;r._defs.select("#"+v.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),v.plot.call(T.setTranslate,g._offset,y._offset).call(T.setScale,1,1);var p=v.plot.selectAll(".scatterlayer .trace");p.selectAll(".point").call(T.setPointGroupScale,1,1),p.selectAll(".textpoint").call(T.setTextPointsScale,1,1),p.call(T.hideOutsideRangePoints,v)}function b(v,g){var y=v.plotinfo,p=y.xaxis,m=y.yaxis,w=p._length,u=m._length,S=!!v.xr1,_=!!v.yr1,E=[];if(S){var L=l.simpleMap(v.xr0,p.r2l),C=l.simpleMap(v.xr1,p.r2l),P=L[1]-L[0],I=C[1]-C[0];E[0]=(L[0]*(1-g)+g*C[0]-L[0])/(L[1]-L[0])*w,E[2]=w*(1-g+g*I/P),p.range[0]=p.l2r(L[0]*(1-g)+g*C[0]),p.range[1]=p.l2r(L[1]*(1-g)+g*C[1])}else E[0]=0,E[2]=w;if(_){var U=l.simpleMap(v.yr0,m.r2l),z=l.simpleMap(v.yr1,m.r2l),H=U[1]-U[0],F=z[1]-z[0];E[1]=(U[1]*(1-g)+g*z[1]-U[1])/(U[0]-U[1])*u,E[3]=u*(1-g+g*F/H),m.range[0]=p.l2r(U[0]*(1-g)+g*z[0]),m.range[1]=m.l2r(U[1]*(1-g)+g*z[1])}else E[1]=0,E[3]=u;x.drawOne(d,p,{skipTitle:!0}),x.drawOne(d,m,{skipTitle:!0}),x.redrawComponents(d,[p._id,m._id]);var N=S?w/E[2]:1,B=_?u/E[3]:1,j=S?E[0]:0,K=_?E[1]:0,G=S?E[0]/E[2]*w:0,V=_?E[1]/E[3]*u:0,W=p._offset-G,J=m._offset-V;y.clipRect.call(T.setTranslate,j,K).call(T.setScale,1/N,1/B),y.plot.call(T.setTranslate,W,J).call(T.setScale,N,B),T.setPointGroupScale(y.zoomScalePts,1/N,1/B),T.setTextPointsScale(y.zoomScaleTxt,1/N,1/B)}x.redrawComponents(d)}},951:function($,R,e){var A=e(73972).traceIs,k=e(4322);function l(x){return{v:"x",h:"y"}[x.orientation||"v"]}function T(x,d){var s=l(x),t=A(x,"box-violin"),o=A(x._fullInput||{},"candlestick");return t&&!o&&d===s&&x[s]===void 0&&x[s+"0"]===void 0}$.exports=function(x,d,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(o,r){if(o.type==="-"){var n,a=o._id,i=a.charAt(0);a.indexOf("scene")!==-1&&(a=i);var c=function(m,w,u){for(var S=0;S<m.length;S++){var _=m[S];if(_.type==="splom"&&_._length>0&&(_["_"+u+"axes"]||{})[w]||(_[u+"axis"]||u)===w&&(T(_,u)||(_[u]||[]).length||_[u+"0"]))return _}}(r,a,i);if(c)if(c.type!=="histogram"||i!=={v:"y",h:"x"}[c.orientation||"v"]){var h=i+"calendar",f=c[h],b={noMultiCategory:!A(c,"cartesian")||A(c,"noMultiCategory")};if(c.type==="box"&&c._hasPreCompStats&&i==={h:"x",v:"y"}[c.orientation||"v"]&&(b.noMultiCategory=!0),b.autotypenumbers=o.autotypenumbers,T(c,i)){var v=l(c),g=[];for(n=0;n<r.length;n++){var y=r[n];A(y,"box-violin")&&(y[i+"axis"]||i)===a&&(y[v]!==void 0?g.push(y[v][0]):y.name!==void 0?g.push(y.name):g.push("text"),y[h]!==f&&(f=void 0))}o.type=k(g,f,b)}else if(c.type==="splom"){var p=c.dimensions[c._axesDim[a]];p.visible&&(o.type=k(p.values,f,b))}else o.type=k(c[i]||[c[i+"0"]],f,b)}else o.type="linear"}}(d,t.data),d.type==="-"?d.type="linear":x.type=d.type)}},31137:function($,R,e){var A=e(73972),k=e(71828);function l(s,t,o){var r,n,a,i=!1;if(t.type==="data")r=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;r=s._fullLayout}return n=k.nestedProperty(r,t.prop).get(),(a=o[t.type]=o[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==n&&(i=!0),a[t.prop]=n,{changed:i,value:n}}function T(s,t){var o=[],r=t[0],n={};if(typeof r=="string")n[r]=t[1];else{if(!k.isPlainObject(r))return o;n=r}return d(n,function(a,i,c){o.push({type:"layout",prop:a,value:c})},"",0),o}function x(s,t){var o,r,n,a,i=[];if(r=t[0],n=t[1],o=t[2],a={},typeof r=="string")a[r]=n;else{if(!k.isPlainObject(r))return i;a=r,o===void 0&&(o=n)}return o===void 0&&(o=null),d(a,function(c,h,f){var b,v;if(Array.isArray(f)){v=f.slice();var g=Math.min(v.length,s.data.length);o&&(g=Math.min(g,o.length)),b=[];for(var y=0;y<g;y++)b[y]=o?o[y]:y}else v=f,b=o?o.slice():null;if(b===null)Array.isArray(v)&&(v=v[0]);else if(Array.isArray(b)){if(!Array.isArray(v)){var p=v;v=[];for(var m=0;m<b.length;m++)v[m]=p}v.length=Math.min(b.length,v.length)}i.push({type:"data",prop:c,traces:b,value:v})},"",0),i}function d(s,t,o,r){Object.keys(s).forEach(function(n){var a=s[n];if(n[0]!=="_"){var i=o+(r>0?".":"")+n;k.isPlainObject(a)?d(a,t,i,r+1):t(i,n,a)}})}R.manageCommandObserver=function(s,t,o,r){var n={},a=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var i=R.hasSimpleAPICommandBindings(s,o,n.lookupTable);if(t&&t._commandObserver){if(i)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(i){l(s,i,n.cache),n.check=function(){if(a){var f=l(s,i,n.cache);return f.changed&&r&&n.lookupTable[f.value]!==void 0&&(n.disable(),Promise.resolve(r({value:f.value,type:i.type,prop:i.prop,traces:i.traces,index:n.lookupTable[f.value]})).then(n.enable,n.enable)),f.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<c.length;h++)s._internalOn(c[h],n.check);n.remove=function(){for(var f=0;f<c.length;f++)s._removeInternalListener(c[f],n.check)}}else k.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},t&&(t._commandObserver=n),n},R.hasSimpleAPICommandBindings=function(s,t,o){var r,n,a=t.length;for(r=0;r<a;r++){var i,c=t[r],h=c.method,f=c.args;if(Array.isArray(f)||(f=[]),!h)return!1;var b=R.computeAPICommandBindings(s,h,f);if(b.length!==1)return!1;if(n){if((i=b[0]).type!==n.type||i.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(i.traces))return!1;i.traces.sort();for(var v=0;v<n.traces.length;v++)if(n.traces[v]!==i.traces[v])return!1}else if(i.prop!==n.prop)return!1}else n=b[0],Array.isArray(n.traces)&&n.traces.sort();var g=(i=b[0]).value;if(Array.isArray(g)){if(g.length!==1)return!1;g=g[0]}o&&(o[g]=r)}return n},R.executeAPICommand=function(s,t,o){if(t==="skip")return Promise.resolve();var r=A.apiMethodRegistry[t],n=[s];Array.isArray(o)||(o=[]);for(var a=0;a<o.length;a++)n.push(o[a]);return r.apply(null,n).catch(function(i){return k.warn("API call to Plotly."+t+" rejected.",i),Promise.reject(i)})},R.computeAPICommandBindings=function(s,t,o){var r;switch(Array.isArray(o)||(o=[]),t){case"restyle":r=x(s,o);break;case"relayout":r=T(0,o);break;case"update":r=x(s,[o[0],o[2]]).concat(T(0,[o[1]]));break;case"animate":r=function(n,a){return Array.isArray(a[0])&&a[0].length===1&&["string","number"].indexOf(typeof a[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[]}(0,o);break;default:r=[]}return r}},27670:function($,R,e){var A=e(1426).extendFlat;R.Y=function(k,l){l=l||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},x=(k.name&&k.name,k.trace,l.description&&l.description,{x:A({},T,{}),y:A({},T,{}),editType:k.editType});return k.noGridCell||(x.row={valType:"integer",min:0,dflt:0,editType:k.editType},x.column={valType:"integer",min:0,dflt:0,editType:k.editType}),x},R.c=function(k,l,T,x){var d=x&&x.x||[0,1],s=x&&x.y||[0,1],t=l.grid;if(t){var o=T("domain.column");o!==void 0&&(o<t.columns?d=t._domains.x[o]:delete k.domain.column);var r=T("domain.row");r!==void 0&&(r<t.rows?s=t._domains.y[r]:delete k.domain.row)}var n=T("domain.x",d),a=T("domain.y",s);n[0]<n[1]||(k.domain.x=d.slice()),a[0]<a[1]||(k.domain.y=s.slice())}},41940:function($){$.exports=function(R){var e=R.editType,A=R.colorEditType;A===void 0&&(A=e);var k={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:A},editType:e};return R.autoSize&&(k.size.dflt="auto"),R.autoColor&&(k.color.dflt="auto"),R.arrayOk&&(k.family.arrayOk=!0,k.size.arrayOk=!0,k.color.arrayOk=!0),k}},31391:function($){$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function($,R){R.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},R.axesNames=["lonaxis","lataxis"],R.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},R.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},R.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},R.clipPad=.001,R.precision=.1,R.landColor="#F0DC82",R.waterColor="#3399FF",R.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},R.sphereSVG={type:"Sphere"},R.fillLayers={ocean:1,land:1,lakes:1},R.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},R.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],R.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],R.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function($,R,e){var A=e(39898),k=e(27362),l=k.geoPath,T=k.geoDistance,x=e(65704),d=e(73972),s=e(71828),t=s.strTranslate,o=e(7901),r=e(91424),n=e(30211),a=e(74875),i=e(89298),c=e(71739).getAutoRange,h=e(28569),f=e(47322).prepSelect,b=e(47322).clearOutline,v=e(47322).selectOnClick,g=e(74455),y=e(78776),p=e(41327),m=e(90973),w=e(96892).zL;function u(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=u.prototype;function _(E,L){var C=y.clipPad,P=E[0]+C,I=E[1]-C,U=L[0]+C,z=L[1]-C;P>0&&I<0&&(I+=360);var H=(I-P)/4;return{type:"Polygon",coordinates:[[[P,U],[P,z],[P+H,z],[P+2*H,z],[P+3*H,z],[I,z],[I,U],[I-H,U],[I-2*H,U],[I-3*H,U],[P,U]]]}}$.exports=function(E){return new u(E)},S.plot=function(E,L,C,P){var I=this;if(P)return I.update(E,L,!0);I._geoCalcData=E,I._fullLayout=L;var U=L[this.id],z=[],H=!1;for(var F in y.layerNameToAdjective)if(F!=="frame"&&U["show"+F]){H=!0;break}for(var N=!1,B=0;B<E.length;B++){var j=E[0][0].trace;j._geo=I,j.locationmode&&(H=!0);var K=j.marker;if(K){var G=K.angle,V=K.angleref;(G||V==="north"||V==="previous")&&(N=!0)}}if(this._hasMarkerAngles=N,H){var W=m.getTopojsonName(U);I.topojson!==null&&W===I.topojsonName||(I.topojsonName=W,PlotlyGeoAssets.topojson[I.topojsonName]===void 0&&z.push(I.fetchTopojson()))}z=z.concat(p.fetchTraceGeoData(E)),C.push(new Promise(function(J,X){Promise.all(z).then(function(){I.topojson=PlotlyGeoAssets.topojson[I.topojsonName],I.update(E,L),J()}).catch(X)}))},S.fetchTopojson=function(){var E=this,L=m.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,P){A.json(L,function(I,U){if(I)return I.status===404?P(new Error(["plotly.js could not find topojson file at",L+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):P(new Error(["unexpected error while fetching topojson file at",L].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=U,C()})})},S.update=function(E,L,C){var P=L[this.id];this.hasChoropleth=!1;for(var I=0;I<E.length;I++){var U=E[I],z=U[0].trace;z.type==="choropleth"&&(this.hasChoropleth=!0),z.visible===!0&&z._length>0&&z._module.calcGeoJSON(U,L)}if(!C){if(this.updateProjection(E,L))return;this.viewInitial&&this.scope===P.scope||this.saveViewInitial(P)}this.scope=P.scope,this.updateBaseLayers(L,P),this.updateDims(L,P),this.updateFx(L,P),a.generalUpdatePerTraceModule(this.graphDiv,this,E,P);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var F=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=F.selectAll("path"),this._render()},S.updateProjection=function(E,L){var C=this.graphDiv,P=L[this.id],I=L._size,U=P.domain,z=P.projection,H=P.lonaxis,F=P.lataxis,N=H._ax,B=F._ax,j=this.projection=function(Te){var Q=Te.projection,oe=Q.type,ce=y.projNames[oe];ce="geo"+s.titleCase(ce);for(var me=(k[ce]||x[ce])(),Me=Te._isSatellite?180*Math.acos(1/Q.distance)/Math.PI:Te._isClipped?y.lonaxisSpan[oe]/2:null,Re=["center","rotate","parallels","clipExtent"],Ce=function(de){return de?me:[]},ze=0;ze<Re.length;ze++){var le=Re[ze];typeof me[le]!="function"&&(me[le]=Ce)}return me.isLonLatOverEdges=function(de){if(me(de)===null)return!0;if(Me){var be=me.rotate();return T(de,[-be[0],-be[1]])>Me*Math.PI/180}return!1},me.getPath=function(){return l().projection(me)},me.getBounds=function(de){return me.getPath().bounds(de)},me.precision(y.precision),Te._isSatellite&&me.tilt(Q.tilt).distance(Q.distance),Me&&me.clipAngle(Me-y.clipPad),me}(P),K=[[I.l+I.w*U.x[0],I.t+I.h*(1-U.y[1])],[I.l+I.w*U.x[1],I.t+I.h*(1-U.y[0])]],G=P.center||{},V=z.rotation||{},W=H.range||[],J=F.range||[];if(P.fitbounds){N._length=K[1][0]-K[0][0],B._length=K[1][1]-K[0][1],N.range=c(C,N),B.range=c(C,B);var X=(N.range[0]+N.range[1])/2,ee=(B.range[0]+B.range[1])/2;if(P._isScoped)G={lon:X,lat:ee};else if(P._isClipped){G={lon:X,lat:ee},V={lon:X,lat:ee,roll:V.roll};var re=z.type,ie=y.lonaxisSpan[re]/2||180,se=y.lataxisSpan[re]/2||90;W=[X-ie,X+ie],J=[ee-se,ee+se]}else G={lon:X,lat:ee},V={lon:X,lat:V.lat,roll:V.roll}}j.center([G.lon-V.lon,G.lat-V.lat]).rotate([-V.lon,-V.lat,V.roll]).parallels(z.parallels);var fe=_(W,J);j.fitExtent(K,fe);var ye=this.bounds=j.getBounds(fe),ge=this.fitScale=j.scale(),he=j.translate();if(P.fitbounds){var ve=j.getBounds(_(N.range,B.range)),Ie=Math.min((ye[1][0]-ye[0][0])/(ve[1][0]-ve[0][0]),(ye[1][1]-ye[0][1])/(ve[1][1]-ve[0][1]));isFinite(Ie)?j.scale(Ie*ge):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else j.scale(z.scale*ge);var xe=this.midPt=[(ye[0][0]+ye[1][0])/2,(ye[0][1]+ye[1][1])/2];if(j.translate([he[0]+(xe[0]-he[0]),he[1]+(xe[1]-he[1])]).clipExtent(ye),P._isAlbersUsa){var Ae=j([G.lon,G.lat]),Se=j.translate();j.translate([Se[0]-(Ae[0]-Se[0]),Se[1]-(Ae[1]-Se[1])])}},S.updateBaseLayers=function(E,L){var C=this,P=C.topojson,I=C.layers,U=C.basePaths;function z(j){return j==="lonaxis"||j==="lataxis"}function H(j){return Boolean(y.lineLayers[j])}function F(j){return Boolean(y.fillLayers[j])}var N=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(j){return H(j)||F(j)?L["show"+j]:!z(j)||L[j].showgrid}),B=C.framework.selectAll(".layer").data(N,String);B.exit().each(function(j){delete I[j],delete U[j],A.select(this).remove()}),B.enter().append("g").attr("class",function(j){return"layer "+j}).each(function(j){var K=I[j]=A.select(this);j==="bg"?C.bgRect=K.append("rect").style("pointer-events","all"):z(j)?U[j]=K.append("path").style("fill","none"):j==="backplot"?K.append("g").classed("choroplethlayer",!0):j==="frontplot"?K.append("g").classed("scatterlayer",!0):H(j)?U[j]=K.append("path").style("fill","none").style("stroke-miterlimit",2):F(j)&&(U[j]=K.append("path").style("stroke","none"))}),B.order(),B.each(function(j){var K=U[j],G=y.layerNameToAdjective[j];j==="frame"?K.datum(y.sphereSVG):H(j)||F(j)?K.datum(w(P,P.objects[j])):z(j)&&K.datum(function(V,W,J){var X,ee,re,ie=W[V],se=y.scopeDefaults[W.scope];V==="lonaxis"?(X=se.lonaxisRange,ee=se.lataxisRange,re=function(Se,Te){return[Se,Te]}):V==="lataxis"&&(X=se.lataxisRange,ee=se.lonaxisRange,re=function(Se,Te){return[Te,Se]});var fe={type:"linear",range:[X[0],X[1]-1e-6],tick0:ie.tick0,dtick:ie.dtick};i.setConvert(fe,J);var ye=i.calcTicks(fe);W.isScoped||V!=="lonaxis"||ye.pop();for(var ge=ye.length,he=new Array(ge),ve=0;ve<ge;ve++)for(var Ie=ye[ve].x,xe=he[ve]=[],Ae=ee[0];Ae<ee[1]+2.5;Ae+=2.5)xe.push(re(Ie,Ae));return{type:"MultiLineString",coordinates:he}}(j,L,E)).call(o.stroke,L[j].gridcolor).call(r.dashLine,L[j].griddash,L[j].gridwidth),H(j)?K.call(o.stroke,L[G+"color"]).call(r.dashLine,"",L[G+"width"]):F(j)&&K.call(o.fill,L[G+"color"])})},S.updateDims=function(E,L){var C=this.bounds,P=(L.framewidth||0)/2,I=C[0][0]-P,U=C[0][1]-P,z=C[1][0]-I+P,H=C[1][1]-U+P;r.setRect(this.clipRect,I,U,z,H),this.bgRect.call(r.setRect,I,U,z,H).call(o.fill,L.bgcolor),this.xaxis._offset=I,this.xaxis._length=z,this.yaxis._offset=U,this.yaxis._length=H},S.updateFx=function(E,L){var C=this,P=C.graphDiv,I=C.bgRect,U=E.dragmode,z=E.clickmode;if(!C.isStatic){var H={element:C.bgRect.node(),gd:P,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(N,B){B.isRect?(N.range={})[C.id]=[F([B.xmin,B.ymin]),F([B.xmax,B.ymax])]:(N.lassoPoints={})[C.id]=B.map(F)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(N){N===2&&b(P)}};U==="pan"?(I.node().onmousedown=null,I.call(g(C,L)),I.on("dblclick.zoom",function(){var N=C.viewInitial,B={};for(var j in N)B[C.id+"."+j]=N[j];d.call("_guiRelayout",P,B),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||I.on("wheel.zoom",null)):U!=="select"&&U!=="lasso"||(I.on(".zoom",null),H.prepFn=function(N,B,j){f(N,B,j,H,U)},h.init(H)),I.on("mousemove",function(){var N=C.projection.invert(s.getPositionFromD3Event());if(!N)return h.unhover(P,A.event);C.xaxis.p2c=function(){return N[0]},C.yaxis.p2c=function(){return N[1]},n.hover(P,A.event,C.id)}),I.on("mouseout",function(){P._dragging||h.unhover(P,A.event)}),I.on("click",function(){U!=="select"&&U!=="lasso"&&(z.indexOf("select")>-1&&v(A.event,P,[C.xaxis],[C.yaxis],C.id,H),z.indexOf("event")>-1&&n.click(P,A.event))})}function F(N){return C.projection.invert([N[0]+C.xaxis._offset,N[1]+C.yaxis._offset])}},S.makeFramework=function(){var E=this,L=E.graphDiv,C=L._fullLayout,P="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",P),E.clipRect=E.clipDef.append("rect"),E.framework=A.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,P,L),E.project=function(I){var U=E.projection(I);return U?[U[0]-E.xaxis._offset,U[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(I){return E.project(I)[0]}},E.yaxis={_id:"y",c2p:function(I){return E.project(I)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},i.setConvert(E.mockAxis,C)},S.saveViewInitial=function(E){var L,C=E.center||{},P=E.projection,I=P.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":P.scale},L=E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":I.lon,"projection.rotation.lat":I.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":I.lon},s.extendFlat(this.viewInitial,L)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,L=this.projection,C=L.getPath();function P(U){var z=L(U.lonlat);return z?t(z[0],z[1]):null}function I(U){return L.isLonLatOverEdges(U.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(U){return C(U.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",I).attr("transform",P)}},44622:function($,R,e){var A=e(27659).AU,k=e(71828).counterRegex,l=e(69082),T="geo",x=k(T),d={};d.geo={valType:"subplotid",dflt:T,editType:"calc"},$.exports={attr:T,name:T,idRoot:T,idRegex:x,attrRegex:x,attributes:d,layoutAttributes:e(77519),supplyLayoutDefaults:e(82161),plot:function(s){for(var t=s._fullLayout,o=s.calcdata,r=t._subplots.geo,n=0;n<r.length;n++){var a=r[n],i=A(o,T,a),c=t[a]._subplot;c||(c=l({id:a,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[a]._subplot=c),c.plot(i,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,o=t._subplots.geo,r=0;r<o.length;r++){var n=t[o[r]];n._subplot.updateFx(t,n)}},clean:function(s,t,o,r){for(var n=r._subplots.geo||[],a=0;a<n.length;a++){var i=n[a],c=r[i]._subplot;!t[i]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},77519:function($,R,e){var A=e(22399),k=e(27670).Y,l=e(79952).P,T=e(78776),x=e(30962).overrideAll,d=e(78607),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:A.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:l};($.exports=x({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:d(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:d(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:A.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:A.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:A.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:A.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:A.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function($,R,e){var A=e(71828),k=e(49119),l=e(27659).NG,T=e(78776),x=e(77519),d=T.axesNames;function s(t,o,r,n){var a=l(n.fullData,"geo",n.id).map(function(V){return V._expandedIndex}),i=r("resolution"),c=r("scope"),h=T.scopeDefaults[c],f=r("projection.type",h.projType),b=o._isAlbersUsa=f==="albers usa";b&&(c=o.scope="usa");var v=o._isScoped=c!=="world",g=o._isSatellite=f==="satellite",y=o._isConic=f.indexOf("conic")!==-1||f==="albers",p=o._isClipped=!!T.lonaxisSpan[f];if(t.visible===!1){var m=A.extendDeep({},o._template);m.showcoastlines=!1,m.showcountries=!1,m.showframe=!1,m.showlakes=!1,m.showland=!1,m.showocean=!1,m.showrivers=!1,m.showsubunits=!1,m.lonaxis&&(m.lonaxis.showgrid=!1),m.lataxis&&(m.lataxis.showgrid=!1),o._template=m}for(var w=r("visible"),u=0;u<d.length;u++){var S,_=d[u],E=[30,10][u];if(v)S=h[_+"Range"];else{var L=T[_+"Span"],C=(L[f]||L["*"])/2,P=r("projection.rotation."+_.substr(0,3),h.projRotate[u]);S=[P-C,P+C]}var I=r(_+".range",S);r(_+".tick0"),r(_+".dtick",E),r(_+".showgrid",!!w&&void 0)&&(r(_+".gridcolor"),r(_+".gridwidth"),r(_+".griddash")),o[_]._ax={type:"linear",_id:_.slice(0,3),_traceIndices:a,setScale:A.identity,c2l:A.identity,r2l:A.identity,autorange:!0,range:I.slice(),_m:1,_input:{}}}var U=o.lonaxis.range,z=o.lataxis.range,H=U[0],F=U[1];H>0&&F<0&&(F+=360);var N,B,j,K=(H+F)/2;if(!b){var G=v?h.projRotate:[K,0,0];N=r("projection.rotation.lon",G[0]),r("projection.rotation.lat",G[1]),r("projection.rotation.roll",G[2]),r("showcoastlines",!v&&w)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!w&&void 0)&&r("oceancolor")}b?(B=-96.6,j=38.7):(B=v?K:N,j=(z[0]+z[1])/2),r("center.lon",B),r("center.lat",j),g&&(r("projection.tilt"),r("projection.distance")),y&&r("projection.parallels",h.projParallels||[0,60]),r("projection.scale"),r("showland",!!w&&void 0)&&r("landcolor"),r("showlakes",!!w&&void 0)&&r("lakecolor"),r("showrivers",!!w&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",v&&c!=="usa"&&w)&&(r("countrycolor"),r("countrywidth")),(c==="usa"||c==="north america"&&i===50)&&(r("showsubunits",w),r("subunitcolor"),r("subunitwidth")),v||r("showframe",w)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete o.projection.scale,v?(delete o.center.lon,delete o.center.lat):p?(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon,delete o.projection.rotation.lat,delete o.lonaxis.range,delete o.lataxis.range):(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon))}$.exports=function(t,o,r){k(t,o,r,{type:"geo",attributes:x,handleDefaults:s,fullData:r,partition:"y"})}},74455:function($,R,e){var A=e(39898),k=e(71828),l=e(73972),T=Math.PI/180,x=180/Math.PI,d={cursor:"pointer"},s={cursor:"auto"};function t(w,u){return A.behavior.zoom().translate(u.translate()).scale(u.scale())}function o(w,u,S){var _=w.id,E=w.graphDiv,L=E.layout,C=L[_],P=E._fullLayout,I=P[_],U={},z={};function H(F,N){U[_+"."+F]=k.nestedProperty(C,F).get(),l.call("_storeDirectGUIEdit",L,P._preGUI,U);var B=k.nestedProperty(I,F);B.get()!==N&&(B.set(N),k.nestedProperty(C,F).set(N),z[_+"."+F]=N)}S(H),H("projection.scale",u.scale()/w.fitScale),H("fitbounds",!1),E.emit("plotly_relayout",z)}function r(w,u){var S=t(0,u);function _(E){var L=u.invert(w.midPt);E("center.lon",L[0]),E("center.lat",L[1])}return S.on("zoomstart",function(){A.select(this).style(d)}).on("zoom",function(){u.scale(A.event.scale).translate(A.event.translate),w.render(!0);var E=u.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.center.lon":E[0],"geo.center.lat":E[1]})}).on("zoomend",function(){A.select(this).style(s),o(w,u,_)}),S}function n(w,u){var S,_,E,L,C,P,I,U,z,H=t(0,u);function F(B){return u.invert(B)}function N(B){var j=u.rotate(),K=u.invert(w.midPt);B("projection.rotation.lon",-j[0]),B("center.lon",K[0]),B("center.lat",K[1])}return H.on("zoomstart",function(){A.select(this).style(d),S=A.mouse(this),_=u.rotate(),E=u.translate(),L=_,C=F(S)}).on("zoom",function(){if(P=A.mouse(this),function(K){var G=F(K);if(!G)return!0;var V=u(G);return Math.abs(V[0]-K[0])>2||Math.abs(V[1]-K[1])>2}(S))return H.scale(u.scale()),void H.translate(u.translate());u.scale(A.event.scale),u.translate([E[0],A.event.translate[1]]),C?F(P)&&(U=F(P),I=[L[0]+(U[0]-C[0]),_[1],_[2]],u.rotate(I),L=I):C=F(S=P),z=!0,w.render(!0);var B=u.rotate(),j=u.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.center.lon":j[0],"geo.center.lat":j[1],"geo.projection.rotation.lon":-B[0]})}).on("zoomend",function(){A.select(this).style(s),z&&o(w,u,N)}),H}function a(w,u){var S;u.rotate(),u.scale();var _=t(0,u),E=function(H){for(var F=0,N=arguments.length,B=[];++F<N;)B.push(arguments[F]);var j=A.dispatch.apply(null,B);return j.of=function(K,G){return function(V){var W;try{W=V.sourceEvent=A.event,V.target=H,A.event=V,j[V.type].apply(K,G)}finally{A.event=W}}},j}(_,"zoomstart","zoom","zoomend"),L=0,C=_.on;function P(H){L++||H({type:"zoomstart"})}function I(H){H({type:"zoom"})}function U(H){--L||H({type:"zoomend"})}function z(H){var F=u.rotate();H("projection.rotation.lon",-F[0]),H("projection.rotation.lat",-F[1])}return _.on("zoomstart",function(){A.select(this).style(d);var H=A.mouse(this),F=u.rotate(),N=F,B=u.translate(),j=c(F);S=i(u,H),C.call(_,"zoom",function(){var K=A.mouse(this);if(u.scale(A.event.scale),S){if(i(u,K)){u.rotate(F).translate(B);var G=i(u,K),V=f(S,G),W=p(h(j,V)),J=b(W,S,N);isFinite(J[0])&&isFinite(J[1])&&isFinite(J[2])||(J=N),u.rotate(J),N=J}}else S=i(u,H=K);I(E.of(this,arguments))}),P(E.of(this,arguments))}).on("zoomend",function(){A.select(this).style(s),C.call(_,"zoom",null),U(E.of(this,arguments)),o(w,u,z)}).on("zoom.redraw",function(){w.render(!0);var H=u.rotate();w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.projection.rotation.lon":-H[0],"geo.projection.rotation.lat":-H[1]})}),A.rebind(_,E,"on")}function i(w,u){var S=w.invert(u);return S&&isFinite(S[0])&&isFinite(S[1])&&function(_){var E=_[0]*T,L=_[1]*T,C=Math.cos(L);return[C*Math.cos(E),C*Math.sin(E),Math.sin(L)]}(S)}function c(w){var u=.5*w[0]*T,S=.5*w[1]*T,_=.5*w[2]*T,E=Math.sin(u),L=Math.cos(u),C=Math.sin(S),P=Math.cos(S),I=Math.sin(_),U=Math.cos(_);return[L*P*U+E*C*I,E*P*U-L*C*I,L*C*U+E*P*I,L*P*I-E*C*U]}function h(w,u){var S=w[0],_=w[1],E=w[2],L=w[3],C=u[0],P=u[1],I=u[2],U=u[3];return[S*C-_*P-E*I-L*U,S*P+_*C+E*U-L*I,S*I-_*U+E*C+L*P,S*U+_*I-E*P+L*C]}function f(w,u){if(w&&u){var S=function(C,P){return[C[1]*P[2]-C[2]*P[1],C[2]*P[0]-C[0]*P[2],C[0]*P[1]-C[1]*P[0]]}(w,u),_=Math.sqrt(m(S,S)),E=.5*Math.acos(Math.max(-1,Math.min(1,m(w,u)))),L=Math.sin(E)/_;return _&&[Math.cos(E),S[2]*L,-S[1]*L,S[0]*L]}}function b(w,u,S){var _=y(u,2,w[0]);_=y(_,1,w[1]),_=y(_,0,w[2]-S[2]);var E,L,C=u[0],P=u[1],I=u[2],U=_[0],z=_[1],H=_[2],F=Math.atan2(P,C)*x,N=Math.sqrt(C*C+P*P);Math.abs(z)>N?(L=(z>0?90:-90)-F,E=0):(L=Math.asin(z/N)*x-F,E=Math.sqrt(N*N-z*z));var B=180-L-2*F,j=(Math.atan2(H,U)-Math.atan2(I,E))*x,K=(Math.atan2(H,U)-Math.atan2(I,-E))*x;return v(S[0],S[1],L,j)<=v(S[0],S[1],B,K)?[L,j,S[2]]:[B,K,S[2]]}function v(w,u,S,_){var E=g(S-w),L=g(_-u);return Math.sqrt(E*E+L*L)}function g(w){return(w%360+540)%360-180}function y(w,u,S){var _=S*T,E=w.slice(),L=u===0?1:0,C=u===2?1:2,P=Math.cos(_),I=Math.sin(_);return E[L]=w[L]*P-w[C]*I,E[C]=w[C]*P+w[L]*I,E}function p(w){return[Math.atan2(2*(w[0]*w[1]+w[2]*w[3]),1-2*(w[1]*w[1]+w[2]*w[2]))*x,Math.asin(Math.max(-1,Math.min(1,2*(w[0]*w[2]-w[3]*w[1]))))*x,Math.atan2(2*(w[0]*w[3]+w[1]*w[2]),1-2*(w[2]*w[2]+w[3]*w[3]))*x]}function m(w,u){for(var S=0,_=0,E=w.length;_<E;++_)S+=w[_]*u[_];return S}$.exports=function(w,u){var S=w.projection;return(u._isScoped?r:u._isClipped?a:n)(w,S)}},27659:function($,R,e){var A=e(73972),k=e(85555).SUBPLOT_PATTERN;R.AU=function(l,T,x){var d=A.subplotsRegistry[T];if(!d)return[];for(var s=d.attr,t=[],o=0;o<l.length;o++){var r=l[o];r[0].trace[s]===x&&t.push(r)}return t},R.a0=function(l,T){var x,d=[],s=[];if(!(x=typeof T=="string"?A.getModule(T).plot:typeof T=="function"?T:T.plot))return[d,l];for(var t=0;t<l.length;t++){var o=l[t],r=o[0].trace;r.visible===!0&&r._length!==0&&(r._module.plot===x?d.push(o):s.push(o))}return[d,s]},R.NG=function(l,T,x){if(!A.subplotsRegistry[T])return[];var d,s,t,o=A.subplotsRegistry[T].attr,r=[];if(T==="gl2d"){var n=x.match(k);s="x"+n[1],t="y"+n[2]}for(var a=0;a<l.length;a++)d=l[a],T==="gl2d"&&A.traceIs(d,"gl2d")?d[o[0]]===s&&d[o[1]]===t&&r.push(d):d[o]===x&&r.push(d);return r}},75071:function($,R,e){var A=e(16825),k=e(1195),l=e(48956),T=e(85555),x=e(38520);function d(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}$.exports=function(s){var t=s.mouseContainer,o=s.glplot,r=new d(t,o);function n(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function a(i,c,h){var f,b,v=s.calcDataBox(),g=o.viewBox,y=r.lastPos[0],p=r.lastPos[1],m=T.MINDRAG*o.pixelRatio,w=T.MINZOOM*o.pixelRatio;function u(P,I,U){var z=Math.min(I,U),H=Math.max(I,U);z!==H?(v[P]=z,v[P+2]=H,r.dataBox=v,s.setRanges(v)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(c*=o.pixelRatio,h*=o.pixelRatio,h=g[3]-g[1]-h,s.fullLayout.dragmode){case"zoom":if(i){var S=c/(g[2]-g[0])*(v[2]-v[0])+v[0],_=h/(g[3]-g[1])*(v[3]-v[1])+v[1];r.boxInited||(r.boxStart[0]=S,r.boxStart[1]=_,r.dragStart[0]=c,r.dragStart[1]=h),r.boxEnd[0]=S,r.boxEnd[1]=_,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-c)<w,L=Math.abs(r.dragStart[1]-h)<w;if(!function(){for(var P=s.graphDiv._fullLayout._axisConstraintGroups,I=s.xaxis._id,U=s.yaxis._id,z=0;z<P.length;z++)if(P[z][I]!==-1){if(P[z][U]!==-1)return!0;break}return!1}()||E&&L)E&&(r.boxEnd[0]=r.boxStart[0]),L&&(r.boxEnd[1]=r.boxStart[1]);else{f=r.boxEnd[0]-r.boxStart[0],b=r.boxEnd[1]-r.boxStart[1];var C=(v[3]-v[1])/(v[2]-v[0]);Math.abs(f*C)>Math.abs(b)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(f)*C*(b>=0?1:-1),r.boxEnd[1]<v[1]?(r.boxEnd[1]=v[1],r.boxEnd[0]=r.boxStart[0]+(v[1]-r.boxStart[1])/Math.abs(C)):r.boxEnd[1]>v[3]&&(r.boxEnd[1]=v[3],r.boxEnd[0]=r.boxStart[0]+(v[3]-r.boxStart[1])/Math.abs(C))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(b)/C*(f>=0?1:-1),r.boxEnd[0]<v[0]?(r.boxEnd[0]=v[0],r.boxEnd[1]=r.boxStart[1]+(v[0]-r.boxStart[0])*Math.abs(C)):r.boxEnd[0]>v[2]&&(r.boxEnd[0]=v[2],r.boxEnd[1]=r.boxStart[1]+(v[2]-r.boxStart[0])*Math.abs(C)))}}else r.boxEnabled?(f=r.boxStart[0]!==r.boxEnd[0],b=r.boxStart[1]!==r.boxEnd[1],f||b?(f&&(u(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),b&&(u(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,i?(r.panning||(r.dragStart[0]=c,r.dragStart[1]=h),Math.abs(r.dragStart[0]-c)<m&&(c=r.dragStart[0]),Math.abs(r.dragStart[1]-h)<m&&(h=r.dragStart[1]),f=(y-c)*(v[2]-v[0])/(o.viewBox[2]-o.viewBox[0]),b=(p-h)*(v[3]-v[1])/(o.viewBox[3]-o.viewBox[1]),v[0]+=f,v[2]+=f,v[1]+=b,v[3]+=b,s.setRanges(v),r.panning=!0,r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=c,r.lastPos[1]=h}return r.mouseListener=A(t,a),t.addEventListener("touchstart",function(i){var c=l(i.changedTouches[0],t);a(0,c[0],c[1]),a(1,c[0],c[1]),i.preventDefault()},!!x&&{passive:!1}),t.addEventListener("touchmove",function(i){i.preventDefault();var c=l(i.changedTouches[0],t);a(1,c[0],c[1]),i.preventDefault()},!!x&&{passive:!1}),t.addEventListener("touchend",function(i){a(0,r.lastPos[0],r.lastPos[1]),i.preventDefault()},!!x&&{passive:!1}),r.wheelListener=k(t,function(i,c){if(!s.scrollZoom)return!1;var h=s.calcDataBox(),f=o.viewBox,b=r.lastPos[0],v=r.lastPos[1],g=Math.exp(5*c/(f[3]-f[1])),y=b/(f[2]-f[0])*(h[2]-h[0])+h[0],p=v/(f[3]-f[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-y)*g+y,h[2]=(h[2]-y)*g+y,h[1]=(h[1]-p)*g+p,h[3]=(h[3]-p)*g+p,s.setRanges(h),r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},82961:function($,R,e){var A=e(89298),k=e(78614);function l(d){this.scene=d,this.gl=d.gl,this.pixelRatio=d.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=l.prototype,x=["xaxis","yaxis"];T.merge=function(d){var s,t,o,r,n,a,i,c,h,f,b;for(this.titleEnable=!1,this.backgroundColor=k(d.plot_bgcolor),f=0;f<2;++f){var v=(s=x[f]).charAt(0);for(o=(t=d[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[v]?"":t.title.text,b=0;b<=2;b+=2)this.labelEnable[f+b]=!1,this.labels[f+b]=o,this.labelColor[f+b]=k(t.title.font.color),this.labelFont[f+b]=t.title.font.family,this.labelSize[f+b]=t.title.font.size,this.labelPad[f+b]=this.getLabelPad(s,t),this.tickEnable[f+b]=!1,this.tickColor[f+b]=k((t.tickfont||{}).color),this.tickAngle[f+b]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[f+b]=this.getTickPad(t),this.tickMarkLength[f+b]=0,this.tickMarkWidth[f+b]=t.tickwidth||0,this.tickMarkColor[f+b]=k(t.tickcolor),this.borderLineEnable[f+b]=!1,this.borderLineColor[f+b]=k(t.linecolor),this.borderLineWidth[f+b]=t.linewidth||0;i=this.hasSharedAxis(t),n=this.hasAxisInDfltPos(s,t)&&!i,a=this.hasAxisInAltrPos(s,t)&&!i,r=t.mirror||!1,c=i?String(r).indexOf("all")!==-1:!!r,h=i?r==="allticks":String(r).indexOf("ticks")!==-1,n?this.labelEnable[f]=!0:a&&(this.labelEnable[f+2]=!0),n?this.tickEnable[f]=t.showticklabels:a&&(this.tickEnable[f+2]=t.showticklabels),(n||c)&&(this.borderLineEnable[f]=t.showline),(a||c)&&(this.borderLineEnable[f+2]=t.showline),(n||h)&&(this.tickMarkLength[f]=this.getTickMarkLength(t)),(a||h)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(t)),this.gridLineEnable[f]=t.showgrid,this.gridLineColor[f]=k(t.gridcolor),this.gridLineWidth[f]=t.gridwidth,this.zeroLineEnable[f]=t.zeroline,this.zeroLineColor[f]=k(t.zerolinecolor),this.zeroLineWidth[f]=t.zerolinewidth}},T.hasSharedAxis=function(d){var s=this.scene,t=s.fullLayout._subplots.gl2d;return A.findSubplotsWithAxis(t,d).indexOf(s.id)!==0},T.hasAxisInDfltPos=function(d,s){var t=s.side;return d==="xaxis"?t==="bottom":d==="yaxis"?t==="left":void 0},T.hasAxisInAltrPos=function(d,s){var t=s.side;return d==="xaxis"?t==="top":d==="yaxis"?t==="right":void 0},T.getLabelPad=function(d,s){var t=1.5,o=s.title.font.size,r=s.showticklabels;return d==="xaxis"?s.side==="top"?o*(t+(r?1:0))-10:o*(t+(r?.5:0))-10:d==="yaxis"?s.side==="right"?10+o*(t+(r?1:.5)):10+o*(t+(r?.5:0)):void 0},T.getTickPad=function(d){return d.ticks==="outside"?10+d.ticklen:15},T.getTickMarkLength=function(d){if(!d.ticks)return 0;var s=d.ticklen;return d.ticks==="inside"?-s:s},$.exports=function(d){return new l(d)}},4796:function($,R,e){var A=e(30962).overrideAll,k=e(92918),l=e(10820),T=e(77922),x=e(85555),d=e(93612),s=e(528),t=e(27659).NG;R.name="gl2d",R.attr=["xaxis","yaxis"],R.idRoot=["x","y"],R.idRegex=x.idRegex,R.attrRegex=x.attrRegex,R.attributes=e(89502),R.supplyLayoutDefaults=function(o,r,n){r._has("cartesian")||d.supplyLayoutDefaults(o,r,n)},R.layoutAttrOverrides=A(d.layoutAttributes,"plot","from-root"),R.baseLayoutAttrOverrides=A({plot_bgcolor:l.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),R.plot=function(o){for(var r=o._fullLayout,n=o._fullData,a=r._subplots.gl2d,i=0;i<a.length;i++){var c=a[i],h=r._plots[c],f=t(n,"gl2d",c),b=h._scene2d;b===void 0&&(b=new k({id:c,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio},r),h._scene2d=b),b.plot(f,o.calcdata,r,o.layout)}},R.clean=function(o,r,n,a){for(var i=a._subplots.gl2d||[],c=0;c<i.length;c++){var h=i[c],f=a._plots[h];if(f._scene2d){var b=t(o,"gl2d",h);b.length===0&&(f._scene2d.destroy(),delete a._plots[h])}}d.clean.apply(this,arguments)},R.drawFramework=function(o){o._context.staticPlot||d.drawFramework(o)},R.toSVG=function(o){for(var r=o._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++){var i=r._plots[n[a]]._scene2d,c=i.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),i.destroy()}},R.updateFx=function(o){for(var r=o._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++)r._plots[n[a]]._scene2d.updateFx(r.dragmode)}},92918:function($,R,e){var A,k,l=e(73972),T=e(89298),x=e(30211),d=e(9330).gl_plot2d,s=e(9330).gl_spikes2d,t=e(9330).gl_select_box,o=e(40372),r=e(82961),n=e(75071),a=e(58617),i=e(99082),c=i.enforce,h=i.clean,f=e(71739).doAutoRange,b=e(64505),v=b.drawMode,g=b.selectMode,y=["xaxis","yaxis"],p=e(85555).SUBPLOT_PATTERN;function m(u,S){this.container=u.container,this.graphDiv=u.graphDiv,this.pixelRatio=u.plotGlPixelRatio||window.devicePixelRatio,this.id=u.id,this.staticPlot=!!u.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(S),this.glplot=d(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}$.exports=m;var w=m.prototype;w.makeFramework=function(){if(this.staticPlot){if(!(k||(A=document.createElement("canvas"),k=o({canvas:A,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=A,this.gl=k}else{var u=this.container.querySelector(".gl-canvas-focus"),S=o({canvas:u,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return a(this),void(this.stopped=!0);this.canvas=u,this.gl=S}var _=this.canvas;_.style.width="100%",_.style.height="100%",_.style.position="absolute",_.style.top="0px",_.style.left="0px",_.style["pointer-events"]="none",this.updateSize(_);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(L);var P=this;L.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),L.addEventListener("mouseover",function(){P.isMouseOver=!0})},w.toImage=function(u){u||(u="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(A),this.updateSize(this.canvas);var S=this.glplot.gl,_=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var L=new Uint8Array(_*E*4);S.readPixels(0,0,_,E,S.RGBA,S.UNSIGNED_BYTE,L);for(var C=0,P=E-1;C<P;++C,--P)for(var I=0;I<_;++I)for(var U=0;U<4;++U){var z=L[4*(_*C+I)+U];L[4*(_*C+I)+U]=L[4*(_*P+I)+U],L[4*(_*P+I)+U]=z}var H=document.createElement("canvas");H.width=_,H.height=E;var F,N=H.getContext("2d",{willReadFrequently:!0}),B=N.createImageData(_,E);switch(B.data.set(L),N.putImageData(B,0,0),u){case"jpeg":F=H.toDataURL("image/jpeg");break;case"webp":F=H.toDataURL("image/webp");break;default:F=H.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(A),F},w.updateSize=function(u){u||(u=this.canvas);var S=this.pixelRatio,_=this.fullLayout,E=_.width,L=_.height,C=0|Math.ceil(S*E),P=0|Math.ceil(S*L);return u.width===C&&u.height===P||(u.width=C,u.height=P),u},w.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var u=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var _=0;_<u[S].length;++_)u[S][_].text=u[S][_].text+"";return u},w.updateRefs=function(u){this.fullLayout=u;var S=this.id.match(p),_="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[_],this.yaxis=this.fullLayout[E]},w.relayoutCallback=function(){var u=this.graphDiv,S=this.xaxis,_=this.yaxis,E=u.layout,L={},C=L[S._name+".range"]=S.range.slice(),P=L[_._name+".range"]=_.range.slice();L[S._name+".autorange"]=S.autorange,L[_._name+".autorange"]=_.autorange,l.call("_storeDirectGUIEdit",u.layout,u._fullLayout._preGUI,L);var I=E[S._name];I.range=C,I.autorange=S.autorange;var U=E[_._name];U.range=P,U.autorange=_.autorange,L.lastInputTime=this.camera.lastInputTime,u.emit("plotly_relayout",L)},w.cameraChanged=function(){var u=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(_,E){for(var L=0;L<2;++L){var C=_[L],P=E[L];if(C.length!==P.length)return!0;for(var I=0;I<C.length;++I)if(C[I].x!==P[I].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=u.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},w.handleAnnotations=function(){for(var u=this.graphDiv,S=this.fullLayout.annotations,_=0;_<S.length;_++){var E=S[_];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&l.getComponentMethod("annotations","drawOne")(u,_)}},w.destroy=function(){if(this.glplot){var u=this.traces;u&&Object.keys(u).map(function(S){u[S].dispose(),delete u[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},w.plot=function(u,S,_){var E=this.glplot;this.updateRefs(_),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(u,S),this.updateFx(_.dragmode);var L=_.width,C=_.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(_),P.screenBox=[0,0,L,C];var I={_fullLayout:{_axisConstraintGroups:_._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:_._size}};h(I,this.xaxis),h(I,this.yaxis);var U,z,H=_._size,F=this.xaxis.domain,N=this.yaxis.domain;for(P.viewBox=[H.l+F[0]*H.w,H.b+N[0]*H.h,L-H.r-(1-F[1])*H.w,C-H.t-(1-N[1])*H.h],this.mouseContainer.style.width=H.w*(F[1]-F[0])+"px",this.mouseContainer.style.height=H.h*(N[1]-N[0])+"px",this.mouseContainer.height=H.h*(N[1]-N[0]),this.mouseContainer.style.left=H.l+F[0]*H.w+"px",this.mouseContainer.style.top=H.t+(1-N[1])*H.h+"px",z=0;z<2;++z)(U=this[y[z]])._length=P.viewBox[z+2]-P.viewBox[z],f(this.graphDiv,U),U.setScale();c(I),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(_),E.update(P),this.glplot.draw()},w.calcDataBox=function(){var u=this.xaxis,S=this.yaxis,_=u.range,E=S.range,L=u.r2l,C=S.r2l;return[L(_[0]),C(E[0]),L(_[1]),C(E[1])]},w.setRanges=function(u){var S=this.xaxis,_=this.yaxis,E=S.l2r,L=_.l2r;S.range=[E(u[0]),E(u[2])],_.range=[L(u[1]),L(u[3])]},w.updateTraces=function(u,S){var _,E,L,C=Object.keys(this.traces);this.fullData=u;e:for(_=0;_<C.length;_++){var P=C[_],I=this.traces[P];for(E=0;E<u.length;E++)if((L=u[E]).uid===P&&L.type===I.type)continue e;I.dispose(),delete this.traces[P]}for(_=0;_<u.length;_++){L=u[_];var U=S[_],z=this.traces[L.uid];z?z.update(L,U):(z=L._module.plot(this,L,U),this.traces[L.uid]=z)}this.glplot.objects.sort(function(H,F){return H._trace.index-F._trace.index})},w.updateFx=function(u){g(u)||v(u)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=u==="pan"?"move":u==="zoom"?"crosshair":null},w.emitPointAction=function(u,S){for(var _,E=u.trace.uid,L=u.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(_=this.fullData[C]);var P={x:u.traceCoord[0],y:u.traceCoord[1],curveNumber:_.index,pointNumber:L,data:_._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};x.appendArrayPointValue(P,_,L),this.graphDiv.emit(S,{points:[P]})},w.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var u=this.glplot,S=this.camera,_=S.mouseListener,E=this.lastButtonState===1&&_.buttons===0,L=this.fullLayout;this.lastButtonState=_.buttons,this.cameraChanged();var C,P=_.x*u.pixelRatio,I=this.canvas.height-u.pixelRatio*_.y;if(S.boxEnabled&&L.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],z=0;z<2;z++)S.boxStart[z]===S.boxEnd[z]&&(U[z]=u.dataBox[z],U[z+2]=u.dataBox[z+2]);u.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var H=L._size,F=this.xaxis.domain,N=this.yaxis.domain,B=(C=u.pick(P/u.pixelRatio+H.l+F[0]*H.w,I/u.pixelRatio-(H.t+(1-N[1])*H.h)))&&C.object._trace.handlePick(C);if(B&&E&&this.emitPointAction(B,"plotly_click"),C&&C.object._trace.hoverinfo!=="skip"&&L.hovermode&&B&&(!this.lastPickResult||this.lastPickResult.traceUid!==B.trace.uid||this.lastPickResult.dataCoord[0]!==B.dataCoord[0]||this.lastPickResult.dataCoord[1]!==B.dataCoord[1])){var j=B;this.lastPickResult={traceUid:B.trace?B.trace.uid:null,dataCoord:B.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),j.screenCoord=[((u.viewBox[2]-u.viewBox[0])*(C.dataCoord[0]-u.dataBox[0])/(u.dataBox[2]-u.dataBox[0])+u.viewBox[0])/u.pixelRatio,(this.canvas.height-(u.viewBox[3]-u.viewBox[1])*(C.dataCoord[1]-u.dataBox[1])/(u.dataBox[3]-u.dataBox[1])-u.viewBox[1])/u.pixelRatio],this.emitPointAction(B,"plotly_hover");var K=this.fullData[j.trace.index]||{},G=j.pointIndex,V=x.castHoverinfo(K,L,G);if(V&&V!=="all"){var W=V.split("+");W.indexOf("x")===-1&&(j.traceCoord[0]=void 0),W.indexOf("y")===-1&&(j.traceCoord[1]=void 0),W.indexOf("z")===-1&&(j.traceCoord[2]=void 0),W.indexOf("text")===-1&&(j.textLabel=void 0),W.indexOf("name")===-1&&(j.name=void 0)}x.loneHover({x:j.screenCoord[0],y:j.screenCoord[1],xLabel:this.hoverFormatter("xaxis",j.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",j.traceCoord[1]),zLabel:j.traceCoord[2],text:j.textLabel,name:j.name,color:x.castHoverOption(K,G,"bgcolor")||j.color,borderColor:x.castHoverOption(K,G,"bordercolor"),fontFamily:x.castHoverOption(K,G,"font.family"),fontSize:x.castHoverOption(K,G,"font.size"),fontColor:x.castHoverOption(K,G,"font.color"),nameLength:x.castHoverOption(K,G,"namelength"),textAlign:x.castHoverOption(K,G,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),u.draw()}},w.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),x.loneUnhover(this.svgContainer))},w.hoverFormatter=function(u,S){if(S!==void 0){var _=this[u];return T.tickText(_,_.c2l(S),"hover").text}}},58547:function($,R,e){var A=e(30962).overrideAll,k=e(528),l=e(33539),T=e(27659).NG,x=e(71828),d=e(77922),s="gl3d",t="scene";R.name=s,R.attr=t,R.idRoot=t,R.idRegex=R.attrRegex=x.counterRegex("scene"),R.attributes=e(59084),R.layoutAttributes=e(65500),R.baseLayoutAttrOverrides=A({hoverlabel:k.hoverlabel},"plot","nested"),R.supplyLayoutDefaults=e(24682),R.plot=function(o){for(var r=o._fullLayout,n=o._fullData,a=r._subplots.gl3d,i=0;i<a.length;i++){var c=a[i],h=T(n,s,c),f=r[c],b=f.camera,v=f._scene;v||(v=new l({id:c,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio,camera:b},r),f._scene=v),v.viewInitial||(v.viewInitial={up:{x:b.up.x,y:b.up.y,z:b.up.z},eye:{x:b.eye.x,y:b.eye.y,z:b.eye.z},center:{x:b.center.x,y:b.center.y,z:b.center.z}}),v.plot(h,r,o.layout)}},R.clean=function(o,r,n,a){for(var i=a._subplots.gl3d||[],c=0;c<i.length;c++){var h=i[c];!r[h]&&a[h]._scene&&(a[h]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+h).remove())}},R.toSVG=function(o){for(var r=o._fullLayout,n=r._subplots.gl3d,a=r._size,i=0;i<n.length;i++){var c=r[n[i]],h=c.domain,f=c._scene,b=f.toImage("png");r._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":b,x:a.l+a.w*h.x[0],y:a.t+a.h*(1-h.y[1]),width:a.w*(h.x[1]-h.x[0]),height:a.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),f.destroy()}},R.cleanId=function(o){if(o.match(/^scene[0-9]*$/)){var r=o.substr(5);return r==="1"&&(r=""),t+r}},R.updateFx=function(o){for(var r=o._fullLayout,n=r._subplots.gl3d,a=0;a<n.length;a++)r[n[a]]._scene.updateFx(r.dragmode,r.hovermode)}},59084:function($){$.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function($,R,e){var A=e(7901),k=e(13838),l=e(1426).extendFlat,T=e(30962).overrideAll;$.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:A.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:l({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,rangemode:k.rangemode,range:l({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:l({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},3277:function($,R,e){var A=e(84267).mix,k=e(71828),l=e(44467),T=e(77894),x=e(951),d=e(71453),s=["xaxis","yaxis","zaxis"];$.exports=function(t,o,r){var n,a;function i(f,b){return k.coerce(n,a,T,f,b)}for(var c=0;c<s.length;c++){var h=s[c];n=t[h]||{},(a=l.newContainer(o,h))._id=h[0]+r.scene,a._name=h,x(n,a,i,r),d(n,a,i,{font:r.font,letter:h[0],data:r.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),i("gridcolor",A(a.color,r.bgColor,72.72727272727273).toRgbString()),i("title.text",h[0]),a.setScale=k.noop,i("showspikes")&&(i("spikesides"),i("spikethickness"),i("spikecolor",a.color)),i("showaxeslabels"),i("showbackground")&&i("backgroundcolor")}}},30422:function($,R,e){var A=e(78614),k=e(71828),l=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(x,d){for(var s=this,t=0;t<3;++t){var o=d[l[t]];o.visible?(s.labels[t]=x._meta?k.templateString(o.title.text,x._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(s.labelColor[t]=A(o.title.font.color)),o.title.font.family&&(s.labelFont[t]=o.title.font.family),o.title.font.size&&(s.labelSize[t]=o.title.font.size)),"showline"in o&&(s.lineEnable[t]=o.showline),"linecolor"in o&&(s.lineColor[t]=A(o.linecolor)),"linewidth"in o&&(s.lineWidth[t]=o.linewidth),"showgrid"in o&&(s.gridEnable[t]=o.showgrid),"gridcolor"in o&&(s.gridColor[t]=A(o.gridcolor)),"gridwidth"in o&&(s.gridWidth[t]=o.gridwidth),o.type==="log"?s.zeroEnable[t]=!1:"zeroline"in o&&(s.zeroEnable[t]=o.zeroline),"zerolinecolor"in o&&(s.zeroLineColor[t]=A(o.zerolinecolor)),"zerolinewidth"in o&&(s.zeroLineWidth[t]=o.zerolinewidth),"ticks"in o&&o.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in o&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=o.ticklen),"tickcolor"in o&&(s.lineTickColor[t]=A(o.tickcolor)),"tickwidth"in o&&(s.lineTickWidth[t]=o.tickwidth),"tickangle"in o&&(s.tickAngle[t]=o.tickangle==="auto"?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(s.tickEnable[t]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(s.tickColor[t]=A(o.tickfont.color)),o.tickfont.family&&(s.tickFont[t]=o.tickfont.family),o.tickfont.size&&(s.tickSize[t]=o.tickfont.size)),"mirror"in o?["ticks","all","allticks"].indexOf(o.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):o.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in o&&o.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=A(o.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},$.exports=function(x,d){var s=new T;return s.merge(x,d),s}},24682:function($,R,e){var A=e(71828),k=e(7901),l=e(73972),T=e(49119),x=e(3277),d=e(65500),s=e(27659).NG,t="gl3d";function o(r,n,a,i){for(var c=a("bgcolor"),h=k.combine(c,i.paper_bgcolor),f=["up","center","eye"],b=0;b<f.length;b++)a("camera."+f[b]+".x"),a("camera."+f[b]+".y"),a("camera."+f[b]+".z");a("camera.projection.type");var v=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),g=a("aspectmode",v?"manual":"auto");v||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},g==="manual"&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var y=s(i.fullData,t,i.id);x(r,n,{font:i.font,scene:i.id,data:y,bgColor:h,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),l.getComponentMethod("annotations3d","handleDefaults")(r,n,i);var p=i.getDfltFromLayout("dragmode");if(p!==!1&&!p)if(p="orbit",r.camera&&r.camera.up){var m=r.camera.up.x,w=r.camera.up.y,u=r.camera.up.z;u!==0&&(m&&w&&u?u/Math.sqrt(m*m+w*w+u*u)>.999&&(p="turntable"):p="turntable")}else p="turntable";a("dragmode",p),a("hovermode",i.getDfltFromLayout("hovermode"))}$.exports=function(r,n,a){var i=n._basePlotModules.length>1;T(r,n,a,{type:t,attributes:d,handleDefaults:o,fullLayout:n,font:n.font,fullData:a,getDfltFromLayout:function(c){if(!i)return A.validate(r[c],d[c])?r[c]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},65500:function($,R,e){var A=e(77894),k=e(27670).Y,l=e(1426).extendFlat,T=e(71828).counterRegex;function x(d,s,t){return{x:{valType:"number",dflt:d,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}$.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:l(x(0,0,1),{}),center:l(x(0,0,0),{}),eye:l(x(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:A,yaxis:A,zaxis:A,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function($,R,e){var A=e(78614),k=["xaxis","yaxis","zaxis"];function l(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}l.prototype.merge=function(T){for(var x=0;x<3;++x){var d=T[k[x]];d.visible?(this.enabled[x]=d.showspikes,this.colors[x]=A(d.spikecolor),this.drawSides[x]=d.spikesides,this.lineWidth[x]=d.spikethickness):(this.enabled[x]=!1,this.drawSides[x]=!1)}},$.exports=function(T){var x=new l;return x.merge(T),x}},96085:function($,R,e){$.exports=function(x){for(var d=x.axesOptions,s=x.glplot.axesPixels,t=x.fullSceneLayout,o=[[],[],[]],r=0;r<3;++r){var n=t[l[r]];if(n._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/x.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))o[r]=[];else{n._input_range=n.range.slice(),n.range[0]=s[r].lo/x.dataScale[r],n.range[1]=s[r].hi/x.dataScale[r],n._m=1/(x.dataScale[r]*s[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var a=n.tickmode;if(n.tickmode==="auto"){n.tickmode="linear";var i=n.nticks||k.constrain(n._length/40,4,9);A.autoTicks(n,Math.abs(n.range[1]-n.range[0])/i)}for(var c=A.calcTicks(n,{msUTC:!0}),h=0;h<c.length;++h)c[h].x=c[h].x*x.dataScale[r],n.type==="date"&&(c[h].text=c[h].text.replace(/\<br\>/g," "));o[r]=c,n.tickmode=a}}for(d.ticks=o,r=0;r<3;++r)for(T[r]=.5*(x.glplot.bounds[0][r]+x.glplot.bounds[1][r]),h=0;h<2;++h)d.bounds[h][r]=x.glplot.bounds[h][r];x.contourLevels=function(f){for(var b=new Array(3),v=0;v<3;++v){for(var g=f[v],y=new Array(g.length),p=0;p<g.length;++p)y[p]=g[p].x;b[v]=y}return b}(o)};var A=e(89298),k=e(71828),l=["xaxis","yaxis","zaxis"],T=[0,0,0]},63538:function($){function R(e,A){var k,l,T=[0,0,0,0];for(k=0;k<4;++k)for(l=0;l<4;++l)T[l]+=e[4*k+l]*A[k];return T}$.exports=function(e,A){return R(e.projection,R(e.view,R(e.model,[A[0],A[1],A[2],1])))}},33539:function($,R,e){var A,k,l=e(9330).gl_plot3d,T=l.createCamera,x=l.createScene,d=e(40372),s=e(38520),t=e(73972),o=e(71828),r=o.preserveDrawingBuffer(),n=e(89298),a=e(30211),i=e(78614),c=e(58617),h=e(63538),f=e(30422),b=e(13133),v=e(96085);function g(u,S){var _=document.createElement("div"),E=u.container;this.graphDiv=u.graphDiv;var L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",L.style["z-index"]=20,L.style["pointer-events"]="none",_.appendChild(L),this.svgContainer=L,_.id=u.id,_.style.position="absolute",_.style.top=_.style.left="0px",_.style.width=_.style.height="100%",E.appendChild(_),this.fullLayout=S,this.id=u.id||"scene",this.fullSceneLayout=S[this.id],this.plotArgs=[[],{},{}],this.axesOptions=f(S,S[this.id]),this.spikeOptions=b(S[this.id]),this.container=_,this.staticMode=!!u.staticPlot,this.pixelRatio=this.pixelRatio||u.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=g.prototype;y.prepareOptions=function(){var u=this,S={canvas:u.canvas,gl:u.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:u.container,axes:u.axesOptions,spikes:u.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:u.camera,pixelRatio:u.pixelRatio};if(u.staticMode){if(!(k||(A=document.createElement("canvas"),k=d({canvas:A,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");S.gl=k,S.canvas=A}return S};var p=!0;y.tryCreatePlot=function(){var u=this,S=u.prepareOptions(),_=!0;try{u.glplot=x(S)}catch{if(u.staticMode||!p||r)_=!1;else{o.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=S.glOptions.preserveDrawingBuffer=!0,u.glplot=x(S)}catch{r=S.glOptions.preserveDrawingBuffer=!1,_=!1}}}return p=!1,_},y.initializeGLCamera=function(){var u=this,S=u.fullSceneLayout.camera,_=S.projection.type==="orthographic";u.camera=T(u.container,{center:[S.center.x,S.center.y,S.center.z],eye:[S.eye.x,S.eye.y,S.eye.z],up:[S.up.x,S.up.y,S.up.z],_ortho:_,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var u=this;if(u.initializeGLCamera(),!u.tryCreatePlot())return c(u);u.traces={},u.make4thDimension();var S=u.graphDiv,_=S.layout,E=function(){var C={};return u.isCameraChanged(_)&&(C[u.id+".camera"]=u.getCamera()),u.isAspectChanged(_)&&(C[u.id+".aspectratio"]=u.glplot.getAspectratio(),_[u.id].aspectmode!=="manual"&&(u.fullSceneLayout.aspectmode=_[u.id].aspectmode=C[u.id+".aspectmode"]="manual")),C},L=function(C){if(C.fullSceneLayout.dragmode!==!1){var P=E();C.saveLayout(_),C.graphDiv.emit("plotly_relayout",P)}};return u.glplot.canvas&&(u.glplot.canvas.addEventListener("mouseup",function(){L(u)}),u.glplot.canvas.addEventListener("wheel",function(C){if(S._context._scrollZoom.gl3d){if(u.camera._ortho){var P=C.deltaX>C.deltaY?1.1:.9090909090909091,I=u.glplot.getAspectratio();u.glplot.setAspectratio({x:P*I.x,y:P*I.y,z:P*I.z})}L(u)}},!!s&&{passive:!1}),u.glplot.canvas.addEventListener("mousemove",function(){if(u.fullSceneLayout.dragmode!==!1&&u.camera.mouseListener.buttons!==0){var C=E();u.graphDiv.emit("plotly_relayouting",C)}}),u.staticMode||u.glplot.canvas.addEventListener("webglcontextlost",function(C){S&&S.emit&&S.emit("plotly_webglcontextlost",{event:C,layer:u.id})},!1)),u.glplot.oncontextloss=function(){u.recoverContext()},u.glplot.onrender=function(){u.render()},!0},y.render=function(){var u,S=this,_=S.graphDiv,E=S.svgContainer,L=S.container.getBoundingClientRect();_._fullLayout._calcInverseTransform(_);var C=_._fullLayout._invScaleX,P=_._fullLayout._invScaleY,I=L.width*C,U=L.height*P;E.setAttributeNS(null,"viewBox","0 0 "+I+" "+U),E.setAttributeNS(null,"width",I),E.setAttributeNS(null,"height",U),v(S),S.glplot.axes.update(S.axesOptions);for(var z=Object.keys(S.traces),H=null,F=S.glplot.selection,N=0;N<z.length;++N)(u=S.traces[z[N]]).data.hoverinfo!=="skip"&&u.handlePick(F)&&(H=u),u.setContourLevels&&u.setContourLevels();function B(ye,ge,he){var ve=S.fullSceneLayout[ye+"axis"];return ve.type!=="log"&&(ge=ve.d2l(ge)),n.hoverLabelText(ve,ge,he)}if(H!==null){var j=h(S.glplot.cameraParams,F.dataCoordinate);u=H.data;var K,G=_._fullData[u.index],V=F.index,W={xLabel:B("x",F.traceCoordinate[0],u.xhoverformat),yLabel:B("y",F.traceCoordinate[1],u.yhoverformat),zLabel:B("z",F.traceCoordinate[2],u.zhoverformat)},J=a.castHoverinfo(G,S.fullLayout,V),X=(J||"").split("+"),ee=J&&J==="all";G.hovertemplate||ee||(X.indexOf("x")===-1&&(W.xLabel=void 0),X.indexOf("y")===-1&&(W.yLabel=void 0),X.indexOf("z")===-1&&(W.zLabel=void 0),X.indexOf("text")===-1&&(F.textLabel=void 0),X.indexOf("name")===-1&&(H.name=void 0));var re=[];u.type==="cone"||u.type==="streamtube"?(W.uLabel=B("x",F.traceCoordinate[3],u.uhoverformat),(ee||X.indexOf("u")!==-1)&&re.push("u: "+W.uLabel),W.vLabel=B("y",F.traceCoordinate[4],u.vhoverformat),(ee||X.indexOf("v")!==-1)&&re.push("v: "+W.vLabel),W.wLabel=B("z",F.traceCoordinate[5],u.whoverformat),(ee||X.indexOf("w")!==-1)&&re.push("w: "+W.wLabel),W.normLabel=F.traceCoordinate[6].toPrecision(3),(ee||X.indexOf("norm")!==-1)&&re.push("norm: "+W.normLabel),u.type==="streamtube"&&(W.divergenceLabel=F.traceCoordinate[7].toPrecision(3),(ee||X.indexOf("divergence")!==-1)&&re.push("divergence: "+W.divergenceLabel)),F.textLabel&&re.push(F.textLabel),K=re.join("<br>")):u.type==="isosurface"||u.type==="volume"?(W.valueLabel=n.hoverLabelText(S._mockAxis,S._mockAxis.d2l(F.traceCoordinate[3]),u.valuehoverformat),re.push("value: "+W.valueLabel),F.textLabel&&re.push(F.textLabel),K=re.join("<br>")):K=F.textLabel;var ie={x:F.traceCoordinate[0],y:F.traceCoordinate[1],z:F.traceCoordinate[2],data:G._input,fullData:G,curveNumber:G.index,pointNumber:V};a.appendArrayPointValue(ie,G,V),u._module.eventData&&(ie=G._module.eventData(ie,F,G,{},V));var se={points:[ie]};if(S.fullSceneLayout.hovermode){var fe=[];a.loneHover({trace:G,x:(.5+.5*j[0]/j[3])*I,y:(.5-.5*j[1]/j[3])*U,xLabel:W.xLabel,yLabel:W.yLabel,zLabel:W.zLabel,text:K,name:H.name,color:a.castHoverOption(G,V,"bgcolor")||H.color,borderColor:a.castHoverOption(G,V,"bordercolor"),fontFamily:a.castHoverOption(G,V,"font.family"),fontSize:a.castHoverOption(G,V,"font.size"),fontColor:a.castHoverOption(G,V,"font.color"),nameLength:a.castHoverOption(G,V,"namelength"),textAlign:a.castHoverOption(G,V,"align"),hovertemplate:o.castOption(G,V,"hovertemplate"),hovertemplateLabels:o.extendFlat({},ie,W),eventData:[ie]},{container:E,gd:_,inOut_bbox:fe}),ie.bbox=fe[0]}F.buttons&&F.distance<5?_.emit("plotly_click",se):_.emit("plotly_hover",se),this.oldEventData=se}else a.loneUnhover(E),this.oldEventData&&_.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;S.drawAnnotations(S)},y.recoverContext=function(){var u=this;u.glplot.dispose();var S=function(){u.glplot.gl.isContextLost()?requestAnimationFrame(S):u.initializeGLPlot()?u.plot.apply(u,u.plotArgs):o.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(S)};var m=["xaxis","yaxis","zaxis"];function w(u,S,_){for(var E=u.fullSceneLayout,L=0;L<3;L++){var C=m[L],P=C.charAt(0),I=E[C],U=S[P],z=S[P+"calendar"],H=S["_"+P+"length"];if(o.isArrayOrTypedArray(U))for(var F,N=0;N<(H||U.length);N++)if(o.isArrayOrTypedArray(U[N]))for(var B=0;B<U[N].length;++B)F=I.d2l(U[N][B],0,z),!isNaN(F)&&isFinite(F)&&(_[0][L]=Math.min(_[0][L],F),_[1][L]=Math.max(_[1][L],F));else F=I.d2l(U[N],0,z),!isNaN(F)&&isFinite(F)&&(_[0][L]=Math.min(_[0][L],F),_[1][L]=Math.max(_[1][L],F));else _[0][L]=Math.min(_[0][L],0),_[1][L]=Math.max(_[1][L],H-1)}}y.plot=function(u,S,_){var E=this;if(E.plotArgs=[u,S,_],!E.glplot.contextLost){var L,C,P,I,U,z,H=S[E.id],F=_[E.id];E.fullLayout=S,E.fullSceneLayout=H,E.axesOptions.merge(S,H),E.spikeOptions.merge(H),E.setViewport(H),E.updateFx(H.dragmode,H.hovermode),E.camera.enableWheel=E.graphDiv._context._scrollZoom.gl3d,E.glplot.setClearColor(i(H.bgcolor)),E.setConvert(U),u?Array.isArray(u)||(u=[u]):u=[];var N=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(P=0;P<u.length;++P)(L=u[P]).visible===!0&&L._length!==0&&w(this,L,N);(function(ce,me){for(var Me=ce.fullSceneLayout,Re=Me.annotations||[],Ce=0;Ce<3;Ce++)for(var ze=m[Ce],le=ze.charAt(0),de=Me[ze],be=0;be<Re.length;be++){var Fe=Re[be];if(Fe.visible){var Ve=de.r2l(Fe[le]);!isNaN(Ve)&&isFinite(Ve)&&(me[0][Ce]=Math.min(me[0][Ce],Ve),me[1][Ce]=Math.max(me[1][Ce],Ve))}}})(this,N);var B=[1,1,1];for(I=0;I<3;++I)N[1][I]===N[0][I]?B[I]=1:B[I]=1/(N[1][I]-N[0][I]);for(E.dataScale=B,E.convertAnnotations(this),P=0;P<u.length;++P)(L=u[P]).visible===!0&&L._length!==0&&((C=E.traces[L.uid])?C.data.type===L.type?C.update(L):(C.dispose(),C=L._module.plot(this,L),E.traces[L.uid]=C):(C=L._module.plot(this,L),E.traces[L.uid]=C),C.name=L.name);var j=Object.keys(E.traces);e:for(P=0;P<j.length;++P){for(I=0;I<u.length;++I)if(u[I].uid===j[P]&&u[I].visible===!0&&u[I]._length!==0)continue e;(C=E.traces[j[P]]).dispose(),delete E.traces[j[P]]}E.glplot.objects.sort(function(ce,me){return ce._trace.data.index-me._trace.data.index});var K,G=[[0,0,0],[0,0,0]],V=[],W={};for(P=0;P<3;++P){if((z=(U=H[m[P]]).type)in W?(W[z].acc*=B[P],W[z].count+=1):W[z]={acc:B[P],count:1},U.autorange){G[0][P]=1/0,G[1][P]=-1/0;var J=E.glplot.objects,X=E.fullSceneLayout.annotations||[],ee=U._name.charAt(0);for(I=0;I<J.length;I++){var re=J[I],ie=re.bounds,se=re._trace.data._pad||0;re.constructor.name==="ErrorBars"&&U._lowerLogErrorBound?G[0][P]=Math.min(G[0][P],U._lowerLogErrorBound):G[0][P]=Math.min(G[0][P],ie[0][P]/B[P]-se),G[1][P]=Math.max(G[1][P],ie[1][P]/B[P]+se)}for(I=0;I<X.length;I++){var fe=X[I];if(fe.visible){var ye=U.r2l(fe[ee]);G[0][P]=Math.min(G[0][P],ye),G[1][P]=Math.max(G[1][P],ye)}}if("rangemode"in U&&U.rangemode==="tozero"&&(G[0][P]=Math.min(G[0][P],0),G[1][P]=Math.max(G[1][P],0)),G[0][P]>G[1][P])G[0][P]=-1,G[1][P]=1;else{var ge=G[1][P]-G[0][P];G[0][P]-=ge/32,G[1][P]+=ge/32}if(U.autorange==="reversed"){var he=G[0][P];G[0][P]=G[1][P],G[1][P]=he}}else{var ve=U.range;G[0][P]=U.r2l(ve[0]),G[1][P]=U.r2l(ve[1])}G[0][P]===G[1][P]&&(G[0][P]-=1,G[1][P]+=1),V[P]=G[1][P]-G[0][P],E.glplot.setBounds(P,{min:G[0][P]*B[P],max:G[1][P]*B[P]})}var Ie=H.aspectmode;if(Ie==="cube")K=[1,1,1];else if(Ie==="manual"){var xe=H.aspectratio;K=[xe.x,xe.y,xe.z]}else{if(Ie!=="auto"&&Ie!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var Ae=[1,1,1];for(P=0;P<3;++P){var Se=W[z=(U=H[m[P]]).type];Ae[P]=Math.pow(Se.acc,1/Se.count)/B[P]}K=Ie==="data"||Math.max.apply(null,Ae)/Math.min.apply(null,Ae)<=4?Ae:[1,1,1]}H.aspectratio.x=F.aspectratio.x=K[0],H.aspectratio.y=F.aspectratio.y=K[1],H.aspectratio.z=F.aspectratio.z=K[2],E.glplot.setAspectratio(H.aspectratio),E.viewInitial.aspectratio||(E.viewInitial.aspectratio={x:H.aspectratio.x,y:H.aspectratio.y,z:H.aspectratio.z}),E.viewInitial.aspectmode||(E.viewInitial.aspectmode=H.aspectmode);var Te=H.domain||null,Q=S._size||null;if(Te&&Q){var oe=E.container.style;oe.position="absolute",oe.left=Q.l+Te.x[0]*Q.w+"px",oe.top=Q.t+(1-Te.y[1])*Q.h+"px",oe.width=Q.w*(Te.x[1]-Te.x[0])+"px",oe.height=Q.h*(Te.y[1]-Te.y[0])+"px"}E.glplot.redraw()}},y.destroy=function(){var u=this;u.glplot&&(u.camera.mouseListener.enabled=!1,u.container.removeEventListener("wheel",u.camera.wheelListener),u.camera=null,u.glplot.dispose(),u.container.parentNode.removeChild(u.container),u.glplot=null)},y.getCamera=function(){var u,S=this;return S.camera.view.recalcMatrix(S.camera.view.lastT()),{up:{x:(u=S.camera).up[0],y:u.up[1],z:u.up[2]},center:{x:u.center[0],y:u.center[1],z:u.center[2]},eye:{x:u.eye[0],y:u.eye[1],z:u.eye[2]},projection:{type:u._ortho===!0?"orthographic":"perspective"}}},y.setViewport=function(u){var S,_=this,E=u.camera;_.camera.lookAt.apply(this,[[(S=E).eye.x,S.eye.y,S.eye.z],[S.center.x,S.center.y,S.center.z],[S.up.x,S.up.y,S.up.z]]),_.glplot.setAspectratio(u.aspectratio),E.projection.type==="orthographic"!==_.camera._ortho&&(_.glplot.redraw(),_.glplot.clearRGBA(),_.glplot.dispose(),_.initializeGLPlot())},y.isCameraChanged=function(u){var S=this.getCamera(),_=o.nestedProperty(u,this.id+".camera").get();function E(I,U,z,H){var F=["up","center","eye"],N=["x","y","z"];return U[F[z]]&&I[F[z]][N[H]]===U[F[z]][N[H]]}var L=!1;if(_===void 0)L=!0;else{for(var C=0;C<3;C++)for(var P=0;P<3;P++)if(!E(S,_,C,P)){L=!0;break}(!_.projection||S.projection&&S.projection.type!==_.projection.type)&&(L=!0)}return L},y.isAspectChanged=function(u){var S=this.glplot.getAspectratio(),_=o.nestedProperty(u,this.id+".aspectratio").get();return _===void 0||_.x!==S.x||_.y!==S.y||_.z!==S.z},y.saveLayout=function(u){var S,_,E,L,C,P,I=this,U=I.fullLayout,z=I.isCameraChanged(u),H=I.isAspectChanged(u),F=z||H;if(F){var N={};z&&(S=I.getCamera(),E=(_=o.nestedProperty(u,I.id+".camera")).get(),N[I.id+".camera"]=E),H&&(L=I.glplot.getAspectratio(),P=(C=o.nestedProperty(u,I.id+".aspectratio")).get(),N[I.id+".aspectratio"]=P),t.call("_storeDirectGUIEdit",u,U._preGUI,N),z&&(_.set(S),o.nestedProperty(U,I.id+".camera").set(S)),H&&(C.set(L),o.nestedProperty(U,I.id+".aspectratio").set(L),I.glplot.redraw())}return F},y.updateFx=function(u,S){var _=this,E=_.camera;if(E)if(u==="orbit")E.mode="orbit",E.keyBindingMode="rotate";else if(u==="turntable"){E.up=[0,0,1],E.mode="turntable",E.keyBindingMode="rotate";var L=_.graphDiv,C=L._fullLayout,P=_.fullSceneLayout.camera,I=P.up.x,U=P.up.y,z=P.up.z;if(z/Math.sqrt(I*I+U*U+z*z)<.999){var H=_.id+".camera.up",F={x:0,y:0,z:1},N={};N[H]=F;var B=L.layout;t.call("_storeDirectGUIEdit",B,C._preGUI,N),P.up=F,o.nestedProperty(B,H).set(F)}}else E.keyBindingMode=u;_.fullSceneLayout.hovermode=S},y.toImage=function(u){var S=this;u||(u="png"),S.staticMode&&S.container.appendChild(A),S.glplot.redraw();var _=S.glplot.gl,E=_.drawingBufferWidth,L=_.drawingBufferHeight;_.bindFramebuffer(_.FRAMEBUFFER,null);var C=new Uint8Array(E*L*4);_.readPixels(0,0,E,L,_.RGBA,_.UNSIGNED_BYTE,C),function(H,F,N){for(var B=0,j=N-1;B<j;++B,--j)for(var K=0;K<F;++K)for(var G=0;G<4;++G){var V=4*(F*B+K)+G,W=4*(F*j+K)+G,J=H[V];H[V]=H[W],H[W]=J}}(C,E,L),function(H,F,N){for(var B=0;B<N;++B)for(var j=0;j<F;++j){var K=4*(F*B+j),G=H[K+3];if(G>0)for(var V=255/G,W=0;W<3;++W)H[K+W]=Math.min(V*H[K+W],255)}}(C,E,L);var P=document.createElement("canvas");P.width=E,P.height=L;var I,U=P.getContext("2d",{willReadFrequently:!0}),z=U.createImageData(E,L);switch(z.data.set(C),U.putImageData(z,0,0),u){case"jpeg":I=P.toDataURL("image/jpeg");break;case"webp":I=P.toDataURL("image/webp");break;default:I=P.toDataURL("image/png")}return S.staticMode&&S.container.removeChild(A),I},y.setConvert=function(){for(var u=0;u<3;u++){var S=this.fullSceneLayout[m[u]];n.setConvert(S,this.fullLayout),S.setScale=o.noop}},y.make4thDimension=function(){var u=this,S=u.graphDiv._fullLayout;u._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(u._mockAxis,S)},$.exports=g},90060:function($){$.exports=function(R,e,A,k){k=k||R.length;for(var l=new Array(k),T=0;T<k;T++)l[T]=[R[T],e[T],A[T]];return l}},10820:function($,R,e){var A=e(41940),k=e(85594),l=e(22399),T=e(29241),x=e(53777),d=e(35025),s=e(1426).extendFlat,t=A({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=l.defaultLine,$.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:A({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(d({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:l.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:l.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:l.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:x.newselection,activeselection:x.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:A({editType:"layoutstyle"})}}},77734:function($,R,e){var A=e(78607),k='© <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',l=['© <a target="_blank" href="https://carto.com/">Carto</a>',k].join(" "),T=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),x={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:k,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},d=A(x);$.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:x,styleValuesNonMapbox:d,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",d.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},13056:function($,R,e){var A=e(71828);$.exports=function(k,l){var T=k.split(" "),x=T[0],d=T[1],s=A.isArrayOrTypedArray(l)?A.mean(l):l,t=.5+s/100,o=1.5+s/100,r=["",""],n=[0,0];switch(x){case"top":r[0]="top",n[1]=-o;break;case"bottom":r[0]="bottom",n[1]=o}switch(d){case"left":r[1]="right",n[0]=-t;break;case"right":r[1]="left",n[0]=t}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},50101:function($,R,e){var A=e(44517),k=e(71828),l=k.strTranslate,T=k.strScale,x=e(27659).AU,d=e(77922),s=e(39898),t=e(91424),o=e(63893),r=e(10481),n="mapbox",a=R.constants=e(77734);function i(c){return typeof c=="string"&&(a.styleValuesMapbox.indexOf(c)!==-1||c.indexOf("mapbox://")===0)}R.name=n,R.attr="subplot",R.idRoot=n,R.idRegex=R.attrRegex=k.counterRegex(n),R.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},R.layoutAttributes=e(23585),R.supplyLayoutDefaults=e(77882),R.plot=function(c){var h=c._fullLayout,f=c.calcdata,b=h._subplots.mapbox;if(A.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var v=function(u,S){var _=u._fullLayout;if(u._context.mapboxAccessToken==="")return"";for(var E=[],L=[],C=!1,P=!1,I=0;I<S.length;I++){var U=_[S[I]],z=U.accesstoken;i(U.style)&&(z?k.pushUnique(E,z):(i(U._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),C=!0),P=!0)),z&&k.pushUnique(L,z)}if(P){var H=C?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw k.error(H),new Error(H)}return E.length?(E.length>1&&k.warn(a.multipleTokensErrorMsg),E[0]):(L.length&&k.log(["Listed mapbox access token(s)",L.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,b);A.accessToken=v;for(var g=0;g<b.length;g++){var y=b[g],p=x(f,n,y),m=h[y],w=m._subplot;w||(w=new r(c,y),h[y]._subplot=w),w.viewInitial||(w.viewInitial={center:k.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),w.plot(p,h,c._promises)}},R.clean=function(c,h,f,b){for(var v=b._subplots.mapbox||[],g=0;g<v.length;g++){var y=v[g];!h[y]&&b[y]._subplot&&b[y]._subplot.destroy()}},R.toSVG=function(c){for(var h=c._fullLayout,f=h._subplots.mapbox,b=h._size,v=0;v<f.length;v++){var g=h[f[v]],y=g.domain,p=g._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":p,x:b.l+b.w*y.x[0],y:b.t+b.h*(1-y.y[1]),width:b.w*(y.x[1]-y.x[0]),height:b.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var m=s.select(g._subplot.div);if(m.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var w=h._glimages.append("g");w.attr("transform",l(b.l+b.w*y.x[0]+10,b.t+b.h*(1-y.y[0])-31)),w.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),w.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),w.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),w.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var u=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=h._glimages.append("g"),_=S.append("text");_.text(u).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":u});var E=t.bBox(_.node()),L=b.w*(y.x[1]-y.x[0]);if(E.width>L/2){var C=u.split("|").join("<br>");_.text(C).attr("data-unformatted",C).call(o.convertToTspans,c),E=t.bBox(_.node())}_.attr("transform",l(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var P=1;E.width+6>L&&(P=L/(E.width+6));var I=[b.l+b.w*y.x[1],b.t+b.h*(1-y.y[0])];S.attr("transform",l(I[0],I[1])+T(P))}},R.updateFx=function(c){for(var h=c._fullLayout,f=h._subplots.mapbox,b=0;b<f.length;b++)h[f[b]]._subplot.updateFx(h)}},67911:function($,R,e){var A=e(71828),k=e(63893).sanitizeHTML,l=e(13056),T=e(77734);function x(o,r){this.subplot=o,this.uid=o.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var d=x.prototype;function s(o){if(!o.visible)return!1;var r=o.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if(typeof r[n]!="string"||r[n].length===0)return!1;return!0}return A.isPlainObject(r)||typeof r=="string"&&r.length>0}function t(o){var r={},n={};switch(o.type){case"circle":A.extendFlat(n,{"circle-radius":o.circle.radius,"circle-color":o.color,"circle-opacity":o.opacity});break;case"line":A.extendFlat(n,{"line-width":o.line.width,"line-color":o.color,"line-opacity":o.opacity,"line-dasharray":o.line.dash});break;case"fill":A.extendFlat(n,{"fill-color":o.color,"fill-outline-color":o.fill.outlinecolor,"fill-opacity":o.opacity});break;case"symbol":var a=o.symbol,i=l(a.textposition,a.iconsize);A.extendFlat(r,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":i.anchor,"text-offset":i.offset,"symbol-placement":a.placement}),A.extendFlat(n,{"icon-color":o.color,"text-color":a.textfont.color,"text-opacity":o.opacity});break;case"raster":A.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":o.opacity})}return{layout:r,paint:n}}d.update=function(o){this.visible?this.needsNewImage(o)?this.updateImage(o):this.needsNewSource(o)?(this.removeLayer(),this.updateSource(o),this.updateLayer(o)):this.needsNewLayer(o)?this.updateLayer(o):this.updateStyle(o):(this.updateSource(o),this.updateLayer(o)),this.visible=s(o)},d.needsNewImage=function(o){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&o.sourcetype==="image"&&(this.source!==o.source||JSON.stringify(this.coordinates)!==JSON.stringify(o.coordinates))},d.needsNewSource=function(o){return this.sourceType!==o.sourcetype||JSON.stringify(this.source)!==JSON.stringify(o.source)||this.layerType!==o.type},d.needsNewLayer=function(o){return this.layerType!==o.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},d.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},d.updateImage=function(o){this.subplot.map.getSource(this.idSource).updateImage({url:o.source,coordinates:o.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)},d.updateSource=function(o){var r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=o.sourcetype,this.source=o.source,s(o)){var n=function(a){var i,c=a.sourcetype,h=a.source,f={type:c};return c==="geojson"?i="data":c==="vector"?i=typeof h=="string"?"url":"tiles":c==="raster"?(i="tiles",f.tileSize=256):c==="image"&&(i="url",f.coordinates=a.coordinates),f[i]=h,a.sourceattribution&&(f.attribution=k(a.sourceattribution)),f}(o);r.addSource(this.idSource,n)}},d.findFollowingMapboxLayerId=function(o){if(o==="traces")for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var a=r[n].id;if(typeof a=="string"&&a.indexOf(T.traceLayerPrefix)===0){o=a;break}}return o},d.updateLayer=function(o){var r=this.subplot,n=t(o),a=this.lookupBelow(),i=this.findFollowingMapboxLayerId(a);this.removeLayer(),s(o)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":o.sourcelayer||"",type:o.type,minzoom:o.minzoom,maxzoom:o.maxzoom,layout:n.layout,paint:n.paint},i),this.layerType=o.type,this.below=a},d.updateStyle=function(o){if(s(o)){var r=t(o);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},d.removeLayer=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer)},d.dispose=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer),o.getSource(this.idSource)&&o.removeSource(this.idSource)},$.exports=function(o,r,n){var a=new x(o,r);return a.update(n),a}},23585:function($,R,e){var A=e(71828),k=e(7901).defaultLine,l=e(27670).Y,T=e(41940),x=e(82196).textposition,d=e(30962).overrideAll,s=e(44467).templatedArray,t=e(77734),o=T({});o.family.dflt="Open Sans Regular, Arial Unicode MS Regular",($.exports=d({_arrayAttrRegexps:[A.counterRegex("mapbox",".layers",!0)],domain:l({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:o,textposition:A.extendFlat({},x,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function($,R,e){var A=e(71828),k=e(49119),l=e(85501),T=e(23585);function x(s,t,o,r){o("accesstoken",r.accessToken),o("style"),o("center.lon"),o("center.lat"),o("zoom"),o("bearing"),o("pitch");var n=o("bounds.west"),a=o("bounds.east"),i=o("bounds.south"),c=o("bounds.north");n!==void 0&&a!==void 0&&i!==void 0&&c!==void 0||delete t.bounds,l(s,t,{name:"layers",handleItemDefaults:d}),t._input=s}function d(s,t){function o(c,h){return A.coerce(s,t,T.layers,c,h)}if(o("visible")){var r,n=o("sourcetype"),a=n==="raster"||n==="image";o("source"),o("sourceattribution"),n==="vector"&&o("sourcelayer"),n==="image"&&o("coordinates"),a&&(r="raster");var i=o("type",r);a&&i!=="raster"&&(i=t.type="raster",A.log("Source types *raster* and *image* must drawn *raster* layer type.")),o("below"),o("color"),o("opacity"),o("minzoom"),o("maxzoom"),i==="circle"&&o("circle.radius"),i==="line"&&(o("line.width"),o("line.dash")),i==="fill"&&o("fill.outlinecolor"),i==="symbol"&&(o("symbol.icon"),o("symbol.iconsize"),o("symbol.text"),A.coerceFont(o,"symbol.textfont"),o("symbol.textposition"),o("symbol.placement"))}}$.exports=function(s,t,o){k(s,t,o,{type:"mapbox",attributes:T,handleDefaults:x,partition:"y",accessToken:t._mapboxAccessToken})}},10481:function($,R,e){var A=e(44517),k=e(71828),l=e(41327),T=e(73972),x=e(89298),d=e(28569),s=e(30211),t=e(64505),o=t.drawMode,r=t.selectMode,n=e(47322).prepSelect,a=e(47322).clearOutline,i=e(47322).clearSelectionsCache,c=e(47322).selectOnClick,h=e(77734),f=e(67911);function b(w,u){this.id=u,this.gd=w;var S=w._fullLayout,_=w._context;this.container=S._glcontainer.node(),this.isStatic=_.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var v=b.prototype;v.plot=function(w,u,S){var _,E=this,L=u[E.id];E.map&&L.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),_=E.map?new Promise(function(C,P){E.updateMap(w,u,C,P)}):new Promise(function(C,P){E.createMap(w,u,C,P)}),S.push(_)},v.createMap=function(w,u,S,_){var E=this,L=u[E.id],C=E.styleObj=y(L.style);E.accessToken=L.accesstoken;var P=L.bounds,I=P?[[P.west,P.south],[P.east,P.north]]:null,U=E.map=new A.Map({container:E.div,style:C.style,center:m(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,maxBounds:I,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new A.AttributionControl({compact:!0}));U._canvas.style.left="0px",U._canvas.style.top="0px",E.rejectOnError(_),E.isStatic||E.initFx(w,u);var z=[];z.push(new Promise(function(H){U.once("load",H)})),z=z.concat(l.fetchTraceGeoData(w)),Promise.all(z).then(function(){E.fillBelowLookup(w,u),E.updateData(w),E.updateLayout(u),E.resolveOnRender(S)}).catch(_)},v.updateMap=function(w,u,S,_){var E=this,L=E.map,C=u[this.id];E.rejectOnError(_);var P=[],I=y(C.style);JSON.stringify(E.styleObj)!==JSON.stringify(I)&&(E.styleObj=I,L.setStyle(I.style),E.traceHash={},P.push(new Promise(function(U){L.once("styledata",U)}))),P=P.concat(l.fetchTraceGeoData(w)),Promise.all(P).then(function(){E.fillBelowLookup(w,u),E.updateData(w),E.updateLayout(u),E.resolveOnRender(S)}).catch(_)},v.fillBelowLookup=function(w,u){var S,_,E=u[this.id].layers,L=this.belowLookup={},C=!1;for(S=0;S<w.length;S++){var P=w[S][0].trace,I=P._module;typeof P.below=="string"?_=P.below:I.getBelow&&(_=I.getBelow(P,this)),_===""&&(C=!0),L["trace-"+P.uid]=_||""}for(S=0;S<E.length;S++){var U=E[S];_=typeof U.below=="string"?U.below:C?"traces":"",L["layout-"+S]=_}var z,H,F={};for(z in L)F[_=L[z]]?F[_].push(z):F[_]=[z];for(_ in F){var N=F[_];if(N.length>1)for(S=0;S<N.length;S++)(z=N[S]).indexOf("trace-")===0?(H=z.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):z.indexOf("layout-")===0&&(H=z.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function y(w){var u={};return k.isPlainObject(w)?(u.id=w.id,u.style=w):typeof w=="string"?(u.id=w,h.styleValuesMapbox.indexOf(w)!==-1?u.style=p(w):h.stylesNonMapbox[w]?u.style=h.stylesNonMapbox[w]:u.style=w):(u.id=h.styleValueDflt,u.style=p(h.styleValueDflt)),u.transition={duration:0,delay:0},u}function p(w){return h.styleUrlPrefix+w+"-"+h.styleUrlSuffix}function m(w){return[w.lon,w.lat]}v.updateData=function(w){var u,S,_,E,L=this.traceHash,C=w.slice().sort(function(H,F){return g[H[0].trace.type]-g[F[0].trace.type]});for(_=0;_<C.length;_++){var P=C[_],I=!1;(u=L[(S=P[0].trace).uid])&&(u.type===S.type?(u.update(P),I=!0):u.dispose()),!I&&S._module&&(L[S.uid]=S._module.plot(this,P))}var U=Object.keys(L);e:for(_=0;_<U.length;_++){var z=U[_];for(E=0;E<w.length;E++)if(z===(S=w[E][0].trace).uid)continue e;(u=L[z]).dispose(),delete L[z]}},v.updateLayout=function(w){var u=this.map,S=w[this.id];this.dragging||this.wheeling||(u.setCenter(m(S.center)),u.setZoom(S.zoom),u.setBearing(S.bearing),u.setPitch(S.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?u.scrollZoom.enable():u.scrollZoom.disable()},v.resolveOnRender=function(w){var u=this.map;u.on("render",function S(){u.loaded()&&(u.off("render",S),setTimeout(w,10))})},v.rejectOnError=function(w){var u=this.map;function S(){w(new Error(h.mapOnErrorMsg))}u.once("error",S),u.once("style.error",S),u.once("source.error",S),u.once("tile.error",S),u.once("layer.error",S)},v.createFramework=function(w){var u=this,S=u.div=document.createElement("div");S.id=u.uid,S.style.position="absolute",u.container.appendChild(S),u.xaxis={_id:"x",c2p:function(_){return u.project(_).x}},u.yaxis={_id:"y",c2p:function(_){return u.project(_).y}},u.updateFramework(w),u.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},x.setConvert(u.mockAxis,w)},v.initFx=function(w,u){var S=this,_=S.gd,E=S.map;function L(){s.loneUnhover(u._hoverlayer)}function C(){var P=S.getView();_.emit("plotly_relayouting",S.getViewEditsWithDerived(P))}E.on("moveend",function(P){if(S.map){var I=_._fullLayout;if(P.originalEvent||S.wheeling){var U=I[S.id];T.call("_storeDirectGUIEdit",_.layout,I._preGUI,S.getViewEdits(U));var z=S.getView();U._input.center=U.center=z.center,U._input.zoom=U.zoom=z.zoom,U._input.bearing=U.bearing=z.bearing,U._input.pitch=U.pitch=z.pitch,_.emit("plotly_relayout",S.getViewEditsWithDerived(z))}P.originalEvent&&P.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),I._rehover&&I._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(P){var I=S.div.getBoundingClientRect(),U=[P.originalEvent.offsetX,P.originalEvent.offsetY];P.target.getBoundingClientRect=function(){return I},S.xaxis.p2c=function(){return E.unproject(U).lng},S.yaxis.p2c=function(){return E.unproject(U).lat},_._fullLayout._rehover=function(){_._fullLayout._hoversubplot===S.id&&_._fullLayout[S.id]&&s.hover(_,P,S.id)},s.hover(_,P,S.id),_._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,L()}),E.on("zoomstart",L),E.on("mouseout",function(){_._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var P=_._fullLayout[S.id];T.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,S.getViewEdits(P));var I=S.viewInitial;E.setCenter(m(I.center)),E.setZoom(I.zoom),E.setBearing(I.bearing),E.setPitch(I.pitch);var U=S.getView();P._input.center=P.center=U.center,P._input.zoom=P.zoom=U.zoom,P._input.bearing=P.bearing=U.bearing,P._input.pitch=P.pitch=U.pitch,_.emit("plotly_doubleclick",null),_.emit("plotly_relayout",S.getViewEditsWithDerived(U))}),S.clearOutline=function(){i(S.dragOptions),a(S.dragOptions.gd)},S.onClickInPanFn=function(P){return function(I){var U=_._fullLayout.clickmode;U.indexOf("select")>-1&&c(I.originalEvent,_,[S.xaxis],[S.yaxis],S.id,P),U.indexOf("event")>-1&&s.click(_,I.originalEvent)}}},v.updateFx=function(w){var u=this,S=u.map,_=u.gd;if(!u.isStatic){var E,L=w.dragmode;E=function(I,U){U.isRect?(I.range={})[u.id]=[P([U.xmin,U.ymin]),P([U.xmax,U.ymax])]:(I.lassoPoints={})[u.id]=U.map(P)};var C=u.dragOptions;u.dragOptions=k.extendDeep(C||{},{dragmode:w.dragmode,element:u.div,gd:_,plotinfo:{id:u.id,domain:w[u.id].domain,xaxis:u.xaxis,yaxis:u.yaxis,fillRangeItems:E},xaxes:[u.xaxis],yaxes:[u.yaxis],subplot:u.id}),S.off("click",u.onClickInPanHandler),r(L)||o(L)?(S.dragPan.disable(),S.on("zoomstart",u.clearOutline),u.dragOptions.prepFn=function(I,U,z){n(I,U,z,u.dragOptions,L)},d.init(u.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",u.clearOutline),u.div.onmousedown=null,u.div.ontouchstart=null,u.div.removeEventListener("touchstart",u.div._ontouchstart),u.onClickInPanHandler=u.onClickInPanFn(u.dragOptions),S.on("click",u.onClickInPanHandler))}function P(I){var U=u.map.unproject(I);return[U.lng,U.lat]}},v.updateFramework=function(w){var u=w[this.id].domain,S=w._size,_=this.div.style;_.width=S.w*(u.x[1]-u.x[0])+"px",_.height=S.h*(u.y[1]-u.y[0])+"px",_.left=S.l+u.x[0]*S.w+"px",_.top=S.t+(1-u.y[1])*S.h+"px",this.xaxis._offset=S.l+u.x[0]*S.w,this.xaxis._length=S.w*(u.x[1]-u.x[0]),this.yaxis._offset=S.t+(1-u.y[1])*S.h,this.yaxis._length=S.h*(u.y[1]-u.y[0])},v.updateLayers=function(w){var u,S=w[this.id].layers,_=this.layerList;if(S.length!==_.length){for(u=0;u<_.length;u++)_[u].dispose();for(_=this.layerList=[],u=0;u<S.length;u++)_.push(f(this,u,S[u]))}else for(u=0;u<S.length;u++)_[u].update(S[u])},v.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},v.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},v.setOptions=function(w,u,S){for(var _ in S)this.map[u](w,_,S[_])},v.getMapLayers=function(){return this.map.getStyle().layers},v.addLayer=function(w,u){var S=this.map;if(typeof u=="string"){if(u==="")return void S.addLayer(w,u);for(var _=this.getMapLayers(),E=0;E<_.length;E++)if(u===_[E].id)return void S.addLayer(w,u);k.warn(["Trying to add layer with *below* value",u,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(w)},v.project=function(w){return this.map.project(new A.LngLat(w[0],w[1]))},v.getView=function(){var w=this.map,u=w.getCenter(),S={lon:u.lng,lat:u.lat},_=w.getCanvas(),E=parseInt(_.style.width),L=parseInt(_.style.height);return{center:S,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([E,0]).toArray(),w.unproject([E,L]).toArray(),w.unproject([0,L]).toArray()]}}},v.getViewEdits=function(w){for(var u=this.id,S=["center","zoom","bearing","pitch"],_={},E=0;E<S.length;E++){var L=S[E];_[u+"."+L]=w[L]}return _},v.getViewEditsWithDerived=function(w){var u=this.id,S=this.getViewEdits(w);return S[u+"._derived"]=w._derived,S},$.exports=b},35025:function($){$.exports=function(R){var e=R.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},74875:function($,R,e){var A=e(39898),k=e(84096).Dq,l=e(60721).FF,T=e(92770),x=e(73972),d=e(86281),s=e(44467),t=e(71828),o=e(7901),r=e(50606).BADNUM,n=e(41675),a=e(51873).clearOutline,i=e(21479),c=e(85594),h=e(31391),f=e(27659).a0,b=t.relinkPrivateKeys,v=t._,g=$.exports={};t.extendFlat(g,x),g.attributes=e(9012),g.attributes.type.values=g.allTypes,g.fontAttrs=e(41940),g.layoutAttributes=e(10820),g.fontWeight="normal";var y=g.transformsRegistry,p=e(31137);g.executeAPICommand=p.executeAPICommand,g.computeAPICommandBindings=p.computeAPICommandBindings,g.manageCommandObserver=p.manageCommandObserver,g.hasSimpleAPICommandBindings=p.hasSimpleAPICommandBindings,g.redrawText=function(F){return F=t.getGraphDiv(F),new Promise(function(N){setTimeout(function(){F._fullLayout&&(x.getComponentMethod("annotations","draw")(F),x.getComponentMethod("legend","draw")(F),x.getComponentMethod("colorbar","draw")(F),N(g.previousPromises(F)))},300)})},g.resize=function(F){var N;F=t.getGraphDiv(F);var B=new Promise(function(j,K){F&&!t.isHidden(F)||K(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(N=F._resolveResize),F._resolveResize=j,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||t.isHidden(F))j(F);else{delete F.layout.width,delete F.layout.height;var G=F.changed;F.autoplay=!0,x.call("relayout",F,{autosize:!0}).then(function(){F.changed=G,F._resolveResize===j&&(delete F._resolveResize,j(F))})}},100)});return N&&N(B),B},g.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},g.addLinks=function(F){if(F._context.showLink||F._context.showSources){var N=F._fullLayout,B=t.ensureSingle(N._paper,"text","js-plot-link-container",function(J){J.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:o.defaultLine,"pointer-events":"all"}).each(function(){var X=A.select(this);X.append("tspan").classed("js-link-to-tool",!0),X.append("tspan").classed("js-link-spacer",!0),X.append("tspan").classed("js-sourcelinks",!0)})}),j=B.node(),K={y:N._paper.attr("height")-9};document.body.contains(j)&&j.getComputedTextLength()>=N.width-20?(K["text-anchor"]="start",K.x=5):(K["text-anchor"]="end",K.x=N._paper.attr("width")-7),B.attr(K);var G=B.select(".js-link-to-tool"),V=B.select(".js-link-spacer"),W=B.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&function(J,X){X.text("");var ee=X.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(J._context.linkText+" "+String.fromCharCode(187));if(J._context.sendData)ee.on("click",function(){g.sendDataToCloud(J)});else{var re=window.location.pathname.split("/"),ie=window.location.search;ee.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+re[2].split(".")[0]+"/"+re[1]+ie})}}(F,G),V.text(G.text()&&W.text()?" - ":"")}},g.sendDataToCloud=function(F){var N=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(N){F.emit("plotly_beforeexport");var B=A.select(F).append("div").attr("id","hiddenform").style("display","none"),j=B.append("form").attr({action:N+"/external",method:"post",target:"_blank"});return j.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(F,!1,"keepdata"),j.node().submit(),B.remove(),F.emit("plotly_afterexport"),!1}};var m=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],w=["year","month","dayMonth","dayMonthYear"];function u(F,N){var B=F._context.locale;B||(B="en-US");var j=!1,K={};function G(re){for(var ie=!0,se=0;se<N.length;se++){var fe=N[se];K[fe]||(re[fe]?K[fe]=re[fe]:ie=!1)}ie&&(j=!0)}for(var V=0;V<2;V++){for(var W=F._context.locales,J=0;J<2;J++){var X=(W[B]||{}).format;if(X&&(G(X),j))break;W=x.localeRegistry}var ee=B.split("-")[0];if(j||ee===B)break;B=ee}return j||G(x.localeRegistry.en.format),K}function S(F,N){var B={_fullLayout:N},j=F._id.charAt(0)==="x",K=F._mainAxis._anchorAxis,G="",V="",W="";if(K&&(W=K._mainAxis._id,G=j?F._id+W:W+F._id),!G||!N._plots[G]){G="";for(var J=F._counterAxes,X=0;X<J.length;X++){var ee=J[X],re=j?F._id+ee:ee+F._id;V||(V=re);var ie=n.getFromId(B,ee);if(W&&ie.overlaying===W){G=re;break}}}return G||V}function _(F){var N=F.transforms;if(Array.isArray(N)&&N.length)for(var B=0;B<N.length;B++){var j=N[B],K=j._module||y[j.type];if(K&&K.makesData)return!0}return!1}function E(F,N,B,j){for(var K=F.transforms,G=[F],V=0;V<K.length;V++){var W=K[V],J=y[W.type];J&&J.transform&&(G=J.transform(G,{transform:W,fullTrace:F,fullData:N,layout:B,fullLayout:j,transformIndex:V}))}return G}function L(F){return typeof F=="string"&&F.substr(F.length-2)==="px"&&parseFloat(F)}function C(F){var N=F.margin;if(!F._size){var B=F._size={l:Math.round(N.l),r:Math.round(N.r),t:Math.round(N.t),b:Math.round(N.b),p:Math.round(N.pad)};B.w=Math.round(F.width)-B.l-B.r,B.h=Math.round(F.height)-B.t-B.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={})}g.supplyDefaults=function(F,N){var B=N&&N.skipUpdateCalc,j=F._fullLayout||{};if(j._skipDefaults)delete j._skipDefaults;else{var K,G=F._fullLayout={},V=F.layout||{},W=F._fullData||[],J=F._fullData=[],X=F.data||[],ee=F.calcdata||[],re=F._context||{};F._transitionData||g.createTransitionData(F),G._dfltTitle={plot:v(F,"Click to enter Plot title"),x:v(F,"Click to enter X axis title"),y:v(F,"Click to enter Y axis title"),colorbar:v(F,"Click to enter Colorscale title"),annotation:v(F,"new text")},G._traceWord=v(F,"trace");var ie=u(F,m);if(G._mapboxAccessToken=re.mapboxAccessToken,j._initialAutoSizeIsDone){var se=j.width,fe=j.height;g.supplyLayoutGlobalDefaults(V,G,ie),V.width||(G.width=se),V.height||(G.height=fe),g.sanitizeMargins(G)}else{g.supplyLayoutGlobalDefaults(V,G,ie);var ye=!V.width||!V.height,ge=G.autosize,he=re.autosizable;ye&&(ge||he)?g.plotAutoSize(F,V,G):ye&&g.sanitizeMargins(G),!ge&&ye&&(V.width=G.width,V.height=G.height)}G._d3locale=function(be,Fe){return be.decimal=Fe.charAt(0),be.thousands=Fe.charAt(1),{numberFormat:function(Ve){try{Ve=l(be).format(t.adjustFormat(Ve))}catch{return t.warnBadFormat(Ve),t.noFormat}return Ve},timeFormat:k(be).utcFormat}}(ie,G.separators),G._extraFormat=u(F,w),G._initialAutoSizeIsDone=!0,G._dataLength=X.length,G._modules=[],G._visibleModules=[],G._basePlotModules=[];var ve=G._subplots=function(){var be,Fe,Ve=x.collectableSubplotTypes,He={};if(!Ve){Ve=[];var rt=x.subplotsRegistry;for(var tt in rt){var ot=rt[tt].attr;if(ot&&(Ve.push(tt),Array.isArray(ot)))for(Fe=0;Fe<ot.length;Fe++)t.pushUnique(Ve,ot[Fe])}}for(be=0;be<Ve.length;be++)He[Ve[be]]=[];return He}(),Ie=G._splomAxes={x:{},y:{}},xe=G._splomSubplots={};G._splomGridDflt={},G._scatterStackOpts={},G._firstScatter={},G._alignmentOpts={},G._colorAxes={},G._requestRangeslider={},G._traceUids=function(be,Fe){var Ve,He,rt=Fe.length,tt=[];for(Ve=0;Ve<be.length;Ve++){var ot=be[Ve]._fullInput;ot!==He&&tt.push(ot),He=ot}var ht=tt.length,_t=new Array(rt),dt={};function bt(zt,Ut){_t[Ut]=zt,dt[zt]=1}function St(zt,Ut){if(zt&&typeof zt=="string"&&!dt[zt])return bt(zt,Ut),!0}for(Ve=0;Ve<rt;Ve++){var Et=Fe[Ve].uid;typeof Et=="number"&&(Et=String(Et)),St(Et,Ve)||Ve<ht&&St(tt[Ve].uid,Ve)||bt(t.randstr(dt),Ve)}return _t}(W,X),G._globalTransforms=(F._context||{}).globalTransforms,g.supplyDataDefaults(X,J,V,G);var Ae=Object.keys(Ie.x),Se=Object.keys(Ie.y);if(Ae.length>1&&Se.length>1){for(x.getComponentMethod("grid","sizeDefaults")(V,G),K=0;K<Ae.length;K++)t.pushUnique(ve.xaxis,Ae[K]);for(K=0;K<Se.length;K++)t.pushUnique(ve.yaxis,Se[K]);for(var Te in xe)t.pushUnique(ve.cartesian,Te)}if(G._has=g._hasPlotType.bind(G),W.length===J.length)for(K=0;K<J.length;K++)b(J[K],W[K]);g.supplyLayoutModuleDefaults(V,G,J,F._transitionData);var Q=G._visibleModules,oe=[];for(K=0;K<Q.length;K++){var ce=Q[K].crossTraceDefaults;ce&&t.pushUnique(oe,ce)}for(K=0;K<oe.length;K++)oe[K](J,G);G._hasOnlyLargeSploms=G._basePlotModules.length===1&&G._basePlotModules[0].name==="splom"&&Ae.length>15&&Se.length>15&&G.shapes.length===0&&G.images.length===0,g.linkSubplots(J,G,W,j),g.cleanPlot(J,G,W,j);var me=!(!j._has||!j._has("gl2d")),Me=!(!G._has||!G._has("gl2d")),Re=!(!j._has||!j._has("cartesian"))||me,Ce=!(!G._has||!G._has("cartesian"))||Me;Re&&!Ce?j._bgLayer.remove():Ce&&!Re&&(G._shouldCreateBgLayer=!0),j._zoomlayer&&!F._dragging&&a({_fullLayout:j}),function(be,Fe){var Ve,He=[];Fe.meta&&(Ve=Fe._meta={meta:Fe.meta,layout:{meta:Fe.meta}});for(var rt=0;rt<be.length;rt++){var tt=be[rt];tt.meta?He[tt.index]=tt._meta={meta:tt.meta}:Fe.meta&&(tt._meta={meta:Fe.meta}),Fe.meta&&(tt._meta.layout={meta:Fe.meta})}He.length&&(Ve||(Ve=Fe._meta={}),Ve.data=He)}(J,G),b(G,j),x.getComponentMethod("colorscale","crossTraceDefaults")(J,G),G._preGUI||(G._preGUI={}),G._tracePreGUI||(G._tracePreGUI={});var ze,le=G._tracePreGUI,de={};for(ze in le)de[ze]="old";for(K=0;K<J.length;K++)de[ze=J[K]._fullInput.uid]||(le[ze]={}),de[ze]="new";for(ze in de)de[ze]==="old"&&delete le[ze];C(G),x.getComponentMethod("rangeslider","makeData")(G),B||ee.length!==J.length||g.supplyDefaultsUpdateCalc(ee,J)}},g.supplyDefaultsUpdateCalc=function(F,N){for(var B=0;B<N.length;B++){var j=N[B],K=(F[B]||[])[0];if(K&&K.trace){var G=K.trace;if(G._hasCalcTransform){var V,W,J,X=G._arrayAttrs;for(V=0;V<X.length;V++)W=X[V],J=t.nestedProperty(G,W).get().slice(),t.nestedProperty(j,W).set(J)}K.trace=j}}},g.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},g._hasPlotType=function(F){var N,B=this._basePlotModules||[];for(N=0;N<B.length;N++)if(B[N].name===F)return!0;var j=this._modules||[];for(N=0;N<j.length;N++){var K=j[N].name;if(K===F)return!0;var G=x.modules[K];if(G&&G.categories[F])return!0}return!1},g.cleanPlot=function(F,N,B,j){var K,G,V=j._basePlotModules||[];for(K=0;K<V.length;K++){var W=V[K];W.clean&&W.clean(F,N,B,j)}var J=j._has&&j._has("gl"),X=N._has&&N._has("gl");J&&!X&&j._glcontainer!==void 0&&(j._glcontainer.selectAll(".gl-canvas").remove(),j._glcontainer.selectAll(".no-webgl").remove(),j._glcanvas=null);var ee=!!j._infolayer;e:for(K=0;K<B.length;K++){var re=B[K].uid;for(G=0;G<F.length;G++)if(re===F[G].uid)continue e;ee&&j._infolayer.select(".cb"+re).remove()}},g.linkSubplots=function(F,N,B,j){var K,G,V=j._plots||{},W=N._plots={},J=N._subplots,X={_fullData:F,_fullLayout:N},ee=J.cartesian.concat(J.gl2d||[]);for(K=0;K<ee.length;K++){var re,ie=ee[K],se=V[ie],fe=n.getFromId(X,ie,"x"),ye=n.getFromId(X,ie,"y");for(se?re=W[ie]=se:(re=W[ie]={}).id=ie,fe._counterAxes.push(ye._id),ye._counterAxes.push(fe._id),fe._subplotsWith.push(ie),ye._subplotsWith.push(ie),re.xaxis=fe,re.yaxis=ye,re._hasClipOnAxisFalse=!1,G=0;G<F.length;G++){var ge=F[G];if(ge.xaxis===re.xaxis._id&&ge.yaxis===re.yaxis._id&&ge.cliponaxis===!1){re._hasClipOnAxisFalse=!0;break}}}var he,ve=n.list(X,null,!0);for(K=0;K<ve.length;K++){var Ie=null;(he=ve[K]).overlaying&&(Ie=n.getFromId(X,he.overlaying))&&Ie.overlaying&&(he.overlaying=!1,Ie=null),he._mainAxis=Ie||he,Ie&&(he.domain=Ie.domain.slice()),he._anchorAxis=he.anchor==="free"?null:n.getFromId(X,he.anchor)}for(K=0;K<ve.length;K++)if((he=ve[K])._counterAxes.sort(n.idSort),he._subplotsWith.sort(t.subplotSort),he._mainSubplot=S(he,N),he._counterAxes.length&&(he.spikemode&&he.spikemode.indexOf("across")!==-1||he.automargin&&he.mirror&&he.anchor!=="free"||x.getComponentMethod("rangeslider","isVisible")(he))){var xe=1,Ae=0;for(G=0;G<he._counterAxes.length;G++){var Se=n.getFromId(X,he._counterAxes[G]);xe=Math.min(xe,Se.domain[0]),Ae=Math.max(Ae,Se.domain[1])}xe<Ae&&(he._counterDomainMin=xe,he._counterDomainMax=Ae)}},g.clearExpandedTraceDefaultColors=function(F){var N,B,j;for(B=[],(N=F._module._colorAttrs)||(F._module._colorAttrs=N=[],d.crawl(F._module.attributes,function(K,G,V,W){B[W]=G,B.length=W+1,K.valType==="color"&&K.dflt===void 0&&N.push(B.join("."))})),j=0;j<N.length;j++)t.nestedProperty(F,"_input."+N[j]).get()||t.nestedProperty(F,N[j]).set(null)},g.supplyDataDefaults=function(F,N,B,j){var K,G,V,W=j._modules,J=j._visibleModules,X=j._basePlotModules,ee=0,re=0;function ie(Te){N.push(Te);var Q=Te._module;Q&&(t.pushUnique(W,Q),Te.visible===!0&&t.pushUnique(J,Q),t.pushUnique(X,Te._module.basePlotModule),ee++,Te._input.visible!==!1&&re++)}j._transformModules=[];var se={},fe=[],ye=(B.template||{}).data||{},ge=s.traceTemplater(ye);for(K=0;K<F.length;K++){if(V=F[K],(G=ge.newTrace(V)).uid=j._traceUids[K],g.supplyTraceDefaults(V,G,re,j,K),G.index=K,G._input=V,G._expandedIndex=ee,G.transforms&&G.transforms.length)for(var he=V.visible!==!1&&G.visible===!1,ve=E(G,N,B,j),Ie=0;Ie<ve.length;Ie++){var xe=ve[Ie],Ae={_template:G._template,type:G.type,uid:G.uid+Ie};he&&xe.visible===!1&&delete xe.visible,g.supplyTraceDefaults(xe,Ae,ee,j,K),b(Ae,xe),Ae.index=K,Ae._input=V,Ae._fullInput=G,Ae._expandedIndex=ee,Ae._expandedInput=xe,ie(Ae)}else G._fullInput=G,G._expandedInput=G,ie(G);x.traceIs(G,"carpetAxis")&&(se[G.carpet]=G),x.traceIs(G,"carpetDependent")&&fe.push(K)}for(K=0;K<fe.length;K++)if((G=N[fe[K]]).visible){var Se=se[G.carpet];G._carpet=Se,Se&&Se.visible?(G.xaxis=Se.xaxis,G.yaxis=Se.yaxis):G.visible=!1}},g.supplyAnimationDefaults=function(F){var N;F=F||{};var B={};function j(K,G){return t.coerce(F||{},B,c,K,G)}if(j("mode"),j("direction"),j("fromcurrent"),Array.isArray(F.frame))for(B.frame=[],N=0;N<F.frame.length;N++)B.frame[N]=g.supplyAnimationFrameDefaults(F.frame[N]||{});else B.frame=g.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(B.transition=[],N=0;N<F.transition.length;N++)B.transition[N]=g.supplyAnimationTransitionDefaults(F.transition[N]||{});else B.transition=g.supplyAnimationTransitionDefaults(F.transition||{});return B},g.supplyAnimationFrameDefaults=function(F){var N={};function B(j,K){return t.coerce(F||{},N,c.frame,j,K)}return B("duration"),B("redraw"),N},g.supplyAnimationTransitionDefaults=function(F){var N={};function B(j,K){return t.coerce(F||{},N,c.transition,j,K)}return B("duration"),B("easing"),N},g.supplyFrameDefaults=function(F){var N={};function B(j,K){return t.coerce(F,N,h,j,K)}return B("group"),B("name"),B("traces"),B("baseframe"),B("data"),B("layout"),N},g.supplyTraceDefaults=function(F,N,B,j,K){var G,V=j.colorway||o.defaults,W=V[B%V.length];function J(ve,Ie){return t.coerce(F,N,g.attributes,ve,Ie)}var X=J("visible");J("type"),J("name",j._traceWord+" "+K),J("uirevision",j.uirevision);var ee=g.getModule(N);if(N._module=ee,ee){var re=ee.basePlotModule,ie=re.attr,se=re.attributes;if(ie&&se){var fe=j._subplots,ye="";if(X||re.name!=="gl2d"){if(Array.isArray(ie))for(G=0;G<ie.length;G++){var ge=ie[G],he=t.coerce(F,N,se,ge);fe[ge]&&t.pushUnique(fe[ge],he),ye+=he}else ye=t.coerce(F,N,se,ie);fe[re.name]&&t.pushUnique(fe[re.name],ye)}}}return X&&(J("customdata"),J("ids"),J("meta"),x.traceIs(N,"showLegend")?(t.coerce(F,N,ee.attributes.showlegend?ee.attributes:g.attributes,"showlegend"),J("legendwidth"),J("legendgroup"),J("legendgrouptitle.text"),J("legendrank"),N._dfltShowLegend=!0):N._dfltShowLegend=!1,ee&&ee.supplyDefaults(F,N,W,j),x.traceIs(N,"noOpacity")||J("opacity"),x.traceIs(N,"notLegendIsolatable")&&(N.visible=!!N.visible),x.traceIs(N,"noHover")||(N.hovertemplate||t.coerceHoverinfo(F,N,j),N.type!=="parcats"&&x.getComponentMethod("fx","supplyDefaults")(F,N,W,j)),ee&&ee.selectPoints&&J("selectedpoints"),g.supplyTransformDefaults(F,N,j)),N},g.hasMakesDataTransform=_,g.supplyTransformDefaults=function(F,N,B){if(N._length||_(F)){var j=B._globalTransforms||[],K=B._transformModules||[];if(Array.isArray(F.transforms)||j.length!==0)for(var G=F.transforms||[],V=j.concat(G),W=N.transforms=[],J=0;J<V.length;J++){var X,ee=V[J],re=ee.type,ie=y[re],se=!(ee._module&&ee._module===ie),fe=ie&&typeof ie.transform=="function";ie||t.warn("Unrecognized transform type "+re+"."),ie&&ie.supplyDefaults&&(se||fe)?((X=ie.supplyDefaults(ee,N,B,F)).type=re,X._module=ie,t.pushUnique(K,ie)):X=t.extendFlat({},ee),W.push(X)}}},g.supplyLayoutGlobalDefaults=function(F,N,B){function j(J,X){return t.coerce(F,N,g.layoutAttributes,J,X)}var K=F.template;t.isPlainObject(K)&&(N.template=K,N._template=K.layout,N._dataTemplate=K.data),j("autotypenumbers");var G=t.coerceFont(j,"font"),V=G.size;t.coerceFont(j,"title.font",t.extendFlat({},G,{size:Math.round(1.4*V)})),j("title.text",N._dfltTitle.plot),j("title.xref"),j("title.yref"),j("title.x"),j("title.y"),j("title.xanchor"),j("title.yanchor"),j("title.pad.t"),j("title.pad.r"),j("title.pad.b"),j("title.pad.l"),j("uniformtext.mode")&&j("uniformtext.minsize"),j("autosize",!(F.width&&F.height)),j("width"),j("height"),j("minreducedwidth"),j("minreducedheight"),j("margin.l"),j("margin.r"),j("margin.t"),j("margin.b"),j("margin.pad"),j("margin.autoexpand"),F.width&&F.height&&g.sanitizeMargins(N),x.getComponentMethod("grid","sizeDefaults")(F,N),j("paper_bgcolor"),j("separators",B.decimal+B.thousands),j("hidesources"),j("colorway"),j("datarevision");var W=j("uirevision");j("editrevision",W),j("selectionrevision",W),x.getComponentMethod("modebar","supplyLayoutDefaults")(F,N),x.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,N,j),x.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,N,j),j("meta"),t.isPlainObject(F.transition)&&(j("transition.duration"),j("transition.easing"),j("transition.ordering")),x.getComponentMethod("calendars","handleDefaults")(F,N,"calendar"),x.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,N,j),t.coerce(F,N,i,"scattermode")},g.plotAutoSize=function(F,N,B){var j,K,G=F._context||{},V=G.frameMargins,W=t.isPlotDiv(F);if(W&&F.emit("plotly_autosize"),G.fillFrame)j=window.innerWidth,K=window.innerHeight,document.body.style.overflow="hidden";else{var J=W?window.getComputedStyle(F):{};if(j=L(J.width)||L(J.maxWidth)||B.width,K=L(J.height)||L(J.maxHeight)||B.height,T(V)&&V>0){var X=1-2*V;j=Math.round(X*j),K=Math.round(X*K)}}var ee=g.layoutAttributes.width.min,re=g.layoutAttributes.height.min;j<ee&&(j=ee),K<re&&(K=re);var ie=!N.width&&Math.abs(B.width-j)>1,se=!N.height&&Math.abs(B.height-K)>1;(se||ie)&&(ie&&(B.width=j),se&&(B.height=K)),F._initialAutoSize||(F._initialAutoSize={width:j,height:K}),g.sanitizeMargins(B)},g.supplyLayoutModuleDefaults=function(F,N,B,j){var K,G,V,W=x.componentsRegistry,J=N._basePlotModules,X=x.subplotsRegistry.cartesian;for(K in W)(V=W[K]).includeBasePlot&&V.includeBasePlot(F,N);for(var ee in J.length||J.push(X),N._has("cartesian")&&(x.getComponentMethod("grid","contentDefaults")(F,N),X.finalizeSubplots(F,N)),N._subplots)N._subplots[ee].sort(t.subplotSort);for(G=0;G<J.length;G++)(V=J[G]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,N,B);var re=N._modules;for(G=0;G<re.length;G++)(V=re[G]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,N,B);var ie=N._transformModules;for(G=0;G<ie.length;G++)(V=ie[G]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,N,B,j);for(K in W)(V=W[K]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,N,B)},g.purge=function(F){var N=F._fullLayout||{};N._glcontainer!==void 0&&(N._glcontainer.selectAll(".gl-canvas").remove(),N._glcontainer.remove(),N._glcanvas=null),N._modeBar&&N._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),t.clearThrottle(),t.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},g.style=function(F){var N,B=F._fullLayout._visibleModules,j=[];for(N=0;N<B.length;N++){var K=B[N];K.style&&t.pushUnique(j,K.style)}for(N=0;N<j.length;N++)j[N](F)},g.sanitizeMargins=function(F){if(F&&F.margin){var N,B=F.width,j=F.height,K=F.margin,G=B-(K.l+K.r),V=j-(K.t+K.b);G<0&&(N=(B-1)/(K.l+K.r),K.l=Math.floor(N*K.l),K.r=Math.floor(N*K.r)),V<0&&(N=(j-1)/(K.t+K.b),K.t=Math.floor(N*K.t),K.b=Math.floor(N*K.b))}},g.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(F,N){F._fullLayout._pushmarginIds[N]=1},g.autoMargin=function(F,N,B){var j=F._fullLayout,K=j.width,G=j.height,V=j.margin,W=j.minreducedwidth,J=j.minreducedheight,X=t.constrain(K-V.l-V.r,2,W),ee=t.constrain(G-V.t-V.b,2,J),re=Math.max(0,K-X),ie=Math.max(0,G-ee),se=j._pushmargin,fe=j._pushmarginIds;if(V.autoexpand!==!1){if(B){var ye=B.pad;if(ye===void 0&&(ye=Math.min(12,V.l,V.r,V.t,V.b)),re){var ge=(B.l+B.r)/re;ge>1&&(B.l/=ge,B.r/=ge)}if(ie){var he=(B.t+B.b)/ie;he>1&&(B.t/=he,B.b/=he)}var ve=B.xl!==void 0?B.xl:B.x,Ie=B.xr!==void 0?B.xr:B.x,xe=B.yt!==void 0?B.yt:B.y,Ae=B.yb!==void 0?B.yb:B.y;se[N]={l:{val:ve,size:B.l+ye},r:{val:Ie,size:B.r+ye},b:{val:Ae,size:B.b+ye},t:{val:xe,size:B.t+ye}},fe[N]=1}else delete se[N],delete fe[N];if(!j._replotting)return g.doAutoMargin(F)}},g.doAutoMargin=function(F){var N=F._fullLayout,B=N.width,j=N.height;N._size||(N._size={}),C(N);var K=N._size,G=N.margin,V=t.extendFlat({},K),W=G.l,J=G.r,X=G.t,ee=G.b,re=N._pushmargin,ie=N._pushmarginIds,se=N.minreducedwidth,fe=N.minreducedheight;if(N.margin.autoexpand!==!1){for(var ye in re)ie[ye]||delete re[ye];for(var ge in re.base={l:{val:0,size:W},r:{val:1,size:J},t:{val:1,size:X},b:{val:0,size:ee}},re){var he=re[ge].l||{},ve=re[ge].b||{},Ie=he.val,xe=he.size,Ae=ve.val,Se=ve.size;for(var Te in re){if(T(xe)&&re[Te].r){var Q=re[Te].r.val,oe=re[Te].r.size;if(Q>Ie){var ce=(xe*Q+(oe-B)*Ie)/(Q-Ie),me=(oe*(1-Ie)+(xe-B)*(1-Q))/(Q-Ie);ce+me>W+J&&(W=ce,J=me)}}if(T(Se)&&re[Te].t){var Me=re[Te].t.val,Re=re[Te].t.size;if(Me>Ae){var Ce=(Se*Me+(Re-j)*Ae)/(Me-Ae),ze=(Re*(1-Ae)+(Se-j)*(1-Me))/(Me-Ae);Ce+ze>ee+X&&(ee=Ce,X=ze)}}}}}var le=t.constrain(B-G.l-G.r,2,se),de=t.constrain(j-G.t-G.b,2,fe),be=Math.max(0,B-le),Fe=Math.max(0,j-de);if(be){var Ve=(W+J)/be;Ve>1&&(W/=Ve,J/=Ve)}if(Fe){var He=(ee+X)/Fe;He>1&&(ee/=He,X/=He)}if(K.l=Math.round(W),K.r=Math.round(J),K.t=Math.round(X),K.b=Math.round(ee),K.p=Math.round(G.pad),K.w=Math.round(B)-K.l-K.r,K.h=Math.round(j)-K.t-K.b,!N._replotting&&(g.didMarginChange(V,K)||function(tt){if("_redrawFromAutoMarginCount"in tt._fullLayout)return!1;var ot=n.list(tt,"",!0);for(var ht in ot)if(ot[ht].autoshift||ot[ht].shift)return!0;return!1}(F))){"_redrawFromAutoMarginCount"in N?N._redrawFromAutoMarginCount++:N._redrawFromAutoMarginCount=1;var rt=3*(1+Object.keys(ie).length);if(N._redrawFromAutoMarginCount<rt)return x.call("_doPlot",F);N._size=V,t.warn("Too many auto-margin redraws.")}(function(tt){var ot=n.list(tt,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(ht){for(var _t=0;_t<ot.length;_t++){var dt=ot[_t][ht];dt&&dt()}})})(F)};var P=["l","r","t","b","p","w","h"];function I(F,N,B){var j=!1,K=[g.previousPromises,function(){if(F._transitionData)return F._transitioning=!1,function(V){var W=Promise.resolve();if(!V)return W;for(;V.length;)W=W.then(V.shift());return W}(F._transitionData._interruptCallbacks)},B.prepareFn,g.rehover,g.reselect,function(){return F.emit("plotly_transitioning",[]),new Promise(function(V){F._transitioning=!0,N.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){j=!0}),B.redraw&&F._transitionData._interruptCallbacks.push(function(){return x.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var W=0,J=0;function X(){return W++,function(){var ee;J++,j||J!==W||(ee=V,F._transitionData&&(function(re){if(re)for(;re.length;)re.shift()}(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(B.redraw)return x.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(ee)))}}B.runFn(X),setTimeout(X())})}],G=t.syncOrAsync(K,F);return G&&G.then||(G=Promise.resolve()),G.then(function(){return F})}g.didMarginChange=function(F,N){for(var B=0;B<P.length;B++){var j=P[B],K=F[j],G=N[j];if(!T(K)||Math.abs(G-K)>1)return!0}return!1},g.graphJson=function(F,N,B,j,K,G){(K&&N&&!F._fullData||K&&!N&&!F._fullLayout)&&g.supplyDefaults(F);var V=K?F._fullData:F.data,W=K?F._fullLayout:F.layout,J=(F._transitionData||{})._frames;function X(ie,se){if(typeof ie=="function")return se?"_function_":null;if(t.isPlainObject(ie)){var fe,ye={};return Object.keys(ie).sort().forEach(function(ge){if(["_","["].indexOf(ge.charAt(0))===-1)if(typeof ie[ge]!="function"){if(B==="keepdata"){if(ge.substr(ge.length-3)==="src")return}else if(B==="keepstream"){if(typeof(fe=ie[ge+"src"])=="string"&&fe.indexOf(":")>0&&!t.isPlainObject(ie.stream))return}else if(B!=="keepall"&&typeof(fe=ie[ge+"src"])=="string"&&fe.indexOf(":")>0)return;ye[ge]=X(ie[ge],se)}else se&&(ye[ge]="_function")}),ye}return Array.isArray(ie)?ie.map(function(ge){return X(ge,se)}):t.isTypedArray(ie)?t.simpleMap(ie,t.identity):t.isJSDate(ie)?t.ms2DateTimeLocal(+ie):ie}var ee={data:(V||[]).map(function(ie){var se=X(ie);return N&&delete se.fit,se})};if(!N&&(ee.layout=X(W),K)){var re=W._size;ee.layout.computed={margin:{b:re.b,l:re.l,r:re.r,t:re.t}}}return J&&(ee.frames=X(J)),G&&(ee.config=X(F._context,!0)),j==="object"?ee:JSON.stringify(ee)},g.modifyFrames=function(F,N){var B,j,K,G=F._transitionData._frames,V=F._transitionData._frameHash;for(B=0;B<N.length;B++)switch((j=N[B]).type){case"replace":K=j.value;var W=(G[j.index]||{}).name,J=K.name;G[j.index]=V[J]=K,J!==W&&(delete V[W],V[J]=K);break;case"insert":V[(K=j.value).name]=K,G.splice(j.index,0,K);break;case"delete":delete V[(K=G[j.index]).name],G.splice(j.index,1)}return Promise.resolve()},g.computeFrame=function(F,N){var B,j,K,G,V=F._transitionData._frameHash;if(!N)throw new Error("computeFrame must be given a string frame name");var W=V[N.toString()];if(!W)return!1;for(var J=[W],X=[W.name];W.baseframe&&(W=V[W.baseframe.toString()])&&X.indexOf(W.name)===-1;)J.push(W),X.push(W.name);for(var ee={};W=J.pop();)if(W.layout&&(ee.layout=g.extendLayout(ee.layout,W.layout)),W.data){if(ee.data||(ee.data=[]),!(j=W.traces))for(j=[],B=0;B<W.data.length;B++)j[B]=B;for(ee.traces||(ee.traces=[]),B=0;B<W.data.length;B++)(K=j[B])!=null&&((G=ee.traces.indexOf(K))===-1&&(G=ee.data.length,ee.traces[G]=K),ee.data[G]=g.extendTrace(ee.data[G],W.data[B]))}return ee},g.recomputeFrameHash=function(F){for(var N=F._transitionData._frameHash={},B=F._transitionData._frames,j=0;j<B.length;j++){var K=B[j];K&&K.name&&(N[K.name]=K)}},g.extendObjectWithContainers=function(F,N,B){var j,K,G,V,W,J,X,ee=t.extendDeepNoArrays({},N||{}),re=t.expandObjectPaths(ee),ie={};if(B&&B.length)for(G=0;G<B.length;G++)(K=(j=t.nestedProperty(re,B[G])).get())===void 0?t.nestedProperty(ie,B[G]).set(null):(j.set(null),t.nestedProperty(ie,B[G]).set(K));if(F=t.extendDeepNoArrays(F||{},re),B&&B.length){for(G=0;G<B.length;G++)if(J=t.nestedProperty(ie,B[G]).get()){for(X=(W=t.nestedProperty(F,B[G])).get(),Array.isArray(X)||(X=[],W.set(X)),V=0;V<J.length;V++){var se=J[V];X[V]=se===null?null:g.extendObjectWithContainers(X[V],se)}W.set(X)}}return F},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=x.layoutArrayContainers,g.extendTrace=function(F,N){return g.extendObjectWithContainers(F,N,g.dataArrayContainers)},g.extendLayout=function(F,N){return g.extendObjectWithContainers(F,N,g.layoutArrayContainers)},g.transition=function(F,N,B,j,K,G){var V={redraw:K.redraw},W={},J=[];return V.prepareFn=function(){for(var X=Array.isArray(N)?N.length:0,ee=j.slice(0,X),re=0;re<ee.length;re++){var ie=ee[re],se=F._fullData[ie]._module;if(se){if(se.animatable){var fe=se.basePlotModule.name;W[fe]||(W[fe]=[]),W[fe].push(ie)}F.data[ee[re]]=g.extendTrace(F.data[ee[re]],N[re])}}var ye=t.expandObjectPaths(t.extendDeepNoArrays({},B)),ge=/^[xy]axis[0-9]*$/;for(var he in ye)ge.test(he)&&delete ye[he].range;g.extendLayout(F.layout,ye),delete F.calcdata,g.supplyDefaults(F),g.doCalcdata(F);var ve=t.expandObjectPaths(B);if(ve){var Ie=F._fullLayout._plots;for(var xe in Ie){var Ae=Ie[xe],Se=Ae.xaxis,Te=Ae.yaxis,Q=Se.range.slice(),oe=Te.range.slice(),ce=null,me=null,Me=null,Re=null;Array.isArray(ve[Se._name+".range"])?ce=ve[Se._name+".range"].slice():Array.isArray((ve[Se._name]||{}).range)&&(ce=ve[Se._name].range.slice()),Array.isArray(ve[Te._name+".range"])?me=ve[Te._name+".range"].slice():Array.isArray((ve[Te._name]||{}).range)&&(me=ve[Te._name].range.slice()),Q&&ce&&(Se.r2l(Q[0])!==Se.r2l(ce[0])||Se.r2l(Q[1])!==Se.r2l(ce[1]))&&(Me={xr0:Q,xr1:ce}),oe&&me&&(Te.r2l(oe[0])!==Te.r2l(me[0])||Te.r2l(oe[1])!==Te.r2l(me[1]))&&(Re={yr0:oe,yr1:me}),(Me||Re)&&J.push(t.extendFlat({plotinfo:Ae},Me,Re))}}return Promise.resolve()},V.runFn=function(X){var ee,re,ie=F._fullLayout._basePlotModules,se=J.length;if(B)for(re=0;re<ie.length;re++)ie[re].transitionAxes&&ie[re].transitionAxes(F,J,G,X);for(var fe in se?((ee=t.extendFlat({},G)).duration=0,delete W.cartesian):ee=G,W){var ye=W[fe];F._fullData[ye[0]]._module.basePlotModule.plot(F,ye,ee,X)}},I(F,G,V)},g.transitionFromReact=function(F,N,B,j){var K=F._fullLayout,G=K.transition,V={},W=[];return V.prepareFn=function(){var J=K._plots;for(var X in V.redraw=!1,N.anim==="some"&&(V.redraw=!0),B.anim==="some"&&(V.redraw=!0),J){var ee=J[X],re=ee.xaxis,ie=ee.yaxis,se=j[re._name].range.slice(),fe=j[ie._name].range.slice(),ye=re.range.slice(),ge=ie.range.slice();re.setScale(),ie.setScale();var he=null,ve=null;re.r2l(se[0])===re.r2l(ye[0])&&re.r2l(se[1])===re.r2l(ye[1])||(he={xr0:se,xr1:ye}),ie.r2l(fe[0])===ie.r2l(ge[0])&&ie.r2l(fe[1])===ie.r2l(ge[1])||(ve={yr0:fe,yr1:ge}),(he||ve)&&W.push(t.extendFlat({plotinfo:ee},he,ve))}return Promise.resolve()},V.runFn=function(J){for(var X,ee,re,ie=F._fullData,se=F._fullLayout._basePlotModules,fe=[],ye=0;ye<ie.length;ye++)fe.push(ye);function ge(){if(F._fullLayout)for(var ve=0;ve<se.length;ve++)se[ve].transitionAxes&&se[ve].transitionAxes(F,W,X,J)}function he(){if(F._fullLayout)for(var ve=0;ve<se.length;ve++)se[ve].plot(F,re,ee,J)}W.length&&N.anim?G.ordering==="traces first"?(X=t.extendFlat({},G,{duration:0}),re=fe,ee=G,setTimeout(ge,G.duration),he()):(X=G,re=null,ee=t.extendFlat({},G,{duration:0}),setTimeout(he,X.duration),ge()):W.length?(X=G,ge()):N.anim&&(re=fe,ee=G,he())},I(F,G,V)},g.doCalcdata=function(F,N){var B,j,K,G,V=n.list(F),W=F._fullData,J=F._fullLayout,X=new Array(W.length),ee=(F.calcdata||[]).slice();for(F.calcdata=X,J._numBoxes=0,J._numViolins=0,J._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,J._piecolormap={},J._sunburstcolormap={},J._treemapcolormap={},J._iciclecolormap={},J._funnelareacolormap={},K=0;K<W.length;K++)Array.isArray(N)&&N.indexOf(K)===-1&&(X[K]=ee[K]);for(K=0;K<W.length;K++)(B=W[K])._arrayAttrs=d.findArrayAttributes(B),B._extremes={};var re=J._subplots.polar||[];for(K=0;K<re.length;K++)V.push(J[re[K]].radialaxis,J[re[K]].angularaxis);for(var ie in J._colorAxes){var se=J[ie];se.cauto!==!1&&(delete se.cmin,delete se.cmax)}var fe=!1;function ye(ve){if(B=W[ve],j=B._module,B.visible===!0&&B.transforms){if(j&&j.calc){var Ie=j.calc(F,B);Ie[0]&&Ie[0].t&&Ie[0].t._scene&&delete Ie[0].t._scene.dirty}for(G=0;G<B.transforms.length;G++){var xe=B.transforms[G];(j=y[xe.type])&&j.calcTransform&&(B._hasCalcTransform=!0,fe=!0,j.calcTransform(F,B,xe))}}}function ge(ve,Ie){if(B=W[ve],!!(j=B._module).isContainer===Ie){var xe=[];if(B.visible===!0&&B._length!==0){delete B._indexToPoints;var Ae=B.transforms||[];for(G=Ae.length-1;G>=0;G--)if(Ae[G].enabled){B._indexToPoints=Ae[G]._indexToPoints;break}j&&j.calc&&(xe=j.calc(F,B))}Array.isArray(xe)&&xe[0]||(xe=[{x:r,y:r}]),xe[0].t||(xe[0].t={}),xe[0].trace=B,X[ve]=xe}}for(z(V,W,J),K=0;K<W.length;K++)ge(K,!0);for(K=0;K<W.length;K++)ye(K);for(fe&&z(V,W,J),K=0;K<W.length;K++)ge(K,!0);for(K=0;K<W.length;K++)ge(K,!1);H(F);var he=function(ve,Ie){var xe,Ae,Se,Te,Q,oe=[];function ce(Ze,Ye,Be){var ke=Ye._id.charAt(0);if(Ze==="histogram2dcontour"){var Pe=Ye._counterAxes[0],qe=n.getFromId(Ie,Pe),Xe=ke==="x"||Pe==="x"&&qe.type==="category",nt=ke==="y"||Pe==="y"&&qe.type==="category";return function(ut,ct){return ut===0||ct===0||Xe&&ut===Be[ct].length-1||nt&&ct===Be.length-1?-1:(ke==="y"?ct:ut)-1}}return function(ut,ct){return ke==="y"?ct:ut}}var me={min:function(Ze){return t.aggNums(Math.min,null,Ze)},max:function(Ze){return t.aggNums(Math.max,null,Ze)},sum:function(Ze){return t.aggNums(function(Ye,Be){return Ye+Be},null,Ze)},total:function(Ze){return t.aggNums(function(Ye,Be){return Ye+Be},null,Ze)},mean:function(Ze){return t.mean(Ze)},median:function(Ze){return t.median(Ze)}};for(xe=0;xe<ve.length;xe++){var Me=ve[xe];if(Me.type==="category"){var Re=Me.categoryorder.match(U);if(Re){var Ce=Re[1],ze=Re[2],le=Me._id.charAt(0),de=le==="x",be=[];for(Ae=0;Ae<Me._categories.length;Ae++)be.push([Me._categories[Ae],[]]);for(Ae=0;Ae<Me._traceIndices.length;Ae++){var Fe=Me._traceIndices[Ae],Ve=Ie._fullData[Fe];if(Ve.visible===!0){var He=Ve.type;x.traceIs(Ve,"histogram")&&(delete Ve._xautoBinFinished,delete Ve._yautoBinFinished);var rt=He==="splom",tt=He==="scattergl",ot=Ie.calcdata[Fe];for(Se=0;Se<ot.length;Se++){var ht,_t,dt=ot[Se];if(rt){var bt=Ve._axesDim[Me._id];if(!de){var St=Ve._diag[bt][0];St&&(Me=Ie._fullLayout[n.id2name(St)])}var Et=dt.trace.dimensions[bt].values;for(Te=0;Te<Et.length;Te++)for(ht=Me._categoriesMap[Et[Te]],Q=0;Q<dt.trace.dimensions.length;Q++)if(Q!==bt){var zt=dt.trace.dimensions[Q];be[ht][1].push(zt.values[Te])}}else if(tt){for(Te=0;Te<dt.t.x.length;Te++)de?(ht=dt.t.x[Te],_t=dt.t.y[Te]):(ht=dt.t.y[Te],_t=dt.t.x[Te]),be[ht][1].push(_t);dt.t&&dt.t._scene&&delete dt.t._scene.dirty}else if(dt.hasOwnProperty("z")){_t=dt.z;var Ut=ce(Ve.type,Me,_t);for(Te=0;Te<_t.length;Te++)for(Q=0;Q<_t[Te].length;Q++)(ht=Ut(Q,Te))+1&&be[ht][1].push(_t[Te][Q])}else for((ht=dt.p)===void 0&&(ht=dt[le]),(_t=dt.s)===void 0&&(_t=dt.v),_t===void 0&&(_t=de?dt.y:dt.x),Array.isArray(_t)||(_t=_t===void 0?[]:[_t]),Te=0;Te<_t.length;Te++)be[ht][1].push(_t[Te])}}}Me._categoriesValue=be;var Pt=[];for(Ae=0;Ae<be.length;Ae++)Pt.push([be[Ae][0],me[Ce](be[Ae][1])]);Pt.sort(function(Ze,Ye){return Ze[1]-Ye[1]}),Me._categoriesAggregatedValue=Pt,Me._initialCategories=Pt.map(function(Ze){return Ze[0]}),ze==="descending"&&Me._initialCategories.reverse(),oe=oe.concat(Me.sortByInitialCategories())}}}return oe}(V,F);if(he.length){for(J._numBoxes=0,J._numViolins=0,K=0;K<he.length;K++)ge(he[K],!0);for(K=0;K<he.length;K++)ge(he[K],!1);H(F)}x.getComponentMethod("fx","calc")(F),x.getComponentMethod("errorbars","calc")(F)};var U=/(total|sum|min|max|mean|median) (ascending|descending)/;function z(F,N,B){var j={};function K(J){J.clearCalc(),J.type==="multicategory"&&J.setupMultiCategory(N),j[J._id]=1}t.simpleMap(F,K);for(var G=B._axisMatchGroups||[],V=0;V<G.length;V++)for(var W in G[V])j[W]||K(B[n.id2name(W)])}function H(F){var N,B,j,K=F._fullLayout,G=K._visibleModules,V={};for(B=0;B<G.length;B++){var W=G[B],J=W.crossTraceCalc;if(J){var X=W.basePlotModule.name;V[X]?t.pushUnique(V[X],J):V[X]=[J]}}for(j in V){var ee=V[j],re=K._subplots[j];if(Array.isArray(re))for(N=0;N<re.length;N++){var ie=re[N],se=j==="cartesian"?K._plots[ie]:K[ie];for(B=0;B<ee.length;B++)ee[B](F,se,ie)}else for(B=0;B<ee.length;B++)ee[B](F)}}g.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},g.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},g.reselect=function(F){var N=F._fullLayout,B=(F.layout||{}).selections,j=N._previousSelections;N._previousSelections=B;var K=N._reselect||JSON.stringify(B)!==JSON.stringify(j);x.getComponentMethod("selections","reselect")(F,K)},g.generalUpdatePerTraceModule=function(F,N,B,j){var K,G=N.traceHash,V={};for(K=0;K<B.length;K++){var W=B[K],J=W[0].trace;J.visible&&(V[J.type]=V[J.type]||[],V[J.type].push(W))}for(var X in G)if(!V[X]){var ee=G[X][0];ee[0].trace.visible=!1,V[X]=[ee]}for(var re in V){var ie=V[re];ie[0][0].trace._module.plot(F,N,t.filterVisible(ie),j)}N.traceHash=V},g.plotBasePlot=function(F,N,B,j,K){var G=x.getModule(F),V=f(N.calcdata,G)[0];G.plot(N,V,j,K)},g.cleanBasePlot=function(F,N,B,j,K){var G=K._has&&K._has(F),V=B._has&&B._has(F);G&&!V&&K["_"+F+"layer"].selectAll("g.trace").remove()}},9813:function($){$.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function($,R,e){var A=e(71828),k=e(61082).tester,l=A.findIndexOfMin,T=A.isAngleInsideSector,x=A.angleDelta,d=A.angleDist;function s(n,a,i,c){var h,f,b=c[0],v=c[1],g=o(Math.sin(a)-Math.sin(n)),y=o(Math.cos(a)-Math.cos(n)),p=Math.tan(i),m=o(1/p),w=g/y,u=v-w*b;return m?g&&y?f=p*(h=u/(p-w)):y?(h=v*m,f=v):(h=b,f=b*p):g&&y?(h=0,f=u):y?(h=0,f=v):h=f=NaN,[h,f]}function t(n,a,i,c){return A.isFullCircle([a,i])?function(h,f){var b,v=f.length,g=new Array(v+1);for(b=0;b<v;b++){var y=f[b];g[b]=[h*Math.cos(y),h*Math.sin(y)]}return g[b]=g[0].slice(),g}(n,c):function(h,f,b,v){var g,y,p=v.length,m=[];function w(U){return[h*Math.cos(U),h*Math.sin(U)]}function u(U,z,H){return s(U,z,H,w(U))}function S(U){return A.mod(U,p)}function _(U){return T(U,[f,b])}var E=l(v,function(U){return _(U)?d(U,f):1/0}),L=u(v[E],v[S(E-1)],f);for(m.push(L),g=E,y=0;y<p;g++,y++){var C=v[S(g)];if(!_(C))break;m.push(w(C))}var P=l(v,function(U){return _(U)?d(U,b):1/0}),I=u(v[P],v[S(P+1)],b);return m.push(I),m.push([0,0]),m.push(m[0].slice()),m}(n,a,i,c)}function o(n){return Math.abs(n)>1e-10?n:0}function r(n,a,i){a=a||0,i=i||0;for(var c=n.length,h=new Array(c),f=0;f<c;f++){var b=n[f];h[f]=[a+b[0],i-b[1]]}return h}$.exports={isPtInsidePolygon:function(n,a,i,c,h){if(!T(a,c))return!1;var f,b;i[0]<i[1]?(f=i[0],b=i[1]):(f=i[1],b=i[0]);var v=k(t(f,c[0],c[1],h)),g=k(t(b,c[0],c[1],h)),y=[n*Math.cos(a),n*Math.sin(a)];return g.contains(y)&&!v.contains(y)},findPolygonOffset:function(n,a,i,c){for(var h=1/0,f=1/0,b=t(n,a,i,c),v=0;v<b.length;v++){var g=b[v];h=Math.min(h,g[0]),f=Math.min(f,-g[1])}return[h,f]},findEnclosingVertexAngles:function(n,a){var i=l(a,function(h){var f=x(h,n);return f>0?f:1/0}),c=A.mod(i+1,a.length);return[a[i],a[c]]},findIntersectionXY:s,findXYatLength:function(n,a,i,c){var h=-a*i,f=a*a+1,b=2*(a*h-i),v=h*h+i*i-n*n,g=Math.sqrt(b*b-4*f*v),y=(-b+g)/(2*f),p=(-b-g)/(2*f);return[[y,a*y+h+c],[p,a*p+h+c]]},clampTiny:o,pathPolygon:function(n,a,i,c,h,f){return"M"+r(t(n,a,i,c),h,f).join("L")},pathPolygonAnnulus:function(n,a,i,c,h,f,b){var v,g;n<a?(v=n,g=a):(v=a,g=n);var y=r(t(v,i,c,h),f,b);return"M"+r(t(g,i,c,h),f,b).reverse().join("L")+"M"+y.join("L")}}},23580:function($,R,e){var A=e(27659).AU,k=e(71828).counterRegex,l=e(77997),T=e(9813),x=T.attr,d=T.name,s=k(d),t={};t[x]={valType:"subplotid",dflt:d,editType:"calc"},$.exports={attr:x,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(73812),supplyLayoutDefaults:e(68993),plot:function(o){for(var r=o._fullLayout,n=o.calcdata,a=r._subplots[d],i=0;i<a.length;i++){var c=a[i],h=A(n,d,c),f=r[c]._subplot;f||(f=l(o,c),r[c]._subplot=f),f.plot(h,r,o._promises)}},clean:function(o,r,n,a){for(var i=a._subplots[d]||[],c=a._has&&a._has("gl"),h=r._has&&r._has("gl"),f=c&&!h,b=0;b<i.length;b++){var v=i[b],g=a[v]._subplot;if(!r[v]&&g)for(var y in g.framework.remove(),g.layers["radial-axis-title"].remove(),g.clipPaths)g.clipPaths[y].remove();f&&g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:e(93612).toSVG}},73812:function($,R,e){var A=e(22399),k=e(13838),l=e(27670).Y,T=e(71828).extendFlat,x=e(30962).overrideAll,d=x({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=x({tickmode:k.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(t,d,s);var o={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(o,d,s),$.exports={domain:l({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:A.background},radialaxis:t,angularaxis:o,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function($,R,e){var A=e(71828),k=e(7901),l=e(44467),T=e(49119),x=e(27659).NG,d=e(26218),s=e(38701),t=e(96115),o=e(89426),r=e(15258),n=e(92128),a=e(4322),i=e(73812),c=e(12101),h=e(9813),f=h.axisNames;function b(g,y,p,m){var w=p("bgcolor");m.bgColor=k.combine(w,m.paper_bgcolor);var u=p("sector");p("hole");var S,_=x(m.fullData,h.name,m.id),E=m.layoutOut;function L(J,X){return p(S+"."+J,X)}for(var C=0;C<f.length;C++){S=f[C],A.isPlainObject(g[S])||(g[S]={});var P=g[S],I=l.newContainer(y,S);I._id=I._name=S,I._attr=m.id+"."+S,I._traceIndices=_.map(function(J){return J._expandedIndex});var U=h.axisName2dataArray[S],z=v(P,I,L,_,U,m);r(P,I,L,{axData:_,dataAttr:U});var H=L("visible");switch(c(I,y,E),L("uirevision",y.uirevision),I._m=1,S){case"radialaxis":var F=L("autorange",!I.isValidRange(P.range));P.autorange=F,!F||z!=="linear"&&z!=="-"||L("rangemode"),F==="reversed"&&(I._m=-1),L("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(z==="date"){A.log("Polar plots do not support date angular axes yet.");for(var N=0;N<_.length;N++)_[N].visible=!1;z=P.type=I.type="linear"}L(z==="linear"?"thetaunit":"period");var B=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[B])}if(o(P,I,L,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"°":void 0}),H){var j,K,G,V,W=m.font||{};K=(j=L("color"))===P.color?j:W.color,G=W.size,V=W.family,d(P,I,L,I.type),t(P,I,L,I.type,{font:{color:K,size:G,family:V}}),s(P,I,L,{outerTicks:!0}),n(P,I,L,{dfltColor:j,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[S]}),L("layer"),S==="radialaxis"&&(L("side"),L("angle",u[0]),L("title.text"),A.coerceFont(L,"title.font",{color:K,size:A.bigFont(G),family:V}))}z!=="category"&&L("hoverformat"),I._input=P}y.angularaxis.type==="category"&&p("gridshape")}function v(g,y,p,m,w,u){var S=p("autotypenumbers",u.autotypenumbersDflt);if(p("type")==="-"){for(var _,E=0;E<m.length;E++)if(m[E].visible){_=m[E];break}_&&_[w]&&(y.type=a(_[w],"gregorian",{noMultiCategory:!0,autotypenumbers:S})),y.type==="-"?y.type="linear":g.type=y.type}return y.type}$.exports=function(g,y,p){T(g,y,p,{type:h.name,attributes:i,handleDefaults:b,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:p,layoutOut:y})}},77997:function($,R,e){var A=e(39898),k=e(84267),l=e(73972),T=e(71828),x=T.strRotate,d=T.strTranslate,s=e(7901),t=e(91424),o=e(74875),r=e(89298),n=e(21994),a=e(12101),i=e(71739).doAutoRange,c=e(29323),h=e(28569),f=e(30211),b=e(92998),v=e(47322).prepSelect,g=e(47322).selectOnClick,y=e(47322).clearOutline,p=e(6964),m=e(33306),w=e(61549).redrawReglTraces,u=e(18783).MID_SHIFT,S=e(9813),_=e(10869),E=e(23893),L=E.smith,C=E.reactanceArc,P=E.resistanceArc,I=E.smithTransform,U=T._,z=T.mod,H=T.deg2rad,F=T.rad2deg;function N(V,W,J){this.isSmith=J||!1,this.id=W,this.gd=V,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var X=V._fullLayout,ee="clip"+X._uid+W;this.clipIds.forTraces=ee+"-for-traces",this.clipPaths.forTraces=X._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=X["_"+(J?"smith":"polar")+"layer"].append("g").attr("class",W),this.getHole=function(re){return this.isSmith?0:re.hole},this.getSector=function(re){return this.isSmith?[0,360]:re.sector},this.getRadial=function(re){return this.isSmith?re.realaxis:re.radialaxis},this.getAngular=function(re){return this.isSmith?re.imaginaryaxis:re.angularaxis},J||(this.radialTickLayout=null,this.angularTickLayout=null)}var B=N.prototype;function j(V){var W=V.ticks+String(V.ticklen)+String(V.showticklabels);return"side"in V&&(W+=V.side),W}function K(V,W){return W[T.findIndexOfMin(W,function(J){return T.angleDist(V,J)})]}function G(V,W,J){return W?(V.attr("display",null),V.attr(J)):V&&V.attr("display","none"),V}$.exports=function(V,W,J){return new N(V,W,J)},B.plot=function(V,W){for(var J=this,X=W[J.id],ee=!1,re=0;re<V.length;re++)if(V[re][0].trace.cliponaxis===!1){ee=!0;break}J._hasClipOnAxisFalse=ee,J.updateLayers(W,X),J.updateLayout(W,X),o.generalUpdatePerTraceModule(J.gd,J,V,X),J.updateFx(W,X),J.isSmith&&(delete X.realaxis.range,delete X.imaginaryaxis.range)},B.updateLayers=function(V,W){var J=this,X=J.isSmith,ee=J.layers,re=J.getRadial(W),ie=J.getAngular(W),se=S.layerNames,fe=se.indexOf("frontplot"),ye=se.slice(0,fe),ge=ie.layer==="below traces",he=re.layer==="below traces";ge&&ye.push("angular-line"),he&&ye.push("radial-line"),ge&&ye.push("angular-axis"),he&&ye.push("radial-axis"),ye.push("frontplot"),ge||ye.push("angular-line"),he||ye.push("radial-line"),ge||ye.push("angular-axis"),he||ye.push("radial-axis");var ve=(X?"smith":"polar")+"sublayer",Ie=J.framework.selectAll("."+ve).data(ye,String);Ie.enter().append("g").attr("class",function(xe){return ve+" "+xe}).each(function(xe){var Ae=ee[xe]=A.select(this);switch(xe){case"frontplot":X||Ae.append("g").classed("barlayer",!0),Ae.append("g").classed("scatterlayer",!0);break;case"backplot":Ae.append("g").classed("maplayer",!0);break;case"plotbg":ee.bg=Ae.append("path");break;case"radial-grid":case"angular-grid":Ae.style("fill","none");break;case"radial-line":Ae.append("line").style("fill","none");break;case"angular-line":Ae.append("path").style("fill","none")}}),Ie.order()},B.updateLayout=function(V,W){var J=this,X=J.layers,ee=V._size,re=J.getRadial(W),ie=J.getAngular(W),se=W.domain.x,fe=W.domain.y;J.xOffset=ee.l+ee.w*se[0],J.yOffset=ee.t+ee.h*(1-fe[1]);var ye=J.xLength=ee.w*(se[1]-se[0]),ge=J.yLength=ee.h*(fe[1]-fe[0]),he=J.getSector(W);J.sectorInRad=he.map(H);var ve,Ie,xe,Ae,Se,Te=J.sectorBBox=function(tt){var ot,ht=tt[0],_t=tt[1]-ht,dt=z(ht,360),bt=dt+_t,St=Math.cos(H(dt)),Et=Math.sin(H(dt)),zt=Math.cos(H(bt)),Ut=Math.sin(H(bt));return ot=dt<=90&&bt>=90||dt>90&&bt>=450?1:Et<=0&&Ut<=0?0:Math.max(Et,Ut),[dt<=180&&bt>=180||dt>180&&bt>=540?-1:St>=0&&zt>=0?0:Math.min(St,zt),dt<=270&&bt>=270||dt>270&&bt>=630?-1:Et>=0&&Ut>=0?0:Math.min(Et,Ut),bt>=360?1:St<=0&&zt<=0?0:Math.max(St,zt),ot]}(he),Q=Te[2]-Te[0],oe=Te[3]-Te[1],ce=ge/ye,me=Math.abs(oe/Q);ce>me?(ve=ye,Se=(ge-(Ie=ye*me))/ee.h/2,xe=[se[0],se[1]],Ae=[fe[0]+Se,fe[1]-Se]):(Ie=ge,Se=(ye-(ve=ge/me))/ee.w/2,xe=[se[0]+Se,se[1]-Se],Ae=[fe[0],fe[1]]),J.xLength2=ve,J.yLength2=Ie,J.xDomain2=xe,J.yDomain2=Ae;var Me,Re=J.xOffset2=ee.l+ee.w*xe[0],Ce=J.yOffset2=ee.t+ee.h*(1-Ae[1]),ze=J.radius=ve/Q,le=J.innerRadius=J.getHole(W)*ze,de=J.cx=Re-ze*Te[0],be=J.cy=Ce+ze*Te[3],Fe=J.cxx=de-Re,Ve=J.cyy=be-Ce,He=re.side;He==="counterclockwise"?(Me=He,He="top"):He==="clockwise"&&(Me=He,He="bottom"),J.radialAxis=J.mockAxis(V,W,re,{_id:"x",side:He,_trueSide:Me,domain:[le/ee.w,ze/ee.w]}),J.angularAxis=J.mockAxis(V,W,ie,{side:"right",domain:[0,Math.PI],autorange:!1}),J.doAutoRange(V,W),J.updateAngularAxis(V,W),J.updateRadialAxis(V,W),J.updateRadialAxisTitle(V,W),J.xaxis=J.mockCartesianAxis(V,W,{_id:"x",domain:xe}),J.yaxis=J.mockCartesianAxis(V,W,{_id:"y",domain:Ae});var rt=J.pathSubplot();J.clipPaths.forTraces.select("path").attr("d",rt).attr("transform",d(Fe,Ve)),X.frontplot.attr("transform",d(Re,Ce)).call(t.setClipUrl,J._hasClipOnAxisFalse?null:J.clipIds.forTraces,J.gd),X.bg.attr("d",rt).attr("transform",d(de,be)).call(s.fill,W.bgcolor)},B.mockAxis=function(V,W,J,X){var ee=T.extendFlat({},J,X);return a(ee,W,V),ee},B.mockCartesianAxis=function(V,W,J){var X=this,ee=X.isSmith,re=J._id,ie=T.extendFlat({type:"linear"},J);n(ie,V);var se={x:[0,2],y:[1,3]};return ie.setRange=function(){var fe=X.sectorBBox,ye=se[re],ge=X.radialAxis._rl,he=(ge[1]-ge[0])/(1-X.getHole(W));ie.range=[fe[ye[0]]*he,fe[ye[1]]*he]},ie.isPtWithinRange=re!=="x"||ee?function(){return!0}:function(fe){return X.isPtInside(fe)},ie.setRange(),ie.setScale(),ie},B.doAutoRange=function(V,W){var J=this,X=J.gd,ee=J.radialAxis,re=J.getRadial(W);i(X,ee);var ie=ee.range;re.range=ie.slice(),re._input.range=ie.slice(),ee._rl=[ee.r2l(ie[0],null,"gregorian"),ee.r2l(ie[1],null,"gregorian")]},B.updateRadialAxis=function(V,W){var J=this,X=J.gd,ee=J.layers,re=J.radius,ie=J.innerRadius,se=J.cx,fe=J.cy,ye=J.getRadial(W),ge=z(J.getSector(W)[0],360),he=J.radialAxis,ve=ie<re,Ie=J.isSmith;Ie||(J.fillViewInitialKey("radialaxis.angle",ye.angle),J.fillViewInitialKey("radialaxis.range",he.range.slice()),he.setGeometry()),he.tickangle==="auto"&&ge>90&&ge<=270&&(he.tickangle=180);var xe=Ie?function(Ce){var ze=I(J,L([Ce.x,0]));return d(ze[0]-se,ze[1]-fe)}:function(Ce){return d(he.l2p(Ce.x)+ie,0)},Ae=Ie?function(Ce){return P(J,Ce.x,-1/0,1/0)}:function(Ce){return J.pathArc(he.r2p(Ce.x)+ie)},Se=j(ye);if(J.radialTickLayout!==Se&&(ee["radial-axis"].selectAll(".xtick").remove(),J.radialTickLayout=Se),ve){he.setScale();var Te=0,Q=Ie?(he.tickvals||[]).filter(function(Ce){return Ce>=0}).map(function(Ce){return r.tickText(he,Ce,!0,!1)}):r.calcTicks(he),oe=Ie?Q:r.clipEnds(he,Q),ce=r.getTickSigns(he)[2];Ie&&((he.ticks==="top"&&he.side==="bottom"||he.ticks==="bottom"&&he.side==="top")&&(ce=-ce),he.ticks==="top"&&he.side==="top"&&(Te=-he.ticklen),he.ticks==="bottom"&&he.side==="bottom"&&(Te=he.ticklen)),r.drawTicks(X,he,{vals:Q,layer:ee["radial-axis"],path:r.makeTickPath(he,0,ce),transFn:xe,crisp:!1}),r.drawGrid(X,he,{vals:oe,layer:ee["radial-grid"],path:Ae,transFn:T.noop,crisp:!1}),r.drawLabels(X,he,{vals:Q,layer:ee["radial-axis"],transFn:xe,labelFns:r.makeLabelFns(he,Te)})}var me=J.radialAxisAngle=J.vangles?F(K(H(ye.angle),J.vangles)):ye.angle,Me=d(se,fe),Re=Me+x(-me);G(ee["radial-axis"],ve&&(ye.showticklabels||ye.ticks),{transform:Re}),G(ee["radial-grid"],ve&&ye.showgrid,{transform:Ie?"":Me}),G(ee["radial-line"].select("line"),ve&&ye.showline,{x1:Ie?-re:ie,y1:0,x2:re,y2:0,transform:Re}).attr("stroke-width",ye.linewidth).call(s.stroke,ye.linecolor)},B.updateRadialAxisTitle=function(V,W,J){if(!this.isSmith){var X=this,ee=X.gd,re=X.radius,ie=X.cx,se=X.cy,fe=X.getRadial(W),ye=X.id+"title",ge=0;if(fe.title){var he=t.bBox(X.layers["radial-axis"].node()).height,ve=fe.title.font.size,Ie=fe.side;ge=Ie==="top"?ve:Ie==="counterclockwise"?-(he+.4*ve):he+.8*ve}var xe=J!==void 0?J:X.radialAxisAngle,Ae=H(xe),Se=Math.cos(Ae),Te=Math.sin(Ae),Q=ie+re/2*Se+ge*Te,oe=se-re/2*Te+ge*Se;X.layers["radial-axis-title"]=b.draw(ee,ye,{propContainer:fe,propName:X.id+".radialaxis.title",placeholder:U(ee,"Click to enter radial axis title"),attributes:{x:Q,y:oe,"text-anchor":"middle"},transform:{rotate:-xe}})}},B.updateAngularAxis=function(V,W){var J=this,X=J.gd,ee=J.layers,re=J.radius,ie=J.innerRadius,se=J.cx,fe=J.cy,ye=J.getAngular(W),ge=J.angularAxis,he=J.isSmith;he||(J.fillViewInitialKey("angularaxis.rotation",ye.rotation),ge.setGeometry(),ge.setScale());var ve=he?function(Ce){var ze=I(J,L([0,Ce.x]));return Math.atan2(ze[0]-se,ze[1]-fe)-Math.PI/2}:function(Ce){return ge.t2g(Ce.x)};ge.type==="linear"&&ge.thetaunit==="radians"&&(ge.tick0=F(ge.tick0),ge.dtick=F(ge.dtick));var Ie=function(Ce){return d(se+re*Math.cos(Ce),fe-re*Math.sin(Ce))},xe=he?function(Ce){var ze=I(J,L([0,Ce.x]));return d(ze[0],ze[1])}:function(Ce){return Ie(ve(Ce))},Ae=he?function(Ce){var ze=I(J,L([0,Ce.x])),le=Math.atan2(ze[0]-se,ze[1]-fe)-Math.PI/2;return d(ze[0],ze[1])+x(-F(le))}:function(Ce){var ze=ve(Ce);return Ie(ze)+x(-F(ze))},Se=he?function(Ce){return C(J,Ce.x,0,1/0)}:function(Ce){var ze=ve(Ce),le=Math.cos(ze),de=Math.sin(ze);return"M"+[se+ie*le,fe-ie*de]+"L"+[se+re*le,fe-re*de]},Te=r.makeLabelFns(ge,0).labelStandoff,Q={xFn:function(Ce){var ze=ve(Ce);return Math.cos(ze)*Te},yFn:function(Ce){var ze=ve(Ce),le=Math.sin(ze)>0?.2:1;return-Math.sin(ze)*(Te+Ce.fontSize*le)+Math.abs(Math.cos(ze))*(Ce.fontSize*u)},anchorFn:function(Ce){var ze=ve(Ce),le=Math.cos(ze);return Math.abs(le)<.1?"middle":le>0?"start":"end"},heightFn:function(Ce,ze,le){var de=ve(Ce);return-.5*(1+Math.sin(de))*le}},oe=j(ye);J.angularTickLayout!==oe&&(ee["angular-axis"].selectAll("."+ge._id+"tick").remove(),J.angularTickLayout=oe);var ce,me=he?[1/0].concat(ge.tickvals||[]).map(function(Ce){return r.tickText(ge,Ce,!0,!1)}):r.calcTicks(ge);if(he&&(me[0].text="∞",me[0].fontSize*=1.75),W.gridshape==="linear"?(ce=me.map(ve),T.angleDelta(ce[0],ce[1])<0&&(ce=ce.slice().reverse())):ce=null,J.vangles=ce,ge.type==="category"&&(me=me.filter(function(Ce){return T.isAngleInsideSector(ve(Ce),J.sectorInRad)})),ge.visible){var Me=ge.ticks==="inside"?-1:1,Re=(ge.linewidth||1)/2;r.drawTicks(X,ge,{vals:me,layer:ee["angular-axis"],path:"M"+Me*Re+",0h"+Me*ge.ticklen,transFn:Ae,crisp:!1}),r.drawGrid(X,ge,{vals:me,layer:ee["angular-grid"],path:Se,transFn:T.noop,crisp:!1}),r.drawLabels(X,ge,{vals:me,layer:ee["angular-axis"],repositionOnUpdate:!0,transFn:xe,labelFns:Q})}G(ee["angular-line"].select("path"),ye.showline,{d:J.pathSubplot(),transform:d(se,fe)}).attr("stroke-width",ye.linewidth).call(s.stroke,ye.linecolor)},B.updateFx=function(V,W){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(V),this.updateRadialDrag(V,W,0),this.updateRadialDrag(V,W,1)),this.updateHoverAndMainDrag(V))},B.updateHoverAndMainDrag=function(V){var W,J,X=this,ee=X.isSmith,re=X.gd,ie=X.layers,se=V._zoomlayer,fe=S.MINZOOM,ye=S.OFFEDGE,ge=X.radius,he=X.innerRadius,ve=X.cx,Ie=X.cy,xe=X.cxx,Ae=X.cyy,Se=X.sectorInRad,Te=X.vangles,Q=X.radialAxis,oe=_.clampTiny,ce=_.findXYatLength,me=_.findEnclosingVertexAngles,Me=S.cornerHalfWidth,Re=S.cornerLen/2,Ce=c.makeDragger(ie,"path","maindrag",V.dragmode===!1?"none":"crosshair");A.select(Ce).attr("d",X.pathSubplot()).attr("transform",d(ve,Ie)),Ce.onmousemove=function(qe){f.hover(re,qe,X.id),re._fullLayout._lasthover=Ce,re._fullLayout._hoversubplot=X.id},Ce.onmouseout=function(qe){re._dragging||h.unhover(re,qe)};var ze,le,de,be,Fe,Ve,He,rt,tt,ot={element:Ce,gd:re,subplot:X.id,plotinfo:{id:X.id,xaxis:X.xaxis,yaxis:X.yaxis},xaxes:[X.xaxis],yaxes:[X.yaxis]};function ht(qe,Xe){return Math.sqrt(qe*qe+Xe*Xe)}function _t(qe,Xe){return ht(qe-xe,Xe-Ae)}function dt(qe,Xe){return Math.atan2(Ae-Xe,qe-xe)}function bt(qe,Xe){return[qe*Math.cos(Xe),qe*Math.sin(-Xe)]}function St(qe,Xe){if(qe===0)return X.pathSector(2*Me);var nt=Re/qe,ut=Xe-nt,ct=Xe+nt,Ct=Math.max(0,Math.min(qe,ge)),Lt=Ct-Me,Mt=Ct+Me;return"M"+bt(Lt,ut)+"A"+[Lt,Lt]+" 0,0,0 "+bt(Lt,ct)+"L"+bt(Mt,ct)+"A"+[Mt,Mt]+" 0,0,1 "+bt(Mt,ut)+"Z"}function Et(qe,Xe,nt){if(qe===0)return X.pathSector(2*Me);var ut,ct,Ct=bt(qe,Xe),Lt=bt(qe,nt),Mt=oe((Ct[0]+Lt[0])/2),mt=oe((Ct[1]+Lt[1])/2);if(Mt&&mt){var kt=mt/Mt,wt=-1/kt,Ot=ce(Me,kt,Mt,mt);ut=ce(Re,wt,Ot[0][0],Ot[0][1]),ct=ce(Re,wt,Ot[1][0],Ot[1][1])}else{var It,Nt;mt?(It=Re,Nt=Me):(It=Me,Nt=Re),ut=[[Mt-It,mt-Nt],[Mt+It,mt-Nt]],ct=[[Mt-It,mt+Nt],[Mt+It,mt+Nt]]}return"M"+ut.join("L")+"L"+ct.reverse().join("L")+"Z"}function zt(qe,Xe){return Xe=Math.max(Math.min(Xe,ge),he),qe<ye?qe=0:ge-qe<ye?qe=ge:Xe<ye?Xe=0:ge-Xe<ye&&(Xe=ge),Math.abs(Xe-qe)>fe?(qe<Xe?(de=qe,be=Xe):(de=Xe,be=qe),!0):(de=null,be=null,!1)}function Ut(qe,Xe){qe=qe||Fe,Xe=Xe||"M0,0Z",rt.attr("d",qe),tt.attr("d",Xe),c.transitionZoombox(rt,tt,Ve,He),Ve=!0;var nt={};ke(nt),re.emit("plotly_relayouting",nt)}function Pt(qe,Xe){var nt,ut,ct=ze+(qe*=W),Ct=le+(Xe*=J),Lt=_t(ze,le),Mt=Math.min(_t(ct,Ct),ge),mt=dt(ze,le);zt(Lt,Mt)&&(nt=Fe+X.pathSector(be),de&&(nt+=X.pathSector(de)),ut=St(de,mt)+St(be,mt)),Ut(nt,ut)}function Ze(qe,Xe,nt,ut){var ct=_.findIntersectionXY(nt,ut,nt,[qe-xe,Ae-Xe]);return ht(ct[0],ct[1])}function Ye(qe,Xe){var nt,ut,ct=ze+qe,Ct=le+Xe,Lt=dt(ze,le),Mt=dt(ct,Ct),mt=me(Lt,Te),kt=me(Mt,Te);zt(Ze(ze,le,mt[0],mt[1]),Math.min(Ze(ct,Ct,kt[0],kt[1]),ge))&&(nt=Fe+X.pathSector(be),de&&(nt+=X.pathSector(de)),ut=[Et(de,mt[0],mt[1]),Et(be,mt[0],mt[1])].join(" ")),Ut(nt,ut)}function Be(){if(c.removeZoombox(re),de!==null&&be!==null){var qe={};ke(qe),c.showDoubleClickNotifier(re),l.call("_guiRelayout",re,qe)}}function ke(qe){var Xe=Q._rl,nt=(Xe[1]-Xe[0])/(1-he/ge)/ge,ut=[Xe[0]+(de-he)*nt,Xe[0]+(be-he)*nt];qe[X.id+".radialaxis.range"]=ut}function Pe(qe,Xe){var nt=re._fullLayout.clickmode;if(c.removeZoombox(re),qe===2){var ut={};for(var ct in X.viewInitial)ut[X.id+"."+ct]=X.viewInitial[ct];re.emit("plotly_doubleclick",null),l.call("_guiRelayout",re,ut)}nt.indexOf("select")>-1&&qe===1&&g(Xe,re,[X.xaxis],[X.yaxis],X.id,ot),nt.indexOf("event")>-1&&f.click(re,Xe,X.id)}ot.prepFn=function(qe,Xe,nt){var ut=re._fullLayout.dragmode,ct=Ce.getBoundingClientRect();re._fullLayout._calcInverseTransform(re);var Ct=re._fullLayout._invTransform;W=re._fullLayout._invScaleX,J=re._fullLayout._invScaleY;var Lt=T.apply3DTransform(Ct)(Xe-ct.left,nt-ct.top);if(ze=Lt[0],le=Lt[1],Te){var Mt=_.findPolygonOffset(ge,Se[0],Se[1],Te);ze+=xe+Mt[0],le+=Ae+Mt[1]}switch(ut){case"zoom":ot.clickFn=Pe,ee||(ot.moveFn=Te?Ye:Pt,ot.doneFn=Be,function(){de=null,be=null,Fe=X.pathSubplot(),Ve=!1;var mt=re._fullLayout[X.id];He=k(mt.bgcolor).getLuminance(),(rt=c.makeZoombox(se,He,ve,Ie,Fe)).attr("fill-rule","evenodd"),tt=c.makeCorners(se,ve,Ie),y(re)}());break;case"select":case"lasso":v(qe,Xe,nt,ot,ut)}},h.init(ot)},B.updateRadialDrag=function(V,W,J){var X=this,ee=X.gd,re=X.layers,ie=X.radius,se=X.innerRadius,fe=X.cx,ye=X.cy,ge=X.radialAxis,he=S.radialDragBoxSize,ve=he/2;if(ge.visible){var Ie,xe,Ae,Se=H(X.radialAxisAngle),Te=ge._rl,Q=Te[0],oe=Te[1],ce=Te[J],me=.75*(Te[1]-Te[0])/(1-X.getHole(W))/ie;J?(Ie=fe+(ie+ve)*Math.cos(Se),xe=ye-(ie+ve)*Math.sin(Se),Ae="radialdrag"):(Ie=fe+(se-ve)*Math.cos(Se),xe=ye-(se-ve)*Math.sin(Se),Ae="radialdrag-inner");var Me,Re,Ce,ze=c.makeRectDragger(re,Ae,"crosshair",-ve,-ve,he,he),le={element:ze,gd:ee};V.dragmode===!1&&(le.dragmode=!1),G(A.select(ze),ge.visible&&se<ie,{transform:d(Ie,xe)}),le.prepFn=function(){Me=null,Re=null,Ce=null,le.moveFn=de,le.doneFn=be,y(ee)},le.clampFn=function(He,rt){return Math.sqrt(He*He+rt*rt)<S.MINDRAG&&(He=0,rt=0),[He,rt]},h.init(le)}function de(He,rt){if(Me)Me(He,rt);else{var tt=[He,-rt],ot=[Math.cos(Se),Math.sin(Se)],ht=Math.abs(T.dot(tt,ot)/Math.sqrt(T.dot(tt,tt)));isNaN(ht)||(Me=ht<.5?Fe:Ve)}var _t={};(function(dt){Re!==null?dt[X.id+".radialaxis.angle"]=Re:Ce!==null&&(dt[X.id+".radialaxis.range["+J+"]"]=Ce)})(_t),ee.emit("plotly_relayouting",_t)}function be(){Re!==null?l.call("_guiRelayout",ee,X.id+".radialaxis.angle",Re):Ce!==null&&l.call("_guiRelayout",ee,X.id+".radialaxis.range["+J+"]",Ce)}function Fe(He,rt){if(J!==0){var tt=Ie+He,ot=xe+rt;Re=Math.atan2(ye-ot,tt-fe),X.vangles&&(Re=K(Re,X.vangles)),Re=F(Re);var ht=d(fe,ye)+x(-Re);re["radial-axis"].attr("transform",ht),re["radial-line"].select("line").attr("transform",ht);var _t=X.gd._fullLayout,dt=_t[X.id];X.updateRadialAxisTitle(_t,dt,Re)}}function Ve(He,rt){var tt=T.dot([He,-rt],[Math.cos(Se),Math.sin(Se)]);if(Ce=ce-me*tt,me>0==(J?Ce>Q:Ce<oe)){var ot=ee._fullLayout,ht=ot[X.id];ge.range[J]=Ce,ge._rl[J]=Ce,X.updateRadialAxis(ot,ht),X.xaxis.setRange(),X.xaxis.setScale(),X.yaxis.setRange(),X.yaxis.setScale();var _t=!1;for(var dt in X.traceHash){var bt=X.traceHash[dt],St=T.filterVisible(bt);bt[0][0].trace._module.plot(ee,X,St,ht),l.traceIs(dt,"gl")&&St.length&&(_t=!0)}_t&&(m(ee),w(ee))}else Ce=null}},B.updateAngularDrag=function(V){var W=this,J=W.gd,X=W.layers,ee=W.radius,re=W.angularAxis,ie=W.cx,se=W.cy,fe=W.cxx,ye=W.cyy,ge=S.angularDragBoxSize,he=c.makeDragger(X,"path","angulardrag",V.dragmode===!1?"none":"move"),ve={element:he,gd:J};function Ie(le,de){return Math.atan2(ye+ge-de,le-fe-ge)}V.dragmode===!1?ve.dragmode=!1:A.select(he).attr("d",W.pathAnnulus(ee,ee+ge)).attr("transform",d(ie,se)).call(p,"move");var xe,Ae,Se,Te,Q,oe,ce=X.frontplot.select(".scatterlayer").selectAll(".trace"),me=ce.selectAll(".point"),Me=ce.selectAll(".textpoint");function Re(le,de){var be=W.gd._fullLayout,Fe=be[W.id],Ve=Ie(xe+le*V._invScaleX,Ae+de*V._invScaleY),He=F(Ve-oe);if(Te=Se+He,X.frontplot.attr("transform",d(W.xOffset2,W.yOffset2)+x([-He,fe,ye])),W.vangles){Q=W.radialAxisAngle+He;var rt=d(ie,se)+x(-He),tt=d(ie,se)+x(-Q);X.bg.attr("transform",rt),X["radial-grid"].attr("transform",rt),X["radial-axis"].attr("transform",tt),X["radial-line"].select("line").attr("transform",tt),W.updateRadialAxisTitle(be,Fe,Q)}else W.clipPaths.forTraces.select("path").attr("transform",d(fe,ye)+x(He));me.each(function(){var St=A.select(this),Et=t.getTranslate(St);St.attr("transform",d(Et.x,Et.y)+x([He]))}),Me.each(function(){var St=A.select(this),Et=St.select("text"),zt=t.getTranslate(St);St.attr("transform",x([He,Et.attr("x"),Et.attr("y")])+d(zt.x,zt.y))}),re.rotation=T.modHalf(Te,360),W.updateAngularAxis(be,Fe),W._hasClipOnAxisFalse&&!T.isFullCircle(W.sectorInRad)&&ce.call(t.hideOutsideRangePoints,W);var ot=!1;for(var ht in W.traceHash)if(l.traceIs(ht,"gl")){var _t=W.traceHash[ht],dt=T.filterVisible(_t);_t[0][0].trace._module.plot(J,W,dt,Fe),dt.length&&(ot=!0)}ot&&(m(J),w(J));var bt={};Ce(bt),J.emit("plotly_relayouting",bt)}function Ce(le){le[W.id+".angularaxis.rotation"]=Te,W.vangles&&(le[W.id+".radialaxis.angle"]=Q)}function ze(){Me.select("text").attr("transform",null);var le={};Ce(le),l.call("_guiRelayout",J,le)}ve.prepFn=function(le,de,be){var Fe=V[W.id];Se=Fe.angularaxis.rotation;var Ve=he.getBoundingClientRect();xe=de-Ve.left,Ae=be-Ve.top,J._fullLayout._calcInverseTransform(J);var He=T.apply3DTransform(V._invTransform)(xe,Ae);xe=He[0],Ae=He[1],oe=Ie(xe,Ae),ve.moveFn=Re,ve.doneFn=ze,y(J)},W.vangles&&!T.isFullCircle(W.sectorInRad)&&(ve.prepFn=T.noop,p(A.select(he),null)),h.init(ve)},B.isPtInside=function(V){if(this.isSmith)return!0;var W=this.sectorInRad,J=this.vangles,X=this.angularAxis.c2g(V.theta),ee=this.radialAxis,re=ee.c2l(V.r),ie=ee._rl;return(J?_.isPtInsidePolygon:T.isPtInsideSector)(re,X,ie,W,J)},B.pathArc=function(V){var W=this.sectorInRad,J=this.vangles;return(J?_.pathPolygon:T.pathArc)(V,W[0],W[1],J)},B.pathSector=function(V){var W=this.sectorInRad,J=this.vangles;return(J?_.pathPolygon:T.pathSector)(V,W[0],W[1],J)},B.pathAnnulus=function(V,W){var J=this.sectorInRad,X=this.vangles;return(X?_.pathPolygonAnnulus:T.pathAnnulus)(V,W,J[0],J[1],X)},B.pathSubplot=function(){var V=this.innerRadius,W=this.radius;return V?this.pathAnnulus(V,W):this.pathSector(W)},B.fillViewInitialKey=function(V,W){V in this.viewInitial||(this.viewInitial[V]=W)}},12101:function($,R,e){var A=e(71828),k=e(21994),l=A.deg2rad,T=A.rad2deg;$.exports=function(x,d,s){switch(k(x,s),x._id){case"x":case"radialaxis":(function(t,o){var r=o._subplot;t.setGeometry=function(){var n=t._rl[0],a=t._rl[1],i=r.innerRadius,c=(r.radius-i)/(a-n),h=i/c,f=n>a?function(b){return b<=0}:function(b){return b>=0};t.c2g=function(b){var v=t.c2l(b)-n;return(f(v)?v:0)+h},t.g2c=function(b){return t.l2c(b+n-h)},t.g2p=function(b){return b*c},t.c2p=function(b){return t.g2p(t.c2g(b))}}})(x,d);break;case"angularaxis":(function(t,o){var r=t.type;if(r==="linear"){var n=t.d2c,a=t.c2d;t.d2c=function(i,c){return function(h,f){return f==="degrees"?l(h):h}(n(i),c)},t.c2d=function(i,c){return a(function(h,f){return f==="degrees"?T(h):h}(i,c))}}t.makeCalcdata=function(i,c){var h,f,b=i[c],v=i._length,g=function(u){return t.d2c(u,i.thetaunit)};if(b){if(A.isTypedArray(b)&&r==="linear"){if(v===b.length)return b;if(b.subarray)return b.subarray(0,v)}for(h=new Array(v),f=0;f<v;f++)h[f]=g(b[f])}else{var y=c+"0",p="d"+c,m=y in i?g(i[y]):0,w=i[p]?g(i[p]):(t.period||2*Math.PI)/v;for(h=new Array(v),f=0;f<v;f++)h[f]=m+f*w}return h},t.setGeometry=function(){var i,c,h,f,b=o.sector,v=b.map(l),g={clockwise:-1,counterclockwise:1}[t.direction],y=l(t.rotation),p=function(S){return g*S+y},m=function(S){return(S-y)/g};switch(r){case"linear":c=i=A.identity,f=l,h=T,t.range=A.isFullCircle(v)?[b[0],b[0]+360]:v.map(m).map(T);break;case"category":var w=t._categories.length,u=t.period?Math.max(t.period,w):w;u===0&&(u=1),c=f=function(S){return 2*S*Math.PI/u},i=h=function(S){return S*u/Math.PI/2},t.range=[0,u]}t.c2g=function(S){return p(c(S))},t.g2c=function(S){return i(m(S))},t.t2g=function(S){return p(f(S))},t.g2t=function(S){return h(m(S))}}})(x,d)}}},39779:function($){$.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function($){function R(l){return l<0?-1:l>0?1:0}function e(l){var T=l[0],x=l[1];if(!isFinite(T)||!isFinite(x))return[1,0];var d=(T+1)*(T+1)+x*x;return[(T*T+x*x-1)/d,2*x/d]}function A(l,T){var x=T[0],d=T[1];return[x*l.radius+l.cx,-d*l.radius+l.cy]}function k(l,T){return T*l.radius}$.exports={smith:e,reactanceArc:function(l,T,x,d){var s=A(l,e([x,T])),t=s[0],o=s[1],r=A(l,e([d,T])),n=r[0],a=r[1];if(T===0)return["M"+t+","+o,"L"+n+","+a].join(" ");var i=k(l,1/Math.abs(T));return["M"+t+","+o,"A"+i+","+i+" 0 0,"+(T<0?1:0)+" "+n+","+a].join(" ")},resistanceArc:function(l,T,x,d){var s=k(l,1/(T+1)),t=A(l,e([T,x])),o=t[0],r=t[1],n=A(l,e([T,d])),a=n[0],i=n[1];if(R(x)!==R(d)){var c=A(l,e([T,0]));return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(0<x?0:1)+" "+c[0]+","+c[1],"A"+s+","+s+" 0 0,"+(d<0?0:1)+a+","+i].join(" ")}return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(d<x?0:1)+" "+a+","+i].join(" ")},smithTransform:A}},7504:function($,R,e){var A=e(27659).AU,k=e(71828).counterRegex,l=e(77997),T=e(39779),x=T.attr,d=T.name,s=k(d),t={};t[x]={valType:"subplotid",dflt:d,editType:"calc"},$.exports={attr:x,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(33419),supplyLayoutDefaults:e(9558),plot:function(o){for(var r=o._fullLayout,n=o.calcdata,a=r._subplots[d],i=0;i<a.length;i++){var c=a[i],h=A(n,d,c),f=r[c]._subplot;f||(f=l(o,c,!0),r[c]._subplot=f),f.plot(h,r,o._promises)}},clean:function(o,r,n,a){for(var i=a._subplots[d]||[],c=0;c<i.length;c++){var h=i[c],f=a[h]._subplot;if(!r[h]&&f)for(var b in f.framework.remove(),f.clipPaths)f.clipPaths[b].remove()}},toSVG:e(93612).toSVG}},33419:function($,R,e){var A=e(22399),k=e(13838),l=e(27670).Y,T=e(71828).extendFlat,x=e(30962).overrideAll,d=x({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=x({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},d,s),o=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},d,s);$.exports={domain:l({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:A.background},realaxis:t,imaginaryaxis:o,editType:"calc"}},9558:function($,R,e){var A,k,l,T=e(71828),x=e(7901),d=e(44467),s=e(49119),t=e(27659).NG,o=e(89426),r=e(96115),n=e(92128),a=e(21994),i=e(33419),c=e(39779),h=c.axisNames,f=(A=function(v){return v.slice().reverse().map(function(g){return-g}).concat([0]).concat(v)},k=String,l={},function(v){var g=k?k(v):v;if(g in l)return l[g];var y=A(v);return l[g]=y,y});function b(v,g,y,p){var m=y("bgcolor");p.bgColor=x.combine(m,p.paper_bgcolor);var w,u=t(p.fullData,c.name,p.id),S=p.layoutOut;function _(B,j){return y(w+"."+B,j)}for(var E=0;E<h.length;E++){w=h[E],T.isPlainObject(v[w])||(v[w]={});var L=v[w],C=d.newContainer(g,w);C._id=C._name=w,C._attr=p.id+"."+w,C._traceIndices=u.map(function(B){return B._expandedIndex});var P=_("visible");if(C.type="linear",a(C,S),o(L,C,_,C.type),P){var I,U,z,H,F=w==="realaxis";F&&_("side"),F?_("tickvals"):_("tickvals",f(g.realaxis.tickvals||i.realaxis.tickvals.dflt));var N=p.font||{};P&&(U=(I=_("color"))===L.color?I:N.color,z=N.size,H=N.family),r(L,C,_,C.type,{noTicklabelstep:!0,noAng:!F,noExp:!0,font:{color:U,size:z,family:H}}),T.coerce2(v,g,i,w+".ticklen"),T.coerce2(v,g,i,w+".tickwidth"),T.coerce2(v,g,i,w+".tickcolor",g.color),_("ticks")||(delete g[w].ticklen,delete g[w].tickwidth,delete g[w].tickcolor),n(L,C,_,{dfltColor:I,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[w]}),_("layer")}_("hoverformat"),delete C.type,C._input=L}}$.exports=function(v,g,y){s(v,g,y,{noUirevision:!0,type:c.name,attributes:i,handleDefaults:b,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:y,layoutOut:g})}},49119:function($,R,e){var A=e(71828),k=e(44467),l=e(27670).c;$.exports=function(T,x,d,s){var t,o,r=s.type,n=s.attributes,a=s.handleDefaults,i=s.partition||"x",c=x._subplots[r],h=c.length,f=h&&c[0].replace(/\d+$/,"");function b(p,m){return A.coerce(t,o,n,p,m)}for(var v=0;v<h;v++){var g=c[v];t=T[g]?T[g]:T[g]={},o=k.newContainer(x,g,f),s.noUirevision||b("uirevision",x.uirevision);var y={};y[i]=[v/h,(v+1)/h],l(o,x,b,y),s.id=g,a(t,o,b,s)}}},5386:function($,R,e){var A=e(31562);function k(l){var T=l.description?" "+l.description:"",x=l.keys||[];if(x.length>0){for(var d=[],s=0;s<x.length;s++)d[s]="`"+x[s]+"`";T+="Finally, the template string has access to ",T=x.length===1?"variable "+d[0]:"variables "+d.slice(0,-1).join(", ")+" and "+d.slice(-1)+"."}return T}A.FORMAT_LINK,A.DATE_FORMAT_LINK,R.f=function(l,T){l=l||{},k(T=T||{});var x={valType:"string",dflt:"",editType:l.editType||"none"};return l.arrayOk!==!1&&(x.arrayOk=!0),x},R.s=function(l,T){l=l||{},k(T=T||{});var x={valType:"string",dflt:"",editType:l.editType||"calc"};return l.arrayOk!==!1&&(x.arrayOk=!0),x}},61639:function($,R,e){var A=e(64380),k=e(27659).AU,l=e(71828).counterRegex,T="ternary";R.name=T;var x=R.attr="subplot";R.idRoot=T,R.idRegex=R.attrRegex=l(T),(R.attributes={})[x]={valType:"subplotid",dflt:"ternary",editType:"calc"},R.layoutAttributes=e(81367),R.supplyLayoutDefaults=e(25369),R.plot=function(d){for(var s=d._fullLayout,t=d.calcdata,o=s._subplots.ternary,r=0;r<o.length;r++){var n=o[r],a=k(t,T,n),i=s[n]._subplot;i||(i=new A({id:n,graphDiv:d,container:s._ternarylayer.node()},s),s[n]._subplot=i),i.plot(a,s,d._promises)}},R.clean=function(d,s,t,o){for(var r=o._subplots.ternary||[],n=0;n<r.length;n++){var a=r[n],i=o[a]._subplot;!s[a]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},81367:function($,R,e){var A=e(22399),k=e(27670).Y,l=e(13838),T=e(30962).overrideAll,x=e(1426).extendFlat,d={title:{text:l.title.text,font:l.title.font},color:l.color,tickmode:l.tickmode,nticks:x({},l.nticks,{dflt:6,min:1}),tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:x({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:x({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,griddash:l.griddash,layer:l.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},s=$.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:A.background},sum:{valType:"number",dflt:1,min:0},aaxis:d,baxis:d,caxis:d},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},25369:function($,R,e){var A=e(7901),k=e(44467),l=e(71828),T=e(49119),x=e(96115),d=e(89426),s=e(38701),t=e(26218),o=e(92128),r=e(81367),n=["aaxis","baxis","caxis"];function a(c,h,f,b){var v,g,y,p=f("bgcolor"),m=f("sum");b.bgColor=A.combine(p,b.paper_bgcolor);for(var w=0;w<n.length;w++)g=c[v=n[w]]||{},(y=k.newContainer(h,v))._name=v,i(g,y,b,h);var u=h.aaxis,S=h.baxis,_=h.caxis;u.min+S.min+_.min>=m&&(u.min=0,S.min=0,_.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function i(c,h,f,b){var v=r[h._name];function g(S,_){return l.coerce(c,h,v,S,_)}g("uirevision",b.uirevision),h.type="linear";var y=g("color"),p=y!==v.color.dflt?y:f.font.color,m=h._name.charAt(0).toUpperCase(),w="Component "+m,u=g("title.text",w);h._hovertitle=u===w?u:m,l.coerceFont(g,"title.font",{family:f.font.family,size:l.bigFont(f.font.size),color:p}),g("min"),t(c,h,g,"linear"),d(c,h,g,"linear"),x(c,h,g,"linear"),s(c,h,g,{outerTicks:!0}),g("showticklabels")&&(l.coerceFont(g,"tickfont",{family:f.font.family,size:f.font.size,color:p}),g("tickangle"),g("tickformat")),o(c,h,g,{dfltColor:y,bgColor:f.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v}),g("hoverformat"),g("layer")}$.exports=function(c,h,f){T(c,h,f,{type:"ternary",attributes:r,handleDefaults:a,font:h.font,paper_bgcolor:h.paper_bgcolor})}},64380:function($,R,e){var A=e(39898),k=e(84267),l=e(73972),T=e(71828),x=T.strTranslate,d=T._,s=e(7901),t=e(91424),o=e(21994),r=e(1426).extendFlat,n=e(74875),a=e(89298),i=e(28569),c=e(30211),h=e(64505),f=h.freeMode,b=h.rectMode,v=e(92998),g=e(47322).prepSelect,y=e(47322).selectOnClick,p=e(47322).clearOutline,m=e(47322).clearSelectionsCache,w=e(85555);function u(z,H){this.id=z.id,this.graphDiv=z.graphDiv,this.init(H),this.makeFramework(H),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}$.exports=u;var S=u.prototype;S.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},S.plot=function(z,H){var F=this,N=H[F.id],B=H._size;F._hasClipOnAxisFalse=!1;for(var j=0;j<z.length;j++)if(z[j][0].trace.cliponaxis===!1){F._hasClipOnAxisFalse=!0;break}F.updateLayers(N),F.adjustLayout(N,B),n.generalUpdatePerTraceModule(F.graphDiv,F,z,N),F.layers.plotbg.select("path").call(s.fill,N.bgcolor)},S.makeFramework=function(z){var H=this,F=H.graphDiv,N=z[H.id],B=H.clipId="clip"+H.layoutId+H.id,j=H.clipIdRelative="clip-relative"+H.layoutId+H.id;H.clipDef=T.ensureSingleById(z._clips,"clipPath",B,function(K){K.append("path").attr("d","M0,0Z")}),H.clipDefRelative=T.ensureSingleById(z._clips,"clipPath",j,function(K){K.append("path").attr("d","M0,0Z")}),H.plotContainer=T.ensureSingle(H.container,"g",H.id),H.updateLayers(N),t.setClipUrl(H.layers.backplot,B,F),t.setClipUrl(H.layers.grids,B,F)},S.updateLayers=function(z){var H=this.layers,F=["draglayer","plotbg","backplot","grids"];z.aaxis.layer==="below traces"&&F.push("aaxis","aline"),z.baxis.layer==="below traces"&&F.push("baxis","bline"),z.caxis.layer==="below traces"&&F.push("caxis","cline"),F.push("frontplot"),z.aaxis.layer==="above traces"&&F.push("aaxis","aline"),z.baxis.layer==="above traces"&&F.push("baxis","bline"),z.caxis.layer==="above traces"&&F.push("caxis","cline");var N=this.plotContainer.selectAll("g.toplevel").data(F,String),B=["agrid","bgrid","cgrid"];N.enter().append("g").attr("class",function(j){return"toplevel "+j}).each(function(j){var K=A.select(this);H[j]=K,j==="frontplot"?K.append("g").classed("scatterlayer",!0):j==="backplot"?K.append("g").classed("maplayer",!0):j==="plotbg"?K.append("path").attr("d","M0,0Z"):j==="aline"||j==="bline"||j==="cline"?K.append("path"):j==="grids"&&B.forEach(function(G){H[G]=K.append("g").classed("grid "+G,!0)})}),N.order()};var _=Math.sqrt(4/3);S.adjustLayout=function(z,H){var F,N,B,j,K,G,V=this,W=z.domain,J=(W.x[0]+W.x[1])/2,X=(W.y[0]+W.y[1])/2,ee=W.x[1]-W.x[0],re=W.y[1]-W.y[0],ie=ee*H.w,se=re*H.h,fe=z.sum,ye=z.aaxis.min,ge=z.baxis.min,he=z.caxis.min;ie>_*se?B=(j=se)*_:j=(B=ie)/_,K=ee*B/ie,G=re*j/se,F=H.l+H.w*J-B/2,N=H.t+H.h*(1-X)-j/2,V.x0=F,V.y0=N,V.w=B,V.h=j,V.sum=fe,V.xaxis={type:"linear",range:[ye+2*he-fe,fe-ye-2*ge],domain:[J-K/2,J+K/2],_id:"x"},o(V.xaxis,V.graphDiv._fullLayout),V.xaxis.setScale(),V.xaxis.isPtWithinRange=function(Me){return Me.a>=V.aaxis.range[0]&&Me.a<=V.aaxis.range[1]&&Me.b>=V.baxis.range[1]&&Me.b<=V.baxis.range[0]&&Me.c>=V.caxis.range[1]&&Me.c<=V.caxis.range[0]},V.yaxis={type:"linear",range:[ye,fe-ge-he],domain:[X-G/2,X+G/2],_id:"y"},o(V.yaxis,V.graphDiv._fullLayout),V.yaxis.setScale(),V.yaxis.isPtWithinRange=function(){return!0};var ve=V.yaxis.domain[0],Ie=V.aaxis=r({},z.aaxis,{range:[ye,fe-ge-he],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[ve,ve+G*_],anchor:"free",position:0,_id:"y",_length:B});o(Ie,V.graphDiv._fullLayout),Ie.setScale();var xe=V.baxis=r({},z.baxis,{range:[fe-ye-he,ge],side:"bottom",domain:V.xaxis.domain,anchor:"free",position:0,_id:"x",_length:B});o(xe,V.graphDiv._fullLayout),xe.setScale();var Ae=V.caxis=r({},z.caxis,{range:[fe-ye-ge,he],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[ve,ve+G*_],anchor:"free",position:0,_id:"y",_length:B});o(Ae,V.graphDiv._fullLayout),Ae.setScale();var Se="M"+F+","+(N+j)+"h"+B+"l-"+B/2+",-"+j+"Z";V.clipDef.select("path").attr("d",Se),V.layers.plotbg.select("path").attr("d",Se);var Te="M0,"+j+"h"+B+"l-"+B/2+",-"+j+"Z";V.clipDefRelative.select("path").attr("d",Te);var Q=x(F,N);V.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Q),V.clipDefRelative.select("path").attr("transform",null);var oe=x(F-xe._offset,N+j);V.layers.baxis.attr("transform",oe),V.layers.bgrid.attr("transform",oe);var ce=x(F+B/2,N)+"rotate(30)"+x(0,-Ie._offset);V.layers.aaxis.attr("transform",ce),V.layers.agrid.attr("transform",ce);var me=x(F+B/2,N)+"rotate(-30)"+x(0,-Ae._offset);V.layers.caxis.attr("transform",me),V.layers.cgrid.attr("transform",me),V.drawAxes(!0),V.layers.aline.select("path").attr("d",Ie.showline?"M"+F+","+(N+j)+"l"+B/2+",-"+j:"M0,0").call(s.stroke,Ie.linecolor||"#000").style("stroke-width",(Ie.linewidth||0)+"px"),V.layers.bline.select("path").attr("d",xe.showline?"M"+F+","+(N+j)+"h"+B:"M0,0").call(s.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),V.layers.cline.select("path").attr("d",Ae.showline?"M"+(F+B/2)+","+N+"l"+B/2+","+j:"M0,0").call(s.stroke,Ae.linecolor||"#000").style("stroke-width",(Ae.linewidth||0)+"px"),V.graphDiv._context.staticPlot||V.initInteractions(),t.setClipUrl(V.layers.frontplot,V._hasClipOnAxisFalse?null:V.clipId,V.graphDiv)},S.drawAxes=function(z){var H=this,F=H.graphDiv,N=H.id.substr(7)+"title",B=H.layers,j=H.aaxis,K=H.baxis,G=H.caxis;if(H.drawAx(j),H.drawAx(K),H.drawAx(G),z){var V=Math.max(j.showticklabels?j.tickfont.size/2:0,(G.showticklabels?.75*G.tickfont.size:0)+(G.ticks==="outside"?.87*G.ticklen:0)),W=(K.showticklabels?K.tickfont.size:0)+(K.ticks==="outside"?K.ticklen:0)+3;B["a-title"]=v.draw(F,"a"+N,{propContainer:j,propName:H.id+".aaxis.title",placeholder:d(F,"Click to enter Component A title"),attributes:{x:H.x0+H.w/2,y:H.y0-j.title.font.size/3-V,"text-anchor":"middle"}}),B["b-title"]=v.draw(F,"b"+N,{propContainer:K,propName:H.id+".baxis.title",placeholder:d(F,"Click to enter Component B title"),attributes:{x:H.x0-W,y:H.y0+H.h+.83*K.title.font.size+W,"text-anchor":"middle"}}),B["c-title"]=v.draw(F,"c"+N,{propContainer:G,propName:H.id+".caxis.title",placeholder:d(F,"Click to enter Component C title"),attributes:{x:H.x0+H.w+W,y:H.y0+H.h+.83*G.title.font.size+W,"text-anchor":"middle"}})}},S.drawAx=function(z){var H,F=this,N=F.graphDiv,B=z._name,j=B.charAt(0),K=z._id,G=F.layers[B],V=j+"tickLayout",W=(H=z).ticks+String(H.ticklen)+String(H.showticklabels);F[V]!==W&&(G.selectAll("."+K+"tick").remove(),F[V]=W),z.setScale();var J=a.calcTicks(z),X=a.clipEnds(z,J),ee=a.makeTransTickFn(z),re=a.getTickSigns(z)[2],ie=T.deg2rad(30),se=re*(z.linewidth||1)/2,fe=re*z.ticklen,ye=F.w,ge=F.h,he=j==="b"?"M0,"+se+"l"+Math.sin(ie)*fe+","+Math.cos(ie)*fe:"M"+se+",0l"+Math.cos(ie)*fe+","+-Math.sin(ie)*fe,ve={a:"M0,0l"+ge+",-"+ye/2,b:"M0,0l-"+ye/2+",-"+ge,c:"M0,0l-"+ge+","+ye/2}[j];a.drawTicks(N,z,{vals:z.ticks==="inside"?X:J,layer:G,path:he,transFn:ee,crisp:!1}),a.drawGrid(N,z,{vals:X,layer:F.layers[j+"grid"],path:ve,transFn:ee,crisp:!1}),a.drawLabels(N,z,{vals:J,layer:G,transFn:ee,labelFns:a.makeLabelFns(z,0,30)})};var E=w.MINZOOM/2+.87,L="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",P="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",I=!0;function U(z){A.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){m(this.dragOptions),p(this.dragOptions.gd)},S.initInteractions=function(){var z,H,F,N,B,j,K,G,V,W,J,X,ee=this,re=ee.layers.plotbg.select("path").node(),ie=ee.graphDiv,se=ie._fullLayout._zoomlayer;function fe(Te){var Q={};return Q[ee.id+".aaxis.min"]=Te.a,Q[ee.id+".baxis.min"]=Te.b,Q[ee.id+".caxis.min"]=Te.c,Q}function ye(Te,Q){var oe=ie._fullLayout.clickmode;U(ie),Te===2&&(ie.emit("plotly_doubleclick",null),l.call("_guiRelayout",ie,fe({a:0,b:0,c:0}))),oe.indexOf("select")>-1&&Te===1&&y(Q,ie,[ee.xaxis],[ee.yaxis],ee.id,ee.dragOptions),oe.indexOf("event")>-1&&c.click(ie,Q,ee.id)}function ge(Te,Q){return 1-Q/ee.h}function he(Te,Q){return 1-(Te+(ee.h-Q)/Math.sqrt(3))/ee.w}function ve(Te,Q){return(Te-(ee.h-Q)/Math.sqrt(3))/ee.w}function Ie(Te,Q){var oe=F+Te*z,ce=N+Q*H,me=Math.max(0,Math.min(1,ge(0,N),ge(0,ce))),Me=Math.max(0,Math.min(1,he(F,N),he(oe,ce))),Re=Math.max(0,Math.min(1,ve(F,N),ve(oe,ce))),Ce=(me/2+Re)*ee.w,ze=(1-me/2-Me)*ee.w,le=(Ce+ze)/2,de=ze-Ce,be=(1-me)*ee.h,Fe=be-de/_;de<w.MINZOOM?(K=B,J.attr("d",V),X.attr("d","M0,0Z")):(K={a:B.a+me*j,b:B.b+Me*j,c:B.c+Re*j},J.attr("d",V+"M"+Ce+","+be+"H"+ze+"L"+le+","+Fe+"L"+Ce+","+be+"Z"),X.attr("d","M"+F+","+N+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ce+","+be+L+"M"+ze+","+be+C+"M"+le+","+Fe+P)),W||(J.transition().style("fill",G>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),X.transition().style("opacity",1).duration(200),W=!0),ie.emit("plotly_relayouting",fe(K))}function xe(){U(ie),K!==B&&(l.call("_guiRelayout",ie,fe(K)),I&&ie.data&&ie._context.showTips&&(T.notifier(d(ie,"Double-click to zoom back out"),"long"),I=!1))}function Ae(Te,Q){var oe=Te/ee.xaxis._m,ce=Q/ee.yaxis._m,me=[(K={a:B.a-ce,b:B.b+(oe+ce)/2,c:B.c-(oe-ce)/2}).a,K.b,K.c].sort(T.sorterAsc),Me=me.indexOf(K.a),Re=me.indexOf(K.b),Ce=me.indexOf(K.c);me[0]<0&&(me[1]+me[0]/2<0?(me[2]+=me[0]+me[1],me[0]=me[1]=0):(me[2]+=me[0]/2,me[1]+=me[0]/2,me[0]=0),K={a:me[Me],b:me[Re],c:me[Ce]},Q=(B.a-K.a)*ee.yaxis._m,Te=(B.c-K.c-B.b+K.b)*ee.xaxis._m);var ze=x(ee.x0+Te,ee.y0+Q);ee.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ze);var le=x(-Te,-Q);ee.clipDefRelative.select("path").attr("transform",le),ee.aaxis.range=[K.a,ee.sum-K.b-K.c],ee.baxis.range=[ee.sum-K.a-K.c,K.b],ee.caxis.range=[ee.sum-K.a-K.b,K.c],ee.drawAxes(!1),ee._hasClipOnAxisFalse&&ee.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,ee),ie.emit("plotly_relayouting",fe(K))}function Se(){l.call("_guiRelayout",ie,fe(K))}this.dragOptions={element:re,gd:ie,plotinfo:{id:ee.id,domain:ie._fullLayout[ee.id].domain,xaxis:ee.xaxis,yaxis:ee.yaxis},subplot:ee.id,prepFn:function(Te,Q,oe){ee.dragOptions.xaxes=[ee.xaxis],ee.dragOptions.yaxes=[ee.yaxis],z=ie._fullLayout._invScaleX,H=ie._fullLayout._invScaleY;var ce=ee.dragOptions.dragmode=ie._fullLayout.dragmode;f(ce)?ee.dragOptions.minDrag=1:ee.dragOptions.minDrag=void 0,ce==="zoom"?(ee.dragOptions.moveFn=Ie,ee.dragOptions.clickFn=ye,ee.dragOptions.doneFn=xe,function(me,Me,Re){var Ce=re.getBoundingClientRect();F=Me-Ce.left,N=Re-Ce.top,ie._fullLayout._calcInverseTransform(ie);var ze=ie._fullLayout._invTransform,le=T.apply3DTransform(ze)(F,N);F=le[0],N=le[1],B={a:ee.aaxis.range[0],b:ee.baxis.range[1],c:ee.caxis.range[1]},K=B,j=ee.aaxis.range[1]-B.a,G=k(ee.graphDiv._fullLayout[ee.id].bgcolor).getLuminance(),V="M0,"+ee.h+"L"+ee.w/2+", 0L"+ee.w+","+ee.h+"Z",W=!1,J=se.append("path").attr("class","zoombox").attr("transform",x(ee.x0,ee.y0)).style({fill:G>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",V),X=se.append("path").attr("class","zoombox-corners").attr("transform",x(ee.x0,ee.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ee.clearOutline(ie)}(0,Q,oe)):ce==="pan"?(ee.dragOptions.moveFn=Ae,ee.dragOptions.clickFn=ye,ee.dragOptions.doneFn=Se,B={a:ee.aaxis.range[0],b:ee.baxis.range[1],c:ee.caxis.range[1]},K=B,ee.clearOutline(ie)):(b(ce)||f(ce))&&g(Te,Q,oe,ee.dragOptions,ce)}},re.onmousemove=function(Te){c.hover(ie,Te,ee.id),ie._fullLayout._lasthover=re,ie._fullLayout._hoversubplot=ee.id},re.onmouseout=function(Te){ie._dragging||i.unhover(ie,Te)},i.init(this.dragOptions)}},73972:function($,R,e){var A=e(47769),k=e(64213),l=e(75138),T=e(41965),x=e(24401).addStyleRule,d=e(1426),s=e(9012),t=e(10820),o=d.extendFlat,r=d.extendDeepAll;function n(y){var p=y.name,m=y.categories,w=y.meta;if(R.modules[p])A.log("Type "+p+" already registered");else{R.subplotsRegistry[y.basePlotModule.name]||function(I){var U=I.name;if(R.subplotsRegistry[U])A.log("Plot type "+U+" already registered.");else for(var z in h(I),R.subplotsRegistry[U]=I,R.componentsRegistry)v(z,I.name)}(y.basePlotModule);for(var u={},S=0;S<m.length;S++)u[m[S]]=!0,R.allCategories[m[S]]=!0;for(var _ in R.modules[p]={_module:y,categories:u},w&&Object.keys(w).length&&(R.modules[p].meta=w),R.allTypes.push(p),R.componentsRegistry)f(_,p);y.layoutAttributes&&o(R.traceLayoutAttributes,y.layoutAttributes);var E=y.basePlotModule,L=E.name;if(L==="mapbox"){var C=E.constants.styleRules;for(var P in C)x(".js-plotly-plot .plotly .mapboxgl-"+P,C[P])}L!=="geo"&&L!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function a(y){if(typeof y.name!="string")throw new Error("Component module *name* must be a string.");var p=y.name;for(var m in R.componentsRegistry[p]=y,y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&l(R.layoutArrayContainers,p),h(y)),R.modules)f(p,m);for(var w in R.subplotsRegistry)v(p,w);for(var u in R.transformsRegistry)b(p,u);y.schema&&y.schema.layout&&r(t,y.schema.layout)}function i(y){if(typeof y.name!="string")throw new Error("Transform module *name* must be a string.");var p="Transform module "+y.name,m=typeof y.transform=="function",w=typeof y.calcTransform=="function";if(!m&&!w)throw new Error(p+" is missing a *transform* or *calcTransform* method.");for(var u in m&&w&&A.log([p+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(y.attributes)||A.log(p+" registered without an *attributes* object."),typeof y.supplyDefaults!="function"&&A.log(p+" registered without a *supplyDefaults* method."),R.transformsRegistry[y.name]=y,R.componentsRegistry)b(u,y.name)}function c(y){var p=y.name,m=p.split("-")[0],w=y.dictionary,u=y.format,S=w&&Object.keys(w).length,_=u&&Object.keys(u).length,E=R.localeRegistry,L=E[p];if(L||(E[p]=L={}),m!==p){var C=E[m];C||(E[m]=C={}),S&&C.dictionary===L.dictionary&&(C.dictionary=w),_&&C.format===L.format&&(C.format=u)}S&&(L.dictionary=w),_&&(L.format=u)}function h(y){if(y.layoutAttributes){var p=y.layoutAttributes._arrayAttrRegexps;if(p)for(var m=0;m<p.length;m++)l(R.layoutArrayRegexes,p[m])}}function f(y,p){var m=R.componentsRegistry[y].schema;if(m&&m.traces){var w=m.traces[p];w&&r(R.modules[p]._module.attributes,w)}}function b(y,p){var m=R.componentsRegistry[y].schema;if(m&&m.transforms){var w=m.transforms[p];w&&r(R.transformsRegistry[p].attributes,w)}}function v(y,p){var m=R.componentsRegistry[y].schema;if(m&&m.subplots){var w=R.subplotsRegistry[p],u=w.layoutAttributes,S=w.attr==="subplot"?w.name:w.attr;Array.isArray(S)&&(S=S[0]);var _=m.subplots[S];u&&_&&r(u,_)}}function g(y){return typeof y=="object"&&(y=y.type),y}R.modules={},R.allCategories={},R.allTypes=[],R.subplotsRegistry={},R.transformsRegistry={},R.componentsRegistry={},R.layoutArrayContainers=[],R.layoutArrayRegexes=[],R.traceLayoutAttributes={},R.localeRegistry={},R.apiMethodRegistry={},R.collectableSubplotTypes=null,R.register=function(y){if(R.collectableSubplotTypes=null,!y)throw new Error("No argument passed to Plotly.register.");y&&!Array.isArray(y)&&(y=[y]);for(var p=0;p<y.length;p++){var m=y[p];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":n(m);break;case"transform":i(m);break;case"component":a(m);break;case"locale":c(m);break;case"apiMethod":var w=m.name;R.apiMethodRegistry[w]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},R.getModule=function(y){var p=R.modules[g(y)];return!!p&&p._module},R.traceIs=function(y,p){if((y=g(y))==="various")return!1;var m=R.modules[y];return m||(y&&A.log("Unrecognized trace type "+y+"."),m=R.modules[s.type.dflt]),!!m.categories[p]},R.getTransformIndices=function(y,p){for(var m=[],w=y.transforms||[],u=0;u<w.length;u++)w[u].type===p&&m.push(u);return m},R.hasTransform=function(y,p){for(var m=y.transforms||[],w=0;w<m.length;w++)if(m[w].type===p)return!0;return!1},R.getComponentMethod=function(y,p){var m=R.componentsRegistry[y];return m&&m[p]||k},R.call=function(){var y=arguments[0],p=[].slice.call(arguments,1);return R.apiMethodRegistry[y].apply(null,p)}},61914:function($,R,e){var A=e(73972),k=e(71828),l=k.extendFlat,T=k.extendDeep;function x(d){var s;switch(d){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}$.exports=function(d,s){var t,o,r=d.data,n=d.layout,a=T([],r),i=T({},n,x(s.tileClass)),c=d._context||{};if(s.width&&(i.width=s.width),s.height&&(i.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){i.annotations=[];var h=Object.keys(i);for(t=0;t<h.length;t++)o=h[t],["xaxis","yaxis","zaxis"].indexOf(o.slice(0,5))>-1&&(i[h[t]].title={text:""});for(t=0;t<a.length;t++){var f=a[t];f.showscale=!1,f.marker&&(f.marker.showscale=!1),A.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)i.annotations.push(s.annotations[t]);var b=Object.keys(i).filter(function(m){return m.match(/^scene\d*$/)});if(b.length){var v={};for(s.tileClass==="thumbnail"&&(v={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<b.length;t++){var g=i[b[t]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),l(g.xaxis,v),l(g.yaxis,v),l(g.zaxis,v),g._scene=null}}var y=document.createElement("div");s.tileClass&&(y.className=s.tileClass);var p={gd:y,td:y,layout:i,data:a,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return s.setBackground!=="transparent"&&(p.config.setBackground=s.setBackground||"opaque"),p.gd.defaultLayout=x(s.tileClass),p}},7239:function($,R,e){var A=e(71828),k=e(403),l=e(22435),T=e(25095);$.exports=function(x,d){var s;return A.isPlainObject(x)||(s=A.getGraphDiv(x)),(d=d||{}).format=d.format||"png",d.width=d.width||null,d.height=d.height||null,d.imageDataOnly=!0,new Promise(function(t,o){s&&s._snapshotInProgress&&o(new Error("Snapshotting already in progress.")),A.isIE()&&d.format!=="svg"&&o(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=k(x,d),n=d.filename||x.fn||"newplot";n+="."+d.format.replace("-","."),r.then(function(a){return s&&(s._snapshotInProgress=!1),l(a,n,d.format)}).then(function(a){t(a)}).catch(function(a){s&&(s._snapshotInProgress=!1),o(a)})})}},22435:function($,R,e){var A=e(71828),k=e(25095);$.exports=function(l,T,x){var d=document.createElement("a"),s="download"in d;return new Promise(function(t,o){var r,n;if(A.isIE())return r=k.createBlob(l,"svg"),window.navigator.msSaveBlob(r,T),r=null,t(T);if(s)return r=k.createBlob(l,x),n=k.createObjectURL(r),d.href=n,d.download=T,document.body.appendChild(d),d.click(),document.body.removeChild(d),k.revokeObjectURL(n),r=null,t(T);if(A.isSafari()){var a=x==="svg"?",":";base64,";return k.octetStream(a+encodeURIComponent(l)),t(T)}o(new Error("download error"))})}},25095:function($,R,e){var A=e(73972);R.getDelay=function(l){return l._has&&(l._has("gl3d")||l._has("gl2d")||l._has("mapbox"))?500:0},R.getRedrawFunc=function(l){return function(){A.getComponentMethod("colorbar","draw")(l)}},R.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)},R.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var k=window.URL||window.webkitURL;R.createObjectURL=function(l){return k.createObjectURL(l)},R.revokeObjectURL=function(l){return k.revokeObjectURL(l)},R.createBlob=function(l,T){if(T==="svg")return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([l],{type:"application/json;charset=utf-8"});var x=function(d){for(var s=d.length,t=new ArrayBuffer(s),o=new Uint8Array(t),r=0;r<s;r++)o[r]=d.charCodeAt(r);return t}(window.atob(l));return new window.Blob([x],{type:"image/"+T})},R.octetStream=function(l){document.location.href="data:application/octet-stream"+l},R.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,R.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function($,R,e){var A=e(25095),k={getDelay:A.getDelay,getRedrawFunc:A.getRedrawFunc,clone:e(61914),toSVG:e(5900),svgToImg:e(70942),toImage:e(56395),downloadImage:e(7239)};$.exports=k},70942:function($,R,e){var A=e(71828),k=e(15398).EventEmitter,l=e(25095);$.exports=function(T){var x=T.emitter||new k,d=new Promise(function(s,t){var o=window.Image,r=T.svg,n=T.format||"png";if(A.isIE()&&n!=="svg"){var a=new Error(l.MSG_IE_BAD_FORMAT);return t(a),T.promise?d:x.emit("error",a)}var i,c,h=T.canvas,f=T.scale||1,b=T.width||300,v=T.height||150,g=f*b,y=f*v,p=h.getContext("2d",{willReadFrequently:!0}),m=new o;n==="svg"||A.isSafari()?c=l.encodeSVG(r):(i=l.createBlob(r,"svg"),c=l.createObjectURL(i)),h.width=g,h.height=y,m.onload=function(){var w;switch(i=null,l.revokeObjectURL(c),n!=="svg"&&p.drawImage(m,0,0,g,y),n){case"jpeg":w=h.toDataURL("image/jpeg");break;case"png":w=h.toDataURL("image/png");break;case"webp":w=h.toDataURL("image/webp");break;case"svg":w=c;break;default:var u="Image format is not jpeg, png, svg or webp.";if(t(new Error(u)),!T.promise)return x.emit("error",u)}s(w),T.promise||x.emit("success",w)},m.onerror=function(w){if(i=null,l.revokeObjectURL(c),t(w),!T.promise)return x.emit("error",w)},m.src=c});return T.promise?d:x}},56395:function($,R,e){var A=e(15398).EventEmitter,k=e(73972),l=e(71828),T=e(25095),x=e(61914),d=e(5900),s=e(70942);$.exports=function(t,o){var r=new A,n=x(t,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var i=T.getRedrawFunc(a);return k.call("_doPlot",a,n.data,n.layout,n.config).then(i).then(function(){var c=T.getDelay(a._fullLayout);setTimeout(function(){var h=d(a),f=document.createElement("canvas");f.id=l.randstr(),(r=s({format:o.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:f,emitter:r,svg:h})).clean=function(){a&&document.body.removeChild(a)}},c)}).catch(function(c){r.emit("error",c)}),r}},5900:function($,R,e){var A=e(39898),k=e(71828),l=e(91424),T=e(7901),x=e(77922),d=/"/g,s="TOBESTRIPPED",t=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");$.exports=function(o,r,n){var a,i=o._fullLayout,c=i._paper,h=i._toppaper,f=i.width,b=i.height;c.insert("rect",":first-child").call(l.setRect,0,0,f,b).call(T.fill,i.paper_bgcolor);var v=i._basePlotModules||[];for(a=0;a<v.length;a++){var g=v[a];g.toSVG&&g.toSVG(o)}if(h){var y=h.node().childNodes,p=Array.prototype.slice.call(y);for(a=0;a<p.length;a++){var m=p[a];m.childNodes.length&&c.node().appendChild(m)}}i._draggers&&i._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var u=A.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){u.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&u.style("font-family",S.replace(d,s))}else u.remove()}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var u=A.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&u.style("fill",S.replace(d,s));var _=this.style.stroke;_&&_.indexOf("url(")!==-1&&u.style("stroke",_.replace(d,s))}),r!=="pdf"&&r!=="eps"||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(x.xmlns,"xmlns",x.svg),c.node().setAttributeNS(x.xmlns,"xmlns:xlink",x.xlink),r==="svg"&&n&&(c.attr("width",n*f),c.attr("height",n*b),c.attr("viewBox","0 0 "+f+" "+b));var w=new window.XMLSerializer().serializeToString(c.node());return w=(w=(w=function(u){var S=A.select("body").append("div").style({display:"none"}).html(""),_=u.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),_}(w)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(w=(w=(w=w.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),w}},75341:function($,R,e){var A=e(71828);$.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;A.mergeArray(l.text,k,"tx"),A.mergeArray(l.hovertext,k,"htx");var x=l.marker;if(x){A.mergeArray(x.opacity,k,"mo",!0),A.mergeArray(x.color,k,"mc");var d=x.line;d&&(A.mergeArray(d.color,k,"mlc"),A.mergeArrayCastPositive(d.width,k,"mlw"))}}},1486:function($,R,e){var A=e(82196),k=e(12663).axisHoverFormat,l=e(5386).f,T=e(5386).s,x=e(50693),d=e(41940),s=e(97313),t=e(79952).u,o=e(1426).extendFlat,r=d({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=o({},A.marker.line.width,{dflt:0}),a=o({width:n,editType:"calc"},x("marker.line")),i=o({line:a,editType:"calc"},x("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t});$.exports={x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:A.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:A.hovertext,hovertemplate:l({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:o({},r,{}),insidetextfont:o({},r,{}),outsidetextfont:o({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:o({},A.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:i,offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:{marker:{opacity:A.selected.marker.opacity,color:A.selected.marker.color,editType:"style"},textfont:A.selected.textfont,editType:"style"},unselected:{marker:{opacity:A.unselected.marker.opacity,color:A.unselected.marker.color,editType:"style"},textfont:A.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function($,R,e){var A=e(89298),k=e(42973),l=e(52075).hasColorscale,T=e(78803),x=e(75341),d=e(66279);$.exports=function(s,t){var o,r,n,a,i,c,h=A.getFromId(s,t.xaxis||"x"),f=A.getFromId(s,t.yaxis||"y"),b={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(o=h.makeCalcdata(t,"x",b),n=f.makeCalcdata(t,"y"),a=k(t,f,"y",n),i=!!t.yperiodalignment,c="y"):(o=f.makeCalcdata(t,"y",b),n=h.makeCalcdata(t,"x"),a=k(t,h,"x",n),i=!!t.xperiodalignment,c="x"),r=a.vals;for(var v=Math.min(r.length,o.length),g=new Array(v),y=0;y<v;y++)g[y]={p:r[y],s:o[y]},i&&(g[y].orig_p=n[y],g[y][c+"End"]=a.ends[y],g[y][c+"Start"]=a.starts[y]),t.ids&&(g[y].id=String(t.ids[y]));return l(t,"marker")&&T(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),l(t,"marker.line")&&T(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),x(g,t),d(g,t),g}},97313:function($){$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function($,R,e){var A=e(92770),k=e(71828).isArrayOrTypedArray,l=e(50606).BADNUM,T=e(73972),x=e(89298),d=e(99082).getAxisGroup,s=e(61546);function t(v,g,y,p,m){if(p.length){var w,u,S,_;switch(function(E,L){var C,P;for(C=0;C<L.length;C++){var I,U=L[C],z=U[0].trace,H=z.type==="funnel"?z._base:z.base,F=z.orientation==="h"?z.xcalendar:z.ycalendar,N=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(k(H)){for(P=0;P<Math.min(H.length,U.length);P++)I=N(H[P],0,F),A(I)?(U[P].b=+I,U[P].hasB=1):U[P].b=0;for(;P<U.length;P++)U[P].b=0}else{I=N(H,0,F);var B=A(I);for(I=B?I:0,P=0;P<U.length;P++)U[P].b=I,B&&(U[P].hasB=1)}}}(y,p),m.mode){case"overlay":o(g,y,p,m);break;case"group":for(w=[],u=[],S=0;S<p.length;S++)(_=p[S])[0].trace.offset===void 0?u.push(_):w.push(_);u.length&&function(E,L,C,P,I){var U=new s(P,{posAxis:L,sepNegVal:!1,overlapNoMerge:!I.norm});(function(z,H,F,N){for(var B=z._fullLayout,j=F.positions,K=F.distinctPositions,G=F.minDiff,V=F.traces,W=V.length,J=j.length!==K.length,X=G*(1-N.gap),ee=d(B,H._id)+V[0][0].trace.orientation,re=B._alignmentOpts[ee]||{},ie=0;ie<W;ie++){var se,fe,ye=V[ie],ge=ye[0].trace,he=re[ge.alignmentgroup]||{},ve=Object.keys(he.offsetGroups||{}).length,Ie=(se=ve?X/ve:J?X/W:X)*(1-(N.groupgap||0));fe=ve?((2*ge._offsetIndex+1-ve)*se-Ie)/2:J?((2*ie+1-W)*se-Ie)/2:-Ie/2;var xe=ye[0].t;xe.barwidth=Ie,xe.poffset=fe,xe.bargroupwidth=X,xe.bardelta=G}F.binWidth=V[0][0].t.barwidth/100,n(F),a(H,F),i(H,F,J)})(E,L,U,I),function(z,H){for(var F=z.traces,N=0;N<F.length;N++){var B=F[N];if(B[0].trace.base===void 0)for(var j=new s([B],{posAxis:H,sepNegVal:!0,overlapNoMerge:!0}),K=0;K<B.length;K++){var G=B[K];if(G.p!==l){var V=j.put(G.p,G.b+G.s);V&&(G.b=V)}}}}(U,L),I.norm?(h(U),f(C,U,I)):c(C,U)}(v,g,y,u,m),w.length&&o(g,y,w,m);break;case"stack":case"relative":for(w=[],u=[],S=0;S<p.length;S++)(_=p[S])[0].trace.base===void 0?u.push(_):w.push(_);u.length&&function(E,L,C,P,I){var U=new s(P,{posAxis:L,sepNegVal:I.mode==="relative",overlapNoMerge:!(I.norm||I.mode==="stack"||I.mode==="relative")});r(L,U,I),function(B,j,K){var G,V,W,J,X,ee,re=b(B),ie=j.traces;for(J=0;J<ie.length;J++)if((V=(G=ie[J])[0].trace).type==="funnel")for(X=0;X<G.length;X++)(ee=G[X]).s!==l&&j.put(ee.p,-.5*ee.s);for(J=0;J<ie.length;J++){W=(V=(G=ie[J])[0].trace).type==="funnel";var se=[];for(X=0;X<G.length;X++)if((ee=G[X]).s!==l){var fe;fe=W?ee.s:ee.s+ee.b;var ye=j.put(ee.p,fe),ge=ye+fe;ee.b=ye,ee[re]=ge,K.norm||(se.push(ge),ee.hasB&&se.push(ye))}K.norm||(V._extremes[B._id]=x.findExtremes(B,se,{tozero:!0,padded:!0}))}}(C,U,I);for(var z=0;z<P.length;z++)for(var H=P[z],F=0;F<H.length;F++){var N=H[F];N.s!==l&&N.b+N.s===U.get(N.p,N.s)&&(N._outmost=!0)}I.norm&&f(C,U,I)}(0,g,y,u,m),w.length&&o(g,y,w,m)}(function(E,L){var C,P,I,U=b(L),z={},H=1/0,F=-1/0;for(C=0;C<E.length;C++)for(I=E[C],P=0;P<I.length;P++){var N=I[P].p;A(N)&&(H=Math.min(H,N),F=Math.max(F,N))}var B=1e4/(F-H),j=z.round=function(ee){return String(Math.round(B*(ee-H)))};for(C=0;C<E.length;C++){(I=E[C])[0].t.extents=z;var K=I[0].t.poffset,G=Array.isArray(K);for(P=0;P<I.length;P++){var V=I[P],W=V[U]-V.w/2;if(A(W)){var J=V[U]+V.w/2,X=j(V.p);z[X]?z[X]=[Math.min(W,z[X][0]),Math.max(J,z[X][1])]:z[X]=[W,J]}V.p0=V.p+(G?K[P]:K),V.p1=V.p0+V.w,V.s0=V.b,V.s1=V.s0+V.s}}})(p,g)}}function o(v,g,y,p){for(var m=0;m<y.length;m++){var w=y[m],u=new s([w],{posAxis:v,sepNegVal:!1,overlapNoMerge:!p.norm});r(v,u,p),p.norm?(h(u),f(g,u,p)):c(g,u)}}function r(v,g,y){for(var p=g.minDiff,m=g.traces,w=p*(1-y.gap),u=w*(1-(y.groupgap||0)),S=-u/2,_=0;_<m.length;_++){var E=m[_][0].t;E.barwidth=u,E.poffset=S,E.bargroupwidth=w,E.bardelta=p}g.binWidth=m[0][0].t.barwidth/100,n(g),a(v,g),i(v,g)}function n(v){var g,y,p=v.traces;for(g=0;g<p.length;g++){var m,w=p[g],u=w[0],S=u.trace,_=u.t,E=S._offset||S.offset,L=_.poffset;if(k(E)){for(m=Array.prototype.slice.call(E,0,w.length),y=0;y<m.length;y++)A(m[y])||(m[y]=L);for(y=m.length;y<w.length;y++)m.push(L);_.poffset=m}else E!==void 0&&(_.poffset=E);var C=S._width||S.width,P=_.barwidth;if(k(C)){var I=Array.prototype.slice.call(C,0,w.length);for(y=0;y<I.length;y++)A(I[y])||(I[y]=P);for(y=I.length;y<w.length;y++)I.push(P);if(_.barwidth=I,E===void 0){for(m=[],y=0;y<w.length;y++)m.push(L+(P-I[y])/2);_.poffset=m}}else C!==void 0&&(_.barwidth=C,E===void 0&&(_.poffset=L+(P-C)/2))}}function a(v,g){for(var y=g.traces,p=b(v),m=0;m<y.length;m++)for(var w=y[m],u=w[0].t,S=u.poffset,_=Array.isArray(S),E=u.barwidth,L=Array.isArray(E),C=0;C<w.length;C++){var P=w[C],I=P.w=L?E[C]:E;P.p===void 0&&(P.p=P[p],P["orig_"+p]=P[p]);var U=(_?S[C]:S)+I/2;P[p]=P.p+U}}function i(v,g,y){var p=g.traces,m=g.minDiff/2;x.minDtick(v,g.minDiff,g.distinctPositions[0],y);for(var w=0;w<p.length;w++){var u,S,_,E,L=p[w],C=L[0],P=C.trace,I=[];for(E=0;E<L.length;E++)S=(u=L[E]).p-m,_=u.p+m,I.push(S,_);if(P.width||P.offset){var U=C.t,z=U.poffset,H=U.barwidth,F=Array.isArray(z),N=Array.isArray(H);for(E=0;E<L.length;E++){u=L[E];var B=F?z[E]:z,j=N?H[E]:H;_=(S=u.p+B)+j,I.push(S,_)}}P._extremes[v._id]=x.findExtremes(v,I,{padded:!1})}}function c(v,g){for(var y=g.traces,p=b(v),m=0;m<y.length;m++){for(var w=y[m],u=w[0].trace,S=u.type==="scatter",_=u.orientation==="v",E=[],L=!1,C=0;C<w.length;C++){var P=w[C],I=S?0:P.b,U=S?_?P.y:P.x:I+P.s;P[p]=U,E.push(U),P.hasB&&E.push(I),P.hasB&&P.b||(L=!0)}u._extremes[v._id]=x.findExtremes(v,E,{tozero:L,padded:!0})}}function h(v){for(var g=v.traces,y=0;y<g.length;y++)for(var p=g[y],m=0;m<p.length;m++){var w=p[m];w.s!==l&&v.put(w.p,w.b+w.s)}}function f(v,g,y){var p=g.traces,m=b(v),w=y.norm==="fraction"?1:100,u=w/1e9,S=v.l2c(v.c2l(0)),_=y.mode==="stack"?w:S;function E(K){return A(v.c2l(K))&&(K<S-u||K>_+u||!A(S))}for(var L=0;L<p.length;L++){for(var C=p[L],P=C[0].trace,I=[],U=!1,z=!1,H=0;H<C.length;H++){var F=C[H];if(F.s!==l){var N=Math.abs(w/g.get(F.p,F.s));F.b*=N,F.s*=N;var B=F.b,j=B+F.s;F[m]=j,I.push(j),z=z||E(j),F.hasB&&(I.push(B),z=z||E(B)),F.hasB&&F.b||(U=!0)}}P._extremes[v._id]=x.findExtremes(v,I,{tozero:U,padded:z})}}function b(v){return v._id.charAt(0)}$.exports={crossTraceCalc:function(v,g){for(var y=g.xaxis,p=g.yaxis,m=v._fullLayout,w=v._fullData,u=v.calcdata,S=[],_=[],E=0;E<w.length;E++){var L=w[E];if(L.visible===!0&&T.traceIs(L,"bar")&&L.xaxis===y._id&&L.yaxis===p._id&&(L.orientation==="h"?S.push(u[E]):_.push(u[E]),L._computePh))for(var C=v.calcdata[E],P=0;P<C.length;P++)typeof C[P].ph0=="function"&&(C[P].ph0=C[P].ph0()),typeof C[P].ph1=="function"&&(C[P].ph1=C[P].ph1())}var I={xCat:y.type==="category"||y.type==="multicategory",yCat:p.type==="category"||p.type==="multicategory",mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap};t(v,y,p,_,I),t(v,p,y,S,I)},setGroupPositions:t}},90769:function($,R,e){var A=e(71828),k=e(7901),l=e(73972),T=e(67513),x=e(73927),d=e(98340),s=e(26125),t=e(1486),o=A.coerceFont;function r(n,a,i,c,h,f){var b=(f=f||{}).moduleHasSelected!==!1,v=f.moduleHasUnselected!==!1,g=f.moduleHasConstrain!==!1,y=f.moduleHasCliponaxis!==!1,p=f.moduleHasTextangle!==!1,m=f.moduleHasInsideanchor!==!1,w=!!f.hasPathbar,u=Array.isArray(h)||h==="auto",S=u||h==="inside",_=u||h==="outside";if(S||_){var E=o(c,"textfont",i.font),L=A.extendFlat({},E),C=!(n.textfont&&n.textfont.color);if(C&&delete L.color,o(c,"insidetextfont",L),w){var P=A.extendFlat({},E);C&&delete P.color,o(c,"pathbar.textfont",P)}_&&o(c,"outsidetextfont",E),b&&c("selected.textfont.color"),v&&c("unselected.textfont.color"),g&&c("constraintext"),y&&c("cliponaxis"),p&&c("textangle"),c("texttemplate")}S&&m&&c("insidetextanchor")}$.exports={supplyDefaults:function(n,a,i,c){function h(g,y){return A.coerce(n,a,t,g,y)}if(T(n,a,c,h)){x(n,a,c,h),h("xhoverformat"),h("yhoverformat"),h("orientation",a.x&&!a.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var f=h("textposition");r(n,0,c,h,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),d(n,a,h,i,c);var b=(a.marker.line||{}).color,v=l.getComponentMethod("errorbars","supplyDefaults");v(n,a,b||k.defaultLine,{axis:"y"}),v(n,a,b||k.defaultLine,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1},crossTraceDefaults:function(n,a){var i,c;function h(b){return A.coerce(c._input,c,t,b)}if(a.barmode==="group")for(var f=0;f<n.length;f++)(c=n[f]).type==="bar"&&(i=c._input,s(i,c,a,h))},handleText:r}},58065:function($){$.exports=function(R,e,A){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),A.orientation==="h"?(R.label=R.y,R.value=R.x):(R.label=R.x,R.value=R.y),R}},69383:function($,R,e){var A=e(92770),k=e(84267),l=e(71828).isArrayOrTypedArray;R.coerceString=function(T,x,d){if(typeof x=="string"){if(x||!T.noBlank)return x}else if((typeof x=="number"||x===!0)&&!T.strict)return String(x);return d!==void 0?d:T.dflt},R.coerceNumber=function(T,x,d){if(A(x)){x=+x;var s=T.min,t=T.max;if(!(s!==void 0&&x<s||t!==void 0&&x>t))return x}return d!==void 0?d:T.dflt},R.coerceColor=function(T,x,d){return k(x).isValid()?x:d!==void 0?d:T.dflt},R.coerceEnumerated=function(T,x,d){return T.coerceNumber&&(x=+x),T.values.indexOf(x)!==-1?x:d!==void 0?d:T.dflt},R.getValue=function(T,x){var d;return Array.isArray(T)?x<T.length&&(d=T[x]):d=T,d},R.getLineWidth=function(T,x){return 0<x.mlw?x.mlw:l(T.marker.line.width)?0:T.marker.line.width}},95423:function($,R,e){var A=e(30211),k=e(73972),l=e(7901),T=e(71828).fillText,x=e(69383).getLineWidth,d=e(89298).hoverLabelText,s=e(50606).BADNUM;function t(r,n,a,i,c){var h,f,b,v,g,y,p,m=r.cd,w=m[0].trace,u=m[0].t,S=i==="closest",_=w.type==="waterfall",E=r.maxHoverDistance,L=r.maxSpikeDistance;w.orientation==="h"?(h=a,f=n,b="y",v="x",g=G,y=j):(h=n,f=a,b="x",v="y",y=G,g=j);var C=w[b+"period"],P=S||C;function I(se){return z(se,-1)}function U(se){return z(se,1)}function z(se,fe){var ye=se.w;return se[b]+fe*ye/2}function H(se){return se[b+"End"]-se[b+"Start"]}var F=S?I:C?function(se){return se.p-H(se)/2}:function(se){return Math.min(I(se),se.p-u.bardelta/2)},N=S?U:C?function(se){return se.p+H(se)/2}:function(se){return Math.max(U(se),se.p+u.bardelta/2)};function B(se,fe,ye){return c.finiteRange&&(ye=0),A.inbox(se-h,fe-h,ye+Math.min(1,Math.abs(fe-se)/p)-1)}function j(se){return B(F(se),N(se),E)}function K(se){var fe=se[v];if(_){var ye=Math.abs(se.rawS)||0;f>0?fe+=ye:f<0&&(fe-=ye)}return fe}function G(se){var fe=f,ye=se.b,ge=K(se);return A.inbox(ye-fe,ge-fe,E+(ge-fe)/(ge-ye)-1)}var V=r[b+"a"],W=r[v+"a"];p=Math.abs(V.r2c(V.range[1])-V.r2c(V.range[0]));var J=A.getDistanceFunction(i,g,y,function(se){return(g(se)+y(se))/2});if(A.getClosest(m,J,r),r.index!==!1&&m[r.index].p!==s){P||(F=function(se){return Math.min(I(se),se.p-u.bargroupwidth/2)},N=function(se){return Math.max(U(se),se.p+u.bargroupwidth/2)});var X=m[r.index],ee=w.base?X.b+X.s:X.s;r[v+"0"]=r[v+"1"]=W.c2p(X[v],!0),r[v+"LabelVal"]=ee;var re=u.extents[u.extents.round(X.p)];r[b+"0"]=V.c2p(S?F(X):re[0],!0),r[b+"1"]=V.c2p(S?N(X):re[1],!0);var ie=X.orig_p!==void 0;return r[b+"LabelVal"]=ie?X.orig_p:X.p,r.labelLabel=d(V,r[b+"LabelVal"],w[b+"hoverformat"]),r.valueLabel=d(W,r[v+"LabelVal"],w[v+"hoverformat"]),r.baseLabel=d(W,X.b,w[v+"hoverformat"]),r.spikeDistance=(function(se){var fe=f,ye=se.b,ge=K(se);return A.inbox(ye-fe,ge-fe,L+(ge-fe)/(ge-ye)-1)}(X)+function(se){return B(I(se),U(se),L)}(X))/2,r[b+"Spike"]=V.c2p(X.p,!0),T(X,w,r),r.hovertemplate=w.hovertemplate,r}}function o(r,n){var a=n.mcc||r.marker.color,i=n.mlcc||r.marker.line.color,c=x(r,n);return l.opacity(a)?a:l.opacity(i)&&c?i:void 0}$.exports={hoverPoints:function(r,n,a,i,c){var h=t(r,n,a,i,c);if(h){var f=h.cd,b=f[0].trace,v=f[h.index];return h.color=o(b,v),k.getComponentMethod("errorbars","hoverInfo")(v,b,h),[h]}},hoverOnBars:t,getTraceColor:o}},60822:function($,R,e){$.exports={attributes:e(1486),layoutAttributes:e(43641),supplyDefaults:e(90769).supplyDefaults,crossTraceDefaults:e(90769).crossTraceDefaults,supplyLayoutDefaults:e(13957),calc:e(92290),crossTraceCalc:e(11661).crossTraceCalc,colorbar:e(4898),arraysToCalcdata:e(75341),plot:e(17295).plot,style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(95423).hoverPoints,eventData:e(58065),selectPoints:e(81974),moduleType:"trace",name:"bar",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function($){$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function($,R,e){var A=e(73972),k=e(89298),l=e(71828),T=e(43641);$.exports=function(x,d,s){function t(b,v){return l.coerce(x,d,T,b,v)}for(var o=!1,r=!1,n=!1,a={},i=t("barmode"),c=0;c<s.length;c++){var h=s[c];if(A.traceIs(h,"bar")&&h.visible){if(o=!0,i==="group"){var f=h.xaxis+h.yaxis;a[f]&&(n=!0),a[f]=!0}h.visible&&h.type==="histogram"&&k.getFromId({_fullLayout:d},h[h.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(r=!0)}}o?(i!=="overlay"&&t("barnorm"),t("bargap",r&&!n?0:.2),t("bargroupgap")):delete d.barmode}},17295:function($,R,e){var A=e(39898),k=e(92770),l=e(71828),T=e(63893),x=e(7901),d=e(91424),s=e(73972),t=e(89298).tickText,o=e(72597),r=o.recordMinTextSize,n=o.clearMinTextSize,a=e(16688),i=e(69383),c=e(97313),h=e(1486),f=h.text,b=h.textposition,v=e(23469).appendArrayPointValue,g=c.TEXTPAD;function y(L){return L.id}function p(L){if(L.ids)return y}function m(L,C){return L<C?1:-1}function w(L,C,P,I){var U;return!C.uniformtext.mode&&u(P)?(I&&(U=I()),L.transition().duration(P.duration).ease(P.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()})):L}function u(L){return L&&L.duration>0}function S(L){return L==="auto"?0:L}function _(L,C){var P=Math.PI/180*C,I=Math.abs(Math.sin(P)),U=Math.abs(Math.cos(P));return{x:L.width*U+L.height*I,y:L.width*I+L.height*U}}function E(L,C,P,I,U,z){var H=!!z.isHorizontal,F=!!z.constrained,N=z.angle||0,B=z.anchor||"end",j=B==="end",K=B==="start",G=((z.leftToRight||0)+1)/2,V=1-G,W=U.width,J=U.height,X=Math.abs(C-L),ee=Math.abs(I-P),re=X>2*g&&ee>2*g?g:0;X-=2*re,ee-=2*re;var ie=S(N);N!=="auto"||W<=X&&J<=ee||!(W>X||J>ee)||(W>ee||J>X)&&W<J==X<ee||(ie+=90);var se=_(U,ie),fe=1;F&&(fe=Math.min(1,X/se.x,ee/se.y));var ye=U.left*V+U.right*G,ge=(U.top+U.bottom)/2,he=(L+g)*V+(C-g)*G,ve=(P+I)/2,Ie=0,xe=0;if(K||j){var Ae=(H?se.x:se.y)/2,Se=H?m(L,C):m(P,I);H?K?(he=L+Se*re,Ie=-Se*Ae):(he=C-Se*re,Ie=Se*Ae):K?(ve=P+Se*re,xe=-Se*Ae):(ve=I-Se*re,xe=Se*Ae)}return{textX:ye,textY:ge,targetX:he,targetY:ve,anchorX:Ie,anchorY:xe,scale:fe,rotate:ie}}$.exports={plot:function(L,C,P,I,U,z){var H=C.xaxis,F=C.yaxis,N=L._fullLayout;U||(U={mode:N.barmode,norm:N.barmode,gap:N.bargap,groupgap:N.bargroupgap},n("bar",N));var B=l.makeTraceGroups(I,P,"trace bars").each(function(j){var K=A.select(this),G=j[0].trace,V=G.type==="waterfall",W=G.type==="funnel",J=G.type==="bar"||W,X=0;V&&G.connector.visible&&G.connector.mode==="between"&&(X=G.connector.line.width/2);var ee=G.orientation==="h",re=u(U),ie=l.ensureSingle(K,"g","points"),se=p(G),fe=ie.selectAll("g.point").data(l.identity,se);fe.enter().append("g").classed("point",!0),fe.exit().remove(),fe.each(function(ge,he){var ve,Ie,xe=A.select(this),Ae=function(le,de,be,Fe){var Ve=[],He=[],rt=Fe?de:be,tt=Fe?be:de;return Ve[0]=rt.c2p(le.s0,!0),He[0]=tt.c2p(le.p0,!0),Ve[1]=rt.c2p(le.s1,!0),He[1]=tt.c2p(le.p1,!0),Fe?[Ve,He]:[He,Ve]}(ge,H,F,ee),Se=Ae[0][0],Te=Ae[0][1],Q=Ae[1][0],oe=Ae[1][1],ce=(ee?Te-Se:oe-Q)==0;if(ce&&J&&i.getLineWidth(G,ge)&&(ce=!1),ce||(ce=!(k(Se)&&k(Te)&&k(Q)&&k(oe))),ge.isBlank=ce,ce&&(ee?Te=Se:oe=Q),X&&!ce&&(ee?(Se-=m(Se,Te)*X,Te+=m(Se,Te)*X):(Q-=m(Q,oe)*X,oe+=m(Q,oe)*X)),G.type==="waterfall"){if(!ce){var me=G[ge.dir].marker;ve=me.line.width,Ie=me.color}}else ve=i.getLineWidth(G,ge),Ie=ge.mc||G.marker.color;function Me(le){var de=A.round(ve/2%1,2);return U.gap===0&&U.groupgap===0?A.round(Math.round(le)-de,2):le}if(!L._context.staticPlot){var Re=x.opacity(Ie)<1||ve>.01?Me:function(le,de,be){return be&&le===de?le:Math.abs(le-de)>=2?Me(le):le>de?Math.ceil(le):Math.floor(le)};Se=Re(Se,Te,ee),Te=Re(Te,Se,ee),Q=Re(Q,oe,!ee),oe=Re(oe,Q,!ee)}var Ce=w(l.ensureSingle(xe,"path"),N,U,z);if(Ce.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Te-Se)*(oe-Q))||ce&&L._context.staticPlot?"M0,0Z":"M"+Se+","+Q+"V"+oe+"H"+Te+"V"+Q+"Z").call(d.setClipUrl,C.layerClipId,L),!N.uniformtext.mode&&re){var ze=d.makePointStyleFns(G);d.singlePointStyle(ge,Ce,G,ze,L)}(function(le,de,be,Fe,Ve,He,rt,tt,ot,ht,_t){var dt,bt=de.xaxis,St=de.yaxis,Et=le._fullLayout;function zt(qt,Xt,cn){return l.ensureSingle(qt,"text").text(Xt).attr({class:"bartext bartext-"+dt,"text-anchor":"middle","data-notex":1}).call(d.font,cn).call(T.convertToTspans,le)}var Ut=Fe[0].trace,Pt=Ut.orientation==="h",Ze=function(qt,Xt,cn,yn,Kt){var Mn,Un=Xt[0].trace;return Mn=Un.texttemplate?function(xn,dn,gn,an,sn){var On=dn[0].trace,En=l.castOption(On,gn,"texttemplate");if(!En)return"";var Dn,Zn,Fn,nr,$n=On.type==="histogram",mr=On.type==="waterfall",dr=On.type==="funnel",Yn=On.orientation==="h";function Vn(jn){return t(nr,nr.c2l(jn),!0).text}Yn?(Dn="y",Zn=sn,Fn="x",nr=an):(Dn="x",Zn=an,Fn="y",nr=sn);var ur,Gt=dn[gn],tn={};tn.label=Gt.p,tn.labelLabel=tn[Dn+"Label"]=(ur=Gt.p,t(Zn,Zn.c2l(ur),!0).text);var In=l.castOption(On,Gt.i,"text");(In===0||In)&&(tn.text=In),tn.value=Gt.s,tn.valueLabel=tn[Fn+"Label"]=Vn(Gt.s);var _n={};v(_n,On,Gt.i),($n||_n.x===void 0)&&(_n.x=Yn?tn.value:tn.label),($n||_n.y===void 0)&&(_n.y=Yn?tn.label:tn.value),($n||_n.xLabel===void 0)&&(_n.xLabel=Yn?tn.valueLabel:tn.labelLabel),($n||_n.yLabel===void 0)&&(_n.yLabel=Yn?tn.labelLabel:tn.valueLabel),mr&&(tn.delta=+Gt.rawS||Gt.s,tn.deltaLabel=Vn(tn.delta),tn.final=Gt.v,tn.finalLabel=Vn(tn.final),tn.initial=tn.final-tn.delta,tn.initialLabel=Vn(tn.initial)),dr&&(tn.value=Gt.s,tn.valueLabel=Vn(tn.value),tn.percentInitial=Gt.begR,tn.percentInitialLabel=l.formatPercent(Gt.begR),tn.percentPrevious=Gt.difR,tn.percentPreviousLabel=l.formatPercent(Gt.difR),tn.percentTotal=Gt.sumR,tn.percenTotalLabel=l.formatPercent(Gt.sumR));var Sn=l.castOption(On,Gt.i,"customdata");return Sn&&(tn.customdata=Sn),l.texttemplateString(En,tn,xn._d3locale,_n,tn,On._meta||{})}(qt,Xt,cn,yn,Kt):Un.textinfo?function(xn,dn,gn,an){var sn=xn[0].trace,On=sn.orientation==="h",En=sn.type==="waterfall",Dn=sn.type==="funnel";function Zn(Sn){return t(On?gn:an,+Sn,!0).text}var Fn,nr,$n=sn.textinfo,mr=xn[dn],dr=$n.split("+"),Yn=[],Vn=function(Sn){return dr.indexOf(Sn)!==-1};if(Vn("label")&&Yn.push((nr=xn[dn].p,t(On?an:gn,nr,!0).text)),Vn("text")&&((Fn=l.castOption(sn,mr.i,"text"))===0||Fn)&&Yn.push(Fn),En){var ur=+mr.rawS||mr.s,Gt=mr.v,tn=Gt-ur;Vn("initial")&&Yn.push(Zn(tn)),Vn("delta")&&Yn.push(Zn(ur)),Vn("final")&&Yn.push(Zn(Gt))}if(Dn){Vn("value")&&Yn.push(Zn(mr.s));var In=0;Vn("percent initial")&&In++,Vn("percent previous")&&In++,Vn("percent total")&&In++;var _n=In>1;Vn("percent initial")&&(Fn=l.formatPercent(mr.begR),_n&&(Fn+=" of initial"),Yn.push(Fn)),Vn("percent previous")&&(Fn=l.formatPercent(mr.difR),_n&&(Fn+=" of previous"),Yn.push(Fn)),Vn("percent total")&&(Fn=l.formatPercent(mr.sumR),_n&&(Fn+=" of total"),Yn.push(Fn))}return Yn.join("<br>")}(Xt,cn,yn,Kt):i.getValue(Un.text,cn),i.coerceString(f,Mn)}(Et,Fe,Ve,bt,St);dt=function(qt,Xt){var cn=i.getValue(qt.textposition,Xt);return i.coerceEnumerated(b,cn)}(Ut,Ve);var Ye=ht.mode==="stack"||ht.mode==="relative",Be=Fe[Ve],ke=!Ye||Be._outmost;if(Ze&&dt!=="none"&&(!Be.isBlank&&He!==rt&&tt!==ot||dt!=="auto"&&dt!=="inside")){var Pe=Et.font,qe=a.getBarColor(Fe[Ve],Ut),Xe=a.getInsideTextFont(Ut,Ve,Pe,qe),nt=a.getOutsideTextFont(Ut,Ve,Pe),ut=be.datum();Pt?bt.type==="log"&&ut.s0<=0&&(He=bt.range[0]<bt.range[1]?0:bt._length):St.type==="log"&&ut.s0<=0&&(tt=St.range[0]<St.range[1]?St._length:0);var ct,Ct,Lt,Mt,mt,kt=Math.abs(rt-He)-2*g,wt=Math.abs(ot-tt)-2*g;if(dt==="outside"&&(ke||Be.hasB||(dt="inside")),dt==="auto"&&(ke?(dt="inside",ct=zt(be,Ze,mt=l.ensureUniformFontSize(le,Xe)),Lt=(Ct=d.bBox(ct.node())).width,Mt=Ct.height,Lt>0&&Mt>0&&(Lt<=kt&&Mt<=wt||Lt<=wt&&Mt<=kt||(Pt?kt>=Lt*(wt/Mt):wt>=Mt*(kt/Lt)))?dt="inside":(dt="outside",ct.remove(),ct=null)):dt="inside"),!ct){var Ot=(ct=zt(be,Ze,mt=l.ensureUniformFontSize(le,dt==="outside"?nt:Xe))).attr("transform");if(ct.attr("transform",""),Lt=(Ct=d.bBox(ct.node())).width,Mt=Ct.height,ct.attr("transform",Ot),Lt<=0||Mt<=0)return void ct.remove()}var It,Nt=Ut.textangle;It=dt==="outside"?function(qt,Xt,cn,yn,Kt,Mn){var Un,xn=!!Mn.isHorizontal,dn=!!Mn.constrained,gn=Mn.angle||0,an=Kt.width,sn=Kt.height,On=Math.abs(Xt-qt),En=Math.abs(yn-cn);Un=xn?En>2*g?g:0:On>2*g?g:0;var Dn=1;dn&&(Dn=xn?Math.min(1,En/sn):Math.min(1,On/an));var Zn=S(gn),Fn=_(Kt,Zn),nr=(xn?Fn.x:Fn.y)/2,$n=(Kt.left+Kt.right)/2,mr=(Kt.top+Kt.bottom)/2,dr=(qt+Xt)/2,Yn=(cn+yn)/2,Vn=0,ur=0,Gt=xn?m(Xt,qt):m(cn,yn);return xn?(dr=Xt-Gt*Un,Vn=Gt*nr):(Yn=yn+Gt*Un,ur=-Gt*nr),{textX:$n,textY:mr,targetX:dr,targetY:Yn,anchorX:Vn,anchorY:ur,scale:Dn,rotate:Zn}}(He,rt,tt,ot,Ct,{isHorizontal:Pt,constrained:Ut.constraintext==="both"||Ut.constraintext==="outside",angle:Nt}):E(He,rt,tt,ot,Ct,{isHorizontal:Pt,constrained:Ut.constraintext==="both"||Ut.constraintext==="inside",angle:Nt,anchor:Ut.insidetextanchor}),It.fontSize=mt.size,r(Ut.type==="histogram"?"bar":Ut.type,It,Et),Be.transform=It;var Dt=w(ct,Et,ht,_t);l.setTransormAndDisplay(Dt,It)}else be.select("text").remove()})(L,C,xe,j,he,Se,Te,Q,oe,U,z),C.layerClipId&&d.hideOutsideRangePoint(ge,xe.select("text"),H,F,G.xcalendar,G.ycalendar)});var ye=G.cliponaxis===!1;d.setClipUrl(K,ye?null:C.layerClipId,L)});s.getComponentMethod("errorbars","plot")(L,B,C,U)},toMoveInsideBar:E}},81974:function($){function R(e,A,k,l,T){var x=A.c2p(l?e.s0:e.p0,!0),d=A.c2p(l?e.s1:e.p1,!0),s=k.c2p(l?e.p0:e.s0,!0),t=k.c2p(l?e.p1:e.s1,!0);return T?[(x+d)/2,(s+t)/2]:l?[d,(s+t)/2]:[(x+d)/2,t]}$.exports=function(e,A){var k,l=e.cd,T=e.xaxis,x=e.yaxis,d=l[0].trace,s=d.type==="funnel",t=d.orientation==="h",o=[];if(A===!1)for(k=0;k<l.length;k++)l[k].selected=0;else for(k=0;k<l.length;k++){var r=l[k],n="ct"in r?r.ct:R(r,T,x,t,s);A.contains(n,!1,k,e)?(o.push({pointNumber:k,x:T.c2d(r.x),y:x.c2d(r.y)}),r.selected=1):r.selected=0}return o}},61546:function($,R,e){$.exports=k;var A=e(71828).distinctVals;function k(l,T){this.traces=l,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var x=1/0,d=T.posAxis._id.charAt(0),s=[],t=0;t<l.length;t++){for(var o=l[t],r=0;r<o.length;r++){var n=o[r],a=n.p;a===void 0&&(a=n[d]),a!==void 0&&s.push(a)}o[0]&&o[0].width1&&(x=Math.min(o[0].width1,x))}this.positions=s;var i=A(s);this.distinctPositions=i.vals,i.vals.length===1&&x!==1/0?this.minDiff=x:this.minDiff=Math.min(i.minDiff,x);var c=(T.posAxis||{}).type;c!=="category"&&c!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(l,T){var x=this.getLabel(l,T),d=this.bins[x]||0;return this.bins[x]=d+T,d},k.prototype.get=function(l,T){var x=this.getLabel(l,T);return this.bins[x]||0},k.prototype.getLabel=function(l,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?l:Math.round(l/this.binWidth))}},16688:function($,R,e){var A=e(39898),k=e(7901),l=e(91424),T=e(71828),x=e(73972),d=e(72597).resizeText,s=e(1486),t=s.textfont,o=s.insidetextfont,r=s.outsidetextfont,n=e(69383);function a(y,p,m){l.pointStyle(y.selectAll("path"),p,m),i(y,p,m)}function i(y,p,m){y.selectAll("text").each(function(w){var u=A.select(this),S=T.ensureUniformFontSize(m,c(u,w,p,m));l.font(u,S)})}function c(y,p,m,w){var u=w._fullLayout.font,S=m.textfont;if(y.classed("bartext-inside")){var _=g(p,m);S=f(m,p.i,u,_)}else y.classed("bartext-outside")&&(S=b(m,p.i,u));return S}function h(y,p,m){return v(t,y.textfont,p,m)}function f(y,p,m,w){var u=h(y,p,m);return(y._input.textfont===void 0||y._input.textfont.color===void 0||Array.isArray(y.textfont.color)&&y.textfont.color[p]===void 0)&&(u={color:k.contrast(w),family:u.family,size:u.size}),v(o,y.insidetextfont,p,u)}function b(y,p,m){var w=h(y,p,m);return v(r,y.outsidetextfont,p,w)}function v(y,p,m,w){p=p||{};var u=n.getValue(p.family,m),S=n.getValue(p.size,m),_=n.getValue(p.color,m);return{family:n.coerceString(y.family,u,w.family),size:n.coerceNumber(y.size,S,w.size),color:n.coerceColor(y.color,_,w.color)}}function g(y,p){return p.type==="waterfall"?p[y.dir].marker.color:y.mcc||y.mc||p.marker.color}$.exports={style:function(y){var p=A.select(y).selectAll("g.barlayer").selectAll("g.trace");d(y,p,"bar");var m=p.size(),w=y._fullLayout;p.style("opacity",function(u){return u[0].trace.opacity}).each(function(u){(w.barmode==="stack"&&m>1||w.bargap===0&&w.bargroupgap===0&&!u[0].trace.marker.line.width)&&A.select(this).attr("shape-rendering","crispEdges")}),p.selectAll("g.points").each(function(u){a(A.select(this),u[0].trace,y)}),x.getComponentMethod("errorbars","style")(p)},styleTextPoints:i,styleOnSelect:function(y,p,m){var w=p[0].trace;w.selectedpoints?function(u,S,_){l.selectedPointStyle(u.selectAll("path"),S),function(E,L,C){E.each(function(P){var I,U=A.select(this);if(P.selected){I=T.ensureUniformFontSize(C,c(U,P,L,C));var z=L.selected.textfont&&L.selected.textfont.color;z&&(I.color=z),l.font(U,I)}else l.selectedTextStyle(U,L)})}(u.selectAll("text"),S,_)}(m,w,y):(a(m,w,y),x.getComponentMethod("errorbars","style")(m))},getInsideTextFont:f,getOutsideTextFont:b,getBarColor:g,resizeText:d}},98340:function($,R,e){var A=e(7901),k=e(52075).hasColorscale,l=e(1586),T=e(71828).coercePattern;$.exports=function(x,d,s,t,o){var r=s("marker.color",t),n=k(x,"marker");n&&l(x,d,o,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",A.defaultLine),k(x,"marker.line")&&l(x,d,o,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",r,n),s("selected.marker.color"),s("unselected.marker.color")}},72597:function($,R,e){var A=e(39898),k=e(71828);function l(T){return"_"+T+"Text_minsize"}$.exports={recordMinTextSize:function(T,x,d){if(d.uniformtext.mode){var s=l(T),t=d.uniformtext.minsize,o=x.scale*x.fontSize;x.hide=o<t,d[s]=d[s]||1/0,x.hide||(d[s]=Math.min(d[s],Math.max(o,t)))}},clearMinTextSize:function(T,x){x[l(T)]=void 0},resizeText:function(T,x,d){var s=T._fullLayout,t=s["_"+d+"Text_minsize"];if(t){var o,r=s.uniformtext.mode==="hide";switch(d){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}x.selectAll(o).each(function(n){var a=n.transform;if(a){a.scale=r&&a.hide?0:t/a.fontSize;var i=A.select(this).select("text");k.setTransormAndDisplay(i,a)}})}}}},55023:function($,R,e){var A=e(5386).f,k=e(1426).extendFlat,l=e(81245),T=e(1486);$.exports={r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,base:k({},T.base,{}),offset:k({},T.offset,{}),width:k({},T.width,{}),text:k({},T.text,{}),hovertext:k({},T.hovertext,{}),marker:T.marker,hoverinfo:l.hoverinfo,hovertemplate:A(),selected:T.selected,unselected:T.unselected}},74692:function($,R,e){var A=e(52075).hasColorscale,k=e(78803),l=e(75341),T=e(11661).setGroupPositions,x=e(66279),d=e(73972).traceIs,s=e(71828).extendFlat;$.exports={calc:function(t,o){for(var r=t._fullLayout,n=o.subplot,a=r[n].radialaxis,i=r[n].angularaxis,c=a.makeCalcdata(o,"r"),h=i.makeCalcdata(o,"theta"),f=o._length,b=new Array(f),v=c,g=h,y=0;y<f;y++)b[y]={p:g[y],s:v[y]};function p(m){var w=o[m];w!==void 0&&(o["_"+m]=Array.isArray(w)?i.makeCalcdata(o,m):i.d2c(w,o.thetaunit))}return i.type==="linear"&&(p("width"),p("offset")),A(o,"marker")&&k(t,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),A(o,"marker.line")&&k(t,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(b,o),x(b,o),b},crossTraceCalc:function(t,o,r){for(var n=t.calcdata,a=[],i=0;i<n.length;i++){var c=n[i],h=c[0].trace;h.visible===!0&&d(h,"bar")&&h.subplot===r&&a.push(c)}var f=s({},o.radialaxis,{_id:"x"}),b=o.angularaxis;T(t,b,f,a,{mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap})}}},6135:function($,R,e){var A=e(71828),k=e(22184).handleRThetaDefaults,l=e(98340),T=e(55023);$.exports=function(x,d,s,t){function o(r,n){return A.coerce(x,d,T,r,n)}k(x,d,t,o)?(o("thetaunit"),o("base"),o("offset"),o("width"),o("text"),o("hovertext"),o("hovertemplate"),l(x,d,o,s,t),A.coerceSelectionMarkerOpacity(d,o)):d.visible=!1}},27379:function($,R,e){var A=e(30211),k=e(71828),l=e(95423).getTraceColor,T=k.fillText,x=e(59150).makeHoverPointText,d=e(10869).isPtInsidePolygon;$.exports=function(s,t,o){var r=s.cd,n=r[0].trace,a=s.subplot,i=a.radialAxis,c=a.angularAxis,h=a.vangles,f=h?d:k.isPtInsideSector,b=s.maxHoverDistance,v=c._period||2*Math.PI,g=Math.abs(i.g2p(Math.sqrt(t*t+o*o))),y=Math.atan2(o,t);if(i.range[0]>i.range[1]&&(y+=Math.PI),A.getClosest(r,function(w){return f(g,y,[w.rp0,w.rp1],[w.thetag0,w.thetag1],h)?b+Math.min(1,Math.abs(w.thetag1-w.thetag0)/v)-1+(w.rp1-g)/(w.rp1-w.rp0)-1:1/0},s),s.index!==!1){var p=r[s.index];s.x0=s.x1=p.ct[0],s.y0=s.y1=p.ct[1];var m=k.extendFlat({},p,{r:p.s,theta:p.p});return T(p,n,s),x(m,n,a,s),s.hovertemplate=n.hovertemplate,s.color=l(n,p),s.xLabelVal=s.yLabelVal=void 0,p.s<0&&(s.idealAlign="left"),[s]}}},23381:function($,R,e){$.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(23580),categories:["polar","bar","showLegend"],attributes:e(55023),layoutAttributes:e(40151),supplyDefaults:e(6135),supplyLayoutDefaults:e(19860),calc:e(74692).calc,crossTraceCalc:e(74692).crossTraceCalc,plot:e(60173),colorbar:e(4898),formatLabels:e(98608),style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(27379),selectPoints:e(81974),meta:{}}},40151:function($){$.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function($,R,e){var A=e(71828),k=e(40151);$.exports=function(l,T,x){var d,s={};function t(n,a){return A.coerce(l[d]||{},T[d],k,n,a)}for(var o=0;o<x.length;o++){var r=x[o];r.type==="barpolar"&&r.visible===!0&&(s[d=r.subplot]||(t("barmode"),t("bargap"),s[d]=1))}}},60173:function($,R,e){var A=e(39898),k=e(92770),l=e(71828),T=e(91424),x=e(10869);$.exports=function(d,s,t){var o=s.xaxis,r=s.yaxis,n=s.radialAxis,a=s.angularAxis,i=function(h){var f=h.cxx,b=h.cyy;return h.vangles?function(v,g,y,p){var m,w;l.angleDelta(y,p)>0?(m=y,w=p):(m=p,w=y);var u=[x.findEnclosingVertexAngles(m,h.vangles)[0],(m+w)/2,x.findEnclosingVertexAngles(w,h.vangles)[1]];return x.pathPolygonAnnulus(v,g,m,w,u,f,b)}:function(v,g,y,p){return l.pathAnnulus(v,g,y,p,f,b)}}(s),c=s.layers.frontplot.select("g.barlayer");l.makeTraceGroups(c,t,"trace bars").each(function(){var h=A.select(this),f=l.ensureSingle(h,"g","points").selectAll("g.point").data(l.identity);f.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),f.exit().remove(),f.each(function(b){var v,g=A.select(this),y=b.rp0=n.c2p(b.s0),p=b.rp1=n.c2p(b.s1),m=b.thetag0=a.c2g(b.p0),w=b.thetag1=a.c2g(b.p1);if(k(y)&&k(p)&&k(m)&&k(w)&&y!==p&&m!==w){var u=n.c2g(b.s1),S=(m+w)/2;b.ct=[o.c2p(u*Math.cos(S)),r.c2p(u*Math.sin(S))],v=i(y,p,m,w)}else v="M0,0Z";l.ensureSingle(g,"path").attr("d",v)}),T.setClipUrl(h,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,d)})}},53522:function($,R,e){var A=e(82196),k=e(1486),l=e(22399),T=e(12663).axisHoverFormat,x=e(5386).f,d=e(1426).extendFlat,s=A.marker,t=s.line;$.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:d({},s.symbol,{arrayOk:!1,editType:"plot"}),opacity:d({},s.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:d({},s.angle,{arrayOk:!1,editType:"calc"}),size:d({},s.size,{arrayOk:!1,editType:"calc"}),color:d({},s.color,{arrayOk:!1,editType:"style"}),line:{color:d({},t.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:d({},t.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:A.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:{marker:A.selected.marker,editType:"style"},unselected:{marker:A.unselected.marker,editType:"style"},text:d({},A.text,{}),hovertext:d({},A.hovertext,{}),hovertemplate:x({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function($,R,e){var A=e(92770),k=e(89298),l=e(42973),T=e(71828),x=e(50606).BADNUM,d=T._;$.exports=function(f,b){var v,g,y,p,m,w,u,S=f._fullLayout,_=k.getFromId(f,b.xaxis||"x"),E=k.getFromId(f,b.yaxis||"y"),L=[],C=b.type==="violin"?"_numViolins":"_numBoxes";b.orientation==="h"?(y=_,p="x",m=E,w="y",u=!!b.yperiodalignment):(y=E,p="y",m=_,w="x",u=!!b.xperiodalignment);var P,I,U,z,H,F,N=function(be,Fe,Ve,He){var rt,tt=Fe+"0"in be;if(Fe in be||tt&&"d"+Fe in be){var ot=Ve.makeCalcdata(be,Fe);return[l(be,Ve,Fe,ot).vals,ot]}rt=tt?be[Fe+"0"]:"name"in be&&(Ve.type==="category"||A(be.name)&&["linear","log"].indexOf(Ve.type)!==-1||T.isDateTime(be.name)&&Ve.type==="date")?be.name:He;for(var ht=Ve.type==="multicategory"?Ve.r2c_just_indices(rt):Ve.d2c(rt,0,be[Fe+"calendar"]),_t=be._length,dt=new Array(_t),bt=0;bt<_t;bt++)dt[bt]=ht;return[dt]}(b,w,m,S[C]),B=N[0],j=N[1],K=T.distinctVals(B,m),G=K.vals,V=K.minDiff/2,W=(b.boxpoints||b.points)==="all"?T.identity:function(be){return be.v<P.lf||be.v>P.uf};if(b._hasPreCompStats){var J=b[p],X=function(be){return y.d2c((b[be]||[])[v])},ee=1/0,re=-1/0;for(v=0;v<b._length;v++){var ie=B[v];if(A(ie)){if((P={}).pos=P[w]=ie,u&&j&&(P.orig_p=j[v]),P.q1=X("q1"),P.med=X("median"),P.q3=X("q3"),I=[],J&&T.isArrayOrTypedArray(J[v]))for(g=0;g<J[v].length;g++)(F=y.d2c(J[v][g]))!==x&&(t(H={v:F,i:[v,g]},b,[v,g]),I.push(H));if(P.pts=I.sort(o),z=(U=P[p]=I.map(r)).length,P.med!==x&&P.q1!==x&&P.q3!==x&&P.med>=P.q1&&P.q3>=P.med){var se=X("lowerfence");P.lf=se!==x&&se<=P.q1?se:n(P,U,z);var fe=X("upperfence");P.uf=fe!==x&&fe>=P.q3?fe:a(P,U,z);var ye=X("mean");P.mean=ye!==x?ye:z?T.mean(U,z):(P.q1+P.q3)/2;var ge=X("sd");P.sd=ye!==x&&ge>=0?ge:z?T.stdev(U,z,P.mean):P.q3-P.q1,P.lo=i(P),P.uo=c(P);var he=X("notchspan");he=he!==x&&he>0?he:h(P,z),P.ln=P.med-he,P.un=P.med+he;var ve=P.lf,Ie=P.uf;b.boxpoints&&U.length&&(ve=Math.min(ve,U[0]),Ie=Math.max(Ie,U[z-1])),b.notched&&(ve=Math.min(ve,P.ln),Ie=Math.max(Ie,P.un)),P.min=ve,P.max=Ie}else{var xe;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join(`
`)),xe=P.med!==x?P.med:P.q1!==x?P.q3!==x?(P.q1+P.q3)/2:P.q1:P.q3!==x?P.q3:0,P.med=xe,P.q1=P.q3=xe,P.lf=P.uf=xe,P.mean=P.sd=xe,P.ln=P.un=xe,P.min=P.max=xe}ee=Math.min(ee,P.min),re=Math.max(re,P.max),P.pts2=I.filter(W),L.push(P)}}b._extremes[y._id]=k.findExtremes(y,[ee,re],{padded:!0})}else{var Ae=y.makeCalcdata(b,p),Se=function(be,Fe){for(var Ve=be.length,He=new Array(Ve+1),rt=0;rt<Ve;rt++)He[rt]=be[rt]-Fe;return He[Ve]=be[Ve-1]+Fe,He}(G,V),Te=G.length,Q=function(be){for(var Fe=new Array(be),Ve=0;Ve<be;Ve++)Fe[Ve]=[];return Fe}(Te);for(v=0;v<b._length;v++)if(F=Ae[v],A(F)){var oe=T.findBin(B[v],Se);oe>=0&&oe<Te&&(t(H={v:F,i:v},b,v),Q[oe].push(H))}var ce=1/0,me=-1/0,Me=b.quartilemethod,Re=Me==="exclusive",Ce=Me==="inclusive";for(v=0;v<Te;v++)if(Q[v].length>0){var ze,le;(P={}).pos=P[w]=G[v],I=P.pts=Q[v].sort(o),z=(U=P[p]=I.map(r)).length,P.min=U[0],P.max=U[z-1],P.mean=T.mean(U,z),P.sd=T.stdev(U,z,P.mean),P.med=T.interp(U,.5),z%2&&(Re||Ce)?(Re?(ze=U.slice(0,z/2),le=U.slice(z/2+1)):Ce&&(ze=U.slice(0,z/2+1),le=U.slice(z/2)),P.q1=T.interp(ze,.5),P.q3=T.interp(le,.5)):(P.q1=T.interp(U,.25),P.q3=T.interp(U,.75)),P.lf=n(P,U,z),P.uf=a(P,U,z),P.lo=i(P),P.uo=c(P);var de=h(P,z);P.ln=P.med-de,P.un=P.med+de,ce=Math.min(ce,P.ln),me=Math.max(me,P.un),P.pts2=I.filter(W),L.push(P)}b._extremes[y._id]=k.findExtremes(y,b.notched?Ae.concat([ce,me]):Ae,{padded:!0})}return function(be,Fe){if(T.isArrayOrTypedArray(Fe.selectedpoints))for(var Ve=0;Ve<be.length;Ve++){for(var He=be[Ve].pts||[],rt={},tt=0;tt<He.length;tt++)rt[He[tt].i]=tt;T.tagSelected(He,Fe,rt)}}(L,b),L.length>0?(L[0].t={num:S[C],dPos:V,posLetter:w,valLetter:p,labels:{med:d(f,"median:"),min:d(f,"min:"),q1:d(f,"q1:"),q3:d(f,"q3:"),max:d(f,"max:"),mean:b.boxmean==="sd"?d(f,"mean ± σ:"):d(f,"mean:"),lf:d(f,"lower fence:"),uf:d(f,"upper fence:")}},S[C]++,L):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(f,b,v){for(var g in s)T.isArrayOrTypedArray(b[g])&&(Array.isArray(v)?T.isArrayOrTypedArray(b[g][v[0]])&&(f[s[g]]=b[g][v[0]][v[1]]):f[s[g]]=b[g][v])}function o(f,b){return f.v-b.v}function r(f){return f.v}function n(f,b,v){return v===0?f.q1:Math.min(f.q1,b[Math.min(T.findBin(2.5*f.q1-1.5*f.q3,b,!0)+1,v-1)])}function a(f,b,v){return v===0?f.q3:Math.max(f.q3,b[Math.max(T.findBin(2.5*f.q3-1.5*f.q1,b),0)])}function i(f){return 4*f.q1-3*f.q3}function c(f){return 4*f.q3-3*f.q1}function h(f,b){return b===0?0:1.57*(f.q3-f.q1)/Math.sqrt(b)}},37188:function($,R,e){var A=e(89298),k=e(71828),l=e(99082).getAxisGroup,T=["v","h"];function x(d,s,t,o){var r,n,a,i=s.calcdata,c=s._fullLayout,h=o._id,f=h.charAt(0),b=[],v=0;for(r=0;r<t.length;r++)for(a=i[t[r]],n=0;n<a.length;n++)b.push(o.c2l(a[n].pos,!0)),v+=(a[n].pts2||[]).length;if(b.length){var g=k.distinctVals(b);o.type!=="category"&&o.type!=="multicategory"||(g.minDiff=1);var y=g.minDiff/2;A.minDtick(o,g.minDiff,g.vals[0],!0);var p=c[d==="violin"?"_numViolins":"_numBoxes"],m=c[d+"mode"]==="group"&&p>1,w=1-c[d+"gap"],u=1-c[d+"groupgap"];for(r=0;r<t.length;r++){var S,_,E,L,C,P,I=(a=i[t[r]])[0].trace,U=a[0].t,z=I.width,H=I.side;if(z)S=_=L=z/2,E=0;else if(S=y,m){var F=l(c,o._id)+I.orientation,N=(c._alignmentOpts[F]||{})[I.alignmentgroup]||{},B=Object.keys(N.offsetGroups||{}).length,j=B||p;_=S*w*u/j,E=2*S*(((B?I._offsetIndex:U.num)+.5)/j-.5)*w,L=S*w/j}else _=S*w*u,E=0,L=S;U.dPos=S,U.bPos=E,U.bdPos=_,U.wHover=L;var K,G,V,W,J,X,ee=E+_,re=Boolean(z);if(H==="positive"?(C=S*(z?1:.5),K=ee,P=K=E):H==="negative"?(C=K=E,P=S*(z?1:.5),G=ee):(C=P=S,K=G=ee),(I.boxpoints||I.points)&&v>0){var ie=I.pointpos,se=I.jitter,fe=I.marker.size/2,ye=0;ie+se>=0&&((ye=ee*(ie+se))>C?(re=!0,J=fe,V=ye):ye>K&&(J=fe,V=C)),ye<=C&&(V=C);var ge=0;ie-se<=0&&((ge=-ee*(ie-se))>P?(re=!0,X=fe,W=ge):ge>G&&(X=fe,W=P)),ge<=P&&(W=P)}else V=C,W=P;var he=new Array(a.length);for(n=0;n<a.length;n++)he[n]=a[n].pos;I._extremes[h]=A.findExtremes(o,he,{padded:re,vpadminus:W,vpadplus:V,vpadLinearized:!0,ppadminus:{x:X,y:J}[f],ppadplus:{x:J,y:X}[f]})}}}$.exports={crossTraceCalc:function(d,s){for(var t=d.calcdata,o=s.xaxis,r=s.yaxis,n=0;n<T.length;n++){for(var a=T[n],i=a==="h"?r:o,c=[],h=0;h<t.length;h++){var f=t[h],b=f[0].t,v=f[0].trace;v.visible!==!0||v.type!=="box"&&v.type!=="candlestick"||b.empty||(v.orientation||"v")!==a||v.xaxis!==o._id||v.yaxis!==r._id||c.push(h)}x("box",d,c,i)}},setPositionOffset:x}},36411:function($,R,e){var A=e(71828),k=e(73972),l=e(7901),T=e(73927),x=e(26125),d=e(4322),s=e(53522);function t(r,n,a,i){function c(H){var F=0;return H&&H.length&&(F+=1,A.isArrayOrTypedArray(H[0])&&H[0].length&&(F+=1)),F}function h(H){return A.validate(r[H],s[H])}var f,b=a("y"),v=a("x");if(n.type==="box"){var g=a("q1"),y=a("median"),p=a("q3");n._hasPreCompStats=g&&g.length&&y&&y.length&&p&&p.length,f=Math.min(A.minRowLength(g),A.minRowLength(y),A.minRowLength(p))}var m,w,u=c(b),S=c(v),_=u&&A.minRowLength(b),E=S&&A.minRowLength(v),L=i.calendar,C={autotypenumbers:i.autotypenumbers};if(n._hasPreCompStats)switch(String(S)+String(u)){case"00":var P=h("x0")||h("dx");m=!h("y0")&&!h("dy")||P?"v":"h",w=f;break;case"10":m="v",w=Math.min(f,E);break;case"20":m="h",w=Math.min(f,v.length);break;case"01":m="h",w=Math.min(f,_);break;case"02":m="v",w=Math.min(f,b.length);break;case"12":m="v",w=Math.min(f,E,b.length);break;case"21":m="h",w=Math.min(f,v.length,_);break;case"11":w=0;break;case"22":var I,U=!1;for(I=0;I<v.length;I++)if(d(v[I],L,C)==="category"){U=!0;break}if(U)m="v",w=Math.min(f,E,b.length);else{for(I=0;I<b.length;I++)if(d(b[I],L,C)==="category"){U=!0;break}U?(m="h",w=Math.min(f,v.length,_)):(m="v",w=Math.min(f,E,b.length))}}else u>0?(m="v",w=S>0?Math.min(E,_):Math.min(_)):S>0?(m="h",w=Math.min(E)):w=0;if(w){n._length=w;var z=a("orientation",m);n._hasPreCompStats?z==="v"&&S===0?(a("x0",0),a("dx",1)):z==="h"&&u===0&&(a("y0",0),a("dy",1)):z==="v"&&S===0?a("x0"):z==="h"&&u===0&&a("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],i)}else n.visible=!1}function o(r,n,a,i){var c=i.prefix,h=A.coerce2(r,n,s,"marker.outliercolor"),f=a("marker.line.outliercolor"),b="outliers";n._hasPreCompStats?b="all":(h||f)&&(b="suspectedoutliers");var v=a(c+"points",b);v?(a("jitter",v==="all"?.3:0),a("pointpos",v==="all"?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",n.line.color),a("marker.line.color"),a("marker.line.width"),v==="suspectedoutliers"&&(a("marker.line.outliercolor",n.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete n.marker;var g=a("hoveron");g!=="all"&&g.indexOf("points")===-1||a("hovertemplate"),A.coerceSelectionMarkerOpacity(n,a)}$.exports={supplyDefaults:function(r,n,a,i){function c(p,m){return A.coerce(r,n,s,p,m)}if(t(r,n,c,i),n.visible!==!1){T(r,n,i,c),c("xhoverformat"),c("yhoverformat");var h=n._hasPreCompStats;h&&(c("lowerfence"),c("upperfence")),c("line.color",(r.marker||{}).color||a),c("line.width"),c("fillcolor",l.addOpacity(n.line.color,.5));var f=!1;if(h){var b=c("mean"),v=c("sd");b&&b.length&&(f=!0,v&&v.length&&(f="sd"))}c("boxmean",f),c("whiskerwidth"),c("width"),c("quartilemethod");var g=!1;if(h){var y=c("notchspan");y&&y.length&&(g=!0)}else A.validate(r.notchwidth,s.notchwidth)&&(g=!0);c("notched",g)&&c("notchwidth"),o(r,n,c,{prefix:"box"})}},crossTraceDefaults:function(r,n){var a,i;function c(b){return A.coerce(i._input,i,s,b)}for(var h=0;h<r.length;h++){var f=(i=r[h]).type;f!=="box"&&f!=="violin"||(a=i._input,n[f+"mode"]==="group"&&x(a,i,n,c))}},handleSampleDefaults:t,handlePointsDefaults:o}},74907:function($){$.exports=function(R,e){return e.hoverOnBox&&(R.hoverOnBox=e.hoverOnBox),"xVal"in e&&(R.x=e.xVal),"yVal"in e&&(R.y=e.yVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},41868:function($,R,e){var A=e(89298),k=e(71828),l=e(30211),T=e(7901),x=k.fillText;function d(t,o,r,n){var a,i,c,h,f,b,v,g,y,p,m,w,u,S,_=t.cd,E=t.xa,L=t.ya,C=_[0].trace,P=_[0].t,I=C.type==="violin",U=P.bdPos,z=P.wHover,H=function(xe){return c.c2l(xe.pos)+P.bPos-c.c2l(b)};I&&C.side!=="both"?(C.side==="positive"&&(y=function(xe){var Ae=H(xe);return l.inbox(Ae,Ae+z,p)},w=U,u=0),C.side==="negative"&&(y=function(xe){var Ae=H(xe);return l.inbox(Ae-z,Ae,p)},w=0,u=U)):(y=function(xe){var Ae=H(xe);return l.inbox(Ae-z,Ae+z,p)},w=u=U),S=I?function(xe){return l.inbox(xe.span[0]-f,xe.span[1]-f,p)}:function(xe){return l.inbox(xe.min-f,xe.max-f,p)},C.orientation==="h"?(f=o,b=r,v=S,g=y,a="y",c=L,i="x",h=E):(f=r,b=o,v=y,g=S,a="x",c=E,i="y",h=L);var F=Math.min(1,U/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function N(xe){return(v(xe)+g(xe))/2}p=t.maxHoverDistance-F,m=t.maxSpikeDistance-F;var B=l.getDistanceFunction(n,v,g,N);if(l.getClosest(_,B,t),t.index===!1)return[];var j=_[t.index],K=C.line.color,G=(C.marker||{}).color;T.opacity(K)&&C.line.width?t.color=K:T.opacity(G)&&C.boxpoints?t.color=G:t.color=C.fillcolor,t[a+"0"]=c.c2p(j.pos+P.bPos-u,!0),t[a+"1"]=c.c2p(j.pos+P.bPos+w,!0),t[a+"LabelVal"]=j.orig_p!==void 0?j.orig_p:j.pos;var V=a+"Spike";t.spikeDistance=N(j)*m/p,t[V]=c.c2p(j.pos,!0);var W=C.boxmean||(C.meanline||{}).visible,J=C.boxpoints||C.points,X=J&&W?["max","uf","q3","med","mean","q1","lf","min"]:J&&!W?["max","uf","q3","med","q1","lf","min"]:!J&&W?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],ee=h.range[1]<h.range[0];C.orientation===(ee?"v":"h")&&X.reverse();for(var re=t.spikeDistance,ie=t[V],se=[],fe=0;fe<X.length;fe++){var ye=X[fe];if(ye in j){var ge=j[ye],he=h.c2p(ge,!0),ve=k.extendFlat({},t);ve.attr=ye,ve[i+"0"]=ve[i+"1"]=he,ve[i+"LabelVal"]=ge,ve[i+"Label"]=(P.labels?P.labels[ye]+" ":"")+A.hoverLabelText(h,ge,C[i+"hoverformat"]),ve.hoverOnBox=!0,ye==="mean"&&"sd"in j&&C.boxmean==="sd"&&(ve[i+"err"]=j.sd),ve.hovertemplate=!1,se.push(ve)}}t.name="",t.spikeDistance=void 0,t[V]=void 0;for(var Ie=0;Ie<se.length;Ie++)se[Ie].attr!=="med"?(se[Ie].name="",se[Ie].spikeDistance=void 0,se[Ie][V]=void 0):(se[Ie].spikeDistance=re,se[Ie][V]=ie);return se}function s(t,o,r){for(var n,a,i,c=t.cd,h=t.xa,f=t.ya,b=c[0].trace,v=h.c2p(o),g=f.c2p(r),y=l.quadrature(function(I){var U=Math.max(3,I.mrc||0);return Math.max(Math.abs(h.c2p(I.x)-v)-U,1-3/U)},function(I){var U=Math.max(3,I.mrc||0);return Math.max(Math.abs(f.c2p(I.y)-g)-U,1-3/U)}),p=!1,m=0;m<c.length;m++){a=c[m];for(var w=0;w<(a.pts||[]).length;w++){var u=y(i=a.pts[w]);u<=t.distance&&(t.distance=u,p=[m,w])}}if(!p)return!1;i=(a=c[p[0]]).pts[p[1]];var S=h.c2p(i.x,!0),_=f.c2p(i.y,!0),E=i.mrc||1;n=k.extendFlat({},t,{index:i.i,color:(b.marker||{}).color,name:b.name,x0:S-E,x1:S+E,y0:_-E,y1:_+E,spikeDistance:t.distance,hovertemplate:b.hovertemplate});var L,C=a.orig_p,P=C!==void 0?C:a.pos;return b.orientation==="h"?(L=f,n.xLabelVal=i.x,n.yLabelVal=P):(L=h,n.xLabelVal=P,n.yLabelVal=i.y),n[L._id.charAt(0)+"Spike"]=L.c2p(a.pos,!0),x(i,b,n),n}$.exports={hoverPoints:function(t,o,r,n){var a,i=t.cd[0].trace.hoveron,c=[];return i.indexOf("boxes")!==-1&&(c=c.concat(d(t,o,r,n))),i.indexOf("points")!==-1&&(a=s(t,o,r)),n==="closest"?a?[a]:c:(a&&c.push(a),c)},hoverOnBoxes:d,hoverOnPoints:s}},83832:function($,R,e){$.exports={attributes:e(53522),layoutAttributes:e(40094),supplyDefaults:e(36411).supplyDefaults,crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(4199).supplyLayoutDefaults,calc:e(48518),crossTraceCalc:e(37188).crossTraceCalc,plot:e(86047).plot,style:e(58063).style,styleOnSelect:e(58063).styleOnSelect,hoverPoints:e(41868).hoverPoints,eventData:e(74907),selectPoints:e(24626),moduleType:"trace",name:"box",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function($){$.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function($,R,e){var A=e(73972),k=e(71828),l=e(40094);function T(x,d,s,t,o){for(var r=o+"Layout",n=!1,a=0;a<s.length;a++){var i=s[a];if(A.traceIs(i,r)){n=!0;break}}n&&(t(o+"mode"),t(o+"gap"),t(o+"groupgap"))}$.exports={supplyLayoutDefaults:function(x,d,s){T(0,0,s,function(t,o){return k.coerce(x,d,l,t,o)},"box")},_supply:T}},86047:function($,R,e){var A=e(39898),k=e(71828),l=e(91424);function T(s,t,o,r){var n,a,i=o.orientation==="h",c=t.val,h=t.pos,f=!!h.rangebreaks,b=r.bPos,v=r.wdPos||0,g=r.bPosPxOffset||0,y=o.whiskerwidth||0,p=o.notched||!1,m=p?1-2*o.notchwidth:1;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var w=s.selectAll("path.box").data(o.type!=="violin"||o.box.visible?k.identity:[]);w.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),w.exit().remove(),w.each(function(u){if(u.empty)return"M0,0Z";var S=h.c2l(u.pos+b,!0),_=h.l2p(S-n)+g,E=h.l2p(S+a)+g,L=f?(_+E)/2:h.l2p(S)+g,C=o.whiskerwidth,P=f?_*C+(1-C)*L:h.l2p(S-v)+g,I=f?E*C+(1-C)*L:h.l2p(S+v)+g,U=h.l2p(S-n*m)+g,z=h.l2p(S+a*m)+g,H=c.c2p(u.q1,!0),F=c.c2p(u.q3,!0),N=k.constrain(c.c2p(u.med,!0),Math.min(H,F)+1,Math.max(H,F)-1),B=u.lf===void 0||o.boxpoints===!1,j=c.c2p(B?u.min:u.lf,!0),K=c.c2p(B?u.max:u.uf,!0),G=c.c2p(u.ln,!0),V=c.c2p(u.un,!0);i?A.select(this).attr("d","M"+N+","+U+"V"+z+"M"+H+","+_+"V"+E+(p?"H"+G+"L"+N+","+z+"L"+V+","+E:"")+"H"+F+"V"+_+(p?"H"+V+"L"+N+","+U+"L"+G+","+_:"")+"ZM"+H+","+L+"H"+j+"M"+F+","+L+"H"+K+(y===0?"":"M"+j+","+P+"V"+I+"M"+K+","+P+"V"+I)):A.select(this).attr("d","M"+U+","+N+"H"+z+"M"+_+","+H+"H"+E+(p?"V"+G+"L"+z+","+N+"L"+E+","+V:"")+"V"+F+"H"+_+(p?"V"+V+"L"+U+","+N+"L"+_+","+G:"")+"ZM"+L+","+H+"V"+j+"M"+L+","+F+"V"+K+(y===0?"":"M"+P+","+j+"H"+I+"M"+P+","+K+"H"+I))})}function x(s,t,o,r){var n=t.x,a=t.y,i=r.bdPos,c=r.bPos,h=o.boxpoints||o.points;k.seedPseudoRandom();var f=s.selectAll("g.points").data(h?function(v){return v.forEach(function(g){g.t=r,g.trace=o}),v}:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var b=f.selectAll("path").data(function(v){var g,y,p=v.pts2,m=Math.max((v.max-v.min)/10,v.q3-v.q1),w=1e-9*m,u=.01*m,S=[],_=0;if(o.jitter){if(m===0)for(_=1,S=new Array(p.length),g=0;g<p.length;g++)S[g]=1;else for(g=0;g<p.length;g++){var E=Math.max(0,g-5),L=p[E].v,C=Math.min(p.length-1,g+5),P=p[C].v;h!=="all"&&(p[g].v<v.lf?P=Math.min(P,v.lf):L=Math.max(L,v.uf));var I=Math.sqrt(u*(C-E)/(P-L+w))||0;I=k.constrain(Math.abs(I),0,1),S.push(I),_=Math.max(I,_)}y=2*o.jitter/(_||1)}for(g=0;g<p.length;g++){var U=p[g],z=U.v,H=o.jitter?y*S[g]*(k.pseudoRandom()-.5):0,F=v.pos+c+i*(o.pointpos+H);o.orientation==="h"?(U.y=F,U.x=z):(U.x=F,U.y=z),h==="suspectedoutliers"&&z<v.uo&&z>v.lo&&(U.so=!0)}return p});b.enter().append("path").classed("point",!0),b.exit().remove(),b.call(l.translatePoints,n,a)}function d(s,t,o,r){var n,a,i=t.val,c=t.pos,h=!!c.rangebreaks,f=r.bPos,b=r.bPosPxOffset||0,v=o.boxmean||(o.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var g=s.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?k.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(y){var p=c.c2l(y.pos+f,!0),m=c.l2p(p-n)+b,w=c.l2p(p+a)+b,u=h?(m+w)/2:c.l2p(p)+b,S=i.c2p(y.mean,!0),_=i.c2p(y.mean-y.sd,!0),E=i.c2p(y.mean+y.sd,!0);o.orientation==="h"?A.select(this).attr("d","M"+S+","+m+"V"+w+(v==="sd"?"m0,0L"+_+","+u+"L"+S+","+m+"L"+E+","+u+"Z":"")):A.select(this).attr("d","M"+m+","+S+"H"+w+(v==="sd"?"m0,0L"+u+","+_+"L"+m+","+S+"L"+u+","+E+"Z":""))})}$.exports={plot:function(s,t,o,r){var n=t.xaxis,a=t.yaxis;k.makeTraceGroups(r,o,"trace boxes").each(function(i){var c,h,f=A.select(this),b=i[0],v=b.t,g=b.trace;v.wdPos=v.bdPos*g.whiskerwidth,g.visible!==!0||v.empty?f.remove():(g.orientation==="h"?(c=a,h=n):(c=n,h=a),T(f,{pos:c,val:h},g,v),x(f,{x:n,y:a},g,v),d(f,{pos:c,val:h},g,v))})},plotBoxAndWhiskers:T,plotPoints:x,plotBoxMean:d}},24626:function($){$.exports=function(R,e){var A,k,l=R.cd,T=R.xaxis,x=R.yaxis,d=[];if(e===!1)for(A=0;A<l.length;A++)for(k=0;k<(l[A].pts||[]).length;k++)l[A].pts[k].selected=0;else for(A=0;A<l.length;A++)for(k=0;k<(l[A].pts||[]).length;k++){var s=l[A].pts[k],t=T.c2p(s.x),o=x.c2p(s.y);e.contains([t,o],null,s.i,R)?(d.push({pointNumber:s.i,x:T.c2d(s.x),y:x.c2d(s.y)}),s.selected=1):s.selected=0}return d}},58063:function($,R,e){var A=e(39898),k=e(7901),l=e(91424);$.exports={style:function(T,x,d){var s=d||A.select(T).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var o=A.select(this),r=t[0].trace,n=r.line.width;function a(h,f,b,v){h.style("stroke-width",f+"px").call(k.stroke,b).call(k.fill,v)}var i=o.selectAll("path.box");if(r.type==="candlestick")i.each(function(h){if(!h.empty){var f=A.select(this),b=r[h.dir];a(f,b.line.width,b.line.color,b.fillcolor),f.style("opacity",r.selectedpoints&&!h.selected?.3:1)}});else{a(i,n,r.line.color,r.fillcolor),o.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(k.stroke,r.line.color);var c=o.selectAll("path.point");l.pointStyle(c,r,T)}})},styleOnSelect:function(T,x,d){var s=x[0].trace,t=d.selectAll("path.point");s.selectedpoints?l.selectedPointStyle(t,s):l.pointStyle(t,s,T)}}},75343:function($,R,e){var A=e(71828).extendFlat,k=e(12663).axisHoverFormat,l=e(2522),T=e(53522);function x(d){return{line:{color:A({},T.line.color,{dflt:d}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}$.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:l.x,open:l.open,high:l.high,low:l.low,close:l.close,line:{width:A({},T.line.width,{}),editType:"style"},increasing:x(l.increasing.line.color.dflt),decreasing:x(l.decreasing.line.color.dflt),text:l.text,hovertext:l.hovertext,whiskerwidth:A({},T.whiskerwidth,{dflt:0}),hoverlabel:l.hoverlabel}},41197:function($,R,e){var A=e(71828),k=e(89298),l=e(42973),T=e(3485).calcCommon;function x(d,s,t,o){return{min:t,q1:Math.min(d,o),med:o,q3:Math.max(d,o),max:s}}$.exports=function(d,s){var t=d._fullLayout,o=k.getFromId(d,s.xaxis),r=k.getFromId(d,s.yaxis),n=o.makeCalcdata(s,"x"),a=l(s,o,"x",n).vals,i=T(d,s,n,a,r,x);return i.length?(A.extendFlat(i[0].t,{num:t._numBoxes,dPos:A.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,i):[{t:{empty:!0}}]}},1026:function($,R,e){var A=e(71828),k=e(7901),l=e(14555),T=e(73927),x=e(75343);function d(s,t,o,r){var n=o(r+".line.color");o(r+".line.width",t.line.width),o(r+".fillcolor",k.addOpacity(n,.5))}$.exports=function(s,t,o,r){function n(a,i){return A.coerce(s,t,x,a,i)}l(s,t,n,r)?(T(s,t,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),d(0,t,n,"increasing"),d(0,t,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[t.xaxis]=!0):t.visible=!1}},91815:function($,R,e){$.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(75343),layoutAttributes:e(40094),supplyLayoutDefaults:e(4199).supplyLayoutDefaults,crossTraceCalc:e(37188).crossTraceCalc,supplyDefaults:e(1026),calc:e(41197),plot:e(86047).plot,layerName:"boxlayer",style:e(58063).style,hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},13145:function($,R,e){var A=e(11500),k=e(44467);$.exports=function(l,T,x,d,s){d("a")||(d("da"),d("a0")),d("b")||(d("db"),d("b0")),function(t,o,r,n){["aaxis","baxis"].forEach(function(a){var i=a.charAt(0),c=t[a]||{},h=k.newContainer(o,a),f={noTicklabelstep:!0,tickfont:"x",id:i+"axis",letter:i,font:o.font,name:a,data:t[i],calendar:o.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};A(c,h,f),h._categories=h._categories||[],t[a]||c.type==="-"||(t[a]={type:c.type})})}(l,T,x,s)}},402:function($,R,e){var A=e(71828).isArrayOrTypedArray;function k(l,T){if(!A(l)||T>=10)return null;for(var x=1/0,d=-1/0,s=l.length,t=0;t<s;t++){var o=l[t];if(A(o)){var r=k(o,T+1);r&&(x=Math.min(r[0],x),d=Math.max(r[1],d))}else x=Math.min(o,x),d=Math.max(o,d)}return[x,d]}$.exports=function(l){return k(l,0)}},99798:function($,R,e){var A=e(41940),k=e(1928),l=e(22399),T=A({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=l.defaultLine,$.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:l.defaultLine,editType:"plot"},transforms:void 0}},4536:function($,R,e){var A=e(71828).isArrayOrTypedArray;$.exports=function(k,l,T,x){var d,s,t,o,r,n,a,i,c,h,f,b,v,g=A(T)?"a":"b",y=(g==="a"?k.aaxis:k.baxis).smoothing,p=g==="a"?k.a2i:k.b2j,m=g==="a"?T:x,w=g==="a"?x:T,u=g==="a"?l.a.length:l.b.length,S=g==="a"?l.b.length:l.a.length,_=Math.floor(g==="a"?k.b2j(w):k.a2i(w)),E=g==="a"?function(K){return k.evalxy([],K,_)}:function(K){return k.evalxy([],_,K)};y&&(t=Math.max(0,Math.min(S-2,_)),o=_-t,s=g==="a"?function(K,G){return k.dxydi([],K,t,G,o)}:function(K,G){return k.dxydj([],t,K,o,G)});var L=p(m[0]),C=p(m[1]),P=L<C?1:-1,I=1e-8*(C-L),U=P>0?Math.floor:Math.ceil,z=P>0?Math.ceil:Math.floor,H=P>0?Math.min:Math.max,F=P>0?Math.max:Math.min,N=U(L+I),B=z(C-I),j=[[a=E(L)]];for(d=N;d*P<B*P;d+=P)r=[],f=F(L,d),v=(b=H(C,d+P))-f,n=Math.max(0,Math.min(u-2,Math.floor(.5*(f+b)))),i=E(b),y&&(c=s(n,f-n),h=s(n,b-n),r.push([a[0]+c[0]/3*v,a[1]+c[1]/3*v]),r.push([i[0]-h[0]/3*v,i[1]-h[1]/3*v])),r.push(i),j.push(r),a=i;return j}},1928:function($,R,e){var A=e(41940),k=e(22399),l=e(13838),T=e(12663).descriptionWithDates,x=e(30962).overrideAll,d=e(79952).P,s=e(1426).extendFlat;$.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:A({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:l.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:A({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:x(l.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},d,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},d,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:A({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function($,R,e){var A=e(99798),k=e(7901).addOpacity,l=e(73972),T=e(71828),x=e(26218),d=e(96115),s=e(89426),t=e(15258),o=e(21994),r=e(4322);$.exports=function(n,a,i){var c=i.letter,h=i.font||{},f=A[c+"axis"];function b(P,I){return T.coerce(n,a,f,P,I)}function v(P,I){return T.coerce2(n,a,f,P,I)}i.name&&(a._name=i.name,a._id=i.name),b("autotypenumbers",i.autotypenumbersDflt);var g=b("type");g==="-"&&(i.data&&function(P,I){if(P.type==="-"){var U=P._id.charAt(0),z=P[U+"calendar"];P.type=r(I,z,{autotypenumbers:P.autotypenumbers})}}(a,i.data),a.type==="-"?a.type="linear":g=n.type=a.type),b("smoothing"),b("cheatertype"),b("showticklabels"),b("labelprefix",c+" = "),b("labelsuffix"),b("showtickprefix"),b("showticksuffix"),b("separatethousands"),b("tickformat"),b("exponentformat"),b("minexponent"),b("showexponent"),b("categoryorder"),b("tickmode"),b("tickvals"),b("ticktext"),b("tick0"),b("dtick"),a.tickmode==="array"&&(b("arraytick0"),b("arraydtick")),b("labelpadding"),a._hovertitle=c,g==="date"&&l.getComponentMethod("calendars","handleDefaults")(n,a,"calendar",i.calendar),o(a,i.fullLayout),a.c2p=T.identity;var y=b("color",i.dfltColor),p=y===n.color?y:h.color;b("title.text")&&(T.coerceFont(b,"title.font",{family:h.family,size:T.bigFont(h.size),color:p}),b("title.offset")),b("tickangle"),b("autorange",!a.isValidRange(n.range))&&b("rangemode"),b("range"),a.cleanRange(),b("fixedrange"),x(n,a,b,g),s(n,a,b,g,i),d(n,a,b,g,i),t(n,a,b,{data:i.data,dataAttr:c});var m=v("gridcolor",k(y,.3)),w=v("gridwidth"),u=v("griddash"),S=b("showgrid");S||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var _=v("startlinecolor",y),E=v("startlinewidth",w);b("startline",a.showgrid||!!_||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var L=v("endlinecolor",y),C=v("endlinewidth",w);return b("endline",a.showgrid||!!L||!!C)||(delete a.endlinecolor,delete a.endlinewidth),S?(b("minorgridcount"),b("minorgridwidth",w),b("minorgriddash",u),b("minorgridcolor",k(m,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),a.showticklabels==="none"&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,b("tickmode"),a}},25281:function($,R,e){var A=e(89298),k=e(71828).isArray1D,l=e(53824),T=e(402),x=e(20347),d=e(83311),s=e(44807),t=e(4742),o=e(72505),r=e(68296),n=e(11435);$.exports=function(a,i){var c=A.getFromId(a,i.xaxis),h=A.getFromId(a,i.yaxis),f=i.aaxis,b=i.baxis,v=i.x,g=i.y,y=[];v&&k(v)&&y.push("x"),g&&k(g)&&y.push("y"),y.length&&r(i,f,b,"a","b",y);var p=i._a=i._a||i.a,m=i._b=i._b||i.b;v=i._x||i.x,g=i._y||i.y;var w={};if(i._cheater){var u=f.cheatertype==="index"?p.length:p,S=b.cheatertype==="index"?m.length:m;v=l(u,S,i.cheaterslope)}i._x=v=t(v),i._y=g=t(g),o(v,p,m),o(g,p,m),n(i),i.setScale();var _=T(v),E=T(g),L=.5*(_[1]-_[0]),C=.5*(_[1]+_[0]),P=.5*(E[1]-E[0]),I=.5*(E[1]+E[0]),U=1.3;return _=[C-L*U,C+L*U],E=[I-P*U,I+P*U],i._extremes[c._id]=A.findExtremes(c,_,{padded:!0}),i._extremes[h._id]=A.findExtremes(h,E,{padded:!0}),x(i,"a","b"),x(i,"b","a"),d(i,f),d(i,b),w.clipsegments=s(i._xctrl,i._yctrl,f,b),w.x=v,w.y=g,w.a=p,w.b=m,[w]}},44807:function($){$.exports=function(R,e,A,k){var l,T,x,d=[],s=!!A.smoothing,t=!!k.smoothing,o=R[0].length-1,r=R.length-1;for(l=0,T=[],x=[];l<=o;l++)T[l]=R[0][l],x[l]=e[0][l];for(d.push({x:T,y:x,bicubic:s}),l=0,T=[],x=[];l<=r;l++)T[l]=R[l][o],x[l]=e[l][o];for(d.push({x:T,y:x,bicubic:t}),l=o,T=[],x=[];l>=0;l--)T[o-l]=R[r][l],x[o-l]=e[r][l];for(d.push({x:T,y:x,bicubic:s}),l=r,T=[],x=[];l>=0;l--)T[r-l]=R[l][0],x[r-l]=e[l][0];return d.push({x:T,y:x,bicubic:t}),d}},20347:function($,R,e){var A=e(89298),k=e(1426).extendFlat;$.exports=function(l,T,x){var d,s,t,o,r,n,a,i,c,h,f,b,v,g,y=l["_"+T],p=l[T+"axis"],m=p._gridlines=[],w=p._minorgridlines=[],u=p._boundarylines=[],S=l["_"+x],_=l[x+"axis"];p.tickmode==="array"&&(p.tickvals=y.slice());var E=l._xctrl,L=l._yctrl,C=E[0].length,P=E.length,I=l._a.length,U=l._b.length;A.prepTicks(p),p.tickmode==="array"&&delete p.tickvals;var z=p.smoothing?3:1;function H(N){var B,j,K,G,V,W,J,X,ee,re,ie,se,fe=[],ye=[],ge={};if(T==="b")for(j=l.b2j(N),K=Math.floor(Math.max(0,Math.min(U-2,j))),G=j-K,ge.length=U,ge.crossLength=I,ge.xy=function(he){return l.evalxy([],he,j)},ge.dxy=function(he,ve){return l.dxydi([],he,K,ve,G)},B=0;B<I;B++)W=Math.min(I-2,B),J=B-W,X=l.evalxy([],B,j),_.smoothing&&B>0&&(ee=l.dxydi([],B-1,K,0,G),fe.push(V[0]+ee[0]/3),ye.push(V[1]+ee[1]/3),re=l.dxydi([],B-1,K,1,G),fe.push(X[0]-re[0]/3),ye.push(X[1]-re[1]/3)),fe.push(X[0]),ye.push(X[1]),V=X;else for(B=l.a2i(N),W=Math.floor(Math.max(0,Math.min(I-2,B))),J=B-W,ge.length=I,ge.crossLength=U,ge.xy=function(he){return l.evalxy([],B,he)},ge.dxy=function(he,ve){return l.dxydj([],W,he,J,ve)},j=0;j<U;j++)K=Math.min(U-2,j),G=j-K,X=l.evalxy([],B,j),_.smoothing&&j>0&&(ie=l.dxydj([],W,j-1,J,0),fe.push(V[0]+ie[0]/3),ye.push(V[1]+ie[1]/3),se=l.dxydj([],W,j-1,J,1),fe.push(X[0]-se[0]/3),ye.push(X[1]-se[1]/3)),fe.push(X[0]),ye.push(X[1]),V=X;return ge.axisLetter=T,ge.axis=p,ge.crossAxis=_,ge.value=N,ge.constvar=x,ge.index=i,ge.x=fe,ge.y=ye,ge.smoothing=_.smoothing,ge}function F(N){var B,j,K,G,V,W=[],J=[],X={};if(X.length=y.length,X.crossLength=S.length,T==="b")for(K=Math.max(0,Math.min(U-2,N)),V=Math.min(1,Math.max(0,N-K)),X.xy=function(ee){return l.evalxy([],ee,N)},X.dxy=function(ee,re){return l.dxydi([],ee,K,re,V)},B=0;B<C;B++)W[B]=E[N*z][B],J[B]=L[N*z][B];else for(j=Math.max(0,Math.min(I-2,N)),G=Math.min(1,Math.max(0,N-j)),X.xy=function(ee){return l.evalxy([],N,ee)},X.dxy=function(ee,re){return l.dxydj([],j,ee,G,re)},B=0;B<P;B++)W[B]=E[B][N*z],J[B]=L[B][N*z];return X.axisLetter=T,X.axis=p,X.crossAxis=_,X.value=y[N],X.constvar=x,X.index=N,X.x=W,X.y=J,X.smoothing=_.smoothing,X}if(p.tickmode==="array"){for(o=5e-15,n=(r=[Math.floor((y.length-1-p.arraytick0)/p.arraydtick*(1+o)),Math.ceil(-p.arraytick0/p.arraydtick/(1+o))].sort(function(N,B){return N-B}))[0]-1,a=r[1]+1,i=n;i<a;i++)(s=p.arraytick0+p.arraydtick*i)<0||s>y.length-1||m.push(k(F(s),{color:p.gridcolor,width:p.gridwidth,dash:p.griddash}));for(i=n;i<a;i++)if(t=p.arraytick0+p.arraydtick*i,f=Math.min(t+p.arraydtick,y.length-1),!(t<0||t>y.length-1||f<0||f>y.length-1))for(b=y[t],v=y[f],d=0;d<p.minorgridcount;d++)(g=f-t)<=0||(h=b+(v-b)*(d+1)/(p.minorgridcount+1)*(p.arraydtick/g))<y[0]||h>y[y.length-1]||w.push(k(H(h),{color:p.minorgridcolor,width:p.minorgridwidth,dash:p.minorgriddash}));p.startline&&u.push(k(F(0),{color:p.startlinecolor,width:p.startlinewidth})),p.endline&&u.push(k(F(y.length-1),{color:p.endlinecolor,width:p.endlinewidth}))}else{for(o=5e-15,n=(r=[Math.floor((y[y.length-1]-p.tick0)/p.dtick*(1+o)),Math.ceil((y[0]-p.tick0)/p.dtick/(1+o))].sort(function(N,B){return N-B}))[0],a=r[1],i=n;i<=a;i++)c=p.tick0+p.dtick*i,m.push(k(H(c),{color:p.gridcolor,width:p.gridwidth,dash:p.griddash}));for(i=n-1;i<a+1;i++)for(c=p.tick0+p.dtick*i,d=0;d<p.minorgridcount;d++)(h=c+p.dtick*(d+1)/(p.minorgridcount+1))<y[0]||h>y[y.length-1]||w.push(k(H(h),{color:p.minorgridcolor,width:p.minorgridwidth,dash:p.minorgriddash}));p.startline&&u.push(k(H(y[0]),{color:p.startlinecolor,width:p.startlinewidth})),p.endline&&u.push(k(H(y[y.length-1]),{color:p.endlinecolor,width:p.endlinewidth}))}}},83311:function($,R,e){var A=e(89298),k=e(1426).extendFlat;$.exports=function(l,T){var x,d,s,t=T._labels=[],o=T._gridlines;for(x=0;x<o.length;x++)s=o[x],["start","both"].indexOf(T.showticklabels)!==-1&&(d=A.tickText(T,s.value),k(d,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:x===0,isLast:x===o.length-1}),t.push(d)),["end","both"].indexOf(T.showticklabels)!==-1&&(d=A.tickText(T,s.value),k(d,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:x===0,isLast:x===o.length-1}),t.push(d))}},42048:function($){$.exports=function(R,e,A,k){var l=R[0]-e[0],T=R[1]-e[1],x=A[0]-e[0],d=A[1]-e[1],s=Math.pow(l*l+T*T,.25),t=Math.pow(x*x+d*d,.25),o=(t*t*l-s*s*x)*k,r=(t*t*T-s*s*d)*k,n=t*(s+t)*3,a=s*(s+t)*3;return[[e[0]+(n&&o/n),e[1]+(n&&r/n)],[e[0]-(a&&o/a),e[1]-(a&&r/a)]]}},53824:function($,R,e){var A=e(71828).isArrayOrTypedArray;$.exports=function(k,l,T){var x,d,s,t,o,r,n=[],a=A(k)?k.length:k,i=A(l)?l.length:l,c=A(k)?k:null,h=A(l)?l:null;c&&(s=(c.length-1)/(c[c.length-1]-c[0])/(a-1)),h&&(t=(h.length-1)/(h[h.length-1]-h[0])/(i-1));var f=1/0,b=-1/0;for(d=0;d<i;d++)for(n[d]=[],o=h?(h[d]-h[0])*t:d/(i-1),x=0;x<a;x++)r=(c?(c[x]-c[0])*s:x/(a-1))-o*T,f=Math.min(r,f),b=Math.max(r,b),n[d][x]=r;var v=1/(b-f),g=-f*v;for(d=0;d<i;d++)for(x=0;x<a;x++)n[d][x]=v*n[d][x]+g;return n}},45664:function($,R,e){var A=e(42048),k=e(71828).ensureArray;function l(T,x,d){var s=-.5*d[0]+1.5*x[0],t=-.5*d[1]+1.5*x[1];return[(2*s+T[0])/3,(2*t+T[1])/3]}$.exports=function(T,x,d,s,t,o){var r,n,a,i,c,h,f,b,v,g,y=d[0].length,p=d.length,m=t?3*y-2:y,w=o?3*p-2:p;for(T=k(T,w),x=k(x,w),a=0;a<w;a++)T[a]=k(T[a],m),x[a]=k(x[a],m);for(n=0,i=0;n<p;n++,i+=o?3:1)for(c=T[i],h=x[i],f=d[n],b=s[n],r=0,a=0;r<y;r++,a+=t?3:1)c[a]=f[r],h[a]=b[r];if(t)for(n=0,i=0;n<p;n++,i+=o?3:1){for(r=1,a=3;r<y-1;r++,a+=3)v=A([d[n][r-1],s[n][r-1]],[d[n][r],s[n][r]],[d[n][r+1],s[n][r+1]],t),T[i][a-1]=v[0][0],x[i][a-1]=v[0][1],T[i][a+1]=v[1][0],x[i][a+1]=v[1][1];g=l([T[i][0],x[i][0]],[T[i][2],x[i][2]],[T[i][3],x[i][3]]),T[i][1]=g[0],x[i][1]=g[1],g=l([T[i][m-1],x[i][m-1]],[T[i][m-3],x[i][m-3]],[T[i][m-4],x[i][m-4]]),T[i][m-2]=g[0],x[i][m-2]=g[1]}if(o)for(a=0;a<m;a++){for(i=3;i<w-3;i+=3)v=A([T[i-3][a],x[i-3][a]],[T[i][a],x[i][a]],[T[i+3][a],x[i+3][a]],o),T[i-1][a]=v[0][0],x[i-1][a]=v[0][1],T[i+1][a]=v[1][0],x[i+1][a]=v[1][1];g=l([T[0][a],x[0][a]],[T[2][a],x[2][a]],[T[3][a],x[3][a]]),T[1][a]=g[0],x[1][a]=g[1],g=l([T[w-1][a],x[w-1][a]],[T[w-3][a],x[w-3][a]],[T[w-4][a],x[w-4][a]]),T[w-2][a]=g[0],x[w-2][a]=g[1]}if(t&&o)for(i=1;i<w;i+=(i+1)%3==0?2:1){for(a=3;a<m-3;a+=3)v=A([T[i][a-3],x[i][a-3]],[T[i][a],x[i][a]],[T[i][a+3],x[i][a+3]],t),T[i][a-1]=.5*(T[i][a-1]+v[0][0]),x[i][a-1]=.5*(x[i][a-1]+v[0][1]),T[i][a+1]=.5*(T[i][a+1]+v[1][0]),x[i][a+1]=.5*(x[i][a+1]+v[1][1]);g=l([T[i][0],x[i][0]],[T[i][2],x[i][2]],[T[i][3],x[i][3]]),T[i][1]=.5*(T[i][1]+g[0]),x[i][1]=.5*(x[i][1]+g[1]),g=l([T[i][m-1],x[i][m-1]],[T[i][m-3],x[i][m-3]],[T[i][m-4],x[i][m-4]]),T[i][m-2]=.5*(T[i][m-2]+g[0]),x[i][m-2]=.5*(x[i][m-2]+g[1])}return[T,x]}},35509:function($){$.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function($){$.exports=function(R,e,A){return e&&A?function(k,l,T,x,d){var s,t,o,r,n,a;k||(k=[]),l*=3,T*=3;var i=x*x,c=1-x,h=c*c,f=c*x*2,b=-3*h,v=3*(h-f),g=3*(f-i),y=3*i,p=d*d,m=p*d,w=1-d,u=w*w,S=u*w;for(a=0;a<R.length;a++)s=b*(n=R[a])[T][l]+v*n[T][l+1]+g*n[T][l+2]+y*n[T][l+3],t=b*n[T+1][l]+v*n[T+1][l+1]+g*n[T+1][l+2]+y*n[T+1][l+3],o=b*n[T+2][l]+v*n[T+2][l+1]+g*n[T+2][l+2]+y*n[T+2][l+3],r=b*n[T+3][l]+v*n[T+3][l+1]+g*n[T+3][l+2]+y*n[T+3][l+3],k[a]=S*s+3*(u*d*t+w*p*o)+m*r;return k}:e?function(k,l,T,x,d){var s,t,o,r;k||(k=[]),l*=3;var n=x*x,a=1-x,i=a*a,c=a*x*2,h=-3*i,f=3*(i-c),b=3*(c-n),v=3*n,g=1-d;for(o=0;o<R.length;o++)s=h*(r=R[o])[T][l]+f*r[T][l+1]+b*r[T][l+2]+v*r[T][l+3],t=h*r[T+1][l]+f*r[T+1][l+1]+b*r[T+1][l+2]+v*r[T+1][l+3],k[o]=g*s+d*t;return k}:A?function(k,l,T,x,d){var s,t,o,r,n,a;k||(k=[]),T*=3;var i=d*d,c=i*d,h=1-d,f=h*h,b=f*h;for(n=0;n<R.length;n++)s=(a=R[n])[T][l+1]-a[T][l],t=a[T+1][l+1]-a[T+1][l],o=a[T+2][l+1]-a[T+2][l],r=a[T+3][l+1]-a[T+3][l],k[n]=b*s+3*(f*d*t+h*i*o)+c*r;return k}:function(k,l,T,x,d){var s,t,o,r;k||(k=[]);var n=1-d;for(o=0;o<R.length;o++)s=(r=R[o])[T][l+1]-r[T][l],t=r[T+1][l+1]-r[T+1][l],k[o]=n*s+d*t;return k}}},73057:function($){$.exports=function(R,e,A){return e&&A?function(k,l,T,x,d){var s,t,o,r,n,a;k||(k=[]),l*=3,T*=3;var i=x*x,c=i*x,h=1-x,f=h*h,b=f*h,v=d*d,g=1-d,y=g*g,p=g*d*2,m=-3*y,w=3*(y-p),u=3*(p-v),S=3*v;for(a=0;a<R.length;a++)s=m*(n=R[a])[T][l]+w*n[T+1][l]+u*n[T+2][l]+S*n[T+3][l],t=m*n[T][l+1]+w*n[T+1][l+1]+u*n[T+2][l+1]+S*n[T+3][l+1],o=m*n[T][l+2]+w*n[T+1][l+2]+u*n[T+2][l+2]+S*n[T+3][l+2],r=m*n[T][l+3]+w*n[T+1][l+3]+u*n[T+2][l+3]+S*n[T+3][l+3],k[a]=b*s+3*(f*x*t+h*i*o)+c*r;return k}:e?function(k,l,T,x,d){var s,t,o,r,n,a;k||(k=[]),l*=3;var i=d*d,c=i*d,h=1-d,f=h*h,b=f*h;for(n=0;n<R.length;n++)s=(a=R[n])[T+1][l]-a[T][l],t=a[T+1][l+1]-a[T][l+1],o=a[T+1][l+2]-a[T][l+2],r=a[T+1][l+3]-a[T][l+3],k[n]=b*s+3*(f*d*t+h*i*o)+c*r;return k}:A?function(k,l,T,x,d){var s,t,o,r;k||(k=[]),T*=3;var n=1-x,a=d*d,i=1-d,c=i*i,h=i*d*2,f=-3*c,b=3*(c-h),v=3*(h-a),g=3*a;for(o=0;o<R.length;o++)s=f*(r=R[o])[T][l]+b*r[T+1][l]+v*r[T+2][l]+g*r[T+3][l],t=f*r[T][l+1]+b*r[T+1][l+1]+v*r[T+2][l+1]+g*r[T+3][l+1],k[o]=n*s+x*t;return k}:function(k,l,T,x,d){var s,t,o,r;k||(k=[]);var n=1-x;for(o=0;o<R.length;o++)s=(r=R[o])[T+1][l]-r[T][l],t=r[T+1][l+1]-r[T][l+1],k[o]=n*s+x*t;return k}}},20349:function($){$.exports=function(R,e,A,k,l){var T=e-2,x=A-2;return k&&l?function(d,s,t){var o,r,n,a,i,c;d||(d=[]);var h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),x)),b=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));h*=3,f*=3;var g=b*b,y=g*b,p=1-b,m=p*p,w=m*p,u=v*v,S=u*v,_=1-v,E=_*_,L=E*_;for(c=0;c<R.length;c++)o=w*(i=R[c])[f][h]+3*(m*b*i[f][h+1]+p*g*i[f][h+2])+y*i[f][h+3],r=w*i[f+1][h]+3*(m*b*i[f+1][h+1]+p*g*i[f+1][h+2])+y*i[f+1][h+3],n=w*i[f+2][h]+3*(m*b*i[f+2][h+1]+p*g*i[f+2][h+2])+y*i[f+2][h+3],a=w*i[f+3][h]+3*(m*b*i[f+3][h+1]+p*g*i[f+3][h+2])+y*i[f+3][h+3],d[c]=L*o+3*(E*v*r+_*u*n)+S*a;return d}:k?function(d,s,t){d||(d=[]);var o,r,n,a,i,c,h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),x)),b=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));h*=3;var g=b*b,y=g*b,p=1-b,m=p*p,w=m*p,u=1-v;for(i=0;i<R.length;i++)o=u*(c=R[i])[f][h]+v*c[f+1][h],r=u*c[f][h+1]+v*c[f+1][h+1],n=u*c[f][h+2]+v*c[f+1][h+1],a=u*c[f][h+3]+v*c[f+1][h+1],d[i]=w*o+3*(m*b*r+p*g*n)+y*a;return d}:l?function(d,s,t){d||(d=[]);var o,r,n,a,i,c,h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),x)),b=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));f*=3;var g=v*v,y=g*v,p=1-v,m=p*p,w=m*p,u=1-b;for(i=0;i<R.length;i++)o=u*(c=R[i])[f][h]+b*c[f][h+1],r=u*c[f+1][h]+b*c[f+1][h+1],n=u*c[f+2][h]+b*c[f+2][h+1],a=u*c[f+3][h]+b*c[f+3][h+1],d[i]=w*o+3*(m*v*r+p*g*n)+y*a;return d}:function(d,s,t){d||(d=[]);var o,r,n,a,i=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),x)),h=Math.max(0,Math.min(1,s-i)),f=Math.max(0,Math.min(1,t-c)),b=1-f,v=1-h;for(n=0;n<R.length;n++)o=v*(a=R[n])[c][i]+h*a[c][i+1],r=v*a[c+1][i]+h*a[c+1][i+1],d[n]=b*o+f*r;return d}}},92087:function($,R,e){var A=e(71828),k=e(19237),l=e(13145),T=e(99798),x=e(22399);$.exports=function(d,s,t,o){function r(a,i){return A.coerce(d,s,T,a,i)}s._clipPathId="clip"+s.uid+"carpet";var n=r("color",x.defaultLine);A.coerceFont(r,"font"),r("carpet"),l(d,s,o,r,n),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),k(d,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope")):s.visible=!1}},21462:function($,R,e){$.exports={attributes:e(99798),supplyDefaults:e(92087),plot:e(89740),calc:e(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function($){$.exports=function(R,e){for(var A,k=R._fullData.length,l=0;l<k;l++){var T=R._fullData[l];if(T.index!==e.index&&T.type==="carpet"&&(A||(A=T),T.carpet===e.carpet))return T}return A}},67961:function($){$.exports=function(R,e,A){if(R.length===0)return"";var k,l=[],T=A?3:1;for(k=0;k<R.length;k+=T)l.push(R[k]+","+e[k]),A&&k<R.length-T&&(l.push("C"),l.push([R[k+1]+","+e[k+1],R[k+2]+","+e[k+2]+" "].join(" ")));return l.join(A?"":"L")}},27669:function($,R,e){var A=e(71828).isArrayOrTypedArray;$.exports=function(k,l,T){var x;for(A(k)?k.length>l.length&&(k=k.slice(0,l.length)):k=[],x=0;x<l.length;x++)k[x]=T(l[x]);return k}},11651:function($){$.exports=function(R,e,A,k,l,T){var x=l[0]*R.dpdx(e),d=l[1]*R.dpdy(A),s=1,t=1;if(T){var o=Math.sqrt(l[0]*l[0]+l[1]*l[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]),n=(l[0]*T[0]+l[1]*T[1])/o/r;t=Math.max(0,n)}var a=180*Math.atan2(d,x)/Math.PI;return a<-90?(a+=180,s=-s):a>90&&(a-=180,s=-s),{angle:a,flip:s,p:R.c2p(k,e,A),offsetMultplier:t}}},89740:function($,R,e){var A=e(39898),k=e(91424),l=e(27669),T=e(67961),x=e(11651),d=e(63893),s=e(71828),t=s.strRotate,o=s.strTranslate,r=e(18783);function n(f,b,v,g,y,p){var m="const-"+y+"-lines",w=v.selectAll("."+m).data(p);w.enter().append("path").classed(m,!0).style("vector-effect","non-scaling-stroke"),w.each(function(u){var S=u,_=S.x,E=S.y,L=l([],_,f.c2p),C=l([],E,b.c2p),P="M"+T(L,C,S.smoothing);A.select(this).attr("d",P).style("stroke-width",S.width).style("stroke",S.color).style("stroke-dasharray",k.dashStyle(S.dash,S.width)).style("fill","none")}),w.exit().remove()}function a(f,b,v,g,y,p,m,w){var u=p.selectAll("text."+w).data(m);u.enter().append("text").classed(w,!0);var S=0,_={};return u.each(function(E,L){var C;if(E.axis.tickangle==="auto")C=x(g,b,v,E.xy,E.dxy);else{var P=(E.axis.tickangle+180)*Math.PI/180;C=x(g,b,v,E.xy,[Math.cos(P),Math.sin(P)])}L||(_={angle:C.angle,flip:C.flip});var I=(E.endAnchor?-1:1)*C.flip,U=A.select(this).attr({"text-anchor":I>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(d.convertToTspans,f),z=k.bBox(this);U.attr("transform",o(C.p[0],C.p[1])+t(C.angle)+o(E.axis.labelpadding*I,.3*z.height)),S=Math.max(S,z.width+E.axis.labelpadding)}),u.exit().remove(),_.maxExtent=S,_}$.exports=function(f,b,v,g){var y=b.xaxis,p=b.yaxis,m=f._fullLayout._clips;s.makeTraceGroups(g,v,"trace").each(function(w){var u=A.select(this),S=w[0],_=S.trace,E=_.aaxis,L=_.baxis,C=s.ensureSingle(u,"g","minorlayer"),P=s.ensureSingle(u,"g","majorlayer"),I=s.ensureSingle(u,"g","boundarylayer"),U=s.ensureSingle(u,"g","labellayer");u.style("opacity",_.opacity),n(y,p,P,0,"a",E._gridlines),n(y,p,P,0,"b",L._gridlines),n(y,p,C,0,"a",E._minorgridlines),n(y,p,C,0,"b",L._minorgridlines),n(y,p,I,0,"a-boundary",E._boundarylines),n(y,p,I,0,"b-boundary",L._boundarylines);var z=a(f,y,p,_,0,U,E._labels,"a-label"),H=a(f,y,p,_,0,U,L._labels,"b-label");(function(F,N,B,j,K,G,V,W){var J,X,ee,re,ie=s.aggNums(Math.min,null,B.a),se=s.aggNums(Math.max,null,B.a),fe=s.aggNums(Math.min,null,B.b),ye=s.aggNums(Math.max,null,B.b);J=.5*(ie+se),X=fe,ee=B.ab2xy(J,X,!0),re=B.dxyda_rough(J,X),V.angle===void 0&&s.extendFlat(V,x(B,K,G,ee,B.dxydb_rough(J,X))),h(F,N,B,0,ee,re,B.aaxis,K,G,V,"a-title"),J=ie,X=.5*(fe+ye),ee=B.ab2xy(J,X,!0),re=B.dxydb_rough(J,X),W.angle===void 0&&s.extendFlat(W,x(B,K,G,ee,B.dxyda_rough(J,X))),h(F,N,B,0,ee,re,B.baxis,K,G,W,"b-title")})(f,U,_,0,y,p,z,H),function(F,N,B,j,K){var G,V,W,J,X=B.select("#"+F._clipPathId);X.size()||(X=B.append("clipPath").classed("carpetclip",!0));var ee=s.ensureSingle(X,"path","carpetboundary"),re=N.clipsegments,ie=[];for(J=0;J<re.length;J++)G=re[J],V=l([],G.x,j.c2p),W=l([],G.y,K.c2p),ie.push(T(V,W,G.bicubic));var se="M"+ie.join("L")+"Z";X.attr("id",F._clipPathId),ee.attr("d",se)}(_,S,m,y,p)})};var i=r.LINE_SPACING,c=(1-r.MID_SHIFT)/i+1;function h(f,b,v,g,y,p,m,w,u,S,_){var E=[];m.title.text&&E.push(m.title.text);var L=b.selectAll("text."+_).data(E),C=S.maxExtent;L.enter().append("text").classed(_,!0),L.each(function(){var P=x(v,w,u,y,p);["start","both"].indexOf(m.showticklabels)===-1&&(C=0);var I=m.title.font.size;C+=I+m.title.offset;var U=(S.angle+(S.flip<0?180:0)-P.angle+450)%360,z=U>90&&U<270,H=A.select(this);H.text(m.title.text).call(d.convertToTspans,f),z&&(C=(-d.lineCount(H)+c)*i*I-C),H.attr("transform",o(P.p[0],P.p[1])+t(P.angle)+o(0,C)).attr("text-anchor","middle").call(k.font,m.title.font)}),L.exit().remove()}},11435:function($,R,e){var A=e(35509),k=e(65888).findBin,l=e(45664),T=e(20349),x=e(54495),d=e(73057);$.exports=function(s){var t=s._a,o=s._b,r=t.length,n=o.length,a=s.aaxis,i=s.baxis,c=t[0],h=t[r-1],f=o[0],b=o[n-1],v=t[t.length-1]-t[0],g=o[o.length-1]-o[0],y=v*A.RELATIVE_CULL_TOLERANCE,p=g*A.RELATIVE_CULL_TOLERANCE;c-=y,h+=y,f-=p,b+=p,s.isVisible=function(m,w){return m>c&&m<h&&w>f&&w<b},s.isOccluded=function(m,w){return m<c||m>h||w<f||w>b},s.setScale=function(){var m=s._x,w=s._y,u=l(s._xctrl,s._yctrl,m,w,a.smoothing,i.smoothing);s._xctrl=u[0],s._yctrl=u[1],s.evalxy=T([s._xctrl,s._yctrl],r,n,a.smoothing,i.smoothing),s.dxydi=x([s._xctrl,s._yctrl],a.smoothing,i.smoothing),s.dxydj=d([s._xctrl,s._yctrl],a.smoothing,i.smoothing)},s.i2a=function(m){var w=Math.max(0,Math.floor(m[0]),r-2),u=m[0]-w;return(1-u)*t[w]+u*t[w+1]},s.j2b=function(m){var w=Math.max(0,Math.floor(m[1]),r-2),u=m[1]-w;return(1-u)*o[w]+u*o[w+1]},s.ij2ab=function(m){return[s.i2a(m[0]),s.j2b(m[1])]},s.a2i=function(m){var w=Math.max(0,Math.min(k(m,t),r-2)),u=t[w],S=t[w+1];return Math.max(0,Math.min(r-1,w+(m-u)/(S-u)))},s.b2j=function(m){var w=Math.max(0,Math.min(k(m,o),n-2)),u=o[w],S=o[w+1];return Math.max(0,Math.min(n-1,w+(m-u)/(S-u)))},s.ab2ij=function(m){return[s.a2i(m[0]),s.b2j(m[1])]},s.i2c=function(m,w){return s.evalxy([],m,w)},s.ab2xy=function(m,w,u){if(!u&&(m<t[0]||m>t[r-1]|w<o[0]||w>o[n-1]))return[!1,!1];var S=s.a2i(m),_=s.b2j(w),E=s.evalxy([],S,_);if(u){var L,C,P,I,U=0,z=0,H=[];m<t[0]?(L=0,C=0,U=(m-t[0])/(t[1]-t[0])):m>t[r-1]?(L=r-2,C=1,U=(m-t[r-1])/(t[r-1]-t[r-2])):C=S-(L=Math.max(0,Math.min(r-2,Math.floor(S)))),w<o[0]?(P=0,I=0,z=(w-o[0])/(o[1]-o[0])):w>o[n-1]?(P=n-2,I=1,z=(w-o[n-1])/(o[n-1]-o[n-2])):I=_-(P=Math.max(0,Math.min(n-2,Math.floor(_)))),U&&(s.dxydi(H,L,P,C,I),E[0]+=H[0]*U,E[1]+=H[1]*U),z&&(s.dxydj(H,L,P,C,I),E[0]+=H[0]*z,E[1]+=H[1]*z)}return E},s.c2p=function(m,w,u){return[w.c2p(m[0]),u.c2p(m[1])]},s.p2x=function(m,w,u){return[w.p2c(m[0]),u.p2c(m[1])]},s.dadi=function(m){var w=Math.max(0,Math.min(t.length-2,m));return t[w+1]-t[w]},s.dbdj=function(m){var w=Math.max(0,Math.min(o.length-2,m));return o[w+1]-o[w]},s.dxyda=function(m,w,u,S){var _=s.dxydi(null,m,w,u,S),E=s.dadi(m,u);return[_[0]/E,_[1]/E]},s.dxydb=function(m,w,u,S){var _=s.dxydj(null,m,w,u,S),E=s.dbdj(w,S);return[_[0]/E,_[1]/E]},s.dxyda_rough=function(m,w,u){var S=v*(u||.1),_=s.ab2xy(m+S,w,!0),E=s.ab2xy(m-S,w,!0);return[.5*(_[0]-E[0])/S,.5*(_[1]-E[1])/S]},s.dxydb_rough=function(m,w,u){var S=g*(u||.1),_=s.ab2xy(m,w+S,!0),E=s.ab2xy(m,w-S,!0);return[.5*(_[0]-E[0])/S,.5*(_[1]-E[1])/S]},s.dpdx=function(m){return m._m},s.dpdy=function(m){return m._m}}},72505:function($,R,e){var A=e(71828);$.exports=function(k,l,T){var x,d,s,t=[],o=[],r=k[0].length,n=k.length;function a(N,B){var j,K=0,G=0;return N>0&&(j=k[B][N-1])!==void 0&&(G++,K+=j),N<r-1&&(j=k[B][N+1])!==void 0&&(G++,K+=j),B>0&&(j=k[B-1][N])!==void 0&&(G++,K+=j),B<n-1&&(j=k[B+1][N])!==void 0&&(G++,K+=j),K/Math.max(1,G)}var i,c,h,f,b,v,g,y,p,m,w,u=0;for(x=0;x<r;x++)for(d=0;d<n;d++)k[d][x]===void 0&&(t.push(x),o.push(d),k[d][x]=a(x,d)),u=Math.max(u,Math.abs(k[d][x]));if(!t.length)return k;var S=0,_=0,E=t.length;do{for(S=0,s=0;s<E;s++){x=t[s],d=o[s];var L,C,P,I,U,z,H=0,F=0;x===0?(P=l[U=Math.min(r-1,2)],I=l[1],L=k[d][U],F+=(C=k[d][1])+(C-L)*(l[0]-I)/(I-P),H++):x===r-1&&(P=l[U=Math.max(0,r-3)],I=l[r-2],L=k[d][U],F+=(C=k[d][r-2])+(C-L)*(l[r-1]-I)/(I-P),H++),(x===0||x===r-1)&&d>0&&d<n-1&&(i=T[d+1]-T[d],F+=((c=T[d]-T[d-1])*k[d+1][x]+i*k[d-1][x])/(c+i),H++),d===0?(P=T[z=Math.min(n-1,2)],I=T[1],L=k[z][x],F+=(C=k[1][x])+(C-L)*(T[0]-I)/(I-P),H++):d===n-1&&(P=T[z=Math.max(0,n-3)],I=T[n-2],L=k[z][x],F+=(C=k[n-2][x])+(C-L)*(T[n-1]-I)/(I-P),H++),(d===0||d===n-1)&&x>0&&x<r-1&&(i=l[x+1]-l[x],F+=((c=l[x]-l[x-1])*k[d][x+1]+i*k[d][x-1])/(c+i),H++),H?F/=H:(h=l[x+1]-l[x],f=l[x]-l[x-1],y=(b=T[d+1]-T[d])*(v=T[d]-T[d-1])*(b+v),F=((g=h*f*(h+f))*(v*k[d+1][x]+b*k[d-1][x])+y*(f*k[d][x+1]+h*k[d][x-1]))/(y*(f+h)+g*(v+b))),S+=(m=(p=F-k[d][x])/u)*m,w=H?0:.85,k[d][x]+=p*(1+w)}S=Math.sqrt(S)}while(_++<100&&S>1e-5);return A.log("Smoother converged to",S,"after",_,"iterations"),k}},19237:function($,R,e){var A=e(71828).isArray1D;$.exports=function(k,l,T){var x=T("x"),d=x&&x.length,s=T("y"),t=s&&s.length;if(!d&&!t)return!1;if(l._cheater=!x,d&&!A(x)||t&&!A(s))l._length=null;else{var o=d?x.length:1/0;t&&(o=Math.min(o,s.length)),l.a&&l.a.length&&(o=Math.min(o,l.a.length)),l.b&&l.b.length&&(o=Math.min(o,l.b.length)),l._length=o}return!0}},69568:function($,R,e){var A=e(5386).f,k=e(19316),l=e(50693),T=e(9012),x=e(22399).defaultLine,d=e(1426).extendFlat,s=k.marker.line;$.exports=d({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:d({},k.geojson,{}),featureidkey:k.featureidkey,text:d({},k.text,{}),hovertext:d({},k.hovertext,{}),marker:{line:{color:d({},s.color,{dflt:x}),width:d({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:d({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:A(),showlegend:d({},T.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function($,R,e){var A=e(92770),k=e(50606).BADNUM,l=e(78803),T=e(75225),x=e(66279);function d(s){return s&&typeof s=="string"}$.exports=function(s,t){var o,r=t._length,n=new Array(r);o=t.geojson?function(f){return d(f)||A(f)}:d;for(var a=0;a<r;a++){var i=n[a]={},c=t.locations[a],h=t.z[a];o(c)&&A(h)?(i.loc=c,i.z=h):(i.loc=null,i.z=k),i.index=a}return T(n,t),l(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),x(n,t),n}},61869:function($,R,e){var A=e(71828),k=e(1586),l=e(69568);$.exports=function(T,x,d,s){function t(i,c){return A.coerce(T,x,l,i,c)}var o=t("locations"),r=t("z");if(o&&o.length&&A.isArrayOrTypedArray(r)&&r.length){x._length=Math.min(o.length,r.length);var n,a=t("geojson");(typeof a=="string"&&a!==""||A.isPlainObject(a))&&(n="geojson-id"),t("locationmode",n)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,x,s,t,{prefix:"",cLetter:"z"}),A.coerceSelectionMarkerOpacity(x,t)}else x.visible=!1}},92069:function($){$.exports=function(R,e,A,k,l){R.location=e.location,R.z=e.z;var T=k[l];return T.fIn&&T.fIn.properties&&(R.properties=T.fIn.properties),R.ct=T.ct,R}},42300:function($,R,e){var A=e(89298),k=e(69568),l=e(71828).fillText;$.exports=function(T,x,d){var s,t,o,r,n=T.cd,a=n[0].trace,i=T.subplot,c=[x,d],h=[x+360,d];for(t=0;t<n.length;t++)if(r=!1,(s=n[t])._polygons){for(o=0;o<s._polygons.length;o++)s._polygons[o].contains(c)&&(r=!r),s._polygons[o].contains(h)&&(r=!r);if(r)break}if(r&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=A.tickText(i.mockAxis,i.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(f,b,v){if(!b.hovertemplate){var g=v.hi||b.hoverinfo,y=String(v.loc),p=g==="all"?k.hoverinfo.flags:g.split("+"),m=p.indexOf("name")!==-1,w=p.indexOf("location")!==-1,u=p.indexOf("z")!==-1,S=p.indexOf("text")!==-1,_=[];!m&&w?f.nameOverride=y:(m&&(f.nameOverride=b.name),w&&_.push(y)),u&&_.push(f.zLabel),S&&l(v,b,_),f.extraText=_.join("<br>")}}(T,a,s),[T]}},51319:function($,R,e){$.exports={attributes:e(69568),supplyDefaults:e(61869),colorbar:e(61243),calc:e(38675),calcGeoJSON:e(99841).calcGeoJSON,plot:e(99841).plot,style:e(99636).style,styleOnSelect:e(99636).styleOnSelect,hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),moduleType:"trace",name:"choropleth",basePlotModule:e(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function($,R,e){var A=e(39898),k=e(71828),l=e(41327),T=e(90973).getTopojsonFeatures,x=e(71739).findExtremes,d=e(99636).style;$.exports={calcGeoJSON:function(s,t){for(var o=s[0].trace,r=t[o.geo],n=r._subplot,a=o.locationmode,i=o._length,c=a==="geojson-id"?l.extractTraceFeature(s):T(o,n.topojson),h=[],f=[],b=0;b<i;b++){var v=s[b],g=a==="geojson-id"?v.fOut:l.locationToFeature(a,v.loc,c);if(g){v.geojson=g,v.ct=g.properties.ct,v._polygons=l.feature2polygons(g);var y=l.computeBbox(g);h.push(y[0],y[2]),f.push(y[1],y[3])}else v.geojson=null}if(r.fitbounds==="geojson"&&a==="geojson-id"){var p=l.computeBbox(l.getTraceGeojson(o));h=[p[0],p[2]],f=[p[1],p[3]]}var m={padded:!0};o._extremes.lon=x(r.lonaxis._ax,h,m),o._extremes.lat=x(r.lataxis._ax,f,m)},plot:function(s,t,o){var r=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(r,o,"trace choropleth").each(function(n){var a=A.select(this).selectAll("path.choroplethlocation").data(k.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),d(s,n)})}}},81253:function($){$.exports=function(R,e){var A,k,l,T,x,d=R.cd,s=R.xaxis,t=R.yaxis,o=[];if(e===!1)for(A=0;A<d.length;A++)d[A].selected=0;else for(A=0;A<d.length;A++)(l=(k=d[A]).ct)&&(T=s.c2p(l),x=t.c2p(l),e.contains([T,x],null,A,R)?(o.push({pointNumber:A,lon:l[0],lat:l[1]}),k.selected=1):k.selected=0);return o}},99636:function($,R,e){var A=e(39898),k=e(7901),l=e(91424),T=e(21081);function x(d,s){var t=s[0].trace,o=s[0].node3.selectAll(".choroplethlocation"),r=t.marker||{},n=r.line||{},a=T.makeColorScaleFuncFromTrace(t);o.each(function(i){A.select(this).attr("fill",a(i.z)).call(k.stroke,i.mlc||n.color).call(l.dashLine,"",i.mlw||n.width||0).style("opacity",r.opacity)}),l.selectedPointStyle(o,t)}$.exports={style:function(d,s){s&&x(0,s)},styleOnSelect:function(d,s){var t=s[0].node3,o=s[0].trace;o.selectedpoints?l.selectedPointStyle(t.selectAll(".choroplethlocation"),o):x(0,s)}}},64496:function($,R,e){var A=e(69568),k=e(50693),l=e(5386).f,T=e(9012),x=e(1426).extendFlat;$.exports=x({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:x({},A.featureidkey,{}),below:{valType:"string",editType:"plot"},text:A.text,hovertext:A.hovertext,marker:{line:{color:x({},A.marker.line.color,{editType:"plot"}),width:x({},A.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:x({},A.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:x({},A.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:x({},A.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:A.hoverinfo,hovertemplate:l({},{keys:["properties"]}),showlegend:x({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function($,R,e){var A=e(92770),k=e(71828),l=e(21081),T=e(91424),x=e(18214).makeBlank,d=e(41327);function s(t){var o,r=t[0].trace,n=r._opts;if(r.selectedpoints){for(var a=T.makeSelectedPointStyleFns(r),i=0;i<t.length;i++){var c=t[i];c.fOut&&(c.fOut.properties.mo2=a.selectedOpacityFn(c))}o={type:"identity",property:"mo2"}}else o=k.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return k.extendFlat(n.fill.paint,{"fill-opacity":o}),k.extendFlat(n.line.paint,{"line-opacity":o}),n}$.exports={convert:function(t){var o=t[0].trace,r=o.visible===!0&&o._length!==0,n={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},i=o._opts={fill:n,line:a,geojson:x()};if(!r)return i;var c=d.extractTraceFeature(t);if(!c)return i;var h,f,b,v=l.makeColorScaleFuncFromTrace(o),g=o.marker,y=g.line||{};k.isArrayOrTypedArray(g.opacity)&&(h=function(_){var E=_.mo;return A(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(y.color)&&(f=function(_){return _.mlc}),k.isArrayOrTypedArray(y.width)&&(b=function(_){return _.mlw});for(var p=0;p<t.length;p++){var m=t[p],w=m.fOut;if(w){var u=w.properties;u.fc=v(m.z),h&&(u.mo=h(m)),f&&(u.mlc=f(m)),b&&(u.mlw=b(m)),m.ct=u.ct,m._polygons=d.feature2polygons(w)}}var S=h?{type:"identity",property:"mo"}:g.opacity;return k.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),k.extendFlat(a.paint,{"line-color":f?{type:"identity",property:"mlc"}:y.color,"line-width":b?{type:"identity",property:"mlw"}:y.width,"line-opacity":S}),n.layout.visibility="visible",a.layout.visibility="visible",i.geojson={type:"FeatureCollection",features:c},s(t),i},convertOnSelect:s}},22654:function($,R,e){var A=e(71828),k=e(1586),l=e(64496);$.exports=function(T,x,d,s){function t(a,i){return A.coerce(T,x,l,a,i)}var o=t("locations"),r=t("z"),n=t("geojson");A.isArrayOrTypedArray(o)&&o.length&&A.isArrayOrTypedArray(r)&&r.length&&(typeof n=="string"&&n!==""||A.isPlainObject(n))?(t("featureidkey"),x._length=Math.min(o.length,r.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,x,s,t,{prefix:"",cLetter:"z"}),A.coerceSelectionMarkerOpacity(x,t)):x.visible=!1}},57516:function($,R,e){$.exports={attributes:e(64496),supplyDefaults:e(22654),colorbar:e(61243),calc:e(38675),plot:e(7852),hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),styleOnSelect:function(A,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(A,k){for(var l=k.getMapLayers(),T=l.length-2;T>=0;T--){var x=l[T].id;if(typeof x=="string"&&x.indexOf("water")===0){for(var d=T+1;d<l.length;d++)if(typeof(x=l[d].id)=="string"&&x.indexOf("plotly-")===-1)return x}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function($,R,e){var A=e(82004).convert,k=e(82004).convertOnSelect,l=e(77734).traceLayerPrefix;function T(d,s){this.type="choroplethmapbox",this.subplot=d,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",l+s+"-fill"],["line",l+s+"-line"]],this.below=null}var x=T.prototype;x.update=function(d){this._update(A(d)),d[0].trace._glTrace=this},x.updateOnSelect=function(d){this._update(k(d))},x._update=function(d){var s=this.subplot,t=this.layerList,o=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(d.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(d,o),this.below=o);for(var r=0;r<t.length;r++){var n=t[r],a=n[0],i=n[1],c=d[a];s.setOptions(i,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&s.setOptions(i,"setPaintProperty",c.paint)}},x._addLayers=function(d,s){for(var t=this.subplot,o=this.layerList,r=this.sourceId,n=0;n<o.length;n++){var a=o[n],i=a[0],c=d[i];t.addLayer({type:i,id:a[1],source:r,layout:c.layout,paint:c.paint},s)}},x._removeLayers=function(){for(var d=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)d.removeLayer(s[t][1])},x.dispose=function(){var d=this.subplot.map;this._removeLayers(),d.removeSource(this.sourceId)},$.exports=function(d,s){var t=s[0].trace,o=new T(d,t.uid),r=o.sourceId,n=A(s),a=o.below=d.belowLookup["trace-"+t.uid];return d.map.addSource(r,{type:"geojson",data:n.geojson}),o._addLayers(n,a),s[0].trace._glTrace=o,o}},12674:function($,R,e){var A=e(50693),k=e(12663).axisHoverFormat,l=e(5386).f,T=e(2418),x=e(9012),d=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:d({},x.showlegend,{dflt:!1})};d(s,A("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=d({},x.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,$.exports=s},31371:function($,R,e){var A=e(78803);$.exports=function(k,l){for(var T=l.u,x=l.v,d=l.w,s=Math.min(l.x.length,l.y.length,l.z.length,T.length,x.length,d.length),t=-1/0,o=1/0,r=0;r<s;r++){var n=T[r],a=x[r],i=d[r],c=Math.sqrt(n*n+a*a+i*i);t=Math.max(t,c),o=Math.min(o,c)}l._len=s,l._normMax=t,A(k,l,{vals:[o,t],containerStr:"",cLetter:"c"})}},5453:function($,R,e){var A=e(9330).gl_cone3d,k=e(9330).gl_cone3d.createConeMesh,l=e(71828).simpleMap,T=e(81697).parseColorScale,x=e(21081).extractOpts,d=e(90060);function s(i,c){this.scene=i,this.uid=c,this.mesh=null,this.data=null}var t=s.prototype;t.handlePick=function(i){if(i.object===this.mesh){var c=i.index=i.data.index,h=this.data.x[c],f=this.data.y[c],b=this.data.z[c],v=this.data.u[c],g=this.data.v[c],y=this.data.w[c];i.traceCoordinate=[h,f,b,v,g,y,Math.sqrt(v*v+g*g+y*y)];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[c]!==void 0?i.textLabel=p[c]:p&&(i.textLabel=p),!0}};var o={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},n={tip:1,tail:1,cm:.75,center:.5};function a(i,c){var h=i.fullSceneLayout,f=i.dataScale,b={};function v(m,w){var u=h[w],S=f[o[w]];return l(m,function(_){return u.d2l(_)*S})}b.vectors=d(v(c.u,"xaxis"),v(c.v,"yaxis"),v(c.w,"zaxis"),c._len),b.positions=d(v(c.x,"xaxis"),v(c.y,"yaxis"),v(c.z,"zaxis"),c._len);var g=x(c);b.colormap=T(c),b.vertexIntensityBounds=[g.min/c._normMax,g.max/c._normMax],b.coneOffset=r[c.anchor],c.sizemode==="scaled"?b.coneSize=c.sizeref||.5:b.coneSize=c.sizeref&&c._normMax?c.sizeref/c._normMax:.5;var y=A(b),p=c.lightposition;return y.lightPosition=[p.x,p.y,p.z],y.ambient=c.lighting.ambient,y.diffuse=c.lighting.diffuse,y.specular=c.lighting.specular,y.roughness=c.lighting.roughness,y.fresnel=c.lighting.fresnel,y.opacity=c.opacity,c._pad=n[c.anchor]*y.vectorScale*y.coneScale*c._normMax,y}t.update=function(i){this.data=i;var c=a(this.scene,i);this.mesh.update(c)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(i,c){var h=i.glplot.gl,f=a(i,c),b=k(h,f),v=new s(i,c.uid);return v.mesh=b,v.data=c,b._trace=v,i.glplot.add(b),v}},91750:function($,R,e){var A=e(71828),k=e(1586),l=e(12674);$.exports=function(T,x,d,s){function t(h,f){return A.coerce(T,x,l,h,f)}var o=t("u"),r=t("v"),n=t("w"),a=t("x"),i=t("y"),c=t("z");o&&o.length&&r&&r.length&&n&&n.length&&a&&a.length&&i&&i.length&&c&&c.length?(t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,x,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),x._length=null):x.visible=!1}},98128:function($,R,e){$.exports={moduleType:"trace",name:"cone",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(12674),supplyDefaults:e(91750),colorbar:{min:"cmin",max:"cmax"},calc:e(31371),plot:e(5453),eventData:function(A,k){return A.norm=k.traceCoordinate[6],A},meta:{}}},70600:function($,R,e){var A=e(21606),k=e(82196),l=e(12663),T=l.axisHoverFormat,x=l.descriptionOnlyNumbers,d=e(50693),s=e(79952).P,t=e(41940),o=e(1426).extendFlat,r=e(74808),n=r.COMPARISON_OPS2,a=r.INTERVAL_OPS,i=k.line;$.exports=o({z:A.z,x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,text:A.text,hovertext:A.hovertext,transpose:A.transpose,xtype:A.xtype,ytype:A.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:A.hovertemplate,texttemplate:o({},A.texttemplate,{}),textfont:o({},A.textfont,{}),hoverongaps:A.hoverongaps,connectgaps:o({},A.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:x("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o({},i.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:o({},i.smoothing,{}),editType:"plot"}},d("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function($,R,e){var A=e(21081),k=e(90757),l=e(18670),T=e(53572);$.exports=function(x,d){var s=k(x,d),t=s[0].z;l(d,t);var o,r=d.contours,n=A.extractOpts(d);if(r.coloring==="heatmap"&&n.auto&&d.autocontour===!1){var a=r.start,i=T(r),c=r.size||1,h=Math.floor((i-a)/c)+1;isFinite(c)||(c=1,h=1);var f=a-c/2;o=[f,f+h*c]}else o=t;return A.calc(x,d,{vals:o,cLetter:"z"}),s}},20083:function($){$.exports=function(R,e){var A,k=R[0],l=k.z;switch(e.type){case"levels":var T=Math.min(l[0][0],l[0][1]);for(A=0;A<R.length;A++){var x=R[A];x.prefixBoundary=!x.edgepaths.length&&(T>x.level||x.starts.length&&T===x.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var d=k.x.length,s=k.y.length,t=-1/0,o=1/0;for(A=0;A<s;A++)o=Math.min(o,l[A][0]),o=Math.min(o,l[A][d-1]),t=Math.max(t,l[A][0]),t=Math.max(t,l[A][d-1]);for(A=1;A<d-1;A++)o=Math.min(o,l[0][A]),o=Math.min(o,l[s-1][A]),t=Math.max(t,l[0][A]),t=Math.max(t,l[s-1][A]);var r,n,a=e.value;switch(e._operation){case">":a>t&&(k.prefixBoundary=!0);break;case"<":(a<o||k.starts.length&&a===o)&&(k.prefixBoundary=!0);break;case"[]":r=Math.min(a[0],a[1]),((n=Math.max(a[0],a[1]))<o||r>t||k.starts.length&&n===o)&&(k.prefixBoundary=!0);break;case"][":r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),r<o&&n>t&&(k.prefixBoundary=!0)}}}},90654:function($,R,e){var A=e(21081),k=e(86068),l=e(53572);$.exports={min:"zmin",max:"zmax",calc:function(T,x,d){var s=x.contours,t=x.line,o=s.size||1,r=s.coloring,n=k(x,{isColorbar:!0});if(r==="heatmap"){var a=A.extractOpts(x);d._fillgradient=a.reversescale?A.flipScale(a.colorscale):a.colorscale,d._zrange=[a.min,a.max]}else r==="fill"&&(d._fillcolor=n);d._line={color:r==="lines"?n:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},d._levels={start:s.start,end:l(s),size:o}}}},36914:function($){$.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function($,R,e){var A=e(92770),k=e(14523),l=e(7901),T=l.addOpacity,x=l.opacity,d=e(74808),s=d.CONSTRAINT_REDUCTION,t=d.COMPARISON_OPS2;$.exports=function(o,r,n,a,i,c){var h,f,b,v=r.contours,g=n("contours.operation");v._operation=s[g],function(y,p){var m;t.indexOf(p.operation)===-1?(y("contours.value",[0,1]),Array.isArray(p.value)?p.value.length>2?p.value=p.value.slice(2):p.length===0?p.value=[0,1]:p.length<2?(m=parseFloat(p.value[0]),p.value=[m,m+1]):p.value=[parseFloat(p.value[0]),parseFloat(p.value[1])]:A(p.value)&&(m=parseFloat(p.value),p.value=[m,m+1])):(y("contours.value",0),A(p.value)||(Array.isArray(p.value)?p.value=parseFloat(p.value[0]):p.value=0))}(n,v),g==="="?h=v.showlines=!0:(h=n("contours.showlines"),b=n("fillcolor",T((o.line||{}).color||i,.5))),h&&(f=n("line.color",b&&x(b)?T(r.fillcolor,1):i),n("line.width",2),n("line.dash")),n("line.smoothing"),k(n,a,f,c)}},64237:function($,R,e){var A=e(74808),k=e(92770);function l(d,s){var t,o=Array.isArray(s);function r(n){return k(n)?+n:null}return A.COMPARISON_OPS2.indexOf(d)!==-1?t=r(o?s[0]:s):A.INTERVAL_OPS.indexOf(d)!==-1?t=o?[r(s[0]),r(s[1])]:[r(s),r(s)]:A.SET_OPS.indexOf(d)!==-1&&(t=o?s.map(r):[r(s)]),t}function T(d){return function(s){s=l(d,s);var t=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return{start:t,end:o,size:o-t}}}function x(d){return function(s){return{start:s=l(d,s),end:1/0,size:1/0}}}$.exports={"[]":T("[]"),"][":T("]["),">":x(">"),"<":x("<"),"=":x("=")}},67217:function($){$.exports=function(R,e,A,k){var l=k("contours.start"),T=k("contours.end"),x=l===!1||T===!1,d=A("contours.size");!(x?e.autocontour=!0:A("autocontour",!1))&&d||A("ncontours")}},84857:function($,R,e){var A=e(71828);function k(l){return A.extendFlat({},l,{edgepaths:A.extendDeep([],l.edgepaths),paths:A.extendDeep([],l.paths),starts:A.extendDeep([],l.starts)})}$.exports=function(l,T){var x,d,s,t=function(n){return n.reverse()},o=function(n){return n};switch(T){case"=":case"<":return l;case">":for(l.length!==1&&A.warn("Contour data invalid for the specified inequality operation."),d=l[0],x=0;x<d.edgepaths.length;x++)d.edgepaths[x]=t(d.edgepaths[x]);for(x=0;x<d.paths.length;x++)d.paths[x]=t(d.paths[x]);for(x=0;x<d.starts.length;x++)d.starts[x]=t(d.starts[x]);return l;case"][":var r=t;t=o,o=r;case"[]":for(l.length!==2&&A.warn("Contour data invalid for the specified inequality range operation."),d=k(l[0]),s=k(l[1]),x=0;x<d.edgepaths.length;x++)d.edgepaths[x]=t(d.edgepaths[x]);for(x=0;x<d.paths.length;x++)d.paths[x]=t(d.paths[x]);for(x=0;x<d.starts.length;x++)d.starts[x]=t(d.starts[x]);for(;s.edgepaths.length;)d.edgepaths.push(o(s.edgepaths.shift()));for(;s.paths.length;)d.paths.push(o(s.paths.shift()));for(;s.starts.length;)d.starts.push(o(s.starts.shift()));return[d]}}},13031:function($,R,e){var A=e(71828),k=e(67684),l=e(73927),T=e(83179),x=e(67217),d=e(8724),s=e(58623),t=e(70600);$.exports=function(o,r,n,a){function i(h,f){return A.coerce(o,r,t,h,f)}if(k(o,r,i,a)){l(o,r,a,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hoverongaps"),i("hovertemplate");var c=i("contours.type")==="constraint";i("connectgaps",A.isArray1D(r.z)),c?T(o,r,i,a,n):(x(o,r,i,function(h){return A.coerce2(o,r,t,h)}),d(o,r,i,a)),r.contours&&r.contours.coloring==="heatmap"&&s(i,a)}else r.visible=!1}},87558:function($,R,e){var A=e(71828),k=e(64237),l=e(53572);$.exports=function(T,x,d){for(var s=T.type==="constraint"?k[T._operation](T.value):T,t=s.size,o=[],r=l(s),n=d.trace._carpetTrace,a=n?{xaxis:n.aaxis,yaxis:n.baxis,x:d.a,y:d.b}:{xaxis:x.xaxis,yaxis:x.yaxis,x:d.x,y:d.y},i=s.start;i<r;i+=t)if(o.push(A.extendFlat({level:i,crossings:{},starts:[],edgepaths:[],paths:[],z:d.z,smoothing:d.trace.line.smoothing},a)),o.length>1e3){A.warn("Too many contours, clipping at 1000",T);break}return o}},53572:function($){$.exports=function(R){return R.end+R.size/1e6}},81696:function($,R,e){var A=e(71828),k=e(36914);function l(d,s,t,o){return Math.abs(d[0]-s[0])<t&&Math.abs(d[1]-s[1])<o}function T(d,s,t,o,r){var n,a=s.join(","),i=d.crossings[a],c=function(ee,re,ie){var se=0,fe=0;return ee>20&&re?ee===208||ee===1114?se=ie[0]===0?1:-1:fe=ie[1]===0?1:-1:k.BOTTOMSTART.indexOf(ee)!==-1?fe=1:k.LEFTSTART.indexOf(ee)!==-1?se=1:k.TOPSTART.indexOf(ee)!==-1?fe=-1:se=-1,[se,fe]}(i,t,s),h=[x(d,s,[-c[0],-c[1]])],f=d.z.length,b=d.z[0].length,v=s.slice(),g=c.slice();for(n=0;n<1e4;n++){if(i>20?(i=k.CHOOSESADDLE[i][(c[0]||c[1])<0?0:1],d.crossings[a]=k.SADDLEREMAINDER[i]):delete d.crossings[a],!(c=k.NEWDELTA[i])){A.log("Found bad marching index:",i,s,d.level);break}h.push(x(d,s,c)),s[0]+=c[0],s[1]+=c[1],a=s.join(","),l(h[h.length-1],h[h.length-2],o,r)&&h.pop();var y=c[0]&&(s[0]<0||s[0]>b-2)||c[1]&&(s[1]<0||s[1]>f-2);if(s[0]===v[0]&&s[1]===v[1]&&c[0]===g[0]&&c[1]===g[1]||t&&y)break;i=d.crossings[a]}n===1e4&&A.log("Infinite loop in contour?");var p,m,w,u,S,_,E,L,C,P,I,U,z,H,F,N=l(h[0],h[h.length-1],o,r),B=0,j=.2*d.smoothing,K=[],G=0;for(n=1;n<h.length;n++)U=h[n],z=h[n-1],H=U[2]-z[2],F=U[3]-z[3],B+=E=Math.sqrt(H*H+F*F),K.push(E);var V=B/K.length*j;function W(ee){return h[ee%h.length]}for(n=h.length-2;n>=G;n--)if((p=K[n])<V){for(w=0,m=n-1;m>=G&&p+K[m]<V;m--)p+=K[m];if(N&&n===h.length-2)for(w=0;w<m&&p+K[w]<V;w++)p+=K[w];S=n-m+w+1,_=Math.floor((n+m+w+2)/2),u=N||n!==h.length-2?N||m!==-1?S%2?W(_):[(W(_)[0]+W(_+1)[0])/2,(W(_)[1]+W(_+1)[1])/2]:h[0]:h[h.length-1],h.splice(m+1,n-m+1,u),n=m+1,w&&(G=w),N&&(n===h.length-2?h[w]=h[h.length-1]:n===0&&(h[h.length-1]=h[0]))}for(h.splice(0,G),n=0;n<h.length;n++)h[n].length=2;if(!(h.length<2))if(N)h.pop(),d.paths.push(h);else{t||A.log("Unclosed interior contour?",d.level,v.join(","),h.join("L"));var J=!1;for(L=0;L<d.edgepaths.length;L++)if(P=d.edgepaths[L],!J&&l(P[0],h[h.length-1],o,r)){h.pop(),J=!0;var X=!1;for(C=0;C<d.edgepaths.length;C++)if(l((I=d.edgepaths[C])[I.length-1],h[0],o,r)){X=!0,h.shift(),d.edgepaths.splice(L,1),C===L?d.paths.push(h.concat(I)):(C>L&&C--,d.edgepaths[C]=I.concat(h,P));break}X||(d.edgepaths[L]=h.concat(P))}for(L=0;L<d.edgepaths.length&&!J;L++)l((P=d.edgepaths[L])[P.length-1],h[0],o,r)&&(h.shift(),d.edgepaths[L]=P.concat(h),J=!0);J||d.edgepaths.push(h)}}function x(d,s,t){var o=s[0]+Math.max(t[0],0),r=s[1]+Math.max(t[1],0),n=d.z[r][o],a=d.xaxis,i=d.yaxis;if(t[1]){var c=(d.level-n)/(d.z[r][o+1]-n),h=(c!==1?(1-c)*a.c2l(d.x[o]):0)+(c!==0?c*a.c2l(d.x[o+1]):0);return[a.c2p(a.l2c(h),!0),i.c2p(d.y[r],!0),o+c,r]}var f=(d.level-n)/(d.z[r+1][o]-n),b=(f!==1?(1-f)*i.c2l(d.y[r]):0)+(f!==0?f*i.c2l(d.y[r+1]):0);return[a.c2p(d.x[o],!0),i.c2p(i.l2c(b),!0),o,r+f]}$.exports=function(d,s,t){var o,r,n,a;for(s=s||.01,t=t||.01,r=0;r<d.length;r++){for(n=d[r],a=0;a<n.starts.length;a++)T(n,n.starts[a],"edge",s,t);for(o=0;Object.keys(n.crossings).length&&o<1e4;)o++,T(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,s,t);o===1e4&&A.log("Infinite loop in contour?")}}},52421:function($,R,e){var A=e(7901),k=e(46248);$.exports=function(l,T,x,d,s){s||(s={}),s.isContour=!0;var t=k(l,T,x,d,s);return t&&t.forEach(function(o){var r=o.trace;r.contours.type==="constraint"&&(r.fillcolor&&A.opacity(r.fillcolor)?o.color=A.addOpacity(r.fillcolor,1):r.contours.showlines&&A.opacity(r.line.color)&&(o.color=A.addOpacity(r.line.color,1)))}),t}},99442:function($,R,e){$.exports={attributes:e(70600),supplyDefaults:e(13031),calc:e(27529),plot:e(29854).plot,style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"contour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function($,R,e){var A=e(71828);$.exports=function(k,l,T,x){if(x||(x={}),k("contours.showlabels")){var d=l.font;A.coerceFont(k,"contours.labelfont",{family:d.family,size:d.size,color:T}),k("contours.labelformat")}x.hasHover!==!1&&k("zhoverformat")}},86068:function($,R,e){var A=e(39898),k=e(21081),l=e(53572);$.exports=function(T){var x=T.contours,d=x.start,s=l(x),t=x.size||1,o=Math.floor((s-d)/t)+1,r=x.coloring==="lines"?0:1,n=k.extractOpts(T);isFinite(t)||(t=1,o=1);var a,i,c=n.reversescale?k.flipScale(n.colorscale):n.colorscale,h=c.length,f=new Array(h),b=new Array(h);if(x.coloring==="heatmap"){var v=n.min,g=n.max;for(i=0;i<h;i++)a=c[i],f[i]=a[0]*(g-v)+v,b[i]=a[1];var y=A.extent([v,g,x.start,x.start+t*(o-1)]),p=y[v<g?0:1],m=y[v<g?1:0];p!==v&&(f.splice(0,0,p),b.splice(0,0,b[0])),m!==g&&(f.push(m),b.push(b[b.length-1]))}else for(i=0;i<h;i++)a=c[i],f[i]=(a[0]*(o+r-1)-r/2)*t+d,b[i]=a[1];return k.makeColorScaleFunc({domain:f,range:b},{noNumericCheck:!0})}},87678:function($,R,e){var A=e(36914);function k(l,T){var x=(T[0][0]>l?0:1)+(T[0][1]>l?0:2)+(T[1][1]>l?0:4)+(T[1][0]>l?0:8);return x===5||x===10?l>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?x===5?713:1114:x===5?104:208:x===15?0:x}$.exports=function(l){var T,x,d,s,t,o,r,n,a,i=l[0].z,c=i.length,h=i[0].length,f=c===2||h===2;for(x=0;x<c-1;x++)for(s=[],x===0&&(s=s.concat(A.BOTTOMSTART)),x===c-2&&(s=s.concat(A.TOPSTART)),T=0;T<h-1;T++)for(d=s.slice(),T===0&&(d=d.concat(A.LEFTSTART)),T===h-2&&(d=d.concat(A.RIGHTSTART)),t=T+","+x,o=[[i[x][T],i[x][T+1]],[i[x+1][T],i[x+1][T+1]]],a=0;a<l.length;a++)(r=k((n=l[a]).level,o))&&(n.crossings[t]=r,d.indexOf(r)!==-1&&(n.starts.push([T,x]),f&&d.indexOf(r,d.indexOf(r)+1)!==-1&&n.starts.push([T,x])))}},29854:function($,R,e){var A=e(39898),k=e(71828),l=e(91424),T=e(21081),x=e(63893),d=e(89298),s=e(21994),t=e(50347),o=e(87678),r=e(81696),n=e(87558),a=e(84857),i=e(20083),c=e(36914),h=c.LABELOPTIMIZER;function f(g,y){var p,m,w,u,S,_,E,L="",C=0,P=g.edgepaths.map(function(N,B){return B}),I=!0;function U(N){return Math.abs(N[1]-y[2][1])<.01}function z(N){return Math.abs(N[0]-y[0][0])<.01}function H(N){return Math.abs(N[0]-y[2][0])<.01}for(;P.length;){for(_=l.smoothopen(g.edgepaths[C],g.smoothing),L+=I?_:_.replace(/^M/,"L"),P.splice(P.indexOf(C),1),p=g.edgepaths[C][g.edgepaths[C].length-1],u=-1,w=0;w<4;w++){if(!p){k.log("Missing end?",C,g);break}for(E=p,Math.abs(E[1]-y[0][1])<.01&&!H(p)?m=y[1]:z(p)?m=y[0]:U(p)?m=y[3]:H(p)&&(m=y[2]),S=0;S<g.edgepaths.length;S++){var F=g.edgepaths[S][0];Math.abs(p[0]-m[0])<.01?Math.abs(p[0]-F[0])<.01&&(F[1]-p[1])*(m[1]-F[1])>=0&&(m=F,u=S):Math.abs(p[1]-m[1])<.01?Math.abs(p[1]-F[1])<.01&&(F[0]-p[0])*(m[0]-F[0])>=0&&(m=F,u=S):k.log("endpt to newendpt is not vert. or horz.",p,m,F)}if(p=m,u>=0)break;L+="L"+m}if(u===g.edgepaths.length){k.log("unclosed perimeter path");break}C=u,(I=P.indexOf(C)===-1)&&(C=P[0],L+="Z")}for(C=0;C<g.paths.length;C++)L+=l.smoothclosed(g.paths[C],g.smoothing);return L}function b(g,y,p,m){var w=y.width/2,u=y.height/2,S=g.x,_=g.y,E=g.theta,L=Math.cos(E)*w,C=Math.sin(E)*w,P=(S>m.center?m.right-S:S-m.left)/(L+Math.abs(Math.sin(E)*u)),I=(_>m.middle?m.bottom-_:_-m.top)/(Math.abs(C)+Math.cos(E)*u);if(P<1||I<1)return 1/0;var U=h.EDGECOST*(1/(P-1)+1/(I-1));U+=h.ANGLECOST*E*E;for(var z=S-L,H=_-C,F=S+L,N=_+C,B=0;B<p.length;B++){var j=p[B],K=Math.cos(j.theta)*j.width/2,G=Math.sin(j.theta)*j.width/2,V=2*k.segmentDistance(z,H,F,N,j.x-K,j.y-G,j.x+K,j.y+G)/(y.height+j.height),W=j.level===y.level,J=W?h.SAMELEVELDISTANCE:1;if(V<=J)return 1/0;U+=h.NEIGHBORCOST*(W?h.SAMELEVELFACTOR:1)/(V-J)}return U}function v(g){var y,p,m=g.trace._emptypoints,w=[],u=g.z.length,S=g.z[0].length,_=[];for(y=0;y<S;y++)_.push(1);for(y=0;y<u;y++)w.push(_.slice());for(y=0;y<m.length;y++)w[(p=m[y])[0]][p[1]]=0;return g.zmask=w,w}R.plot=function(g,y,p,m){var w=y.xaxis,u=y.yaxis;k.makeTraceGroups(m,p,"contour").each(function(S){var _=A.select(this),E=S[0],L=E.trace,C=E.x,P=E.y,I=L.contours,U=n(I,y,E),z=k.ensureSingle(_,"g","heatmapcoloring"),H=[];I.coloring==="heatmap"&&(H=[S]),t(g,y,H,z),o(U),r(U);var F=w.c2p(C[0],!0),N=w.c2p(C[C.length-1],!0),B=u.c2p(P[0],!0),j=u.c2p(P[P.length-1],!0),K=[[F,j],[N,j],[N,B],[F,B]],G=U;I.type==="constraint"&&(G=a(U,I._operation)),function(V,W,J){var X=k.ensureSingle(V,"g","contourbg").selectAll("path").data(J.coloring==="fill"?[0]:[]);X.enter().append("path"),X.exit().remove(),X.attr("d","M"+W.join("L")+"Z").style("stroke","none")}(_,K,I),function(V,W,J,X){var ee=X.coloring==="fill"||X.type==="constraint"&&X._operation!=="=",re="M"+J.join("L")+"Z";ee&&i(W,X);var ie=k.ensureSingle(V,"g","contourfill").selectAll("path").data(ee?W:[]);ie.enter().append("path"),ie.exit().remove(),ie.each(function(se){var fe=(se.prefixBoundary?re:"")+f(se,J);fe?A.select(this).attr("d",fe).style("stroke","none"):A.select(this).remove()})}(_,G,K,I),function(V,W,J,X,ee){var re=k.ensureSingle(V,"g","contourlines"),ie=ee.showlines!==!1,se=ee.showlabels,fe=ie&&se,ye=R.createLines(re,ie||se,W),ge=R.createLineClip(re,fe,J,X.trace.uid),he=V.selectAll("g.contourlabels").data(se?[0]:[]);if(he.exit().remove(),he.enter().append("g").classed("contourlabels",!0),se){var ve=[],Ie=[];k.clearLocationCache();var xe=R.labelFormatter(J,X),Ae=l.tester.append("text").attr("data-notex",1).call(l.font,ee.labelfont),Se=W[0].xaxis,Te=W[0].yaxis,Q=Se._length,oe=Te._length,ce=Se.range,me=Te.range,Me=k.aggNums(Math.min,null,X.x),Re=k.aggNums(Math.max,null,X.x),Ce=k.aggNums(Math.min,null,X.y),ze=k.aggNums(Math.max,null,X.y),le=Math.max(Se.c2p(Me,!0),0),de=Math.min(Se.c2p(Re,!0),Q),be=Math.max(Te.c2p(ze,!0),0),Fe=Math.min(Te.c2p(Ce,!0),oe),Ve={};ce[0]<ce[1]?(Ve.left=le,Ve.right=de):(Ve.left=de,Ve.right=le),me[0]<me[1]?(Ve.top=be,Ve.bottom=Fe):(Ve.top=Fe,Ve.bottom=be),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,ve.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var He=Math.sqrt(Q*Q+oe*oe),rt=c.LABELDISTANCE*He/Math.max(1,W.length/c.LABELINCREASE);ye.each(function(tt){var ot=R.calcTextOpts(tt.level,xe,Ae,J);A.select(this).selectAll("path").each(function(){var ht=k.getVisibleSegment(this,Ve,ot.height/2);if(ht&&!(ht.len<(ot.width+ot.height)*c.LABELMIN))for(var _t=Math.min(Math.ceil(ht.len/rt),c.LABELMAX),dt=0;dt<_t;dt++){var bt=R.findBestTextLocation(this,ht,ot,Ie,Ve);if(!bt)break;R.addLabelData(bt,ot,Ie,ve)}})}),Ae.remove(),R.drawLabels(he,Ie,J,ge,fe?ve:null)}se&&!ie&&ye.remove()}(_,U,g,E,I),function(V,W,J,X,ee){var re=X.trace,ie=J._fullLayout._clips,se="clip"+re.uid,fe=ie.selectAll("#"+se).data(re.connectgaps?[]:[0]);if(fe.enter().append("clipPath").classed("contourclip",!0).attr("id",se),fe.exit().remove(),re.connectgaps===!1){var ye={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:W.xaxis,yaxis:W.yaxis,x:X.x,y:X.y,z:v(X),smoothing:0};o([ye]),r([ye]),i([ye],{type:"levels"}),k.ensureSingle(fe,"path","").attr("d",(ye.prefixBoundary?"M"+ee.join("L")+"Z":"")+f(ye,ee))}else se=null;l.setClipUrl(V,se,J)}(_,y,g,E,K)})},R.createLines=function(g,y,p){var m=p[0].smoothing,w=g.selectAll("g.contourlevel").data(y?p:[]);if(w.exit().remove(),w.enter().append("g").classed("contourlevel",!0),y){var u=w.selectAll("path.openline").data(function(_){return _.pedgepaths||_.edgepaths});u.exit().remove(),u.enter().append("path").classed("openline",!0),u.attr("d",function(_){return l.smoothopen(_,m)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var S=w.selectAll("path.closedline").data(function(_){return _.ppaths||_.paths});S.exit().remove(),S.enter().append("path").classed("closedline",!0),S.attr("d",function(_){return l.smoothclosed(_,m)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return w},R.createLineClip=function(g,y,p,m){var w=y?"clipline"+m:null,u=p._fullLayout._clips.selectAll("#"+w).data(y?[0]:[]);return u.exit().remove(),u.enter().append("clipPath").classed("contourlineclip",!0).attr("id",w),l.setClipUrl(g,w,p),u},R.labelFormatter=function(g,y){var p=g._fullLayout,m=y.trace,w=m.contours,u={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(w.labelformat)u.tickformat=w.labelformat,s(u,p);else{var S=T.extractOpts(m);if(S&&S.colorbar&&S.colorbar._axis)u=S.colorbar._axis;else{if(w.type==="constraint"){var _=w.value;Array.isArray(_)?u.range=[_[0],_[_.length-1]]:u.range=[_,_]}else u.range=[w.start,w.end],u.nticks=(w.end-w.start)/w.size;u.range[0]===u.range[1]&&(u.range[1]+=u.range[0]||1),u.nticks||(u.nticks=1e3),s(u,p),d.prepTicks(u),u._tmin=null,u._tmax=null}}return function(E){return d.tickText(u,E).text}},R.calcTextOpts=function(g,y,p,m){var w=y(g);p.text(w).call(x.convertToTspans,m);var u=p.node(),S=l.bBox(u,!0);return{text:w,width:S.width,height:S.height,fontSize:+u.style["font-size"].replace("px",""),level:g,dy:(S.top+S.bottom)/2}},R.findBestTextLocation=function(g,y,p,m,w){var u,S,_,E,L,C=p.width;y.isClosed?(S=y.len/h.INITIALSEARCHPOINTS,u=y.min+S/2,_=y.max):(S=(y.len-C)/(h.INITIALSEARCHPOINTS+1),u=y.min+S+C/2,_=y.max-(S+C)/2);for(var P=1/0,I=0;I<h.ITERATIONS;I++){for(var U=u;U<_;U+=S){var z=k.getTextLocation(g,y.total,U,C),H=b(z,p,m,w);H<P&&(P=H,L=z,E=U)}if(P>2*h.MAXCOST)break;I&&(S/=2),_=(u=E-S/2)+1.5*S}if(P<=h.MAXCOST)return L},R.addLabelData=function(g,y,p,m){var w=y.fontSize,u=y.width+w/3,S=Math.max(0,y.height-w/3),_=g.x,E=g.y,L=g.theta,C=Math.sin(L),P=Math.cos(L),I=function(z,H){return[_+z*P-H*C,E+z*C+H*P]},U=[I(-u/2,-S/2),I(-u/2,S/2),I(u/2,S/2),I(u/2,-S/2)];p.push({text:y.text,x:_,y:E,dy:y.dy,theta:L,level:y.level,width:u,height:S}),m.push(U)},R.drawLabels=function(g,y,p,m,w){var u=g.selectAll("text").data(y,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(u.exit().remove(),u.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var L=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;A.select(this).text(E.text).attr({x:L,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+L+" "+C+")"}).call(x.convertToTspans,p)}),w){for(var S="",_=0;_<w.length;_++)S+="M"+w[_].join("L")+"Z";k.ensureSingle(m,"path","").attr("d",S)}}},18670:function($,R,e){var A=e(89298),k=e(71828);function l(T,x,d){var s={type:"linear",range:[T,x]};return A.autoTicks(s,(x-T)/(d||15)),s}$.exports=function(T,x){var d=T.contours;if(T.autocontour){var s=T.zmin,t=T.zmax;(T.zauto||s===void 0)&&(s=k.aggNums(Math.min,null,x)),(T.zauto||t===void 0)&&(t=k.aggNums(Math.max,null,x));var o=l(s,t,T.ncontours);d.size=o.dtick,d.start=A.tickFirst(o),o.range.reverse(),d.end=A.tickFirst(o),d.start===s&&(d.start+=d.size),d.end===t&&(d.end-=d.size),d.start>d.end&&(d.start=d.end=(d.start+d.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:d.start,end:d.end,size:d.size}),T._input.autocontour=!0}else if(d.type!=="constraint"){var r,n=d.start,a=d.end,i=T._input.contours;n>a&&(d.start=i.start=a,a=d.end=i.end=n,n=d.start),d.size>0||(r=n===a?1:l(n,a,T.ncontours).dtick,i.size=d.size=r)}}},84426:function($,R,e){var A=e(39898),k=e(91424),l=e(70035),T=e(86068);$.exports=function(x){var d=A.select(x).selectAll("g.contour");d.style("opacity",function(s){return s[0].trace.opacity}),d.each(function(s){var t=A.select(this),o=s[0].trace,r=o.contours,n=o.line,a=r.size||1,i=r.start,c=r.type==="constraint",h=!c&&r.coloring==="lines",f=!c&&r.coloring==="fill",b=h||f?T(o):null;t.selectAll("g.contourlevel").each(function(y){A.select(this).selectAll("path").call(k.lineGroupStyle,n.width,h?b(y.level):n.color,n.dash)});var v=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(y){k.font(A.select(this),{family:v.family,size:v.size,color:v.color||(h?b(y.level):n.color)})}),c)t.selectAll("g.contourfill path").style("fill",o.fillcolor);else if(f){var g;t.selectAll("g.contourfill path").style("fill",function(y){return g===void 0&&(g=y.level),b(y.level+.5*a)}),g===void 0&&(g=i),t.selectAll("g.contourbg path").style("fill",b(g-.5*a))}}),l(x)}},8724:function($,R,e){var A=e(1586),k=e(14523);$.exports=function(l,T,x,d,s){var t,o=x("contours.coloring"),r="";o==="fill"&&(t=x("contours.showlines")),t!==!1&&(o!=="lines"&&(r=x("line.color","#000")),x("line.width",.5),x("line.dash")),o!=="none"&&(l.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,A(l,T,d,x,{prefix:"",cLetter:"z"})),x("line.smoothing"),k(x,d,r,s)}},88085:function($,R,e){var A=e(21606),k=e(70600),l=e(50693),T=e(1426).extendFlat,x=k.contours;$.exports=T({carpet:{valType:"string",editType:"calc"},z:A.z,a:A.x,a0:A.x0,da:A.dx,b:A.y,b0:A.y0,db:A.dy,text:A.text,hovertext:A.hovertext,transpose:A.transpose,atype:A.xtype,btype:A.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:x.type,start:x.start,end:x.end,size:x.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:x.showlines,showlabels:x.showlabels,labelfont:x.labelfont,labelformat:x.labelformat,operation:x.operation,value:x.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},59885:function($,R,e){var A=e(78803),k=e(71828),l=e(68296),T=e(4742),x=e(824),d=e(43907),s=e(70769),t=e(75005),o=e(22882),r=e(18670);$.exports=function(n,a){var i=a._carpetTrace=o(n,a);if(i&&i.visible&&i.visible!=="legendonly"){if(!a.a||!a.b){var c=n.data[i.index],h=n.data[a.index];h.a||(h.a=c.a),h.b||(h.b=c.b),t(h,a,a._defaultColor,n._fullLayout)}var f=function(b,v){var g,y,p,m,w,u,S,_=v._carpetTrace,E=_.aaxis,L=_.baxis;E._minDtick=0,L._minDtick=0,k.isArray1D(v.z)&&l(v,E,L,"a","b",["z"]),g=v._a=v._a||v.a,m=v._b=v._b||v.b,g=g?E.makeCalcdata(v,"_a"):[],m=m?L.makeCalcdata(v,"_b"):[],y=v.a0||0,p=v.da||1,w=v.b0||0,u=v.db||1,S=v._z=T(v._z||v.z,v.transpose),v._emptypoints=d(S),x(S,v._emptypoints);var C=k.maxRowLength(S),P=v.xtype==="scaled"?"":g,I=s(v,P,y,p,C,E),U=v.ytype==="scaled"?"":m,z={a:I,b:s(v,U,w,u,S.length,L),z:S};return v.contours.type==="levels"&&v.contours.coloring!=="none"&&A(b,v,{vals:S,containerStr:"",cLetter:"z"}),[z]}(n,a);return r(a,a._z),f}}},75005:function($,R,e){var A=e(71828),k=e(67684),l=e(88085),T=e(83179),x=e(67217),d=e(8724);$.exports=function(s,t,o,r){function n(a,i){return A.coerce(s,t,l,a,i)}if(n("carpet"),s.a&&s.b){if(!k(s,t,n,r,"a","b"))return void(t.visible=!1);n("text"),n("contours.type")==="constraint"?T(s,t,n,r,o,{hasHover:!1}):(x(s,t,n,function(a){return A.coerce2(s,t,l,a)}),d(s,t,n,r,{hasHover:!1}))}else t._defaultColor=o,t._length=null}},93740:function($,R,e){$.exports={attributes:e(88085),supplyDefaults:e(75005),colorbar:e(90654),calc:e(59885),plot:e(51048),style:e(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function($,R,e){var A=e(39898),k=e(27669),l=e(67961),T=e(91424),x=e(71828),d=e(87678),s=e(81696),t=e(29854),o=e(36914),r=e(84857),n=e(87558),a=e(20083),i=e(22882),c=e(4536);function h(v,g,y){var p=v.getPointAtLength(g),m=v.getPointAtLength(y),w=m.x-p.x,u=m.y-p.y,S=Math.sqrt(w*w+u*u);return[w/S,u/S]}function f(v){var g=Math.sqrt(v[0]*v[0]+v[1]*v[1]);return[v[0]/g,v[1]/g]}function b(v,g){var y=Math.abs(v[0]*g[0]+v[1]*g[1]);return Math.sqrt(1-y*y)/y}$.exports=function(v,g,y,p){var m=g.xaxis,w=g.yaxis;x.makeTraceGroups(p,y,"contour").each(function(u){var S=A.select(this),_=u[0],E=_.trace,L=E._carpetTrace=i(v,E),C=v.calcdata[L.index][0];if(L.visible&&L.visible!=="legendonly"){var P=_.a,I=_.b,U=E.contours,z=n(U,g,_),H=U.type==="constraint",F=U._operation,N=H?F==="="?"lines":"fill":U.coloring,B=[[P[0],I[I.length-1]],[P[P.length-1],I[I.length-1]],[P[P.length-1],I[0]],[P[0],I[0]]];d(z);var j=1e-8*(P[P.length-1]-P[0]),K=1e-8*(I[I.length-1]-I[0]);s(z,j,K);var G,V,W,J,X=z;U.type==="constraint"&&(X=r(z,F)),function(se,fe){var ye,ge,he,ve,Ie,xe,Ae,Se,Te;for(ye=0;ye<se.length;ye++){for(Ie=(ve=se[ye]).pedgepaths=[],xe=ve.ppaths=[],ge=0;ge<ve.edgepaths.length;ge++){for(Te=ve.edgepaths[ge],Ae=[],he=0;he<Te.length;he++)Ae[he]=fe(Te[he]);Ie.push(Ae)}for(ge=0;ge<ve.paths.length;ge++){for(Te=ve.paths[ge],Se=[],he=0;he<Te.length;he++)Se[he]=fe(Te[he]);xe.push(Se)}}}(z,ie);var ee=[];for(J=C.clipsegments.length-1;J>=0;J--)G=C.clipsegments[J],V=k([],G.x,m.c2p),W=k([],G.y,w.c2p),V.reverse(),W.reverse(),ee.push(l(V,W,G.bicubic));var re="M"+ee.join("L")+"Z";(function(se,fe,ye,ge,he,ve){var Ie,xe,Ae,Se,Te=x.ensureSingle(se,"g","contourbg").selectAll("path").data(ve!=="fill"||he?[]:[0]);Te.enter().append("path"),Te.exit().remove();var Q=[];for(Se=0;Se<fe.length;Se++)Ie=fe[Se],xe=k([],Ie.x,ye.c2p),Ae=k([],Ie.y,ge.c2p),Q.push(l(xe,Ae,Ie.bicubic));Te.attr("d","M"+Q.join("L")+"Z").style("stroke","none")})(S,C.clipsegments,m,w,H,N),function(se,fe,ye,ge,he,ve,Ie,xe,Ae,Se,Te){var Q=Se==="fill";Q&&a(he,se.contours);var oe=x.ensureSingle(fe,"g","contourfill").selectAll("path").data(Q?he:[]);oe.enter().append("path"),oe.exit().remove(),oe.each(function(ce){var me=(ce.prefixBoundary?Te:"")+function(Me,Re,Ce,ze,le,de,be,Fe){var Ve,He,rt,tt,ot,ht,_t,dt="",bt=Re.edgepaths.map(function(qe,Xe){return Xe}),St=!0,Et=1e-4*Math.abs(Ce[0][0]-Ce[2][0]),zt=1e-4*Math.abs(Ce[0][1]-Ce[2][1]);function Ut(qe){return Math.abs(qe[1]-Ce[0][1])<zt}function Pt(qe){return Math.abs(qe[1]-Ce[2][1])<zt}function Ze(qe){return Math.abs(qe[0]-Ce[0][0])<Et}function Ye(qe){return Math.abs(qe[0]-Ce[2][0])<Et}function Be(qe,Xe){var nt,ut,ct,Ct,Lt="";for(Ut(qe)&&!Ye(qe)||Pt(qe)&&!Ze(qe)?(Ct=le.aaxis,ct=c(le,de,[qe[0],Xe[0]],.5*(qe[1]+Xe[1]))):(Ct=le.baxis,ct=c(le,de,.5*(qe[0]+Xe[0]),[qe[1],Xe[1]])),nt=1;nt<ct.length;nt++)for(Lt+=Ct.smoothing?"C":"L",ut=0;ut<ct[nt].length;ut++){var Mt=ct[nt][ut];Lt+=[be.c2p(Mt[0]),Fe.c2p(Mt[1])]+" "}return Lt}for(Ve=0,He=null;bt.length;){var ke=Re.edgepaths[Ve][0];for(He&&(dt+=Be(He,ke)),_t=T.smoothopen(Re.edgepaths[Ve].map(ze),Re.smoothing),dt+=St?_t:_t.replace(/^M/,"L"),bt.splice(bt.indexOf(Ve),1),He=Re.edgepaths[Ve][Re.edgepaths[Ve].length-1],ot=-1,tt=0;tt<4;tt++){if(!He){x.log("Missing end?",Ve,Re);break}for(Ut(He)&&!Ye(He)?rt=Ce[1]:Ze(He)?rt=Ce[0]:Pt(He)?rt=Ce[3]:Ye(He)&&(rt=Ce[2]),ht=0;ht<Re.edgepaths.length;ht++){var Pe=Re.edgepaths[ht][0];Math.abs(He[0]-rt[0])<Et?Math.abs(He[0]-Pe[0])<Et&&(Pe[1]-He[1])*(rt[1]-Pe[1])>=0&&(rt=Pe,ot=ht):Math.abs(He[1]-rt[1])<zt?Math.abs(He[1]-Pe[1])<zt&&(Pe[0]-He[0])*(rt[0]-Pe[0])>=0&&(rt=Pe,ot=ht):x.log("endpt to newendpt is not vert. or horz.",He,rt,Pe)}if(ot>=0)break;dt+=Be(He,rt),He=rt}if(ot===Re.edgepaths.length){x.log("unclosed perimeter path");break}Ve=ot,(St=bt.indexOf(Ve)===-1)&&(Ve=bt[0],dt+=Be(He,rt)+"Z",He=null)}for(Ve=0;Ve<Re.paths.length;Ve++)dt+=T.smoothclosed(Re.paths[Ve].map(ze),Re.smoothing);return dt}(0,ce,ve,Ie,xe,Ae,ye,ge);me?A.select(this).attr("d",me).style("stroke","none"):A.select(this).remove()})}(E,S,m,w,X,B,ie,L,C,N,re),function(se,fe,ye,ge,he,ve,Ie){var xe=x.ensureSingle(se,"g","contourlines"),Ae=he.showlines!==!1,Se=he.showlabels,Te=Ae&&Se,Q=t.createLines(xe,Ae||Se,fe),oe=t.createLineClip(xe,Te,ye,ge.trace.uid),ce=se.selectAll("g.contourlabels").data(Se?[0]:[]);if(ce.exit().remove(),ce.enter().append("g").classed("contourlabels",!0),Se){var me=ve.xaxis,Me=ve.yaxis,Re=me._length,Ce=Me._length,ze=[[[0,0],[Re,0],[Re,Ce],[0,Ce]]],le=[];x.clearLocationCache();var de=t.labelFormatter(ye,ge),be=T.tester.append("text").attr("data-notex",1).call(T.font,he.labelfont),Fe={left:0,right:Re,center:Re/2,top:0,bottom:Ce,middle:Ce/2},Ve=Math.sqrt(Re*Re+Ce*Ce),He=o.LABELDISTANCE*Ve/Math.max(1,fe.length/o.LABELINCREASE);Q.each(function(rt){var tt=t.calcTextOpts(rt.level,de,be,ye);A.select(this).selectAll("path").each(function(ot){var ht=this,_t=x.getVisibleSegment(ht,Fe,tt.height/2);if(_t&&(function(Et,zt,Ut,Pt,Ze,Ye){for(var Be,ke=0;ke<Ut.pedgepaths.length;ke++)zt===Ut.pedgepaths[ke]&&(Be=Ut.edgepaths[ke]);if(Be){var Pe=Ze.a[0],qe=Ze.a[Ze.a.length-1],Xe=Ze.b[0],nt=Ze.b[Ze.b.length-1],ut=h(Et,0,1),ct=h(Et,Pt.total,Pt.total-1),Ct=Mt(Be[0],ut),Lt=Pt.total-Mt(Be[Be.length-1],ct);Pt.min<Ct&&(Pt.min=Ct),Pt.max>Lt&&(Pt.max=Lt),Pt.len=Pt.max-Pt.min}function Mt(mt,kt){var wt,Ot=0,It=.1;return(Math.abs(mt[0]-Pe)<It||Math.abs(mt[0]-qe)<It)&&(wt=f(Ze.dxydb_rough(mt[0],mt[1],It)),Ot=Math.max(Ot,Ye*b(kt,wt)/2)),(Math.abs(mt[1]-Xe)<It||Math.abs(mt[1]-nt)<It)&&(wt=f(Ze.dxyda_rough(mt[0],mt[1],It)),Ot=Math.max(Ot,Ye*b(kt,wt)/2)),Ot}}(ht,ot,rt,_t,Ie,tt.height),!(_t.len<(tt.width+tt.height)*o.LABELMIN)))for(var dt=Math.min(Math.ceil(_t.len/He),o.LABELMAX),bt=0;bt<dt;bt++){var St=t.findBestTextLocation(ht,_t,tt,le,Fe);if(!St)break;t.addLabelData(St,tt,le,ze)}})}),be.remove(),t.drawLabels(ce,le,ye,oe,Te?ze:null)}Se&&!Ae&&Q.remove()}(S,z,v,_,U,g,L),T.setClipUrl(S,L._clipPathId,v)}function ie(se){var fe=L.ab2xy(se[0],se[1],!0);return[m.c2p(fe[0]),w.c2p(fe[1])]}})}},64096:function($,R,e){var A=e(50693),k=e(5386).f,l=e(9012),T=e(99181),x=e(1426).extendFlat;$.exports=x({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:x({},l.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:x({},l.showlegend,{dflt:!1})},A("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function($,R,e){var A=e(92770),k=e(71828).isArrayOrTypedArray,l=e(50606).BADNUM,T=e(78803),x=e(71828)._;$.exports=function(d,s){for(var t=s._length,o=new Array(t),r=s.z,n=k(r)&&r.length,a=0;a<t;a++){var i=o[a]={},c=s.lon[a],h=s.lat[a];if(i.lonlat=A(c)&&A(h)?[+c,+h]:[l,l],n){var f=r[a];i.z=A(f)?f:l}}return T(d,s,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),t&&(o[0].t={labels:{lat:x(d,"lat:")+" ",lon:x(d,"lon:")+" "}}),o}},52414:function($,R,e){var A=e(92770),k=e(71828),l=e(7901),T=e(21081),x=e(50606).BADNUM,d=e(18214).makeBlank;$.exports=function(s){var t=s[0].trace,o=t.visible===!0&&t._length!==0,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:d()};if(!o)return r;var n,a=[],i=t.z,c=t.radius,h=k.isArrayOrTypedArray(i)&&i.length,f=k.isArrayOrTypedArray(c);for(n=0;n<s.length;n++){var b=s[n],v=b.lonlat;if(v[0]!==x){var g={};if(h){var y=b.z;g.z=y!==x?y:0}f&&(g.r=A(c[n])&&c[n]>0?+c[n]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:g})}}var p=T.extractOpts(t),m=p.reversescale?T.flipScale(p.colorscale):p.colorscale,w=m[0][1],u=["interpolate",["linear"],["heatmap-density"],0,l.opacity(w)<1?w:l.addOpacity(w,0)];for(n=1;n<m.length;n++)u.push(m[n][0],m[n][1]);var S=["interpolate",["linear"],["get","z"],p.min,0,p.max,1];return k.extendFlat(r.heatmap.paint,{"heatmap-weight":h?S:1/(p.max-p.min),"heatmap-color":u,"heatmap-radius":f?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:a},r.heatmap.layout.visibility="visible",r}},79429:function($,R,e){var A=e(71828),k=e(1586),l=e(64096);$.exports=function(T,x,d,s){function t(a,i){return A.coerce(T,x,l,a,i)}var o=t("lon")||[],r=t("lat")||[],n=Math.min(o.length,r.length);n?(x._length=n,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(T,x,s,t,{prefix:"",cLetter:"z"})):x.visible=!1}},62474:function($){$.exports=function(R,e){return R.lon=e.lon,R.lat=e.lat,R.z=e.z,R}},84684:function($,R,e){var A=e(89298),k=e(28178).hoverPoints,l=e(28178).getExtraText;$.exports=function(T,x,d){var s=k(T,x,d);if(s){var t=s[0],o=t.cd,r=o[0].trace,n=o[t.index];if(delete t.color,"z"in n){var a=t.subplot.mockAxis;t.z=n.z,t.zLabel=A.tickText(a,a.c2l(n.z),"hover").text}return t.extraText=l(r,n,o[0].t.labels),[t]}}},93814:function($,R,e){$.exports={attributes:e(64096),supplyDefaults:e(79429),colorbar:e(61243),formatLabels:e(15636),calc:e(85070),plot:e(7336),hoverPoints:e(84684),eventData:e(62474),getBelow:function(A,k){for(var l=k.getMapLayers(),T=0;T<l.length;T++){var x=l[T],d=x.id;if(x.type==="symbol"&&typeof d=="string"&&d.indexOf("plotly-")===-1)return d}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function($,R,e){var A=e(52414),k=e(77734).traceLayerPrefix;function l(x,d){this.type="densitymapbox",this.subplot=x,this.uid=d,this.sourceId="source-"+d,this.layerList=[["heatmap",k+d+"-heatmap"]],this.below=null}var T=l.prototype;T.update=function(x){var d=this.subplot,s=this.layerList,t=A(x),o=d.belowLookup["trace-"+this.uid];d.map.getSource(this.sourceId).setData(t.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(t,o),this.below=o);for(var r=0;r<s.length;r++){var n=s[r],a=n[0],i=n[1],c=t[a];d.setOptions(i,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&d.setOptions(i,"setPaintProperty",c.paint)}},T._addLayers=function(x,d){for(var s=this.subplot,t=this.layerList,o=this.sourceId,r=0;r<t.length;r++){var n=t[r],a=n[0],i=x[a];s.addLayer({type:a,id:n[1],source:o,layout:i.layout,paint:i.paint},d)}},T._removeLayers=function(){for(var x=this.subplot.map,d=this.layerList,s=d.length-1;s>=0;s--)x.removeLayer(d[s][1])},T.dispose=function(){var x=this.subplot.map;this._removeLayers(),x.removeSource(this.sourceId)},$.exports=function(x,d){var s=d[0].trace,t=new l(x,s.uid),o=t.sourceId,r=A(d),n=t.below=x.belowLookup["trace-"+s.uid];return x.map.addSource(o,{type:"geojson",data:r.geojson}),t._addLayers(r,n),t}},49789:function($,R,e){var A=e(71828);$.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;A.mergeArray(l.text,k,"tx"),A.mergeArray(l.hovertext,k,"htx");var x=l.marker;if(x){A.mergeArray(x.opacity,k,"mo"),A.mergeArray(x.color,k,"mc");var d=x.line;d&&(A.mergeArray(d.color,k,"mlc"),A.mergeArrayCastPositive(d.width,k,"mlw"))}}},1285:function($,R,e){var A,k=e(1486),l=e(82196).line,T=e(9012),x=e(12663).axisHoverFormat,d=e(5386).f,s=e(5386).s,t=e(18517),o=e(1426).extendFlat,r=e(7901);$.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:k.hovertext,hovertemplate:d({},{keys:t.eventDataKeys}),hoverinfo:o({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:o({},k.insidetextanchor,{dflt:"middle"}),textangle:o({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:o({},k.orientation,{}),offset:o({},k.offset,{arrayOk:!1}),width:o({},k.width,{arrayOk:!1}),marker:(A=o({},k.marker),delete A.pattern,A),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:o({},l.color,{dflt:r.defaultLine}),width:o({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup}},9532:function($,R,e){var A=e(89298),k=e(42973),l=e(49789),T=e(66279),x=e(50606).BADNUM;function d(s){return s===x?0:s}$.exports=function(s,t){var o,r,n,a,i,c,h,f,b=A.getFromId(s,t.xaxis||"x"),v=A.getFromId(s,t.yaxis||"y");t.orientation==="h"?(o=b.makeCalcdata(t,"x"),n=v.makeCalcdata(t,"y"),a=k(t,v,"y",n),i=!!t.yperiodalignment,c="y"):(o=v.makeCalcdata(t,"y"),n=b.makeCalcdata(t,"x"),a=k(t,b,"x",n),i=!!t.xperiodalignment,c="x"),r=a.vals;var g,y=Math.min(r.length,o.length),p=new Array(y);for(t._base=[],h=0;h<y;h++){o[h]<0&&(o[h]=x);var m=!1;o[h]!==x&&h+1<y&&o[h+1]!==x&&(m=!0),f=p[h]={p:r[h],s:o[h],cNext:m},t._base[h]=-.5*f.s,i&&(p[h].orig_p=n[h],p[h][c+"End"]=a.ends[h],p[h][c+"Start"]=a.starts[h]),t.ids&&(f.id=String(t.ids[h])),h===0&&(p[0].vTotal=0),p[0].vTotal+=d(f.s),f.begR=d(f.s)/d(p[0].s)}for(h=0;h<y;h++)(f=p[h]).s!==x&&(f.sumR=f.s/p[0].vTotal,f.difR=g!==void 0?f.s/g:1,g=f.s);return l(p,t),T(p,t),p}},18517:function($){$.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function($,R,e){var A=e(11661).setGroupPositions;$.exports=function(k,l){var T,x,d=k._fullLayout,s=k._fullData,t=k.calcdata,o=l.xaxis,r=l.yaxis,n=[],a=[],i=[];for(x=0;x<s.length;x++){var c=s[x],h=c.orientation==="h";c.visible===!0&&c.xaxis===o._id&&c.yaxis===r._id&&c.type==="funnel"&&(T=t[x],h?i.push(T):a.push(T),n.push(T))}var f={mode:d.funnelmode,norm:d.funnelnorm,gap:d.funnelgap,groupgap:d.funnelgroupgap};for(A(k,o,r,a,f),A(k,r,o,i,f),x=0;x<n.length;x++){T=n[x];for(var b=0;b<T.length;b++)b+1<T.length&&(T[b].nextP0=T[b+1].p0,T[b].nextS0=T[b+1].s0,T[b].nextP1=T[b+1].p1,T[b].nextS1=T[b+1].s1)}}},26199:function($,R,e){var A=e(71828),k=e(26125),l=e(90769).handleText,T=e(67513),x=e(73927),d=e(1285),s=e(7901);$.exports={supplyDefaults:function(t,o,r,n){function a(f,b){return A.coerce(t,o,d,f,b)}if(T(t,o,n,a)){x(t,o,n,a),a("xhoverformat"),a("yhoverformat"),a("orientation",o.y&&!o.x?"v":"h"),a("offset"),a("width");var i=a("text");a("hovertext"),a("hovertemplate");var c=a("textposition");l(t,o,n,a,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition==="none"||o.texttemplate||a("textinfo",Array.isArray(i)?"text+value":"value");var h=a("marker.color",r);a("marker.line.color",s.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",function(f){var b=A.isArrayOrTypedArray(f)?"#000":f;return s.addOpacity(b,.5*s.opacity(b))}(h)),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash")))}else o.visible=!1},crossTraceDefaults:function(t,o){var r,n;function a(c){return A.coerce(n._input,n,d,c)}if(o.funnelmode==="group")for(var i=0;i<t.length;i++)r=(n=t[i])._input,k(r,n,o,a)}}},34598:function($){$.exports=function(R,e){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(R.percentInitial=e.percentInitial),"percentPrevious"in e&&(R.percentPrevious=e.percentPrevious),"percentTotal"in e&&(R.percentTotal=e.percentTotal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},63341:function($,R,e){var A=e(7901).opacity,k=e(95423).hoverOnBars,l=e(71828).formatPercent;$.exports=function(T,x,d,s,t){var o=k(T,x,d,s,t);if(o){var r=o.cd,n=r[0].trace,a=n.orientation==="h",i=r[o.index];o[(a?"x":"y")+"LabelVal"]=i.s,o.percentInitial=i.begR,o.percentInitialLabel=l(i.begR,1),o.percentPrevious=i.difR,o.percentPreviousLabel=l(i.difR,1),o.percentTotal=i.sumR,o.percentTotalLabel=l(i.sumR,1);var c=i.hi||n.hoverinfo,h=[];if(c&&c!=="none"&&c!=="skip"){var f=c==="all",b=c.split("+"),v=function(g){return f||b.indexOf(g)!==-1};v("percent initial")&&h.push(o.percentInitialLabel+" of initial"),v("percent previous")&&h.push(o.percentPreviousLabel+" of previous"),v("percent total")&&h.push(o.percentTotalLabel+" of total")}return o.extraText=h.join("<br>"),o.color=function(g,y){var p=g.marker,m=y.mc||p.color,w=y.mlc||p.line.color,u=y.mlw||p.line.width;return A(m)?m:A(w)&&u?w:void 0}(n,i),[o]}}},51759:function($,R,e){$.exports={attributes:e(1285),layoutAttributes:e(10440),supplyDefaults:e(26199).supplyDefaults,crossTraceDefaults:e(26199).crossTraceDefaults,supplyLayoutDefaults:e(93138),calc:e(9532),crossTraceCalc:e(8984),plot:e(80461),style:e(68266).style,hoverPoints:e(63341),eventData:e(34598),selectPoints:e(81974),moduleType:"trace",name:"funnel",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function($){$.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function($,R,e){var A=e(71828),k=e(10440);$.exports=function(l,T,x){var d=!1;function s(r,n){return A.coerce(l,T,k,r,n)}for(var t=0;t<x.length;t++){var o=x[t];if(o.visible&&o.type==="funnel"){d=!0;break}}d&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},80461:function($,R,e){var A=e(39898),k=e(71828),l=e(91424),T=e(50606).BADNUM,x=e(17295),d=e(72597).clearMinTextSize;function s(t,o,r,n){var a=[],i=[],c=n?o:r,h=n?r:o;return a[0]=c.c2p(t.s0,!0),i[0]=h.c2p(t.p0,!0),a[1]=c.c2p(t.s1,!0),i[1]=h.c2p(t.p1,!0),a[2]=c.c2p(t.nextS0,!0),i[2]=h.c2p(t.nextP0,!0),a[3]=c.c2p(t.nextS1,!0),i[3]=h.c2p(t.nextP1,!0),n?[a,i]:[i,a]}$.exports=function(t,o,r,n){var a=t._fullLayout;d("funnel",a),function(i,c,h,f){var b=c.xaxis,v=c.yaxis;k.makeTraceGroups(f,h,"trace bars").each(function(g){var y=A.select(this),p=g[0].trace,m=k.ensureSingle(y,"g","regions");if(p.connector&&p.connector.visible){var w=p.orientation==="h",u=m.selectAll("g.region").data(k.identity);u.enter().append("g").classed("region",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=s(_,b,v,w),C=L[0],P=L[1],I="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&C[2]!==T&&P[2]!==T&&C[3]!==T&&P[3]!==T&&(I+=w?"M"+C[0]+","+P[1]+"L"+C[2]+","+P[2]+"H"+C[3]+"L"+C[1]+","+P[1]+"Z":"M"+C[1]+","+P[1]+"L"+C[2]+","+P[3]+"V"+P[2]+"L"+C[1]+","+P[0]+"Z"),I===""&&(I="M0,0Z"),k.ensureSingle(A.select(this),"path").attr("d",I).call(l.setClipUrl,c.layerClipId,i)}})}else m.remove()})}(t,o,r,n),function(i,c,h,f){var b=c.xaxis,v=c.yaxis;k.makeTraceGroups(f,h,"trace bars").each(function(g){var y=A.select(this),p=g[0].trace,m=k.ensureSingle(y,"g","lines");if(p.connector&&p.connector.visible&&p.connector.line.width){var w=p.orientation==="h",u=m.selectAll("g.line").data(k.identity);u.enter().append("g").classed("line",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=s(_,b,v,w),C=L[0],P=L[1],I="";C[3]!==void 0&&P[3]!==void 0&&(w?(I+="M"+C[0]+","+P[1]+"L"+C[2]+","+P[2],I+="M"+C[1]+","+P[1]+"L"+C[3]+","+P[2]):(I+="M"+C[1]+","+P[1]+"L"+C[2]+","+P[3],I+="M"+C[1]+","+P[0]+"L"+C[2]+","+P[2])),I===""&&(I="M0,0Z"),k.ensureSingle(A.select(this),"path").attr("d",I).call(l.setClipUrl,c.layerClipId,i)}})}else m.remove()})}(t,o,r,n),x.plot(t,o,r,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},68266:function($,R,e){var A=e(39898),k=e(91424),l=e(7901),T=e(37822).DESELECTDIM,x=e(16688),d=e(72597).resizeText,s=x.styleTextPoints;$.exports={style:function(t,o,r){var n=r||A.select(t).selectAll("g.funnellayer").selectAll("g.trace");d(t,n,"funnel"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=A.select(this),c=a[0].trace;i.selectAll(".point > path").each(function(h){if(!h.isBlank){var f=c.marker;A.select(this).call(l.fill,h.mc||f.color).call(l.stroke,h.mlc||f.line.color).call(k.dashLine,f.line.dash,h.mlw||f.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),s(i,c,t),i.selectAll(".regions").each(function(){A.select(this).selectAll("path").style("stroke-width",0).call(l.fill,c.connector.fillcolor)}),i.selectAll(".lines").each(function(){var h=c.connector.line;k.lineGroupStyle(A.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},86807:function($,R,e){var A=e(34e3),k=e(9012),l=e(27670).Y,T=e(5386).f,x=e(5386).s,d=e(1426).extendFlat;$.exports={labels:A.labels,label0:A.label0,dlabel:A.dlabel,values:A.values,marker:{colors:A.marker.colors,line:{color:d({},A.marker.line.color,{dflt:null}),width:d({},A.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:A.text,hovertext:A.hovertext,scalegroup:d({},A.scalegroup,{}),textinfo:d({},A.textinfo,{flags:["label","text","value","percent"]}),texttemplate:x({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:d({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:d({},A.textposition,{values:["inside","none"],dflt:"inside"}),textfont:A.textfont,insidetextfont:A.insidetextfont,title:{text:A.title.text,font:A.title.font,position:d({},A.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:l({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function($,R,e){var A=e(74875);R.name="funnelarea",R.plot=function(k,l,T,x){A.plotBasePlot(R.name,k,l,T,x)},R.clean=function(k,l,T,x){A.cleanBasePlot(R.name,k,l,T,x)}},89574:function($,R,e){var A=e(32354);$.exports={calc:function(k,l){return A.calc(k,l)},crossTraceCalc:function(k){A.crossTraceCalc(k,{type:"funnelarea"})}}},86282:function($,R,e){var A=e(71828),k=e(86807),l=e(27670).c,T=e(90769).handleText,x=e(37434).handleLabelsAndValues;$.exports=function(d,s,t,o){function r(g,y){return A.coerce(d,s,k,g,y)}var n=r("labels"),a=r("values"),i=x(n,a),c=i.len;if(s._hasLabels=i.hasLabels,s._hasValues=i.hasValues,!s._hasLabels&&s._hasValues&&(r("label0"),r("dlabel")),c){s._length=c,r("marker.line.width")&&r("marker.line.color",o.paper_bgcolor),r("marker.colors"),r("scalegroup");var h,f=r("text"),b=r("texttemplate");if(b||(h=r("textinfo",Array.isArray(f)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),b||h&&h!=="none"){var v=r("textposition");T(d,s,o,r,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}l(s,o,r),r("title.text")&&(r("title.position"),A.coerceFont(r,"title.font",o.font)),r("aspectratio"),r("baseratio")}else s.visible=!1}},10421:function($,R,e){$.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(6452),categories:["pie-like","funnelarea","showLegend"],attributes:e(86807),layoutAttributes:e(80097),supplyDefaults:e(86282),supplyLayoutDefaults:e(57402),calc:e(89574).calc,crossTraceCalc:e(89574).crossTraceCalc,plot:e(79187),style:e(71858),styleOne:e(63463),meta:{}}},80097:function($,R,e){var A=e(92774).hiddenlabels;$.exports={hiddenlabels:A,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function($,R,e){var A=e(71828),k=e(80097);$.exports=function(l,T){function x(d,s){return A.coerce(l,T,k,d,s)}x("hiddenlabels"),x("funnelareacolorway",T.colorway),x("extendfunnelareacolors")}},79187:function($,R,e){var A=e(39898),k=e(91424),l=e(71828),T=l.strScale,x=l.strTranslate,d=e(63893),s=e(17295).toMoveInsideBar,t=e(72597),o=t.recordMinTextSize,r=t.clearMinTextSize,n=e(53581),a=e(14575),i=a.attachFxHandlers,c=a.determineInsideTextFont,h=a.layoutAreas,f=a.prerenderTitles,b=a.positionTitleOutside,v=a.formatSliceLabel;function g(y,p){return"l"+(p[0]-y[0])+","+(p[1]-y[1])}$.exports=function(y,p){var m=y._context.staticPlot,w=y._fullLayout;r("funnelarea",w),f(p,y),h(p,w._size),l.makeTraceGroups(w._funnelarealayer,p,"trace").each(function(u){var S=A.select(this),_=u[0],E=_.trace;(function(L){if(L.length){var C=L[0],P=C.trace,I=P.aspectratio,U=P.baseratio;U>.999&&(U=.999);var z,H,F,N=Math.pow(U,2),B=C.vTotal,j=B,K=B*N/(1-N)/B,G=[];for(G.push(Ae()),H=L.length-1;H>-1;H--)if(!(F=L[H]).hidden){var V=F.v/j;K+=V,G.push(Ae())}var W=1/0,J=-1/0;for(H=0;H<G.length;H++)z=G[H],W=Math.min(W,z[1]),J=Math.max(J,z[1]);for(H=0;H<G.length;H++)G[H][1]-=(J+W)/2;var X=G[G.length-1][0],ee=C.r,re=(J-W)/2,ie=ee/X,se=ee/re*I;for(C.r=se*re,H=0;H<G.length;H++)G[H][0]*=ie,G[H][1]*=se;var fe,ye,ge=[-(z=G[0])[0],z[1]],he=[z[0],z[1]],ve=0;for(H=L.length-1;H>-1;H--)if(!(F=L[H]).hidden){var Ie=G[ve+=1][0],xe=G[ve][1];F.TL=[-Ie,xe],F.TR=[Ie,xe],F.BL=ge,F.BR=he,F.pxmid=(fe=F.TR,ye=F.BR,[.5*(fe[0]+ye[0]),.5*(fe[1]+ye[1])]),ge=F.TL,he=F.TR}}function Ae(){var Se,Te={x:Se=Math.sqrt(K),y:-Se};return[Te.x,Te.y]}})(u),S.each(function(){var L=A.select(this).selectAll("g.slice").data(u);L.enter().append("g").classed("slice",!0),L.exit().remove(),L.each(function(P,I){if(P.hidden)A.select(this).selectAll("path,g").remove();else{P.pointNumber=P.i,P.curveNumber=E.index;var U=_.cx,z=_.cy,H=A.select(this),F=H.selectAll("path.surface").data([P]);F.enter().append("path").classed("surface",!0).style({"pointer-events":m?"none":"all"}),H.call(i,y,u);var N="M"+(U+P.TR[0])+","+(z+P.TR[1])+g(P.TR,P.BR)+g(P.BR,P.BL)+g(P.BL,P.TL)+"Z";F.attr("d",N),v(y,P,_);var B=n.castOption(E.textposition,P.pts),j=H.selectAll("g.slicetext").data(P.text&&B!=="none"?[0]:[]);j.enter().append("g").classed("slicetext",!0),j.exit().remove(),j.each(function(){var K=l.ensureSingle(A.select(this),"text","",function(ie){ie.attr("data-notex",1)}),G=l.ensureUniformFontSize(y,c(E,P,w.font));K.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,G).call(d.convertToTspans,y);var V,W,J,X=k.bBox(K.node()),ee=Math.min(P.BL[1],P.BR[1])+z,re=Math.max(P.TL[1],P.TR[1])+z;W=Math.max(P.TL[0],P.BL[0])+U,J=Math.min(P.TR[0],P.BR[0])+U,(V=s(W,J,ee,re,X,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=G.size,o(E.type,V,w),u[I].transform=V,l.setTransormAndDisplay(K,V)})}});var C=A.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var P=l.ensureSingle(A.select(this),"text","",function(z){z.attr("data-notex",1)}),I=E.title.text;E._meta&&(I=l.templateString(I,E._meta)),P.text(I).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(d.convertToTspans,y);var U=b(_,w._size);P.attr("transform",x(U.x,U.y)+T(Math.min(1,U.scale))+x(U.tx,U.ty))})})})}},71858:function($,R,e){var A=e(39898),k=e(63463),l=e(72597).resizeText;$.exports=function(T){var x=T._fullLayout._funnelarealayer.selectAll(".trace");l(T,x,"funnelarea"),x.each(function(d){var s=d[0].trace,t=A.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(o){A.select(this).call(k,o,s)})})}},21606:function($,R,e){var A=e(82196),k=e(9012),l=e(41940),T=e(12663).axisHoverFormat,x=e(5386).f,d=e(5386).s,s=e(50693),t=e(1426).extendFlat;$.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},A.x,{impliedEdits:{xtype:"array"}}),x0:t({},A.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},A.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},A.y,{impliedEdits:{ytype:"array"}}),y0:t({},A.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},A.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},A.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},A.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},A.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},A.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},A.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},A.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:x(),texttemplate:d({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:l({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},90757:function($,R,e){var A=e(73972),k=e(71828),l=e(89298),T=e(42973),x=e(17562),d=e(78803),s=e(68296),t=e(4742),o=e(824),r=e(43907),n=e(70769),a=e(50606).BADNUM;function i(c){for(var h=[],f=c.length,b=0;b<f;b++){var v=c[b];v!==a&&h.push(v)}return h}$.exports=function(c,h){var f,b,v,g,y,p,m,w,u,S,_,E=l.getFromId(c,h.xaxis||"x"),L=l.getFromId(c,h.yaxis||"y"),C=A.traceIs(h,"contour"),P=A.traceIs(h,"histogram"),I=A.traceIs(h,"gl2d"),U=C?"best":h.zsmooth;if(E._minDtick=0,L._minDtick=0,P)g=(_=x(c,h)).orig_x,f=_.x,b=_.x0,v=_.dx,w=_.orig_y,y=_.y,p=_.y0,m=_.dy,u=_.z;else{var z=h.z;k.isArray1D(z)?(s(h,E,L,"x","y",["z"]),f=h._x,y=h._y,z=h._z):(g=h.x?E.makeCalcdata(h,"x"):[],w=h.y?L.makeCalcdata(h,"y"):[],f=T(h,E,"x",g).vals,y=T(h,L,"y",w).vals,h._x=f,h._y=y),b=h.x0,v=h.dx,p=h.y0,m=h.dy,u=t(z,h,E,L)}function H(re){U=h._input.zsmooth=h.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+re)}if((E.rangebreaks||L.rangebreaks)&&(u=function(re,ie,se){for(var fe=[],ye=-1,ge=0;ge<se.length;ge++)if(ie[ge]!==a){fe[++ye]=[];for(var he=0;he<se[ge].length;he++)re[he]!==a&&fe[ye].push(se[ge][he])}return fe}(f,y,u),P||(f=i(f),y=i(y),h._x=f,h._y=y)),P||!C&&!h.connectgaps||(h._emptypoints=r(u),o(u,h._emptypoints)),U==="fast"){if(E.type==="log"||L.type==="log")H("log axis found");else if(!P){if(f.length){var F=(f[f.length-1]-f[0])/(f.length-1),N=Math.abs(F/100);for(S=0;S<f.length-1;S++)if(Math.abs(f[S+1]-f[S]-F)>N){H("x scale is not linear");break}}if(y.length&&U==="fast"){var B=(y[y.length-1]-y[0])/(y.length-1),j=Math.abs(B/100);for(S=0;S<y.length-1;S++)if(Math.abs(y[S+1]-y[S]-B)>j){H("y scale is not linear");break}}}}var K=k.maxRowLength(u),G=h.xtype==="scaled"?"":f,V=n(h,G,b,v,K,E),W=h.ytype==="scaled"?"":y,J=n(h,W,p,m,u.length,L);I||(h._extremes[E._id]=l.findExtremes(E,V),h._extremes[L._id]=l.findExtremes(L,J));var X={x:V,y:J,z:u,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&g&&(X.orig_x=g),h.yperiodalignment&&w&&(X.orig_y=w),G&&G.length===V.length-1&&(X.xCenter=G),W&&W.length===J.length-1&&(X.yCenter=W),P&&(X.xRanges=_.xRanges,X.yRanges=_.yRanges,X.pts=_.pts),C||d(c,h,{vals:u,cLetter:"z"}),C&&h.contours&&h.contours.coloring==="heatmap"){var ee={type:h.type==="contour"?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};X.xfill=n(ee,G,b,v,K,E),X.yfill=n(ee,W,p,m,u.length,L)}return[X]}},4742:function($,R,e){var A=e(92770),k=e(71828),l=e(50606).BADNUM;$.exports=function(T,x,d,s){var t,o,r,n,a,i;function c(y){if(A(y))return+y}if(x&&x.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(t===0)return!1;r=function(y){return y.length},n=function(y,p,m){return(y[m]||[])[p]}}else t=T.length,r=function(y,p){return y[p].length},n=function(y,p,m){return(y[p]||[])[m]};var h=function(y,p,m){return p===l||m===l?l:n(y,p,m)};function f(y){if(x&&x.type!=="carpet"&&x.type!=="contourcarpet"&&y&&y.type==="category"&&x["_"+y._id.charAt(0)].length){var p=y._id.charAt(0),m={},w=x["_"+p+"CategoryMap"]||x[p];for(a=0;a<w.length;a++)m[w[a]]=a;return function(u){var S=m[y._categories[u]];return S+1?S:l}}return k.identity}var b=f(d),v=f(s);s&&s.type==="category"&&(t=s._categories.length);var g=new Array(t);for(a=0;a<t;a++)for(o=d&&d.type==="category"?d._categories.length:r(T,a),g[a]=new Array(o),i=0;i<o;i++)g[a][i]=c(h(T,v(a),b(i)));return g}},61243:function($){$.exports={min:"zmin",max:"zmax"}},68296:function($,R,e){var A=e(71828),k=e(50606).BADNUM,l=e(42973);$.exports=function(T,x,d,s,t,o){var r=T._length,n=x.makeCalcdata(T,s),a=d.makeCalcdata(T,t);n=l(T,x,s,n).vals,a=l(T,d,t,a).vals;var i,c,h,f,b=T.text,v=b!==void 0&&A.isArray1D(b),g=T.hovertext,y=g!==void 0&&A.isArray1D(g),p=A.distinctVals(n),m=p.vals,w=A.distinctVals(a),u=w.vals,S=[],_=u.length,E=m.length;for(i=0;i<o.length;i++)S[i]=A.init2dArray(_,E);v&&(h=A.init2dArray(_,E)),y&&(f=A.init2dArray(_,E));var L=A.init2dArray(_,E);for(i=0;i<r;i++)if(n[i]!==k&&a[i]!==k){var C=A.findBin(n[i]+p.minDiff/2,m),P=A.findBin(a[i]+w.minDiff/2,u);for(c=0;c<o.length;c++){var I=T[o[c]];S[c][P][C]=I[i],L[P][C]=i}v&&(h[P][C]=b[i]),y&&(f[P][C]=g[i])}for(T["_"+s]=m,T["_"+t]=u,c=0;c<o.length;c++)T["_"+o[c]]=S[c];v&&(T._text=h),y&&(T._hovertext=f),x&&x.type==="category"&&(T["_"+s+"CategoryMap"]=m.map(function(U){return x._categories[U]})),d&&d.type==="category"&&(T["_"+t+"CategoryMap"]=u.map(function(U){return d._categories[U]})),T._after2before=L}},76382:function($,R,e){var A=e(71828),k=e(67684),l=e(58623),T=e(73927),x=e(49901),d=e(1586),s=e(21606);$.exports=function(t,o,r,n){function a(i,c){return A.coerce(t,o,s,i,c)}k(t,o,a,n)?(T(t,o,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),l(a,n),x(t,o,a,n),a("hoverongaps"),a("connectgaps",A.isArray1D(o.z)&&o.zsmooth!==!1),d(t,o,n,a,{prefix:"",cLetter:"z"})):o.visible=!1}},43907:function($,R,e){var A=e(71828).maxRowLength;$.exports=function(k){var l,T,x,d,s,t,o,r,n=[],a={},i=[],c=k[0],h=[],f=[0,0,0],b=A(k);for(T=0;T<k.length;T++)for(l=h,h=c,c=k[T+1]||[],x=0;x<b;x++)h[x]===void 0&&((t=(h[x-1]!==void 0?1:0)+(h[x+1]!==void 0?1:0)+(l[x]!==void 0?1:0)+(c[x]!==void 0?1:0))?(T===0&&t++,x===0&&t++,T===k.length-1&&t++,x===h.length-1&&t++,t<4&&(a[[T,x]]=[T,x,t]),n.push([T,x,t])):i.push([T,x]));for(;i.length;){for(o={},r=!1,s=i.length-1;s>=0;s--)(t=((a[[(T=(d=i[s])[0])-1,x=d[1]]]||f)[2]+(a[[T+1,x]]||f)[2]+(a[[T,x-1]]||f)[2]+(a[[T,x+1]]||f)[2])/20)&&(o[d]=[T,x,t],i.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(d in o)a[d]=o[d],n.push(o[d])}return n.sort(function(v,g){return g[2]-v[2]})}},46248:function($,R,e){var A=e(30211),k=e(71828),l=e(89298),T=e(21081).extractOpts;$.exports=function(x,d,s,t,o){o||(o={});var r,n,a,i,c=o.isContour,h=x.cd[0],f=h.trace,b=x.xa,v=x.ya,g=h.x,y=h.y,p=h.z,m=h.xCenter,w=h.yCenter,u=h.zmask,S=f.zhoverformat,_=g,E=y;if(x.index!==!1){try{a=Math.round(x.index[1]),i=Math.round(x.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",x.index)}if(a<0||a>=p[0].length||i<0||i>p.length)return}else{if(A.inbox(d-g[0],d-g[g.length-1],0)>0||A.inbox(s-y[0],s-y[y.length-1],0)>0)return;if(c){var L;for(_=[2*g[0]-g[1]],L=1;L<g.length;L++)_.push((g[L]+g[L-1])/2);for(_.push([2*g[g.length-1]-g[g.length-2]]),E=[2*y[0]-y[1]],L=1;L<y.length;L++)E.push((y[L]+y[L-1])/2);E.push([2*y[y.length-1]-y[y.length-2]])}a=Math.max(0,Math.min(_.length-2,k.findBin(d,_))),i=Math.max(0,Math.min(E.length-2,k.findBin(s,E)))}var C,P,I=b.c2p(g[a]),U=b.c2p(g[a+1]),z=v.c2p(y[i]),H=v.c2p(y[i+1]);c?(C=h.orig_x||g,P=h.orig_y||y,U=I,r=C[a],H=z,n=P[i]):(C=h.orig_x||m||g,P=h.orig_y||w||y,r=m?C[a]:(C[a]+C[a+1])/2,n=w?P[i]:(P[i]+P[i+1])/2,b&&b.type==="category"&&(r=g[a]),v&&v.type==="category"&&(n=y[i]),f.zsmooth&&(I=U=b.c2p(r),z=H=v.c2p(n)));var F=p[i][a];if(u&&!u[i][a]&&(F=void 0),F!==void 0||f.hoverongaps){var N;Array.isArray(h.hovertext)&&Array.isArray(h.hovertext[i])?N=h.hovertext[i][a]:Array.isArray(h.text)&&Array.isArray(h.text[i])&&(N=h.text[i][a]);var B=T(f),j={type:"linear",range:[B.min,B.max],hoverformat:S,_separators:b._separators,_numFormat:b._numFormat},K=l.tickText(j,F,"hover").text;return[k.extendFlat(x,{index:f._after2before?f._after2before[i][a]:[i,a],distance:x.maxHoverDistance,spikeDistance:x.maxSpikeDistance,x0:I,x1:U,y0:z,y1:H,xLabelVal:r,yLabelVal:n,zLabelVal:F,zLabel:K,text:N})]}}},92165:function($,R,e){$.exports={attributes:e(21606),supplyDefaults:e(76382),calc:e(90757),plot:e(50347),colorbar:e(61243),style:e(70035),hoverPoints:e(46248),moduleType:"trace",name:"heatmap",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function($,R,e){var A=e(71828),k=[[-1,0],[1,0],[0,-1],[0,1]];function l(x){return .5-.25*Math.min(1,.5*x)}function T(x,d,s){var t,o,r,n,a,i,c,h,f,b,v,g,y,p=0;for(n=0;n<d.length;n++){for(o=(t=d[n])[0],r=t[1],v=x[o][r],b=0,f=0,a=0;a<4;a++)(c=x[o+(i=k[a])[0]])&&(h=c[r+i[1]])!==void 0&&(b===0?g=y=h:(g=Math.min(g,h),y=Math.max(y,h)),f++,b+=h);if(f===0)throw"iterateInterp2d order is wrong: no defined neighbors";x[o][r]=b/f,v===void 0?f<4&&(p=1):(x[o][r]=(1+s)*x[o][r]-s*v,y>g&&(p=Math.max(p,Math.abs(x[o][r]-v)/(y-g))))}return p}$.exports=function(x,d){var s,t=1;for(T(x,d),s=0;s<d.length&&!(d[s][2]<4);s++);for(d=d.slice(s),s=0;s<100&&t>.01;s++)t=T(x,d,l(t));return t>.01&&A.log("interp2d didn't converge quickly",t),x}},58623:function($,R,e){var A=e(71828);$.exports=function(k,l){k("texttemplate");var T=A.extendFlat({},l.font,{color:"auto",size:"auto"});A.coerceFont(k,"textfont",T)}},70769:function($,R,e){var A=e(73972),k=e(71828).isArrayOrTypedArray;$.exports=function(l,T,x,d,s,t){var o,r,n,a=[],i=A.traceIs(l,"contour"),c=A.traceIs(l,"histogram"),h=A.traceIs(l,"gl2d");if(k(T)&&T.length>1&&!c&&t.type!=="category"){var f=T.length;if(!(f<=s))return i?T.slice(0,s):T.slice(0,s+1);if(i||h)a=T.slice(0,s);else if(s===1)a=[T[0]-.5,T[0]+.5];else{for(a=[1.5*T[0]-.5*T[1]],n=1;n<f;n++)a.push(.5*(T[n-1]+T[n]));a.push(1.5*T[f-1]-.5*T[f-2])}if(f<s){var b=a[a.length-1],v=b-a[a.length-2];for(n=f;n<s;n++)b+=v,a.push(b)}}else{var g=l[t._id.charAt(0)+"calendar"];for(o=c?t.r2c(x,0,g):k(T)&&T.length===1?T[0]:x===void 0?0:(t.type==="log"?t.d2c:t.r2c)(x,0,g),r=d||1,n=i||h?0:-.5;n<s;n++)a.push(o+r*n)}return a}},50347:function($,R,e){var A=e(39898),k=e(84267),l=e(73972),T=e(91424),x=e(89298),d=e(71828),s=e(63893),t=e(8225),o=e(7901),r=e(21081).extractOpts,n=e(21081).makeColorScaleFuncFromTrace,a=e(77922),i=e(18783).LINE_SPACING,c="heatmap-label";function h(y){return y.selectAll("g."+c)}function f(y){h(y).remove()}function b(y,p){var m=p.length-2,w=d.constrain(d.findBin(y,p),0,m),u=p[w],S=p[w+1],_=d.constrain(w+(y-u)/(S-u)-.5,0,m),E=Math.round(_),L=Math.abs(_-E);return _&&_!==m&&L?{bin0:E,frac:L,bin1:Math.round(E+L/(_-E))}:{bin0:E,bin1:E,frac:0}}function v(y,p){var m=p.length-1,w=d.constrain(d.findBin(y,p),0,m),u=p[w],S=(y-u)/(p[w+1]-u)||0;return S<=0?{bin0:w,bin1:w,frac:0}:S<.5?{bin0:w,bin1:w+1,frac:S}:{bin0:w+1,bin1:w,frac:1-S}}function g(y,p,m){y[p]=m[0],y[p+1]=m[1],y[p+2]=m[2],y[p+3]=Math.round(255*m[3])}$.exports=function(y,p,m,w){var u=p.xaxis,S=p.yaxis;d.makeTraceGroups(w,m,"hm").each(function(_){var E,L,C,P,I,U,z,H,F=A.select(this),N=_[0],B=N.trace,j=B.xgap||0,K=B.ygap||0,G=N.z,V=N.x,W=N.y,J=N.xCenter,X=N.yCenter,ee=l.traceIs(B,"contour"),re=ee?"best":B.zsmooth,ie=G.length,se=d.maxRowLength(G),fe=!1,ye=!1;for(U=0;E===void 0&&U<V.length-1;)E=u.c2p(V[U]),U++;for(U=V.length-1;L===void 0&&U>0;)L=u.c2p(V[U]),U--;for(L<E&&(C=L,L=E,E=C,fe=!0),U=0;P===void 0&&U<W.length-1;)P=S.c2p(W[U]),U++;for(U=W.length-1;I===void 0&&U>0;)I=S.c2p(W[U]),U--;if(I<P&&(C=P,P=I,I=C,ye=!0),ee&&(J=V,X=W,V=N.xfill,W=N.yfill),re!=="fast"){var ge=re==="best"?0:.5;E=Math.max(-ge*u._length,E),L=Math.min((1+ge)*u._length,L),P=Math.max(-ge*S._length,P),I=Math.min((1+ge)*S._length,I)}var he,ve,Ie=Math.round(L-E),xe=Math.round(I-P);if(Ie<=0||xe<=0)return F.selectAll("image").data([]).exit().remove(),void f(F);re==="fast"?(he=se,ve=ie):(he=Ie,ve=xe);var Ae=document.createElement("canvas");Ae.width=he,Ae.height=ve;var Se,Te,Q=Ae.getContext("2d"),oe=n(B,{noNumericCheck:!0,returnArray:!0});re==="fast"?(Se=fe?function(Yn){return se-1-Yn}:d.identity,Te=ye?function(Yn){return ie-1-Yn}:d.identity):(Se=function(Yn){return d.constrain(Math.round(u.c2p(V[Yn])-E),0,Ie)},Te=function(Yn){return d.constrain(Math.round(S.c2p(W[Yn])-P),0,xe)});var ce,me,Me,Re,Ce=Te(0),ze=[Ce,Ce],le=fe?0:1,de=ye?0:1,be=0,Fe=0,Ve=0,He=0;function rt(Yn,Vn){if(Yn!==void 0){var ur=oe(Yn);return ur[0]=Math.round(ur[0]),ur[1]=Math.round(ur[1]),ur[2]=Math.round(ur[2]),be+=Vn,Fe+=ur[0]*Vn,Ve+=ur[1]*Vn,He+=ur[2]*Vn,ur}return[0,0,0,0]}function tt(Yn,Vn,ur,Gt){var tn=Yn[ur.bin0];if(tn===void 0)return rt(void 0,1);var In,_n=Yn[ur.bin1],Sn=Vn[ur.bin0],jn=Vn[ur.bin1],qn=_n-tn||0,ar=Sn-tn||0;return In=_n===void 0?jn===void 0?0:Sn===void 0?2*(jn-tn):2*(2*jn-Sn-tn)/3:jn===void 0?Sn===void 0?0:2*(2*tn-_n-Sn)/3:Sn===void 0?2*(2*jn-_n-tn)/3:jn+tn-_n-Sn,rt(tn+ur.frac*qn+Gt.frac*(ar+ur.frac*In))}if(re){var ot,ht=0;try{ot=new Uint8Array(Ie*xe*4)}catch{ot=new Array(Ie*xe*4)}if(re==="best"){var _t,dt,bt,St=J||V,Et=X||W,zt=new Array(St.length),Ut=new Array(Et.length),Pt=new Array(Ie),Ze=J?v:b,Ye=X?v:b;for(U=0;U<St.length;U++)zt[U]=Math.round(u.c2p(St[U])-E);for(U=0;U<Et.length;U++)Ut[U]=Math.round(S.c2p(Et[U])-P);for(U=0;U<Ie;U++)Pt[U]=Ze(U,zt);for(z=0;z<xe;z++)for(dt=G[(_t=Ye(z,Ut)).bin0],bt=G[_t.bin1],U=0;U<Ie;U++,ht+=4)g(ot,ht,Re=tt(dt,bt,Pt[U],_t))}else for(z=0;z<ie;z++)for(Me=G[z],ze=Te(z),U=0;U<Ie;U++)Re=rt(Me[U],1),g(ot,ht=4*(ze*Ie+Se(U)),Re);var Be=Q.createImageData(Ie,xe);try{Be.data.set(ot)}catch{var ke=Be.data,Pe=ke.length;for(z=0;z<Pe;z++)ke[z]=ot[z]}Q.putImageData(Be,0,0)}else{var qe=Math.floor(j/2),Xe=Math.floor(K/2);for(z=0;z<ie;z++)if(Me=G[z],ze.reverse(),ze[de]=Te(z+1),ze[0]!==ze[1]&&ze[0]!==void 0&&ze[1]!==void 0)for(ce=[me=Se(0),me],U=0;U<se;U++)ce.reverse(),ce[le]=Se(U+1),ce[0]!==ce[1]&&ce[0]!==void 0&&ce[1]!==void 0&&(Re=rt(Me[U],(ce[1]-ce[0])*(ze[1]-ze[0])),Q.fillStyle="rgba("+Re.join(",")+")",Q.fillRect(ce[0]+qe,ze[0]+Xe,ce[1]-ce[0]-j,ze[1]-ze[0]-K))}Fe=Math.round(Fe/be),Ve=Math.round(Ve/be),He=Math.round(He/be);var nt=k("rgb("+Fe+","+Ve+","+He+")");y._hmpixcount=(y._hmpixcount||0)+be,y._hmlumcount=(y._hmlumcount||0)+be*nt.getLuminance();var ut=F.selectAll("image").data(_);ut.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),ut.attr({height:xe,width:Ie,x:E,y:P,"xlink:href":Ae.toDataURL("image/png")}),f(F);var ct=B.texttemplate;if(ct){var Ct=r(B),Lt={type:"linear",range:[Ct.min,Ct.max],_separators:u._separators,_numFormat:u._numFormat},Mt=B.type==="histogram2dcontour",mt=B.type==="contour",kt=mt?ie-1:ie,wt=mt?1:0,Ot=mt?se-1:se,It=[];for(U=mt?1:0;U<kt;U++){var Nt;if(mt)Nt=N.y[U];else if(Mt){if(U===0||U===ie-1)continue;Nt=N.y[U]}else if(N.yCenter)Nt=N.yCenter[U];else{if(U+1===ie&&N.y[U+1]===void 0)continue;Nt=(N.y[U]+N.y[U+1])/2}var Dt=Math.round(S.c2p(Nt));if(!(0>Dt||Dt>S._length))for(z=wt;z<Ot;z++){var qt;if(mt)qt=N.x[z];else if(Mt){if(z===0||z===se-1)continue;qt=N.x[z]}else if(N.xCenter)qt=N.xCenter[z];else{if(z+1===se&&N.x[z+1]===void 0)continue;qt=(N.x[z]+N.x[z+1])/2}var Xt=Math.round(u.c2p(qt));if(!(0>Xt||Xt>u._length)){var cn=t({x:qt,y:Nt},B,y._fullLayout);cn.x=qt,cn.y=Nt;var yn=N.z[U][z];yn===void 0?(cn.z="",cn.zLabel=""):(cn.z=yn,cn.zLabel=x.tickText(Lt,yn,"hover").text);var Kt=N.text&&N.text[U]&&N.text[U][z];Kt!==void 0&&Kt!==!1||(Kt=""),cn.text=Kt;var Mn=d.texttemplateString(ct,cn,y._fullLayout._d3locale,cn,B._meta||{});if(Mn){var Un=Mn.split("<br>"),xn=Un.length,dn=0;for(H=0;H<xn;H++)dn=Math.max(dn,Un[H].length);It.push({l:xn,c:dn,t:Mn,x:Xt,y:Dt,z:yn})}}}}var gn=B.textfont,an=gn.family,sn=gn.size,On=y._fullLayout.font.size;if(!sn||sn==="auto"){var En=1/0,Dn=1/0,Zn=0,Fn=0;for(H=0;H<It.length;H++){var nr=It[H];if(Zn=Math.max(Zn,nr.l),Fn=Math.max(Fn,nr.c),H<It.length-1){var $n=It[H+1],mr=Math.abs($n.x-nr.x),dr=Math.abs($n.y-nr.y);mr&&(En=Math.min(En,mr)),dr&&(Dn=Math.min(Dn,dr))}}isFinite(En)&&isFinite(Dn)?(En-=j,Dn-=K,En/=Fn,Dn/=Zn,En/=i/2,Dn/=i,sn=Math.min(Math.floor(En),Math.floor(Dn),On)):sn=On}if(sn<=0||!isFinite(sn))return;h(F).data(It).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(Yn){var Vn=A.select(this),ur=gn.color;ur&&ur!=="auto"||(ur=o.contrast("rgba("+oe(Yn.z).join()+")")),Vn.attr("data-notex",1).call(s.positionText,function(Gt){return Gt.x}(Yn),function(Gt){return Gt.y-sn*(Gt.l*i/2-1)}(Yn)).call(T.font,an,sn,ur).text(Yn.t).call(s.convertToTspans,y)})}})}},70035:function($,R,e){var A=e(39898);$.exports=function(k){A.select(k).selectAll(".hm image").style("opacity",function(l){return l.trace.opacity})}},49901:function($){$.exports=function(R,e,A){A("zsmooth")===!1&&(A("xgap"),A("ygap")),A("zhoverformat")}},67684:function($,R,e){var A=e(92770),k=e(71828),l=e(73972);function T(x,d){var s=d(x);return(s?d(x+"type","array"):"scaled")==="scaled"&&(d(x+"0"),d("d"+x)),s}$.exports=function(x,d,s,t,o,r){var n,a,i=s("z");if(o=o||"x",r=r||"y",i===void 0||!i.length)return 0;if(k.isArray1D(x.z)){n=s(o),a=s(r);var c=k.minRowLength(n),h=k.minRowLength(a);if(c===0||h===0)return 0;d._length=Math.min(c,h,i.length)}else{if(n=T(o,s),a=T(r,s),!function(f){for(var b,v=!0,g=!1,y=!1,p=0;p<f.length;p++){if(b=f[p],!k.isArrayOrTypedArray(b)){v=!1;break}b.length>0&&(g=!0);for(var m=0;m<b.length;m++)if(A(b[m])){y=!0;break}}return v&&g&&y}(i))return 0;s("transpose"),d._length=null}return x.type==="heatmapgl"||l.getComponentMethod("calendars","handleTraceDefaults")(x,d,[o,r],t),!0}},16063:function($,R,e){for(var A=e(21606),k=e(50693),l=e(1426).extendFlat,T=e(30962).overrideAll,x=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],d={},s=0;s<x.length;s++){var t=x[s];d[t]=A[t]}d.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},l(d,k("",{cLetter:"z",autoColorDflt:!1})),$.exports=T(d,"calc","nested")},59560:function($,R,e){var A=e(9330).gl_heatmap2d,k=e(89298),l=e(78614);function T(d,s){this.scene=d,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=A(d.glplot,this.options),this.heatmap._trace=this}var x=T.prototype;x.handlePick=function(d){var s=this.options,t=s.shape,o=d.pointId,r=o%t[0],n=Math.floor(o/t[0]),a=o;return{trace:this,dataCoord:d.dataCoord,traceCoord:[s.x[r],s.y[n],s.z[a]],textLabel:this.textLabels[o],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},x.update=function(d,s){var t=s[0];this.index=d.index,this.name=d.name,this.hoverinfo=d.hoverinfo;var o=t.z;this.options.z=[].concat.apply([],o);var r=o[0].length,n=o.length;this.options.shape=[r,n],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=d.zsmooth;var a=function(b){for(var v=b.colorscale,g=b.zmin,y=b.zmax,p=v.length,m=new Array(p),w=new Array(4*p),u=0;u<p;u++){var S=v[u],_=l(S[1]);m[u]=g+S[0]*(y-g);for(var E=0;E<4;E++)w[4*u+E]=_[E]}return{colorLevels:m,colorValues:w}}(d);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],d.text),this.heatmap.update(this.options);var i,c,h=this.scene.xaxis,f=this.scene.yaxis;d.zsmooth===!1&&(i={ppad:t.x[1]-t.x[0]},c={ppad:t.y[1]-t.y[0]}),d._extremes[h._id]=k.findExtremes(h,t.x,i),d._extremes[f._id]=k.findExtremes(f,t.y,c)},x.dispose=function(){this.heatmap.dispose()},$.exports=function(d,s,t){var o=new T(d,s.uid);return o.update(s,t),o}},19600:function($,R,e){var A=e(71828),k=e(67684),l=e(1586),T=e(16063);$.exports=function(x,d,s,t){function o(r,n){return A.coerce(x,d,T,r,n)}k(x,d,o,t)?(o("text"),o("zsmooth"),l(x,d,t,o,{prefix:"",cLetter:"z"})):d.visible=!1}},3325:function($,R,e){$.exports={attributes:e(16063),supplyDefaults:e(19600),colorbar:e(61243),calc:e(90757),plot:e(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:e(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function($,R,e){var A=e(1486),k=e(12663).axisHoverFormat,l=e(5386).f,T=e(5386).s,x=e(41940),d=e(17656),s=e(72406),t=e(1426).extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},A.text,{}),hovertext:t({},A.hovertext,{}),orientation:A.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:d("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:d("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},A.textposition,{arrayOk:!1}),textfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:A.insidetextanchor,textangle:A.textangle,cliponaxis:A.cliponaxis,constraintext:A.constraintext,marker:A.marker,offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:A.selected,unselected:A.unselected,_deprecated:{bardir:A._deprecated.bardir}}},42174:function($){$.exports=function(R,e){for(var A=R.length,k=0,l=0;l<A;l++)e[l]?(R[l]/=e[l],k+=R[l]):R[l]=null;return k}},17656:function($){$.exports=function(R,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function($,R,e){var A=e(92770);$.exports={count:function(k,l,T){return T[k]++,1},sum:function(k,l,T,x){var d=x[l];return A(d)?(d=Number(d),T[k]+=d,d):0},avg:function(k,l,T,x,d){var s=x[l];return A(s)&&(s=Number(s),T[k]+=s,d[k]++),0},min:function(k,l,T,x){var d=x[l];if(A(d)){if(d=Number(d),!A(T[k]))return T[k]=d,d;if(T[k]>d){var s=d-T[k];return T[k]=d,s}}return 0},max:function(k,l,T,x){var d=x[l];if(A(d)){if(d=Number(d),!A(T[k]))return T[k]=d,d;if(T[k]<d){var s=d-T[k];return T[k]=d,s}}return 0}}},40965:function($,R,e){var A=e(50606),k=A.ONEAVGYEAR,l=A.ONEAVGMONTH,T=A.ONEDAY,x=A.ONEHOUR,d=A.ONEMIN,s=A.ONESEC,t=e(89298).tickIncrement;function o(i,c,h,f){if(i*c<=0)return 1/0;for(var b=Math.abs(c-i),v=h.type==="date",g=r(b,v),y=0;y<10;y++){var p=r(80*g,v);if(g===p||!n(p,i,c,v,h,f))break;g=p}return g}function r(i,c){return c&&i>s?i>T?i>1.1*k?k:i>1.1*l?l:T:i>x?x:i>d?d:s:Math.pow(10,Math.floor(Math.log(i)/Math.LN10))}function n(i,c,h,f,b,v){if(f&&i>T){var g=a(c,b,v),y=a(h,b,v),p=i===k?0:1;return g[p]!==y[p]}return Math.floor(h/i)-Math.floor(c/i)>.1}function a(i,c,h){var f=c.c2d(i,k,h).split("-");return f[0]===""&&(f.unshift(),f[0]="-"+f[0]),f}$.exports=function(i,c,h,f,b){var v,g,y=-1.1*c,p=-.1*c,m=i-p,w=h[0],u=h[1],S=Math.min(o(w+p,w+m,f,b),o(u+p,u+m,f,b)),_=Math.min(o(w+y,w+p,f,b),o(u+y,u+p,f,b));if(S>_&&_<Math.abs(u-w)/4e3?(v=S,g=!1):(v=Math.min(S,_),g=!0),f.type==="date"&&v>T){var E=v===k?1:6,L=v===k?"M12":"M1";return function(C,P){var I=f.c2d(C,k,b),U=I.indexOf("-",E);U>0&&(I=I.substr(0,U));var z=f.d2c(I,0,b);if(z<C){var H=t(z,L,!1,b);(z+H)/2<C+i&&(z=H)}return P&&g?t(z,L,!0,b):z}}return function(C,P){var I=v*Math.round(C/v);return I+v/10<C&&I+.9*v<C+i&&(I+=v),P&&g&&(I-=v),I}}},72138:function($,R,e){var A=e(92770),k=e(71828),l=e(73972),T=e(89298),x=e(75341),d=e(59575),s=e(36362),t=e(42174),o=e(40965);function r(n,a,i,c,h){var f,b,v,g,y,p,m,w=c+"bins",u=n._fullLayout,S=a["_"+c+"bingroup"],_=u._histogramBinOpts[S],E=u.barmode==="overlay",L=function(he){return i.r2c(he,0,g)},C=function(he){return i.c2r(he,0,g)},P=i.type==="date"?function(he){return he||he===0?k.cleanDate(he,null,g):null}:function(he){return A(he)?Number(he):null};function I(he,ve,Ie){ve[he+"Found"]?(ve[he]=P(ve[he]),ve[he]===null&&(ve[he]=Ie[he])):(p[he]=ve[he]=Ie[he],k.nestedProperty(b[0],w+"."+he).set(Ie[he]))}if(a["_"+c+"autoBinFinished"])delete a["_"+c+"autoBinFinished"];else{b=_.traces;var U=[],z=!0,H=!1,F=!1;for(f=0;f<b.length;f++)if((v=b[f]).visible){var N=_.dirs[f];y=v["_"+N+"pos0"]=i.makeCalcdata(v,N),U=k.concat(U,y),delete v["_"+c+"autoBinFinished"],a.visible===!0&&(z?z=!1:(delete v._autoBin,v["_"+c+"autoBinFinished"]=1),l.traceIs(v,"2dMap")&&(H=!0),v.type==="histogram2dcontour"&&(F=!0))}g=b[0][c+"calendar"];var B=T.autoBin(U,i,_.nbins,H,g,_.sizeFound&&_.size),j=b[0]._autoBin={};if(p=j[_.dirs[0]]={},F&&(_.size||(B.start=C(T.tickIncrement(L(B.start),B.size,!0,g))),_.end===void 0&&(B.end=C(T.tickIncrement(L(B.end),B.size,!1,g)))),E&&!l.traceIs(a,"2dMap")&&B._dataSpan===0&&i.type!=="category"&&i.type!=="multicategory"){if(h)return[B,y,!0];B=function(he,ve,Ie,xe,Ae){var Se,Te,Q,oe=he._fullLayout,ce=function(rt,tt){for(var ot=tt.xaxis,ht=tt.yaxis,_t=tt.orientation,dt=[],bt=rt._fullData,St=0;St<bt.length;St++){var Et=bt[St];Et.type==="histogram"&&Et.visible===!0&&Et.orientation===_t&&Et.xaxis===ot&&Et.yaxis===ht&&dt.push(Et)}return dt}(he,ve),me=!1,Me=1/0,Re=[ve];for(Se=0;Se<ce.length;Se++)if((Te=ce[Se])===ve)me=!0;else if(me){var Ce=r(he,Te,Ie,xe,!0),ze=Ce[0],le=Ce[2];Te["_"+xe+"autoBinFinished"]=1,Te["_"+xe+"pos0"]=Ce[1],le?Re.push(Te):Me=Math.min(Me,ze.size)}else Q=oe._histogramBinOpts[Te["_"+xe+"bingroup"]],Me=Math.min(Me,Q.size||Te[Ae].size);var de=new Array(Re.length);for(Se=0;Se<Re.length;Se++)for(var be=Re[Se]["_"+xe+"pos0"],Fe=0;Fe<be.length;Fe++)if(be[Fe]!==void 0){de[Se]=be[Fe];break}for(isFinite(Me)||(Me=k.distinctVals(de).minDiff),Se=0;Se<Re.length;Se++){var Ve=(Te=Re[Se])[xe+"calendar"],He={start:Ie.c2r(de[Se]-Me/2,0,Ve),end:Ie.c2r(de[Se]+Me/2,0,Ve),size:Me};Te._input[Ae]=Te[Ae]=He,(Q=oe._histogramBinOpts[Te["_"+xe+"bingroup"]])&&k.extendFlat(Q,He)}return ve[Ae]}(n,a,i,c,w)}(m=v.cumulative||{}).enabled&&m.currentbin!=="include"&&(m.direction==="decreasing"?B.start=C(T.tickIncrement(L(B.start),B.size,!0,g)):B.end=C(T.tickIncrement(L(B.end),B.size,!1,g))),_.size=B.size,_.sizeFound||(p.size=B.size,k.nestedProperty(b[0],w+".size").set(B.size)),I("start",_,B),I("end",_,B)}y=a["_"+c+"pos0"],delete a["_"+c+"pos0"];var K=a._input[w]||{},G=k.extendFlat({},_),V=_.start,W=i.r2l(K.start),J=W!==void 0;if((_.startFound||J)&&W!==i.r2l(V)){var X=J?W:k.aggNums(Math.min,null,y),ee={type:i.type==="category"||i.type==="multicategory"?"linear":i.type,r2l:i.r2l,dtick:_.size,tick0:V,calendar:g,range:[X,T.tickIncrement(X,_.size,!1,g)].map(i.l2r)},re=T.tickFirst(ee);re>i.r2l(X)&&(re=T.tickIncrement(re,_.size,!0,g)),G.start=i.l2r(re),J||k.nestedProperty(a,w+".start").set(G.start)}var ie=_.end,se=i.r2l(K.end),fe=se!==void 0;if((_.endFound||fe)&&se!==i.r2l(ie)){var ye=fe?se:k.aggNums(Math.max,null,y);G.end=i.l2r(ye),fe||k.nestedProperty(a,w+".start").set(G.end)}var ge="autobin"+c;return a._input[ge]===!1&&(a._input[w]=k.extendFlat({},a[w]||{}),delete a._input[ge],delete a[ge]),[G,y]}$.exports={calc:function(n,a){var i,c,h,f,b=[],v=[],g=a.orientation==="h",y=T.getFromId(n,g?a.yaxis:a.xaxis),p=g?"y":"x",m={x:"y",y:"x"}[p],w=a[p+"calendar"],u=a.cumulative,S=r(n,a,y,p),_=S[0],E=S[1],L=typeof _.size=="string",C=[],P=L?C:_,I=[],U=[],z=[],H=0,F=a.histnorm,N=a.histfunc,B=F.indexOf("density")!==-1;u.enabled&&B&&(F=F.replace(/ ?density$/,""),B=!1);var j,K=N==="max"||N==="min"?null:0,G=d.count,V=s[F],W=!1,J=function(Te){return y.r2c(Te,0,w)};for(k.isArrayOrTypedArray(a[m])&&N!=="count"&&(j=a[m],W=N==="avg",G=d[N]),i=J(_.start),h=J(_.end)+(i-T.tickIncrement(i,_.size,!1,w))/1e6;i<h&&b.length<1e6&&(c=T.tickIncrement(i,_.size,!1,w),b.push((i+c)/2),v.push(K),z.push([]),C.push(i),B&&I.push(1/(c-i)),W&&U.push(0),!(c<=i));)i=c;C.push(i),L||y.type!=="date"||(P={start:J(P.start),end:J(P.end),size:P.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var X=a["_"+p+"bingroup"],ee={leftGap:1/0,rightGap:1/0};X&&(n._fullLayout._roundFnOpts[X]||(n._fullLayout._roundFnOpts[X]=ee),ee=n._fullLayout._roundFnOpts[X]);var re,ie=v.length,se=!0,fe=ee.leftGap,ye=ee.rightGap,ge={};for(i=0;i<E.length;i++){var he=E[i];(f=k.findBin(he,P))>=0&&f<ie&&(H+=G(f,i,v,j,U),se&&z[f].length&&he!==E[z[f][0]]&&(se=!1),z[f].push(i),ge[i]=f,fe=Math.min(fe,he-C[f]),ye=Math.min(ye,C[f+1]-he))}ee.leftGap=fe,ee.rightGap=ye,se||(re=function(Te,Q){return function(){var oe=n._fullLayout._roundFnOpts[X];return o(oe.leftGap,oe.rightGap,C,y,w)(Te,Q)}}),W&&(H=t(v,U)),V&&V(v,H,I),u.enabled&&function(Te,Q,oe){var ce,me,Me;function Re(ze){Me=Te[ze],Te[ze]/=2}function Ce(ze){me=Te[ze],Te[ze]=Me+me/2,Me+=me}if(oe==="half")if(Q==="increasing")for(Re(0),ce=1;ce<Te.length;ce++)Ce(ce);else for(Re(Te.length-1),ce=Te.length-2;ce>=0;ce--)Ce(ce);else if(Q==="increasing"){for(ce=1;ce<Te.length;ce++)Te[ce]+=Te[ce-1];oe==="exclude"&&(Te.unshift(0),Te.pop())}else{for(ce=Te.length-2;ce>=0;ce--)Te[ce]+=Te[ce+1];oe==="exclude"&&(Te.push(0),Te.shift())}}(v,u.direction,u.currentbin);var ve=Math.min(b.length,v.length),Ie=[],xe=0,Ae=ve-1;for(i=0;i<ve;i++)if(v[i]){xe=i;break}for(i=ve-1;i>=xe;i--)if(v[i]){Ae=i;break}for(i=xe;i<=Ae;i++)if(A(b[i])&&A(v[i])){var Se={p:b[i],s:v[i],b:0};u.enabled||(Se.pts=z[i],se?Se.ph0=Se.ph1=z[i].length?E[z[i][0]]:b[i]:(a._computePh=!0,Se.ph0=re(C[i]),Se.ph1=re(C[i+1],!0))),Ie.push(Se)}return Ie.length===1&&(Ie[0].width1=T.tickIncrement(Ie[0].p,_.size,!1,w)-Ie[0].p),x(Ie,a),k.isArrayOrTypedArray(a.selectedpoints)&&k.tagSelected(Ie,a,ge),Ie},calcAllAutoBins:r}},72406:function($){$.exports={eventDataKeys:["binNumber"]}},82222:function($,R,e){var A=e(71828),k=e(41675),l=e(73972).traceIs,T=e(26125),x=A.nestedProperty,d=e(99082).getAxisGroup,s=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];$.exports=function(o,r){var n,a,i,c,h,f,b,v=r._histogramBinOpts={},g=[],y={},p=[];function m(B,j){return A.coerce(n._input,n,n._module.attributes,B,j)}function w(B){return B.orientation==="v"?"x":"y"}function u(B,j,K){var G=B.uid+"__"+K;j||(j=G);var V=function(ee,re){return k.getFromTrace({_fullLayout:r},ee,re).type}(B,K),W=B[K+"calendar"]||"",J=v[j],X=!0;J&&(V===J.axType&&W===J.calendar?(X=!1,J.traces.push(B),J.dirs.push(K)):(j=G,V!==J.axType&&A.warn(["Attempted to group the bins of trace",B.index,"set on a","type:"+V,"axis","with bins on","type:"+J.axType,"axis."].join(" ")),W!==J.calendar&&A.warn(["Attempted to group the bins of trace",B.index,"set with a",W,"calendar","with bins",J.calendar?"on a "+J.calendar+" calendar":"w/o a set calendar"].join(" ")))),X&&(v[j]={traces:[B],dirs:[K],axType:V,calendar:B[K+"calendar"]||""}),B["_"+K+"bingroup"]=j}for(h=0;h<o.length;h++)n=o[h],l(n,"histogram")&&(g.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,l(n,"2dMap")||T(n._input,n,r,m));var S=r._alignmentOpts||{};for(h=0;h<g.length;h++){if(n=g[h],i="",!l(n,"2dMap")){if(c=w(n),r.barmode==="group"&&n.alignmentgroup){var _=n[c+"axis"],E=d(r,_)+n.orientation;(S[E]||{})[n.alignmentgroup]&&(i=E)}i||r.barmode==="overlay"||(i=d(r,n.xaxis)+d(r,n.yaxis)+w(n))}i?(y[i]||(y[i]=[]),y[i].push(n)):p.push(n)}for(i in y)if((a=y[i]).length!==1){var L=!1;for(a.length&&(n=a[0],L=m("bingroup")),i=L||i,h=0;h<a.length;h++){var C=(n=a[h])._input.bingroup;C&&C!==i&&A.warn(["Trace",n.index,"must match","within bingroup",i+".","Ignoring its bingroup:",C,"setting."].join(" ")),n.bingroup=i,u(n,i,w(n))}}else p.push(a[0]);for(h=0;h<p.length;h++){n=p[h];var P=m("bingroup");if(l(n,"2dMap"))for(b=0;b<2;b++){var I=m((c=t[b])+"bingroup",P?P+"__"+c:null);u(n,I,c)}else u(n,P,w(n))}for(i in v){var U=v[i];for(a=U.traces,f=0;f<s.length;f++){var z,H,F=s[f],N=F.name;if(N!=="nbins"||!U.sizeFound){for(h=0;h<a.length;h++){if(n=a[h],c=U.dirs[h],z=F.aStr[c],x(n._input,z).get()!==void 0){U[N]=m(z),U[N+"Found"]=!0;break}(H=(n._autoBin||{})[c]||{})[N]&&x(n,z).set(H[N])}if(N==="start"||N==="end")for(;h<a.length;h++)(n=a[h])["_"+c+"bingroup"]&&m(z,(H=(n._autoBin||{})[c]||{})[N]);N!=="nbins"||U.sizeFound||U.nbinsFound||(n=a[0],U[N]=m(z))}}}}},11385:function($,R,e){var A=e(73972),k=e(71828),l=e(7901),T=e(90769).handleText,x=e(98340),d=e(7745);$.exports=function(s,t,o,r){function n(p,m){return k.coerce(s,t,d,p,m)}var a=n("x"),i=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var c=n("textposition");T(s,t,r,n,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var h=n("orientation",i&&!a?"h":"v"),f=h==="v"?"x":"y",b=h==="v"?"y":"x",v=a&&i?Math.min(k.minRowLength(a)&&k.minRowLength(i)):k.minRowLength(t[f]||[]);if(v){t._length=v,A.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],r),t[b]&&n("histfunc"),n("histnorm"),n("autobin"+f),x(s,t,n,o,r),k.coerceSelectionMarkerOpacity(t,n);var g=(t.marker.line||{}).color,y=A.getComponentMethod("errorbars","supplyDefaults");y(s,t,g||l.defaultLine,{axis:"y"}),y(s,t,g||l.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},84402:function($){$.exports=function(R,e,A,k,l){if(R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(R.z=e.zLabelVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),!(A.cumulative||{}).enabled){var T,x=Array.isArray(l)?k[0].pts[l[0]][l[1]]:k[l].pts;if(R.pointNumbers=x,R.binNumber=R.pointNumber,delete R.pointNumber,delete R.pointIndex,A._indexToPoints){T=[];for(var d=0;d<x.length;d++)T=T.concat(A._indexToPoints[x[d]])}else T=x;R.pointIndices=T}return R}},76440:function($,R,e){var A=e(95423).hoverPoints,k=e(89298).hoverLabelText;$.exports=function(l,T,x,d,s){var t=A(l,T,x,d,s);if(t){var o=(l=t[0]).cd[l.index],r=l.cd[0].trace;if(!r.cumulative.enabled){var n=r.orientation==="h"?"y":"x";l[n+"Label"]=k(l[n+"a"],[o.ph0,o.ph1],r[n+"hoverformat"])}return t}}},36071:function($,R,e){$.exports={attributes:e(7745),layoutAttributes:e(43641),supplyDefaults:e(11385),crossTraceDefaults:e(82222),supplyLayoutDefaults:e(13957),calc:e(72138).calc,crossTraceCalc:e(11661).crossTraceCalc,plot:e(17295).plot,layerName:"barlayer",style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,colorbar:e(4898),hoverPoints:e(76440),selectPoints:e(81974),eventData:e(84402),moduleType:"trace",name:"histogram",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function($){$.exports={percent:function(R,e){for(var A=R.length,k=100/e,l=0;l<A;l++)R[l]*=k},probability:function(R,e){for(var A=R.length,k=0;k<A;k++)R[k]/=e},density:function(R,e,A,k){var l=R.length;k=k||1;for(var T=0;T<l;T++)R[T]*=A[T]*k},"probability density":function(R,e,A,k){var l=R.length;k&&(e/=k);for(var T=0;T<l;T++)R[T]*=A[T]/e}}},35361:function($,R,e){var A=e(7745),k=e(17656),l=e(21606),T=e(9012),x=e(12663).axisHoverFormat,d=e(5386).f,s=e(5386).s,t=e(50693),o=e(1426).extendFlat;$.exports=o({x:A.x,y:A.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:A.histnorm,histfunc:A.histfunc,nbinsx:A.nbinsx,xbins:k("x"),nbinsy:A.nbinsy,ybins:k("y"),autobinx:A.autobinx,autobiny:A.autobiny,bingroup:o({},A.bingroup,{}),xbingroup:o({},A.bingroup,{}),ybingroup:o({},A.bingroup,{}),xgap:l.xgap,ygap:l.ygap,zsmooth:l.zsmooth,xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:d({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:l.textfont,showlegend:o({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},17562:function($,R,e){var A=e(71828),k=e(89298),l=e(59575),T=e(36362),x=e(42174),d=e(40965),s=e(72138).calcAllAutoBins;function t(n,a,i,c){var h,f=new Array(n);if(c)for(h=0;h<n;h++)f[h]=1/(a[h+1]-a[h]);else{var b=1/i;for(h=0;h<n;h++)f[h]=b}return f}function o(n,a){return{start:n(a.start),end:n(a.end),size:a.size}}function r(n,a,i,c,h,f){var b,v=n.length-1,g=new Array(v),y=d(i,c,n,h,f);for(b=0;b<v;b++){var p=(a||[])[b];g[b]=p===void 0?[y(n[b]),y(n[b+1],!0)]:[p,p]}return g}$.exports=function(n,a){var i,c,h,f,b=k.getFromId(n,a.xaxis),v=k.getFromId(n,a.yaxis),g=a.xcalendar,y=a.ycalendar,p=function(ht){return b.r2c(ht,0,g)},m=function(ht){return v.r2c(ht,0,y)},w=s(n,a,b,"x"),u=w[0],S=w[1],_=s(n,a,v,"y"),E=_[0],L=_[1],C=a._length;S.length>C&&S.splice(C,S.length-C),L.length>C&&L.splice(C,L.length-C);var P=[],I=[],U=[],z=typeof u.size=="string",H=typeof E.size=="string",F=[],N=[],B=z?F:u,j=H?N:E,K=0,G=[],V=[],W=a.histnorm,J=a.histfunc,X=W.indexOf("density")!==-1,ee=J==="max"||J==="min"?null:0,re=l.count,ie=T[W],se=!1,fe=[],ye=[],ge="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";ge&&J!=="count"&&(se=J==="avg",re=l[J]);var he=u.size,ve=p(u.start),Ie=p(u.end)+(ve-k.tickIncrement(ve,he,!1,g))/1e6;for(i=ve;i<Ie;i=k.tickIncrement(i,he,!1,g))I.push(ee),F.push(i),se&&U.push(0);F.push(i);var xe,Ae=I.length,Se=(i-ve)/Ae,Te=(xe=ve+Se/2,b.c2r(xe,0,g)),Q=E.size,oe=m(E.start),ce=m(E.end)+(oe-k.tickIncrement(oe,Q,!1,y))/1e6;for(i=oe;i<ce;i=k.tickIncrement(i,Q,!1,y)){P.push(I.slice()),N.push(i);var me=new Array(Ae);for(c=0;c<Ae;c++)me[c]=[];V.push(me),se&&G.push(U.slice())}N.push(i);var Me=P.length,Re=(i-oe)/Me,Ce=function(ht){return v.c2r(ht,0,y)}(oe+Re/2);X&&(fe=t(I.length,B,Se,z),ye=t(P.length,j,Re,H)),z||b.type!=="date"||(B=o(p,B)),H||v.type!=="date"||(j=o(m,j));var ze=!0,le=!0,de=new Array(Ae),be=new Array(Me),Fe=1/0,Ve=1/0,He=1/0,rt=1/0;for(i=0;i<C;i++){var tt=S[i],ot=L[i];h=A.findBin(tt,B),f=A.findBin(ot,j),h>=0&&h<Ae&&f>=0&&f<Me&&(K+=re(h,i,P[f],ge,G[f]),V[f][h].push(i),ze&&(de[h]===void 0?de[h]=tt:de[h]!==tt&&(ze=!1)),le&&(be[f]===void 0?be[f]=ot:be[f]!==ot&&(le=!1)),Fe=Math.min(Fe,tt-F[h]),Ve=Math.min(Ve,F[h+1]-tt),He=Math.min(He,ot-N[f]),rt=Math.min(rt,N[f+1]-ot))}if(se)for(f=0;f<Me;f++)K+=x(P[f],G[f]);if(ie)for(f=0;f<Me;f++)ie(P[f],K,fe,ye[f]);return{x:S,xRanges:r(F,ze&&de,Fe,Ve,b,g),x0:Te,dx:Se,y:L,yRanges:r(N,le&&be,He,rt,v,y),y0:Ce,dy:Re,z:P,pts:V}}},93888:function($,R,e){var A=e(71828),k=e(75238),l=e(49901),T=e(1586),x=e(58623),d=e(35361);$.exports=function(s,t,o,r){function n(a,i){return A.coerce(s,t,d,a,i)}k(s,t,n,r),t.visible!==!1&&(l(s,t,n,r),T(s,t,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),x(n,r),n("xhoverformat"),n("yhoverformat"))}},76128:function($,R,e){var A=e(46248),k=e(89298).hoverLabelText;$.exports=function(l,T,x,d,s){var t=A(l,T,x,d,s);if(t){var o=(l=t[0]).index,r=o[0],n=o[1],a=l.cd[0],i=a.trace,c=a.xRanges[n],h=a.yRanges[r];return l.xLabel=k(l.xa,[c[0],c[1]],i.xhoverformat),l.yLabel=k(l.ya,[h[0],h[1]],i.yhoverformat),t}}},43905:function($,R,e){$.exports={attributes:e(35361),supplyDefaults:e(93888),crossTraceDefaults:e(82222),calc:e(90757),plot:e(50347),layerName:"heatmaplayer",colorbar:e(61243),style:e(70035),hoverPoints:e(76128),eventData:e(84402),moduleType:"trace",name:"histogram2d",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function($,R,e){var A=e(73972),k=e(71828);$.exports=function(l,T,x,d){var s=x("x"),t=x("y"),o=k.minRowLength(s),r=k.minRowLength(t);o&&r?(T._length=Math.min(o,r),A.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],d),(x("z")||x("marker.color"))&&x("histfunc"),x("histnorm"),x("autobinx"),x("autobiny")):T.visible=!1}},99066:function($,R,e){var A=e(35361),k=e(70600),l=e(50693),T=e(12663).axisHoverFormat,x=e(1426).extendFlat;$.exports=x({x:A.x,y:A.y,z:A.z,marker:A.marker,histnorm:A.histnorm,histfunc:A.histfunc,nbinsx:A.nbinsx,xbins:A.xbins,nbinsy:A.nbinsy,ybins:A.ybins,autobinx:A.autobinx,autobiny:A.autobiny,bingroup:A.bingroup,xbingroup:A.xbingroup,ybingroup:A.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:x({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:A.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},l("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function($,R,e){var A=e(71828),k=e(75238),l=e(67217),T=e(8724),x=e(58623),d=e(99066);$.exports=function(s,t,o,r){function n(a,i){return A.coerce(s,t,d,a,i)}k(s,t,n,r),t.visible!==!1&&(l(s,t,n,function(a){return A.coerce2(s,t,d,a)}),T(s,t,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&x(n,r))}},35902:function($,R,e){$.exports={attributes:e(99066),supplyDefaults:e(62654),crossTraceDefaults:e(82222),calc:e(27529),plot:e(29854).plot,layerName:"contourlayer",style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function($,R,e){var A=e(5386).f,k=e(5386).s,l=e(50693),T=e(27670).Y,x=e(34e3),d=e(57564),s=e(45802),t=e(43473),o=e(1426).extendFlat;$.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:o({colors:d.marker.colors,line:d.marker.line,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:d.leaf,pathbar:s.pathbar,text:x.text,textinfo:d.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:x.hovertext,hoverinfo:d.hoverinfo,hovertemplate:A({},{keys:t.eventDataKeys}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:x.sort,root:d.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},96346:function($,R,e){var A=e(74875);R.name="icicle",R.plot=function(k,l,T,x){A.plotBasePlot(R.name,k,l,T,x)},R.clean=function(k,l,T,x){A.cleanBasePlot(R.name,k,l,T,x)}},46584:function($,R,e){var A=e(52147);R.y=function(k,l){return A.calc(k,l)},R.T=function(k){return A._runCrossTraceCalc("icicle",k)}},56524:function($,R,e){var A=e(71828),k=e(46291),l=e(7901),T=e(27670).c,x=e(90769).handleText,d=e(97313).TEXTPAD,s=e(21081),t=s.hasColorscale,o=s.handleDefaults;$.exports=function(r,n,a,i){function c(p,m){return A.coerce(r,n,k,p,m)}var h=c("labels"),f=c("parents");if(h&&h.length&&f&&f.length){var b=c("values");b&&b.length?c("branchvalues"):c("count"),c("level"),c("maxdepth"),c("tiling.orientation"),c("tiling.flip"),c("tiling.pad");var v=c("text");c("texttemplate"),n.texttemplate||c("textinfo",Array.isArray(v)?"text+label":"label"),c("hovertext"),c("hovertemplate");var g=c("pathbar.visible");x(r,n,i,c,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition"),c("marker.line.width")&&c("marker.line.color",i.paper_bgcolor),c("marker.colors");var y=n._hasColorscale=t(r,"marker","colors")||(r.marker||{}).coloraxis;y&&o(r,n,i,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",y?1:.7),n._hovered={marker:{line:{width:2,color:l.contrast(i.paper_bgcolor)}}},g&&(c("pathbar.thickness",n.pathbar.textfont.size+2*d),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),T(n,i,c),n._length=null}else n.visible=!1}},90666:function($,R,e){var A=e(39898),k=e(71828),l=e(91424),T=e(63893),x=e(21538),d=e(82454).styleOne,s=e(43473),t=e(2791),o=e(83523),r=e(24714).formatSliceLabel,n=!1;$.exports=function(a,i,c,h,f){var b=f.width,v=f.height,g=f.viewX,y=f.viewY,p=f.pathSlice,m=f.toMoveInsideSlice,w=f.strTransform,u=f.hasTransition,S=f.handleSlicesExit,_=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,C=a._context.staticPlot,P=a._fullLayout,I=i[0].trace,U=I.textposition.indexOf("left")!==-1,z=I.textposition.indexOf("right")!==-1,H=I.textposition.indexOf("bottom")!==-1,F=x(c,[b,v],{flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,orientation:I.tiling.orientation,pad:{inner:I.tiling.pad},maxDepth:I._maxDepth}).descendants(),N=1/0,B=-1/0;F.forEach(function(W){var J=W.depth;J>=I._maxDepth?(W.x0=W.x1=(W.x0+W.x1)/2,W.y0=W.y1=(W.y0+W.y1)/2):(N=Math.min(N,J),B=Math.max(B,J))}),h=h.data(F,t.getPtId),I._maxVisibleLayers=isFinite(B)?B-N+1:0,h.enter().append("g").classed("slice",!0),S(h,n,{},[b,v],p),h.order();var j=null;if(u&&L){var K=t.getPtId(L);h.each(function(W){j===null&&t.getPtId(W)===K&&(j={x0:W.x0,x1:W.x1,y0:W.y0,y1:W.y1})})}var G=function(){return j||{x0:0,x1:b,y0:0,y1:v}},V=h;return u&&(V=V.transition().each("end",function(){var W=A.select(this);t.setSliceCursor(W,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(W){W._x0=g(W.x0),W._x1=g(W.x1),W._y0=y(W.y0),W._y1=y(W.y1),W._hoverX=g(W.x1-I.tiling.pad),W._hoverY=y(H?W.y1-I.tiling.pad/2:W.y0+I.tiling.pad/2);var J=A.select(this),X=k.ensureSingle(J,"path","surface",function(se){se.style("pointer-events",C?"none":"all")});u?X.transition().attrTween("d",function(se){var fe=_(se,n,G(),[b,v],{orientation:I.tiling.orientation,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1});return function(ye){return p(fe(ye))}}):X.attr("d",p),J.call(o,c,a,i,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),X.call(d,W,I,{hovered:!1}),W.x0===W.x1||W.y0===W.y1?W._text="":W._text=r(W,c,I,i,P)||"";var ee=k.ensureSingle(J,"g","slicetext"),re=k.ensureSingle(ee,"text","",function(se){se.attr("data-notex",1)}),ie=k.ensureUniformFontSize(a,t.determineTextFont(I,W,P.font));re.text(W._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":U?"start":"middle").call(l.font,ie).call(T.convertToTspans,a),W.textBB=l.bBox(re.node()),W.transform=m(W,{fontSize:ie.size}),W.transform.fontSize=ie.size,u?re.transition().attrTween("transform",function(se){var fe=E(se,n,G(),[b,v]);return function(ye){return w(fe(ye))}}):re.attr("transform",w(W))}),j}},69816:function($,R,e){$.exports={moduleType:"trace",name:"icicle",basePlotModule:e(96346),categories:[],animatable:!0,attributes:e(46291),layoutAttributes:e(92894),supplyDefaults:e(56524),supplyLayoutDefaults:e(21070),calc:e(46584).y,crossTraceCalc:e(46584).T,plot:e(85596),style:e(82454).style,colorbar:e(4898),meta:{}}},92894:function($){$.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function($,R,e){var A=e(71828),k=e(92894);$.exports=function(l,T){function x(d,s){return A.coerce(l,T,k,d,s)}x("iciclecolorway",T.colorway),x("extendiciclecolors")}},21538:function($,R,e){var A=e(674),k=e(14102);$.exports=function(l,T,x){var d=x.flipX,s=x.flipY,t=x.orientation==="h",o=x.maxDepth,r=T[0],n=T[1];o&&(r=(l.height+1)*T[0]/Math.min(l.height+1,o),n=(l.height+1)*T[1]/Math.min(l.height+1,o));var a=A.partition().padding(x.pad.inner).size(t?[T[1],r]:[T[0],n])(l);return(t||d||s)&&k(a,T,{swapXY:t,flipX:d,flipY:s}),a}},85596:function($,R,e){var A=e(80694),k=e(90666);$.exports=function(l,T,x,d){return A(l,T,x,d,{type:"icicle",drawDescendants:k})}},82454:function($,R,e){var A=e(39898),k=e(7901),l=e(71828),T=e(72597).resizeText;function x(d,s,t){var o=s.data.data,r=!s.children,n=o.i,a=l.castOption(t,n,"marker.line.color")||k.defaultLine,i=l.castOption(t,n,"marker.line.width")||0;d.style("stroke-width",i).call(k.fill,o.color).call(k.stroke,a).style("opacity",r?t.leaf.opacity:null)}$.exports={style:function(d){var s=d._fullLayout._iciclelayer.selectAll(".trace");T(d,s,"icicle"),s.each(function(t){var o=A.select(this),r=t[0].trace;o.style("opacity",r.opacity),o.selectAll("path.surface").each(function(n){A.select(this).call(x,n,r)})})},styleOne:x}},17230:function($,R,e){for(var A=e(9012),k=e(5386).f,l=e(1426).extendFlat,T=e(51877).colormodel,x=["rgb","rgba","rgba256","hsl","hsla"],d=[],s=[],t=0;t<x.length;t++){var o=T[x[t]];d.push("For the `"+x[t]+"` colormodel, it is ["+(o.zminDflt||o.min).join(", ")+"]."),s.push("For the `"+x[t]+"` colormodel, it is ["+(o.zmaxDflt||o.max).join(", ")+"].")}$.exports=l({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:x,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:l({},A.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:k({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function($,R,e){var A=e(71828),k=e(51877),l=e(92770),T=e(89298),x=e(71828).maxRowLength,d=e(67395).A;function s(o,r,n,a){return function(i){return A.constrain((i-o)*r,n,a)}}function t(o,r){return function(n){return A.constrain(n,o,r)}}$.exports=function(o,r){var n,a;if(r._hasZ)n=r.z.length,a=x(r.z);else if(r._hasSource){var i=d(r.source);n=i.height,a=i.width}var c,h=T.getFromId(o,r.xaxis||"x"),f=T.getFromId(o,r.yaxis||"y"),b=h.d2c(r.x0)-r.dx/2,v=f.d2c(r.y0)-r.dy/2,g=[b,b+a*r.dx],y=[v,v+n*r.dy];if(h&&h.type==="log")for(c=0;c<a;c++)g.push(b+c*r.dx);if(f&&f.type==="log")for(c=0;c<n;c++)y.push(v+c*r.dy);return r._extremes[h._id]=T.findExtremes(h,g),r._extremes[f._id]=T.findExtremes(f,y),r._scaler=function(p){var m=k.colormodel[p.colormodel],w=(m.colormodel||p.colormodel).length;p._sArray=[];for(var u=0;u<w;u++)m.min[u]!==p.zmin[u]||m.max[u]!==p.zmax[u]?p._sArray.push(s(p.zmin[u],(m.max[u]-m.min[u])/(p.zmax[u]-p.zmin[u]),m.min[u],m.max[u])):p._sArray.push(t(m.min[u],m.max[u]));return function(S){for(var _=S.slice(0,w),E=0;E<w;E++){var L=_[E];if(!l(L))return!1;_[E]=p._sArray[E](L)}return _}}(r),[{x0:b,y0:v,z:r.z,w:a,h:n}]}},51877:function($){$.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(R){return R.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(R){return R.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(R){return R.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(R){var e=R.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["°","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(R){var e=R.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["°","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},13245:function($,R,e){var A=e(71828),k=e(17230),l=e(51877),T=e(25095).IMAGE_URL_PREFIX;$.exports=function(x,d){function s(r,n){return A.coerce(x,d,k,r,n)}s("source"),d.source&&!d.source.match(T)&&delete d.source,d._hasSource=!!d.source;var t,o=s("z");d._hasZ=!(o===void 0||!o.length||!o[0]||!o[0].length),d._hasZ||d._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),d._hasZ?(s("colormodel","rgb"),s("zmin",(t=l.colormodel[d.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):d._hasSource&&(d.colormodel="rgba256",t=l.colormodel[d.colormodel],d.zmin=t.zminDflt,d.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),d._length=null):d.visible=!1}},30835:function($){$.exports=function(R,e){return"xVal"in e&&(R.x=e.xVal),"yVal"in e&&(R.y=e.yVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R.color=e.color,R.colormodel=e.trace.colormodel,R.z||(R.z=e.color),R}},67395:function($,R,e){var A=e(33575),k=e(25095).IMAGE_URL_PREFIX,l=e(12856).Buffer;R.A=function(T){var x=T.replace(k,""),d=new l(x,"base64");return A(d)}},28749:function($,R,e){var A=e(30211),k=e(71828),l=e(51877);$.exports=function(T,x,d){var s=T.cd[0],t=s.trace,o=T.xa,r=T.ya;if(!(A.inbox(x-s.x0,x-(s.x0+s.w*t.dx),0)>0||A.inbox(d-s.y0,d-(s.y0+s.h*t.dy),0)>0)){var n,a=Math.floor((x-s.x0)/t.dx),i=Math.floor(Math.abs(d-s.y0)/t.dy);if(t._hasZ?n=s.z[i][a]:t._hasSource&&(n=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(a,i,1,1).data),n){var c,h=s.hi||t.hoverinfo;if(h){var f=h.split("+");f.indexOf("all")!==-1&&(f=["color"]),f.indexOf("color")!==-1&&(c=!0)}var b,v=l.colormodel[t.colormodel],g=v.colormodel||t.colormodel,y=g.length,p=t._scaler(n),m=v.suffix,w=[];(t.hovertemplate||c)&&(w.push("["+[p[0]+m[0],p[1]+m[1],p[2]+m[2]].join(", ")),y===4&&w.push(", "+p[3]+m[3]),w.push("]"),w=w.join(""),T.extraText=g.toUpperCase()+": "+w),Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[i])?b=t.hovertext[i][a]:Array.isArray(t.text)&&Array.isArray(t.text[i])&&(b=t.text[i][a]);var u=r.c2p(s.y0+(i+.5)*t.dy),S=s.x0+(a+.5)*t.dx,_=s.y0+(i+.5)*t.dy,E="["+n.slice(0,t.colormodel.length).join(", ")+"]";return[k.extendFlat(T,{index:[i,a],x0:o.c2p(s.x0+a*t.dx),x1:o.c2p(s.x0+(a+1)*t.dx),y0:u,y1:u,color:p,xVal:S,xLabelVal:S,yVal:_,yLabelVal:_,zLabelVal:E,text:b,hovertemplateLabels:{zLabel:E,colorLabel:w,"color[0]Label":p[0]+m[0],"color[1]Label":p[1]+m[1],"color[2]Label":p[2]+m[2],"color[3]Label":p[3]+m[3]}})]}}}},94507:function($,R,e){$.exports={attributes:e(17230),supplyDefaults:e(13245),calc:e(71113),plot:e(60775),style:e(12826),hoverPoints:e(28749),eventData:e(30835),moduleType:"trace",name:"image",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function($,R,e){var A=e(39898),k=e(71828),l=k.strTranslate,T=e(77922),x=e(51877),d=k.isIOS()||k.isSafari()||k.isIE();$.exports=function(s,t,o,r){var n=t.xaxis,a=t.yaxis,i=!(d||s._context._exportedPlot);k.makeTraceGroups(r,o,"im").each(function(c){var h=A.select(this),f=c[0],b=f.trace,v=(b.zsmooth==="fast"||b.zsmooth===!1&&i)&&!b._hasZ&&b._hasSource&&n.type==="linear"&&a.type==="linear";b._realImage=v;var g,y,p,m,w,u,S=f.z,_=f.x0,E=f.y0,L=f.w,C=f.h,P=b.dx,I=b.dy;for(u=0;g===void 0&&u<L;)g=n.c2p(_+u*P),u++;for(u=L;y===void 0&&u>0;)y=n.c2p(_+u*P),u--;for(u=0;m===void 0&&u<C;)m=a.c2p(E+u*I),u++;for(u=C;w===void 0&&u>0;)w=a.c2p(E+u*I),u--;y<g&&(p=y,y=g,g=p),w<m&&(p=m,m=w,w=p),v||(g=Math.max(-.5*n._length,g),y=Math.min(1.5*n._length,y),m=Math.max(-.5*a._length,m),w=Math.min(1.5*a._length,w));var U=Math.round(y-g),z=Math.round(w-m);if(U<=0||z<=0)h.selectAll("image").data([]).exit().remove();else{var H=h.selectAll("image").data([c]);H.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),H.exit().remove();var F=b.zsmooth===!1?x.pixelatedStyle:"";if(v){var N=k.simpleMap(n.range,n.r2l),B=k.simpleMap(a.range,a.r2l),j=N[1]<N[0],K=B[1]>B[0];if(j||K){var G=g+U/2,V=m+z/2;F+="transform:"+l(G+"px",V+"px")+"scale("+(j?-1:1)+","+(K?-1:1)+")"+l(-G+"px",-V+"px")+";"}}H.attr("style",F);var W=new Promise(function(X){if(b._hasZ)X();else if(b._hasSource)if(b._canvas&&b._canvas.el.width===L&&b._canvas.el.height===C&&b._canvas.source===b.source)X();else{var ee=document.createElement("canvas");ee.width=L,ee.height=C;var re=ee.getContext("2d",{willReadFrequently:!0});b._image=b._image||new Image;var ie=b._image;ie.onload=function(){re.drawImage(ie,0,0),b._canvas={el:ee,source:b.source},X()},ie.setAttribute("src",b.source)}}).then(function(){var X,ee;if(b._hasZ)ee=J(function(ie,se){return S[se][ie]}),X=ee.toDataURL("image/png");else if(b._hasSource)if(v)X=b.source;else{var re=b._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,L,C).data;ee=J(function(ie,se){var fe=4*(se*L+ie);return[re[fe],re[fe+1],re[fe+2],re[fe+3]]}),X=ee.toDataURL("image/png")}H.attr({"xlink:href":X,height:z,width:U,x:g,y:m})});s._promises.push(W)}function J(X){var ee=document.createElement("canvas");ee.width=U,ee.height=z;var re,ie=ee.getContext("2d",{willReadFrequently:!0}),se=function(Te){return k.constrain(Math.round(n.c2p(_+Te*P)-g),0,U)},fe=function(Te){return k.constrain(Math.round(a.c2p(E+Te*I)-m),0,z)},ye=x.colormodel[b.colormodel],ge=ye.colormodel||b.colormodel,he=ye.fmt;for(u=0;u<f.w;u++){var ve=se(u),Ie=se(u+1);if(Ie!==ve&&!isNaN(Ie)&&!isNaN(ve))for(var xe=0;xe<f.h;xe++){var Ae=fe(xe),Se=fe(xe+1);Se===Ae||isNaN(Se)||isNaN(Ae)||!X(u,xe)||(re=b._scaler(X(u,xe)),ie.fillStyle=re?ge+"("+he(re).join(",")+")":"rgba(0,0,0,0)",ie.fillRect(ve,Ae,Ie-ve,Se-Ae))}}return ee}})}},12826:function($,R,e){var A=e(39898);$.exports=function(k){A.select(k).selectAll(".im image").style("opacity",function(l){return l[0].trace.opacity})}},54846:function($,R,e){var A=e(1426).extendFlat,k=e(1426).extendDeep,l=e(30962).overrideAll,T=e(41940),x=e(22399),d=e(27670).Y,s=e(13838),t=e(44467).templatedArray,o=e(22372),r=e(12663).descriptionOnlyNumbers,n=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:x.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},i={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=t("step",k({},a,{range:i}));$.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:d({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:A({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:A({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:o.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:o.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:A({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:l({range:i,visible:A({},s.visible,{dflt:!0}),tickmode:s.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:A({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:A({},a.line.color,{}),width:A({},a.line.width,{dflt:1}),editType:"plot"},thickness:A({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function($,R,e){var A=e(74875);R.name="indicator",R.plot=function(k,l,T,x){A.plotBasePlot(R.name,k,l,T,x)},R.clean=function(k,l,T,x){A.cleanBasePlot(R.name,k,l,T,x)}},24667:function($){$.exports={calc:function(R,e){var A=[],k=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var l=e._lastValue,T=l;return e._hasDelta&&typeof e.delta.reference=="number"&&(T=e.delta.reference),A[0]={y:k,lastY:l,delta:k-T,relativeDelta:(k-T)/T},A}}},84577:function($){$.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function($,R,e){var A=e(71828),k=e(54846),l=e(27670).c,T=e(44467),x=e(85501),d=e(84577),s=e(26218),t=e(38701),o=e(96115),r=e(89426);function n(a,i){function c(h,f){return A.coerce(a,i,k.gauge.steps,h,f)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}$.exports={supplyDefaults:function(a,i,c,h){function f(L,C){return A.coerce(a,i,k,L,C)}l(i,h,f),f("mode"),i._hasNumber=i.mode.indexOf("number")!==-1,i._hasDelta=i.mode.indexOf("delta")!==-1,i._hasGauge=i.mode.indexOf("gauge")!==-1;var b=f("value");i._range=[0,typeof b=="number"?1.5*b:1];var v,g,y,p,m,w,u=new Array(2);function S(L,C){return A.coerce(y,p,k.gauge,L,C)}function _(L,C){return A.coerce(m,w,k.gauge.axis,L,C)}if(i._hasNumber&&(f("number.valueformat"),f("number.font.color",h.font.color),f("number.font.family",h.font.family),f("number.font.size"),i.number.font.size===void 0&&(i.number.font.size=d.defaultNumberFontSize,u[0]=!0),f("number.prefix"),f("number.suffix"),v=i.number.font.size),i._hasDelta&&(f("delta.font.color",h.font.color),f("delta.font.family",h.font.family),f("delta.font.size"),i.delta.font.size===void 0&&(i.delta.font.size=(i._hasNumber?.5:1)*(v||d.defaultNumberFontSize),u[1]=!0),f("delta.reference",i.value),f("delta.relative"),f("delta.valueformat",i.delta.relative?"2%":""),f("delta.increasing.symbol"),f("delta.increasing.color"),f("delta.decreasing.symbol"),f("delta.decreasing.color"),f("delta.position"),f("delta.prefix"),f("delta.suffix"),g=i.delta.font.size),i._scaleNumbers=(!i._hasNumber||u[0])&&(!i._hasDelta||u[1])||!1,f("title.font.color",h.font.color),f("title.font.family",h.font.family),f("title.font.size",.25*(v||g||d.defaultNumberFontSize)),f("title.text"),i._hasGauge){(y=a.gauge)||(y={}),p=T.newContainer(i,"gauge"),S("shape"),(i._isBullet=i.gauge.shape==="bullet")||f("title.align","center"),(i._isAngular=i.gauge.shape==="angular")||f("align","center"),S("bgcolor",h.paper_bgcolor),S("borderwidth"),S("bordercolor"),S("bar.color"),S("bar.line.color"),S("bar.line.width"),S("bar.thickness",d.valueThickness*(i.gauge.shape==="bullet"?.5:1)),x(y,p,{name:"steps",handleItemDefaults:n}),S("threshold.value"),S("threshold.thickness"),S("threshold.line.width"),S("threshold.line.color"),m={},y&&(m=y.axis||{}),w=T.newContainer(p,"axis"),_("visible"),i._range=_("range",i._range);var E={outerTicks:!0};s(m,w,_,"linear"),r(m,w,_,"linear",E),o(m,w,_,"linear",E),t(m,w,_,E)}else f("title.align","center"),f("align","center"),i._isAngular=i._isBullet=!1;i._length=null}}},15154:function($,R,e){$.exports={moduleType:"trace",name:"indicator",basePlotModule:e(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(54846),supplyDefaults:e(94425).supplyDefaults,calc:e(24667).calc,plot:e(75634),meta:{}}},75634:function($,R,e){var A=e(39898),k=e(29502).sX,l=e(29502).k4,T=e(71828),x=T.strScale,d=T.strTranslate,s=T.rad2deg,t=e(18783).MID_SHIFT,o=e(91424),r=e(84577),n=e(63893),a=e(89298),i=e(71453),c=e(52830),h=e(13838),f=e(7901),b={left:"start",center:"middle",right:"end"},v={left:0,center:.5,right:1},g=/[yzafpnµmkMGTPEZY]/;function y(_){return _&&_.duration>0}function p(_){_.each(function(E){f.stroke(A.select(this),E.line.color)}).each(function(E){f.fill(A.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function m(_,E,L){var C=_._fullLayout,P=T.extendFlat({type:"linear",ticks:"outside",range:L,showline:!0},E),I={type:"linear",_id:"x"+E._id},U={letter:"x",font:C.font,noHover:!0,noTickson:!0};function z(H,F){return T.coerce(P,I,h,H,F)}return i(P,I,z,U,C),c(P,I,z,U),I}function w(_,E,L){return[Math.min(E/_.width,L/_.height),_,E+"x"+L]}function u(_,E,L,C){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),I=A.select(P);return I.text(_).attr("x",0).attr("y",0).attr("text-anchor",L).attr("data-unformatted",_).call(n.convertToTspans,C).call(o.font,E),o.bBox(I.node())}function S(_,E,L,C,P,I){var U="_cache"+E;_[U]&&_[U].key===P||(_[U]={key:P,value:L});var z=T.aggNums(I,null,[_[U].value,C],2);return _[U].value=z,z}$.exports=function(_,E,L,C){var P,I=_._fullLayout;y(L)&&C&&(P=C()),T.makeTraceGroups(I._indicatorlayer,E,"trace").each(function(U){var z,H,F,N,B,j=U[0].trace,K=A.select(this),G=j._hasGauge,V=j._isAngular,W=j._isBullet,J=j.domain,X={w:I._size.w*(J.x[1]-J.x[0]),h:I._size.h*(J.y[1]-J.y[0]),l:I._size.l+I._size.w*J.x[0],r:I._size.r+I._size.w*(1-J.x[1]),t:I._size.t+I._size.h*(1-J.y[1]),b:I._size.b+I._size.h*J.y[0]},ee=X.l+X.w/2,re=X.t+X.h/2,ie=Math.min(X.w/2,X.h),se=r.innerRadius*ie,fe=j.align||"center";if(H=re,G){if(V&&(z=ee,H=re+ie/2,F=function(Se){return function(Te,Q){return[Q/Math.sqrt(Te.width/2*(Te.width/2)+Te.height*Te.height),Te,Q]}(Se,.9*se)}),W){var ye=r.bulletPadding,ge=1-r.bulletNumberDomainSize+ye;z=X.l+(ge+(1-ge)*v[fe])*X.w,F=function(Se){return w(Se,(r.bulletNumberDomainSize-ye)*X.w,X.h)}}}else z=X.l+v[fe]*X.w,F=function(Se){return w(Se,X.w,X.h)};(function(Se,Te,Q,oe){var ce,me,Me,Re=Q[0].trace,Ce=oe.numbersX,ze=oe.numbersY,le=Re.align||"center",de=b[le],be=oe.transitionOpts,Fe=oe.onComplete,Ve=T.ensureSingle(Te,"g","numbers"),He=[];Re._hasNumber&&He.push("number"),Re._hasDelta&&(He.push("delta"),Re.delta.position==="left"&&He.reverse());var rt=Ve.selectAll("text").data(He);function tt(zt,Ut,Pt,Ze){if(!zt.match("s")||Pt>=0==Ze>=0||Ut(Pt).slice(-1).match(g)||Ut(Ze).slice(-1).match(g))return Ut;var Ye=zt.slice().replace("s","f").replace(/\d+/,function(ke){return parseInt(ke)-1}),Be=m(Se,{tickformat:Ye});return function(ke){return Math.abs(ke)<1?a.tickText(Be,ke).text:Ut(ke)}}rt.enter().append("text"),rt.attr("text-anchor",function(){return de}).attr("class",function(zt){return zt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),rt.exit().remove();var ot,ht=Re.mode+Re.align;if(Re._hasDelta&&(ot=function(){var zt=m(Se,{tickformat:Re.delta.valueformat},Re._range);zt.setScale(),a.prepTicks(zt);var Ut=function(Xe){return a.tickText(zt,Xe).text},Pt=Re.delta.suffix,Ze=Re.delta.prefix,Ye=function(Xe){return Re.delta.relative?Xe.relativeDelta:Xe.delta},Be=function(Xe,nt){return Xe===0||typeof Xe!="number"||isNaN(Xe)?"-":(Xe>0?Re.delta.increasing.symbol:Re.delta.decreasing.symbol)+Ze+nt(Xe)+Pt},ke=function(Xe){return Xe.delta>=0?Re.delta.increasing.color:Re.delta.decreasing.color};Re._deltaLastValue===void 0&&(Re._deltaLastValue=Ye(Q[0]));var Pe=Ve.select("text.delta");function qe(){Pe.text(Be(Ye(Q[0]),Ut)).call(f.fill,ke(Q[0])).call(n.convertToTspans,Se)}return Pe.call(o.font,Re.delta.font).call(f.fill,ke({delta:Re._deltaLastValue})),y(be)?Pe.transition().duration(be.duration).ease(be.easing).tween("text",function(){var Xe=A.select(this),nt=Ye(Q[0]),ut=Re._deltaLastValue,ct=tt(Re.delta.valueformat,Ut,ut,nt),Ct=l(ut,nt);return Re._deltaLastValue=nt,function(Lt){Xe.text(Be(Ct(Lt),ct)),Xe.call(f.fill,ke({delta:Ct(Lt)}))}}).each("end",function(){qe(),Fe&&Fe()}).each("interrupt",function(){qe(),Fe&&Fe()}):qe(),me=u(Be(Ye(Q[0]),Ut),Re.delta.font,de,Se),Pe}(),ht+=Re.delta.position+Re.delta.font.size+Re.delta.font.family+Re.delta.valueformat,ht+=Re.delta.increasing.symbol+Re.delta.decreasing.symbol,Me=me),Re._hasNumber&&(function(){var zt=m(Se,{tickformat:Re.number.valueformat},Re._range);zt.setScale(),a.prepTicks(zt);var Ut=function(ke){return a.tickText(zt,ke).text},Pt=Re.number.suffix,Ze=Re.number.prefix,Ye=Ve.select("text.number");function Be(){var ke=typeof Q[0].y=="number"?Ze+Ut(Q[0].y)+Pt:"-";Ye.text(ke).call(o.font,Re.number.font).call(n.convertToTspans,Se)}y(be)?Ye.transition().duration(be.duration).ease(be.easing).each("end",function(){Be(),Fe&&Fe()}).each("interrupt",function(){Be(),Fe&&Fe()}).attrTween("text",function(){var ke=A.select(this),Pe=l(Q[0].lastY,Q[0].y);Re._lastValue=Q[0].y;var qe=tt(Re.number.valueformat,Ut,Q[0].lastY,Q[0].y);return function(Xe){ke.text(Ze+qe(Pe(Xe))+Pt)}}):Be(),ce=u(Ze+Ut(Q[0].y)+Pt,Re.number.font,de,Se)}(),ht+=Re.number.font.size+Re.number.font.family+Re.number.valueformat+Re.number.suffix+Re.number.prefix,Me=ce),Re._hasDelta&&Re._hasNumber){var _t,dt,bt=[(ce.left+ce.right)/2,(ce.top+ce.bottom)/2],St=[(me.left+me.right)/2,(me.top+me.bottom)/2],Et=.75*Re.delta.font.size;Re.delta.position==="left"&&(_t=S(Re,"deltaPos",0,-1*(ce.width*v[Re.align]+me.width*(1-v[Re.align])+Et),ht,Math.min),dt=bt[1]-St[1],Me={width:ce.width+me.width+Et,height:Math.max(ce.height,me.height),left:me.left+_t,right:ce.right,top:Math.min(ce.top,me.top+dt),bottom:Math.max(ce.bottom,me.bottom+dt)}),Re.delta.position==="right"&&(_t=S(Re,"deltaPos",0,ce.width*(1-v[Re.align])+me.width*v[Re.align]+Et,ht,Math.max),dt=bt[1]-St[1],Me={width:ce.width+me.width+Et,height:Math.max(ce.height,me.height),left:ce.left,right:me.right+_t,top:Math.min(ce.top,me.top+dt),bottom:Math.max(ce.bottom,me.bottom+dt)}),Re.delta.position==="bottom"&&(_t=null,dt=me.height,Me={width:Math.max(ce.width,me.width),height:ce.height+me.height,left:Math.min(ce.left,me.left),right:Math.max(ce.right,me.right),top:ce.bottom-ce.height,bottom:ce.bottom+me.height}),Re.delta.position==="top"&&(_t=null,dt=ce.top,Me={width:Math.max(ce.width,me.width),height:ce.height+me.height,left:Math.min(ce.left,me.left),right:Math.max(ce.right,me.right),top:ce.bottom-ce.height-me.height,bottom:ce.bottom}),ot.attr({dx:_t,dy:dt})}(Re._hasNumber||Re._hasDelta)&&Ve.attr("transform",function(){var zt=oe.numbersScaler(Me);ht+=zt[2];var Ut,Pt=S(Re,"numbersScale",1,zt[0],ht,Math.min);Re._scaleNumbers||(Pt=1),Ut=Re._isAngular?ze-Pt*Me.bottom:ze-Pt*(Me.top+Me.bottom)/2,Re._numbersTop=Pt*Me.top+Ut;var Ze=Me[le];le==="center"&&(Ze=(Me.left+Me.right)/2);var Ye=Ce-Pt*Ze;return Ye=S(Re,"numbersTranslate",0,Ye,ht,Math.max),d(Ye,Ut)+x(Pt)})})(_,K,U,{numbersX:z,numbersY:H,numbersScaler:F,transitionOpts:L,onComplete:P}),G&&(N={range:j.gauge.axis.range,color:j.gauge.bgcolor,line:{color:j.gauge.bordercolor,width:0},thickness:1},B={range:j.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:j.gauge.bordercolor,width:j.gauge.borderwidth},thickness:1});var he=K.selectAll("g.angular").data(V?U:[]);he.exit().remove();var ve=K.selectAll("g.angularaxis").data(V?U:[]);ve.exit().remove(),V&&function(Se,Te,Q,oe){var ce,me,Me,Re,Ce=Q[0].trace,ze=oe.size,le=oe.radius,de=oe.innerRadius,be=oe.gaugeBg,Fe=oe.gaugeOutline,Ve=[ze.l+ze.w/2,ze.t+ze.h/2+le/2],He=oe.gauge,rt=oe.layer,tt=oe.transitionOpts,ot=oe.onComplete,ht=Math.PI/2;function _t(Lt){var Mt=Ce.gauge.axis.range[0],mt=(Lt-Mt)/(Ce.gauge.axis.range[1]-Mt)*Math.PI-ht;return mt<-ht?-ht:mt>ht?ht:mt}function dt(Lt){return A.svg.arc().innerRadius((de+le)/2-Lt/2*(le-de)).outerRadius((de+le)/2+Lt/2*(le-de)).startAngle(-ht)}function bt(Lt){Lt.attr("d",function(Mt){return dt(Mt.thickness).startAngle(_t(Mt.range[0])).endAngle(_t(Mt.range[1]))()})}He.enter().append("g").classed("angular",!0),He.attr("transform",d(Ve[0],Ve[1])),rt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),rt.selectAll("g.xangularaxistick,path,text").remove(),(ce=m(Se,Ce.gauge.axis)).type="linear",ce.range=Ce.gauge.axis.range,ce._id="xangularaxis",ce.ticklabeloverflow="allow",ce.setScale();var St=function(Lt){return(ce.range[0]-Lt.x)/(ce.range[1]-ce.range[0])*Math.PI+Math.PI},Et={},zt=a.makeLabelFns(ce,0).labelStandoff;Et.xFn=function(Lt){var Mt=St(Lt);return Math.cos(Mt)*zt},Et.yFn=function(Lt){var Mt=St(Lt),mt=Math.sin(Mt)>0?.2:1;return-Math.sin(Mt)*(zt+Lt.fontSize*mt)+Math.abs(Math.cos(Mt))*(Lt.fontSize*t)},Et.anchorFn=function(Lt){var Mt=St(Lt),mt=Math.cos(Mt);return Math.abs(mt)<.1?"middle":mt>0?"start":"end"},Et.heightFn=function(Lt,Mt,mt){var kt=St(Lt);return-.5*(1+Math.sin(kt))*mt};var Ut=function(Lt){return d(Ve[0]+le*Math.cos(Lt),Ve[1]-le*Math.sin(Lt))};if(Me=function(Lt){return Ut(St(Lt))},me=a.calcTicks(ce),Re=a.getTickSigns(ce)[2],ce.visible){Re=ce.ticks==="inside"?-1:1;var Pt=(ce.linewidth||1)/2;a.drawTicks(Se,ce,{vals:me,layer:rt,path:"M"+Re*Pt+",0h"+Re*ce.ticklen,transFn:function(Lt){var Mt=St(Lt);return Ut(Mt)+"rotate("+-s(Mt)+")"}}),a.drawLabels(Se,ce,{vals:me,layer:rt,transFn:Me,labelFns:Et})}var Ze=[be].concat(Ce.gauge.steps),Ye=He.selectAll("g.bg-arc").data(Ze);Ye.enter().append("g").classed("bg-arc",!0).append("path"),Ye.select("path").call(bt).call(p),Ye.exit().remove();var Be=dt(Ce.gauge.bar.thickness),ke=He.selectAll("g.value-arc").data([Ce.gauge.bar]);ke.enter().append("g").classed("value-arc",!0).append("path");var Pe,qe,Xe,nt=ke.select("path");y(tt)?(nt.transition().duration(tt.duration).ease(tt.easing).each("end",function(){ot&&ot()}).each("interrupt",function(){ot&&ot()}).attrTween("d",(Pe=Be,qe=_t(Q[0].lastY),Xe=_t(Q[0].y),function(){var Lt=k(qe,Xe);return function(Mt){return Pe.endAngle(Lt(Mt))()}})),Ce._lastValue=Q[0].y):nt.attr("d",typeof Q[0].y=="number"?Be.endAngle(_t(Q[0].y)):"M0,0Z"),nt.call(p),ke.exit().remove(),Ze=[];var ut=Ce.gauge.threshold.value;(ut||ut===0)&&Ze.push({range:[ut,ut],color:Ce.gauge.threshold.color,line:{color:Ce.gauge.threshold.line.color,width:Ce.gauge.threshold.line.width},thickness:Ce.gauge.threshold.thickness});var ct=He.selectAll("g.threshold-arc").data(Ze);ct.enter().append("g").classed("threshold-arc",!0).append("path"),ct.select("path").call(bt).call(p),ct.exit().remove();var Ct=He.selectAll("g.gauge-outline").data([Fe]);Ct.enter().append("g").classed("gauge-outline",!0).append("path"),Ct.select("path").call(bt).call(p),Ct.exit().remove()}(_,0,U,{radius:ie,innerRadius:se,gauge:he,layer:ve,size:X,gaugeBg:N,gaugeOutline:B,transitionOpts:L,onComplete:P});var Ie=K.selectAll("g.bullet").data(W?U:[]);Ie.exit().remove();var xe=K.selectAll("g.bulletaxis").data(W?U:[]);xe.exit().remove(),W&&function(Se,Te,Q,oe){var ce,me,Me,Re,Ce,ze=Q[0].trace,le=oe.gauge,de=oe.layer,be=oe.gaugeBg,Fe=oe.gaugeOutline,Ve=oe.size,He=ze.domain,rt=oe.transitionOpts,tt=oe.onComplete;le.enter().append("g").classed("bullet",!0),le.attr("transform",d(Ve.l,Ve.t)),de.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),de.selectAll("g.xbulletaxistick,path,text").remove();var ot=Ve.h,ht=ze.gauge.bar.thickness*ot,_t=He.x[0],dt=He.x[0]+(He.x[1]-He.x[0])*(ze._hasNumber||ze._hasDelta?1-r.bulletNumberDomainSize:1);function bt(Ye){Ye.attr("width",function(Be){return Math.max(0,ce.c2p(Be.range[1])-ce.c2p(Be.range[0]))}).attr("x",function(Be){return ce.c2p(Be.range[0])}).attr("y",function(Be){return .5*(1-Be.thickness)*ot}).attr("height",function(Be){return Be.thickness*ot})}(ce=m(Se,ze.gauge.axis))._id="xbulletaxis",ce.domain=[_t,dt],ce.setScale(),me=a.calcTicks(ce),Me=a.makeTransTickFn(ce),Re=a.getTickSigns(ce)[2],Ce=Ve.t+Ve.h,ce.visible&&(a.drawTicks(Se,ce,{vals:ce.ticks==="inside"?a.clipEnds(ce,me):me,layer:de,path:a.makeTickPath(ce,Ce,Re),transFn:Me}),a.drawLabels(Se,ce,{vals:me,layer:de,transFn:Me,labelFns:a.makeLabelFns(ce,Ce)}));var St=[be].concat(ze.gauge.steps),Et=le.selectAll("g.bg-bullet").data(St);Et.enter().append("g").classed("bg-bullet",!0).append("rect"),Et.select("rect").call(bt).call(p),Et.exit().remove();var zt=le.selectAll("g.value-bullet").data([ze.gauge.bar]);zt.enter().append("g").classed("value-bullet",!0).append("rect"),zt.select("rect").attr("height",ht).attr("y",(ot-ht)/2).call(p),y(rt)?zt.select("rect").transition().duration(rt.duration).ease(rt.easing).each("end",function(){tt&&tt()}).each("interrupt",function(){tt&&tt()}).attr("width",Math.max(0,ce.c2p(Math.min(ze.gauge.axis.range[1],Q[0].y)))):zt.select("rect").attr("width",typeof Q[0].y=="number"?Math.max(0,ce.c2p(Math.min(ze.gauge.axis.range[1],Q[0].y))):0),zt.exit().remove();var Ut=Q.filter(function(){return ze.gauge.threshold.value||ze.gauge.threshold.value===0}),Pt=le.selectAll("g.threshold-bullet").data(Ut);Pt.enter().append("g").classed("threshold-bullet",!0).append("line"),Pt.select("line").attr("x1",ce.c2p(ze.gauge.threshold.value)).attr("x2",ce.c2p(ze.gauge.threshold.value)).attr("y1",(1-ze.gauge.threshold.thickness)/2*ot).attr("y2",(1-(1-ze.gauge.threshold.thickness)/2)*ot).call(f.stroke,ze.gauge.threshold.line.color).style("stroke-width",ze.gauge.threshold.line.width),Pt.exit().remove();var Ze=le.selectAll("g.gauge-outline").data([Fe]);Ze.enter().append("g").classed("gauge-outline",!0).append("rect"),Ze.select("rect").call(bt).call(p),Ze.exit().remove()}(_,0,U,{gauge:Ie,layer:xe,size:X,gaugeBg:N,gaugeOutline:B,transitionOpts:L,onComplete:P});var Ae=K.selectAll("text.title").data(U);Ae.exit().remove(),Ae.enter().append("text").classed("title",!0),Ae.attr("text-anchor",function(){return W?b.right:b[j.title.align]}).text(j.title.text).call(o.font,j.title.font).call(n.convertToTspans,_),Ae.attr("transform",function(){var Se,Te=X.l+X.w*v[j.title.align],Q=r.titlePadding,oe=o.bBox(Ae.node());return G?(V&&(Se=j.gauge.axis.visible?o.bBox(ve.node()).top-Q-oe.bottom:X.t+X.h/2-ie/2-oe.bottom-Q),W&&(Se=H-(oe.top+oe.bottom)/2,Te=X.l-r.bulletPadding*X.w)):Se=j._numbersTop-Q-oe.bottom,d(Te,Se)})})}},16249:function($,R,e){var A=e(50693),k=e(12663).axisHoverFormat,l=e(5386).f,T=e(2418),x=e(9012),d=e(1426).extendFlat,s=e(30962).overrideAll,t=$.exports=s(d({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:d({},x.showlegend,{dflt:!1})},A("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:d({},x.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},56959:function($,R,e){var A=e(78803),k=e(88489).processGrid,l=e(88489).filter;$.exports=function(T,x){x._len=Math.min(x.x.length,x.y.length,x.z.length,x.value.length),x._x=l(x.x,x._len),x._y=l(x.y,x._len),x._z=l(x.z,x._len),x._value=l(x.value,x._len);var d=k(x);x._gridFill=d.fill,x._Xs=d.Xs,x._Ys=d.Ys,x._Zs=d.Zs,x._len=d.len;for(var s=1/0,t=-1/0,o=0;o<x._len;o++){var r=x._value[o];s=Math.min(s,r),t=Math.max(t,r)}x._minValues=s,x._maxValues=t,x._vMin=x.isomin===void 0||x.isomin===null?s:x.isomin,x._vMax=x.isomax===void 0||x.isomin===null?t:x.isomax,A(T,x,{vals:[x._vMin,x._vMax],containerStr:"",cLetter:"c"})}},22674:function($,R,e){var A=e(9330).gl_mesh3d,k=e(81697).parseColorScale,l=e(78614),T=e(21081).extractOpts,x=e(90060),d=function(n,a){for(var i=a.length-1;i>0;i--){var c=Math.min(a[i],a[i-1]),h=Math.max(a[i],a[i-1]);if(h>c&&c<n&&n<=h)return{id:i,distRatio:(h-n)/(h-c)}}return{id:0,distRatio:0}};function s(n,a,i){this.scene=n,this.uid=i,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var t=s.prototype;t.handlePick=function(n){if(n.object===this.mesh){var a=n.data.index,i=this.data._meshX[a],c=this.data._meshY[a],h=this.data._meshZ[a],f=this.data._Ys.length,b=this.data._Zs.length,v=d(i,this.data._Xs).id,g=d(c,this.data._Ys).id,y=d(h,this.data._Zs).id,p=n.index=y+b*g+b*f*v;n.traceCoordinate=[this.data._meshX[p],this.data._meshY[p],this.data._meshZ[p],this.data._value[p]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&m[p]!==void 0?n.textLabel=m[p]:m&&(n.textLabel=m),!0}},t.update=function(n){var a=this.scene,i=a.fullSceneLayout;function c(b,v,g,y){return v.map(function(p){return b.d2l(p,0,y)*g})}this.data=r(n);var h={positions:x(c(i.xaxis,n._meshX,a.dataScale[0],n.xcalendar),c(i.yaxis,n._meshY,a.dataScale[1],n.ycalendar),c(i.zaxis,n._meshZ,a.dataScale[2],n.zcalendar)),cells:x(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,contourEnable:n.contour.show,contourColor:l(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},f=T(n);h.vertexIntensity=n._meshIntensity,h.vertexIntensityBounds=[f.min,f.max],h.colormap=k(n),this.mesh.update(h)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var o=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(n){n._meshI=[],n._meshJ=[],n._meshK=[];var a,i,c,h,f,b,v,g=n.surface.show,y=n.spaceframe.show,p=n.surface.fill,m=n.spaceframe.fill,w=!1,u=!1,S=0,_=n._Xs,E=n._Ys,L=n._Zs,C=_.length,P=E.length,I=L.length,U=o.indexOf(n._gridFill.replace(/-/g,"").replace(/\+/g,"")),z=function(ze,le,de){switch(U){case 5:return de+I*le+I*P*ze;case 4:return de+I*ze+I*C*le;case 3:return le+P*de+P*I*ze;case 2:return le+P*ze+P*C*de;case 1:return ze+C*de+C*I*le;default:return ze+C*le+C*P*de}},H=n._minValues,F=n._maxValues,N=n._vMin,B=n._vMax;function j(ze,le,de){for(var be=b.length,Fe=i;Fe<be;Fe++)if(ze===c[Fe]&&le===h[Fe]&&de===f[Fe])return Fe;return-1}function K(){i=a}function G(){c=[],h=[],f=[],b=[],a=0,K()}function V(ze,le,de,be){return c.push(ze),h.push(le),f.push(de),b.push(be),++a-1}function W(ze,le,de){for(var be=[],Fe=0;Fe<ze.length;Fe++)be[Fe]=ze[Fe]*(1-de)+de*le[Fe];return be}function J(ze){v=ze}function X(ze,le){return ze==="all"||ze===null||ze.indexOf(le)>-1}function ee(ze,le){return ze===null?le:ze}function re(ze,le,de){K();var be,Fe,Ve,He=[le],rt=[de];if(v>=1)He=[le],rt=[de];else if(v>0){var tt=function(Ut,Pt){var Ze=Ut[0],Ye=Ut[1],Be=Ut[2],ke=function(Lt,Mt,mt){for(var kt=[],wt=0;wt<Lt.length;wt++)kt[wt]=(Lt[wt]+Mt[wt]+mt[wt])/3;return kt}(Ze,Ye,Be),Pe=Math.sqrt(1-v),qe=W(ke,Ze,Pe),Xe=W(ke,Ye,Pe),nt=W(ke,Be,Pe),ut=Pt[0],ct=Pt[1],Ct=Pt[2];return{xyzv:[[Ze,Ye,Xe],[Xe,qe,Ze],[Ye,Be,nt],[nt,Xe,Ye],[Be,Ze,qe],[qe,nt,Be]],abc:[[ut,ct,-1],[-1,-1,ut],[ct,Ct,-1],[-1,-1,ct],[Ct,ut,-1],[-1,-1,Ct]]}}(le,de);He=tt.xyzv,rt=tt.abc}for(var ot=0;ot<He.length;ot++){le=He[ot],de=rt[ot];for(var ht=[],_t=0;_t<3;_t++){var dt=le[_t][0],bt=le[_t][1],St=le[_t][2],Et=le[_t][3],zt=de[_t]>-1?de[_t]:j(dt,bt,St);ht[_t]=zt>-1?zt:V(dt,bt,St,ee(ze,Et))}be=ht[0],Fe=ht[1],Ve=ht[2],n._meshI.push(be),n._meshJ.push(Fe),n._meshK.push(Ve),++S}}function ie(ze,le,de,be){var Fe=ze[3];Fe<de&&(Fe=de),Fe>be&&(Fe=be);for(var Ve=(ze[3]-Fe)/(ze[3]-le[3]+1e-9),He=[],rt=0;rt<4;rt++)He[rt]=(1-Ve)*ze[rt]+Ve*le[rt];return He}function se(ze,le,de){return ze>=le&&ze<=de}function fe(ze){var le=.001*(B-N);return ze>=N-le&&ze<=B+le}function ye(ze){for(var le=[],de=0;de<4;de++){var be=ze[de];le.push([n._x[be],n._y[be],n._z[be],n._value[be]])}return le}function ge(ze,le,de,be,Fe,Ve){Ve||(Ve=1),de=[-1,-1,-1];var He=!1,rt=[se(le[0][3],be,Fe),se(le[1][3],be,Fe),se(le[2][3],be,Fe)];if(!rt[0]&&!rt[1]&&!rt[2])return!1;var tt=function(ht,_t,dt){return fe(_t[0][3])&&fe(_t[1][3])&&fe(_t[2][3])?(re(ht,_t,dt),!0):Ve<3&&ge(ht,_t,dt,N,B,++Ve)};if(rt[0]&&rt[1]&&rt[2])return tt(ze,le,de)||He;var ot=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(ht){if(rt[ht[0]]&&rt[ht[1]]&&!rt[ht[2]]){var _t=le[ht[0]],dt=le[ht[1]],bt=le[ht[2]],St=ie(bt,_t,be,Fe),Et=ie(bt,dt,be,Fe);He=tt(ze,[Et,St,_t],[-1,-1,de[ht[0]]])||He,He=tt(ze,[_t,dt,Et],[de[ht[0]],de[ht[1]],-1])||He,ot=!0}}),ot||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(ht){if(rt[ht[0]]&&!rt[ht[1]]&&!rt[ht[2]]){var _t=le[ht[0]],dt=le[ht[1]],bt=le[ht[2]],St=ie(dt,_t,be,Fe),Et=ie(bt,_t,be,Fe);He=tt(ze,[Et,St,_t],[-1,-1,de[ht[0]]])||He,ot=!0}}),He}function he(ze,le,de,be){var Fe=!1,Ve=ye(le),He=[se(Ve[0][3],de,be),se(Ve[1][3],de,be),se(Ve[2][3],de,be),se(Ve[3][3],de,be)];if(!(He[0]||He[1]||He[2]||He[3]))return Fe;if(He[0]&&He[1]&&He[2]&&He[3])return u&&(Fe=function(tt,ot,ht){var _t=function(dt,bt,St){re(tt,[ot[dt],ot[bt],ot[St]],[ht[dt],ht[bt],ht[St]])};_t(0,1,2),_t(3,0,1),_t(2,3,0),_t(1,2,3)}(ze,Ve,le)||Fe),Fe;var rt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(tt){if(He[tt[0]]&&He[tt[1]]&&He[tt[2]]&&!He[tt[3]]){var ot=Ve[tt[0]],ht=Ve[tt[1]],_t=Ve[tt[2]],dt=Ve[tt[3]];if(u)Fe=re(ze,[ot,ht,_t],[le[tt[0]],le[tt[1]],le[tt[2]]])||Fe;else{var bt=ie(dt,ot,de,be),St=ie(dt,ht,de,be),Et=ie(dt,_t,de,be);Fe=re(null,[bt,St,Et],[-1,-1,-1])||Fe}rt=!0}}),rt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(tt){if(He[tt[0]]&&He[tt[1]]&&!He[tt[2]]&&!He[tt[3]]){var ot=Ve[tt[0]],ht=Ve[tt[1]],_t=Ve[tt[2]],dt=Ve[tt[3]],bt=ie(_t,ot,de,be),St=ie(_t,ht,de,be),Et=ie(dt,ht,de,be),zt=ie(dt,ot,de,be);u?(Fe=re(ze,[ot,zt,bt],[le[tt[0]],-1,-1])||Fe,Fe=re(ze,[ht,St,Et],[le[tt[1]],-1,-1])||Fe):Fe=function(Ut,Pt,Ze){var Ye=function(Be,ke,Pe){re(null,[Pt[Be],Pt[ke],Pt[Pe]],[Ze[Be],Ze[ke],Ze[Pe]])};Ye(0,1,2),Ye(2,3,0)}(0,[bt,St,Et,zt],[-1,-1,-1,-1])||Fe,rt=!0}}),rt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(tt){if(He[tt[0]]&&!He[tt[1]]&&!He[tt[2]]&&!He[tt[3]]){var ot=Ve[tt[0]],ht=Ve[tt[1]],_t=Ve[tt[2]],dt=Ve[tt[3]],bt=ie(ht,ot,de,be),St=ie(_t,ot,de,be),Et=ie(dt,ot,de,be);u?(Fe=re(ze,[ot,bt,St],[le[tt[0]],-1,-1])||Fe,Fe=re(ze,[ot,St,Et],[le[tt[0]],-1,-1])||Fe,Fe=re(ze,[ot,Et,bt],[le[tt[0]],-1,-1])||Fe):Fe=re(null,[bt,St,Et],[-1,-1,-1])||Fe,rt=!0}})),Fe}function ve(ze,le,de,be,Fe,Ve,He,rt,tt,ot,ht){var _t=!1;return w&&(X(ze,"A")&&(_t=he(null,[le,de,be,Ve],ot,ht)||_t),X(ze,"B")&&(_t=he(null,[de,be,Fe,tt],ot,ht)||_t),X(ze,"C")&&(_t=he(null,[de,Ve,He,tt],ot,ht)||_t),X(ze,"D")&&(_t=he(null,[be,Ve,rt,tt],ot,ht)||_t),X(ze,"E")&&(_t=he(null,[de,be,Ve,tt],ot,ht)||_t)),u&&(_t=he(ze,[de,be,Ve,tt],ot,ht)||_t),_t}function Ie(ze,le,de,be,Fe,Ve,He,rt){return[rt[0]===!0||ge(ze,ye([le,de,be]),[le,de,be],Ve,He),rt[1]===!0||ge(ze,ye([be,Fe,le]),[be,Fe,le],Ve,He)]}function xe(ze,le,de,be,Fe,Ve,He,rt,tt){return rt?Ie(ze,le,de,Fe,be,Ve,He,tt):Ie(ze,de,Fe,be,le,Ve,He,tt)}function Ae(ze,le,de,be,Fe,Ve,He){var rt,tt,ot,ht,_t=!1,dt=function(){_t=ge(ze,[rt,tt,ot],[-1,-1,-1],Fe,Ve)||_t,_t=ge(ze,[ot,ht,rt],[-1,-1,-1],Fe,Ve)||_t},bt=He[0],St=He[1],Et=He[2];return bt&&(rt=W(ye([z(le,de-0,be-0)])[0],ye([z(le-1,de-0,be-0)])[0],bt),tt=W(ye([z(le,de-0,be-1)])[0],ye([z(le-1,de-0,be-1)])[0],bt),ot=W(ye([z(le,de-1,be-1)])[0],ye([z(le-1,de-1,be-1)])[0],bt),ht=W(ye([z(le,de-1,be-0)])[0],ye([z(le-1,de-1,be-0)])[0],bt),dt()),St&&(rt=W(ye([z(le-0,de,be-0)])[0],ye([z(le-0,de-1,be-0)])[0],St),tt=W(ye([z(le-0,de,be-1)])[0],ye([z(le-0,de-1,be-1)])[0],St),ot=W(ye([z(le-1,de,be-1)])[0],ye([z(le-1,de-1,be-1)])[0],St),ht=W(ye([z(le-1,de,be-0)])[0],ye([z(le-1,de-1,be-0)])[0],St),dt()),Et&&(rt=W(ye([z(le-0,de-0,be)])[0],ye([z(le-0,de-0,be-1)])[0],Et),tt=W(ye([z(le-0,de-1,be)])[0],ye([z(le-0,de-1,be-1)])[0],Et),ot=W(ye([z(le-1,de-1,be)])[0],ye([z(le-1,de-1,be-1)])[0],Et),ht=W(ye([z(le-1,de-0,be)])[0],ye([z(le-1,de-0,be-1)])[0],Et),dt()),_t}function Se(ze,le,de,be,Fe,Ve,He,rt,tt,ot,ht,_t){var dt=ze;return _t?(w&&ze==="even"&&(dt=null),ve(dt,le,de,be,Fe,Ve,He,rt,tt,ot,ht)):(w&&ze==="odd"&&(dt=null),ve(dt,tt,rt,He,Ve,Fe,be,de,le,ot,ht))}function Te(ze,le,de,be,Fe){for(var Ve=[],He=0,rt=0;rt<le.length;rt++)for(var tt=le[rt],ot=1;ot<I;ot++)for(var ht=1;ht<P;ht++)Ve.push(xe(ze,z(tt,ht-1,ot-1),z(tt,ht-1,ot),z(tt,ht,ot-1),z(tt,ht,ot),de,be,(tt+ht+ot)%2,Fe&&Fe[He]?Fe[He]:[])),He++;return Ve}function Q(ze,le,de,be,Fe){for(var Ve=[],He=0,rt=0;rt<le.length;rt++)for(var tt=le[rt],ot=1;ot<C;ot++)for(var ht=1;ht<I;ht++)Ve.push(xe(ze,z(ot-1,tt,ht-1),z(ot,tt,ht-1),z(ot-1,tt,ht),z(ot,tt,ht),de,be,(ot+tt+ht)%2,Fe&&Fe[He]?Fe[He]:[])),He++;return Ve}function oe(ze,le,de,be,Fe){for(var Ve=[],He=0,rt=0;rt<le.length;rt++)for(var tt=le[rt],ot=1;ot<P;ot++)for(var ht=1;ht<C;ht++)Ve.push(xe(ze,z(ht-1,ot-1,tt),z(ht-1,ot,tt),z(ht,ot-1,tt),z(ht,ot,tt),de,be,(ht+ot+tt)%2,Fe&&Fe[He]?Fe[He]:[])),He++;return Ve}function ce(ze,le,de){for(var be=1;be<I;be++)for(var Fe=1;Fe<P;Fe++)for(var Ve=1;Ve<C;Ve++)Se(ze,z(Ve-1,Fe-1,be-1),z(Ve-1,Fe-1,be),z(Ve-1,Fe,be-1),z(Ve-1,Fe,be),z(Ve,Fe-1,be-1),z(Ve,Fe-1,be),z(Ve,Fe,be-1),z(Ve,Fe,be),le,de,(Ve+Fe+be)%2)}function me(ze,le,de,be,Fe,Ve){for(var He=[],rt=0,tt=0;tt<le.length;tt++)for(var ot=le[tt],ht=1;ht<I;ht++)for(var _t=1;_t<P;_t++)He.push(Ae(ze,ot,_t,ht,de,be,Fe[tt],Ve&&Ve[rt]&&Ve[rt])),rt++;return He}function Me(ze,le,de,be,Fe,Ve){for(var He=[],rt=0,tt=0;tt<le.length;tt++)for(var ot=le[tt],ht=1;ht<C;ht++)for(var _t=1;_t<I;_t++)He.push(Ae(ze,ht,ot,_t,de,be,Fe[tt],Ve&&Ve[rt]&&Ve[rt])),rt++;return He}function Re(ze,le,de,be,Fe,Ve){for(var He=[],rt=0,tt=0;tt<le.length;tt++)for(var ot=le[tt],ht=1;ht<P;ht++)for(var _t=1;_t<C;_t++)He.push(Ae(ze,_t,ht,ot,de,be,Fe[tt],Ve&&Ve[rt]&&Ve[rt])),rt++;return He}function Ce(ze,le){for(var de=[],be=ze;be<le;be++)de.push(be);return de}return function(){G(),function(){for(var tt=0;tt<C;tt++)for(var ot=0;ot<P;ot++)for(var ht=0;ht<I;ht++){var _t=z(tt,ot,ht);V(n._x[_t],n._y[_t],n._z[_t],n._value[_t])}}();var ze=null;if(y&&m&&(J(m),u=!0,ce(ze,N,B),u=!1),g&&p){J(p);for(var le=n.surface.pattern,de=n.surface.count,be=0;be<de;be++){var Fe=de===1?.5:be/(de-1),Ve=(1-Fe)*N+Fe*B,He=Math.abs(Ve-H)>Math.abs(Ve-F)?[H,Ve]:[Ve,F];w=!0,ce(le,He[0],He[1]),w=!1}}var rt=[[Math.min(N,F),Math.max(N,F)],[Math.min(H,B),Math.max(H,B)]];["x","y","z"].forEach(function(tt){for(var ot=[],ht=0;ht<rt.length;ht++){var _t=0,dt=rt[ht][0],bt=rt[ht][1],St=n.slices[tt];if(St.show&&St.fill){J(St.fill);var Et=[],zt=[],Ut=[];if(St.locations.length)for(var Pt=0;Pt<St.locations.length;Pt++){var Ze=d(St.locations[Pt],tt==="x"?_:tt==="y"?E:L);Ze.distRatio===0?Et.push(Ze.id):Ze.id>0&&(zt.push(Ze.id),tt==="x"?Ut.push([Ze.distRatio,0,0]):tt==="y"?Ut.push([0,Ze.distRatio,0]):Ut.push([0,0,Ze.distRatio]))}else Et=Ce(1,tt==="x"?C-1:tt==="y"?P-1:I-1);zt.length>0&&(ot[_t]=tt==="x"?me(ze,zt,dt,bt,Ut,ot[_t]):tt==="y"?Me(ze,zt,dt,bt,Ut,ot[_t]):Re(ze,zt,dt,bt,Ut,ot[_t]),_t++),Et.length>0&&(ot[_t]=tt==="x"?Te(ze,Et,dt,bt,ot[_t]):tt==="y"?Q(ze,Et,dt,bt,ot[_t]):oe(ze,Et,dt,bt,ot[_t]),_t++)}var Ye=n.caps[tt];Ye.show&&Ye.fill&&(J(Ye.fill),ot[_t]=tt==="x"?Te(ze,[0,C-1],dt,bt,ot[_t]):tt==="y"?Q(ze,[0,P-1],dt,bt,ot[_t]):oe(ze,[0,I-1],dt,bt,ot[_t]),_t++)}}),S===0&&G(),n._meshX=c,n._meshY=h,n._meshZ=f,n._meshIntensity=b,n._Xs=_,n._Ys=E,n._Zs=L}(),n}$.exports={findNearestOnAxis:d,generateIsoMeshes:r,createIsosurfaceTrace:function(n,a){var i=n.glplot.gl,c=A({gl:i}),h=new s(n,c,a.uid);return c._trace=h,h.update(a),n.glplot.add(c),h}}},82738:function($,R,e){var A=e(71828),k=e(73972),l=e(16249),T=e(1586);function x(d,s,t,o,r){var n=r("isomin"),a=r("isomax");a!=null&&n!=null&&n>a&&(s.isomin=null,s.isomax=null);var i=r("x"),c=r("y"),h=r("z"),f=r("value");i&&i.length&&c&&c.length&&h&&h.length&&f&&f.length?(k.getComponentMethod("calendars","handleTraceDefaults")(d,s,["x","y","z"],o),r("valuehoverformat"),["x","y","z"].forEach(function(b){r(b+"hoverformat");var v="caps."+b;r(v+".show")&&r(v+".fill");var g="slices."+b;r(g+".show")&&(r(g+".fill"),r(g+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(b){r(b)}),T(d,s,o,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}$.exports={supplyDefaults:function(d,s,t,o){x(d,s,0,o,function(r,n){return A.coerce(d,s,l,r,n)})},supplyIsoDefaults:x}},64943:function($,R,e){$.exports={attributes:e(16249),supplyDefaults:e(82738).supplyDefaults,calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function($,R,e){var A=e(50693),k=e(12663).axisHoverFormat,l=e(5386).f,T=e(54532),x=e(9012),d=e(1426).extendFlat;$.exports=d({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},A("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:d({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:d({},T.lightposition.x,{dflt:1e5}),y:d({},T.lightposition.y,{dflt:1e5}),z:d({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:d({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:d({},x.hoverinfo,{editType:"calc"}),showlegend:d({},x.showlegend,{dflt:!1})})},82932:function($,R,e){var A=e(78803);$.exports=function(k,l){l.intensity&&A(k,l,{vals:l.intensity,containerStr:"",cLetter:"c"})}},91134:function($,R,e){var A=e(9330).gl_mesh3d,k=e(9330).delaunay_triangulate,l=e(9330).alpha_shape,T=e(9330).convex_hull,x=e(81697).parseColorScale,d=e(78614),s=e(21081).extractOpts,t=e(90060);function o(h,f,b){this.scene=h,this.uid=b,this.mesh=f,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=o.prototype;function n(h){for(var f=[],b=h.length,v=0;v<b;v++)f[v]=d(h[v]);return f}function a(h,f,b,v){for(var g=[],y=f.length,p=0;p<y;p++)g[p]=h.d2l(f[p],0,v)*b;return g}function i(h){for(var f=[],b=h.length,v=0;v<b;v++)f[v]=Math.round(h[v]);return f}function c(h,f){for(var b=h.length,v=0;v<b;v++)if(h[v]<=-.5||h[v]>=f-.5)return!1;return!0}r.handlePick=function(h){if(h.object===this.mesh){var f=h.index=h.data.index;h.data._cellCenter?h.traceCoordinate=h.data.dataCoordinate:h.traceCoordinate=[this.data.x[f],this.data.y[f],this.data.z[f]];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&b[f]!==void 0?h.textLabel=b[f]:b&&(h.textLabel=b),!0}},r.update=function(h){var f=this.scene,b=f.fullSceneLayout;this.data=h;var v,g=h.x.length,y=t(a(b.xaxis,h.x,f.dataScale[0],h.xcalendar),a(b.yaxis,h.y,f.dataScale[1],h.ycalendar),a(b.zaxis,h.z,f.dataScale[2],h.zcalendar));if(h.i&&h.j&&h.k){if(h.i.length!==h.j.length||h.j.length!==h.k.length||!c(h.i,g)||!c(h.j,g)||!c(h.k,g))return;v=t(i(h.i),i(h.j),i(h.k))}else v=h.alphahull===0?T(y):h.alphahull>0?l(h.alphahull,y):function(u,S){for(var _=["x","y","z"].indexOf(u),E=[],L=S.length,C=0;C<L;C++)E[C]=[S[C][(_+1)%3],S[C][(_+2)%3]];return k(E)}(h.delaunayaxis,y);var p={positions:y,cells:v,lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:d(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading};if(h.intensity){var m=s(h);this.color="#fff";var w=h.intensitymode;p[w+"Intensity"]=h.intensity,p[w+"IntensityBounds"]=[m.min,m.max],p.colormap=x(h)}else h.vertexcolor?(this.color=h.vertexcolor[0],p.vertexColors=n(h.vertexcolor)):h.facecolor?(this.color=h.facecolor[0],p.cellColors=n(h.facecolor)):(this.color=h.color,p.meshColor=d(h.color));this.mesh.update(p)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(h,f){var b=h.glplot.gl,v=A({gl:b}),g=new o(h,v,f.uid);return v._trace=g,g.update(f),h.glplot.add(v),g}},58669:function($,R,e){var A=e(73972),k=e(71828),l=e(1586),T=e(2418);$.exports=function(x,d,s,t){function o(n,a){return k.coerce(x,d,T,n,a)}function r(n){var a=n.map(function(i){var c=o(i);return c&&k.isArrayOrTypedArray(c)?c:null});return a.every(function(i){return i&&i.length===a[0].length})&&a}r(["x","y","z"])?(r(["i","j","k"]),(!d.i||d.j&&d.k)&&(!d.j||d.k&&d.i)&&(!d.k||d.i&&d.j)?(A.getComponentMethod("calendars","handleTraceDefaults")(x,d,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){o(n)}),o("contour.show")&&(o("contour.color"),o("contour.width")),"intensity"in x?(o("intensity"),o("intensitymode"),l(x,d,t,o,{prefix:"",cLetter:"c"})):(d.showscale=!1,"facecolor"in x?o("facecolor"):"vertexcolor"in x?o("vertexcolor"):o("color",s)),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),d._length=null):d.visible=!1):d.visible=!1}},21164:function($,R,e){$.exports={attributes:e(2418),supplyDefaults:e(58669),calc:e(82932),colorbar:{min:"cmin",max:"cmax"},plot:e(91134),moduleType:"trace",name:"mesh3d",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function($,R,e){var A=e(71828).extendFlat,k=e(82196),l=e(12663).axisHoverFormat,T=e(79952).P,x=e(77914),d=e(22372),s=d.INCREASING.COLOR,t=d.DECREASING.COLOR,o=k.line;function r(n){return{line:{color:A({},o.color,{dflt:n}),width:o.width,dash:T,editType:"style"},editType:"style"}}$.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:A({},o.width,{}),dash:A({},T,{}),editType:"style"},increasing:r(s),decreasing:r(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:A({},x.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function($,R,e){var A=e(71828),k=A._,l=e(89298),T=e(42973),x=e(50606).BADNUM;function d(t,o,r,n){return{o:t,h:o,l:r,c:n}}function s(t,o,r,n,a,i){for(var c=a.makeCalcdata(o,"open"),h=a.makeCalcdata(o,"high"),f=a.makeCalcdata(o,"low"),b=a.makeCalcdata(o,"close"),v=Array.isArray(o.text),g=Array.isArray(o.hovertext),y=!0,p=null,m=!!o.xperiodalignment,w=[],u=0;u<n.length;u++){var S=n[u],_=c[u],E=h[u],L=f[u],C=b[u];if(S!==x&&_!==x&&E!==x&&L!==x&&C!==x){C===_?p!==null&&C!==p&&(y=C>p):y=C>_,p=C;var P=i(_,E,L,C);P.pos=S,P.yc=(_+C)/2,P.i=u,P.dir=y?"increasing":"decreasing",P.x=P.pos,P.y=[L,E],m&&(P.orig_p=r[u]),v&&(P.tx=o.text[u]),g&&(P.htx=o.hovertext[u]),w.push(P)}else w.push({pos:S,empty:!0})}return o._extremes[a._id]=l.findExtremes(a,A.concat(f,h),{padded:!0}),w.length&&(w[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),w}$.exports={calc:function(t,o){var r=l.getFromId(t,o.xaxis),n=l.getFromId(t,o.yaxis),a=function(b,v,g){var y=g._minDiff;if(!y){var p,m=b._fullData,w=[];for(y=1/0,p=0;p<m.length;p++){var u=m[p];if(u.type==="ohlc"&&u.visible===!0&&u.xaxis===v._id){w.push(u);var S=v.makeCalcdata(u,"x");u._origX=S;var _=T(g,v,"x",S).vals;u._xcalc=_;var E=A.distinctVals(_).minDiff;E&&isFinite(E)&&(y=Math.min(y,E))}}for(y===1/0&&(y=1),p=0;p<w.length;p++)w[p]._minDiff=y}return y*g.tickwidth}(t,r,o),i=o._minDiff;o._minDiff=null;var c=o._origX;o._origX=null;var h=o._xcalc;o._xcalc=null;var f=s(t,o,c,h,n,d);return o._extremes[r._id]=l.findExtremes(r,h,{vpad:i/2}),f.length?(A.extendFlat(f[0].t,{wHover:i/2,tickLen:a}),f):[{t:{empty:!0}}]},calcCommon:s}},16169:function($,R,e){var A=e(71828),k=e(14555),l=e(73927),T=e(2522);function x(d,s,t,o){t(o+".line.color"),t(o+".line.width",s.line.width),t(o+".line.dash",s.line.dash)}$.exports=function(d,s,t,o){function r(n,a){return A.coerce(d,s,T,n,a)}k(d,s,r,o)?(l(d,s,o,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),x(0,s,r,"increasing"),x(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),o._requestRangeslider[s.xaxis]=!0):s.visible=!1}},66449:function($,R,e){var A=e(89298),k=e(71828),l=e(30211),T=e(7901),x=e(71828).fillText,d=e(22372),s={increasing:d.INCREASING.SYMBOL,decreasing:d.DECREASING.SYMBOL};function t(n,a,i,c){var h,f,b=n.cd,v=n.xa,g=b[0].trace,y=b[0].t,p=g.type,m=p==="ohlc"?"l":"min",w=p==="ohlc"?"h":"max",u=y.bPos||0,S=y.bdPos||y.tickLen,_=y.wHover,E=Math.min(1,S/Math.abs(v.r2c(v.range[1])-v.r2c(v.range[0])));function L(F){var N=function(B){return B.pos+u-a}(F);return l.inbox(N-_,N+_,h)}function C(F){var N=F[m],B=F[w];return N===B||l.inbox(N-i,B-i,h)}function P(F){return(L(F)+C(F))/2}h=n.maxHoverDistance-E,f=n.maxSpikeDistance-E;var I=l.getDistanceFunction(c,L,C,P);if(l.getClosest(b,I,n),n.index===!1)return null;var U=b[n.index];if(U.empty)return null;var z=g[U.dir],H=z.line.color;return T.opacity(H)&&z.line.width?n.color=H:n.color=z.fillcolor,n.x0=v.c2p(U.pos+u-S,!0),n.x1=v.c2p(U.pos+u+S,!0),n.xLabelVal=U.orig_p!==void 0?U.orig_p:U.pos,n.spikeDistance=P(U)*f/h,n.xSpike=v.c2p(U.pos,!0),n}function o(n,a,i,c){var h=n.cd,f=n.ya,b=h[0].trace,v=h[0].t,g=[],y=t(n,a,i,c);if(!y)return[];var p=h[y.index].hi||b.hoverinfo,m=p.split("+");if(p!=="all"&&m.indexOf("y")===-1)return[];for(var w=["high","open","close","low"],u={},S=0;S<w.length;S++){var _,E=w[S],L=b[E][y.index],C=f.c2p(L,!0);L in u?(_=u[L]).yLabel+="<br>"+v.labels[E]+A.hoverLabelText(f,L,b.yhoverformat):((_=k.extendFlat({},y)).y0=_.y1=C,_.yLabelVal=L,_.yLabel=v.labels[E]+A.hoverLabelText(f,L,b.yhoverformat),_.name="",g.push(_),u[L]=_)}return g}function r(n,a,i,c){var h=n.cd,f=n.ya,b=h[0].trace,v=h[0].t,g=t(n,a,i,c);if(!g)return[];var y=h[g.index],p=g.index=y.i,m=y.dir;function w(P){return v.labels[P]+A.hoverLabelText(f,b[P][p],b.yhoverformat)}var u=y.hi||b.hoverinfo,S=u.split("+"),_=u==="all",E=_||S.indexOf("y")!==-1,L=_||S.indexOf("text")!==-1,C=E?[w("open"),w("high"),w("low"),w("close")+"  "+s[m]]:[];return L&&x(y,b,C),g.extraText=C.join("<br>"),g.y0=g.y1=f.c2p(y.yc,!0),[g]}$.exports={hoverPoints:function(n,a,i,c){return n.cd[0].trace.hoverlabel.split?o(n,a,i,c):r(n,a,i,c)},hoverSplit:o,hoverOnPoints:r}},54186:function($,R,e){$.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(2522),supplyDefaults:e(16169),calc:e(3485).calc,plot:e(72314),style:e(53101),hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},14555:function($,R,e){var A=e(73972),k=e(71828);$.exports=function(l,T,x,d){var s=x("x"),t=x("open"),o=x("high"),r=x("low"),n=x("close");if(x("hoverlabel.split"),A.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x"],d),t&&o&&r&&n){var a=Math.min(t.length,o.length,r.length,n.length);return s&&(a=Math.min(a,k.minRowLength(s))),T._length=a,a}}},72314:function($,R,e){var A=e(39898),k=e(71828);$.exports=function(l,T,x,d){var s=T.yaxis,t=T.xaxis,o=!!t.rangebreaks;k.makeTraceGroups(d,x,"trace ohlc").each(function(r){var n=A.select(this),a=r[0],i=a.t;if(a.trace.visible!==!0||i.empty)n.remove();else{var c=i.tickLen,h=n.selectAll("path").data(k.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(f){if(f.empty)return"M0,0Z";var b=t.c2p(f.pos-c,!0),v=t.c2p(f.pos+c,!0),g=o?(b+v)/2:t.c2p(f.pos,!0);return"M"+b+","+s.c2p(f.o,!0)+"H"+g+"M"+g+","+s.c2p(f.h,!0)+"V"+s.c2p(f.l,!0)+"M"+v+","+s.c2p(f.c,!0)+"H"+g})}})}},67324:function($){$.exports=function(R,e){var A,k=R.cd,l=R.xaxis,T=R.yaxis,x=[],d=k[0].t.bPos||0;if(e===!1)for(A=0;A<k.length;A++)k[A].selected=0;else for(A=0;A<k.length;A++){var s=k[A];e.contains([l.c2p(s.pos+d),T.c2p(s.yc)],null,s.i,R)?(x.push({pointNumber:s.i,x:l.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return x}},53101:function($,R,e){var A=e(39898),k=e(91424),l=e(7901);$.exports=function(T,x,d){var s=d||A.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var o=t[0].trace;A.select(this).selectAll("path").each(function(r){if(!r.empty){var n=o[r.dir].line;A.select(this).style("fill","none").call(l.stroke,n.color).call(k.dashLine,n.dash,n.width).style("opacity",o.selectedpoints&&!r.selected?.3:1)}})})}},99506:function($,R,e){var A=e(1426).extendFlat,k=e(9012),l=e(41940),T=e(50693),x=e(5386).f,d=e(27670).Y,s=A({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:x({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});$.exports={domain:d({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:A({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:x({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:l({editType:"calc"}),tickfont:l({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function($,R,e){var A=e(27659).a0,k=e(45784),l="parcats";R.name=l,R.plot=function(T,x,d,s){var t=A(T.calcdata,l);if(t.length){var o=t[0];k(T,o,d,s)}},R.clean=function(T,x,d,s){var t=s._has&&s._has("parcats"),o=x._has&&x._has("parcats");t&&!o&&s._paperdiv.selectAll(".parcats").remove()}},28699:function($,R,e){var A=e(28984).wrap,k=e(52075).hasColorscale,l=e(78803),T=e(75744),x=e(91424),d=e(71828),s=e(92770);function t(n,a,i){n.valueInds.push(a),n.count+=i}function o(n,a,i){return{categoryInds:n,color:a,rawColor:i,valueInds:[],count:0}}function r(n,a,i){n.valueInds.push(a),n.count+=i}$.exports=function(n,a){var i=d.filterVisible(a.dimensions);if(i.length===0)return[];var c,h,f,b=i.map(function(j){var K;if(j.categoryorder==="trace")K=null;else if(j.categoryorder==="array")K=j.categoryarray;else{K=T(j.values);for(var G=!0,V=0;V<K.length;V++)if(!s(K[V])){G=!1;break}K.sort(G?d.sorterAsc:void 0),j.categoryorder==="category descending"&&(K=K.reverse())}return function(W,J){J=J==null?[]:J.map(function(ge){return ge});var X={},ee={},re=[];J.forEach(function(ge,he){X[ge]=0,ee[ge]=he});for(var ie=0;ie<W.length;ie++){var se,fe=W[ie];X[fe]===void 0?(X[fe]=1,se=J.push(fe)-1,ee[fe]=se):(X[fe]++,se=ee[fe]),re.push(se)}var ye=J.map(function(ge){return X[ge]});return{uniqueValues:J,uniqueCounts:ye,inds:re}}(j.values,K)});c=d.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(j){var K,G=j.map(function(V){return V.displayindex});if(function(V){for(var W=new Array(V.length),J=0;J<V.length;J++){if(V[J]<0||V[J]>=V.length||W[V[J]]!==void 0)return!1;W[V[J]]=!0}return!0}(G))for(K=0;K<j.length;K++)j[K]._displayindex=j[K].displayindex;else for(K=0;K<j.length;K++)j[K]._displayindex=K}(i),i.forEach(function(j,K){(function(G,V){G._categoryarray=V.uniqueValues,G.ticktext===null||G.ticktext===void 0?G._ticktext=[]:G._ticktext=G.ticktext.slice();for(var W=G._ticktext.length;W<V.uniqueValues.length;W++)G._ticktext.push(V.uniqueValues[W])})(j,b[K])});var v,g=a.line;g?(k(a,"line")&&l(n,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),v=x.tryColorscale(g)):v=d.identity;var y,p,m,w,u,S=i[0].values.length,_={},E=b.map(function(j){return j.inds});for(f=0,y=0;y<S;y++){var L=[];for(p=0;p<E.length;p++)L.push(E[p][y]);h=c[y%c.length],f+=h;var C=(m=y,w=void 0,u=void 0,d.isArrayOrTypedArray(g.color)?u=w=g.color[m%g.color.length]:w=g.color,{color:v(w),rawColor:u}),P=L+"-"+C.rawColor;_[P]===void 0&&(_[P]=o(L,C.color,C.rawColor)),r(_[P],y,h)}var I,U=i.map(function(j,K){return function(G,V,W,J,X){return{dimensionInd:G,containerInd:V,displayInd:W,dimensionLabel:J,count:X,categories:[],dragX:null}}(K,j._index,j._displayindex,j.label,f)});for(y=0;y<S;y++)for(h=c[y%c.length],p=0;p<U.length;p++){var z=U[p].containerInd,H=b[p].inds[y],F=U[p].categories;if(F[H]===void 0){var N=a.dimensions[z]._categoryarray[H],B=a.dimensions[z]._ticktext[H];F[H]={dimensionInd:p,categoryInd:I=H,categoryValue:N,displayInd:I,categoryLabel:B,valueInds:[],count:0,dragY:null}}t(F[H],y,h)}return A(function(j,K,G){var V=j.map(function(W){return W.categories.length}).reduce(function(W,J){return Math.max(W,J)});return{dimensions:j,paths:K,trace:void 0,maxCats:V,count:G}}(U,_,f))}},14647:function($,R,e){var A=e(71828),k=e(52075).hasColorscale,l=e(1586),T=e(27670).c,x=e(85501),d=e(99506),s=e(94397);function t(o,r){function n(v,g){return A.coerce(o,r,d.dimensions,v,g)}var a=n("values"),i=n("visible");if(a&&a.length||(i=r.visible=!1),i){n("label"),n("displayindex",r._index);var c,h=o.categoryarray,f=Array.isArray(h)&&h.length>0;f&&(c="array");var b=n("categoryorder",c);b==="array"?(n("categoryarray"),n("ticktext")):(delete o.categoryarray,delete o.ticktext),f||b!=="array"||(r.categoryorder="trace")}}$.exports=function(o,r,n,a){function i(v,g){return A.coerce(o,r,d,v,g)}var c=x(o,r,{name:"dimensions",handleItemDefaults:t}),h=function(v,g,y,p,m){m("line.shape"),m("line.hovertemplate");var w=m("line.color",p.colorway[0]);if(k(v,"line")&&A.isArrayOrTypedArray(w)){if(w.length)return m("line.colorscale"),l(v,g,p,m,{prefix:"line.",cLetter:"c"}),w.length;g.line.color=y}return 1/0}(o,r,n,a,i);T(r,a,i),Array.isArray(c)&&c.length||(r.visible=!1),s(r,c,"values",h),i("hoveron"),i("hovertemplate"),i("arrangement"),i("bundlecolors"),i("sortpaths"),i("counts");var f={family:a.font.family,size:Math.round(a.font.size),color:a.font.color};A.coerceFont(i,"labelfont",f);var b={family:a.font.family,size:Math.round(a.font.size/1.2),color:a.font.color};A.coerceFont(i,"tickfont",b)}},94873:function($,R,e){$.exports={attributes:e(99506),supplyDefaults:e(14647),calc:e(28699),plot:e(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(27677),categories:["noOpacity"],meta:{}}},45460:function($,R,e){var A=e(39898),k=e(29502).k4,l=e(72391),T=e(30211),x=e(71828),d=x.strTranslate,s=e(91424),t=e(84267),o=e(63893);function r(G,V,W,J){var X=V._context.staticPlot,ee=G.map(F.bind(0,V,W)),re=J.selectAll("g.parcatslayer").data([null]);re.enter().append("g").attr("class","parcatslayer").style("pointer-events",X?"none":"all");var ie=re.selectAll("g.trace.parcats").data(ee,n),se=ie.enter().append("g").attr("class","trace parcats");ie.attr("transform",function(Se){return d(Se.x,Se.y)}),se.append("g").attr("class","paths");var fe=ie.select("g.paths").selectAll("path.path").data(function(Se){return Se.paths},n);fe.attr("fill",function(Se){return Se.model.color});var ye=fe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Se){return Se.model.color}).attr("fill-opacity",0);g(ye),fe.attr("d",function(Se){return Se.svgD}),ye.empty()||fe.sort(i),fe.exit().remove(),fe.on("mouseover",c).on("mouseout",h).on("click",v),se.append("g").attr("class","dimensions");var ge=ie.select("g.dimensions").selectAll("g.dimension").data(function(Se){return Se.dimensions},n);ge.enter().append("g").attr("class","dimension"),ge.attr("transform",function(Se){return d(Se.x,0)}),ge.exit().remove();var he=ge.selectAll("g.category").data(function(Se){return Se.categories},n),ve=he.enter().append("g").attr("class","category");he.attr("transform",function(Se){return d(0,Se.y)}),ve.append("rect").attr("class","catrect").attr("pointer-events","none"),he.select("rect.catrect").attr("fill","none").attr("width",function(Se){return Se.width}).attr("height",function(Se){return Se.height}),p(ve);var Ie=he.selectAll("rect.bandrect").data(function(Se){return Se.bands},n);Ie.each(function(){x.raiseToTop(this)}),Ie.attr("fill",function(Se){return Se.color});var xe=Ie.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Se){return Se.color}).attr("fill-opacity",0);Ie.attr("fill",function(Se){return Se.color}).attr("width",function(Se){return Se.width}).attr("height",function(Se){return Se.height}).attr("y",function(Se){return Se.y}).attr("cursor",function(Se){return Se.parcatsViewModel.arrangement==="fixed"?"default":Se.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),m(xe),Ie.exit().remove(),ve.append("text").attr("class","catlabel").attr("pointer-events","none");var Ae=V._fullLayout.paper_bgcolor;he.select("text.catlabel").attr("text-anchor",function(Se){return a(Se)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",o.makeTextShadow(Ae)).style("fill","rgb(0, 0, 0)").attr("x",function(Se){return a(Se)?Se.width+5:-5}).attr("y",function(Se){return Se.height/2}).text(function(Se){return Se.model.categoryLabel}).each(function(Se){s.font(A.select(this),Se.parcatsViewModel.categorylabelfont),o.convertToTspans(A.select(this),V)}),ve.append("text").attr("class","dimlabel"),he.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Se){return Se.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Se){return Se.width/2}).attr("y",-5).text(function(Se,Te){return Te===0?Se.parcatsViewModel.model.dimensions[Se.model.dimensionInd].dimensionLabel:null}).each(function(Se){s.font(A.select(this),Se.parcatsViewModel.labelfont)}),he.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",L),he.exit().remove(),ge.call(A.behavior.drag().origin(function(Se){return{x:Se.x,y:0}}).on("dragstart",C).on("drag",P).on("dragend",I)),ie.each(function(Se){Se.traceSelection=A.select(this),Se.pathSelection=A.select(this).selectAll("g.paths").selectAll("path.path"),Se.dimensionSelection=A.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ie.exit().remove()}function n(G){return G.key}function a(G){var V=G.parcatsViewModel.dimensions.length,W=G.parcatsViewModel.dimensions[V-1].model.dimensionInd;return G.model.dimensionInd===W}function i(G,V){return G.model.rawColor>V.model.rawColor?1:G.model.rawColor<V.model.rawColor?-1:0}function c(G){if(!G.parcatsViewModel.dragDimension&&G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){x.raiseToTop(this),y(A.select(this));var V=f(G),W=b(G);if(G.parcatsViewModel.graphDiv.emit("plotly_hover",{points:V,event:A.event,constraints:W}),G.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var J,X,ee,re=A.mouse(this)[0],ie=G.parcatsViewModel.graphDiv,se=G.parcatsViewModel.trace,fe=ie._fullLayout,ye=fe._paperdiv.node().getBoundingClientRect(),ge=G.parcatsViewModel.graphDiv.getBoundingClientRect();for(ee=0;ee<G.leftXs.length-1;ee++)if(G.leftXs[ee]+G.dimWidths[ee]-2<=re&&re<=G.leftXs[ee+1]+2){var he=G.parcatsViewModel.dimensions[ee],ve=G.parcatsViewModel.dimensions[ee+1];J=(he.x+he.width+ve.x)/2,X=(G.topYs[ee]+G.topYs[ee+1]+G.height)/2;break}var Ie=G.parcatsViewModel.x+J,xe=G.parcatsViewModel.y+X,Ae=t.mostReadable(G.model.color,["black","white"]),Se=G.model.count,Te=Se/G.parcatsViewModel.model.count,Q={countLabel:Se,probabilityLabel:Te.toFixed(3)},oe=[];G.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&oe.push(["Count:",Q.countLabel].join(" ")),G.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&oe.push(["P:",Q.probabilityLabel].join(" "));var ce=oe.join("<br>"),me=A.mouse(ie)[0];T.loneHover({trace:se,x:Ie-ye.left+ge.left,y:xe-ye.top+ge.top,text:ce,color:G.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ae,idealAlign:me<Ie?"right":"left",hovertemplate:(se.line||{}).hovertemplate,hovertemplateLabels:Q,eventData:[{data:se._input,fullData:se,count:Se,probability:Te}]},{container:fe._hoverlayer.node(),outerContainer:fe._paper.node(),gd:ie})}}}function h(G){if(!G.parcatsViewModel.dragDimension&&(g(A.select(this)),T.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),G.parcatsViewModel.pathSelection.sort(i),G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var V=f(G),W=b(G);G.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:V,event:A.event,constraints:W})}}function f(G){for(var V=[],W=U(G.parcatsViewModel),J=0;J<G.model.valueInds.length;J++){var X=G.model.valueInds[J];V.push({curveNumber:W,pointNumber:X})}return V}function b(G){for(var V={},W=G.parcatsViewModel.model.dimensions,J=0;J<W.length;J++){var X=W[J],ee=X.categories[G.model.categoryInds[J]];V[X.containerInd]=ee.categoryValue}return G.model.rawColor!==void 0&&(V.color=G.model.rawColor),V}function v(G){if(G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var V=f(G),W=b(G);G.parcatsViewModel.graphDiv.emit("plotly_click",{points:V,event:A.event,constraints:W})}}function g(G){G.attr("fill",function(V){return V.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function y(G){G.attr("fill-opacity",.8).attr("stroke",function(V){return t.mostReadable(V.model.color,["black","white"])}).attr("stroke-width",.3)}function p(G){G.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m(G){G.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function w(G){var V=G.parcatsViewModel.pathSelection,W=G.categoryViewModel.model.dimensionInd,J=G.categoryViewModel.model.categoryInd;return V.filter(function(X){return X.model.categoryInds[W]===J&&X.model.color===G.color})}function u(G,V,W){var J=A.select(G).datum(),X=J.categoryViewModel.model,ee=J.parcatsViewModel.graphDiv,re=A.select(G.parentNode).selectAll("rect.bandrect"),ie=[];re.each(function(fe){w(fe).each(function(ye){Array.prototype.push.apply(ie,f(ye))})});var se={};se[X.dimensionInd]=X.categoryValue,ee.emit(V,{points:ie,event:W,constraints:se})}function S(G,V,W){var J=A.select(G).datum(),X=J.categoryViewModel.model,ee=J.parcatsViewModel.graphDiv,re=w(J),ie=[];re.each(function(fe){Array.prototype.push.apply(ie,f(fe))});var se={};se[X.dimensionInd]=X.categoryValue,J.rawColor!==void 0&&(se.color=J.rawColor),ee.emit(V,{points:ie,event:W,constraints:se})}function _(G,V,W){G._fullLayout._calcInverseTransform(G);var J,X,ee=G._fullLayout._invScaleX,re=G._fullLayout._invScaleY,ie=A.select(W.parentNode).select("rect.catrect"),se=ie.node().getBoundingClientRect(),fe=ie.datum(),ye=fe.parcatsViewModel,ge=ye.model.dimensions[fe.model.dimensionInd],he=ye.trace,ve=se.top+se.height/2;ye.dimensions.length>1&&ge.displayInd===ye.dimensions.length-1?(J=se.left,X="left"):(J=se.left+se.width,X="right");var Ie=fe.model.count,xe=fe.model.categoryLabel,Ae=Ie/fe.parcatsViewModel.model.count,Se={countLabel:Ie,categoryLabel:xe,probabilityLabel:Ae.toFixed(3)},Te=[];fe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Te.push(["Count:",Se.countLabel].join(" ")),fe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Te.push(["P("+Se.categoryLabel+"):",Se.probabilityLabel].join(" "));var Q=Te.join("<br>");return{trace:he,x:ee*(J-V.left),y:re*(ve-V.top),text:Q,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:X,hovertemplate:he.hovertemplate,hovertemplateLabels:Se,eventData:[{data:he._input,fullData:he,count:Ie,category:xe,probability:Ae}]}}function E(G){if(!G.parcatsViewModel.dragDimension&&G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(A.mouse(this)[1]<-1)return;var V,W=G.parcatsViewModel.graphDiv,J=W._fullLayout,X=J._paperdiv.node().getBoundingClientRect(),ee=G.parcatsViewModel.hoveron,re=this;ee==="color"?(function(ie){var se=A.select(ie).datum(),fe=w(se);y(fe),fe.each(function(){x.raiseToTop(this)}),A.select(ie.parentNode).selectAll("rect.bandrect").filter(function(ye){return ye.color===se.color}).each(function(){x.raiseToTop(this),A.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(re),S(re,"plotly_hover",A.event)):(function(ie){A.select(ie.parentNode).selectAll("rect.bandrect").each(function(se){var fe=w(se);y(fe),fe.each(function(){x.raiseToTop(this)})}),A.select(ie.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(re),u(re,"plotly_hover",A.event)),G.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(ee==="category"?V=_(W,X,re):ee==="color"?V=function(ie,se,fe){ie._fullLayout._calcInverseTransform(ie);var ye,ge,he=ie._fullLayout._invScaleX,ve=ie._fullLayout._invScaleY,Ie=fe.getBoundingClientRect(),xe=A.select(fe).datum(),Ae=xe.categoryViewModel,Se=Ae.parcatsViewModel,Te=Se.model.dimensions[Ae.model.dimensionInd],Q=Se.trace,oe=Ie.y+Ie.height/2;Se.dimensions.length>1&&Te.displayInd===Se.dimensions.length-1?(ye=Ie.left,ge="left"):(ye=Ie.left+Ie.width,ge="right");var ce=Ae.model.categoryLabel,me=xe.parcatsViewModel.model.count,Me=0;xe.categoryViewModel.bands.forEach(function(rt){rt.color===xe.color&&(Me+=rt.count)});var Re=Ae.model.count,Ce=0;Se.pathSelection.each(function(rt){rt.model.color===xe.color&&(Ce+=rt.model.count)});var ze=Me/me,le=Me/Ce,de=Me/Re,be={countLabel:me,categoryLabel:ce,probabilityLabel:ze.toFixed(3)},Fe=[];Ae.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Fe.push(["Count:",be.countLabel].join(" ")),Ae.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Fe.push("P(color ∩ "+ce+"): "+be.probabilityLabel),Fe.push("P("+ce+" | color): "+le.toFixed(3)),Fe.push("P(color | "+ce+"): "+de.toFixed(3)));var Ve=Fe.join("<br>"),He=t.mostReadable(xe.color,["black","white"]);return{trace:Q,x:he*(ye-se.left),y:ve*(oe-se.top),text:Ve,color:xe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:He,fontSize:10,idealAlign:ge,hovertemplate:Q.hovertemplate,hovertemplateLabels:be,eventData:[{data:Q._input,fullData:Q,category:ce,count:me,probability:ze,categorycount:Re,colorcount:Ce,bandcolorcount:Me}]}}(W,X,re):ee==="dimension"&&(V=function(ie,se,fe){var ye=[];return A.select(fe.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ye.push(_(ie,se,this))}),ye}(W,X,re)),V&&T.loneHover(V,{container:J._hoverlayer.node(),outerContainer:J._paper.node(),gd:W}))}}function L(G){var V=G.parcatsViewModel;V.dragDimension||(g(V.pathSelection),p(V.dimensionSelection.selectAll("g.category")),m(V.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(V.graphDiv._fullLayout._hoverlayer.node()),V.pathSelection.sort(i),V.hoverinfoItems.indexOf("skip")!==-1)||(G.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",A.event):u(this,"plotly_unhover",A.event))}function C(G){G.parcatsViewModel.arrangement!=="fixed"&&(G.dragDimensionDisplayInd=G.model.displayInd,G.initialDragDimensionDisplayInds=G.parcatsViewModel.model.dimensions.map(function(V){return V.displayInd}),G.dragHasMoved=!1,G.dragCategoryDisplayInd=null,A.select(this).selectAll("g.category").select("rect.catrect").each(function(V){var W=A.mouse(this)[0],J=A.mouse(this)[1];-2<=W&&W<=V.width+2&&-2<=J&&J<=V.height+2&&(G.dragCategoryDisplayInd=V.model.displayInd,G.initialDragCategoryDisplayInds=G.model.categories.map(function(X){return X.displayInd}),V.model.dragY=V.y,x.raiseToTop(this.parentNode),A.select(this.parentNode).selectAll("rect.bandrect").each(function(X){X.y<J&&J<=X.y+X.height&&(G.potentialClickBand=this)}))}),G.parcatsViewModel.dragDimension=G,T.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P(G){if(G.parcatsViewModel.arrangement!=="fixed"&&(G.dragHasMoved=!0,G.dragDimensionDisplayInd!==null)){var V=G.dragDimensionDisplayInd,W=V-1,J=V+1,X=G.parcatsViewModel.dimensions[V];if(G.dragCategoryDisplayInd!==null){var ee=X.categories[G.dragCategoryDisplayInd];ee.model.dragY+=A.event.dy;var re=ee.model.dragY,ie=ee.model.displayInd,se=X.categories,fe=se[ie-1],ye=se[ie+1];fe!==void 0&&re<fe.y+fe.height/2&&(ee.model.displayInd=fe.model.displayInd,fe.model.displayInd=ie),ye!==void 0&&re+ee.height>ye.y+ye.height/2&&(ee.model.displayInd=ye.model.displayInd,ye.model.displayInd=ie),G.dragCategoryDisplayInd=ee.model.displayInd}if(G.dragCategoryDisplayInd===null||G.parcatsViewModel.arrangement==="freeform"){X.model.dragX=A.event.x;var ge=G.parcatsViewModel.dimensions[W],he=G.parcatsViewModel.dimensions[J];ge!==void 0&&X.model.dragX<ge.x+ge.width&&(X.model.displayInd=ge.model.displayInd,ge.model.displayInd=V),he!==void 0&&X.model.dragX+X.width>he.x&&(X.model.displayInd=he.model.displayInd,he.model.displayInd=G.dragDimensionDisplayInd),G.dragDimensionDisplayInd=X.model.displayInd}j(G.parcatsViewModel),B(G.parcatsViewModel),H(G.parcatsViewModel),z(G.parcatsViewModel)}}function I(G){if(G.parcatsViewModel.arrangement!=="fixed"&&G.dragDimensionDisplayInd!==null){A.select(this).selectAll("text").attr("font-weight","normal");var V={},W=U(G.parcatsViewModel),J=G.parcatsViewModel.model.dimensions.map(function(ye){return ye.displayInd}),X=G.initialDragDimensionDisplayInds.some(function(ye,ge){return ye!==J[ge]});X&&J.forEach(function(ye,ge){var he=G.parcatsViewModel.model.dimensions[ge].containerInd;V["dimensions["+he+"].displayindex"]=ye});var ee=!1;if(G.dragCategoryDisplayInd!==null){var re=G.model.categories.map(function(ye){return ye.displayInd});if(ee=G.initialDragCategoryDisplayInds.some(function(ye,ge){return ye!==re[ge]})){var ie=G.model.categories.slice().sort(function(ye,ge){return ye.displayInd-ge.displayInd}),se=ie.map(function(ye){return ye.categoryValue}),fe=ie.map(function(ye){return ye.categoryLabel});V["dimensions["+G.model.containerInd+"].categoryarray"]=[se],V["dimensions["+G.model.containerInd+"].ticktext"]=[fe],V["dimensions["+G.model.containerInd+"].categoryorder"]="array"}}G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!G.dragHasMoved&&G.potentialClickBand&&(G.parcatsViewModel.hoveron==="color"?S(G.potentialClickBand,"plotly_click",A.event.sourceEvent):u(G.potentialClickBand,"plotly_click",A.event.sourceEvent)),G.model.dragX=null,G.dragCategoryDisplayInd!==null&&(G.parcatsViewModel.dimensions[G.dragDimensionDisplayInd].categories[G.dragCategoryDisplayInd].model.dragY=null,G.dragCategoryDisplayInd=null),G.dragDimensionDisplayInd=null,G.parcatsViewModel.dragDimension=null,G.dragHasMoved=null,G.potentialClickBand=null,j(G.parcatsViewModel),B(G.parcatsViewModel),A.transition().duration(300).ease("cubic-in-out").each(function(){H(G.parcatsViewModel,!0),z(G.parcatsViewModel,!0)}).each("end",function(){(X||ee)&&l.restyle(G.parcatsViewModel.graphDiv,V,[W])})}}function U(G){for(var V,W=G.graphDiv._fullData,J=0;J<W.length;J++)if(G.key===W[J].uid){V=J;break}return V}function z(G,V){var W;V===void 0&&(V=!1),G.pathSelection.data(function(J){return J.paths},n),(W=G.pathSelection,V?W.transition():W).attr("d",function(J){return J.svgD})}function H(G,V){function W(re){return V?re.transition():re}V===void 0&&(V=!1),G.dimensionSelection.data(function(re){return re.dimensions},n);var J=G.dimensionSelection.selectAll("g.category").data(function(re){return re.categories},n);W(G.dimensionSelection).attr("transform",function(re){return d(re.x,0)}),W(J).attr("transform",function(re){return d(0,re.y)}),J.select(".dimlabel").text(function(re,ie){return ie===0?re.parcatsViewModel.model.dimensions[re.model.dimensionInd].dimensionLabel:null}),J.select(".catlabel").attr("text-anchor",function(re){return a(re)?"start":"end"}).attr("x",function(re){return a(re)?re.width+5:-5}).each(function(re){var ie,se;a(re)?(ie=re.width+5,se="start"):(ie=-5,se="end"),A.select(this).selectAll("tspan").attr("x",ie).attr("text-anchor",se)});var X=J.selectAll("rect.bandrect").data(function(re){return re.bands},n),ee=X.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(re){return re.color}).attr("fill-opacity",0);X.attr("fill",function(re){return re.color}).attr("width",function(re){return re.width}).attr("height",function(re){return re.height}).attr("y",function(re){return re.y}),m(ee),X.each(function(){x.raiseToTop(this)}),X.exit().remove()}function F(G,V,W){var J,X=W[0],ee=V.margin||{l:80,r:80,t:100,b:80},re=X.trace,ie=re.domain,se=V.width,fe=V.height,ye=Math.floor(se*(ie.x[1]-ie.x[0])),ge=Math.floor(fe*(ie.y[1]-ie.y[0])),he=ie.x[0]*se+ee.l,ve=V.height-ie.y[1]*V.height+ee.t,Ie=re.line.shape;J=re.hoverinfo==="all"?["count","probability"]:(re.hoverinfo||"").split("+");var xe={trace:re,key:re.uid,model:X,x:he,y:ve,width:ye,height:ge,hoveron:re.hoveron,hoverinfoItems:J,arrangement:re.arrangement,bundlecolors:re.bundlecolors,sortpaths:re.sortpaths,labelfont:re.labelfont,categorylabelfont:re.tickfont,pathShape:Ie,dragDimension:null,margin:ee,paths:[],dimensions:[],graphDiv:G,traceSelection:null,pathSelection:null,dimensionSelection:null};return X.dimensions&&(j(xe),B(xe)),xe}function N(G,V,W,J,X){var ee,re,ie=[],se=[];for(re=0;re<W.length-1;re++)ee=k(W[re]+G[re],G[re+1]),ie.push(ee(X)),se.push(ee(1-X));var fe="M "+G[0]+","+V[0];for(fe+="l"+W[0]+",0 ",re=1;re<W.length;re++)fe+="C"+ie[re-1]+","+V[re-1]+" "+se[re-1]+","+V[re]+" "+G[re]+","+V[re],fe+="l"+W[re]+",0 ";for(fe+="l0,"+J+" ",fe+="l -"+W[W.length-1]+",0 ",re=W.length-2;re>=0;re--)fe+="C"+se[re]+","+(V[re+1]+J)+" "+ie[re]+","+(V[re]+J)+" "+(G[re]+W[re])+","+(V[re]+J),fe+="l-"+W[re]+",0 ";return fe+"Z"}function B(G){var V=G.dimensions,W=G.model,J=V.map(function(be){return be.categories.map(function(Fe){return Fe.y})}),X=G.model.dimensions.map(function(be){return be.categories.map(function(Fe){return Fe.displayInd})}),ee=G.model.dimensions.map(function(be){return be.displayInd}),re=G.dimensions.map(function(be){return be.model.dimensionInd}),ie=V.map(function(be){return be.x}),se=V.map(function(be){return be.width}),fe=[];for(var ye in W.paths)W.paths.hasOwnProperty(ye)&&fe.push(W.paths[ye]);function ge(be){var Fe=be.categoryInds.map(function(Ve,He){return X[He][Ve]});return re.map(function(Ve){return Fe[Ve]})}fe.sort(function(be,Fe){var Ve=ge(be),He=ge(Fe);return G.sortpaths==="backward"&&(Ve.reverse(),He.reverse()),Ve.push(be.valueInds[0]),He.push(Fe.valueInds[0]),G.bundlecolors&&(Ve.unshift(be.rawColor),He.unshift(Fe.rawColor)),Ve<He?-1:Ve>He?1:0});for(var he=new Array(fe.length),ve=V[0].model.count,Ie=V[0].categories.map(function(be){return be.height}).reduce(function(be,Fe){return be+Fe}),xe=0;xe<fe.length;xe++){var Ae,Se=fe[xe];Ae=ve>0?Ie*(Se.count/ve):0;for(var Te,Q=new Array(J.length),oe=0;oe<Se.categoryInds.length;oe++){var ce=Se.categoryInds[oe],me=X[oe][ce],Me=ee[oe];Q[Me]=J[Me][me],J[Me][me]+=Ae;var Re=G.dimensions[Me].categories[me],Ce=Re.bands.length,ze=Re.bands[Ce-1];if(ze===void 0||Se.rawColor!==ze.rawColor){var le=ze===void 0?0:ze.y+ze.height;Re.bands.push({key:le,color:Se.color,rawColor:Se.rawColor,height:Ae,width:Re.width,count:Se.count,y:le,categoryViewModel:Re,parcatsViewModel:G})}else{var de=Re.bands[Ce-1];de.height+=Ae,de.count+=Se.count}}Te=G.pathShape==="hspline"?N(ie,Q,se,Ae,.5):N(ie,Q,se,Ae,0),he[xe]={key:Se.valueInds[0],model:Se,height:Ae,leftXs:ie,topYs:Q,dimWidths:se,svgD:Te,parcatsViewModel:G}}G.paths=he}function j(G){var V=G.model.dimensions.map(function(re){return{displayInd:re.displayInd,dimensionInd:re.dimensionInd}});V.sort(function(re,ie){return re.displayInd-ie.displayInd});var W=[];for(var J in V){var X=V[J].dimensionInd,ee=G.model.dimensions[X];W.push(K(G,ee))}G.dimensions=W}function K(G,V){var W,J=G.model.dimensions.length,X=V.displayInd;W=40+(J>1?(G.width-80-16)/(J-1):0)*X;var ee,re,ie,se,fe,ye=[],ge=G.model.maxCats,he=V.categories.length,ve=V.count,Ie=G.height-8*(ge-1),xe=8*(ge-he)/2,Ae=V.categories.map(function(Se){return{displayInd:Se.displayInd,categoryInd:Se.categoryInd}});for(Ae.sort(function(Se,Te){return Se.displayInd-Te.displayInd}),fe=0;fe<he;fe++)se=Ae[fe].categoryInd,re=V.categories[se],ee=ve>0?re.count/ve*Ie:0,ie={key:re.valueInds[0],model:re,width:16,height:ee,y:re.dragY!==null?re.dragY:xe,bands:[],parcatsViewModel:G},xe=xe+ee+8,ye.push(ie);return{key:V.dimensionInd,x:V.dragX!==null?V.dragX:W,y:0,width:16,model:V,categories:ye,parcatsViewModel:G,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}$.exports=function(G,V,W,J){r(W,G,J,V)}},45784:function($,R,e){var A=e(45460);$.exports=function(k,l,T,x){var d=k._fullLayout,s=d._paper,t=d._size;A(k,s,l,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,x)}},73362:function($,R,e){var A=e(50693),k=e(13838),l=e(41940),T=e(27670).Y,x=e(1426).extendFlat,d=e(44467).templatedArray;$.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:l({editType:"plot"}),tickfont:l({editType:"plot"}),rangefont:l({editType:"plot"}),dimensions:d("dimension",{label:{valType:"string",editType:"plot"},tickvals:x({},k.tickvals,{editType:"plot"}),ticktext:x({},k.ticktext,{editType:"plot"}),tickformat:x({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:x({editType:"calc"},A("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function($,R,e){var A=e(25706),k=e(39898),l=e(28984).keyFun,T=e(28984).repeat,x=e(71828).sorterAsc,d=e(71828).strTranslate,s=A.bar.snapRatio;function t(_,E){return _*(1-s)+E*s}var o=A.bar.snapClose;function r(_,E){return _*(1-o)+E*o}function n(_,E,L,C){if(function(K,G){for(var V=0;V<G.length;V++)if(K>=G[V][0]&&K<=G[V][1])return!0;return!1}(L,C))return L;var P=_?-1:1,I=0,U=E.length-1;if(P<0){var z=I;I=U,U=z}for(var H=E[I],F=H,N=I;P*N<P*U;N+=P){var B=N+P,j=E[B];if(P*L<P*r(H,j))return t(H,F);if(P*L<P*j||B===U)return t(j,H);F=H,H=j}}function a(_){_.attr("x",-A.bar.captureWidth/2).attr("width",A.bar.captureWidth)}function i(_){_.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(_){if(!_.brush.filterSpecified)return"0,"+_.height;for(var E,L,C,P=h(_.brush.filter.getConsolidated(),_.height),I=[0],U=P.length?P[0][0]:null,z=0;z<P.length;z++)L=(E=P[z])[1]-E[0],I.push(U),I.push(L),(C=z+1)<P.length&&(U=P[C][0]-E[1]);return I.push(_.height),I}function h(_,E){return _.map(function(L){return L.map(function(C){return Math.max(0,C*E)}).sort(x)})}function f(){k.select(document.body).style("cursor",null)}function b(_){_.attr("stroke-dasharray",c)}function v(_,E){var L=k.select(_).selectAll(".highlight, .highlight-shadow");b(E?L.transition().duration(A.bar.snapDuration).each("end",E):L)}function g(_,E){var L,C=_.brush,P=NaN,I={};if(C.filterSpecified){var U=_.height,z=C.filter.getConsolidated(),H=h(z,U),F=NaN,N=NaN,B=NaN;for(L=0;L<=H.length;L++){var j=H[L];if(j&&j[0]<=E&&E<=j[1]){F=L;break}if(N=L?L-1:NaN,j&&j[0]>E){B=L;break}}if(P=F,isNaN(P)&&(P=isNaN(N)||isNaN(B)?isNaN(N)?B:N:E-H[N][1]<H[B][0]-E?N:B),!isNaN(P)){var K=H[P],G=function(X,ee){var re=A.bar.handleHeight;if(!(ee>X[1]+re||ee<X[0]-re))return ee>=.9*X[1]+.1*X[0]?"n":ee<=.9*X[0]+.1*X[1]?"s":"ns"}(K,E);G&&(I.interval=z[P],I.intervalPix=K,I.region=G)}}if(_.ordinal&&!I.region){var V=_.unitTickvals,W=_.unitToPaddedPx.invert(E);for(L=0;L<V.length;L++){var J=[.25*V[Math.max(L-1,0)]+.75*V[L],.25*V[Math.min(L+1,V.length-1)]+.75*V[L]];if(W>=J[0]&&W<=J[1]){I.clickableOrdinalRange=J;break}}}return I}function y(_,E){k.event.sourceEvent.stopPropagation();var L=E.height-k.mouse(_)[1]-2*A.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.grabbingBar?C.newExtent=[L-C.grabPoint,L+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):C.newExtent=[C.startExtent,E.unitToPaddedPx.invert(L)].sort(x),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),v(_.parentNode)}function p(_,E){var L=g(E,E.height-k.mouse(_)[1]-2*A.verticalPadding),C="crosshair";L.clickableOrdinalRange?C="pointer":L.region&&(C=L.region+"-resize"),k.select(document.body).style("cursor",C)}function m(_){_.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||p(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||f()}).call(k.behavior.drag().on("dragstart",function(E){(function(L,C){k.event.sourceEvent.stopPropagation();var P=C.height-k.mouse(L)[1]-2*A.verticalPadding,I=C.unitToPaddedPx.invert(P),U=C.brush,z=g(C,P),H=z.interval,F=U.svgBrush;if(F.wasDragged=!1,F.grabbingBar=z.region==="ns",F.grabbingBar){var N=H.map(C.unitToPaddedPx);F.grabPoint=P-N[0]-A.verticalPadding,F.barLength=N[1]-N[0]}F.clickableOrdinalRange=z.clickableOrdinalRange,F.stayingIntervals=C.multiselect&&U.filterSpecified?U.filter.getConsolidated():[],H&&(F.stayingIntervals=F.stayingIntervals.filter(function(B){return B[0]!==H[0]&&B[1]!==H[1]})),F.startExtent=z.region?H[z.region==="s"?1:0]:I,C.parent.inBrushDrag=!0,F.brushStartCallback()})(this,E)}).on("drag",function(E){y(this,E)}).on("dragend",function(E){(function(L,C){var P=C.brush,I=P.filter,U=P.svgBrush;U._dragging||(p(L,C),y(L,C),C.brush.svgBrush.wasDragged=!1),U._dragging=!1,k.event.sourceEvent.stopPropagation();var z=U.grabbingBar;if(U.grabbingBar=!1,U.grabLocation=void 0,C.parent.inBrushDrag=!1,f(),!U.wasDragged)return U.wasDragged=void 0,U.clickableOrdinalRange?P.filterSpecified&&C.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],P.filterSpecified=!0):z?(U.extent=U.stayingIntervals,U.extent.length===0&&u(P)):u(P),U.brushCallback(C),v(L.parentNode),void U.brushEndCallback(P.filterSpecified?I.getConsolidated():[]);var H=function(){I.set(I.getConsolidated())};if(C.ordinal){var F=C.unitTickvals;F[F.length-1]<F[0]&&F.reverse(),U.newExtent=[n(0,F,U.newExtent[0],U.stayingIntervals),n(1,F,U.newExtent[1],U.stayingIntervals)];var N=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(N?[U.newExtent]:[]),U.extent.length||u(P),U.brushCallback(C),N?v(L.parentNode,H):(H(),v(L.parentNode))}else H();U.brushEndCallback(P.filterSpecified?I.getConsolidated():[])})(this,E)}))}function w(_,E){return _[0]-E[0]}function u(_){_.filterSpecified=!1,_.svgBrush.extent=[[-1/0,1/0]]}function S(_){for(var E,L=_.slice(),C=[],P=L.shift();P;){for(E=P.slice();(P=L.shift())&&P[0]<=E[1];)E[1]=Math.max(E[1],P[1]);C.push(E)}return C.length===1&&C[0][0]>C[0][1]&&(C=[]),C}$.exports={makeBrush:function(_,E,L,C,P,I){var U,z=function(){var H,F,N=[];return{set:function(B){(N=B.map(function(j){return j.slice().sort(x)}).sort(w)).length===1&&N[0][0]===-1/0&&N[0][1]===1/0&&(N=[[0,-1]]),H=S(N),F=N.reduce(function(j,K){return[Math.min(j[0],K[0]),Math.max(j[1],K[1])]},[1/0,-1/0])},get:function(){return N.slice()},getConsolidated:function(){return H},getBounds:function(){return F}}}();return z.set(L),{filter:z,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(U=P,function(H){var F=H.brush,N=function(j){return j.svgBrush.extent.map(function(K){return K.slice()})}(F),B=N.slice();F.filter.set(B),U()}),brushEndCallback:I}}},ensureAxisBrush:function(_,E,L){var C=_.selectAll("."+A.cn.axisBrush).data(T,l);C.enter().append("g").classed(A.cn.axisBrush,!0),function(P,I,U){var z=U._context.staticPlot,H=P.selectAll(".background").data(T);H.enter().append("rect").classed("background",!0).call(a).call(i).style("pointer-events",z?"none":"auto").attr("transform",d(0,A.verticalPadding)),H.call(m).attr("height",function(B){return B.height-A.verticalPadding});var F=P.selectAll(".highlight-shadow").data(T);F.enter().append("line").classed("highlight-shadow",!0).attr("x",-A.bar.width/2).attr("stroke-width",A.bar.width+A.bar.strokeWidth).attr("stroke",I).attr("opacity",A.bar.strokeOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(B){return B.height}).call(b);var N=P.selectAll(".highlight").data(T);N.enter().append("line").classed("highlight",!0).attr("x",-A.bar.width/2).attr("stroke-width",A.bar.width-A.bar.strokeWidth).attr("stroke",A.bar.fillColor).attr("opacity",A.bar.fillOpacity).attr("stroke-linecap","butt"),N.attr("y1",function(B){return B.height}).call(b)}(C,E,L)},cleanRanges:function(_,E){if(Array.isArray(_[0])?(_=_.map(function(C){return C.sort(x)}),_=E.multiselect?S(_.sort(w)):[_[0]]):_=[_.sort(x)],E.tickvals){var L=E.tickvals.slice().sort(x);if(!(_=_.map(function(C){var P=[n(0,L,C[0],[]),n(1,L,C[1],[])];if(P[1]>P[0])return P}).filter(function(C){return C})).length)return}return _.length>1?_:_[0]}}},71791:function($,R,e){$.exports={attributes:e(73362),supplyDefaults:e(3633),calc:e(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function($,R,e){var A=e(39898),k=e(27659).a0,l=e(21341),T=e(77922);R.name="parcoords",R.plot=function(x){var d=k(x.calcdata,"parcoords")[0];d.length&&l(x,d)},R.clean=function(x,d,s,t){var o=t._has&&t._has("parcoords"),r=d._has&&d._has("parcoords");o&&!r&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},R.toSVG=function(x){var d=x._fullLayout._glimages,s=A.select(x).selectAll(".svg-container");s.filter(function(t,o){return o===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,o=t.toDataURL("image/png");d.append("svg:image").attr({xmlns:T.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){A.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function($,R,e){var A=e(71828).isArrayOrTypedArray,k=e(21081),l=e(28984).wrap;$.exports=function(T,x){var d,s;return k.hasColorscale(x,"line")&&A(x.line.color)?(d=x.line.color,s=k.extractOpts(x.line).colorscale,k.calc(T,x,{vals:d,containerStr:"line",cLetter:"c"})):(d=function(t){for(var o=new Array(t),r=0;r<t;r++)o[r]=.5;return o}(x._length),s=[[0,x.line.color],[1,x.line.color]]),l({lineColor:d,cscale:s})}},25706:function($){$.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function($,R,e){var A=e(71828),k=e(52075).hasColorscale,l=e(1586),T=e(27670).c,x=e(85501),d=e(89298),s=e(73362),t=e(57920),o=e(25706).maxDimensionCount,r=e(94397);function n(a,i,c,h){function f(p,m){return A.coerce(a,i,s.dimensions,p,m)}var b=f("values"),v=f("visible");if(b&&b.length||(v=i.visible=!1),v){f("label"),f("tickvals"),f("ticktext"),f("tickformat");var g=f("range");i._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},d.setConvert(i._ax,h.layout),f("multiselect");var y=f("constraintrange");y&&(i.constraintrange=t.cleanRanges(y,i))}}$.exports=function(a,i,c,h){function f(p,m){return A.coerce(a,i,s,p,m)}var b=a.dimensions;Array.isArray(b)&&b.length>o&&(A.log("parcoords traces support up to "+o+" dimensions at the moment"),b.splice(o));var v=x(a,i,{name:"dimensions",layout:h,handleItemDefaults:n}),g=function(p,m,w,u,S){var _=S("line.color",w);if(k(p,"line")&&A.isArrayOrTypedArray(_)){if(_.length)return S("line.colorscale"),l(p,m,u,S,{prefix:"line.",cLetter:"c"}),_.length;m.line.color=w}return 1/0}(a,i,c,h,f);T(i,h,f),Array.isArray(v)&&v.length||(i.visible=!1),r(i,v,"values",g);var y={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};A.coerceFont(f,"labelfont",y),A.coerceFont(f,"tickfont",y),A.coerceFont(f,"rangefont",y),f("labelangle"),f("labelside"),f("unselected.line.color"),f("unselected.line.opacity")}},1602:function($,R,e){var A=e(71828).isTypedArray;R.convertTypedArray=function(k){return A(k)?Array.prototype.slice.call(k):k},R.isOrdinal=function(k){return!!k.tickvals},R.isVisible=function(k){return k.visible||!("visible"in k)}},67618:function($,R,e){var A=e(71791);A.plot=e(21341),$.exports=A},83398:function($,R,e){var A=e(56068),k=A([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),l=A([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=e(25706).maxDimensionCount,x=e(71828),d=new Uint8Array(4),s=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function o(v,g,y,p,m){var w=v._gl;w.enable(w.SCISSOR_TEST),w.scissor(g,y,p,m),v.clear({color:[0,0,0,0],depth:1})}function r(v,g,y,p,m,w){var u=w.key;y.drawCompleted||(function(S){S.read({x:0,y:0,width:1,height:1,data:d})}(v),y.drawCompleted=!0),function S(_){var E=Math.min(p,m-_*p);_===0&&(window.cancelAnimationFrame(y.currentRafs[u]),delete y.currentRafs[u],o(v,w.scissorX,w.scissorY,w.scissorWidth,w.viewBoxSize[1])),y.clearOnly||(w.count=2*E,w.offset=2*_*p,g(w),_*p+E<m&&(y.currentRafs[u]=window.requestAnimationFrame(function(){S(_+1)})),y.drawCompleted=!1)}(0)}function n(v,g){for(var y=new Array(256),p=0;p<256;p++)y[p]=v(p/255).concat(g);return y}function a(v,g){return(v>>>8*g)%256/255}function i(v,g,y){for(var p=new Array(8*g),m=0,w=0;w<g;w++)for(var u=0;u<2;u++)for(var S=0;S<4;S++){var _=4*v+S,E=y[64*w+_];_===63&&u===0&&(E*=-1),p[m++]=E}return p}function c(v){var g="0"+v;return g.substr(g.length-2)}function h(v){return v<T?"p"+c(v+1)+"_"+c(v+4):"colors"}function f(v,g,y,p,m,w,u,S,_,E,L,C,P,I){for(var U=[[],[]],z=0;z<64;z++)U[0][z]=z===m?1:0,U[1][z]=z===w?1:0;u*=I,S*=I,_*=I,E*=I;var H=v.lines.canvasOverdrag*I,F=v.domain,N=v.canvasWidth*I,B=v.canvasHeight*I,j=v.pad.l*I,K=v.pad.b*I,G=v.layoutHeight*I,V=v.layoutWidth*I,W=v.deselectedLines.color,J=v.deselectedLines.opacity;return x.extendFlat({key:L,resolution:[N,B],viewBoxPos:[u+H,S],viewBoxSize:[_,E],i0:m,i1:w,dim0A:U[0].slice(0,16),dim0B:U[0].slice(16,32),dim0C:U[0].slice(32,48),dim0D:U[0].slice(48,64),dim1A:U[1].slice(0,16),dim1B:U[1].slice(16,32),dim1C:U[1].slice(32,48),dim1D:U[1].slice(48,64),drwLayer:C,contextColor:[W[0]/255,W[1]/255,W[2]/255,J!=="auto"?W[3]*J:Math.max(.00392156862745098,Math.pow(1/v.lines.color.length,.3333333333333333))],scissorX:(p===g?0:u+H)+(j-H)+V*F.x[0],scissorWidth:(p===y?N-u+H:_+.5)+(p===g?u+H:0),scissorY:S+K+G*F.y[0],scissorHeight:E,viewportX:j-H+V*F.x[0],viewportY:K+G*F.y[0],viewportWidth:N,viewportHeight:B},P)}function b(v){var g=2047,y=Math.max(0,Math.floor(v[0]*g),0),p=Math.min(g,Math.ceil(v[1]*g),g);return[Math.min(y,p),Math.max(y,p)]}$.exports=function(v,g){var y,p,m,w,u,S=g.context,_=g.pick,E=g.regl,L=E._gl,C=L.getParameter(L.ALIASED_LINE_WIDTH_RANGE),P=Math.max(C[0],Math.min(C[1],g.viewModel.plotGlPixelRatio)),I={currentRafs:{},drawCompleted:!0,clearOnly:!1},U=function(B){for(var j={},K=0;K<=T;K+=4)j[h(K)]=B.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return j}(E),z=E.texture(t),H=[];N(g);var F=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:k,frag:l,primitive:"lines",lineWidth:P,attributes:U,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:z,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function N(B){y=B.model,p=B.viewModel,m=p.dimensions.slice(),w=m[0]?m[0].values.length:0;var j=y.lines,K=_?j.color.map(function(V,W){return W/j.color.length}):j.color,G=function(V,W,J){for(var X,ee=new Array(V*(T+4)),re=0,ie=0;ie<V;ie++){for(var se=0;se<T;se++)ee[re++]=se<W.length?W[se].paddedUnitValues[ie]:.5;ee[re++]=a(ie,2),ee[re++]=a(ie,1),ee[re++]=a(ie,0),ee[re++]=(X=J[ie],Math.max(1e-6,Math.min(.999999,X)))}return ee}(w,m,K);(function(V,W,J){for(var X=0;X<=T;X+=4)V[h(X)](i(X/4,W,J))})(U,w,G),S||_||(z=E.texture(x.extendFlat({data:n(y.unitToColor,255)},t)))}return{render:function(B,j,K){var G,V,W,J=B.length,X=1/0,ee=-1/0;for(G=0;G<J;G++)B[G].dim0.canvasX<X&&(X=B[G].dim0.canvasX,V=G),B[G].dim1.canvasX>ee&&(ee=B[G].dim1.canvasX,W=G);J===0&&o(E,0,0,y.canvasWidth,y.canvasHeight);var re=function(Ae){var Se,Te,Q,oe=[[],[]];for(Q=0;Q<64;Q++){var ce=!Ae&&Q<m.length?m[Q].brush.filter.getBounds():[-1/0,1/0];oe[0][Q]=ce[0],oe[1][Q]=ce[1]}var me=new Array(16384);for(Se=0;Se<16384;Se++)me[Se]=255;if(!Ae)for(Se=0;Se<m.length;Se++){var Me=Se%8,Re=(Se-Me)/8,Ce=Math.pow(2,Me),ze=m[Se].brush.filter.get();if(!(ze.length<2)){var le=b(ze[0])[1];for(Te=1;Te<ze.length;Te++){var de=b(ze[Te]);for(Q=le+1;Q<de[0];Q++)me[8*Q+Re]&=~Ce;le=Math.max(le,de[1])}}}var be={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:me};return u?u(be):u=E.texture(be),{maskTexture:u,maskHeight:2048,loA:oe[0].slice(0,16),loB:oe[0].slice(16,32),loC:oe[0].slice(32,48),loD:oe[0].slice(48,64),hiA:oe[1].slice(0,16),hiB:oe[1].slice(16,32),hiC:oe[1].slice(32,48),hiD:oe[1].slice(48,64)}}(S);for(G=0;G<J;G++){var ie=B[G],se=ie.dim0.crossfilterDimensionIndex,fe=ie.dim1.crossfilterDimensionIndex,ye=ie.canvasX,ge=ie.canvasY,he=ye+ie.panelSizeX,ve=ie.plotGlPixelRatio;if(j||!H[se]||H[se][0]!==ye||H[se][1]!==he){H[se]=[ye,he];var Ie=f(y,V,W,G,se,fe,ye,ge,ie.panelSizeX,ie.panelSizeY,ie.dim0.crossfilterDimensionIndex,S?0:_?2:1,re,ve);I.clearOnly=K;var xe=j?y.lines.blockLineCount:w;r(E,F,I,xe,w,Ie)}}},readPixel:function(B,j){return E.read({x:B,y:j,width:1,height:1,data:s}),s},readPixels:function(B,j,K,G){var V=new Uint8Array(4*K*G);return E.read({x:B,y:j,width:K,height:G,data:V}),V},destroy:function(){for(var B in v.style["pointer-events"]="none",z.destroy(),u&&u.destroy(),U)U[B].destroy()},update:N}}},94397:function($){$.exports=function(R,e,A,k){var l,T;for(k||(k=1/0),l=0;l<e.length;l++)(T=e[l]).visible&&(k=Math.min(k,T[A].length));for(k===1/0&&(k=0),R._length=k,l=0;l<e.length;l++)(T=e[l]).visible&&(T._length=k);return k}},17171:function($,R,e){var A=e(39898),k=e(71828),l=k.numberFormat,T=e(36652),x=e(89298),d=k.strRotate,s=k.strTranslate,t=e(63893),o=e(91424),r=e(21081),n=e(28984),a=n.keyFun,i=n.repeat,c=n.unwrap,h=e(1602),f=e(25706),b=e(57920),v=e(83398);function g(H,F,N){return k.aggNums(H,null,F,N)}function y(H,F){return m(g(Math.min,H,F),g(Math.max,H,F))}function p(H){var F=H.range;return F?m(F[0],F[1]):y(H.values,H._length)}function m(H,F){return!isNaN(H)&&isFinite(H)||(H=0),!isNaN(F)&&isFinite(F)||(F=0),H===F&&(H===0?(H-=1,F+=1):(H*=.9,F*=1.1)),[H,F]}function w(H,F,N,B,j){var K,G,V=p(N);return B?A.scale.ordinal().domain(B.map((K=l(N.tickformat),G=j,G?function(W,J){var X=G[J];return X??K(W)}:K))).range(B.map(function(W){var J=(W-V[0])/(V[1]-V[0]);return H-F+J*(2*F-H)})):A.scale.linear().domain(V).range([H-F,F])}function u(H){if(H.tickvals){var F=p(H);return A.scale.ordinal().domain(H.tickvals).range(H.tickvals.map(function(N){return(N-F[0])/(F[1]-F[0])}))}}function S(H){var F=H.map(function(j){return j[0]}),N=H.map(function(j){var K=T(j[1]);return A.rgb("rgb("+K[0]+","+K[1]+","+K[2]+")")}),B="rgb".split("").map(function(j){return A.scale.linear().clamp(!0).domain(F).range(N.map((K=j,function(G){return G[K]})));var K});return function(j){return B.map(function(K){return K(j)})}}function _(H){return H.dimensions.some(function(F){return F.brush.filterSpecified})}function E(H,F,N){var B=c(F),j=B.trace,K=h.convertTypedArray(B.lineColor),G=j.line,V={color:T(j.unselected.line.color),opacity:j.unselected.line.opacity},W=r.extractOpts(G),J=W.reversescale?r.flipScale(B.cscale):B.cscale,X=j.domain,ee=j.dimensions,re=H.width,ie=j.labelangle,se=j.labelside,fe=j.labelfont,ye=j.tickfont,ge=j.rangefont,he=k.extendDeepNoArrays({},G,{color:K.map(A.scale.linear().domain(p({values:K,range:[W.min,W.max],_length:j._length}))),blockLineCount:f.blockLineCount,canvasOverdrag:f.overdrag*f.canvasPixelRatio}),ve=Math.floor(re*(X.x[1]-X.x[0])),Ie=Math.floor(H.height*(X.y[1]-X.y[0])),xe=H.margin||{l:80,r:80,t:100,b:80},Ae=ve,Se=Ie;return{key:N,colCount:ee.filter(h.isVisible).length,dimensions:ee,tickDistance:f.tickDistance,unitToColor:S(J),lines:he,deselectedLines:V,labelAngle:ie,labelSide:se,labelFont:fe,tickFont:ye,rangeFont:ge,layoutWidth:re,layoutHeight:H.height,domain:X,translateX:X.x[0]*re,translateY:H.height-X.y[1]*H.height,pad:xe,canvasWidth:Ae*f.canvasPixelRatio+2*he.canvasOverdrag,canvasHeight:Se*f.canvasPixelRatio,width:Ae,height:Se,canvasPixelRatio:f.canvasPixelRatio}}function L(H,F,N){var B=N.width,j=N.height,K=N.dimensions,G=N.canvasPixelRatio,V=function(re){return B*re/Math.max(1,N.colCount-1)},W=f.verticalPadding/j,J=function(re,ie){return A.scale.linear().range([ie,re-ie])}(j,f.verticalPadding),X={key:N.key,xScale:V,model:N,inBrushDrag:!1},ee={};return X.dimensions=K.filter(h.isVisible).map(function(re,ie){var se=function(me,Me){return A.scale.linear().domain(p(me)).range([Me,1-Me])}(re,W),fe=ee[re.label];ee[re.label]=(fe||0)+1;var ye=re.label+(fe?"__"+fe:""),ge=re.constraintrange,he=ge&&ge.length;he&&!Array.isArray(ge[0])&&(ge=[ge]);var ve=he?ge.map(function(me){return me.map(se)}):[[-1/0,1/0]],Ie=re.values;Ie.length>re._length&&(Ie=Ie.slice(0,re._length));var xe,Ae=re.tickvals;function Se(me,Me){return{val:me,text:xe[Me]}}function Te(me,Me){return me.val-Me.val}if(Array.isArray(Ae)&&Ae.length){xe=re.ticktext,Array.isArray(xe)&&xe.length?xe.length>Ae.length?xe=xe.slice(0,Ae.length):Ae.length>xe.length&&(Ae=Ae.slice(0,xe.length)):xe=Ae.map(l(re.tickformat));for(var Q=1;Q<Ae.length;Q++)if(Ae[Q]<Ae[Q-1]){for(var oe=Ae.map(Se).sort(Te),ce=0;ce<Ae.length;ce++)Ae[ce]=oe[ce].val,xe[ce]=oe[ce].text;break}}else Ae=void 0;return Ie=h.convertTypedArray(Ie),{key:ye,label:re.label,tickFormat:re.tickformat,tickvals:Ae,ticktext:xe,ordinal:h.isOrdinal(re),multiselect:re.multiselect,xIndex:ie,crossfilterDimensionIndex:ie,visibleIndex:re._index,height:j,values:Ie,paddedUnitValues:Ie.map(se),unitTickvals:Ae&&Ae.map(se),xScale:V,x:V(ie),canvasX:V(ie)*G,unitToPaddedPx:J,domainScale:w(j,f.verticalPadding,re,Ae,xe),ordinalScale:u(re),parent:X,model:N,brush:b.makeBrush(H,he,ve,function(){H.linePickActive(!1)},function(){var me=X;me.focusLayer&&me.focusLayer.render(me.panels,!0);var Me=_(me);!H.contextShown()&&Me?(me.contextLayer&&me.contextLayer.render(me.panels,!0),H.contextShown(!0)):H.contextShown()&&!Me&&(me.contextLayer&&me.contextLayer.render(me.panels,!0,!0),H.contextShown(!1))},function(me){if(X.focusLayer.render(X.panels,!0),X.pickLayer&&X.pickLayer.render(X.panels,!0),H.linePickActive(!0),F&&F.filterChanged){var Me=se.invert,Re=me.map(function(Ce){return Ce.map(Me).sort(k.sorterAsc)}).sort(function(Ce,ze){return Ce[0]-ze[0]});F.filterChanged(X.key,re._index,Re)}})}}),X}function C(H){H.classed(f.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function P(H,F){var N=F==="top"?1:-1,B=H*Math.PI/180;return{dir:N,dx:Math.sin(B),dy:Math.cos(B),degrees:H}}function I(H,F,N){for(var B=F.panels||(F.panels=[]),j=H.data(),K=0;K<j.length-1;K++){var G=B[K]||(B[K]={}),V=j[K],W=j[K+1];G.dim0=V,G.dim1=W,G.canvasX=V.canvasX,G.panelSizeX=W.canvasX-V.canvasX,G.panelSizeY=F.model.canvasHeight,G.y=0,G.canvasY=0,G.plotGlPixelRatio=N}}function U(H,F){return x.tickText(H._ax,F,!1).text}function z(H,F){if(H.ordinal)return"";var N=H.domainScale.domain(),B=N[F?N.length-1:0];return U(H.model.dimensions[H.visibleIndex],B)}$.exports=function(H,F,N,B){var j=H._context.staticPlot,K=H._fullLayout,G=K._toppaper,V=K._glcontainer,W=H._context.plotGlPixelRatio,J=H._fullLayout.paper_bgcolor;(function(me){for(var Me=0;Me<me.length;Me++)for(var Re=0;Re<me[Me].length;Re++)for(var Ce=me[Me][Re].trace,ze=Ce.dimensions,le=0;le<ze.length;le++){var de=ze[le].values,be=ze[le]._ax;be&&(be.range?be.range=m(be.range[0],be.range[1]):be.range=y(de,Ce._length),be.dtick||(be.dtick=.01*(Math.abs(be.range[1]-be.range[0])||1)),be.tickformat=ze[le].tickformat,x.calcTicks(be),be.cleanRange())}})(F);var X,ee,re=(X=!0,ee=!1,{linePickActive:function(me){return arguments.length?X=!!me:X},contextShown:function(me){return arguments.length?ee=!!me:ee}}),ie=F.filter(function(me){return c(me).trace.visible}).map(E.bind(0,N)).map(L.bind(0,re,B));V.each(function(me,Me){return k.extendFlat(me,ie[Me])});var se=V.selectAll(".gl-canvas").each(function(me){me.viewModel=ie[0],me.viewModel.plotGlPixelRatio=W,me.viewModel.paperColor=J,me.model=me.viewModel?me.viewModel.model:null}),fe=null;se.filter(function(me){return me.pick}).style("pointer-events",j?"none":"auto").on("mousemove",function(me){if(re.linePickActive()&&me.lineLayer&&B&&B.hover){var Me=A.event,Re=this.width,Ce=this.height,ze=A.mouse(this),le=ze[0],de=ze[1];if(le<0||de<0||le>=Re||de>=Ce)return;var be=me.lineLayer.readPixel(le,Ce-1-de),Fe=be[3]!==0,Ve=Fe?be[2]+256*(be[1]+256*be[0]):null,He={x:le,y:de,clientX:Me.clientX,clientY:Me.clientY,dataIndex:me.model.key,curveNumber:Ve};Ve!==fe&&(Fe?B.hover(He):B.unhover&&B.unhover(He),fe=Ve)}}),se.style("opacity",function(me){return me.pick?0:1}),G.style("background","rgba(255, 255, 255, 0)");var ye=G.selectAll("."+f.cn.parcoords).data(ie,a);ye.exit().remove(),ye.enter().append("g").classed(f.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ye.attr("transform",function(me){return s(me.model.translateX,me.model.translateY)});var ge=ye.selectAll("."+f.cn.parcoordsControlView).data(i,a);ge.enter().append("g").classed(f.cn.parcoordsControlView,!0),ge.attr("transform",function(me){return s(me.model.pad.l,me.model.pad.t)});var he=ge.selectAll("."+f.cn.yAxis).data(function(me){return me.dimensions},a);he.enter().append("g").classed(f.cn.yAxis,!0),ge.each(function(me){I(he,me,W)}),se.each(function(me){if(me.viewModel){!me.lineLayer||B?me.lineLayer=v(this,me):me.lineLayer.update(me),(me.key||me.key===0)&&(me.viewModel[me.key]=me.lineLayer);var Me=!me.context||B;me.lineLayer.render(me.viewModel.panels,Me)}}),he.attr("transform",function(me){return s(me.xScale(me.xIndex),0)}),he.call(A.behavior.drag().origin(function(me){return me}).on("drag",function(me){var Me=me.parent;re.linePickActive(!1),me.x=Math.max(-f.overdrag,Math.min(me.model.width+f.overdrag,A.event.x)),me.canvasX=me.x*me.model.canvasPixelRatio,he.sort(function(Re,Ce){return Re.x-Ce.x}).each(function(Re,Ce){Re.xIndex=Ce,Re.x=me===Re?Re.x:Re.xScale(Re.xIndex),Re.canvasX=Re.x*Re.model.canvasPixelRatio}),I(he,Me,W),he.filter(function(Re){return Math.abs(me.xIndex-Re.xIndex)!==0}).attr("transform",function(Re){return s(Re.xScale(Re.xIndex),0)}),A.select(this).attr("transform",s(me.x,0)),he.each(function(Re,Ce,ze){ze===me.parent.key&&(Me.dimensions[Ce]=Re)}),Me.contextLayer&&Me.contextLayer.render(Me.panels,!1,!_(Me)),Me.focusLayer.render&&Me.focusLayer.render(Me.panels)}).on("dragend",function(me){var Me=me.parent;me.x=me.xScale(me.xIndex),me.canvasX=me.x*me.model.canvasPixelRatio,I(he,Me,W),A.select(this).attr("transform",function(Re){return s(Re.x,0)}),Me.contextLayer&&Me.contextLayer.render(Me.panels,!1,!_(Me)),Me.focusLayer&&Me.focusLayer.render(Me.panels),Me.pickLayer&&Me.pickLayer.render(Me.panels,!0),re.linePickActive(!0),B&&B.axesMoved&&B.axesMoved(Me.key,Me.dimensions.map(function(Re){return Re.crossfilterDimensionIndex}))})),he.exit().remove();var ve=he.selectAll("."+f.cn.axisOverlays).data(i,a);ve.enter().append("g").classed(f.cn.axisOverlays,!0),ve.selectAll("."+f.cn.axis).remove();var Ie=ve.selectAll("."+f.cn.axis).data(i,a);Ie.enter().append("g").classed(f.cn.axis,!0),Ie.each(function(me){var Me=me.model.height/me.model.tickDistance,Re=me.domainScale,Ce=Re.domain();A.select(this).call(A.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Me,me.tickFormat).tickValues(me.ordinal?Ce:null).tickFormat(function(ze){return h.isOrdinal(me)?ze:U(me.model.dimensions[me.visibleIndex],ze)}).scale(Re)),o.font(Ie.selectAll("text"),me.model.tickFont)}),Ie.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Ie.selectAll("text").style("text-shadow",t.makeTextShadow(J)).style("cursor","default");var xe=ve.selectAll("."+f.cn.axisHeading).data(i,a);xe.enter().append("g").classed(f.cn.axisHeading,!0);var Ae=xe.selectAll("."+f.cn.axisTitle).data(i,a);Ae.enter().append("text").classed(f.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",j?"none":"auto"),Ae.text(function(me){return me.label}).each(function(me){var Me=A.select(this);o.font(Me,me.model.labelFont),t.convertToTspans(Me,H)}).attr("transform",function(me){var Me=P(me.model.labelAngle,me.model.labelSide),Re=f.axisTitleOffset;return(Me.dir>0?"":s(0,2*Re+me.model.height))+d(Me.degrees)+s(-Re*Me.dx,-Re*Me.dy)}).attr("text-anchor",function(me){var Me=P(me.model.labelAngle,me.model.labelSide);return 2*Math.abs(Me.dx)>Math.abs(Me.dy)?Me.dir*Me.dx<0?"start":"end":"middle"});var Se=ve.selectAll("."+f.cn.axisExtent).data(i,a);Se.enter().append("g").classed(f.cn.axisExtent,!0);var Te=Se.selectAll("."+f.cn.axisExtentTop).data(i,a);Te.enter().append("g").classed(f.cn.axisExtentTop,!0),Te.attr("transform",s(0,-f.axisExtentOffset));var Q=Te.selectAll("."+f.cn.axisExtentTopText).data(i,a);Q.enter().append("text").classed(f.cn.axisExtentTopText,!0).call(C),Q.text(function(me){return z(me,!0)}).each(function(me){o.font(A.select(this),me.model.rangeFont)});var oe=Se.selectAll("."+f.cn.axisExtentBottom).data(i,a);oe.enter().append("g").classed(f.cn.axisExtentBottom,!0),oe.attr("transform",function(me){return s(0,me.model.height+f.axisExtentOffset)});var ce=oe.selectAll("."+f.cn.axisExtentBottomText).data(i,a);ce.enter().append("text").classed(f.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(C),ce.text(function(me){return z(me,!1)}).each(function(me){o.font(A.select(this),me.model.rangeFont)}),b.ensureAxisBrush(ve,J,H)}},21341:function($,R,e){var A=e(17171),k=e(79749),l=e(1602).isVisible,T={};function x(d,s,t){var o=s.indexOf(t),r=d.indexOf(o);return r===-1&&(r+=s.length),r}($.exports=function(d,s){var t=d._fullLayout;if(k(d,[],T)){var o={},r={},n={},a={},i=t._size;s.forEach(function(c,h){var f=c[0].trace;n[h]=f.index;var b=a[h]=f._fullInput.index;o[h]=d.data[b].dimensions,r[h]=d.data[b].dimensions.slice()}),A(d,s,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},{filterChanged:function(c,h,f){var b=r[c][h],v=f.map(function(u){return u.slice()}),g="dimensions["+h+"].constraintrange",y=t._tracePreGUI[d._fullData[n[c]]._fullInput.uid];if(y[g]===void 0){var p=b.constraintrange;y[g]=p||null}var m=d._fullData[n[c]].dimensions[h];v.length?(v.length===1&&(v=v[0]),b.constraintrange=v,m.constraintrange=v.slice(),v=[v]):(delete b.constraintrange,delete m.constraintrange,v=null);var w={};w[g]=v,d.emit("plotly_restyle",[w,[a[c]]])},hover:function(c){d.emit("plotly_hover",c)},unhover:function(c){d.emit("plotly_unhover",c)},axesMoved:function(c,h){var f=function(b,v){return function(g,y){return x(b,v,g)-x(b,v,y)}}(h,r[c].filter(l));o[c].sort(f),r[c].filter(function(b){return!l(b)}).sort(function(b){return r[c].indexOf(b)}).forEach(function(b){o[c].splice(o[c].indexOf(b),1),o[c].splice(r[c].indexOf(b),0,b)}),d.emit("plotly_restyle",[{dimensions:[o[c]]},[a[c]]])}})}}).reglPrecompiled=T},34e3:function($,R,e){var A=e(9012),k=e(27670).Y,l=e(41940),T=e(22399),x=e(5386).f,d=e(5386).s,s=e(1426).extendFlat,t=l({editType:"plot",arrayOk:!0,colorEditType:"plot"});$.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},A.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:x({},{keys:["label","color","value","percent","text"]}),texttemplate:d({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},t,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},t,{}),outsidetextfont:s({},t,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},t,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},t,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function($,R,e){var A=e(74875);R.name="pie",R.plot=function(k,l,T,x){A.plotBasePlot(R.name,k,l,T,x)},R.clean=function(k,l,T,x){A.cleanBasePlot(R.name,k,l,T,x)}},32354:function($,R,e){var A=e(92770),k=e(84267),l=e(7901),T={};function x(s){return function(t,o){return!!t&&!!(t=k(t)).isValid()&&(t=l.addOpacity(t,t.getAlpha()),s[o]||(s[o]=t),t)}}function d(s,t){var o,r=JSON.stringify(s),n=t[r];if(!n){for(n=s.slice(),o=0;o<s.length;o++)n.push(k(s[o]).lighten(20).toHexString());for(o=0;o<s.length;o++)n.push(k(s[o]).darken(20).toHexString());t[r]=n}return n}$.exports={calc:function(s,t){var o,r,n=[],a=s._fullLayout,i=a.hiddenlabels||[],c=t.labels,h=t.marker.colors||[],f=t.values,b=t._length,v=t._hasValues&&b;if(t.dlabel)for(c=new Array(b),o=0;o<b;o++)c[o]=String(t.label0+o*t.dlabel);var g={},y=x(a["_"+t.type+"colormap"]),p=0,m=!1;for(o=0;o<b;o++){var w,u,S;if(v){if(w=f[o],!A(w))continue;w=+w}else w=1;(u=c[o])!==void 0&&u!==""||(u=o);var _=g[u=String(u)];_===void 0?(g[u]=n.length,(S=i.indexOf(u)!==-1)||(p+=w),n.push({v:w,label:u,color:y(h[o],u),i:o,pts:[o],hidden:S})):(m=!0,(r=n[_]).v+=w,r.pts.push(o),r.hidden||(p+=w),r.color===!1&&h[o]&&(r.color=y(h[o],u)))}return n=n.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?m:t.sort)&&n.sort(function(E,L){return L.v-E.v}),n[0]&&(n[0].vTotal=p),n},crossTraceCalc:function(s,t){var o=(t||{}).type;o||(o="pie");var r=s._fullLayout,n=s.calcdata,a=r[o+"colorway"],i=r["_"+o+"colormap"];r["extend"+o+"colors"]&&(a=d(a,T));for(var c=0,h=0;h<n.length;h++){var f=n[h];if(f[0].trace.type===o)for(var b=0;b<f.length;b++){var v=f[b];v.color===!1&&(i[v.label]?v.color=i[v.label]:(i[v.label]=v.color=a[c%a.length],c++))}}},makePullColorFn:x,generateExtendedColors:d}},37434:function($,R,e){var A=e(92770),k=e(71828),l=e(34e3),T=e(27670).c,x=e(90769).handleText;function d(s,t){var o=Array.isArray(s),r=k.isArrayOrTypedArray(t),n=Math.min(o?s.length:1/0,r?t.length:1/0);if(isFinite(n)||(n=0),n&&r){for(var a,i=0;i<n;i++){var c=t[i];if(A(c)&&c>0){a=!0;break}}a||(n=0)}return{hasLabels:o,hasValues:r,len:n}}$.exports={handleLabelsAndValues:d,supplyDefaults:function(s,t,o,r){function n(y,p){return k.coerce(s,t,l,y,p)}var a=d(n("labels"),n("values")),i=a.len;if(t._hasLabels=a.hasLabels,t._hasValues=a.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),i){t._length=i,n("marker.line.width")&&n("marker.line.color"),n("marker.colors"),n("scalegroup");var c,h=n("text"),f=n("texttemplate");if(f||(c=n("textinfo",Array.isArray(h)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),f||c&&c!=="none"){var b=n("textposition");x(s,t,r,n,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(b)||b==="auto"||b==="outside")&&n("automargin"),(b==="inside"||b==="auto"||Array.isArray(b))&&n("insidetextorientation")}T(t,r,n);var v=n("hole");if(n("title.text")){var g=n("title.position",v?"middle center":"top center");v||g!=="middle center"||(t.title.position="top center"),k.coerceFont(n,"title.font",r.font)}n("sort"),n("direction"),n("rotation"),n("pull")}else t.visible=!1}}},20007:function($,R,e){var A=e(23469).appendArrayMultiPointValues;$.exports=function(k,l){var T={curveNumber:l.index,pointNumbers:k.pts,data:l._input,fullData:l,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(T.pointNumber=T.i=k.pts[0]),A(T,l,k.pts),l.type==="funnelarea"&&(delete T.v,delete T.i),T}},53581:function($,R,e){var A=e(71828);function k(l){return l.indexOf("e")!==-1?l.replace(/[.]?0+e/,"e"):l.indexOf(".")!==-1?l.replace(/[.]?0+$/,""):l}R.formatPiePercent=function(l,T){var x=k((100*l).toPrecision(3));return A.numSeparate(x,T)+"%"},R.formatPieValue=function(l,T){var x=k(l.toPrecision(10));return A.numSeparate(x,T)},R.getFirstFilled=function(l,T){if(Array.isArray(l))for(var x=0;x<T.length;x++){var d=l[T[x]];if(d||d===0||d==="")return d}},R.castOption=function(l,T){return Array.isArray(l)?R.getFirstFilled(l,T):l||void 0},R.getRotationAngle=function(l){return(l==="auto"?0:l)*Math.PI/180}},58810:function($,R,e){$.exports={attributes:e(34e3),supplyDefaults:e(37434).supplyDefaults,supplyLayoutDefaults:e(92097),layoutAttributes:e(92774),calc:e(32354).calc,crossTraceCalc:e(32354).crossTraceCalc,plot:e(14575).plot,style:e(68357),styleOne:e(63463),moduleType:"trace",name:"pie",basePlotModule:e(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function($){$.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function($,R,e){var A=e(71828),k=e(92774);$.exports=function(l,T){function x(d,s){return A.coerce(l,T,k,d,s)}x("hiddenlabels"),x("piecolorway",T.colorway),x("extendpiecolors")}},14575:function($,R,e){var A=e(39898),k=e(74875),l=e(30211),T=e(7901),x=e(91424),d=e(71828),s=d.strScale,t=d.strTranslate,o=e(63893),r=e(72597),n=r.recordMinTextSize,a=r.clearMinTextSize,i=e(97313).TEXTPAD,c=e(53581),h=e(20007),f=e(71828).isValidTextValue;function b(F,N,B){var j=B[0],K=j.cx,G=j.cy,V=j.trace,W=V.type==="funnelarea";"_hasHoverLabel"in V||(V._hasHoverLabel=!1),"_hasHoverEvent"in V||(V._hasHoverEvent=!1),F.on("mouseover",function(J){var X=N._fullLayout,ee=N._fullData[V.index];if(!N._dragging&&X.hovermode!==!1){var re=ee.hoverinfo;if(Array.isArray(re)&&(re=l.castHoverinfo({hoverinfo:[c.castOption(re,J.pts)],_module:V._module},X,0)),re==="all"&&(re="label+text+value+percent+name"),ee.hovertemplate||re!=="none"&&re!=="skip"&&re){var ie=J.rInscribed||0,se=K+J.pxmid[0]*(1-ie),fe=G+J.pxmid[1]*(1-ie),ye=X.separators,ge=[];if(re&&re.indexOf("label")!==-1&&ge.push(J.label),J.text=c.castOption(ee.hovertext||ee.text,J.pts),re&&re.indexOf("text")!==-1){var he=J.text;d.isValidTextValue(he)&&ge.push(he)}J.value=J.v,J.valueLabel=c.formatPieValue(J.v,ye),re&&re.indexOf("value")!==-1&&ge.push(J.valueLabel),J.percent=J.v/j.vTotal,J.percentLabel=c.formatPiePercent(J.percent,ye),re&&re.indexOf("percent")!==-1&&ge.push(J.percentLabel);var ve=ee.hoverlabel,Ie=ve.font,xe=[];l.loneHover({trace:V,x0:se-ie*j.r,x1:se+ie*j.r,y:fe,_x0:W?K+J.TL[0]:se-ie*j.r,_x1:W?K+J.TR[0]:se+ie*j.r,_y0:W?G+J.TL[1]:fe-ie*j.r,_y1:W?G+J.BL[1]:fe+ie*j.r,text:ge.join("<br>"),name:ee.hovertemplate||re.indexOf("name")!==-1?ee.name:void 0,idealAlign:J.pxmid[0]<0?"left":"right",color:c.castOption(ve.bgcolor,J.pts)||J.color,borderColor:c.castOption(ve.bordercolor,J.pts),fontFamily:c.castOption(Ie.family,J.pts),fontSize:c.castOption(Ie.size,J.pts),fontColor:c.castOption(Ie.color,J.pts),nameLength:c.castOption(ve.namelength,J.pts),textAlign:c.castOption(ve.align,J.pts),hovertemplate:c.castOption(ee.hovertemplate,J.pts),hovertemplateLabels:J,eventData:[h(J,ee)]},{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:N,inOut_bbox:xe}),J.bbox=xe[0],V._hasHoverLabel=!0}V._hasHoverEvent=!0,N.emit("plotly_hover",{points:[h(J,ee)],event:A.event})}}),F.on("mouseout",function(J){var X=N._fullLayout,ee=N._fullData[V.index],re=A.select(this).datum();V._hasHoverEvent&&(J.originalEvent=A.event,N.emit("plotly_unhover",{points:[h(re,ee)],event:A.event}),V._hasHoverEvent=!1),V._hasHoverLabel&&(l.loneUnhover(X._hoverlayer.node()),V._hasHoverLabel=!1)}),F.on("click",function(J){var X=N._fullLayout,ee=N._fullData[V.index];N._dragging||X.hovermode===!1||(N._hoverdata=[h(J,ee)],l.click(N,A.event))})}function v(F,N,B){var j=c.castOption(F.insidetextfont.color,N.pts);!j&&F._input.textfont&&(j=c.castOption(F._input.textfont.color,N.pts));var K=c.castOption(F.insidetextfont.family,N.pts)||c.castOption(F.textfont.family,N.pts)||B.family,G=c.castOption(F.insidetextfont.size,N.pts)||c.castOption(F.textfont.size,N.pts)||B.size;return{color:j||T.contrast(N.color),family:K,size:G}}function g(F,N){for(var B,j,K=0;K<F.length;K++)if((j=(B=F[K][0]).trace).title.text){var G=j.title.text;j._meta&&(G=d.templateString(G,j._meta));var V=x.tester.append("text").attr("data-notex",1).text(G).call(x.font,j.title.font).call(o.convertToTspans,N),W=x.bBox(V.node(),!0);B.titleBox={width:W.width,height:W.height},V.remove()}}function y(F,N,B){var j=B.r||N.rpx1,K=N.rInscribed;if(N.startangle===N.stopangle)return{rCenter:1-K,scale:0,rotate:0,textPosAngle:0};var G,V=N.ring,W=V===1&&Math.abs(N.startangle-N.stopangle)===2*Math.PI,J=N.halfangle,X=N.midangle,ee=B.trace.insidetextorientation,re=ee==="horizontal",ie=ee==="tangential",se=ee==="radial",fe=ee==="auto",ye=[];if(!fe){var ge,he=function(Te,Q){if(function(Me,Re){var Ce=Me.startangle,ze=Me.stopangle;return Ce>Re&&Re>ze||Ce<Re&&Re<ze}(N,Te)){var oe=Math.abs(Te-N.startangle),ce=Math.abs(Te-N.stopangle),me=oe<ce?oe:ce;(G=Q==="tan"?m(F,j,V,me,0):p(F,j,V,me,Math.PI/2)).textPosAngle=Te,ye.push(G)}};if(re||ie){for(ge=4;ge>=-4;ge-=2)he(Math.PI*ge,"tan");for(ge=4;ge>=-4;ge-=2)he(Math.PI*(ge+1),"tan")}if(re||se){for(ge=4;ge>=-4;ge-=2)he(Math.PI*(ge+1.5),"rad");for(ge=4;ge>=-4;ge-=2)he(Math.PI*(ge+.5),"rad")}}if(W||fe||re){var ve=Math.sqrt(F.width*F.width+F.height*F.height);if((G={scale:K*j*2/ve,rCenter:1-K,rotate:0}).textPosAngle=(N.startangle+N.stopangle)/2,G.scale>=1)return G;ye.push(G)}(fe||se)&&((G=p(F,j,V,J,X)).textPosAngle=(N.startangle+N.stopangle)/2,ye.push(G)),(fe||ie)&&((G=m(F,j,V,J,X)).textPosAngle=(N.startangle+N.stopangle)/2,ye.push(G));for(var Ie=0,xe=0,Ae=0;Ae<ye.length;Ae++){var Se=ye[Ae].scale;if(xe<Se&&(xe=Se,Ie=Ae),!fe&&xe>=1)break}return ye[Ie]}function p(F,N,B,j,K){N=Math.max(0,N-2*i);var G=F.width/F.height,V=S(G,j,N,B);return{scale:2*V/F.height,rCenter:w(G,V/N),rotate:u(K)}}function m(F,N,B,j,K){N=Math.max(0,N-2*i);var G=F.height/F.width,V=S(G,j,N,B);return{scale:2*V/F.width,rCenter:w(G,V/N),rotate:u(K+Math.PI/2)}}function w(F,N){return Math.cos(N)-F*N}function u(F){return(180/Math.PI*F+720)%180-90}function S(F,N,B,j){var K=F+1/(2*Math.tan(N));return B*Math.min(1/(Math.sqrt(K*K+.5)+K),j/(Math.sqrt(F*F+j/2)+F))}function _(F,N){return F.v!==N.vTotal||N.trace.hole?Math.min(1/(1+1/Math.sin(F.halfangle)),F.ring/2):1}function E(F,N){var B=N.pxmid[0],j=N.pxmid[1],K=F.width/2,G=F.height/2;return B<0&&(K*=-1),j<0&&(G*=-1),{scale:1,rCenter:1,rotate:0,x:K+Math.abs(G)*(K>0?1:-1)/2,y:G/(1+B*B/(j*j)),outside:!0}}function L(F,N){var B,j,K,G=F.trace,V={x:F.cx,y:F.cy},W={tx:0,ty:0};W.ty+=G.title.font.size,K=P(G),G.title.position.indexOf("top")!==-1?(V.y-=(1+K)*F.r,W.ty-=F.titleBox.height):G.title.position.indexOf("bottom")!==-1&&(V.y+=(1+K)*F.r);var J,X=F.r/((J=F.trace.aspectratio)===void 0?1:J),ee=N.w*(G.domain.x[1]-G.domain.x[0])/2;return G.title.position.indexOf("left")!==-1?(ee+=X,V.x-=(1+K)*X,W.tx+=F.titleBox.width/2):G.title.position.indexOf("center")!==-1?ee*=2:G.title.position.indexOf("right")!==-1&&(ee+=X,V.x+=(1+K)*X,W.tx-=F.titleBox.width/2),B=ee/F.titleBox.width,j=C(F,N)/F.titleBox.height,{x:V.x,y:V.y,scale:Math.min(B,j),tx:W.tx,ty:W.ty}}function C(F,N){var B=F.trace,j=N.h*(B.domain.y[1]-B.domain.y[0]);return Math.min(F.titleBox.height,j/2)}function P(F){var N,B=F.pull;if(!B)return 0;if(Array.isArray(B))for(B=0,N=0;N<F.pull.length;N++)F.pull[N]>B&&(B=F.pull[N]);return B}function I(F,N){for(var B=[],j=0;j<F.length;j++){var K=F[j][0],G=K.trace,V=G.domain,W=N.w*(V.x[1]-V.x[0]),J=N.h*(V.y[1]-V.y[0]);G.title.text&&G.title.position!=="middle center"&&(J-=C(K,N));var X=W/2,ee=J/2;G.type!=="funnelarea"||G.scalegroup||(ee/=G.aspectratio),K.r=Math.min(X,ee)/(1+P(G)),K.cx=N.l+N.w*(G.domain.x[1]+G.domain.x[0])/2,K.cy=N.t+N.h*(1-G.domain.y[0])-J/2,G.title.text&&G.title.position.indexOf("bottom")!==-1&&(K.cy-=C(K,N)),G.scalegroup&&B.indexOf(G.scalegroup)===-1&&B.push(G.scalegroup)}(function(re,ie){for(var se,fe,ye,ge=0;ge<ie.length;ge++){var he=1/0,ve=ie[ge];for(fe=0;fe<re.length;fe++)if((ye=(se=re[fe][0]).trace).scalegroup===ve){var Ie;if(ye.type==="pie")Ie=se.r*se.r;else if(ye.type==="funnelarea"){var xe,Ae;ye.aspectratio>1?Ae=(xe=se.r)/ye.aspectratio:xe=(Ae=se.r)*ye.aspectratio,Ie=(xe*=(1+ye.baseratio)/2)*Ae}he=Math.min(he,Ie/se.vTotal)}for(fe=0;fe<re.length;fe++)if((ye=(se=re[fe][0]).trace).scalegroup===ve){var Se=he*se.vTotal;ye.type==="funnelarea"&&(Se/=(1+ye.baseratio)/2,Se/=ye.aspectratio),se.r=Math.sqrt(Se)}}})(F,B)}function U(F,N){return[F*Math.sin(N),-F*Math.cos(N)]}function z(F,N,B){var j=F._fullLayout,K=B.trace,G=K.texttemplate,V=K.textinfo;if(!G&&V&&V!=="none"){var W,J=V.split("+"),X=function(Ie){return J.indexOf(Ie)!==-1},ee=X("label"),re=X("text"),ie=X("value"),se=X("percent"),fe=j.separators;if(W=ee?[N.label]:[],re){var ye=c.getFirstFilled(K.text,N.pts);f(ye)&&W.push(ye)}ie&&W.push(c.formatPieValue(N.v,fe)),se&&W.push(c.formatPiePercent(N.v/B.vTotal,fe)),N.text=W.join("<br>")}if(G){var ge=d.castOption(K,N.i,"texttemplate");if(ge){var he=function(Ie){return{label:Ie.label,value:Ie.v,valueLabel:c.formatPieValue(Ie.v,j.separators),percent:Ie.v/B.vTotal,percentLabel:c.formatPiePercent(Ie.v/B.vTotal,j.separators),color:Ie.color,text:Ie.text,customdata:d.castOption(K,Ie.i,"customdata")}}(N),ve=c.getFirstFilled(K.text,N.pts);(f(ve)||ve==="")&&(he.text=ve),N.text=d.texttemplateString(ge,he,F._fullLayout._d3locale,he,K._meta||{})}else N.text=""}}function H(F,N){var B=F.rotate*Math.PI/180,j=Math.cos(B),K=Math.sin(B),G=(N.left+N.right)/2,V=(N.top+N.bottom)/2;F.textX=G*j-V*K,F.textY=G*K+V*j,F.noCenter=!0}$.exports={plot:function(F,N){var B=F._context.staticPlot,j=F._fullLayout,K=j._size;a("pie",j),g(N,F),I(N,K);var G=d.makeTraceGroups(j._pielayer,N,"trace").each(function(V){var W=A.select(this),J=V[0],X=J.trace;(function(ee){var re,ie,se,fe=ee[0],ye=fe.r,ge=fe.trace,he=c.getRotationAngle(ge.rotation),ve=2*Math.PI/fe.vTotal,Ie="px0",xe="px1";if(ge.direction==="counterclockwise"){for(re=0;re<ee.length&&ee[re].hidden;re++);if(re===ee.length)return;he+=ve*ee[re].v,ve*=-1,Ie="px1",xe="px0"}for(se=U(ye,he),re=0;re<ee.length;re++)(ie=ee[re]).hidden||(ie[Ie]=se,ie.startangle=he,he+=ve*ie.v/2,ie.pxmid=U(ye,he),ie.midangle=he,se=U(ye,he+=ve*ie.v/2),ie.stopangle=he,ie[xe]=se,ie.largeArc=ie.v>fe.vTotal/2?1:0,ie.halfangle=Math.PI*Math.min(ie.v/fe.vTotal,.5),ie.ring=1-ge.hole,ie.rInscribed=_(ie,fe))})(V),W.attr("stroke-linejoin","round"),W.each(function(){var ee=A.select(this).selectAll("g.slice").data(V);ee.enter().append("g").classed("slice",!0),ee.exit().remove();var re=[[[],[]],[[],[]]],ie=!1;ee.each(function(xe,Ae){if(xe.hidden)A.select(this).selectAll("path,g").remove();else{xe.pointNumber=xe.i,xe.curveNumber=X.index,re[xe.pxmid[1]<0?0:1][xe.pxmid[0]<0?0:1].push(xe);var Se=J.cx,Te=J.cy,Q=A.select(this),oe=Q.selectAll("path.surface").data([xe]);if(oe.enter().append("path").classed("surface",!0).style({"pointer-events":B?"none":"all"}),Q.call(b,F,V),X.pull){var ce=+c.castOption(X.pull,xe.pts)||0;ce>0&&(Se+=ce*xe.pxmid[0],Te+=ce*xe.pxmid[1])}xe.cxFinal=Se,xe.cyFinal=Te;var me=X.hole;if(xe.v===J.vTotal){var Me="M"+(Se+xe.px0[0])+","+(Te+xe.px0[1])+de(xe.px0,xe.pxmid,!0,1)+de(xe.pxmid,xe.px0,!0,1)+"Z";me?oe.attr("d","M"+(Se+me*xe.px0[0])+","+(Te+me*xe.px0[1])+de(xe.px0,xe.pxmid,!1,me)+de(xe.pxmid,xe.px0,!1,me)+"Z"+Me):oe.attr("d",Me)}else{var Re=de(xe.px0,xe.px1,!0,1);if(me){var Ce=1-me;oe.attr("d","M"+(Se+me*xe.px1[0])+","+(Te+me*xe.px1[1])+de(xe.px1,xe.px0,!1,me)+"l"+Ce*xe.px0[0]+","+Ce*xe.px0[1]+Re+"Z")}else oe.attr("d","M"+Se+","+Te+"l"+xe.px0[0]+","+xe.px0[1]+Re+"Z")}z(F,xe,J);var ze=c.castOption(X.textposition,xe.pts),le=Q.selectAll("g.slicetext").data(xe.text&&ze!=="none"?[0]:[]);le.enter().append("g").classed("slicetext",!0),le.exit().remove(),le.each(function(){var be=d.ensureSingle(A.select(this),"text","",function(_t){_t.attr("data-notex",1)}),Fe=d.ensureUniformFontSize(F,ze==="outside"?function(_t,dt,bt){return{color:c.castOption(_t.outsidetextfont.color,dt.pts)||c.castOption(_t.textfont.color,dt.pts)||bt.color,family:c.castOption(_t.outsidetextfont.family,dt.pts)||c.castOption(_t.textfont.family,dt.pts)||bt.family,size:c.castOption(_t.outsidetextfont.size,dt.pts)||c.castOption(_t.textfont.size,dt.pts)||bt.size}}(X,xe,j.font):v(X,xe,j.font));be.text(xe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(x.font,Fe).call(o.convertToTspans,F);var Ve,He=x.bBox(be.node());if(ze==="outside")Ve=E(He,xe);else if(Ve=y(He,xe,J),ze==="auto"&&Ve.scale<1){var rt=d.ensureUniformFontSize(F,X.outsidetextfont);be.call(x.font,rt),Ve=E(He=x.bBox(be.node()),xe)}var tt=Ve.textPosAngle,ot=tt===void 0?xe.pxmid:U(J.r,tt);if(Ve.targetX=Se+ot[0]*Ve.rCenter+(Ve.x||0),Ve.targetY=Te+ot[1]*Ve.rCenter+(Ve.y||0),H(Ve,He),Ve.outside){var ht=Ve.targetY;xe.yLabelMin=ht-He.height/2,xe.yLabelMid=ht,xe.yLabelMax=ht+He.height/2,xe.labelExtraX=0,xe.labelExtraY=0,ie=!0}Ve.fontSize=Fe.size,n(X.type,Ve,j),V[Ae].transform=Ve,d.setTransormAndDisplay(be,Ve)})}function de(be,Fe,Ve,He){var rt=He*(Fe[0]-be[0]),tt=He*(Fe[1]-be[1]);return"a"+He*J.r+","+He*J.r+" 0 "+xe.largeArc+(Ve?" 1 ":" 0 ")+rt+","+tt}});var se=A.select(this).selectAll("g.titletext").data(X.title.text?[0]:[]);if(se.enter().append("g").classed("titletext",!0),se.exit().remove(),se.each(function(){var xe,Ae=d.ensureSingle(A.select(this),"text","",function(Te){Te.attr("data-notex",1)}),Se=X.title.text;X._meta&&(Se=d.templateString(Se,X._meta)),Ae.text(Se).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(x.font,X.title.font).call(o.convertToTspans,F),xe=X.title.position==="middle center"?function(Te){var Q=Math.sqrt(Te.titleBox.width*Te.titleBox.width+Te.titleBox.height*Te.titleBox.height);return{x:Te.cx,y:Te.cy,scale:Te.trace.hole*Te.r*2/Q,tx:0,ty:-Te.titleBox.height/2+Te.trace.title.font.size}}(J):L(J,K),Ae.attr("transform",t(xe.x,xe.y)+s(Math.min(1,xe.scale))+t(xe.tx,xe.ty))}),ie&&function(xe,Ae){var Se,Te,Q,oe,ce,me,Me,Re,Ce,ze,le,de,be;function Fe(tt,ot){return tt.pxmid[1]-ot.pxmid[1]}function Ve(tt,ot){return ot.pxmid[1]-tt.pxmid[1]}function He(tt,ot){ot||(ot={});var ht,_t,dt,bt,St=ot.labelExtraY+(Te?ot.yLabelMax:ot.yLabelMin),Et=Te?tt.yLabelMin:tt.yLabelMax,zt=Te?tt.yLabelMax:tt.yLabelMin,Ut=tt.cyFinal+ce(tt.px0[1],tt.px1[1]),Pt=St-Et;if(Pt*Me>0&&(tt.labelExtraY=Pt),Array.isArray(Ae.pull))for(_t=0;_t<ze.length;_t++)(dt=ze[_t])===tt||(c.castOption(Ae.pull,tt.pts)||0)>=(c.castOption(Ae.pull,dt.pts)||0)||((tt.pxmid[1]-dt.pxmid[1])*Me>0?(Pt=dt.cyFinal+ce(dt.px0[1],dt.px1[1])-Et-tt.labelExtraY)*Me>0&&(tt.labelExtraY+=Pt):(zt+tt.labelExtraY-Ut)*Me>0&&(ht=3*me*Math.abs(_t-ze.indexOf(tt)),(bt=dt.cxFinal+oe(dt.px0[0],dt.px1[0])+ht-(tt.cxFinal+tt.pxmid[0])-tt.labelExtraX)*me>0&&(tt.labelExtraX+=bt)))}for(Te=0;Te<2;Te++)for(Q=Te?Fe:Ve,ce=Te?Math.max:Math.min,Me=Te?1:-1,Se=0;Se<2;Se++){for(oe=Se?Math.max:Math.min,me=Se?1:-1,(Re=xe[Te][Se]).sort(Q),Ce=xe[1-Te][Se],ze=Ce.concat(Re),de=[],le=0;le<Re.length;le++)Re[le].yLabelMid!==void 0&&de.push(Re[le]);for(be=!1,le=0;Te&&le<Ce.length;le++)if(Ce[le].yLabelMid!==void 0){be=Ce[le];break}for(le=0;le<de.length;le++){var rt=le&&de[le-1];be&&!le&&(rt=be),He(de[le],rt)}}}(re,X),function(xe,Ae){xe.each(function(Se){var Te=A.select(this);if(Se.labelExtraX||Se.labelExtraY){var Q=Te.select("g.slicetext text");Se.transform.targetX+=Se.labelExtraX,Se.transform.targetY+=Se.labelExtraY,d.setTransormAndDisplay(Q,Se.transform);var oe=Se.cxFinal+Se.pxmid[0],ce="M"+oe+","+(Se.cyFinal+Se.pxmid[1]),me=(Se.yLabelMax-Se.yLabelMin)*(Se.pxmid[0]<0?-1:1)/4;if(Se.labelExtraX){var Me=Se.labelExtraX*Se.pxmid[1]/Se.pxmid[0],Re=Se.yLabelMid+Se.labelExtraY-(Se.cyFinal+Se.pxmid[1]);Math.abs(Me)>Math.abs(Re)?ce+="l"+Re*Se.pxmid[0]/Se.pxmid[1]+","+Re+"H"+(oe+Se.labelExtraX+me):ce+="l"+Se.labelExtraX+","+Me+"v"+(Re-Me)+"h"+me}else ce+="V"+(Se.yLabelMid+Se.labelExtraY)+"h"+me;d.ensureSingle(Te,"path","textline").call(T.stroke,Ae.outsidetextfont.color).attr({"stroke-width":Math.min(2,Ae.outsidetextfont.size/8),d:ce,fill:"none"})}else Te.select("path.textline").remove()})}(ee,X),ie&&X.automargin){var fe=x.bBox(W.node()),ye=X.domain,ge=K.w*(ye.x[1]-ye.x[0]),he=K.h*(ye.y[1]-ye.y[0]),ve=(.5*ge-J.r)/K.w,Ie=(.5*he-J.r)/K.h;k.autoMargin(F,"pie."+X.uid+".automargin",{xl:ye.x[0]-ve,xr:ye.x[1]+ve,yb:ye.y[0]-Ie,yt:ye.y[1]+Ie,l:Math.max(J.cx-J.r-fe.left,0),r:Math.max(fe.right-(J.cx+J.r),0),b:Math.max(fe.bottom-(J.cy+J.r),0),t:Math.max(J.cy-J.r-fe.top,0),pad:5})}})});setTimeout(function(){G.selectAll("tspan").each(function(){var V=A.select(this);V.attr("dy")&&V.attr("dy",V.attr("dy"))})},0)},formatSliceLabel:z,transformInsideText:y,determineInsideTextFont:v,positionTitleOutside:L,prerenderTitles:g,layoutAreas:I,attachFxHandlers:b,computeTransform:H}},68357:function($,R,e){var A=e(39898),k=e(63463),l=e(72597).resizeText;$.exports=function(T){var x=T._fullLayout._pielayer.selectAll(".trace");l(T,x,"pie"),x.each(function(d){var s=d[0].trace,t=A.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(o){A.select(this).call(k,o,s)})})}},63463:function($,R,e){var A=e(7901),k=e(53581).castOption;$.exports=function(l,T,x){var d=x.marker.line,s=k(d.color,T.pts)||A.defaultLine,t=k(d.width,T.pts)||0;l.style("stroke-width",t).call(A.fill,T.color).call(A.stroke,s)}},10959:function($,R,e){var A=e(82196);$.exports={x:A.x,y:A.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:A.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function($,R,e){var A=e(9330).gl_pointcloud2d,k=e(78614),l=e(71739).findExtremes,T=e(34603);function x(s,t){this.scene=s,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=A(s.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var d=x.prototype;d.handlePick=function(s){var t=this.idToIndex[s.pointId];return{trace:this,dataCoord:s.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},d.update=function(s){this.index=s.index,this.textLabels=s.text,this.name=s.name,this.hoverinfo=s.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(s),this.color=T(s,{})},d.updateFast=function(s){var t,o,r,n,a,i,c=this.xData=this.pickXData=s.x,h=this.yData=this.pickYData=s.y,f=this.pickXYData=s.xy,b=s.xbounds&&s.ybounds,v=s.indices,g=this.bounds;if(f){if(r=f,t=f.length>>>1,b)g[0]=s.xbounds[0],g[2]=s.xbounds[1],g[1]=s.ybounds[0],g[3]=s.ybounds[1];else for(i=0;i<t;i++)n=r[2*i],a=r[2*i+1],n<g[0]&&(g[0]=n),n>g[2]&&(g[2]=n),a<g[1]&&(g[1]=a),a>g[3]&&(g[3]=a);if(v)o=v;else for(o=new Int32Array(t),i=0;i<t;i++)o[i]=i}else for(t=c.length,r=new Float32Array(2*t),o=new Int32Array(t),i=0;i<t;i++)n=c[i],a=h[i],o[i]=i,r[2*i]=n,r[2*i+1]=a,n<g[0]&&(g[0]=n),n>g[2]&&(g[2]=n),a<g[1]&&(g[1]=a),a>g[3]&&(g[3]=a);this.idToIndex=o,this.pointcloudOptions.idToIndex=o,this.pointcloudOptions.positions=r;var y=k(s.marker.color),p=k(s.marker.border.color),m=s.opacity*s.marker.opacity;y[3]*=m,this.pointcloudOptions.color=y;var w=s.marker.blend;w===null&&(w=c.length<100||h.length<100),this.pointcloudOptions.blend=w,p[3]*=m,this.pointcloudOptions.borderColor=p;var u=s.marker.sizemin,S=Math.max(s.marker.sizemax,s.marker.sizemin);this.pointcloudOptions.sizeMin=u,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=s.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var _=this.scene.xaxis,E=this.scene.yaxis,L=S/2||.5;s._extremes[_._id]=l(_,[g[0],g[2]],{ppad:L}),s._extremes[E._id]=l(E,[g[1],g[3]],{ppad:L})},d.dispose=function(){this.pointcloud.dispose()},$.exports=function(s,t){var o=new x(s,t.uid);return o.update(t),o}},33876:function($,R,e){var A=e(71828),k=e(10959);$.exports=function(l,T,x){function d(s,t){return A.coerce(l,T,k,s,t)}d("x"),d("y"),d("xbounds"),d("ybounds"),l.xy&&l.xy instanceof Float32Array&&(T.xy=l.xy),l.indices&&l.indices instanceof Int32Array&&(T.indices=l.indices),d("text"),d("marker.color",x),d("marker.opacity"),d("marker.blend"),d("marker.sizemin"),d("marker.sizemax"),d("marker.border.color",x),d("marker.border.arearatio"),T._length=null}},20593:function($,R,e){$.exports={attributes:e(10959),supplyDefaults:e(33876),calc:e(36563),plot:e(42743),moduleType:"trace",name:"pointcloud",basePlotModule:e(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function($,R,e){var A=e(41940),k=e(9012),l=e(22399),T=e(77914),x=e(27670).Y,d=e(5386).f,s=e(50693),t=e(44467).templatedArray,o=e(12663).descriptionOnlyNumbers,r=e(1426).extendFlat,n=e(30962).overrideAll;($.exports=n({hoverinfo:r({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:x({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:o("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:A({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function($,R,e){var A=e(30962).overrideAll,k=e(27659).a0,l=e(60436),T=e(528),x=e(6964),d=e(28569),s=e(47322).prepSelect,t=e(71828),o=e(73972),r="sankey";function n(a,i){var c=a._fullData[i],h=a._fullLayout,f=h.dragmode,b=h.dragmode==="pan"?"move":"crosshair",v=c._bgRect;if(v&&f!=="pan"&&f!=="zoom"){x(v,b);var g={_id:"x",c2p:t.identity,_offset:c._sankey.translateX,_length:c._sankey.width},y={_id:"y",c2p:t.identity,_offset:c._sankey.translateY,_length:c._sankey.height},p={gd:a,element:v.node(),plotinfo:{id:i,xaxis:g,yaxis:y,fillRangeItems:t.noop},subplot:i,xaxes:[g],yaxes:[y],doneFnCompleted:function(m){var w,u=a._fullData[i],S=u.node.groups.slice(),_=[];function E(I){for(var U=u._sankey.graph.nodes,z=0;z<U.length;z++)if(U[z].pointNumber===I)return U[z]}for(var L=0;L<m.length;L++){var C=E(m[L].pointNumber);if(C)if(C.group){for(var P=0;P<C.childrenNodes.length;P++)_.push(C.childrenNodes[P].pointNumber);S[C.pointNumber-u.node._count]=!1}else _.push(C.pointNumber)}w=S.filter(Boolean).concat([_]),o.call("_guiRestyle",a,{"node.groups":[w]},i)},prepFn:function(m,w,u){s(m,w,u,p,f)}};d.init(p)}}R.name=r,R.baseLayoutAttrOverrides=A({hoverlabel:T.hoverlabel},"plot","nested"),R.plot=function(a){var i=k(a.calcdata,r)[0];l(a,i),R.updateFx(a)},R.clean=function(a,i,c,h){var f=h._has&&h._has(r),b=i._has&&i._has(r);f&&!b&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())},R.updateFx=function(a){for(var i=0;i<a._fullData.length;i++)n(a,i)}},92930:function($,R,e){var A=e(68664),k=e(71828),l=e(28984).wrap,T=k.isArrayOrTypedArray,x=k.isIndex,d=e(21081);$.exports=function(s,t){var o=function(r){var n,a=r.node,i=r.link,c=[],h=T(i.color),f=T(i.customdata),b={},v={},g=i.colorscales.length;for(n=0;n<g;n++){var y=i.colorscales[n],p=d.extractScale(y,{cLetter:"c"}),m=d.makeColorScaleFunc(p);v[y.label]=m}var w=0;for(n=0;n<i.value.length;n++)i.source[n]>w&&(w=i.source[n]),i.target[n]>w&&(w=i.target[n]);var u,S=w+1;r.node._count=S;var _=r.node.groups,E={};for(n=0;n<_.length;n++){var L=_[n];for(u=0;u<L.length;u++){var C=L[u],P=S+n;E.hasOwnProperty(C)?k.warn("Node "+C+" is already part of a group."):E[C]=P}}var I={source:[],target:[]};for(n=0;n<i.value.length;n++){var U=i.value[n],z=i.source[n],H=i.target[n];if(U>0&&x(z,S)&&x(H,S)&&(!E.hasOwnProperty(z)||!E.hasOwnProperty(H)||E[z]!==E[H])){E.hasOwnProperty(H)&&(H=E[H]),E.hasOwnProperty(z)&&(z=E[z]),H=+H,b[z=+z]=b[H]=!0;var F="";i.label&&i.label[n]&&(F=i.label[n]);var N=null;F&&v.hasOwnProperty(F)&&(N=v[F]),c.push({pointNumber:n,label:F,color:h?i.color[n]:i.color,customdata:f?i.customdata[n]:i.customdata,concentrationscale:N,source:z,target:H,value:+U}),I.source.push(z),I.target.push(H)}}var B=S+_.length,j=T(a.color),K=T(a.customdata),G=[];for(n=0;n<B;n++)if(b[n]){var V=a.label[n];G.push({group:n>S-1,childrenNodes:[],pointNumber:n,label:V,color:j?a.color[n]:a.color,customdata:K?a.customdata[n]:a.customdata})}var W=!1;return function(J,X,ee){for(var re=k.init2dArray(J,0),ie=0;ie<Math.min(X.length,ee.length);ie++)if(k.isIndex(X[ie],J)&&k.isIndex(ee[ie],J)){if(X[ie]===ee[ie])return!0;re[X[ie]].push(ee[ie])}return A(re).components.some(function(se){return se.length>1})}(B,I.source,I.target)&&(W=!0),{circular:W,links:c,nodes:G,groups:_,groupLookup:E}}(t);return l({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},85247:function($){$.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function($,R,e){var A=e(71828),k=e(39953),l=e(7901),T=e(84267),x=e(27670).c,d=e(38048),s=e(44467),t=e(85501);function o(r,n){function a(i,c){return A.coerce(r,n,k.link.colorscales,i,c)}a("label"),a("cmin"),a("cmax"),a("colorscale")}$.exports=function(r,n,a,i){function c(S,_){return A.coerce(r,n,k,S,_)}var h=A.extendDeep(i.hoverlabel,r.hoverlabel),f=r.node,b=s.newContainer(n,"node");function v(S,_){return A.coerce(f,b,k.node,S,_)}v("label"),v("groups"),v("x"),v("y"),v("pad"),v("thickness"),v("line.color"),v("line.width"),v("hoverinfo",r.hoverinfo),d(f,b,v,h),v("hovertemplate");var g=i.colorway;v("color",b.label.map(function(S,_){return l.addOpacity(function(E){return g[E%g.length]}(_),.8)})),v("customdata");var y=r.link||{},p=s.newContainer(n,"link");function m(S,_){return A.coerce(y,p,k.link,S,_)}m("label"),m("arrowlen"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",r.hoverinfo),d(y,p,m,h),m("hovertemplate");var w,u=T(i.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";m("color",A.repeat(u,p.value.length)),m("customdata"),t(y,p,{name:"colorscales",handleItemDefaults:o}),x(n,i,c),c("orientation"),c("valueformat"),c("valuesuffix"),b.x.length&&b.y.length&&(w="freeform"),c("arrangement",w),A.coerceFont(c,"textfont",A.extendFlat({},i.font)),n._length=null}},29396:function($,R,e){$.exports={attributes:e(39953),supplyDefaults:e(26857),calc:e(92930),plot:e(60436),moduleType:"trace",name:"sankey",basePlotModule:e(75536),selectPoints:e(84564),categories:["noOpacity"],meta:{}}},60436:function($,R,e){var A=e(39898),k=e(71828),l=k.numberFormat,T=e(3393),x=e(30211),d=e(7901),s=e(85247).cn,t=k._;function o(y){return y!==""}function r(y,p){return y.filter(function(m){return m.key===p.traceId})}function n(y,p){A.select(y).select("path").style("fill-opacity",p),A.select(y).select("rect").style("fill-opacity",p)}function a(y){A.select(y).select("text.name").style("fill","black")}function i(y){return function(p){return y.node.sourceLinks.indexOf(p.link)!==-1||y.node.targetLinks.indexOf(p.link)!==-1}}function c(y){return function(p){return p.node.sourceLinks.indexOf(y.link)!==-1||p.node.targetLinks.indexOf(y.link)!==-1}}function h(y,p,m){p&&m&&r(m,p).selectAll("."+s.sankeyLink).filter(i(p)).call(b.bind(0,p,m,!1))}function f(y,p,m){p&&m&&r(m,p).selectAll("."+s.sankeyLink).filter(i(p)).call(v.bind(0,p,m,!1))}function b(y,p,m,w){var u=w.datum().link.label;w.style("fill-opacity",function(S){if(!S.link.concentrationscale)return .4}),u&&r(p,y).selectAll("."+s.sankeyLink).filter(function(S){return S.link.label===u}).style("fill-opacity",function(S){if(!S.link.concentrationscale)return .4}),m&&r(p,y).selectAll("."+s.sankeyNode).filter(c(y)).call(h)}function v(y,p,m,w){var u=w.datum().link.label;w.style("fill-opacity",function(S){return S.tinyColorAlpha}),u&&r(p,y).selectAll("."+s.sankeyLink).filter(function(S){return S.link.label===u}).style("fill-opacity",function(S){return S.tinyColorAlpha}),m&&r(p,y).selectAll(s.sankeyNode).filter(c(y)).call(f)}function g(y,p){var m=y.hoverlabel||{},w=k.nestedProperty(m,p).get();return!Array.isArray(w)&&w}$.exports=function(y,p){for(var m=y._fullLayout,w=m._paper,u=m._size,S=0;S<y._fullData.length;S++)if(y._fullData[S].visible&&y._fullData[S].type===s.sankey&&!y._fullData[S]._viewInitial){var _=y._fullData[S].node;y._fullData[S]._viewInitial={node:{groups:_.groups.slice(),x:_.x.slice(),y:_.y.slice()}}}var E=t(y,"source:")+" ",L=t(y,"target:")+" ",C=t(y,"concentration:")+" ",P=t(y,"incoming flow count:")+" ",I=t(y,"outgoing flow count:")+" ";T(y,w,p,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{linkEvents:{hover:function(U,z,H){y._fullLayout.hovermode!==!1&&(A.select(U).call(b.bind(0,z,H,!0)),z.link.trace.link.hoverinfo!=="skip"&&(z.link.fullData=z.link.trace,y.emit("plotly_hover",{event:A.event,points:[z.link]})))},follow:function(U,z){if(y._fullLayout.hovermode!==!1){var H=z.link.trace.link;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){for(var F=[],N=0,B=0;B<z.flow.links.length;B++){var j=z.flow.links[B];if(y._fullLayout.hovermode!=="closest"||z.link.pointNumber===j.pointNumber){z.link.pointNumber===j.pointNumber&&(N=B),j.fullData=j.trace,H=z.link.trace.link;var K=V(j),G={valueLabel:l(z.valueFormat)(j.value)+z.valueSuffix};F.push({x:K[0],y:K[1],name:G.valueLabel,text:[j.label||"",E+j.source.label,L+j.target.label,j.concentrationscale?C+l("%0.2f")(j.flow.labelConcentration):""].filter(o).join("<br>"),color:g(H,"bgcolor")||d.addOpacity(j.color,1),borderColor:g(H,"bordercolor"),fontFamily:g(H,"font.family"),fontSize:g(H,"font.size"),fontColor:g(H,"font.color"),nameLength:g(H,"namelength"),textAlign:g(H,"align"),idealAlign:A.event.x<K[0]?"right":"left",hovertemplate:H.hovertemplate,hovertemplateLabels:G,eventData:[j]})}}x.loneHover(F,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y,anchorIndex:N}).each(function(){z.link.concentrationscale||n(this,.65),a(this)})}}function V(W){var J,X;W.circular?(J=(W.circularPathData.leftInnerExtent+W.circularPathData.rightInnerExtent)/2,X=W.circularPathData.verticalFullExtent):(J=(W.source.x1+W.target.x0)/2,X=(W.y0+W.y1)/2);var ee=[J,X];return W.trace.orientation==="v"&&ee.reverse(),ee[0]+=z.parent.translateX,ee[1]+=z.parent.translateY,ee}},unhover:function(U,z,H){y._fullLayout.hovermode!==!1&&(A.select(U).call(v.bind(0,z,H,!0)),z.link.trace.link.hoverinfo!=="skip"&&(z.link.fullData=z.link.trace,y.emit("plotly_unhover",{event:A.event,points:[z.link]})),x.loneUnhover(m._hoverlayer.node()))},select:function(U,z){var H=z.link;H.originalEvent=A.event,y._hoverdata=[H],x.click(y,{target:!0})}},nodeEvents:{hover:function(U,z,H){y._fullLayout.hovermode!==!1&&(A.select(U).call(h,z,H),z.node.trace.node.hoverinfo!=="skip"&&(z.node.fullData=z.node.trace,y.emit("plotly_hover",{event:A.event,points:[z.node]})))},follow:function(U,z){if(y._fullLayout.hovermode!==!1){var H=z.node.trace.node;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){var F=A.select(U).select("."+s.nodeRect),N=y._fullLayout._paperdiv.node().getBoundingClientRect(),B=F.node().getBoundingClientRect(),j=B.left-2-N.left,K=B.right+2-N.left,G=B.top+B.height/4-N.top,V={valueLabel:l(z.valueFormat)(z.node.value)+z.valueSuffix};z.node.fullData=z.node.trace,y._fullLayout._calcInverseTransform(y);var W=y._fullLayout._invScaleX,J=y._fullLayout._invScaleY,X=x.loneHover({x0:W*j,x1:W*K,y:J*G,name:l(z.valueFormat)(z.node.value)+z.valueSuffix,text:[z.node.label,P+z.node.targetLinks.length,I+z.node.sourceLinks.length].filter(o).join("<br>"),color:g(H,"bgcolor")||z.tinyColorHue,borderColor:g(H,"bordercolor"),fontFamily:g(H,"font.family"),fontSize:g(H,"font.size"),fontColor:g(H,"font.color"),nameLength:g(H,"namelength"),textAlign:g(H,"align"),idealAlign:"left",hovertemplate:H.hovertemplate,hovertemplateLabels:V,eventData:[z.node]},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y});n(X,.85),a(X)}}},unhover:function(U,z,H){y._fullLayout.hovermode!==!1&&(A.select(U).call(f,z,H),z.node.trace.node.hoverinfo!=="skip"&&(z.node.fullData=z.node.trace,y.emit("plotly_unhover",{event:A.event,points:[z.node]})),x.loneUnhover(m._hoverlayer.node()))},select:function(U,z,H){var F=z.node;F.originalEvent=A.event,y._hoverdata=[F],A.select(U).call(f,z,H),x.click(y,{target:!0})}}})}},3393:function($,R,e){var A=e(49887),k=e(29502).k4,l=e(39898),T=e(30838),x=e(86781),d=e(85247),s=e(84267),t=e(7901),o=e(91424),r=e(71828),n=r.strTranslate,a=r.strRotate,i=e(28984),c=i.keyFun,h=i.repeat,f=i.unwrap,b=e(63893),v=e(73972),g=e(18783),y=g.CAP_SHIFT,p=g.LINE_SPACING;function m(B,j,K){var G,V=f(j),W=V.trace,J=W.domain,X=W.orientation==="h",ee=W.node.pad,re=W.node.thickness,ie=B.width*(J.x[1]-J.x[0]),se=B.height*(J.y[1]-J.y[0]),fe=V._nodes,ye=V._links,ge=V.circular;(G=ge?x.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(d.sankeyIterations).size(X?[ie,se]:[se,ie]).nodeWidth(re).nodePadding(ee).nodeId(function(me){return me.pointNumber}).nodes(fe).links(ye);var he,ve,Ie,xe=G();for(var Ae in G.nodePadding()<ee&&r.warn("node.pad was reduced to ",G.nodePadding()," to fit within the figure."),V._groupLookup){var Se,Te=parseInt(V._groupLookup[Ae]);for(he=0;he<xe.nodes.length;he++)if(xe.nodes[he].pointNumber===Te){Se=xe.nodes[he];break}if(Se){var Q={pointNumber:parseInt(Ae),x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};xe.nodes.unshift(Q),Se.childrenNodes.unshift(Q)}}if(function(){for(he=0;he<xe.nodes.length;he++){var me,Me,Re=xe.nodes[he],Ce={};for(ve=0;ve<Re.targetLinks.length;ve++)me=(Me=Re.targetLinks[ve]).source.pointNumber+":"+Me.target.pointNumber,Ce.hasOwnProperty(me)||(Ce[me]=[]),Ce[me].push(Me);var ze=Object.keys(Ce);for(ve=0;ve<ze.length;ve++){var le=Ce[me=ze[ve]],de=0,be={};for(Ie=0;Ie<le.length;Ie++)be[(Me=le[Ie]).label]||(be[Me.label]=0),be[Me.label]+=Me.value,de+=Me.value;for(Ie=0;Ie<le.length;Ie++)(Me=le[Ie]).flow={value:de,labelConcentration:be[Me.label]/de,concentration:Me.value/de,links:le},Me.concentrationscale&&(Me.color=s(Me.concentrationscale(Me.flow.labelConcentration)))}var Fe=0;for(ve=0;ve<Re.sourceLinks.length;ve++)Fe+=Re.sourceLinks[ve].value;for(ve=0;ve<Re.sourceLinks.length;ve++)(Me=Re.sourceLinks[ve]).concentrationOut=Me.value/Fe;var Ve=0;for(ve=0;ve<Re.targetLinks.length;ve++)Ve+=Re.targetLinks[ve].value;for(ve=0;ve<Re.targetLinks.length;ve++)(Me=Re.targetLinks[ve]).concenrationIn=Me.value/Ve}}(),W.node.x.length&&W.node.y.length){for(he=0;he<Math.min(W.node.x.length,W.node.y.length,xe.nodes.length);he++)if(W.node.x[he]&&W.node.y[he]){var oe=[W.node.x[he]*ie,W.node.y[he]*se];xe.nodes[he].x0=oe[0]-re/2,xe.nodes[he].x1=oe[0]+re/2;var ce=xe.nodes[he].y1-xe.nodes[he].y0;xe.nodes[he].y0=oe[1]-ce/2,xe.nodes[he].y1=oe[1]+ce/2}W.arrangement==="snap"&&function(me){var Me,Re,Ce=me.map(function(Fe,Ve){return{x0:Fe.x0,index:Ve}}).sort(function(Fe,Ve){return Fe.x0-Ve.x0}),ze=[],le=-1,de=-1/0;for(he=0;he<Ce.length;he++){var be=me[Ce[he].index];be.x0>de+re&&(le+=1,Me=be.x0),de=be.x0,ze[le]||(ze[le]=[]),ze[le].push(be),Re=Me-be.x0,be.x0+=Re,be.x1+=Re}return ze}(fe=xe.nodes).forEach(function(me){var Me,Re,Ce,ze=0,le=me.length;for(me.sort(function(de,be){return de.y0-be.y0}),Ce=0;Ce<le;++Ce)(Me=me[Ce]).y0>=ze||(Re=ze-Me.y0)>1e-6&&(Me.y0+=Re,Me.y1+=Re),ze=Me.y1+ee}),G.update(xe)}return{circular:ge,key:K,trace:W,guid:r.randstr(),horizontal:X,width:ie,height:se,nodePad:W.node.pad,nodeLineColor:W.node.line.color,nodeLineWidth:W.node.line.width,linkLineColor:W.link.line.color,linkLineWidth:W.link.line.width,linkArrowLength:W.link.arrowlen,valueFormat:W.valueformat,valueSuffix:W.valuesuffix,textFont:W.textfont,translateX:J.x[0]*B.width+B.margin.l,translateY:B.height-J.y[1]*B.height+B.margin.t,dragParallel:X?se:ie,dragPerpendicular:X?ie:se,arrangement:W.arrangement,sankey:G,graph:xe,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(B,j,K){var G=s(j.color),V=j.source.label+"|"+j.target.label+"__"+K;return j.trace=B.trace,j.curveNumber=B.trace.index,{circular:B.circular,key:V,traceId:B.key,pointNumber:j.pointNumber,link:j,tinyColorHue:t.tinyRGB(G),tinyColorAlpha:G.getAlpha(),linkPath:u,linkLineColor:B.linkLineColor,linkLineWidth:B.linkLineWidth,linkArrowLength:B.linkArrowLength,valueFormat:B.valueFormat,valueSuffix:B.valueSuffix,sankey:B.sankey,parent:B,interactionState:B.interactionState,flow:j.flow}}function u(){return function(B){var j=B.linkArrowLength;if(B.link.circular)return function(ve,Ie){var xe=ve.width/2,Ae=ve.circularPathData;return ve.circularLinkType==="top"?"M "+(Ae.targetX-Ie)+" "+(Ae.targetY+xe)+" L"+(Ae.rightInnerExtent-Ie)+" "+(Ae.targetY+xe)+"A"+(Ae.rightLargeArcRadius+xe)+" "+(Ae.rightSmallArcRadius+xe)+" 0 0 1 "+(Ae.rightFullExtent-xe-Ie)+" "+(Ae.targetY-Ae.rightSmallArcRadius)+"L"+(Ae.rightFullExtent-xe-Ie)+" "+Ae.verticalRightInnerExtent+"A"+(Ae.rightLargeArcRadius+xe)+" "+(Ae.rightLargeArcRadius+xe)+" 0 0 1 "+(Ae.rightInnerExtent-Ie)+" "+(Ae.verticalFullExtent-xe)+"L"+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent-xe)+"A"+(Ae.leftLargeArcRadius+xe)+" "+(Ae.leftLargeArcRadius+xe)+" 0 0 1 "+(Ae.leftFullExtent+xe)+" "+Ae.verticalLeftInnerExtent+"L"+(Ae.leftFullExtent+xe)+" "+(Ae.sourceY-Ae.leftSmallArcRadius)+"A"+(Ae.leftLargeArcRadius+xe)+" "+(Ae.leftSmallArcRadius+xe)+" 0 0 1 "+Ae.leftInnerExtent+" "+(Ae.sourceY+xe)+"L"+Ae.sourceX+" "+(Ae.sourceY+xe)+"L"+Ae.sourceX+" "+(Ae.sourceY-xe)+"L"+Ae.leftInnerExtent+" "+(Ae.sourceY-xe)+"A"+(Ae.leftLargeArcRadius-xe)+" "+(Ae.leftSmallArcRadius-xe)+" 0 0 0 "+(Ae.leftFullExtent-xe)+" "+(Ae.sourceY-Ae.leftSmallArcRadius)+"L"+(Ae.leftFullExtent-xe)+" "+Ae.verticalLeftInnerExtent+"A"+(Ae.leftLargeArcRadius-xe)+" "+(Ae.leftLargeArcRadius-xe)+" 0 0 0 "+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent+xe)+"L"+(Ae.rightInnerExtent-Ie)+" "+(Ae.verticalFullExtent+xe)+"A"+(Ae.rightLargeArcRadius-xe)+" "+(Ae.rightLargeArcRadius-xe)+" 0 0 0 "+(Ae.rightFullExtent+xe-Ie)+" "+Ae.verticalRightInnerExtent+"L"+(Ae.rightFullExtent+xe-Ie)+" "+(Ae.targetY-Ae.rightSmallArcRadius)+"A"+(Ae.rightLargeArcRadius-xe)+" "+(Ae.rightSmallArcRadius-xe)+" 0 0 0 "+(Ae.rightInnerExtent-Ie)+" "+(Ae.targetY-xe)+"L"+(Ae.targetX-Ie)+" "+(Ae.targetY-xe)+(Ie>0?"L"+Ae.targetX+" "+Ae.targetY:"")+"Z":"M "+(Ae.targetX-Ie)+" "+(Ae.targetY-xe)+" L"+(Ae.rightInnerExtent-Ie)+" "+(Ae.targetY-xe)+"A"+(Ae.rightLargeArcRadius+xe)+" "+(Ae.rightSmallArcRadius+xe)+" 0 0 0 "+(Ae.rightFullExtent-xe-Ie)+" "+(Ae.targetY+Ae.rightSmallArcRadius)+"L"+(Ae.rightFullExtent-xe-Ie)+" "+Ae.verticalRightInnerExtent+"A"+(Ae.rightLargeArcRadius+xe)+" "+(Ae.rightLargeArcRadius+xe)+" 0 0 0 "+(Ae.rightInnerExtent-Ie)+" "+(Ae.verticalFullExtent+xe)+"L"+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent+xe)+"A"+(Ae.leftLargeArcRadius+xe)+" "+(Ae.leftLargeArcRadius+xe)+" 0 0 0 "+(Ae.leftFullExtent+xe)+" "+Ae.verticalLeftInnerExtent+"L"+(Ae.leftFullExtent+xe)+" "+(Ae.sourceY+Ae.leftSmallArcRadius)+"A"+(Ae.leftLargeArcRadius+xe)+" "+(Ae.leftSmallArcRadius+xe)+" 0 0 0 "+Ae.leftInnerExtent+" "+(Ae.sourceY-xe)+"L"+Ae.sourceX+" "+(Ae.sourceY-xe)+"L"+Ae.sourceX+" "+(Ae.sourceY+xe)+"L"+Ae.leftInnerExtent+" "+(Ae.sourceY+xe)+"A"+(Ae.leftLargeArcRadius-xe)+" "+(Ae.leftSmallArcRadius-xe)+" 0 0 1 "+(Ae.leftFullExtent-xe)+" "+(Ae.sourceY+Ae.leftSmallArcRadius)+"L"+(Ae.leftFullExtent-xe)+" "+Ae.verticalLeftInnerExtent+"A"+(Ae.leftLargeArcRadius-xe)+" "+(Ae.leftLargeArcRadius-xe)+" 0 0 1 "+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent-xe)+"L"+(Ae.rightInnerExtent-Ie)+" "+(Ae.verticalFullExtent-xe)+"A"+(Ae.rightLargeArcRadius-xe)+" "+(Ae.rightLargeArcRadius-xe)+" 0 0 1 "+(Ae.rightFullExtent+xe-Ie)+" "+Ae.verticalRightInnerExtent+"L"+(Ae.rightFullExtent+xe-Ie)+" "+(Ae.targetY+Ae.rightSmallArcRadius)+"A"+(Ae.rightLargeArcRadius-xe)+" "+(Ae.rightSmallArcRadius-xe)+" 0 0 1 "+(Ae.rightInnerExtent-Ie)+" "+(Ae.targetY+xe)+"L"+(Ae.targetX-Ie)+" "+(Ae.targetY+xe)+(Ie>0?"L"+Ae.targetX+" "+Ae.targetY:"")+"Z"}(B.link,j);var K=Math.abs((B.link.target.x0-B.link.source.x1)/2);j>K&&(j=K);var G=B.link.source.x1,V=B.link.target.x0-j,W=k(G,V),J=W(.5),X=W(.5),ee=B.link.y0-B.link.width/2,re=B.link.y0+B.link.width/2,ie=B.link.y1-B.link.width/2,se=B.link.y1+B.link.width/2,fe="M"+G+","+ee,ye="C"+J+","+ee+" "+X+","+ie+" "+V+","+ie,ge="C"+X+","+se+" "+J+","+re+" "+G+","+re,he=j>0?"L"+(V+j)+","+(ie+B.link.width/2):"";return fe+ye+(he+="L"+V+","+se)+ge+"Z"}}function S(B,j){var K=s(j.color),G=d.nodePadAcross,V=B.nodePad/2;j.dx=j.x1-j.x0,j.dy=j.y1-j.y0;var W=j.dx,J=Math.max(.5,j.dy),X="node_"+j.pointNumber;return j.group&&(X=r.randstr()),j.trace=B.trace,j.curveNumber=B.trace.index,{index:j.pointNumber,key:X,partOfGroup:j.partOfGroup||!1,group:j.group,traceId:B.key,trace:B.trace,node:j,nodePad:B.nodePad,nodeLineColor:B.nodeLineColor,nodeLineWidth:B.nodeLineWidth,textFont:B.textFont,size:B.horizontal?B.height:B.width,visibleWidth:Math.ceil(W),visibleHeight:J,zoneX:-G,zoneY:-V,zoneWidth:W+2*G,zoneHeight:J+2*V,labelY:B.horizontal?j.dy/2+1:j.dx/2+1,left:j.originalLayer===1,sizeAcross:B.width,forceLayouts:B.forceLayouts,horizontal:B.horizontal,darkBackground:K.getBrightness()<=128,tinyColorHue:t.tinyRGB(K),tinyColorAlpha:K.getAlpha(),valueFormat:B.valueFormat,valueSuffix:B.valueSuffix,sankey:B.sankey,graph:B.graph,arrangement:B.arrangement,uniqueNodeLabelPathId:[B.guid,B.key,X].join("_"),interactionState:B.interactionState,figure:B}}function _(B){B.attr("transform",function(j){return n(j.node.x0.toFixed(3),j.node.y0.toFixed(3))})}function E(B){B.call(_)}function L(B,j){B.call(E),j.attr("d",u())}function C(B){B.attr("width",function(j){return j.node.x1-j.node.x0}).attr("height",function(j){return j.visibleHeight})}function P(B){return B.link.width>1||B.linkLineWidth>0}function I(B){return n(B.translateX,B.translateY)+(B.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(B,j,K){B.on(".basic",null).on("mouseover.basic",function(G){G.interactionState.dragInProgress||G.partOfGroup||(K.hover(this,G,j),G.interactionState.hovered=[this,G])}).on("mousemove.basic",function(G){G.interactionState.dragInProgress||G.partOfGroup||(K.follow(this,G),G.interactionState.hovered=[this,G])}).on("mouseout.basic",function(G){G.interactionState.dragInProgress||G.partOfGroup||(K.unhover(this,G,j),G.interactionState.hovered=!1)}).on("click.basic",function(G){G.interactionState.hovered&&(K.unhover(this,G,j),G.interactionState.hovered=!1),G.interactionState.dragInProgress||G.partOfGroup||K.select(this,G,j)})}function z(B,j,K,G){var V=l.behavior.drag().origin(function(W){return{x:W.node.x0+W.visibleWidth/2,y:W.node.y0+W.visibleHeight/2}}).on("dragstart",function(W){if(W.arrangement!=="fixed"&&(r.ensureSingle(G._fullLayout._infolayer,"g","dragcover",function(X){G._fullLayout._dragCover=X}),r.raiseToTop(this),W.interactionState.dragInProgress=W.node,F(W.node),W.interactionState.hovered&&(K.nodeEvents.unhover.apply(0,W.interactionState.hovered),W.interactionState.hovered=!1),W.arrangement==="snap")){var J=W.traceId+"|"+W.key;W.forceLayouts[J]?W.forceLayouts[J].alpha(1):function(X,ee,re,ie){(function(fe){for(var ye=0;ye<fe.length;ye++)fe[ye].y=(fe[ye].y0+fe[ye].y1)/2,fe[ye].x=(fe[ye].x0+fe[ye].x1)/2})(re.graph.nodes);var se=re.graph.nodes.filter(function(fe){return fe.originalX===re.node.originalX}).filter(function(fe){return!fe.partOfGroup});re.forceLayouts[ee]=A.forceSimulation(se).alphaDecay(0).force("collide",A.forceCollide().radius(function(fe){return fe.dy/2+re.nodePad/2}).strength(1).iterations(d.forceIterations)).force("constrain",function(fe,ye,ge,he){return function(){for(var ve=0,Ie=0;Ie<ge.length;Ie++){var xe=ge[Ie];xe===he.interactionState.dragInProgress?(xe.x=xe.lastDraggedX,xe.y=xe.lastDraggedY):(xe.vx=(xe.originalX-xe.x)/d.forceTicksPerFrame,xe.y=Math.min(he.size-xe.dy/2,Math.max(xe.dy/2,xe.y))),ve=Math.max(ve,Math.abs(xe.vx),Math.abs(xe.vy))}!he.interactionState.dragInProgress&&ve<.1&&he.forceLayouts[ye].alpha()>0&&he.forceLayouts[ye].alpha(0)}}(0,ee,se,re)).stop()}(0,J,W),function(X,ee,re,ie,se){window.requestAnimationFrame(function fe(){var ye;for(ye=0;ye<d.forceTicksPerFrame;ye++)re.forceLayouts[ie].tick();if(function(he){for(var ve=0;ve<he.length;ve++)he[ve].y0=he[ve].y-he[ve].dy/2,he[ve].y1=he[ve].y0+he[ve].dy,he[ve].x0=he[ve].x-he[ve].dx/2,he[ve].x1=he[ve].x0+he[ve].dx}(re.graph.nodes),re.sankey.update(re.graph),L(X.filter(N(re)),ee),re.forceLayouts[ie].alpha()>0)window.requestAnimationFrame(fe);else{var ge=re.node.originalX;re.node.x0=ge-re.visibleWidth/2,re.node.x1=ge+re.visibleWidth/2,H(re,se)}})}(B,j,W,J,G)}}).on("drag",function(W){if(W.arrangement!=="fixed"){var J=l.event.x,X=l.event.y;W.arrangement==="snap"?(W.node.x0=J-W.visibleWidth/2,W.node.x1=J+W.visibleWidth/2,W.node.y0=X-W.visibleHeight/2,W.node.y1=X+W.visibleHeight/2):(W.arrangement==="freeform"&&(W.node.x0=J-W.visibleWidth/2,W.node.x1=J+W.visibleWidth/2),X=Math.max(0,Math.min(W.size-W.visibleHeight/2,X)),W.node.y0=X-W.visibleHeight/2,W.node.y1=X+W.visibleHeight/2),F(W.node),W.arrangement!=="snap"&&(W.sankey.update(W.graph),L(B.filter(N(W)),j))}}).on("dragend",function(W){if(W.arrangement!=="fixed"){W.interactionState.dragInProgress=!1;for(var J=0;J<W.node.childrenNodes.length;J++)W.node.childrenNodes[J].x=W.node.x,W.node.childrenNodes[J].y=W.node.y;W.arrangement!=="snap"&&H(W,G)}});B.on(".drag",null).call(V)}function H(B,j){for(var K=[],G=[],V=0;V<B.graph.nodes.length;V++){var W=(B.graph.nodes[V].x0+B.graph.nodes[V].x1)/2,J=(B.graph.nodes[V].y0+B.graph.nodes[V].y1)/2;K.push(W/B.figure.width),G.push(J/B.figure.height)}v.call("_guiRestyle",j,{"node.x":[K],"node.y":[G]},B.trace.index).then(function(){j._fullLayout._dragCover&&j._fullLayout._dragCover.remove()})}function F(B){B.lastDraggedX=B.x0+B.dx/2,B.lastDraggedY=B.y0+B.dy/2}function N(B){return function(j){return j.node.originalX===B.node.originalX}}$.exports=function(B,j,K,G,V){var W=B._context.staticPlot,J=!1;r.ensureSingle(B._fullLayout._infolayer,"g","first-render",function(){J=!0});var X=B._fullLayout._dragCover,ee=K.filter(function(ve){return f(ve).trace.visible}).map(m.bind(null,G)),re=j.selectAll("."+d.cn.sankey).data(ee,c);re.exit().remove(),re.enter().append("g").classed(d.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",W?"none":"auto").attr("transform",I),re.each(function(ve,Ie){B._fullData[Ie]._sankey=ve;var xe="bgsankey-"+ve.trace.uid+"-"+Ie;r.ensureSingle(B._fullLayout._draggers,"rect",xe),B._fullData[Ie]._bgRect=l.select("."+xe),B._fullData[Ie]._bgRect.style("pointer-events",W?"none":"all").attr("width",ve.width).attr("height",ve.height).attr("x",ve.translateX).attr("y",ve.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),re.transition().ease(d.ease).duration(d.duration).attr("transform",I);var ie=re.selectAll("."+d.cn.sankeyLinks).data(h,c);ie.enter().append("g").classed(d.cn.sankeyLinks,!0).style("fill","none");var se=ie.selectAll("."+d.cn.sankeyLink).data(function(ve){return ve.graph.links.filter(function(Ie){return Ie.value}).map(w.bind(null,ve))},c);se.enter().append("path").classed(d.cn.sankeyLink,!0).call(U,re,V.linkEvents),se.style("stroke",function(ve){return P(ve)?t.tinyRGB(s(ve.linkLineColor)):ve.tinyColorHue}).style("stroke-opacity",function(ve){return P(ve)?t.opacity(ve.linkLineColor):ve.tinyColorAlpha}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}).style("stroke-width",function(ve){return P(ve)?ve.linkLineWidth:1}).attr("d",u()),se.style("opacity",function(){return B._context.staticPlot||J||X?1:0}).transition().ease(d.ease).duration(d.duration).style("opacity",1),se.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var fe=re.selectAll("."+d.cn.sankeyNodeSet).data(h,c);fe.enter().append("g").classed(d.cn.sankeyNodeSet,!0),fe.style("cursor",function(ve){switch(ve.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ye=fe.selectAll("."+d.cn.sankeyNode).data(function(ve){var Ie=ve.graph.nodes;return function(xe){var Ae,Se=[];for(Ae=0;Ae<xe.length;Ae++)xe[Ae].originalX=(xe[Ae].x0+xe[Ae].x1)/2,xe[Ae].originalY=(xe[Ae].y0+xe[Ae].y1)/2,Se.indexOf(xe[Ae].originalX)===-1&&Se.push(xe[Ae].originalX);for(Se.sort(function(Te,Q){return Te-Q}),Ae=0;Ae<xe.length;Ae++)xe[Ae].originalLayerIndex=Se.indexOf(xe[Ae].originalX),xe[Ae].originalLayer=xe[Ae].originalLayerIndex/(Se.length-1)}(Ie),Ie.map(S.bind(null,ve))},c);ye.enter().append("g").classed(d.cn.sankeyNode,!0).call(_).style("opacity",function(ve){return!B._context.staticPlot&&!J||ve.partOfGroup?0:1}),ye.call(U,re,V.nodeEvents).call(z,se,V,B),ye.transition().ease(d.ease).duration(d.duration).call(_).style("opacity",function(ve){return ve.partOfGroup?0:1}),ye.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var ge=ye.selectAll("."+d.cn.nodeRect).data(h);ge.enter().append("rect").classed(d.cn.nodeRect,!0).call(C),ge.style("stroke-width",function(ve){return ve.nodeLineWidth}).style("stroke",function(ve){return t.tinyRGB(s(ve.nodeLineColor))}).style("stroke-opacity",function(ve){return t.opacity(ve.nodeLineColor)}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}),ge.transition().ease(d.ease).duration(d.duration).call(C);var he=ye.selectAll("."+d.cn.nodeLabel).data(h);he.enter().append("text").classed(d.cn.nodeLabel,!0).style("cursor","default"),he.attr("data-notex",1).text(function(ve){return ve.node.label}).each(function(ve){var Ie=l.select(this);o.font(Ie,ve.textFont),b.convertToTspans(Ie,B)}).style("text-shadow",b.makeTextShadow(B._fullLayout.paper_bgcolor)).attr("text-anchor",function(ve){return ve.horizontal&&ve.left?"end":"start"}).attr("transform",function(ve){var Ie=l.select(this),xe=b.lineCount(Ie),Ae=ve.textFont.size*((xe-1)*p-y),Se=ve.nodeLineWidth/2+3,Te=((ve.horizontal?ve.visibleHeight:ve.visibleWidth)-Ae)/2;ve.horizontal&&(ve.left?Se=-Se:Se+=ve.visibleWidth);var Q=ve.horizontal?"":"scale(-1,1)"+a(90);return n(ve.horizontal?Se:Te,ve.horizontal?Te:Se)+Q}),he.transition().ease(d.ease).duration(d.duration)}},84564:function($){$.exports=function(R,e){for(var A=[],k=R.cd[0].trace,l=k._sankey.graph.nodes,T=0;T<l.length;T++){var x=l[T];if(!x.partOfGroup){var d=[(x.x0+x.x1)/2,(x.y0+x.y1)/2];k.orientation==="v"&&d.reverse(),e&&e.contains(d,!1,T,R)&&A.push({pointNumber:x.pointNumber})}}return A}},75225:function($,R,e){var A=e(71828);$.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;A.mergeArray(l.text,k,"tx"),A.mergeArray(l.texttemplate,k,"txt"),A.mergeArray(l.hovertext,k,"htx"),A.mergeArray(l.customdata,k,"data"),A.mergeArray(l.textposition,k,"tp"),l.textfont&&(A.mergeArrayCastPositive(l.textfont.size,k,"ts"),A.mergeArray(l.textfont.color,k,"tc"),A.mergeArray(l.textfont.family,k,"tf"));var x=l.marker;if(x){A.mergeArrayCastPositive(x.size,k,"ms"),A.mergeArrayCastPositive(x.opacity,k,"mo"),A.mergeArray(x.symbol,k,"mx"),A.mergeArray(x.angle,k,"ma"),A.mergeArray(x.standoff,k,"mf"),A.mergeArray(x.color,k,"mc");var d=x.line;x.line&&(A.mergeArray(d.color,k,"mlc"),A.mergeArrayCastPositive(d.width,k,"mlw"));var s=x.gradient;s&&s.type!=="none"&&(A.mergeArray(s.type,k,"mgt"),A.mergeArray(s.color,k,"mgc"))}}},82196:function($,R,e){var A=e(12663).axisHoverFormat,k=e(5386).s,l=e(5386).f,T=e(50693),x=e(41940),d=e(79952).P,s=e(79952).u,t=e(91424),o=e(47581),r=e(1426).extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:A("x"),yhoverformat:A("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:l({},{keys:o.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},d,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:s,marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:x({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function($,R,e){var A=e(92770),k=e(71828),l=e(89298),T=e(42973),x=e(50606).BADNUM,d=e(34098),s=e(36922),t=e(75225),o=e(66279);function r(h,f,b,v,g,y,p){var m=f._length,w=h._fullLayout,u=b._id,S=v._id,_=w._firstScatter[i(f)]===f.uid,E=(c(f,w,b,v)||{}).orientation,L=f.fill;b._minDtick=0,v._minDtick=0;var C={padded:!0},P={padded:!0};p&&(C.ppad=P.ppad=p);var I=m<2||g[0]!==g[m-1]||y[0]!==y[m-1];I&&(L==="tozerox"||L==="tonextx"&&(_||E==="h"))?C.tozero=!0:(f.error_y||{}).visible||L!=="tonexty"&&L!=="tozeroy"&&(d.hasMarkers(f)||d.hasText(f))||(C.padded=!1,C.ppad=0),I&&(L==="tozeroy"||L==="tonexty"&&(_||E==="v"))?P.tozero=!0:L!=="tonextx"&&L!=="tozerox"||(P.padded=!1),u&&(f._extremes[u]=l.findExtremes(b,g,C)),S&&(f._extremes[S]=l.findExtremes(v,y,P))}function n(h,f){if(d.hasMarkers(h)){var b,v=h.marker,g=1.6*(h.marker.sizeref||1);if(b=h.marker.sizemode==="area"?function(u){return Math.max(Math.sqrt((u||0)/g),3)}:function(u){return Math.max((u||0)/g,3)},k.isArrayOrTypedArray(v.size)){var y={type:"linear"};l.setConvert(y);for(var p=y.makeCalcdata(h.marker,"size"),m=new Array(f),w=0;w<f;w++)m[w]=b(p[w]);return m}return b(v.size)}}function a(h,f){var b=i(f),v=h._firstScatter;v[b]||(v[b]=f.uid)}function i(h){var f=h.stackgroup;return h.xaxis+h.yaxis+h.type+(f?"-"+f:"")}function c(h,f,b,v){var g=h.stackgroup;if(g){var y=f._scatterStackOpts[b._id+v._id][g],p=y.orientation==="v"?v:b;return p.type==="linear"||p.type==="log"?y:void 0}}$.exports={calc:function(h,f){var b,v,g,y,p,m,w=h._fullLayout,u=f._xA=l.getFromId(h,f.xaxis||"x","x"),S=f._yA=l.getFromId(h,f.yaxis||"y","y"),_=u.makeCalcdata(f,"x"),E=S.makeCalcdata(f,"y"),L=T(f,u,"x",_),C=T(f,S,"y",E),P=L.vals,I=C.vals,U=f._length,z=new Array(U),H=f.ids,F=c(f,w,u,S),N=!1;a(w,f);var B,j="x",K="y";F?(k.pushUnique(F.traceIndices,f._expandedIndex),(b=F.orientation==="v")?(K="s",B="x"):(j="s",B="y"),p=F.stackgaps==="interpolate"):r(h,f,u,S,P,I,n(f,U));var G=!!f.xperiodalignment,V=!!f.yperiodalignment;for(v=0;v<U;v++){var W=z[v]={},J=A(P[v]),X=A(I[v]);J&&X?(W[j]=P[v],W[K]=I[v],G&&(W.orig_x=_[v],W.xEnd=L.ends[v],W.xStart=L.starts[v]),V&&(W.orig_y=E[v],W.yEnd=C.ends[v],W.yStart=C.starts[v])):F&&(b?J:X)?(W[B]=b?P[v]:I[v],W.gap=!0,p?(W.s=x,N=!0):W.s=0):W[j]=W[K]=x,H&&(W.id=String(H[v]))}if(t(z,f),s(h,f),o(z,f),F){for(v=0;v<z.length;)z[v][B]===x?z.splice(v,1):v++;if(k.sort(z,function(se,fe){return se[B]-fe[B]||se.i-fe.i}),N){for(v=0;v<z.length-1&&z[v].gap;)v++;for((m=z[v].s)||(m=z[v].s=0),g=0;g<v;g++)z[g].s=m;for(y=z.length-1;y>v&&z[y].gap;)y--;for(m=z[y].s,g=z.length-1;g>y;g--)z[g].s=m;for(;v<y;)if(z[++v].gap){for(g=v+1;z[g].gap;)g++;for(var ee=z[v-1][B],re=z[v-1].s,ie=(z[g].s-re)/(z[g][B]-ee);v<g;)z[v].s=re+(z[v][B]-ee)*ie,v++}}}return z},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:a,getStackOpts:c}},66279:function($,R,e){var A=e(71828);$.exports=function(k,l){A.isArrayOrTypedArray(l.selectedpoints)&&A.tagSelected(k,l)}},36922:function($,R,e){var A=e(52075).hasColorscale,k=e(78803),l=e(34098);$.exports=function(T,x){l.hasLines(x)&&A(x,"line")&&k(T,x,{vals:x.line.color,containerStr:"line",cLetter:"c"}),l.hasMarkers(x)&&(A(x,"marker")&&k(T,x,{vals:x.marker.color,containerStr:"marker",cLetter:"c"}),A(x,"marker.line")&&k(T,x,{vals:x.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function($){$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function($,R,e){var A=e(47761),k=e(11661).setGroupPositions;function l(T,x,d,s,t,o,r){t[s]=!0;var n={i:null,gap:!0,s:0};if(n[r]=d,T.splice(x,0,n),x&&d===T[x-1][r]){var a=T[x-1];n.s=a.s,n.i=a.i,n.gap=a.gap}else o&&(n.s=function(i,c,h,f){var b=i[c-1],v=i[c+1];return v?b?b.s+(v.s-b.s)*(h-b[f])/(v[f]-b[f]):v.s:b.s}(T,x,d,r));x||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}$.exports=function(T,x){T._fullLayout.scattermode==="group"&&function(B,j){for(var K=j.xaxis,G=j.yaxis,V=B._fullLayout,W=B._fullData,J=B.calcdata,X=[],ee=[],re=0;re<W.length;re++){var ie=W[re];ie.visible===!0&&ie.type==="scatter"&&ie.xaxis===K._id&&ie.yaxis===G._id&&(ie.orientation==="h"?X.push(J[re]):ie.orientation==="v"&&ee.push(J[re]))}var se={mode:V.scattermode,gap:V.scattergap};k(B,K,G,ee,se),k(B,G,K,X,se)}(T,x);var d=x.xaxis,s=x.yaxis,t=d._id+s._id,o=T._fullLayout._scatterStackOpts[t];if(o){var r,n,a,i,c,h,f,b,v,g,y,p,m,w,u,S=T.calcdata;for(var _ in o){var E=(g=o[_]).traceIndices;if(E.length){for(y=g.stackgaps==="interpolate",p=g.groupnorm,g.orientation==="v"?(m="x",w="y"):(m="y",w="x"),u=new Array(E.length),r=0;r<u.length;r++)u[r]=!1;h=S[E[0]];var L=new Array(h.length);for(r=0;r<h.length;r++)L[r]=h[r][m];for(r=1;r<E.length;r++){for(c=S[E[r]],n=a=0;n<c.length;n++){for(f=c[n][m];f>L[a]&&a<L.length;a++)l(c,n,L[a],r,u,y,m),n++;if(f!==L[a]){for(i=0;i<r;i++)l(S[E[i]],a,f,i,u,y,m);L.splice(a,0,f)}a++}for(;a<L.length;a++)l(c,n,L[a],r,u,y,m),n++}var C=L.length;for(n=0;n<h.length;n++){for(b=h[n][w]=h[n].s,r=1;r<E.length;r++)(c=S[E[r]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=C,b+=c[n].s,c[n][w]=b;if(p)for(v=(p==="fraction"?b:b/100)||1,r=0;r<E.length;r++){var P=S[E[r]][n];P[w]/=v,P.sNorm=P.s/v}}for(r=0;r<E.length;r++){var I=(c=S[E[r]])[0].trace,U=A.calcMarkerSize(I,I._rawLength),z=Array.isArray(U);if(U&&u[r]||z){var H=U;for(U=new Array(C),n=0;n<C;n++)U[n]=c[n].gap?0:z?H[c[n].i]:H}var F=new Array(C),N=new Array(C);for(n=0;n<C;n++)F[n]=c[n].x,N[n]=c[n].y;A.calcAxisExpansion(T,I,d,s,F,N,U),c[0].t.orientation=g.orientation}}}}}},34936:function($,R,e){var A=e(71828),k=e(26125),l=e(82196);$.exports=function(T,x){var d,s,t;function o(c){return A.coerce(s._input,s,l,c)}if(x.scattermode==="group")for(t=0;t<T.length;t++)(s=T[t]).type==="scatter"&&(d=s._input,k(d,s,x,o));for(t=0;t<T.length;t++){var r=T[t];if(r.type==="scatter"){var n=r.fill;if(n!=="none"&&n!=="toself"&&(r.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var a=t-1;a>=0;a--){var i=T[a];if(i.type==="scatter"&&i.xaxis===r.xaxis&&i.yaxis===r.yaxis){i.opacity=void 0;break}}}}}},17438:function($,R,e){var A=e(71828),k=e(73972),l=e(82196),T=e(47581),x=e(34098),d=e(67513),s=e(73927),t=e(565),o=e(49508),r=e(11058),n=e(94039),a=e(82410),i=e(28908),c=e(71828).coercePattern;$.exports=function(h,f,b,v){function g(E,L){return A.coerce(h,f,l,E,L)}var y=d(h,f,v,g);if(y||(f.visible=!1),f.visible){s(h,f,v,g),g("xhoverformat"),g("yhoverformat");var p=t(h,f,v,g);v.scattermode==="group"&&f.orientation===void 0&&g("orientation","v");var m=!p&&y<T.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",m),x.hasLines(f)&&(r(h,f,b,v,g,{backoff:!0}),n(h,f,g),g("connectgaps"),g("line.simplify")),x.hasMarkers(f)&&o(h,f,b,v,g,{gradient:!0}),x.hasText(f)&&(g("texttemplate"),a(h,f,v,g));var w=[];(x.hasMarkers(f)||x.hasText(f))&&(g("cliponaxis"),g("marker.maxdisplayed"),w.push("points")),g("fill",p?p.fillDflt:"none"),f.fill!=="none"&&(i(h,f,b,g),x.hasLines(f)||n(h,f,g),c(g,"fillpattern",f.fillcolor,!1));var u=(f.line||{}).color,S=(f.marker||{}).color;f.fill!=="tonext"&&f.fill!=="toself"||w.push("fills"),g("hoveron",w.join("+")||"points"),f.hoveron!=="fills"&&g("hovertemplate");var _=k.getComponentMethod("errorbars","supplyDefaults");_(h,f,u||S||b,{axis:"y"}),_(h,f,u||S||b,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(f,g)}}},28908:function($,R,e){var A=e(7901),k=e(71828).isArrayOrTypedArray;$.exports=function(l,T,x,d){var s=!1;if(T.marker){var t=T.marker.color,o=(T.marker.line||{}).color;t&&!k(t)?s=t:o&&!k(o)&&(s=o)}d("fillcolor",A.addOpacity((T.line||{}).color||s||x,.5))}},8225:function($,R,e){var A=e(89298);$.exports=function(k,l,T){var x={},d={_fullLayout:T},s=A.getFromTrace(d,l,"x"),t=A.getFromTrace(d,l,"y"),o=k.orig_x;o===void 0&&(o=k.x);var r=k.orig_y;return r===void 0&&(r=k.y),x.xLabel=A.tickText(s,s.c2l(o),!0).text,x.yLabel=A.tickText(t,t.c2l(r),!0).text,x}},34603:function($,R,e){var A=e(7901),k=e(34098);$.exports=function(l,T){var x,d;if(l.mode==="lines")return(x=l.line.color)&&A.opacity(x)?x:l.fillcolor;if(l.mode==="none")return l.fill?l.fillcolor:"";var s=T.mcc||(l.marker||{}).color,t=T.mlcc||((l.marker||{}).line||{}).color;return(d=s&&A.opacity(s)?s:t&&A.opacity(t)&&(T.mlw||((l.marker||{}).line||{}).width)?t:"")?A.opacity(d)<.3?A.addOpacity(d,.3):d:(x=(l.line||{}).color)&&A.opacity(x)&&k.hasLines(l)&&l.line.width?x:l.fillcolor}},26125:function($,R,e){var A=e(99082).getAxisGroup;$.exports=function(k,l,T,x){var d=l.orientation,s=l[{v:"x",h:"y"}[d]+"axis"],t=A(T,s)+d,o=T._alignmentOpts||{},r=x("alignmentgroup"),n=o[t];n||(n=o[t]={});var a=n[r];a?a.traces.push(l):a=n[r]={traces:[l],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var i=x("offsetgroup"),c=a.offsetGroups,h=c[i];i&&(h||(h=c[i]={offsetIndex:Object.keys(c).length}),l._offsetIndex=h.offsetIndex)}},33720:function($,R,e){var A=e(71828),k=e(30211),l=e(73972),T=e(34603),x=e(7901),d=A.fillText;$.exports=function(s,t,o,r){var n=s.cd,a=n[0].trace,i=s.xa,c=s.ya,h=i.c2p(t),f=c.c2p(o),b=[h,f],v=a.hoveron||"",g=a.mode.indexOf("markers")!==-1?3:.5,y=!!a.xperiodalignment,p=!!a.yperiodalignment;if(v.indexOf("points")!==-1){var m=function(ye){var ge=Math.max(g,ye.mrc||0),he=i.c2p(ye.x)-h,ve=c.c2p(ye.y)-f;return Math.max(Math.sqrt(he*he+ve*ve)-ge,1-g/ge)},w=k.getDistanceFunction(r,function(ye){if(y){var ge=i.c2p(ye.xStart),he=i.c2p(ye.xEnd);return h>=Math.min(ge,he)&&h<=Math.max(ge,he)?0:1/0}var ve=Math.max(3,ye.mrc||0),Ie=1-1/ve,xe=Math.abs(i.c2p(ye.x)-h);return xe<ve?Ie*xe/ve:xe-ve+Ie},function(ye){if(p){var ge=c.c2p(ye.yStart),he=c.c2p(ye.yEnd);return f>=Math.min(ge,he)&&f<=Math.max(ge,he)?0:1/0}var ve=Math.max(3,ye.mrc||0),Ie=1-1/ve,xe=Math.abs(c.c2p(ye.y)-f);return xe<ve?Ie*xe/ve:xe-ve+Ie},m);if(k.getClosest(n,w,s),s.index!==!1){var u=n[s.index],S=i.c2p(u.x,!0),_=c.c2p(u.y,!0),E=u.mrc||1;s.index=u.i;var L=n[0].t.orientation,C=L&&(u.sNorm||u.s),P=L==="h"?C:u.orig_x!==void 0?u.orig_x:u.x,I=L==="v"?C:u.orig_y!==void 0?u.orig_y:u.y;return A.extendFlat(s,{color:T(a,u),x0:S-E,x1:S+E,xLabelVal:P,y0:_-E,y1:_+E,yLabelVal:I,spikeDistance:m(u),hovertemplate:a.hovertemplate}),d(u,a,s),l.getComponentMethod("errorbars","hoverInfo")(u,a,s),[s]}}if(v.indexOf("fills")!==-1&&a._polygons){var U,z,H,F,N,B,j,K,G,V=a._polygons,W=[],J=!1,X=1/0,ee=-1/0,re=1/0,ie=-1/0;for(U=0;U<V.length;U++)(H=V[U]).contains(b)&&(J=!J,W.push(H),re=Math.min(re,H.ymin),ie=Math.max(ie,H.ymax));if(J){var se=((re=Math.max(re,0))+(ie=Math.min(ie,c._length)))/2;for(U=0;U<W.length;U++)for(F=W[U].pts,z=1;z<F.length;z++)(K=F[z-1][1])>se!=(G=F[z][1])>=se&&(B=F[z-1][0],j=F[z][0],G-K&&(N=B+(j-B)*(se-K)/(G-K),X=Math.min(X,N),ee=Math.max(ee,N)));X=Math.max(X,0),ee=Math.min(ee,i._length);var fe=x.defaultLine;return x.opacity(a.fillcolor)?fe=a.fillcolor:x.opacity((a.line||{}).color)&&(fe=a.line.color),A.extendFlat(s,{distance:s.maxHoverDistance,x0:X,x1:ee,y0:se,y1:se,color:fe,hovertemplate:!1}),delete s.index,a.text&&!Array.isArray(a.text)?s.text=String(a.text):s.text=a.name,[s]}}}},67368:function($,R,e){var A=e(34098);$.exports={hasLines:A.hasLines,hasMarkers:A.hasMarkers,hasText:A.hasText,isBubble:A.isBubble,attributes:e(82196),layoutAttributes:e(21479),supplyDefaults:e(17438),crossTraceDefaults:e(34936),supplyLayoutDefaults:e(79334),calc:e(47761).calc,crossTraceCalc:e(72626),arraysToCalcdata:e(75225),plot:e(32663),colorbar:e(4898),formatLabels:e(8225),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(33720),selectPoints:e(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function($){$.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function($,R,e){var A=e(71828),k=e(21479);$.exports=function(l,T){var x,d=T.barmode==="group";T.scattermode==="group"&&(x=d?T.bargap:.2,A.coerce(l,T,k,"scattergap",x))}},11058:function($,R,e){var A=e(71828).isArrayOrTypedArray,k=e(52075).hasColorscale,l=e(1586);$.exports=function(T,x,d,s,t,o){o||(o={});var r=(T.marker||{}).color;t("line.color",d),k(T,"line")?l(T,x,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!A(r)&&r||d),t("line.width"),o.noDash||t("line.dash"),o.backoff&&t("line.backoff")}},34621:function($,R,e){var A=e(91424),k=e(50606),l=k.BADNUM,T=k.LOG_CLIP,x=T+.5,d=T-.5,s=e(71828),t=s.segmentsIntersect,o=s.constrain,r=e(47581);$.exports=function(n,a){var i,c,h,f,b,v,g,y,p,m,w,u,S,_,E,L,C,P,I=a.trace||{},U=a.xaxis,z=a.yaxis,H=U.type==="log",F=z.type==="log",N=U._length,B=z._length,j=a.backoff,K=I.marker,G=a.connectGaps,V=a.baseTolerance,W=a.shape,J=W==="linear",X=I.fill&&I.fill!=="none",ee=[],re=r.minTolerance,ie=n.length,se=new Array(ie),fe=0;function ye(Pt){var Ze=n[Pt];if(!Ze)return!1;var Ye=a.linearized?U.l2p(Ze.x):U.c2p(Ze.x),Be=a.linearized?z.l2p(Ze.y):z.c2p(Ze.y);if(Ye===l){if(H&&(Ye=U.c2p(Ze.x,!0)),Ye===l)return!1;F&&Be===l&&(Ye*=Math.abs(U._m*B*(U._m>0?x:d)/(z._m*N*(z._m>0?x:d)))),Ye*=1e3}if(Be===l){if(F&&(Be=z.c2p(Ze.y,!0)),Be===l)return!1;Be*=1e3}return[Ye,Be]}function ge(Pt,Ze,Ye,Be){var ke=Ye-Pt,Pe=Be-Ze,qe=.5-Pt,Xe=.5-Ze,nt=ke*ke+Pe*Pe,ut=ke*qe+Pe*Xe;if(ut>0&&ut<nt){var ct=qe*Pe-Xe*ke;if(ct*ct<nt)return!0}}function he(Pt,Ze){var Ye=Pt[0]/N,Be=Pt[1]/B,ke=Math.max(0,-Ye,Ye-1,-Be,Be-1);return ke&&C!==void 0&&ge(Ye,Be,C,P)&&(ke=0),ke&&Ze&&ge(Ye,Be,Ze[0]/N,Ze[1]/B)&&(ke=0),(1+r.toleranceGrowth*ke)*V}function ve(Pt,Ze){var Ye=Pt[0]-Ze[0],Be=Pt[1]-Ze[1];return Math.sqrt(Ye*Ye+Be*Be)}var Ie,xe,Ae,Se,Te,Q,oe,ce=r.maxScreensAway,me=-N*ce,Me=N*(1+ce),Re=-B*ce,Ce=B*(1+ce),ze=[[me,Re,Me,Re],[Me,Re,Me,Ce],[Me,Ce,me,Ce],[me,Ce,me,Re]];function le(Pt){if(Pt[0]<me||Pt[0]>Me||Pt[1]<Re||Pt[1]>Ce)return[o(Pt[0],me,Me),o(Pt[1],Re,Ce)]}function de(Pt,Ze){return Pt[0]===Ze[0]&&(Pt[0]===me||Pt[0]===Me)||Pt[1]===Ze[1]&&(Pt[1]===Re||Pt[1]===Ce)||void 0}function be(Pt,Ze,Ye){return function(Be,ke){var Pe=le(Be),qe=le(ke),Xe=[];if(Pe&&qe&&de(Pe,qe))return Xe;Pe&&Xe.push(Pe),qe&&Xe.push(qe);var nt=2*s.constrain((Be[Pt]+ke[Pt])/2,Ze,Ye)-((Pe||Be)[Pt]+(qe||ke)[Pt]);return nt&&((Pe&&qe?nt>0==Pe[Pt]>qe[Pt]?Pe:qe:Pe||qe)[Pt]+=nt),Xe}}function Fe(Pt){var Ze=Pt[0],Ye=Pt[1],Be=Ze===se[fe-1][0],ke=Ye===se[fe-1][1];if(!Be||!ke)if(fe>1){var Pe=Ze===se[fe-2][0],qe=Ye===se[fe-2][1];Be&&(Ze===me||Ze===Me)&&Pe?qe?fe--:se[fe-1]=Pt:ke&&(Ye===Re||Ye===Ce)&&qe?Pe?fe--:se[fe-1]=Pt:se[fe++]=Pt}else se[fe++]=Pt}function Ve(Pt){se[fe-1][0]!==Pt[0]&&se[fe-1][1]!==Pt[1]&&Fe([Ae,Se]),Fe(Pt),Te=null,Ae=Se=0}W==="linear"||W==="spline"?oe=function(Pt,Ze){for(var Ye=[],Be=0,ke=0;ke<4;ke++){var Pe=ze[ke],qe=t(Pt[0],Pt[1],Ze[0],Ze[1],Pe[0],Pe[1],Pe[2],Pe[3]);qe&&(!Be||Math.abs(qe.x-Ye[0][0])>1||Math.abs(qe.y-Ye[0][1])>1)&&(qe=[qe.x,qe.y],Be&&ve(qe,Pt)<ve(Ye[0],Pt)?Ye.unshift(qe):Ye.push(qe),Be++)}return Ye}:W==="hv"||W==="vh"?oe=function(Pt,Ze){var Ye=[],Be=le(Pt),ke=le(Ze);return Be&&ke&&de(Be,ke)||(Be&&Ye.push(Be),ke&&Ye.push(ke)),Ye}:W==="hvh"?oe=be(0,me,Me):W==="vhv"&&(oe=be(1,Re,Ce));var He=s.isArrayOrTypedArray(K);function rt(Pt){if(Pt&&j&&(Pt.i=i,Pt.d=n,Pt.trace=I,Pt.marker=He?K[Pt.i]:K,Pt.backoff=j),C=Pt[0]/N,P=Pt[1]/B,Ie=Pt[0]<me?me:Pt[0]>Me?Me:0,xe=Pt[1]<Re?Re:Pt[1]>Ce?Ce:0,Ie||xe){if(fe)if(Te){var Ze=oe(Te,Pt);Ze.length>1&&(Ve(Ze[0]),se[fe++]=Ze[1])}else Q=oe(se[fe-1],Pt)[0],se[fe++]=Q;else se[fe++]=[Ie||Pt[0],xe||Pt[1]];var Ye=se[fe-1];Ie&&xe&&(Ye[0]!==Ie||Ye[1]!==xe)?(Te&&(Ae!==Ie&&Se!==xe?Fe(Ae&&Se?(Be=Te,Pe=(ke=Pt)[0]-Be[0],qe=(ke[1]-Be[1])/Pe,(Be[1]*ke[0]-ke[1]*Be[0])/Pe>0?[qe>0?me:Me,Ce]:[qe>0?Me:me,Re]):[Ae||Ie,Se||xe]):Ae&&Se&&Fe([Ae,Se])),Fe([Ie,xe])):Ae-Ie&&Se-xe&&Fe([Ie||Ae,xe||Se]),Te=Pt,Ae=Ie,Se=xe}else Te&&Ve(oe(Te,Pt)[0]),se[fe++]=Pt;var Be,ke,Pe,qe}for(i=0;i<ie;i++)if(c=ye(i)){for(fe=0,Te=null,rt(c),i++;i<ie;i++){if(!(f=ye(i))){if(G)continue;break}if(J&&a.simplify){var tt=ye(i+1);if(m=ve(f,c),X&&(fe===0||fe===ie-1)||!(m<he(f,tt)*re)){for(y=[(f[0]-c[0])/m,(f[1]-c[1])/m],b=c,w=m,u=_=E=0,g=!1,h=f,i++;i<n.length;i++){if(v=tt,tt=ye(i+1),!v){if(G)continue;break}if(L=(p=[v[0]-c[0],v[1]-c[1]])[0]*y[1]-p[1]*y[0],_=Math.min(_,L),(E=Math.max(E,L))-_>he(v,tt))break;h=v,(S=p[0]*y[0]+p[1]*y[1])>w?(w=S,f=v,g=!1):S<u&&(u=S,b=v,g=!0)}if(g?(rt(f),h!==b&&rt(b)):(b!==c&&rt(b),h!==f&&rt(f)),rt(h),i>=n.length||!v)break;rt(v),c=v}}else rt(f)}Te&&Fe([Ae||Te[0],Se||Te[1]]),ee.push(se.slice(0,fe))}var ot=W.slice(W.length-1);if(j&&ot!=="h"&&ot!=="v"){for(var ht=!1,_t=-1,dt=[],bt=0;bt<ee.length;bt++)for(var St=0;St<ee[bt].length-1;St++){var Et=ee[bt][St],zt=ee[bt][St+1],Ut=A.applyBackoff(zt,Et);Ut[0]===zt[0]&&Ut[1]===zt[1]||(ht=!0),dt[_t+1]||(dt[++_t]=[Et,[Ut[0],Ut[1]]])}return ht?dt:ee}return ee}},94039:function($){$.exports=function(R,e,A){A("line.shape")==="spline"&&A("line.smoothing")}},68687:function($){var R={tonextx:1,tonexty:1,tonext:1};$.exports=function(e,A,k){var l,T,x,d,s,t={},o=!1,r=-1,n=0,a=-1;for(T=0;T<k.length;T++)(x=(l=k[T][0].trace).stackgroup||"")?x in t?s=t[x]:(s=t[x]=n,n++):l.fill in R&&a>=0?s=a:(s=a=n,n++),s<r&&(o=!0),l._groupIndex=r=s;var i=k.slice();o&&i.sort(function(h,f){var b=h[0].trace,v=f[0].trace;return b._groupIndex-v._groupIndex||b.index-v.index});var c={};for(T=0;T<i.length;T++)x=(l=i[T][0].trace).stackgroup||"",l.visible===!0?(l._nexttrace=null,l.fill in R&&(d=c[x],l._prevtrace=d||null,d&&(d._nexttrace=l)),l._ownfill=l.fill&&(l.fill.substr(0,6)==="tozero"||l.fill==="toself"||l.fill.substr(0,2)==="to"&&!l._prevtrace),c[x]=l):l._prevtrace=l._nexttrace=l._ownfill=null;return i}},39984:function($,R,e){var A=e(92770);$.exports=function(k,l){l||(l=2);var T=k.marker,x=T.sizeref||1,d=T.sizemin||0,s=T.sizemode==="area"?function(t){return Math.sqrt(t/x)}:function(t){return t/x};return function(t){var o=s(t/l);return A(o)&&o>0?Math.max(o,d):0}}},4898:function($){$.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function($,R,e){var A=e(7901),k=e(52075).hasColorscale,l=e(1586),T=e(34098);$.exports=function(x,d,s,t,o,r){var n=T.isBubble(x),a=(x.line||{}).color;r=r||{},a&&(s=a),o("marker.symbol"),o("marker.opacity",n?.7:1),o("marker.size"),r.noAngle||(o("marker.angle"),r.noAngleRef||o("marker.angleref"),r.noStandOff||o("marker.standoff")),o("marker.color",s),k(x,"marker")&&l(x,d,t,o,{prefix:"marker.",cLetter:"c"}),r.noSelect||(o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size")),r.noLine||(o("marker.line.color",a&&!Array.isArray(a)&&d.marker.color!==a?a:n?A.background:A.defaultLine),k(x,"marker.line")&&l(x,d,t,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width",n?1:0)),n&&(o("marker.sizeref"),o("marker.sizemin"),o("marker.sizemode")),r.gradient&&o("marker.gradient.type")!=="none"&&o("marker.gradient.color")}},73927:function($,R,e){var A=e(71828).dateTick0,k=e(50606).ONEWEEK;function l(T,x){return A(x,T%k==0?1:0)}$.exports=function(T,x,d,s,t){if(t||(t={x:!0,y:!0}),t.x){var o=s("xperiod");o&&(s("xperiod0",l(o,x.xcalendar)),s("xperiodalignment"))}if(t.y){var r=s("yperiod");r&&(s("yperiod0",l(r,x.ycalendar)),s("yperiodalignment"))}}},32663:function($,R,e){var A=e(39898),k=e(73972),l=e(71828),T=l.ensureSingle,x=l.identity,d=e(91424),s=e(34098),t=e(34621),o=e(68687),r=e(61082).tester;function n(a,i,c,h,f,b,v){var g;(function(Q,oe,ce,me,Me){var Re=ce.xaxis,Ce=ce.yaxis,ze=A.extent(l.simpleMap(Re.range,Re.r2c)),le=A.extent(l.simpleMap(Ce.range,Ce.r2c)),de=me[0].trace;if(s.hasMarkers(de)){var be=de.marker.maxdisplayed;if(be!==0){var Fe=me.filter(function(tt){return tt.x>=ze[0]&&tt.x<=ze[1]&&tt.y>=le[0]&&tt.y<=le[1]}),Ve=Math.ceil(Fe.length/be),He=0;Me.forEach(function(tt,ot){var ht=tt[0].trace;s.hasMarkers(ht)&&ht.marker.maxdisplayed>0&&ot<oe&&He++});var rt=Math.round(He*Ve/3+Math.floor(He/3)*Ve/7.1);me.forEach(function(tt){delete tt.vis}),Fe.forEach(function(tt,ot){Math.round((ot+rt)%Ve)===0&&(tt.vis=!0)})}}})(0,i,c,h,f);var y=!!v&&v.duration>0;function p(Q){return y?Q.transition():Q}var m=c.xaxis,w=c.yaxis,u=h[0].trace,S=u.line,_=A.select(b),E=T(_,"g","errorbars"),L=T(_,"g","lines"),C=T(_,"g","points"),P=T(_,"g","text");if(k.getComponentMethod("errorbars","plot")(a,E,c,v),u.visible===!0){var I,U;p(_).style("opacity",u.opacity);var z=u.fill.charAt(u.fill.length-1);z!=="x"&&z!=="y"&&(z=""),h[0][c.isRangePlot?"nodeRangePlot3":"node3"]=_;var H,F,N="",B=[],j=u._prevtrace;j&&(N=j._prevRevpath||"",U=j._nextFill,B=j._polygons);var K,G,V,W,J,X,ee,re="",ie="",se=[],fe=l.noop;if(I=u._ownFill,s.hasLines(u)||u.fill!=="none"){for(U&&U.datum(h),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(K=d.steps(S.shape),G=d.steps(S.shape.split("").reverse().join(""))):K=G=S.shape==="spline"?function(Q){var oe=Q[Q.length-1];return Q.length>1&&Q[0][0]===oe[0]&&Q[0][1]===oe[1]?d.smoothclosed(Q.slice(1),S.smoothing):d.smoothopen(Q,S.smoothing)}:function(Q){return"M"+Q.join("L")},V=function(Q){return G(Q.reverse())},se=t(h,{xaxis:m,yaxis:w,trace:u,connectGaps:u.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,backoff:S.backoff,simplify:S.simplify,fill:u.fill}),ee=u._polygons=new Array(se.length),g=0;g<se.length;g++)u._polygons[g]=r(se[g]);se.length&&(W=se[0][0],X=(J=se[se.length-1])[J.length-1]),fe=function(Q){return function(oe){if(H=K(oe),F=V(oe),re?z?(re+="L"+H.substr(1),ie=F+"L"+ie.substr(1)):(re+="Z"+H,ie=F+"Z"+ie):(re=H,ie=F),s.hasLines(u)){var ce=A.select(this);if(ce.datum(h),Q)p(ce.style("opacity",0).attr("d",H).call(d.lineGroupStyle)).style("opacity",1);else{var me=p(ce);me.attr("d",H),d.singleLineStyle(h,me)}}}}}var ye=L.selectAll(".js-line").data(se);p(ye.exit()).style("opacity",0).remove(),ye.each(fe(!1)),ye.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(d.lineGroupStyle).each(fe(!0)),d.setClipUrl(ye,c.layerClipId,a),se.length?(I?(I.datum(h),W&&X&&(z?(z==="y"?W[1]=X[1]=w.c2p(0,!0):z==="x"&&(W[0]=X[0]=m.c2p(0,!0)),p(I).attr("d","M"+X+"L"+W+"L"+re.substr(1)).call(d.singleFillStyle,a)):p(I).attr("d",re+"Z").call(d.singleFillStyle,a))):U&&(u.fill.substr(0,6)==="tonext"&&re&&N?(u.fill==="tonext"?p(U).attr("d",re+"Z"+N+"Z").call(d.singleFillStyle,a):p(U).attr("d",re+"L"+N.substr(1)+"Z").call(d.singleFillStyle,a),u._polygons=u._polygons.concat(B)):(he(U),u._polygons=null)),u._prevRevpath=ie,u._prevPolygons=ee):(I?he(I):U&&he(U),u._polygons=u._prevRevpath=u._prevPolygons=null),C.datum(h),P.datum(h),function(Q,oe,ce){var me,Me=ce[0].trace,Re=s.hasMarkers(Me),Ce=s.hasText(Me),ze=Se(Me),le=Te,de=Te;if(Re||Ce){var be=x,Fe=Me.stackgroup,Ve=Fe&&a._fullLayout._scatterStackOpts[m._id+w._id][Fe].stackgaps==="infer zero";Me.marker.maxdisplayed||Me._needsCull?be=Ve?Ie:ve:Fe&&!Ve&&(be=xe),Re&&(le=be),Ce&&(de=be)}var He,rt=(me=Q.selectAll("path.point").data(le,ze)).enter().append("path").classed("point",!0);y&&rt.call(d.pointStyle,Me,a).call(d.translatePoints,m,w).style("opacity",0).transition().style("opacity",1),me.order(),Re&&(He=d.makePointStyleFns(Me)),me.each(function(tt){var ot=A.select(this),ht=p(ot);d.translatePoint(tt,ht,m,w)?(d.singlePointStyle(tt,ht,Me,He,a),c.layerClipId&&d.hideOutsideRangePoint(tt,ht,m,w,Me.xcalendar,Me.ycalendar),Me.customdata&&ot.classed("plotly-customdata",tt.data!==null&&tt.data!==void 0)):ht.remove()}),y?me.exit().transition().style("opacity",0).remove():me.exit().remove(),(me=oe.selectAll("g").data(de,ze)).enter().append("g").classed("textpoint",!0).append("text"),me.order(),me.each(function(tt){var ot=A.select(this),ht=p(ot.select("text"));d.translatePoint(tt,ht,m,w)?c.layerClipId&&d.hideOutsideRangePoint(tt,ot,m,w,Me.xcalendar,Me.ycalendar):ot.remove()}),me.selectAll("text").call(d.textPointStyle,Me,a).each(function(tt){var ot=m.c2p(tt.x),ht=w.c2p(tt.y);A.select(this).selectAll("tspan.line").each(function(){p(A.select(this)).attr({x:ot,y:ht})})}),me.exit().remove()}(C,P,h);var ge=u.cliponaxis===!1?null:c.layerClipId;d.setClipUrl(C,ge,a),d.setClipUrl(P,ge,a)}function he(Q){p(Q).attr("d","M0,0Z")}function ve(Q){return Q.filter(function(oe){return!oe.gap&&oe.vis})}function Ie(Q){return Q.filter(function(oe){return oe.vis})}function xe(Q){return Q.filter(function(oe){return!oe.gap})}function Ae(Q){return Q.id}function Se(Q){if(Q.ids)return Ae}function Te(){return!1}}$.exports=function(a,i,c,h,f,b){var v,g,y=!f,p=!!f&&f.duration>0,m=o(a,i,c);(v=h.selectAll("g.trace").data(m,function(w){return w[0].trace.uid})).enter().append("g").attr("class",function(w){return"trace scatter trace"+w[0].trace.uid}).style("stroke-miterlimit",2),v.order(),function(w,u,S){u.each(function(_){var E=T(A.select(this),"g","fills");d.setClipUrl(E,S.layerClipId,w);var L=_[0].trace,C=[];L._ownfill&&C.push("_ownFill"),L._nexttrace&&C.push("_nextFill");var P=E.selectAll("g").data(C,x);P.enter().append("g"),P.exit().each(function(I){L[I]=null}).remove(),P.order().each(function(I){L[I]=T(A.select(this),"path","js-fill")})})}(a,v,i),p?(b&&(g=b()),A.transition().duration(f.duration).ease(f.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){h.selectAll("g.trace").each(function(w,u){n(a,u,i,w,m,this,f)})})):v.each(function(w,u){n(a,u,i,w,m,this,f)}),y&&v.exit().remove(),h.selectAll("path:not([d])").remove()}},98002:function($,R,e){var A=e(34098);$.exports=function(k,l){var T,x,d,s,t=k.cd,o=k.xaxis,r=k.yaxis,n=[],a=t[0].trace;if(!A.hasMarkers(a)&&!A.hasText(a))return[];if(l===!1)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)x=t[T],d=o.c2p(x.x),s=r.c2p(x.y),x.i!==null&&l.contains([d,s],!1,T,k)?(n.push({pointNumber:x.i,x:o.c2d(x.x),y:r.c2d(x.y)}),x.selected=1):x.selected=0;return n}},565:function($){var R=["orientation","groupnorm","stackgaps"];$.exports=function(e,A,k,l){var T=k._scatterStackOpts,x=l("stackgroup");if(x){var d=A.xaxis+A.yaxis,s=T[d];s||(s=T[d]={});var t=s[x],o=!1;t?t.traces.push(A):(t=s[x]={traceIndices:[],traces:[A]},o=!0);for(var r={orientation:A.x&&!A.y?"h":"v"},n=0;n<R.length;n++){var a=R[n],i=a+"Found";if(!t[i]){var c=e[a]!==void 0,h=a==="orientation";if((c||o)&&(t[a]=l(a,r[a]),h&&(t.fillDflt=t[a]==="h"?"tonextx":"tonexty"),c&&(t[i]=!0,!o&&(delete t.traces[0][a],h))))for(var f=0;f<t.traces.length-1;f++){var b=t.traces[f];b._input.fill!==b.fill&&(b.fill=t.fillDflt)}}}return t}}},16296:function($,R,e){var A=e(39898),k=e(91424),l=e(73972);function T(d,s,t){k.pointStyle(d.selectAll("path.point"),s,t)}function x(d,s,t){k.textPointStyle(d.selectAll("text"),s,t)}$.exports={style:function(d){var s=A.select(d).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){T(A.select(this),t.trace||t[0].trace,d)}),s.selectAll("g.text").each(function(t){x(A.select(this),t.trace||t[0].trace,d)}),s.selectAll("g.trace path.js-line").call(k.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,d),l.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:x,styleOnSelect:function(d,s,t){var o=s[0].trace;o.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),o),k.selectedTextStyle(t.selectAll("text"),o)):(T(t,o,d),x(t,o,d))}}},34098:function($,R,e){var A=e(71828);$.exports={hasLines:function(k){return k.visible&&k.mode&&k.mode.indexOf("lines")!==-1},hasMarkers:function(k){return k.visible&&(k.mode&&k.mode.indexOf("markers")!==-1||k.type==="splom")},hasText:function(k){return k.visible&&k.mode&&k.mode.indexOf("text")!==-1},isBubble:function(k){return A.isPlainObject(k.marker)&&A.isArrayOrTypedArray(k.marker.size)}}},82410:function($,R,e){var A=e(71828);$.exports=function(k,l,T,x,d){d=d||{},x("textposition"),A.coerceFont(x,"textfont",T.font),d.noSelect||(x("selected.textfont.color"),x("unselected.textfont.color"))}},67513:function($,R,e){var A=e(71828),k=e(73972);$.exports=function(l,T,x,d){var s,t=d("x"),o=d("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],x),t){var r=A.minRowLength(t);o?s=Math.min(r,A.minRowLength(o)):(s=r,d("y0"),d("dy"))}else{if(!o)return 0;s=A.minRowLength(o),d("x0"),d("dx")}return T._length=s,s}},44542:function($,R,e){var A=e(82196),k=e(50693),l=e(12663).axisHoverFormat,T=e(5386).f,x=e(5386).s,d=e(9012),s=e(29659),t=e(87381),o=e(1426).extendFlat,r=e(30962).overrideAll,n=e(78607),a=A.line,i=A.marker,c=i.line,h=o({width:a.width,dash:{valType:"enumerated",values:n(s),dflt:"solid"}},k("line")),f=$.exports=r({x:A.x,y:A.y,z:{valType:"data_array"},text:o({},A.text,{}),texttemplate:x({},{}),hovertext:o({},A.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),mode:o({},A.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:A.connectgaps,line:h,marker:o({symbol:{valType:"enumerated",values:n(t),dflt:"circle",arrayOk:!0},size:o({},i.size,{dflt:8}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:o({},i.opacity,{arrayOk:!1}),colorbar:i.colorbar,line:o({width:o({},c.width,{arrayOk:!1})},k("marker.line"))},k("marker")),textposition:o({},A.textposition,{dflt:"top center"}),textfont:{color:A.textfont.color,size:A.textfont.size,family:o({},A.textfont.family,{arrayOk:!1})},opacity:d.opacity,hoverinfo:o({},d.hoverinfo)},"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes"},36563:function($,R,e){var A=e(75225),k=e(36922);$.exports=function(l,T){var x=[{x:!1,y:!1,trace:T,t:{}}];return A(x,T),k(l,T),x}},67336:function($,R,e){var A=e(73972);function k(l,T,x,d){if(!T||!T.visible)return null;for(var s=A.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(l.length),o=0;o<l.length;o++){var r=s(+l[o],o);if(d.type==="log"){var n=d.c2l(l[o]),a=l[o]-r[0],i=l[o]+r[1];if(t[o]=[(d.c2l(a,!0)-n)*x,(d.c2l(i,!0)-n)*x],a>0){var c=d.c2l(a);d._lowerLogErrorBound||(d._lowerLogErrorBound=c),d._lowerErrorBound=Math.min(d._lowerLogErrorBound,c)}}else t[o]=[-r[0]*x,r[1]*x]}return t}$.exports=function(l,T,x){var d=[k(l.x,l.error_x,T[0],x.xaxis),k(l.y,l.error_y,T[1],x.yaxis),k(l.z,l.error_z,T[2],x.zaxis)],s=function(i){for(var c=0;c<i.length;c++)if(i[c])return i[c].length;return 0}(d);if(s===0)return null;for(var t=new Array(s),o=0;o<s;o++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(d[n])for(var a=0;a<2;a++)r[a][n]=d[n][o][a];t[o]=r}return t}},58925:function($,R,e){var A=e(9330).gl_line3d,k=e(9330).gl_scatter3d,l=e(9330).gl_error3d,T=e(9330).gl_mesh3d,x=e(9330).delaunay_triangulate,d=e(71828),s=e(78614),t=e(81697).formatColor,o=e(39984),r=e(29659),n=e(87381),a=e(89298),i=e(23469).appendArrayPointValue,c=e(67336);function h(u,S){this.scene=u,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var f=h.prototype;function b(u){return u==null?0:u.indexOf("left")>-1?-1:u.indexOf("right")>-1?1:0}function v(u){return u==null?0:u.indexOf("top")>-1?-1:u.indexOf("bottom")>-1?1:0}function g(u,S){return S(4*u)}function y(u){return n[u]}function p(u,S,_,E,L){var C=null;if(d.isArrayOrTypedArray(u)){C=[];for(var P=0;P<S;P++)u[P]===void 0?C[P]=E:C[P]=_(u[P],L)}else C=_(u,d.identity);return C}function m(u){if(d.isArrayOrTypedArray(u)){var S=u[0];return d.isArrayOrTypedArray(S)&&(u=S),"rgb("+u.slice(0,3).map(function(_){return Math.round(255*_)})+")"}return null}function w(u){return d.isArrayOrTypedArray(u)?u.length===4&&typeof u[0]=="number"?m(u):u.map(m):null}f.handlePick=function(u){if(u.object&&(u.object===this.linePlot||u.object===this.delaunayMesh||u.object===this.textMarkers||u.object===this.scatterPlot)){var S=u.index=u.data.index;return u.object.highlight&&u.object.highlight(null),this.scatterPlot&&(u.object=this.scatterPlot,this.scatterPlot.highlight(u.data)),u.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(u.textLabel=this.textLabels[S]):u.textLabel=this.textLabels),u.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},f.update=function(u){var S,_,E,L,C=this.scene.glplot.gl,P=r.solid;this.data=u;var I=function(H,F){var N,B,j,K,G,V,W=[],J=H.fullSceneLayout,X=H.dataScale,ee=J.xaxis,re=J.yaxis,ie=J.zaxis,se=F.marker,fe=F.line,ye=F.x||[],ge=F.y||[],he=F.z||[],ve=ye.length,Ie=F.xcalendar,xe=F.ycalendar,Ae=F.zcalendar;for(G=0;G<ve;G++)N=ee.d2l(ye[G],0,Ie)*X[0],B=re.d2l(ge[G],0,xe)*X[1],j=ie.d2l(he[G],0,Ae)*X[2],W[G]=[N,B,j];if(Array.isArray(F.text))V=F.text;else if(F.text!==void 0)for(V=new Array(ve),G=0;G<ve;G++)V[G]=F.text;function Se(Ve,He){var rt=J[Ve];return a.tickText(rt,rt.d2l(He),!0).text}var Te=F.texttemplate;if(Te){var Q=H.fullLayout._d3locale,oe=Array.isArray(Te),ce=oe?Math.min(Te.length,ve):ve,me=oe?function(Ve){return Te[Ve]}:function(){return Te};for(V=new Array(ce),G=0;G<ce;G++){var Me={x:ye[G],y:ge[G],z:he[G]},Re={xLabel:Se("xaxis",ye[G]),yLabel:Se("yaxis",ge[G]),zLabel:Se("zaxis",he[G])},Ce={};i(Ce,F,G);var ze=F._meta||{};V[G]=d.texttemplateString(me(G),Re,Q,Ce,Me,ze)}}if(K={position:W,mode:F.mode,text:V},"line"in F&&(K.lineColor=t(fe,1,ve),K.lineWidth=fe.width,K.lineDashes=fe.dash),"marker"in F){var le=o(F);K.scatterColor=t(se,1,ve),K.scatterSize=p(se.size,ve,g,20,le),K.scatterMarker=p(se.symbol,ve,y,"●"),K.scatterLineWidth=se.line.width,K.scatterLineColor=t(se.line,1,ve),K.scatterAngle=0}"textposition"in F&&(K.textOffset=function(Ve){var He=[0,0];if(Array.isArray(Ve))for(var rt=0;rt<Ve.length;rt++)He[rt]=[0,0],Ve[rt]&&(He[rt][0]=b(Ve[rt]),He[rt][1]=v(Ve[rt]));else He[0]=b(Ve),He[1]=v(Ve);return He}(F.textposition),K.textColor=t(F.textfont,1,ve),K.textSize=p(F.textfont.size,ve,d.identity,12),K.textFont=F.textfont.family,K.textAngle=0);var de=["x","y","z"];for(K.project=[!1,!1,!1],K.projectScale=[1,1,1],K.projectOpacity=[1,1,1],G=0;G<3;++G){var be=F.projection[de[G]];(K.project[G]=be.show)&&(K.projectOpacity[G]=be.opacity,K.projectScale[G]=be.scale)}K.errorBounds=c(F,X,J);var Fe=function(Ve){for(var He=[0,0,0],rt=[[0,0,0],[0,0,0],[0,0,0]],tt=[1,1,1],ot=0;ot<3;ot++){var ht=Ve[ot];ht&&ht.copy_zstyle!==!1&&Ve[2].visible!==!1&&(ht=Ve[2]),ht&&ht.visible&&(He[ot]=ht.width/2,rt[ot]=s(ht.color),tt[ot]=ht.thickness)}return{capSize:He,color:rt,lineWidth:tt}}([F.error_x,F.error_y,F.error_z]);return K.errorColor=Fe.color,K.errorLineWidth=Fe.lineWidth,K.errorCapSize=Fe.capSize,K.delaunayAxis=F.surfaceaxis,K.delaunayColor=s(F.surfacecolor),K}(this.scene,u);"mode"in I&&(this.mode=I.mode),"lineDashes"in I&&I.lineDashes in r&&(P=r[I.lineDashes]),this.color=w(I.scatterColor)||w(I.lineColor),this.dataPoints=I.position,S={gl:this.scene.glplot.gl,position:I.position,color:I.lineColor,lineWidth:I.lineWidth||1,dashes:P[0],dashScale:P[1],opacity:u.opacity,connectGaps:u.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=A(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=u.opacity;if(u.marker&&u.marker.opacity&&(U*=u.marker.opacity),_={gl:this.scene.glplot.gl,position:I.position,color:I.scatterColor,size:I.scatterSize,glyph:I.scatterMarker,opacity:U,orthographic:!0,lineWidth:I.scatterLineWidth,lineColor:I.scatterLineColor,project:I.project,projectScale:I.projectScale,projectOpacity:I.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(_):(this.scatterPlot=k(_),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:I.position,glyph:I.text,color:I.textColor,size:I.textSize,angle:I.textAngle,alignment:I.textOffset,font:I.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:u.opacity},this.textLabels=u.hovertext||u.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=k(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:I.position,color:I.errorColor,error:I.errorBounds,lineWidth:I.errorLineWidth,capSize:I.errorCapSize,opacity:u.opacity},this.errorBars?I.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):I.errorBounds&&(this.errorBars=l(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),I.delaunayAxis>=0){var z=function(H,F,N){var B,j=(N+1)%3,K=(N+2)%3,G=[],V=[];for(B=0;B<H.length;++B){var W=H[B];!isNaN(W[j])&&isFinite(W[j])&&!isNaN(W[K])&&isFinite(W[K])&&(G.push([W[j],W[K]]),V.push(B))}var J=x(G);for(B=0;B<J.length;++B)for(var X=J[B],ee=0;ee<X.length;++ee)X[ee]=V[X[ee]];return{positions:H,cells:J,meshColor:F}}(I.position,I.delaunayColor,I.delaunayAxis);z.opacity=u.opacity,this.delaunayMesh?this.delaunayMesh.update(z):(z.gl=C,this.delaunayMesh=T(z),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},f.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},$.exports=function(u,S){var _=new h(u,S.uid);return _.update(S),_}},21428:function($,R,e){var A=e(73972),k=e(71828),l=e(34098),T=e(49508),x=e(11058),d=e(82410),s=e(44542);$.exports=function(t,o,r,n){function a(y,p){return k.coerce(t,o,s,y,p)}var i=function(y,p,m,w){var u=0,S=m("x"),_=m("y"),E=m("z");return A.getComponentMethod("calendars","handleTraceDefaults")(y,p,["x","y","z"],w),S&&_&&E&&(u=Math.min(S.length,_.length,E.length),p._length=p._xlength=p._ylength=p._zlength=u),u}(t,o,a,n);if(i){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),l.hasLines(o)&&(a("connectgaps"),x(t,o,r,n,a)),l.hasMarkers(o)&&T(t,o,r,n,a,{noSelect:!0,noAngle:!0}),l.hasText(o)&&(a("texttemplate"),d(t,o,n,a,{noSelect:!0}));var c=(o.line||{}).color,h=(o.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",c||h);for(var f=["x","y","z"],b=0;b<3;++b){var v="projection."+f[b];a(v+".show")&&(a(v+".opacity"),a(v+".scale"))}var g=A.getComponentMethod("errorbars","supplyDefaults");g(t,o,c||h||r,{axis:"z"}),g(t,o,c||h||r,{axis:"y",inherit:"z"}),g(t,o,c||h||r,{axis:"x",inherit:"z"})}else o.visible=!1}},13551:function($,R,e){$.exports={plot:e(58925),attributes:e(44542),markerSymbols:e(87381),supplyDefaults:e(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(36563),moduleType:"trace",name:"scatter3d",basePlotModule:e(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function($,R,e){var A=e(82196),k=e(9012),l=e(5386).f,T=e(5386).s,x=e(50693),d=e(1426).extendFlat,s=A.marker,t=A.line,o=s.line;$.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:d({},A.mode,{dflt:"markers"}),text:d({},A.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:d({},A.hovertext,{}),line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:d({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:A.connectgaps,fill:d({},A.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:A.fillcolor,marker:d({symbol:s.symbol,opacity:s.opacity,maxdisplayed:s.maxdisplayed,angle:s.angle,angleref:s.angleref,standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,line:d({width:o.width,editType:"calc"},x("marker.line")),gradient:s.gradient,editType:"calc"},x("marker")),textfont:A.textfont,textposition:A.textposition,selected:A.selected,unselected:A.unselected,hoverinfo:d({},k.hoverinfo,{flags:["a","b","text","name"]}),hoveron:A.hoveron,hovertemplate:l()}},34618:function($,R,e){var A=e(92770),k=e(36922),l=e(75225),T=e(66279),x=e(47761).calcMarkerSize,d=e(22882);$.exports=function(s,t){var o=t._carpetTrace=d(s,t);if(o&&o.visible&&o.visible!=="legendonly"){var r;t.xaxis=o.xaxis,t.yaxis=o.yaxis;var n,a,i=t._length,c=new Array(i),h=!1;for(r=0;r<i;r++)if(n=t.a[r],a=t.b[r],A(n)&&A(a)){var f=o.ab2xy(+n,+a,!0),b=o.isVisible(+n,+a);b||(h=!0),c[r]={x:f[0],y:f[1],a:n,b:a,vis:b}}else c[r]={x:!1,y:!1};return t._needsCull=h,c[0].carpet=o,c[0].trace=t,x(t,i),k(s,t),l(c,t),T(c,t),c}}},98965:function($,R,e){var A=e(71828),k=e(47581),l=e(34098),T=e(49508),x=e(11058),d=e(94039),s=e(82410),t=e(28908),o=e(97001);$.exports=function(r,n,a,i){function c(g,y){return A.coerce(r,n,o,g,y)}c("carpet"),n.xaxis="x",n.yaxis="y";var h=c("a"),f=c("b"),b=Math.min(h.length,f.length);if(b){n._length=b,c("text"),c("texttemplate"),c("hovertext"),c("mode",b<k.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(x(r,n,a,i,c,{backoff:!0}),d(r,n,c),c("connectgaps")),l.hasMarkers(n)&&T(r,n,a,i,c,{gradient:!0}),l.hasText(n)&&s(r,n,i,c);var v=[];(l.hasMarkers(n)||l.hasText(n))&&(c("marker.maxdisplayed"),v.push("points")),c("fill"),n.fill!=="none"&&(t(r,n,a,c),l.hasLines(n)||d(r,n,c)),n.fill!=="tonext"&&n.fill!=="toself"||v.push("fills"),c("hoveron",v.join("+")||"points")!=="fills"&&c("hovertemplate"),A.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},16165:function($){$.exports=function(R,e,A,k,l){var T=k[l];return R.a=T.a,R.b=T.b,R.y=T.y,R}},48953:function($){$.exports=function(R,e){var A={},k=e._carpet,l=k.ab2ij([R.a,R.b]),T=Math.floor(l[0]),x=l[0]-T,d=Math.floor(l[1]),s=l[1]-d,t=k.evalxy([],T,d,x,s);return A.yLabel=t[1].toFixed(3),A}},22931:function($,R,e){var A=e(33720),k=e(71828).fillText;$.exports=function(l,T,x,d){var s=A(l,T,x,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var o=1-t.y0/l.ya._length,r=l.xa._length,n=r*o/2,a=r-n;return t.x0=Math.max(Math.min(t.x0,a),n),t.x1=Math.max(Math.min(t.x1,a),n),s}var i=t.cd[t.index];t.a=i.a,t.b=i.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var c=t.trace,h=c._carpet,f=c._module.formatLabels(i,c);t.yLabel=f.yLabel,delete t.text;var b=[];if(!c.hovertemplate){var v=(i.hi||c.hoverinfo).split("+");v.indexOf("all")!==-1&&(v=["a","b","text"]),v.indexOf("a")!==-1&&g(h.aaxis,i.a),v.indexOf("b")!==-1&&g(h.baxis,i.b),b.push("y: "+t.yLabel),v.indexOf("text")!==-1&&k(i,c,b),t.extraText=b.join("<br>")}return s}function g(y,p){var m;m=y.labelprefix&&y.labelprefix.length>0?y.labelprefix.replace(/ = $/,""):y._hovertitle,b.push(m+": "+p.toFixed(3)+y.labelsuffix)}}},46858:function($,R,e){$.exports={attributes:e(97001),supplyDefaults:e(98965),colorbar:e(4898),formatLabels:e(48953),calc:e(34618),plot:e(1913),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(22931),selectPoints:e(98002),eventData:e(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:e(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function($,R,e){var A=e(32663),k=e(89298),l=e(91424);$.exports=function(T,x,d,s){var t,o,r,n=d[0][0].carpet,a=k.getFromId(T,n.xaxis||"x"),i=k.getFromId(T,n.yaxis||"y"),c={xaxis:a,yaxis:i,plot:x.plot};for(t=0;t<d.length;t++)(o=d[t][0].trace)._xA=a,o._yA=i;for(A(T,c,d,s),t=0;t<d.length;t++)o=d[t][0].trace,r=s.selectAll("g.trace"+o.uid+" .js-line"),l.setClipUrl(r,d[t][0].carpet._clipPathId,T)}},19316:function($,R,e){var A=e(5386).f,k=e(5386).s,l=e(82196),T=e(9012),x=e(50693),d=e(79952).P,s=e(1426).extendFlat,t=e(30962).overrideAll,o=l.marker,r=l.line,n=o.line;$.exports=t({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:s({},l.hovertext,{}),textfont:l.textfont,textposition:l.textposition,line:{color:r.color,width:r.width,dash:d},connectgaps:l.connectgaps,marker:s({symbol:o.symbol,opacity:o.opacity,angle:o.angle,angleref:s({},o.angleref,{values:["previous","up","north"]}),standoff:o.standoff,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,colorbar:o.colorbar,line:s({width:n.width},x("marker.line")),gradient:o.gradient},x("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:l.fillcolor,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:A()},"calc","nested")},84622:function($,R,e){var A=e(92770),k=e(50606).BADNUM,l=e(36922),T=e(75225),x=e(66279),d=e(71828)._;function s(t){return t&&typeof t=="string"}$.exports=function(t,o){var r,n=Array.isArray(o.locations),a=n?o.locations.length:o._length,i=new Array(a);r=o.geojson?function(g){return s(g)||A(g)}:s;for(var c=0;c<a;c++){var h=i[c]={};if(n){var f=o.locations[c];h.loc=r(f)?f:null}else{var b=o.lon[c],v=o.lat[c];A(b)&&A(v)?h.lonlat=[+b,+v]:h.lonlat=[k,k]}}return T(i,o),l(t,o),x(i,o),a&&(i[0].t={labels:{lat:d(t,"lat:")+" ",lon:d(t,"lon:")+" "}}),i}},10659:function($,R,e){var A=e(71828),k=e(34098),l=e(49508),T=e(11058),x=e(82410),d=e(28908),s=e(19316);$.exports=function(t,o,r,n){function a(g,y){return A.coerce(t,o,s,g,y)}var i,c=a("locations");if(c&&c.length){var h,f=a("geojson");(typeof f=="string"&&f!==""||A.isPlainObject(f))&&(h="geojson-id"),a("locationmode",h)==="geojson-id"&&a("featureidkey"),i=c.length}else{var b=a("lon")||[],v=a("lat")||[];i=Math.min(b.length,v.length)}i?(o._length=i,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),k.hasLines(o)&&(T(t,o,r,n,a),a("connectgaps")),k.hasMarkers(o)&&l(t,o,r,n,a,{gradient:!0}),k.hasText(o)&&(a("texttemplate"),x(t,o,n,a)),a("fill"),o.fill!=="none"&&d(t,o,r,a),A.coerceSelectionMarkerOpacity(o,a)):o.visible=!1}},84084:function($){$.exports=function(R,e,A,k,l){R.lon=e.lon,R.lat=e.lat,R.location=e.loc?e.loc:null;var T=k[l];return T.fIn&&T.fIn.properties&&(R.properties=T.fIn.properties),R}},82719:function($,R,e){var A=e(89298);$.exports=function(k,l,T){var x={},d=T[l.geo]._subplot.mockAxis,s=k.lonlat;return x.lonLabel=A.tickText(d,d.c2l(s[0]),!0).text,x.latLabel=A.tickText(d,d.c2l(s[1]),!0).text,x}},14977:function($,R,e){var A=e(30211),k=e(50606).BADNUM,l=e(34603),T=e(71828).fillText,x=e(19316);$.exports=function(d,s,t){var o=d.cd,r=o[0].trace,n=d.xa,a=d.ya,i=d.subplot,c=i.projection.isLonLatOverEdges,h=i.project;if(A.getClosest(o,function(m){var w=m.lonlat;if(w[0]===k||c(w))return 1/0;var u=h(w),S=h([s,t]),_=Math.abs(u[0]-S[0]),E=Math.abs(u[1]-S[1]),L=Math.max(3,m.mrc||0);return Math.max(Math.sqrt(_*_+E*E)-L,1-3/L)},d),d.index!==!1){var f=o[d.index],b=f.lonlat,v=[n.c2p(b),a.c2p(b)],g=f.mrc||1;d.x0=v[0]-g,d.x1=v[0]+g,d.y0=v[1]-g,d.y1=v[1]+g,d.loc=f.loc,d.lon=b[0],d.lat=b[1];var y={};y[r.geo]={_subplot:i};var p=r._module.formatLabels(f,r,y);return d.lonLabel=p.lonLabel,d.latLabel=p.latLabel,d.color=l(r,f),d.extraText=function(m,w,u,S){if(!m.hovertemplate){var _=w.hi||m.hoverinfo,E=_==="all"?x.hoverinfo.flags:_.split("+"),L=E.indexOf("location")!==-1&&Array.isArray(m.locations),C=E.indexOf("lon")!==-1,P=E.indexOf("lat")!==-1,I=E.indexOf("text")!==-1,U=[];return L?U.push(w.loc):C&&P?U.push("("+z(u.latLabel)+", "+z(u.lonLabel)+")"):C?U.push(S.lon+z(u.lonLabel)):P&&U.push(S.lat+z(u.latLabel)),I&&T(w,m,U),U.join("<br>")}function z(H){return H+"°"}}(r,f,d,o[0].t.labels),d.hovertemplate=r.hovertemplate,[d]}}},17988:function($,R,e){$.exports={attributes:e(19316),supplyDefaults:e(10659),colorbar:e(4898),formatLabels:e(82719),calc:e(84622),calcGeoJSON:e(89171).calcGeoJSON,plot:e(89171).plot,style:e(33095),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(14977),eventData:e(84084),selectPoints:e(20548),moduleType:"trace",name:"scattergeo",basePlotModule:e(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function($,R,e){var A=e(39898),k=e(71828),l=e(90973).getTopojsonFeatures,T=e(18214),x=e(41327),d=e(71739).findExtremes,s=e(50606).BADNUM,t=e(47761).calcMarkerSize,o=e(34098),r=e(33095);$.exports={calcGeoJSON:function(n,a){var i,c,h=n[0].trace,f=a[h.geo],b=f._subplot,v=h._length;if(Array.isArray(h.locations)){var g=h.locationmode,y=g==="geojson-id"?x.extractTraceFeature(n):l(h,b.topojson);for(i=0;i<v;i++){c=n[i];var p=g==="geojson-id"?c.fOut:x.locationToFeature(g,c.loc,y);c.lonlat=p?p.properties.ct:[s,s]}}var m,w,u={padded:!0};if(f.fitbounds==="geojson"&&h.locationmode==="geojson-id"){var S=x.computeBbox(x.getTraceGeojson(h));m=[S[0],S[2]],w=[S[1],S[3]]}else{for(m=new Array(v),w=new Array(v),i=0;i<v;i++)c=n[i],m[i]=c.lonlat[0],w[i]=c.lonlat[1];u.ppad=t(h,v)}h._extremes.lon=d(f.lonaxis._ax,m,u),h._extremes.lat=d(f.lataxis._ax,w,u)},plot:function(n,a,i){var c=a.layers.frontplot.select(".scatterlayer"),h=k.makeTraceGroups(c,i,"trace scattergeo");function f(b,v){b.lonlat[0]===s&&A.select(v).remove()}h.selectAll("*").remove(),h.each(function(b){var v=A.select(this),g=b[0].trace;if(o.hasLines(g)||g.fill!=="none"){var y=T.calcTraceToLineCoords(b),p=g.fill!=="none"?T.makePolygon(y):T.makeLine(y);v.selectAll("path.js-line").data([{geojson:p,trace:g}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}o.hasMarkers(g)&&v.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(m){f(m,this)}),o.hasText(g)&&v.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(m){f(m,this)}),r(n,b)})}}},20548:function($,R,e){var A=e(34098),k=e(50606).BADNUM;$.exports=function(l,T){var x,d,s,t,o,r=l.cd,n=l.xaxis,a=l.yaxis,i=[],c=r[0].trace;if(!A.hasMarkers(c)&&!A.hasText(c))return[];if(T===!1)for(o=0;o<r.length;o++)r[o].selected=0;else for(o=0;o<r.length;o++)(d=(x=r[o]).lonlat)[0]!==k&&(s=n.c2p(d),t=a.c2p(d),T.contains([s,t],null,o,l)?(i.push({pointNumber:o,lon:d[0],lat:d[1]}),x.selected=1):x.selected=0);return i}},33095:function($,R,e){var A=e(39898),k=e(91424),l=e(7901),T=e(16296),x=T.stylePoints,d=T.styleText;$.exports=function(s,t){t&&function(o,r){var n=r[0].trace,a=r[0].node3;a.style("opacity",r[0].trace.opacity),x(a,n,o),d(a,n,o),a.selectAll("path.js-line").style("fill","none").each(function(i){var c=A.select(this),h=i.trace,f=h.line||{};c.call(l.stroke,f.color).call(k.dashLine,f.dash||"",f.width||0),h.fill!=="none"&&c.call(l.fill,h.fillcolor)})}(s,t)}},42341:function($,R,e){var A=e(9012),k=e(82196),l=e(12663).axisHoverFormat,T=e(50693),x=e(78607),d=e(1426).extendFlat,s=e(30962).overrideAll,t=e(78232).DASHES,o=k.line,r=k.marker,n=r.line,a=$.exports=s({x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:k.text,hovertext:k.hovertext,textposition:k.textposition,textfont:k.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:o.color,width:o.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:x(t),dflt:"solid"}},marker:d({},T("marker"),{symbol:r.symbol,angle:r.angle,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:d({},T("marker.line"),{width:n.width})}),connectgaps:k.connectgaps,fill:d({},k.fill,{dflt:"none"}),fillcolor:k.fillcolor,selected:{marker:k.selected.marker,textfont:k.selected.textfont},unselected:{marker:k.unselected.marker,textfont:k.unselected.textfont},opacity:A.opacity},"calc","nested");a.x.editType=a.y.editType=a.x0.editType=a.y0.editType="calc+clearAxisTypes",a.hovertemplate=k.hovertemplate,a.texttemplate=k.texttemplate},72156:function($,R,e){var A=e(20794);$.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(42341),supplyDefaults:e(47148),crossTraceDefaults:e(34936),colorbar:e(4898),formatLabels:e(68101),calc:e(45032),hoverPoints:A.hoverPoints,selectPoints:e(58147),meta:{}}},45032:function($,R,e){var A=e(88294),k=e(71828),l=e(41675),T=e(71739).findExtremes,x=e(42973),d=e(47761),s=d.calcMarkerSize,t=d.calcAxisExpansion,o=d.setFirstScatter,r=e(36922),n=e(19635),a=e(38967),i=e(50606).BADNUM,c=e(78232).TOO_MANY_POINTS;function h(f,b,v){var g=f._extremes[b._id],y=T(b,v._bnds,{padded:!0});g.min=g.min.concat(y.min),g.max=g.max.concat(y.max)}$.exports=function(f,b){var v,g=f._fullLayout,y=b._xA=l.getFromId(f,b.xaxis,"x"),p=b._yA=l.getFromId(f,b.yaxis,"y"),m=g._plots[b.xaxis+b.yaxis],w=b._length,u=w>=c,S=2*w,_={},E=y.makeCalcdata(b,"x"),L=p.makeCalcdata(b,"y"),C=x(b,y,"x",E),P=x(b,p,"y",L),I=C.vals,U=P.vals;b._x=I,b._y=U,b.xperiodalignment&&(b._origX=E,b._xStarts=C.starts,b._xEnds=C.ends),b.yperiodalignment&&(b._origY=L,b._yStarts=P.starts,b._yEnds=P.ends);var z=new Array(S),H=new Array(w);for(v=0;v<w;v++)z[2*v]=I[v]===i?NaN:I[v],z[2*v+1]=U[v]===i?NaN:U[v],H[v]=v;if(y.type==="log")for(v=0;v<S;v+=2)z[v]=y.c2l(z[v]);if(p.type==="log")for(v=1;v<S;v+=2)z[v]=p.c2l(z[v]);u&&y.type!=="log"&&p.type!=="log"?_.tree=A(z):_.ids=H,r(f,b);var F,N=function(j,K,G,V,W,J){var X=n.style(j,G);if(X.marker&&(X.marker.positions=V),X.line&&V.length>1&&k.extendFlat(X.line,n.linePositions(j,G,V)),X.errorX||X.errorY){var ee=n.errorBarPositions(j,G,V,W,J);X.errorX&&k.extendFlat(X.errorX,ee.x),X.errorY&&k.extendFlat(X.errorY,ee.y)}return X.text&&(k.extendFlat(X.text,{positions:V},n.textPosition(j,G,X.text,X.marker)),k.extendFlat(X.textSel,{positions:V},n.textPosition(j,G,X.text,X.markerSel)),k.extendFlat(X.textUnsel,{positions:V},n.textPosition(j,G,X.text,X.markerUnsel))),X}(f,0,b,z,I,U),B=a(f,m);return o(g,b),u?N.marker&&(F=N.marker.sizeAvg||Math.max(N.marker.size,3)):F=s(b,w),t(f,b,y,p,I,U,F),N.errorX&&h(b,y,N.errorX),N.errorY&&h(b,p,N.errorY),N.fill&&!B.fill2d&&(B.fill2d=!0),N.marker&&!B.scatter2d&&(B.scatter2d=!0),N.line&&!B.line2d&&(B.line2d=!0),!N.errorX&&!N.errorY||B.error2d||(B.error2d=!0),N.text&&!B.glText&&(B.glText=!0),N.marker&&(N.marker.snap=w),B.lineOptions.push(N.line),B.errorXOptions.push(N.errorX),B.errorYOptions.push(N.errorY),B.fillOptions.push(N.fill),B.markerOptions.push(N.marker),B.markerSelectedOptions.push(N.markerSel),B.markerUnselectedOptions.push(N.markerUnsel),B.textOptions.push(N.text),B.textSelectedOptions.push(N.textSel),B.textUnselectedOptions.push(N.textUnsel),B.selectBatch.push([]),B.unselectBatch.push([]),_._scene=B,_.index=B.count,_.x=I,_.y=U,_.positions=z,B.count++,[{x:!1,y:!1,t:_,trace:b}]}},78232:function($){$.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function($,R,e){var A=e(92770),k=e(82019),l=e(25075),T=e(73972),x=e(71828),d=e(91424),s=e(41675),t=e(81697).formatColor,o=e(34098),r=e(39984),n=e(68645),a=e(78232),i=e(37822).DESELECTDIM,c={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},h=e(23469).appendArrayPointValue;function f(E,L){var C,P=E._fullLayout,I=L._length,U=L.textfont,z=L.textposition,H=Array.isArray(z)?z:[z],F=U.color,N=U.size,B=U.family,j={},K=E._context.plotGlPixelRatio,G=L.texttemplate;if(G){j.text=[];var V=P._d3locale,W=Array.isArray(G),J=W?Math.min(G.length,I):I,X=W?function(ge){return G[ge]}:function(){return G};for(C=0;C<J;C++){var ee={i:C},re=L._module.formatLabels(ee,L,P),ie={};h(ie,L,C);var se=L._meta||{};j.text.push(x.texttemplateString(X(C),re,V,ie,ee,se))}}else Array.isArray(L.text)&&L.text.length<I?j.text=L.text.slice():j.text=L.text;if(Array.isArray(j.text))for(C=j.text.length;C<I;C++)j.text[C]="";for(j.opacity=L.opacity,j.font={},j.align=[],j.baseline=[],C=0;C<H.length;C++){var fe=H[C].split(/\s+/);switch(fe[1]){case"left":j.align.push("right");break;case"right":j.align.push("left");break;default:j.align.push(fe[1])}switch(fe[0]){case"top":j.baseline.push("bottom");break;case"bottom":j.baseline.push("top");break;default:j.baseline.push(fe[0])}}if(Array.isArray(F))for(j.color=new Array(I),C=0;C<I;C++)j.color[C]=F[C];else j.color=F;if(x.isArrayOrTypedArray(N)||Array.isArray(B))for(j.font=new Array(I),C=0;C<I;C++){var ye=j.font[C]={};ye.size=(x.isTypedArray(N)?N[C]:Array.isArray(N)?A(N[C])?N[C]:0:N)*K,ye.family=Array.isArray(B)?B[C]:B}else j.font={size:N*K,family:B};return j}function b(E,L){var C,P,I=L._length,U=L.marker,z={},H=x.isArrayOrTypedArray(U.symbol),F=x.isArrayOrTypedArray(U.angle),N=x.isArrayOrTypedArray(U.color),B=x.isArrayOrTypedArray(U.line.color),j=x.isArrayOrTypedArray(U.opacity),K=x.isArrayOrTypedArray(U.size),G=x.isArrayOrTypedArray(U.line.width);if(H||(P=n.isOpenSymbol(U.symbol)),H||N||B||j||F){z.symbols=new Array(I),z.angles=new Array(I),z.colors=new Array(I),z.borderColors=new Array(I);var V=U.symbol,W=U.angle,J=t(U,U.opacity,I),X=t(U.line,U.opacity,I);if(!Array.isArray(X[0])){var ee=X;for(X=Array(I),C=0;C<I;C++)X[C]=ee}if(!Array.isArray(J[0])){var re=J;for(J=Array(I),C=0;C<I;C++)J[C]=re}if(!Array.isArray(V)){var ie=V;for(V=Array(I),C=0;C<I;C++)V[C]=ie}if(!Array.isArray(W)){var se=W;for(W=Array(I),C=0;C<I;C++)W[C]=se}for(z.symbols=V,z.angles=W,z.colors=J,z.borderColors=X,C=0;C<I;C++)H&&(P=n.isOpenSymbol(U.symbol[C])),P&&(X[C]=J[C].slice(),J[C]=J[C].slice(),J[C][3]=0);for(z.opacity=L.opacity,z.markers=new Array(I),C=0;C<I;C++)z.markers[C]=_({mx:z.symbols[C],ma:z.angles[C]},L)}else P?(z.color=l(U.color,"uint8"),z.color[3]=0,z.borderColor=l(U.color,"uint8")):(z.color=l(U.color,"uint8"),z.borderColor=l(U.line.color,"uint8")),z.opacity=L.opacity*U.opacity,z.marker=_({mx:U.symbol,ma:U.angle},L);var fe,ye=r(L,1);if(K||G){var ge,he=z.sizes=new Array(I),ve=z.borderSizes=new Array(I),Ie=0;if(K){for(C=0;C<I;C++)he[C]=ye(U.size[C]),Ie+=he[C];ge=Ie/I}else for(fe=ye(U.size),C=0;C<I;C++)he[C]=fe;if(G)for(C=0;C<I;C++)ve[C]=U.line.width[C];else for(fe=U.line.width,C=0;C<I;C++)ve[C]=fe;z.sizeAvg=ge}else z.size=ye(U&&U.size||10),z.borderSizes=ye(U.line.width);return z}function v(E,L,C){var P=L.marker,I={};return C&&(C.marker&&C.marker.symbol?I=b(0,x.extendFlat({},P,C.marker)):C.marker&&(C.marker.size&&(I.size=C.marker.size),C.marker.color&&(I.colors=C.marker.color),C.marker.opacity!==void 0&&(I.opacity=C.marker.opacity))),I}function g(E,L,C){var P={};if(!C)return P;if(C.textfont){var I={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:x.extendFlat({},L.textfont)};C.textfont&&x.extendFlat(I.textfont,C.textfont),P=f(E,I)}return P}function y(E,L,C){var P={capSize:2*L.width*C,lineWidth:L.thickness*C,color:L.color};return L.copy_ystyle&&(P=E.error_y),P}var p=a.SYMBOL_SDF_SIZE,m=a.SYMBOL_SIZE,w=a.SYMBOL_STROKE,u={},S=d.symbolFuncs[0](.05*m);function _(E,L){var C,P,I=E.mx;if(I==="circle")return null;var U=d.symbolNumber(I),z=d.symbolFuncs[U%100],H=!!d.symbolNoDot[U%100],F=!!d.symbolNoFill[U%100],N=n.isDotSymbol(I);if(E.ma&&(I+="_"+E.ma),u[I])return u[I];var B=d.getMarkerAngle(E,L);return C=N&&!H?z(1.1*m,B)+S:z(m,B),P=k(C,{w:p,h:p,viewBox:[-m,-m,m,m],stroke:F?w:-w}),u[I]=P,P||null}$.exports={style:function(E,L){var C,P={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},I=E._context.plotGlPixelRatio;if(L.visible!==!0)return P;if(o.hasText(L)&&(P.text=f(E,L),P.textSel=g(E,L,L.selected),P.textUnsel=g(E,L,L.unselected)),o.hasMarkers(L)&&(P.marker=b(0,L),P.markerSel=v(0,L,L.selected),P.markerUnsel=v(0,L,L.unselected),!L.unselected&&x.isArrayOrTypedArray(L.marker.opacity))){var U=L.marker.opacity;for(P.markerUnsel.opacity=new Array(U.length),C=0;C<U.length;C++)P.markerUnsel.opacity[C]=i*U[C]}if(o.hasLines(L)){P.line={overlay:!0,thickness:L.line.width*I,color:L.line.color,opacity:L.opacity};var z=(a.DASHES[L.line.dash]||[1]).slice();for(C=0;C<z.length;++C)z[C]*=L.line.width*I;P.line.dashes=z}return L.error_x&&L.error_x.visible&&(P.errorX=y(L,L.error_x,I)),L.error_y&&L.error_y.visible&&(P.errorY=y(L,L.error_y,I)),L.fill&&L.fill!=="none"&&(P.fill={closed:!0,fill:L.fillcolor,thickness:0}),P},markerStyle:b,markerSelection:v,linePositions:function(E,L,C){var P,I,U=C.length,z=U/2;if(o.hasLines(L)&&z)if(L.line.shape==="hv"){for(P=[],I=0;I<z-1;I++)isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*I],C[2*I+1]),isNaN(C[2*I+2])||isNaN(C[2*I+3])?P.push(NaN,NaN):P.push(C[2*I+2],C[2*I+1]));P.push(C[U-2],C[U-1])}else if(L.line.shape==="hvh"){for(P=[],I=0;I<z-1;I++)if(isNaN(C[2*I])||isNaN(C[2*I+1])||isNaN(C[2*I+2])||isNaN(C[2*I+3]))isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN):P.push(C[2*I],C[2*I+1]),P.push(NaN,NaN);else{var H=(C[2*I]+C[2*I+2])/2;P.push(C[2*I],C[2*I+1],H,C[2*I+1],H,C[2*I+3])}P.push(C[U-2],C[U-1])}else if(L.line.shape==="vhv"){for(P=[],I=0;I<z-1;I++)if(isNaN(C[2*I])||isNaN(C[2*I+1])||isNaN(C[2*I+2])||isNaN(C[2*I+3]))isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN):P.push(C[2*I],C[2*I+1]),P.push(NaN,NaN);else{var F=(C[2*I+1]+C[2*I+3])/2;P.push(C[2*I],C[2*I+1],C[2*I],F,C[2*I+2],F)}P.push(C[U-2],C[U-1])}else if(L.line.shape==="vh"){for(P=[],I=0;I<z-1;I++)isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*I],C[2*I+1]),isNaN(C[2*I+2])||isNaN(C[2*I+3])?P.push(NaN,NaN):P.push(C[2*I],C[2*I+3]));P.push(C[U-2],C[U-1])}else P=C;var N=!1;for(I=0;I<P.length;I++)if(isNaN(P[I])){N=!0;break}var B=N||P.length>a.TOO_MANY_POINTS||o.hasMarkers(L)?"rect":"round";if(N&&L.connectgaps){var j=P[0],K=P[1];for(I=0;I<P.length;I+=2)isNaN(P[I])||isNaN(P[I+1])?(P[I]=j,P[I+1]=K):(j=P[I],K=P[I+1])}return{join:B,positions:P}},errorBarPositions:function(E,L,C,P,I){var U=T.getComponentMethod("errorbars","makeComputeError"),z=s.getFromId(E,L.xaxis,"x"),H=s.getFromId(E,L.yaxis,"y"),F=C.length/2,N={};function B(j,K){var G=K._id.charAt(0),V=L["error_"+G];if(V&&V.visible&&(K.type==="linear"||K.type==="log")){for(var W=U(V),J={x:0,y:1}[G],X={x:[0,1,2,3],y:[2,3,0,1]}[G],ee=new Float64Array(4*F),re=1/0,ie=-1/0,se=0,fe=0;se<F;se++,fe+=4){var ye=j[se];if(A(ye)){var ge=C[2*se+J],he=W(ye,se),ve=he[0],Ie=he[1];if(A(ve)&&A(Ie)){var xe=ye-ve,Ae=ye+Ie;ee[fe+X[0]]=ge-K.c2l(xe),ee[fe+X[1]]=K.c2l(Ae)-ge,ee[fe+X[2]]=0,ee[fe+X[3]]=0,re=Math.min(re,ye-ve),ie=Math.max(ie,ye+Ie)}}}N[G]={positions:C,errors:ee,_bnds:[re,ie]}}}return B(P,z),B(I,H),N},textPosition:function(E,L,C,P){var I,U=L._length,z={};if(o.hasMarkers(L)){var H=C.font,F=C.align,N=C.baseline;for(z.offset=new Array(U),I=0;I<U;I++){var B=P.sizes?P.sizes[I]:P.size,j=Array.isArray(H)?H[I].size:H.size,K=Array.isArray(F)?F.length>1?F[I]:F[0]:F,G=Array.isArray(N)?N.length>1?N[I]:N[0]:N,V=c[K],W=c[G],J=B?B/.8+1:0,X=-W*J-.5*W;z.offset[I]=[V*J/j,X/j]}}return z}}},47148:function($,R,e){var A=e(71828),k=e(73972),l=e(68645),T=e(42341),x=e(47581),d=e(34098),s=e(67513),t=e(73927),o=e(49508),r=e(11058),n=e(28908),a=e(82410);$.exports=function(i,c,h,f){function b(S,_){return A.coerce(i,c,T,S,_)}var v=!!i.marker&&l.isOpenSymbol(i.marker.symbol),g=d.isBubble(i),y=s(i,c,f,b);if(y){t(i,c,f,b),b("xhoverformat"),b("yhoverformat");var p=y<x.PTS_LINESONLY?"lines+markers":"lines";b("text"),b("hovertext"),b("hovertemplate"),b("mode",p),d.hasLines(c)&&(b("connectgaps"),r(i,c,h,f,b),b("line.shape")),d.hasMarkers(c)&&(o(i,c,h,f,b,{noAngleRef:!0,noStandOff:!0}),b("marker.line.width",v||g?1:0)),d.hasText(c)&&(b("texttemplate"),a(i,c,f,b));var m=(c.line||{}).color,w=(c.marker||{}).color;b("fill"),c.fill!=="none"&&n(i,c,h,b);var u=k.getComponentMethod("errorbars","supplyDefaults");u(i,c,m||w||h,{axis:"y"}),u(i,c,m||w||h,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(c,b)}else c.visible=!1}},5345:function($,R,e){var A=e(71828),k=e(7901),l=e(37822).DESELECTDIM;$.exports={styleTextSelection:function(T){var x,d,s=T[0],t=s.trace,o=s.t,r=o._scene,n=o.index,a=r.selectBatch[n],i=r.unselectBatch[n],c=r.textOptions[n],h=r.textSelectedOptions[n]||{},f=r.textUnselectedOptions[n]||{},b=A.extendFlat({},c);if(a.length||i.length){var v=h.color,g=f.color,y=c.color,p=Array.isArray(y);for(b.color=new Array(t._length),x=0;x<a.length;x++)d=a[x],b.color[d]=v||(p?y[d]:y);for(x=0;x<i.length;x++){d=i[x];var m=p?y[d]:y;b.color[d]=g||(v?m:k.addOpacity(m,l))}}r.glText[n].update(b)}}},68101:function($,R,e){var A=e(8225);$.exports=function(k,l,T){var x=k.i;return"x"in k||(k.x=l._x[x]),"y"in k||(k.y=l._y[x]),A(k,l,T)}},68645:function($,R,e){var A=e(78232);R.isOpenSymbol=function(k){return typeof k=="string"?A.OPEN_RE.test(k):k%200>100},R.isDotSymbol=function(k){return typeof k=="string"?A.DOT_RE.test(k):k>200}},20794:function($,R,e){var A=e(73972),k=e(71828),l=e(34603);function T(x,d,s,t){var o=x.xa,r=x.ya,n=x.distance,a=x.dxy,i=x.index,c={pointNumber:i,x:d[i],y:s[i]};c.tx=Array.isArray(t.text)?t.text[i]:t.text,c.htx=Array.isArray(t.hovertext)?t.hovertext[i]:t.hovertext,c.data=Array.isArray(t.customdata)?t.customdata[i]:t.customdata,c.tp=Array.isArray(t.textposition)?t.textposition[i]:t.textposition;var h=t.textfont;h&&(c.ts=k.isArrayOrTypedArray(h.size)?h.size[i]:h.size,c.tc=Array.isArray(h.color)?h.color[i]:h.color,c.tf=Array.isArray(h.family)?h.family[i]:h.family);var f=t.marker;f&&(c.ms=k.isArrayOrTypedArray(f.size)?f.size[i]:f.size,c.mo=k.isArrayOrTypedArray(f.opacity)?f.opacity[i]:f.opacity,c.mx=k.isArrayOrTypedArray(f.symbol)?f.symbol[i]:f.symbol,c.ma=k.isArrayOrTypedArray(f.angle)?f.angle[i]:f.angle,c.mc=k.isArrayOrTypedArray(f.color)?f.color[i]:f.color);var b=f&&f.line;b&&(c.mlc=Array.isArray(b.color)?b.color[i]:b.color,c.mlw=k.isArrayOrTypedArray(b.width)?b.width[i]:b.width);var v=f&&f.gradient;v&&v.type!=="none"&&(c.mgt=Array.isArray(v.type)?v.type[i]:v.type,c.mgc=Array.isArray(v.color)?v.color[i]:v.color);var g=o.c2p(c.x,!0),y=r.c2p(c.y,!0),p=c.mrc||1,m=t.hoverlabel;m&&(c.hbg=Array.isArray(m.bgcolor)?m.bgcolor[i]:m.bgcolor,c.hbc=Array.isArray(m.bordercolor)?m.bordercolor[i]:m.bordercolor,c.hts=k.isArrayOrTypedArray(m.font.size)?m.font.size[i]:m.font.size,c.htc=Array.isArray(m.font.color)?m.font.color[i]:m.font.color,c.htf=Array.isArray(m.font.family)?m.font.family[i]:m.font.family,c.hnl=k.isArrayOrTypedArray(m.namelength)?m.namelength[i]:m.namelength);var w=t.hoverinfo;w&&(c.hi=Array.isArray(w)?w[i]:w);var u=t.hovertemplate;u&&(c.ht=Array.isArray(u)?u[i]:u);var S={};S[x.index]=c;var _=t._origX,E=t._origY,L=k.extendFlat({},x,{color:l(t,c),x0:g-p,x1:g+p,xLabelVal:_?_[i]:c.x,y0:y-p,y1:y+p,yLabelVal:E?E[i]:c.y,cd:S,distance:n,spikeDistance:a,hovertemplate:c.ht});return c.htx?L.text=c.htx:c.tx?L.text=c.tx:t.text&&(L.text=t.text),k.fillText(c,t,L),A.getComponentMethod("errorbars","hoverInfo")(c,t,L),L}$.exports={hoverPoints:function(x,d,s,t){var o,r,n,a,i,c,h,f,b,v,g=x.cd,y=g[0].t,p=g[0].trace,m=x.xa,w=x.ya,u=y.x,S=y.y,_=m.c2p(d),E=w.c2p(s),L=x.distance;if(y.tree){var C=m.p2c(_-L),P=m.p2c(_+L),I=w.p2c(E-L),U=w.p2c(E+L);o=t==="x"?y.tree.range(Math.min(C,P),Math.min(w._rl[0],w._rl[1]),Math.max(C,P),Math.max(w._rl[0],w._rl[1])):y.tree.range(Math.min(C,P),Math.min(I,U),Math.max(C,P),Math.max(I,U))}else o=y.ids;var z=L;if(t==="x"){var H=!!p.xperiodalignment,F=!!p.yperiodalignment;for(c=0;c<o.length;c++){if(a=u[r=o[c]],h=Math.abs(m.c2p(a)-_),H){var N=m.c2p(p._xStarts[r]),B=m.c2p(p._xEnds[r]);h=_>=Math.min(N,B)&&_<=Math.max(N,B)?0:1/0}if(h<z){if(z=h,i=S[r],f=w.c2p(i)-E,F){var j=w.c2p(p._yStarts[r]),K=w.c2p(p._yEnds[r]);f=E>=Math.min(j,K)&&E<=Math.max(j,K)?0:1/0}v=Math.sqrt(h*h+f*f),n=o[c]}}}else for(c=o.length-1;c>-1;c--)a=u[r=o[c]],i=S[r],h=m.c2p(a)-_,f=w.c2p(i)-E,(b=Math.sqrt(h*h+f*f))<z&&(z=v=b,n=r);return x.index=n,x.distance=z,x.dxy=v,n===void 0?[x]:[T(x,u,S,p)]},calcHover:T}},68868:function($,R,e){var A=e(72156);A.plot=e(26787),$.exports=A},26787:function($,R,e){var A=e(11870),k=e(46075),l=e(3593),T=e(42505),x=e(71828),d=e(64505).selectMode,s=e(79749),t=e(34098),o=e(68687),r=e(5345).styleTextSelection,n={};function a(i,c,h,f){var b=i._size,v=i.width*f,g=i.height*f,y=b.l*f,p=b.b*f,m=b.r*f,w=b.t*f,u=b.w*f,S=b.h*f;return[y+c.domain[0]*u,p+h.domain[0]*S,v-m-(1-c.domain[1])*u,g-w-(1-h.domain[1])*S]}($.exports=function(i,c,h){if(h.length){var f,b,v=i._fullLayout,g=c._scene,y=c.xaxis,p=c.yaxis;if(g)if(s(i,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var m=g.count,w=v._glcanvas.data()[0].regl;if(o(i,c,h),g.dirty){if(g.error2d===!0&&(g.error2d=l(w)),g.line2d===!0&&(g.line2d=k(w)),g.scatter2d===!0&&(g.scatter2d=A(w)),g.fill2d===!0&&(g.fill2d=k(w)),g.glText===!0)for(g.glText=new Array(m),f=0;f<m;f++)g.glText[f]=new T(w);if(g.glText){if(m>g.glText.length){var u=m-g.glText.length;for(f=0;f<u;f++)g.glText.push(new T(w))}else if(m<g.glText.length){var S=g.glText.length-m;g.glText.splice(m,S).forEach(function(ee){ee.destroy()})}for(f=0;f<m;f++)g.glText[f].update(g.textOptions[f])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(ee){if(ee&&ee.positions){for(var re=ee.positions,ie=0;ie<re.length&&(isNaN(re[ie])||isNaN(re[ie+1]));)ie+=2;for(var se=re.length-2;se>ie&&(isNaN(re[se])||isNaN(re[se+1]));)se-=2;ee.positions=re.slice(ie,se+2)}return ee}),g.line2d.update(g.lineOptions)),g.error2d){var _=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(_)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=x.repeat(null,m),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(ee,re){var ie=h[re];if(ee&&ie&&ie[0]&&ie[0].trace){var se,fe,ye=ie[0],ge=ye.trace,he=ye.t,ve=g.lineOptions[re],Ie=[];ge._ownfill&&Ie.push(re),ge._nexttrace&&Ie.push(re+1),Ie.length&&(g.fillOrder[re]=Ie);var xe,Ae,Se=[],Te=ve&&ve.positions||he.positions;if(ge.fill==="tozeroy"){for(xe=0;xe<Te.length&&isNaN(Te[xe+1]);)xe+=2;for(Ae=Te.length-2;Ae>xe&&isNaN(Te[Ae+1]);)Ae-=2;Te[xe+1]!==0&&(Se=[Te[xe],0]),Se=Se.concat(Te.slice(xe,Ae+2)),Te[Ae+1]!==0&&(Se=Se.concat([Te[Ae],0]))}else if(ge.fill==="tozerox"){for(xe=0;xe<Te.length&&isNaN(Te[xe]);)xe+=2;for(Ae=Te.length-2;Ae>xe&&isNaN(Te[Ae]);)Ae-=2;Te[xe]!==0&&(Se=[0,Te[xe+1]]),Se=Se.concat(Te.slice(xe,Ae+2)),Te[Ae]!==0&&(Se=Se.concat([0,Te[Ae+1]]))}else if(ge.fill==="toself"||ge.fill==="tonext"){for(Se=[],se=0,ee.splitNull=!0,fe=0;fe<Te.length;fe+=2)(isNaN(Te[fe])||isNaN(Te[fe+1]))&&((Se=Se.concat(Te.slice(se,fe))).push(Te[se],Te[se+1]),Se.push(null,null),se=fe+2);Se=Se.concat(Te.slice(se)),se&&Se.push(Te[se],Te[se+1])}else{var Q=ge._nexttrace;if(Q){var oe=g.lineOptions[re+1];if(oe){var ce=oe.positions;if(ge.fill==="tonexty"){for(Se=Te.slice(),re=Math.floor(ce.length/2);re--;){var me=ce[2*re],Me=ce[2*re+1];isNaN(me)||isNaN(Me)||Se.push(me,Me)}ee.fill=Q.fillcolor}}}}if(ge._prevtrace&&ge._prevtrace.fill==="tonext"){var Re=g.lineOptions[re-1].positions,Ce=Se.length/2,ze=[se=Ce];for(fe=0;fe<Re.length;fe+=2)(isNaN(Re[fe])||isNaN(Re[fe+1]))&&(ze.push(fe/2+Ce+1),se=fe+2);Se=Se.concat(Re),ee.hole=ze}return ee.fillmode=ge.fill,ee.opacity=ge.opacity,ee.positions=Se,ee}}),g.fill2d.update(g.fillOptions))}var E=v.dragmode,L=d(E),C=v.clickmode.indexOf("select")>-1;for(f=0;f<m;f++){var P=h[f][0],I=P.trace,U=P.t,z=U.index,H=I._length,F=U.x,N=U.y;if(I.selectedpoints||L||C){if(L||(L=!0),I.selectedpoints){var B=g.selectBatch[z]=x.selIndices2selPoints(I),j={};for(b=0;b<B.length;b++)j[B[b]]=1;var K=[];for(b=0;b<H;b++)j[b]||K.push(b);g.unselectBatch[z]=K}var G=U.xpx=new Array(H),V=U.ypx=new Array(H);for(b=0;b<H;b++)G[b]=y.c2p(F[b]),V[b]=p.c2p(N[b])}else U.xpx=U.ypx=null}if(L){if(g.select2d||(g.select2d=A(v._glcanvas.data()[1].regl)),g.scatter2d){var W=new Array(m);for(f=0;f<m;f++)W[f]=g.selectBatch[f].length||g.unselectBatch[f].length?g.markerUnselectedOptions[f]:{};g.scatter2d.update(W)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&h.forEach(function(ee){var re=((ee||[])[0]||{}).trace||{};t.hasText(re)&&r(ee)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var J={viewport:a(v,y,p,i._context.plotGlPixelRatio),range:[(y._rl||y.range)[0],(p._rl||p.range)[0],(y._rl||y.range)[1],(p._rl||p.range)[1]]},X=x.repeat(J,g.count);g.fill2d&&g.fill2d.update(X),g.line2d&&g.line2d.update(X),g.error2d&&g.error2d.update(X.concat(X)),g.scatter2d&&g.scatter2d.update(X),g.select2d&&g.select2d.update(X),g.glText&&g.glText.forEach(function(ee){ee.update(J)})}else g.init()}}).reglPrecompiled=n},38967:function($,R,e){var A=e(71828);$.exports=function(k,l){var T=l._scene,x={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},d={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return l._scene||((T=l._scene={}).init=function(){A.extendFlat(T,d,x)},T.init(),T.update=function(s){var t=A.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var o=0;o<T.count;o++)T.glText[o].update(s)},T.draw=function(){for(var s=T.count,t=T.fill2d,o=T.error2d,r=T.line2d,n=T.scatter2d,a=T.glText,i=T.select2d,c=T.selectBatch,h=T.unselectBatch,f=0;f<s;f++){if(t&&T.fillOrder[f]&&t.draw(T.fillOrder[f]),r&&T.lineOptions[f]&&r.draw(f),o&&(T.errorXOptions[f]&&o.draw(f),T.errorYOptions[f]&&o.draw(f+s)),n&&T.markerOptions[f])if(h[f].length){var b=A.repeat([],T.count);b[f]=h[f],n.draw(b)}else c[f].length||n.draw(f);a[f]&&T.textOptions[f]&&a[f].render()}i&&i.draw(c),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,l._scene=null}),T.dirty||A.extendFlat(T,x),T}},58147:function($,R,e){var A=e(34098),k=e(5345).styleTextSelection;$.exports=function(l,T){var x=l.cd,d=l.xaxis,s=l.yaxis,t=[],o=x[0].trace,r=x[0].t,n=o._length,a=r.x,i=r.y,c=r._scene,h=r.index;if(!c)return t;var f=A.hasText(o),b=A.hasMarkers(o),v=!b&&!f;if(o.visible!==!0||v)return t;var g=[],y=[];if(T!==!1&&!T.degenerate)for(var p=0;p<n;p++)T.contains([r.xpx[p],r.ypx[p]],!1,p,l)?(g.push(p),t.push({pointNumber:p,x:d.c2d(a[p]),y:s.c2d(i[p])})):y.push(p);if(b){var m=c.scatter2d;if(g.length||y.length){if(!c.selectBatch[h].length&&!c.unselectBatch[h].length){var w=new Array(c.count);w[h]=c.markerUnselectedOptions[h],m.update.apply(m,w)}}else{var u=new Array(c.count);u[h]=c.markerOptions[h],m.update.apply(m,u)}}return c.selectBatch[h]=g,c.unselectBatch[h]=y,f&&k(x),t}},99181:function($,R,e){var A=e(5386).f,k=e(5386).s,l=e(19316),T=e(82196),x=e(23585),d=e(9012),s=e(50693),t=e(1426).extendFlat,o=e(30962).overrideAll,r=e(23585),n=l.line,a=l.marker;$.exports=o({lon:l.lon,lat:l.lat,cluster:{enabled:{valType:"boolean"},maxzoom:t({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:t({},a.opacity,{dflt:1})},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:t({},T.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:T.connectgaps,marker:t({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:a.opacity,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode},s("marker")),fill:l.fill,fillcolor:T.fillcolor,textfont:x.layers.symbol.textfont,textposition:x.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:t({},d.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:A()},"calc","nested")},15790:function($,R,e){var A=e(92770),k=e(71828),l=e(50606).BADNUM,T=e(18214),x=e(21081),d=e(91424),s=e(39984),t=e(34098),o=e(13056),r=e(23469).appendArrayPointValue,n=e(63893).NEWLINES,a=e(63893).BR_TAG_ALL;function i(v){return{type:v,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function c(v,g){return k.isArrayOrTypedArray(v)?g?function(y){return A(v[y])?+v[y]:0}:function(y){return v[y]}:v?function(){return v}:h}function h(){return""}function f(v){return v[0]===l}function b(v,g){var y;if(k.isArrayOrTypedArray(v)&&k.isArrayOrTypedArray(g)){y=["step",["get","point_count"],v[0]];for(var p=1;p<v.length;p++)y.push(g[p-1],v[p])}else y=v;return y}$.exports=function(v,g){var y,p=g[0].trace,m=p.visible===!0&&p._length!==0,w=p.fill!=="none",u=t.hasLines(p),S=t.hasMarkers(p),_=t.hasText(p),E=S&&p.marker.symbol==="circle",L=S&&p.marker.symbol!=="circle",C=p.cluster&&p.cluster.enabled,P=i("fill"),I=i("line"),U=i("circle"),z=i("symbol"),H={fill:P,line:I,circle:U,symbol:z};if(!m)return H;if((w||u)&&(y=T.calcTraceToLineCoords(g)),w&&(P.geojson=T.makePolygon(y),P.layout.visibility="visible",k.extendFlat(P.paint,{"fill-color":p.fillcolor})),u&&(I.geojson=T.makeLine(y),I.layout.visibility="visible",k.extendFlat(I.paint,{"line-width":p.line.width,"line-color":p.line.color,"line-opacity":p.opacity})),E){var F=function(j){var K,G,V,W,J=j[0].trace,X=J.marker,ee=J.selectedpoints,re=k.isArrayOrTypedArray(X.color),ie=k.isArrayOrTypedArray(X.size),se=k.isArrayOrTypedArray(X.opacity);function fe(Se){return J.opacity*Se}re&&(G=x.hasColorscale(J,"marker")?x.makeColorScaleFuncFromTrace(X):k.identity),ie&&(V=s(J)),se&&(W=function(Se){return fe(A(Se)?+k.constrain(Se,0,1):0)});var ye,ge,he=[];for(K=0;K<j.length;K++){var ve=j[K],Ie=ve.lonlat;if(!f(Ie)){var xe={};G&&(xe.mcc=ve.mcc=G(ve.mc)),V&&(xe.mrc=ve.mrc=V(ve.ms)),W&&(xe.mo=W(ve.mo)),ee&&(xe.selected=ve.selected||0),he.push({type:"Feature",id:K+1,geometry:{type:"Point",coordinates:Ie},properties:xe})}}if(ee)for(ye=d.makeSelectedPointStyleFns(J),K=0;K<he.length;K++){var Ae=he[K].properties;ye.selectedOpacityFn&&(Ae.mo=fe(ye.selectedOpacityFn(Ae))),ye.selectedColorFn&&(Ae.mcc=ye.selectedColorFn(Ae)),ye.selectedSizeFn&&(Ae.mrc=ye.selectedSizeFn(Ae))}return{geojson:{type:"FeatureCollection",features:he},mcc:re||ye&&ye.selectedColorFn?{type:"identity",property:"mcc"}:X.color,mrc:ie||ye&&ye.selectedSizeFn?{type:"identity",property:"mrc"}:(ge=X.size,ge/2),mo:se||ye&&ye.selectedOpacityFn?{type:"identity",property:"mo"}:fe(X.opacity)}}(g);U.geojson=F.geojson,U.layout.visibility="visible",C&&(U.filter=["!",["has","point_count"]],H.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":b(p.cluster.color,p.cluster.step),"circle-radius":b(p.cluster.size,p.cluster.step),"circle-opacity":b(p.cluster.opacity,p.cluster.step)}},H.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),k.extendFlat(U.paint,{"circle-color":F.mcc,"circle-radius":F.mrc,"circle-opacity":F.mo})}if(E&&C&&(U.filter=["!",["has","point_count"]]),(L||_)&&(z.geojson=function(j,K){for(var G=K._fullLayout,V=j[0].trace,W=V.marker||{},J=W.symbol,X=W.angle,ee=J!=="circle"?c(J):h,re=X!=="auto"?c(X,!0):h,ie=t.hasText(V)?c(V.text):h,se=[],fe=0;fe<j.length;fe++){var ye=j[fe];if(!f(ye.lonlat)){var ge,he=V.texttemplate;if(he){var ve=Array.isArray(he)?he[fe]||"":he,Ie=V._module.formatLabels(ye,V,G),xe={};r(xe,V,ye.i);var Ae=V._meta||{};ge=k.texttemplateString(ve,Ie,G._d3locale,xe,ye,Ae)}else ge=ie(fe);ge&&(ge=ge.replace(n,"").replace(a,`
`)),se.push({type:"Feature",geometry:{type:"Point",coordinates:ye.lonlat},properties:{symbol:ee(fe),angle:re(fe),text:ge}})}}return{type:"FeatureCollection",features:se}}(g,v),k.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),L&&(k.extendFlat(z.layout,{"icon-size":p.marker.size/10}),"angle"in p.marker&&p.marker.angle!=="auto"&&k.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=p.marker.allowoverlap,k.extendFlat(z.paint,{"icon-opacity":p.opacity*p.marker.opacity,"icon-color":p.marker.color})),_)){var N=(p.marker||{}).size,B=o(p.textposition,N);k.extendFlat(z.layout,{"text-size":p.textfont.size,"text-anchor":B.anchor,"text-offset":B.offset}),k.extendFlat(z.paint,{"text-color":p.textfont.color,"text-opacity":p.opacity})}return H}},76645:function($,R,e){var A=e(71828),k=e(34098),l=e(49508),T=e(11058),x=e(82410),d=e(28908),s=e(99181);$.exports=function(t,o,r,n){function a(p,m){return A.coerce(t,o,s,p,m)}function i(p,m){return A.coerce2(t,o,s,p,m)}var c=function(p,m,w){var u=w("lon")||[],S=w("lat")||[],_=Math.min(u.length,S.length);return m._length=_,_}(0,o,a);if(c){if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),k.hasLines(o)&&(T(t,o,r,n,a,{noDash:!0}),a("connectgaps")),k.hasMarkers(o)){l(t,o,r,n,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var h=o.marker;h.symbol!=="circle"&&(A.isArrayOrTypedArray(h.size)&&(h.size=h.size[0]),A.isArrayOrTypedArray(h.color)&&(h.color=h.color[0]))}var f=i("cluster.maxzoom"),b=i("cluster.step"),v=i("cluster.color",o.marker&&o.marker.color||r),g=i("cluster.size"),y=i("cluster.opacity");a("cluster.enabled",f!==!1||b!==!1||v!==!1||g!==!1||y!==!1),k.hasText(o)&&x(t,o,n,a,{noSelect:!0}),a("fill"),o.fill!=="none"&&d(t,o,r,a),A.coerceSelectionMarkerOpacity(o,a)}else o.visible=!1}},53353:function($){$.exports=function(R,e){return R.lon=e.lon,R.lat=e.lat,R}},15636:function($,R,e){var A=e(89298);$.exports=function(k,l,T){var x={},d=T[l.subplot]._subplot.mockAxis,s=k.lonlat;return x.lonLabel=A.tickText(d,d.c2l(s[0]),!0).text,x.latLabel=A.tickText(d,d.c2l(s[1]),!0).text,x}},28178:function($,R,e){var A=e(30211),k=e(71828),l=e(34603),T=k.fillText,x=e(50606).BADNUM,d=e(77734).traceLayerPrefix;function s(t,o,r){if(!t.hovertemplate){var n=(o.hi||t.hoverinfo).split("+"),a=n.indexOf("all")!==-1,i=n.indexOf("lon")!==-1,c=n.indexOf("lat")!==-1,h=o.lonlat,f=[];return a||i&&c?f.push("("+b(h[1])+", "+b(h[0])+")"):i?f.push(r.lon+b(h[0])):c&&f.push(r.lat+b(h[1])),(a||n.indexOf("text")!==-1)&&T(o,t,f),f.join("<br>")}function b(v){return v+"°"}}$.exports={hoverPoints:function(t,o,r){var n=t.cd,a=n[0].trace,i=t.xa,c=t.ya,h=t.subplot,f=[],b=d+a.uid+"-circle",v=a.cluster&&a.cluster.enabled;if(v){var g=h.map.queryRenderedFeatures(null,{layers:[b]});f=g.map(function(P){return P.id})}var y=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),p=o-y;if(A.getClosest(n,function(P){var I=P.lonlat;if(I[0]===x||v&&f.indexOf(P.i+1)===-1)return 1/0;var U=k.modHalf(I[0],360),z=I[1],H=h.project([U,z]),F=H.x-i.c2p([p,z]),N=H.y-c.c2p([U,r]),B=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(F*F+N*N)-B,1-3/B)},t),t.index!==!1){var m=n[t.index],w=m.lonlat,u=[k.modHalf(w[0],360)+y,w[1]],S=i.c2p(u),_=c.c2p(u),E=m.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=_-E,t.y1=_+E;var L={};L[a.subplot]={_subplot:h};var C=a._module.formatLabels(m,a,L);return t.lonLabel=C.lonLabel,t.latLabel=C.latLabel,t.color=l(a,m),t.extraText=s(a,m,n[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:s}},20467:function($,R,e){$.exports={attributes:e(99181),supplyDefaults:e(76645),colorbar:e(4898),formatLabels:e(15636),calc:e(84622),plot:e(86951),hoverPoints:e(28178).hoverPoints,eventData:e(53353),selectPoints:e(86387),styleOnSelect:function(A,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function($,R,e){var A=e(71828),k=e(15790),l=e(77734).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function x(s,t,o,r){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=o,this.isHidden=r,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:l+t+"-fill",line:l+t+"-line",circle:l+t+"-circle",symbol:l+t+"-symbol",cluster:l+t+"-cluster",clusterCount:l+t+"-cluster-count"},this.below=null}var d=x.prototype;d.addSource=function(s,t,o){var r={type:"geojson",data:t.geojson};o&&o.enabled&&A.extendFlat(r,{cluster:!0,clusterMaxZoom:o.maxzoom}),this.subplot.map.addSource(this.sourceIds[s],r)},d.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},d.addLayer=function(s,t,o){var r={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(r.filter=t.filter),this.subplot.addLayer(r,o)},d.update=function(s){var t=s[0].trace,o=this.subplot,r=o.map,n=k(o.gd,s),a=o.belowLookup["trace-"+this.uid],i=!(!t.cluster||!t.cluster.enabled),c=!!this.clusterEnabled,h=this;function f(p){c?function(m){for(var w=T.cluster,u=w.length-1;u>=0;u--){var S=w[u];r.removeLayer(h.layerIds[S])}m||r.removeSource(h.sourceIds.circle)}(p):function(m){for(var w=T.nonCluster,u=w.length-1;u>=0;u--){var S=w[u];r.removeLayer(h.layerIds[S]),m||r.removeSource(h.sourceIds[S])}}(p)}function b(p){i?function(m){m||h.addSource("circle",n.circle,t.cluster);for(var w=T.cluster,u=0;u<w.length;u++){var S=w[u],_=n[S];h.addLayer(S,_,a)}}(p):function(m){for(var w=T.nonCluster,u=0;u<w.length;u++){var S=w[u],_=n[S];m||h.addSource(S,_),h.addLayer(S,_,a)}}(p)}function v(){for(var p=i?T.cluster:T.nonCluster,m=0;m<p.length;m++){var w=p[m],u=n[w];u&&(o.setOptions(h.layerIds[w],"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&(w!=="cluster"&&h.setSourceData(w,u),o.setOptions(h.layerIds[w],"setPaintProperty",u.paint)))}}var g=this.isHidden,y=t.visible!==!0;y?g||f():g?y||b():c!==i?(f(),b()):(this.below!==a&&(f(!0),b(!0)),v()),this.clusterEnabled=i,this.isHidden=y,this.below=a,s[0].trace._glTrace=this},d.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,o=t.length-1;o>=0;o--){var r=t[o];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},$.exports=function(s,t){var o,r,n,a=t[0].trace,i=a.cluster&&a.cluster.enabled,c=a.visible!==!0,h=new x(s,a.uid,i,c),f=k(s.gd,t),b=h.below=s.belowLookup["trace-"+a.uid];if(i)for(h.addSource("circle",f.circle,a.cluster),o=0;o<T.cluster.length;o++)n=f[r=T.cluster[o]],h.addLayer(r,n,b);else for(o=0;o<T.nonCluster.length;o++)n=f[r=T.nonCluster[o]],h.addSource(r,n,a.cluster),h.addLayer(r,n,b);return t[0].trace._glTrace=h,h}},86387:function($,R,e){var A=e(71828),k=e(34098),l=e(50606).BADNUM;$.exports=function(T,x){var d,s=T.cd,t=T.xaxis,o=T.yaxis,r=[],n=s[0].trace;if(!k.hasMarkers(n))return[];if(x===!1)for(d=0;d<s.length;d++)s[d].selected=0;else for(d=0;d<s.length;d++){var a=s[d],i=a.lonlat;if(i[0]!==l){var c=[A.modHalf(i[0],360),i[1]],h=[t.c2p(c),o.c2p(c)];x.contains(h,null,d,T)?(r.push({pointNumber:d,lon:i[0],lat:i[1]}),a.selected=1):a.selected=0}}return r}},81245:function($,R,e){var A=e(5386).f,k=e(5386).s,l=e(1426).extendFlat,T=e(82196),x=e(9012),d=T.line;$.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},x.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:A(),selected:T.selected,unselected:T.unselected}},26442:function($,R,e){var A=e(92770),k=e(50606).BADNUM,l=e(89298),T=e(36922),x=e(75225),d=e(66279),s=e(47761).calcMarkerSize;$.exports=function(t,o){for(var r=t._fullLayout,n=o.subplot,a=r[n].radialaxis,i=r[n].angularaxis,c=a.makeCalcdata(o,"r"),h=i.makeCalcdata(o,"theta"),f=o._length,b=new Array(f),v=0;v<f;v++){var g=c[v],y=h[v],p=b[v]={};A(g)&&A(y)?(p.r=g,p.theta=y):p.r=k}var m=s(o,f);return o._extremes.x=l.findExtremes(a,c,{ppad:m}),T(t,o),x(b,o),d(b,o),b}},22184:function($,R,e){var A=e(71828),k=e(34098),l=e(49508),T=e(11058),x=e(94039),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(81245);function r(n,a,i,c){var h,f=c("r"),b=c("theta");if(f)b?h=Math.min(f.length,b.length):(h=f.length,c("theta0"),c("dtheta"));else{if(!b)return 0;h=a.theta.length,c("r0"),c("dr")}return a._length=h,h}$.exports={handleRThetaDefaults:r,supplyDefaults:function(n,a,i,c){function h(v,g){return A.coerce(n,a,o,v,g)}var f=r(0,a,0,h);if(f){h("thetaunit"),h("mode",f<t?"lines+markers":"lines"),h("text"),h("hovertext"),a.hoveron!=="fills"&&h("hovertemplate"),k.hasLines(a)&&(T(n,a,i,c,h,{backoff:!0}),x(n,a,h),h("connectgaps")),k.hasMarkers(a)&&l(n,a,i,c,h,{gradient:!0}),k.hasText(a)&&(h("texttemplate"),d(n,a,c,h));var b=[];(k.hasMarkers(a)||k.hasText(a))&&(h("cliponaxis"),h("marker.maxdisplayed"),b.push("points")),h("fill"),a.fill!=="none"&&(s(n,a,i,h),k.hasLines(a)||x(n,a,h)),a.fill!=="tonext"&&a.fill!=="toself"||b.push("fills"),h("hoveron",b.join("+")||"points"),A.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1}}},98608:function($,R,e){var A=e(71828),k=e(89298);$.exports=function(l,T,x){var d,s,t={},o=x[T.subplot]._subplot;o?(d=o.radialAxis,s=o.angularAxis):(d=(o=x[T.subplot]).radialaxis,s=o.angularaxis);var r=d.c2l(l.r);t.rLabel=k.tickText(d,r,!0).text;var n=s.thetaunit==="degrees"?A.rad2deg(l.theta):l.theta;return t.thetaLabel=k.tickText(s,n,!0).text,t}},59150:function($,R,e){var A=e(33720);function k(l,T,x,d){var s=x.radialAxis,t=x.angularAxis;s._hovertitle="r",t._hovertitle="θ";var o={};o[T.subplot]={_subplot:x};var r=T._module.formatLabels(l,T,o);d.rLabel=r.rLabel,d.thetaLabel=r.thetaLabel;var n=l.hi||T.hoverinfo,a=[];function i(h,f){a.push(h._hovertitle+": "+f)}if(!T.hovertemplate){var c=n.split("+");c.indexOf("all")!==-1&&(c=["r","theta","text"]),c.indexOf("r")!==-1&&i(s,d.rLabel),c.indexOf("theta")!==-1&&i(t,d.thetaLabel),c.indexOf("text")!==-1&&d.text&&(a.push(d.text),delete d.text),d.extraText=a.join("<br>")}}$.exports={hoverPoints:function(l,T,x,d){var s=A(l,T,x,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var o=l.subplot,r=t.cd[t.index],n=t.trace;if(o.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,o,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},91271:function($,R,e){$.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(81245),supplyDefaults:e(22184).supplyDefaults,colorbar:e(4898),formatLabels:e(98608),calc:e(26442),plot:e(45162),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(59150).hoverPoints,selectPoints:e(98002),meta:{}}},45162:function($,R,e){var A=e(32663),k=e(50606).BADNUM;$.exports=function(l,T,x){for(var d=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,t=T.yaxis,o={xaxis:s,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,n=T.angularAxis,a=0;a<x.length;a++)for(var i=x[a],c=0;c<i.length;c++){c===0&&(i[0].trace._xA=s,i[0].trace._yA=t);var h=i[c],f=h.r;if(f===k)h.x=h.y=k;else{var b=r.c2g(f),v=n.c2g(h.theta);h.x=b*Math.cos(v),h.y=b*Math.sin(v)}}A(l,o,x,d)}},53286:function($,R,e){var A=e(81245),k=e(42341),l=e(5386).s;$.exports={mode:A.mode,r:A.r,theta:A.theta,r0:A.r0,dr:A.dr,theta0:A.theta0,dtheta:A.dtheta,thetaunit:A.thetaunit,text:A.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:A.hovertext,hovertemplate:A.hovertemplate,line:k.line,connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:A.hoverinfo,selected:A.selected,unselected:A.unselected}},65746:function($,R,e){$.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(53286),supplyDefaults:e(75485),colorbar:e(4898),formatLabels:e(46255),calc:e(37499),hoverPoints:e(29347).hoverPoints,selectPoints:e(58147),meta:{}}},37499:function($,R,e){var A=e(36922),k=e(47761).calcMarkerSize,l=e(19635),T=e(89298),x=e(78232).TOO_MANY_POINTS;$.exports=function(d,s){var t=d._fullLayout,o=s.subplot,r=t[o].radialaxis,n=t[o].angularaxis,a=s._r=r.makeCalcdata(s,"r"),i=s._theta=n.makeCalcdata(s,"theta"),c=s._length,h={};c<a.length&&(a=a.slice(0,c)),c<i.length&&(i=i.slice(0,c)),h.r=a,h.theta=i,A(d,s);var f,b=h.opts=l.style(d,s);return c<x?f=k(s,c):b.marker&&(f=2*(b.marker.sizeAvg||Math.max(b.marker.size,3))),s._extremes.x=T.findExtremes(r,a,{ppad:f}),[{x:!1,y:!1,t:h,trace:s}]}},75485:function($,R,e){var A=e(71828),k=e(34098),l=e(22184).handleRThetaDefaults,T=e(49508),x=e(11058),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(53286);$.exports=function(r,n,a,i){function c(f,b){return A.coerce(r,n,o,f,b)}var h=l(r,n,i,c);h?(c("thetaunit"),c("mode",h<t?"lines+markers":"lines"),c("text"),c("hovertext"),n.hoveron!=="fills"&&c("hovertemplate"),k.hasLines(n)&&(x(r,n,a,i,c),c("connectgaps")),k.hasMarkers(n)&&T(r,n,a,i,c,{noAngleRef:!0,noStandOff:!0}),k.hasText(n)&&(c("texttemplate"),d(r,n,i,c)),c("fill"),n.fill!=="none"&&s(r,n,a,c),A.coerceSelectionMarkerOpacity(n,c)):n.visible=!1}},46255:function($,R,e){var A=e(98608);$.exports=function(k,l,T){var x=k.i;return"r"in k||(k.r=l._r[x]),"theta"in k||(k.theta=l._theta[x]),A(k,l,T)}},29347:function($,R,e){var A=e(20794),k=e(59150).makeHoverPointText;$.exports={hoverPoints:function(l,T,x,d){var s=l.cd[0].t,t=s.r,o=s.theta,r=A.hoverPoints(l,T,x,d);if(r&&r[0].index!==!1){var n=r[0];if(n.index===void 0)return r;var a=l.subplot,i=n.cd[n.index],c=n.trace;if(i.r=t[n.index],i.theta=o[n.index],a.isPtInside(i))return n.xLabelVal=void 0,n.yLabelVal=void 0,k(i,c,a,n),r}}}},21461:function($,R,e){var A=e(65746);A.plot=e(49741),$.exports=A},49741:function($,R,e){var A=e(88294),k=e(92770),l=e(26787),T=e(38967),x=e(19635),d=e(71828),s=e(78232).TOO_MANY_POINTS;$.exports=function(t,o,r){if(r.length){var n=o.radialAxis,a=o.angularAxis,i=T(t,o);return r.forEach(function(c){if(c&&c[0]&&c[0].trace){var h,f=c[0],b=f.trace,v=f.t,g=b._length,y=v.r,p=v.theta,m=v.opts,w=y.slice(),u=p.slice();for(h=0;h<y.length;h++)o.isPtInside({r:y[h],theta:p[h]})||(w[h]=NaN,u[h]=NaN);var S=new Array(2*g),_=Array(g),E=Array(g);for(h=0;h<g;h++){var L,C,P=w[h];if(k(P)){var I=n.c2g(P),U=a.c2g(u[h],b.thetaunit);L=I*Math.cos(U),C=I*Math.sin(U)}else L=C=NaN;_[h]=S[2*h]=L,E[h]=S[2*h+1]=C}v.tree=A(S),m.marker&&g>=s&&(m.marker.cluster=v.tree),m.marker&&(m.markerSel.positions=m.markerUnsel.positions=m.marker.positions=S),m.line&&S.length>1&&d.extendFlat(m.line,x.linePositions(t,b,S)),m.text&&(d.extendFlat(m.text,{positions:S},x.textPosition(t,b,m.text,m.marker)),d.extendFlat(m.textSel,{positions:S},x.textPosition(t,b,m.text,m.markerSel)),d.extendFlat(m.textUnsel,{positions:S},x.textPosition(t,b,m.text,m.markerUnsel))),m.fill&&!i.fill2d&&(i.fill2d=!0),m.marker&&!i.scatter2d&&(i.scatter2d=!0),m.line&&!i.line2d&&(i.line2d=!0),m.text&&!i.glText&&(i.glText=!0),i.lineOptions.push(m.line),i.fillOptions.push(m.fill),i.markerOptions.push(m.marker),i.markerSelectedOptions.push(m.markerSel),i.markerUnselectedOptions.push(m.markerUnsel),i.textOptions.push(m.text),i.textSelectedOptions.push(m.textSel),i.textUnselectedOptions.push(m.textUnsel),i.selectBatch.push([]),i.unselectBatch.push([]),v.x=_,v.y=E,v.rawx=_,v.rawy=E,v.r=y,v.theta=p,v.positions=S,v._scene=i,v.index=i.count,i.count++}}),l(t,o,r)}},$.exports.reglPrecompiled={}},48300:function($,R,e){var A=e(5386).f,k=e(5386).s,l=e(1426).extendFlat,T=e(82196),x=e(9012),d=T.line;$.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},x.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:A(),selected:T.selected,unselected:T.unselected}},30621:function($,R,e){var A=e(92770),k=e(50606).BADNUM,l=e(36922),T=e(75225),x=e(66279),d=e(47761).calcMarkerSize;$.exports=function(s,t){for(var o=s._fullLayout,r=t.subplot,n=o[r].realaxis,a=o[r].imaginaryaxis,i=n.makeCalcdata(t,"real"),c=a.makeCalcdata(t,"imag"),h=t._length,f=new Array(h),b=0;b<h;b++){var v=i[b],g=c[b],y=f[b]={};A(v)&&A(g)?(y.real=v,y.imag=g):y.real=k}return d(t,h),l(s,t),T(f,t),x(f,t),f}},65269:function($,R,e){var A=e(71828),k=e(34098),l=e(49508),T=e(11058),x=e(94039),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(48300);$.exports=function(r,n,a,i){function c(b,v){return A.coerce(r,n,o,b,v)}var h=function(b,v,g,y){var p,m=y("real"),w=y("imag");return m&&w&&(p=Math.min(m.length,w.length)),v._length=p,p}(0,n,0,c);if(h){c("mode",h<t?"lines+markers":"lines"),c("text"),c("hovertext"),n.hoveron!=="fills"&&c("hovertemplate"),k.hasLines(n)&&(T(r,n,a,i,c,{backoff:!0}),x(r,n,c),c("connectgaps")),k.hasMarkers(n)&&l(r,n,a,i,c,{gradient:!0}),k.hasText(n)&&(c("texttemplate"),d(r,n,i,c));var f=[];(k.hasMarkers(n)||k.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),f.push("points")),c("fill"),n.fill!=="none"&&(s(r,n,a,c),k.hasLines(n)||x(r,n,c)),n.fill!=="tonext"&&n.fill!=="toself"||f.push("fills"),c("hoveron",f.join("+")||"points"),A.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},62047:function($,R,e){var A=e(89298);$.exports=function(k,l,T){var x={},d=T[l.subplot]._subplot;return x.realLabel=A.tickText(d.radialAxis,k.real,!0).text,x.imagLabel=A.tickText(d.angularAxis,k.imag,!0).text,x}},11350:function($,R,e){var A=e(33720);function k(l,T,x,d){var s=x.radialAxis,t=x.angularAxis;s._hovertitle="real",t._hovertitle="imag";var o={};o[T.subplot]={_subplot:x};var r=T._module.formatLabels(l,T,o);d.realLabel=r.realLabel,d.imagLabel=r.imagLabel;var n=l.hi||T.hoverinfo,a=[];function i(h,f){a.push(h._hovertitle+": "+f)}if(!T.hovertemplate){var c=n.split("+");c.indexOf("all")!==-1&&(c=["real","imag","text"]),c.indexOf("real")!==-1&&i(s,d.realLabel),c.indexOf("imag")!==-1&&i(t,d.imagLabel),c.indexOf("text")!==-1&&d.text&&(a.push(d.text),delete d.text),d.extraText=a.join("<br>")}}$.exports={hoverPoints:function(l,T,x,d){var s=A(l,T,x,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var o=l.subplot,r=t.cd[t.index],n=t.trace;if(o.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,o,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},85956:function($,R,e){$.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(48300),supplyDefaults:e(65269),colorbar:e(4898),formatLabels:e(62047),calc:e(30621),plot:e(12480),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(11350).hoverPoints,selectPoints:e(98002),meta:{}}},12480:function($,R,e){var A=e(32663),k=e(50606).BADNUM,l=e(23893).smith;$.exports=function(T,x,d){for(var s=x.layers.frontplot.select("g.scatterlayer"),t=x.xaxis,o=x.yaxis,r={xaxis:t,yaxis:o,plot:x.framework,layerClipId:x._hasClipOnAxisFalse?x.clipIds.forTraces:null},n=0;n<d.length;n++)for(var a=d[n],i=0;i<a.length;i++){i===0&&(a[0].trace._xA=t,a[0].trace._yA=o);var c=a[i],h=c.real;if(h===k)c.x=c.y=k;else{var f=l([h,c.imag]);c.x=f[0],c.y=f[1]}}A(T,r,d,s)}},50413:function($,R,e){var A=e(5386).f,k=e(5386).s,l=e(82196),T=e(9012),x=e(50693),d=e(79952).P,s=e(1426).extendFlat,t=l.marker,o=l.line,r=t.line;$.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:s({},l.hovertext,{}),line:{color:o.color,width:o.width,dash:d,backoff:o.backoff,shape:s({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:l.connectgaps,cliponaxis:l.cliponaxis,fill:s({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:s({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:t.angleref,standoff:t.standoff,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:r.width,editType:"calc"},x("marker.line")),gradient:t.gradient,editType:"calc"},x("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:l.hoveron,hovertemplate:A()}},54337:function($,R,e){var A=e(92770),k=e(36922),l=e(75225),T=e(66279),x=e(47761).calcMarkerSize,d=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};$.exports=function(t,o){var r,n,a,i,c,h,f=t._fullLayout[o.subplot].sum,b=o.sum||f,v={a:o.a,b:o.b,c:o.c};for(r=0;r<d.length;r++)if(!v[a=d[r]]){for(c=v[s[a][0]],h=v[s[a][1]],i=new Array(c.length),n=0;n<c.length;n++)i[n]=b-c[n]-h[n];v[a]=i}var g,y,p,m,w,u,S=o._length,_=new Array(S);for(r=0;r<S;r++)g=v.a[r],y=v.b[r],p=v.c[r],A(g)&&A(y)&&A(p)?((m=f/((g=+g)+(y=+y)+(p=+p)))!=1&&(g*=m,y*=m,p*=m),u=g,w=p-y,_[r]={x:w,y:u,a:g,b:y,c:p}):_[r]={x:!1,y:!1};return x(o,S),k(t,o),l(_,o),T(_,o),_}},46008:function($,R,e){var A=e(71828),k=e(47581),l=e(34098),T=e(49508),x=e(11058),d=e(94039),s=e(82410),t=e(28908),o=e(50413);$.exports=function(r,n,a,i){function c(y,p){return A.coerce(r,n,o,y,p)}var h,f=c("a"),b=c("b"),v=c("c");if(f?(h=f.length,b?(h=Math.min(h,b.length),v&&(h=Math.min(h,v.length))):h=v?Math.min(h,v.length):0):b&&v&&(h=Math.min(b.length,v.length)),h){n._length=h,c("sum"),c("text"),c("hovertext"),n.hoveron!=="fills"&&c("hovertemplate"),c("mode",h<k.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(x(r,n,a,i,c,{backoff:!0}),d(r,n,c),c("connectgaps")),l.hasMarkers(n)&&T(r,n,a,i,c,{gradient:!0}),l.hasText(n)&&(c("texttemplate"),s(r,n,i,c));var g=[];(l.hasMarkers(n)||l.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),g.push("points")),c("fill"),n.fill!=="none"&&(t(r,n,a,c),l.hasLines(n)||d(r,n,c)),n.fill!=="tonext"&&n.fill!=="toself"||g.push("fills"),c("hoveron",g.join("+")||"points"),A.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},4524:function($){$.exports=function(R,e,A,k,l){if(e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),k[l]){var T=k[l];R.a=T.a,R.b=T.b,R.c=T.c}else R.a=e.a,R.b=e.b,R.c=e.c;return R}},93645:function($,R,e){var A=e(89298);$.exports=function(k,l,T){var x={},d=T[l.subplot]._subplot;return x.aLabel=A.tickText(d.aaxis,k.a,!0).text,x.bLabel=A.tickText(d.baxis,k.b,!0).text,x.cLabel=A.tickText(d.caxis,k.c,!0).text,x}},47250:function($,R,e){var A=e(33720);$.exports=function(k,l,T,x){var d=A(k,l,T,x);if(d&&d[0].index!==!1){var s=d[0];if(s.index===void 0){var t=1-s.y0/k.ya._length,o=k.xa._length,r=o*t/2,n=o-r;return s.x0=Math.max(Math.min(s.x0,n),r),s.x1=Math.max(Math.min(s.x1,n),r),d}var a=s.cd[s.index],i=s.trace,c=s.subplot;s.a=a.a,s.b=a.b,s.c=a.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var h={};h[i.subplot]={_subplot:c};var f=i._module.formatLabels(a,i,h);s.aLabel=f.aLabel,s.bLabel=f.bLabel,s.cLabel=f.cLabel;var b=a.hi||i.hoverinfo,v=[];if(!i.hovertemplate){var g=b.split("+");g.indexOf("all")!==-1&&(g=["a","b","c"]),g.indexOf("a")!==-1&&y(c.aaxis,s.aLabel),g.indexOf("b")!==-1&&y(c.baxis,s.bLabel),g.indexOf("c")!==-1&&y(c.caxis,s.cLabel)}return s.extraText=v.join("<br>"),s.hovertemplate=i.hovertemplate,d}function y(p,m){v.push(p._hovertitle+": "+m)}}},52979:function($,R,e){$.exports={attributes:e(50413),supplyDefaults:e(46008),colorbar:e(4898),formatLabels:e(93645),calc:e(54337),plot:e(7507),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(47250),selectPoints:e(98002),eventData:e(4524),moduleType:"trace",name:"scatterternary",basePlotModule:e(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function($,R,e){var A=e(32663);$.exports=function(k,l,T){var x=l.plotContainer;x.select(".scatterlayer").selectAll("*").remove();for(var d=l.xaxis,s=l.yaxis,t={xaxis:d,yaxis:s,plot:x,layerClipId:l._hasClipOnAxisFalse?l.clipIdRelative:null},o=l.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var n=T[r];n.length&&(n[0].trace._xA=d,n[0].trace._yA=s)}A(k,t,T,o)}},46880:function($,R,e){var A=e(82196),k=e(50693),l=e(12663).axisHoverFormat,T=e(5386).f,x=e(42341),d=e(85555).idRegex,s=e(44467).templatedArray,t=e(1426).extendFlat,o=A.marker,r=o.line,n=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},r.width,{editType:"calc"}),editType:"calc"}),a=t(k("marker"),{symbol:o.symbol,angle:o.angle,size:t({},o.size,{editType:"markerSize"}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:n,editType:"calc"});function i(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:d[c],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",$.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},x.text,{}),hovertext:t({},x.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),marker:a,xaxes:i("x"),yaxes:i("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:x.selected.marker,editType:"calc"},unselected:{marker:x.unselected.marker,editType:"calc"},opacity:x.opacity}},65017:function($,R,e){var A=e(73972),k=e(83312);$.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(46880),supplyDefaults:e(25784),colorbar:e(4898),calc:e(87625),plot:e(79410),hoverPoints:e(8567).hoverPoints,selectPoints:e(8689),editStyle:e(28801),meta:{}},A.register(k)},16947:function($,R,e){var A=e(46075),k=e(73972),l=e(79749),T=e(27659).a0,x=e(93612),d=e(41675).getFromId,s=e(89298).shouldShowZeroLine,t="splom",o={};function r(a,i,c){for(var h=c.matrixOptions.data.length,f=i._visibleDims,b=c.viewOpts.ranges=new Array(h),v=0;v<f.length;v++){var g=f[v],y=b[v]=new Array(4),p=d(a,i._diag[g][0]);p&&(y[0]=p.r2l(p.range[0]),y[2]=p.r2l(p.range[1]));var m=d(a,i._diag[g][1]);m&&(y[1]=m.r2l(m.range[0]),y[3]=m.r2l(m.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:b},{ranges:b}):c.matrix.update({ranges:b})}function n(a){var i=a._fullLayout,c=i._glcanvas.data()[0].regl,h=i._splomGrid;h||(h=i._splomGrid=A(c)),h.update(function(f){var b,v=f._context.plotGlPixelRatio,g=f._fullLayout,y=g._size,p=[0,0,g.width*v,g.height*v],m={};function w(j,K,G,V,W,J){G*=v,V*=v,W*=v,J*=v;var X=K[j+"color"],ee=K[j+"width"],re=String(X+ee);re in m?m[re].data.push(NaN,NaN,G,V,W,J):m[re]={data:[G,V,W,J],join:"rect",thickness:ee*v,color:X,viewport:p,range:p,overlay:!1}}for(b in g._splomSubplots){var u,S,_=g._plots[b],E=_.xaxis,L=_.yaxis,C=E._gridVals,P=L._gridVals,I=E._offset,U=E._length,z=L._length,H=y.b+L.domain[0]*y.h,F=-L._m,N=-F*L.r2l(L.range[0],L.calendar);if(E.showgrid)for(b=0;b<C.length;b++)u=I+E.l2p(C[b].x),w("grid",E,u,H,u,H+z);if(L.showgrid)for(b=0;b<P.length;b++)w("grid",L,I,S=H+N+F*P[b].x,I+U,S);s(f,E,L)&&(u=I+E.l2p(0),w("zeroline",E,u,H,u,H+z)),s(f,L,E)&&w("zeroline",L,I,S=H+N+0,I+U,S)}var B=[];for(b in m)B.push(m[b]);return B}(a))}$.exports={name:t,attr:x.attr,attrRegex:x.attrRegex,layoutAttributes:x.layoutAttributes,supplyLayoutDefaults:x.supplyLayoutDefaults,drawFramework:x.drawFramework,plot:function(a){var i=a._fullLayout,c=k.getModule(t),h=T(a.calcdata,c)[0];l(a,["ANGLE_instanced_arrays","OES_element_index_uint"],o)&&(i._hasOnlyLargeSploms&&n(a),c.plot(a,{},h))},drag:function(a){var i=a.calcdata,c=a._fullLayout;c._hasOnlyLargeSploms&&n(a);for(var h=0;h<i.length;h++){var f=i[h][0].trace,b=c._splomScenes[f.uid];f.type==="splom"&&b&&b.matrix&&r(a,f,b)}},updateGrid:n,clean:function(a,i,c,h){var f,b={};if(h._splomScenes){for(f=0;f<a.length;f++){var v=a[f];v.type==="splom"&&(b[v.uid]=1)}for(f=0;f<c.length;f++){var g=c[f];if(!b[g.uid]){var y=h._splomScenes[g.uid];y&&y.destroy&&y.destroy(),h._splomScenes[g.uid]=null,delete h._splomScenes[g.uid]}}}Object.keys(h._splomScenes||{}).length===0&&delete h._splomScenes,h._splomGrid&&!i._hasOnlyLargeSploms&&h._hasOnlyLargeSploms&&(h._splomGrid.destroy(),h._splomGrid=null,delete h._splomGrid),x.clean(a,i,c,h)},updateFx:x.updateFx,toSVG:x.toSVG,reglPrecompiled:o}},87625:function($,R,e){var A=e(71828),k=e(41675),l=e(47761).calcMarkerSize,T=e(47761).calcAxisExpansion,x=e(36922),d=e(19635).markerSelection,s=e(19635).markerStyle,t=e(10164),o=e(50606).BADNUM,r=e(78232).TOO_MANY_POINTS;$.exports=function(n,a){var i,c,h,f,b,v,g=a.dimensions,y=a._length,p={},m=p.cdata=[],w=p.data=[],u=a._visibleDims=[];function S(E,L){for(var C=E.makeCalcdata({v:L.values,vcalendar:a.calendar},"v"),P=0;P<C.length;P++)C[P]=C[P]===o?NaN:C[P];m.push(C),w.push(E.type==="log"?A.simpleMap(C,E.c2l):C)}for(i=0;i<g.length;i++)if((h=g[i]).visible){if(f=k.getFromId(n,a._diag[i][0]),b=k.getFromId(n,a._diag[i][1]),f&&b&&f.type!==b.type){A.log("Skipping splom dimension "+i+" with conflicting axis types");continue}f?(S(f,h),b&&b.type==="category"&&(b._categories=f._categories.slice())):S(b,h),u.push(i)}for(x(n,a),A.extendFlat(p,s(n,a)),v=m.length*y>r?p.sizeAvg||Math.max(p.size,3):l(a,y),c=0;c<u.length;c++)h=g[i=u[c]],f=k.getFromId(n,a._diag[i][0])||{},b=k.getFromId(n,a._diag[i][1])||{},T(n,a,f,b,m[c],m[c],v);var _=t(n,a);return _.matrix||(_.matrix=!0),_.matrixOptions=p,_.selectedOptions=d(n,a,a.selected),_.unselectedOptions=d(n,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},25784:function($,R,e){var A=e(71828),k=e(85501),l=e(46880),T=e(34098),x=e(49508),d=e(94397),s=e(68645).isOpenSymbol;function t(o,r){function n(i,c){return A.coerce(o,r,l.dimensions,i,c)}n("label");var a=n("values");a&&a.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}$.exports=function(o,r,n,a){function i(y,p){return A.coerce(o,r,l,y,p)}var c=k(o,r,{name:"dimensions",handleItemDefaults:t}),h=i("diagonal.visible"),f=i("showupperhalf"),b=i("showlowerhalf");if(d(r,c,"values")&&(h||f||b)){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),x(o,r,n,a,i,{noAngleRef:!0,noStandOff:!0});var v=s(r.marker.symbol),g=T.isBubble(r);i("marker.line.width",v||g?1:0),function(y,p,m,w){var u,S,_=p.dimensions,E=_.length,L=p.showupperhalf,C=p.showlowerhalf,P=p.diagonal.visible,I=new Array(E),U=new Array(E);for(u=0;u<E;u++){var z=u?u+1:"";I[u]="x"+z,U[u]="y"+z}var H=w("xaxes",I),F=w("yaxes",U),N=p._diag=new Array(E);p._xaxes={},p._yaxes={};var B=[],j=[];function K(se,fe,ye,ge){if(se){var he=se.charAt(0),ve=m._splomAxes[he];if(p["_"+he+"axes"][se]=1,ge.push(se),!(se in ve)){var Ie=ve[se]={};ye&&(Ie.label=ye.label||"",ye.visible&&ye.axis&&(ye.axis.type&&(Ie.type=ye.axis.type),ye.axis.matches&&(Ie.matches=fe)))}}}var G=!P&&!C,V=!P&&!L;for(p._axesDim={},u=0;u<E;u++){var W=_[u],J=u===0,X=u===E-1,ee=J&&G||X&&V?void 0:H[u],re=J&&V||X&&G?void 0:F[u];K(ee,re,W,B),K(re,ee,W,j),N[u]=[ee,re],p._axesDim[ee]=u,p._axesDim[re]=u}for(u=0;u<B.length;u++)for(S=0;S<j.length;S++){var ie=B[u]+j[S];u>S&&L||u<S&&C?m._splomSubplots[ie]=1:u!==S||!P&&C&&L||(m._splomSubplots[ie]=1)}(!C||!P&&L&&C)&&(m._splomGridDflt.xside="bottom",m._splomGridDflt.yside="left")}(0,r,a,i),A.coerceSelectionMarkerOpacity(r,i)}else r.visible=!1}},28801:function($,R,e){var A=e(71828),k=e(36922),l=e(19635).markerStyle;$.exports=function(T,x){var d=x.trace,s=T._fullLayout._splomScenes[d.uid];if(s){k(T,d),A.extendFlat(s.matrixOptions,l(T,d));var t=A.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},35948:function($,R){R.getDimIndex=function(e,A){for(var k=A._id,l={x:0,y:1}[k.charAt(0)],T=e._visibleDims,x=0;x<T.length;x++){var d=T[x];if(e._diag[d][l]===k)return x}return!1}},8567:function($,R,e){var A=e(35948),k=e(20794).calcHover;$.exports={hoverPoints:function(l,T,x){var d=l.cd[0].trace,s=l.scene.matrixOptions.cdata,t=l.xa,o=l.ya,r=t.c2p(T),n=o.c2p(x),a=l.distance,i=A.getDimIndex(d,t),c=A.getDimIndex(d,o);if(i===!1||c===!1)return[l];for(var h,f,b=s[i],v=s[c],g=a,y=0;y<b.length;y++){var p=b[y],m=v[y],w=t.c2p(p)-r,u=o.c2p(m)-n,S=Math.sqrt(w*w+u*u);S<g&&(g=f=S,h=y)}return l.index=h,l.distance=g,l.dxy=f,h===void 0?[l]:[k(l,b,v,d)]}}},6419:function($,R,e){var A=e(65017);A.basePlotModule=e(16947),$.exports=A},79410:function($,R,e){var A=e(60487),k=e(71828),l=e(41675),T=e(64505).selectMode;function x(d,s){var t,o,r,n,a,i=d._fullLayout,c=i._size,h=s.trace,f=s.t,b=i._splomScenes[h.uid],v=b.matrixOptions,g=v.cdata,y=i._glcanvas.data()[0].regl,p=i.dragmode;if(g.length!==0){v.lower=h.showupperhalf,v.upper=h.showlowerhalf,v.diagonal=h.diagonal.visible;var m=h._visibleDims,w=g.length,u=b.viewOpts={};for(u.ranges=new Array(w),u.domains=new Array(w),a=0;a<m.length;a++){r=m[a];var S=u.ranges[a]=new Array(4),_=u.domains[a]=new Array(4);(t=l.getFromId(d,h._diag[r][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],_[0]=t.domain[0],_[2]=t.domain[1]),(o=l.getFromId(d,h._diag[r][1]))&&(S[1]=o._rl[0],S[3]=o._rl[1],_[1]=o.domain[0],_[3]=o.domain[1])}var E=d._context.plotGlPixelRatio,L=c.l*E,C=c.b*E,P=c.w*E,I=c.h*E;u.viewport=[L,C,P+L,I+C],b.matrix===!0&&(b.matrix=A(y));var U=i.clickmode.indexOf("select")>-1,z=!0;if(T(p)||h.selectedpoints||U){var H=h._length;if(h.selectedpoints){b.selectBatch=h.selectedpoints;var F=h.selectedpoints,N={};for(r=0;r<F.length;r++)N[F[r]]=!0;var B=[];for(r=0;r<H;r++)N[r]||B.push(r);b.unselectBatch=B}var j=f.xpx=new Array(w),K=f.ypx=new Array(w);for(a=0;a<m.length;a++){if(r=m[a],t=l.getFromId(d,h._diag[r][0]))for(j[a]=new Array(H),n=0;n<H;n++)j[a][n]=t.c2p(g[a][n]);if(o=l.getFromId(d,h._diag[r][1]))for(K[a]=new Array(H),n=0;n<H;n++)K[a][n]=o.c2p(g[a][n])}if(b.selectBatch.length||b.unselectBatch.length){var G=k.extendFlat({},v,b.unselectedOptions,u),V=k.extendFlat({},v,b.selectedOptions,u);b.matrix.update(G,V),z=!1}}else f.xpx=f.ypx=null;if(z){var W=k.extendFlat({},v,u);b.matrix.update(W,null)}}}$.exports=function(d,s,t){if(t.length)for(var o=0;o<t.length;o++)x(d,t[o][0])}},10164:function($,R,e){var A=e(71828);$.exports=function(k,l){var T=k._fullLayout,x=l.uid,d=T._splomScenes;d||(d=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=d[l.uid];return t||((t=d[x]=A.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||A.extendFlat(t,s),t}},8689:function($,R,e){var A=e(71828),k=A.pushUnique,l=e(34098),T=e(35948);$.exports=function(x,d){var s=x.cd,t=s[0].trace,o=s[0].t,r=x.scene,n=r.matrixOptions.cdata,a=x.xaxis,i=x.yaxis,c=[];if(!r)return c;var h=!l.hasMarkers(t)&&!l.hasText(t);if(t.visible!==!0||h)return c;var f=T.getDimIndex(t,a),b=T.getDimIndex(t,i);if(f===!1||b===!1)return c;var v=o.xpx[f],g=o.ypx[b],y=n[f],p=n[b],m=(x.scene.selectBatch||[]).slice(),w=[];if(d!==!1&&!d.degenerate)for(var u=0;u<y.length;u++)d.contains([v[u],g[u]],null,u,x)?(c.push({pointNumber:u,x:y[u],y:p[u]}),k(m,u)):m.indexOf(u)!==-1?k(m,u):w.push(u);var S=r.matrixOptions;return m.length||w.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,A.extendFlat({},S,r.selectedOptions,r.viewOpts)):r.matrix.update(S,null),r.selectBatch=m,r.unselectBatch=w,c}},21850:function($,R,e){var A=e(50693),k=e(12663).axisHoverFormat,l=e(5386).f,T=e(2418),x=e(9012),d=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:d({},x.showlegend,{dflt:!1})};d(s,A("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=d({},x.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,$.exports=s},88489:function($,R,e){var A=e(71828),k=e(78803);function l(d){var s,t,o,r,n,a,i,c,h,f,b,v,g=d._x,y=d._y,p=d._z,m=d._len,w=-1/0,u=1/0,S=-1/0,_=1/0,E=-1/0,L=1/0,C="";for(m&&(i=g[0],h=y[0],b=p[0]),m>1&&(c=g[m-1],f=y[m-1],v=p[m-1]),s=0;s<m;s++)w=Math.max(w,g[s]),u=Math.min(u,g[s]),S=Math.max(S,y[s]),_=Math.min(_,y[s]),E=Math.max(E,p[s]),L=Math.min(L,p[s]),r||g[s]===i||(r=!0,C+="x"),n||y[s]===h||(n=!0,C+="y"),a||p[s]===b||(a=!0,C+="z");r||(C+="x"),n||(C+="y"),a||(C+="z");var P=T(d._x),I=T(d._y),U=T(d._z);C=(C=(C=C.replace("x",(i>c?"-":"+")+"x")).replace("y",(h>f?"-":"+")+"y")).replace("z",(b>v?"-":"+")+"z");var z=function(){m=0,P=[],I=[],U=[]};(!m||m<P.length*I.length*U.length)&&z();var H=function(he){return he==="x"?g:he==="y"?y:p},F=function(he){return he==="x"?P:he==="y"?I:U},N=function(he){return he[m-1]<he[0]?-1:1},B=H(C[1]),j=H(C[3]),K=H(C[5]),G=F(C[1]).length,V=F(C[3]).length,W=F(C[5]).length,J=!1,X=function(he,ve,Ie){return G*(V*he+ve)+Ie},ee=N(H(C[1])),re=N(H(C[3])),ie=N(H(C[5]));for(s=0;s<W-1;s++){for(t=0;t<V-1;t++){for(o=0;o<G-1;o++){var se=X(s,t,o),fe=X(s,t,o+1),ye=X(s,t+1,o),ge=X(s+1,t,o);if(B[se]*ee<B[fe]*ee&&j[se]*re<j[ye]*re&&K[se]*ie<K[ge]*ie||(J=!0),J)break}if(J)break}if(J)break}return J&&(A.warn("Encountered arbitrary coordinates! Unable to input data grid."),z()),{xMin:u,yMin:_,zMin:L,xMax:w,yMax:S,zMax:E,Xs:P,Ys:I,Zs:U,len:m,fill:C}}function T(d){return A.distinctVals(d).vals}function x(d,s){if(s===void 0&&(s=d.length),A.isTypedArray(d))return d.subarray(0,s);for(var t=[],o=0;o<s;o++)t[o]=+d[o];return t}$.exports={calc:function(d,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=x(s.u,s._len),s._v=x(s.v,s._len),s._w=x(s.w,s._len),s._x=x(s.x,s._len),s._y=x(s.y,s._len),s._z=x(s.z,s._len);var t=l(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var o,r,n,a=0;s.starts&&(o=x(s.starts.x||[]),r=x(s.starts.y||[]),n=x(s.starts.z||[]),a=Math.min(o.length,r.length,n.length)),s._startsX=o||[],s._startsY=r||[],s._startsZ=n||[];var i,c=0,h=1/0;for(i=0;i<s._len;i++){var f=s._u[i],b=s._v[i],v=s._w[i],g=Math.sqrt(f*f+b*b+v*v);c=Math.max(c,g),h=Math.min(h,g)}for(k(d,s,{vals:[h,c],containerStr:"",cLetter:"c"}),i=0;i<a;i++){var y=o[i];t.xMax=Math.max(t.xMax,y),t.xMin=Math.min(t.xMin,y);var p=r[i];t.yMax=Math.max(t.yMax,p),t.yMin=Math.min(t.yMin,p);var m=n[i];t.zMax=Math.max(t.zMax,m),t.zMin=Math.min(t.zMin,m)}s._slen=a,s._normMax=c,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:x,processGrid:l}},90154:function($,R,e){var A=e(9330).gl_streamtube3d,k=A.createTubeMesh,l=e(71828),T=e(81697).parseColorScale,x=e(21081).extractOpts,d=e(90060),s={xaxis:0,yaxis:1,zaxis:2};function t(i,c){this.scene=i,this.uid=c,this.mesh=null,this.data=null}var o=t.prototype;function r(i){var c=i.length;return c>2?i.slice(1,c-1):c===2?[(i[0]+i[1])/2]:i}function n(i){var c=i.length;return c===1?[.5,.5]:[i[1]-i[0],i[c-1]-i[c-2]]}function a(i,c){var h=i.fullSceneLayout,f=i.dataScale,b=c._len,v={};function g(G,V){var W=h[V],J=f[s[V]];return l.simpleMap(G,function(X){return W.d2l(X)*J})}if(v.vectors=d(g(c._u,"xaxis"),g(c._v,"yaxis"),g(c._w,"zaxis"),b),!b)return{positions:[],cells:[]};var y=g(c._Xs,"xaxis"),p=g(c._Ys,"yaxis"),m=g(c._Zs,"zaxis");if(v.meshgrid=[y,p,m],v.gridFill=c._gridFill,c._slen)v.startingPositions=d(g(c._startsX,"xaxis"),g(c._startsY,"yaxis"),g(c._startsZ,"zaxis"));else{for(var w=p[0],u=r(y),S=r(m),_=new Array(u.length*S.length),E=0,L=0;L<u.length;L++)for(var C=0;C<S.length;C++)_[E++]=[u[L],w,S[C]];v.startingPositions=_}v.colormap=T(c),v.tubeSize=c.sizeref,v.maxLength=c.maxdisplayed;var P=g(c._xbnds,"xaxis"),I=g(c._ybnds,"yaxis"),U=g(c._zbnds,"zaxis"),z=n(y),H=n(p),F=n(m),N=[[P[0]-z[0],I[0]-H[0],U[0]-F[0]],[P[1]+z[1],I[1]+H[1],U[1]+F[1]]],B=A(v,N),j=x(c);B.vertexIntensityBounds=[j.min/c._normMax,j.max/c._normMax];var K=c.lightposition;return B.lightPosition=[K.x,K.y,K.z],B.ambient=c.lighting.ambient,B.diffuse=c.lighting.diffuse,B.specular=c.lighting.specular,B.roughness=c.lighting.roughness,B.fresnel=c.lighting.fresnel,B.opacity=c.opacity,c._pad=B.tubeScale*c.sizeref*2,B}o.handlePick=function(i){var c=this.scene.fullSceneLayout,h=this.scene.dataScale;function f(g,y){var p=c[y],m=h[s[y]];return p.l2c(g)/m}if(i.object===this.mesh){var b=i.data.position,v=i.data.velocity;return i.traceCoordinate=[f(b[0],"xaxis"),f(b[1],"yaxis"),f(b[2],"zaxis"),f(v[0],"xaxis"),f(v[1],"yaxis"),f(v[2],"zaxis"),i.data.intensity*this.data._normMax,i.data.divergence],i.textLabel=this.data.hovertext||this.data.text,!0}},o.update=function(i){this.data=i;var c=a(this.scene,i);this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(i,c){var h=i.glplot.gl,f=a(i,c),b=k(h,f),v=new t(i,c.uid);return v.mesh=b,v.data=c,b._trace=v,i.glplot.add(b),v}},22459:function($,R,e){var A=e(71828),k=e(1586),l=e(21850);$.exports=function(T,x,d,s){function t(h,f){return A.coerce(T,x,l,h,f)}var o=t("u"),r=t("v"),n=t("w"),a=t("x"),i=t("y"),c=t("z");o&&o.length&&r&&r.length&&n&&n.length&&a&&a.length&&i&&i.length&&c&&c.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,x,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),x._length=null):x.visible=!1}},61510:function($,R,e){$.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(21850),supplyDefaults:e(22459),colorbar:{min:"cmin",max:"cmax"},calc:e(88489).calc,plot:e(90154),eventData:function(A,k){return A.tubex=A.x,A.tubey=A.y,A.tubez=A.z,A.tubeu=k.traceCoordinate[3],A.tubev=k.traceCoordinate[4],A.tubew=k.traceCoordinate[5],A.norm=k.traceCoordinate[6],A.divergence=k.traceCoordinate[7],delete A.x,delete A.y,delete A.z,A},meta:{}}},57564:function($,R,e){var A=e(9012),k=e(5386).f,l=e(5386).s,T=e(50693),x=e(27670).Y,d=e(34e3),s=e(7055),t=e(1426).extendFlat;$.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},d.marker.line.color,{dflt:null}),width:t({},d.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:d.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:l({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:d.hovertext,hoverinfo:t({},A.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:s.eventDataKeys}),textfont:d.textfont,insidetextorientation:d.insidetextorientation,insidetextfont:d.insidetextfont,outsidetextfont:t({},d.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:d.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:x({name:"sunburst",trace:!0,editType:"calc"})}},66888:function($,R,e){var A=e(74875);R.name="sunburst",R.plot=function(k,l,T,x){A.plotBasePlot(R.name,k,l,T,x)},R.clean=function(k,l,T,x){A.cleanBasePlot(R.name,k,l,T,x)}},52147:function($,R,e){var A=e(674),k=e(92770),l=e(71828),T=e(21081).makeColorScaleFuncFromTrace,x=e(32354).makePullColorFn,d=e(32354).generateExtendedColors,s=e(21081).calc,t=e(50606).ALMOST_EQUAL,o={},r={},n={};function a(i,c,h){var f=0,b=i.children;if(b){for(var v=b.length,g=0;g<v;g++)f+=a(b[g],c,h);h.branches&&f++}else h.leaves&&f++;return i.value=i.data.data.value=f,c._values||(c._values=[]),c._values[i.data.data.i]=f,f}R.calc=function(i,c){var h,f,b,v,g,y,p=i._fullLayout,m=c.ids,w=l.isArrayOrTypedArray(m),u=c.labels,S=c.parents,_=c.values,E=l.isArrayOrTypedArray(_),L=[],C={},P={},I=function(ie){return ie||typeof ie=="number"},U=function(ie){return!E||k(_[ie])&&_[ie]>=0};w?(h=Math.min(m.length,S.length),f=function(ie){return I(m[ie])&&U(ie)},b=function(ie){return String(m[ie])}):(h=Math.min(u.length,S.length),f=function(ie){return I(u[ie])&&U(ie)},b=function(ie){return String(u[ie])}),E&&(h=Math.min(h,_.length));for(var z=0;z<h;z++)if(f(z)){var H=b(z),F=I(S[z])?String(S[z]):"",N={i:z,id:H,pid:F,label:I(u[z])?String(u[z]):""};E&&(N.v=+_[z]),L.push(N),g=H,C[v=F]?C[v].push(g):C[v]=[g],P[g]=1}if(C[""]){if(C[""].length>1){for(var B=l.randstr(),j=0;j<L.length;j++)L[j].pid===""&&(L[j].pid=B);L.unshift({hasMultipleRoots:!0,id:B,pid:"",label:""})}}else{var K,G=[];for(K in C)P[K]||G.push(K);if(G.length!==1)return l.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",G.join(", ")].join(" "));K=G[0],L.unshift({hasImpliedRoot:!0,id:K,pid:"",label:K})}try{y=A.stratify().id(function(ie){return ie.id}).parentId(function(ie){return ie.pid})(L)}catch(ie){return l.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",ie.message].join(" "))}var V=A.hierarchy(y),W=!1;if(E)switch(c.branchvalues){case"remainder":V.sum(function(ie){return ie.data.v});break;case"total":V.each(function(ie){var se=ie.data.data,fe=se.v;if(ie.children){var ye=ie.children.reduce(function(ge,he){return ge+he.data.data.v},0);if((se.hasImpliedRoot||se.hasMultipleRoots)&&(fe=ye),fe<ye*t)return W=!0,l.warn(["Total value for node",ie.data.data.id,"of",c.name,"is smaller than the sum of its children.",`
parent value =`,fe,`
children sum =`,ye].join(" "))}ie.value=fe})}else a(V,c,{branches:c.count.indexOf("branches")!==-1,leaves:c.count.indexOf("leaves")!==-1});if(!W){var J,X;c.sort&&V.sort(function(ie,se){return se.value-ie.value});var ee=c.marker.colors||[],re=!!ee.length;return c._hasColorscale?(re||(ee=E?c.values:c._values),s(i,c,{vals:ee,containerStr:"marker",cLetter:"c"}),X=T(c.marker)):J=x(p["_"+c.type+"colormap"]),V.each(function(ie){var se=ie.data.data;se.color=c._hasColorscale?X(ee[se.i]):J(ee[se.i],se.id)}),L[0].hierarchy=V,L}},R._runCrossTraceCalc=function(i,c){var h=c._fullLayout,f=c.calcdata,b=h[i+"colorway"],v=h["_"+i+"colormap"];h["extend"+i+"colors"]&&(b=d(b,i==="icicle"?n:i==="treemap"?r:o));var g,y=0;function p(u){var S=u.data.data,_=S.id;S.color===!1&&(v[_]?S.color=v[_]:u.parent?u.parent.parent?S.color=u.parent.data.data.color:(v[_]=S.color=b[y%b.length],y++):S.color=g)}for(var m=0;m<f.length;m++){var w=f[m][0];w.trace.type===i&&w.hierarchy&&(g=w.trace.root.color,w.hierarchy.each(p))}},R.crossTraceCalc=function(i){return R._runCrossTraceCalc("sunburst",i)}},7055:function($){$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function($,R,e){var A=e(71828),k=e(57564),l=e(27670).c,T=e(90769).handleText,x=e(21081),d=x.hasColorscale,s=x.handleDefaults;$.exports=function(t,o,r,n){function a(v,g){return A.coerce(t,o,k,v,g)}var i=a("labels"),c=a("parents");if(i&&i.length&&c&&c.length){var h=a("values");h&&h.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),a("marker.line.width")&&a("marker.line.color",n.paper_bgcolor),a("marker.colors");var f=o._hasColorscale=d(t,"marker","colors")||(t.marker||{}).coloraxis;f&&s(t,o,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",f?1:.7);var b=a("text");a("texttemplate"),o.texttemplate||a("textinfo",Array.isArray(b)?"text+label":"label"),a("hovertext"),a("hovertemplate"),T(t,o,n,a,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),l(o,n,a),o._length=null}else o.visible=!1}},83523:function($,R,e){var A=e(39898),k=e(73972),l=e(23469).appendArrayPointValue,T=e(30211),x=e(71828),d=e(11086),s=e(2791),t=e(53581).formatPieValue;function o(r,n,a){for(var i=r.data.data,c={curveNumber:n.index,pointNumber:i.i,data:n._input,fullData:n},h=0;h<a.length;h++){var f=a[h];f in r&&(c[f]=r[f])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(c.parent=r.parentString),l(c,n,i.i),c}$.exports=function(r,n,a,i,c){var h=i[0],f=h.trace,b=h.hierarchy,v=f.type==="sunburst",g=f.type==="treemap"||f.type==="icicle";"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),r.on("mouseover",function(y){var p=a._fullLayout;if(!a._dragging&&p.hovermode!==!1){var m,w=a._fullData[f.index],u=y.data.data,S=u.i,_=s.isHierarchyRoot(y),E=s.getParent(b,y),L=s.getValue(y),C=function(ee){return x.castOption(w,S,ee)},P=C("hovertemplate"),I=T.castHoverinfo(w,p,S),U=p.separators;if(P||I&&I!=="none"&&I!=="skip"){var z,H;v&&(z=h.cx+y.pxmid[0]*(1-y.rInscribed),H=h.cy+y.pxmid[1]*(1-y.rInscribed)),g&&(z=y._hoverX,H=y._hoverY);var F,N={},B=[],j=[],K=function(ee){return B.indexOf(ee)!==-1};I&&(B=I==="all"?w._module.attributes.hoverinfo.flags:I.split("+")),N.label=u.label,K("label")&&N.label&&j.push(N.label),u.hasOwnProperty("v")&&(N.value=u.v,N.valueLabel=t(N.value,U),K("value")&&j.push(N.valueLabel)),N.currentPath=y.currentPath=s.getPath(y.data),K("current path")&&!_&&j.push(N.currentPath);var G=[],V=function(){G.indexOf(F)===-1&&(j.push(F),G.push(F))};N.percentParent=y.percentParent=L/s.getValue(E),N.parent=y.parentString=s.getPtLabel(E),K("percent parent")&&(F=s.formatPercent(N.percentParent,U)+" of "+N.parent,V()),N.percentEntry=y.percentEntry=L/s.getValue(n),N.entry=y.entry=s.getPtLabel(n),!K("percent entry")||_||y.onPathbar||(F=s.formatPercent(N.percentEntry,U)+" of "+N.entry,V()),N.percentRoot=y.percentRoot=L/s.getValue(b),N.root=y.root=s.getPtLabel(b),K("percent root")&&!_&&(F=s.formatPercent(N.percentRoot,U)+" of "+N.root,V()),N.text=C("hovertext")||C("text"),K("text")&&(F=N.text,x.isValidTextValue(F)&&j.push(F)),m=[o(y,w,c.eventDataKeys)];var W={trace:w,y:H,_x0:y._x0,_x1:y._x1,_y0:y._y0,_y1:y._y1,text:j.join("<br>"),name:P||K("name")?w.name:void 0,color:C("hoverlabel.bgcolor")||u.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:N,eventData:m};v&&(W.x0=z-y.rInscribed*y.rpx1,W.x1=z+y.rInscribed*y.rpx1,W.idealAlign=y.pxmid[0]<0?"left":"right"),g&&(W.x=z,W.idealAlign=z<0?"left":"right");var J=[];T.loneHover(W,{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:a,inOut_bbox:J}),m[0].bbox=J[0],f._hasHoverLabel=!0}if(g){var X=r.select("path.surface");c.styleOne(X,y,w,{hovered:!0})}f._hasHoverEvent=!0,a.emit("plotly_hover",{points:m||[o(y,w,c.eventDataKeys)],event:A.event})}}),r.on("mouseout",function(y){var p=a._fullLayout,m=a._fullData[f.index],w=A.select(this).datum();if(f._hasHoverEvent&&(y.originalEvent=A.event,a.emit("plotly_unhover",{points:[o(w,m,c.eventDataKeys)],event:A.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(T.loneUnhover(p._hoverlayer.node()),f._hasHoverLabel=!1),g){var u=r.select("path.surface");c.styleOne(u,w,m,{hovered:!1})}}),r.on("click",function(y){var p=a._fullLayout,m=a._fullData[f.index],w=v&&(s.isHierarchyRoot(y)||s.isLeaf(y)),u=s.getPtId(y),S=s.isEntry(y)?s.findEntryWithChild(b,u):s.findEntryWithLevel(b,u),_=s.getPtId(S),E={points:[o(y,m,c.eventDataKeys)],event:A.event};w||(E.nextLevel=_);var L=d.triggerHandler(a,"plotly_"+f.type+"click",E);if(L!==!1&&p.hovermode&&(a._hoverdata=[o(y,m,c.eventDataKeys)],T.click(a,A.event)),!w&&L!==!1&&!a._dragging&&!a._transitioning){k.call("_storeDirectGUIEdit",m,p._tracePreGUI[m.uid],{level:m.level});var C={data:[{level:_}],traces:[f.index]},P={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(p._hoverlayer.node()),k.call("animate",a,C,P)}})}},2791:function($,R,e){var A=e(71828),k=e(7901),l=e(6964),T=e(53581);function x(d){return d.data.data.pid}R.findEntryWithLevel=function(d,s){var t;return s&&d.eachAfter(function(o){if(R.getPtId(o)===s)return t=o.copy()}),t||d},R.findEntryWithChild=function(d,s){var t;return d.eachAfter(function(o){for(var r=o.children||[],n=0;n<r.length;n++){var a=r[n];if(R.getPtId(a)===s)return t=o.copy()}}),t||d},R.isEntry=function(d){return!d.parent},R.isLeaf=function(d){return!d.children},R.getPtId=function(d){return d.data.data.id},R.getPtLabel=function(d){return d.data.data.label},R.getValue=function(d){return d.value},R.isHierarchyRoot=function(d){return x(d)===""},R.setSliceCursor=function(d,s,t){var o=t.isTransitioning;if(!o){var r=d.datum();o=t.hideOnRoot&&R.isHierarchyRoot(r)||t.hideOnLeaves&&R.isLeaf(r)}l(d,o?null:"pointer")},R.getInsideTextFontKey=function(d,s,t,o,r){var n=(r||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=t.data.data.i;return A.castOption(s,a,n+"."+d)||A.castOption(s,a,"textfont."+d)||o.size},R.getOutsideTextFontKey=function(d,s,t,o){var r=t.data.data.i;return A.castOption(s,r,"outsidetextfont."+d)||A.castOption(s,r,"textfont."+d)||o.size},R.isOutsideText=function(d,s){return!d._hasColorscale&&R.isHierarchyRoot(s)},R.determineTextFont=function(d,s,t,o){return R.isOutsideText(d,s)?function(r,n,a){return{color:R.getOutsideTextFontKey("color",r,n,a),family:R.getOutsideTextFontKey("family",r,n,a),size:R.getOutsideTextFontKey("size",r,n,a)}}(d,s,t):function(r,n,a,i){var c=(i||{}).onPathbar,h=n.data.data,f=h.i,b=A.castOption(r,f,(c?"pathbar.textfont":"insidetextfont")+".color");return!b&&r._input.textfont&&(b=A.castOption(r._input,f,"textfont.color")),{color:b||k.contrast(h.color),family:R.getInsideTextFontKey("family",r,n,a,i),size:R.getInsideTextFontKey("size",r,n,a,i)}}(d,s,t,o)},R.hasTransition=function(d){return!!(d&&d.duration>0)},R.getMaxDepth=function(d){return d.maxdepth>=0?d.maxdepth:1/0},R.isHeader=function(d,s){return!(R.isLeaf(d)||d.depth===s._maxDepth-1)},R.getParent=function(d,s){return R.findEntryWithLevel(d,x(s))},R.listPath=function(d,s){var t=d.parent;if(!t)return[];var o=s?[t.data[s]]:[t];return R.listPath(t,s).concat(o)},R.getPath=function(d){return R.listPath(d,"label").join("/")+"/"},R.formatValue=T.formatPieValue,R.formatPercent=function(d,s){var t=A.formatPercent(d,0);return t==="0%"&&(t=T.formatPiePercent(d,s)),t}},87619:function($,R,e){$.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(66888),categories:[],animatable:!0,attributes:e(57564),layoutAttributes:e(2654),supplyDefaults:e(17094),supplyLayoutDefaults:e(57034),calc:e(52147).calc,crossTraceCalc:e(52147).crossTraceCalc,plot:e(24714).plot,style:e(29969).style,colorbar:e(4898),meta:{}}},2654:function($){$.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function($,R,e){var A=e(71828),k=e(2654);$.exports=function(l,T){function x(d,s){return A.coerce(l,T,k,d,s)}x("sunburstcolorway",T.colorway),x("extendsunburstcolors")}},24714:function($,R,e){var A=e(39898),k=e(674),l=e(29502).sX,T=e(91424),x=e(71828),d=e(63893),s=e(72597),t=s.recordMinTextSize,o=s.clearMinTextSize,r=e(14575),n=e(53581).getRotationAngle,a=r.computeTransform,i=r.transformInsideText,c=e(29969).styleOne,h=e(16688).resizeText,f=e(83523),b=e(7055),v=e(2791);function g(p,m,w,u){var S=p._context.staticPlot,_=p._fullLayout,E=!_.uniformtext.mode&&v.hasTransition(u),L=A.select(w).selectAll("g.slice"),C=m[0],P=C.trace,I=C.hierarchy,U=v.findEntryWithLevel(I,P.level),z=v.getMaxDepth(P),H=_._size,F=P.domain,N=H.w*(F.x[1]-F.x[0]),B=H.h*(F.y[1]-F.y[0]),j=.5*Math.min(N,B),K=C.cx=H.l+H.w*(F.x[1]+F.x[0])/2,G=C.cy=H.t+H.h*(1-F.y[0])-B/2;if(!U)return L.remove();var V=null,W={};E&&L.each(function(Te){W[v.getPtId(Te)]={rpx0:Te.rpx0,rpx1:Te.rpx1,x0:Te.x0,x1:Te.x1,transform:Te.transform},!V&&v.isEntry(Te)&&(V=Te)});var J=function(Te){return k.partition().size([2*Math.PI,Te.height+1])(Te)}(U).descendants(),X=U.height+1,ee=0,re=z;C.hasMultipleRoots&&v.isHierarchyRoot(U)&&(J=J.slice(1),X-=1,ee=1,re+=1),J=J.filter(function(Te){return Te.y1<=re});var ie=n(P.rotation);ie&&J.forEach(function(Te){Te.x0+=ie,Te.x1+=ie});var se=Math.min(X,z),fe=function(Te){return(Te-ee)/se*j},ye=function(Te,Q){return[Te*Math.cos(Q),-Te*Math.sin(Q)]},ge=function(Te){return x.pathAnnulus(Te.rpx0,Te.rpx1,Te.x0,Te.x1,K,G)},he=function(Te){return K+y(Te)[0]*(Te.transform.rCenter||0)+(Te.transform.x||0)},ve=function(Te){return G+y(Te)[1]*(Te.transform.rCenter||0)+(Te.transform.y||0)};(L=L.data(J,v.getPtId)).enter().append("g").classed("slice",!0),E?L.exit().transition().each(function(){var Te=A.select(this);Te.select("path.surface").transition().attrTween("d",function(Q){var oe=function(ce){var me,Me=v.getPtId(ce),Re=W[Me],Ce=W[v.getPtId(U)];if(Ce){var ze=(ce.x1>Ce.x1?2*Math.PI:0)+ie;me=ce.rpx1<Ce.rpx1?{x0:ce.x0,x1:ce.x1,rpx0:0,rpx1:0}:{x0:ze,x1:ze,rpx0:ce.rpx0,rpx1:ce.rpx1}}else{var le,de=v.getPtId(ce.parent);L.each(function(rt){if(v.getPtId(rt)===de)return le=rt});var be,Fe=le.children;Fe.forEach(function(rt,tt){if(v.getPtId(rt)===Me)return be=tt});var Ve=Fe.length,He=l(le.x0,le.x1);me={rpx0:j,rpx1:j,x0:He(be/Ve),x1:He((be+1)/Ve)}}return l(Re,me)}(Q);return function(ce){return ge(oe(ce))}}),Te.select("g.slicetext").attr("opacity",0)}).remove():L.exit().remove(),L.order();var Ie=null;if(E&&V){var xe=v.getPtId(V);L.each(function(Te){Ie===null&&v.getPtId(Te)===xe&&(Ie=Te.x1)})}var Ae=L;function Se(Te){var Q=Te.parent,oe=W[v.getPtId(Q)],ce={};if(oe){var me=Q.children,Me=me.indexOf(Te),Re=me.length,Ce=l(oe.x0,oe.x1);ce.x0=Ce(Me/Re),ce.x1=Ce(Me/Re)}else ce.x0=ce.x1=0;return ce}E&&(Ae=Ae.transition().each("end",function(){var Te=A.select(this);v.setSliceCursor(Te,p,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Ae.each(function(Te){var Q=A.select(this),oe=x.ensureSingle(Q,"path","surface",function(ze){ze.style("pointer-events",S?"none":"all")});Te.rpx0=fe(Te.y0),Te.rpx1=fe(Te.y1),Te.xmid=(Te.x0+Te.x1)/2,Te.pxmid=ye(Te.rpx1,Te.xmid),Te.midangle=-(Te.xmid-Math.PI/2),Te.startangle=-(Te.x0-Math.PI/2),Te.stopangle=-(Te.x1-Math.PI/2),Te.halfangle=.5*Math.min(x.angleDelta(Te.x0,Te.x1)||Math.PI,Math.PI),Te.ring=1-Te.rpx0/Te.rpx1,Te.rInscribed=function(ze){return ze.rpx0===0&&x.isFullCircle([ze.x0,ze.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(ze.halfangle)),ze.ring/2))}(Te),E?oe.transition().attrTween("d",function(ze){var le=function(de){var be,Fe=W[v.getPtId(de)],Ve={x0:de.x0,x1:de.x1,rpx0:de.rpx0,rpx1:de.rpx1};if(Fe)be=Fe;else if(V)if(de.parent)if(Ie){var He=(de.x1>Ie?2*Math.PI:0)+ie;be={x0:He,x1:He}}else be={rpx0:j,rpx1:j},x.extendFlat(be,Se(de));else be={rpx0:0,rpx1:0};else be={x0:ie,x1:ie};return l(be,Ve)}(ze);return function(de){return ge(le(de))}}):oe.attr("d",ge),Q.call(f,U,p,m,{eventDataKeys:b.eventDataKeys,transitionTime:b.CLICK_TRANSITION_TIME,transitionEasing:b.CLICK_TRANSITION_EASING}).call(v.setSliceCursor,p,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:p._transitioning}),oe.call(c,Te,P);var ce=x.ensureSingle(Q,"g","slicetext"),me=x.ensureSingle(ce,"text","",function(ze){ze.attr("data-notex",1)}),Me=x.ensureUniformFontSize(p,v.determineTextFont(P,Te,_.font));me.text(R.formatSliceLabel(Te,U,P,m,_)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Me).call(d.convertToTspans,p);var Re=T.bBox(me.node());Te.transform=i(Re,Te,C),Te.transform.targetX=he(Te),Te.transform.targetY=ve(Te);var Ce=function(ze,le){var de=ze.transform;return a(de,le),de.fontSize=Me.size,t(P.type,de,_),x.getTextTransform(de)};E?me.transition().attrTween("transform",function(ze){var le=function(de){var be,Fe=W[v.getPtId(de)],Ve=de.transform;if(Fe)be=Fe;else if(be={rpx1:de.rpx1,transform:{textPosAngle:Ve.textPosAngle,scale:0,rotate:Ve.rotate,rCenter:Ve.rCenter,x:Ve.x,y:Ve.y}},V)if(de.parent)if(Ie){var He=de.x1>Ie?2*Math.PI:0;be.x0=be.x1=He}else x.extendFlat(be,Se(de));else be.x0=be.x1=ie;else be.x0=be.x1=ie;var rt=l(be.transform.textPosAngle,de.transform.textPosAngle),tt=l(be.rpx1,de.rpx1),ot=l(be.x0,de.x0),ht=l(be.x1,de.x1),_t=l(be.transform.scale,Ve.scale),dt=l(be.transform.rotate,Ve.rotate),bt=Ve.rCenter===0?3:be.transform.rCenter===0?1/3:1,St=l(be.transform.rCenter,Ve.rCenter);return function(Et){var zt=tt(Et),Ut=ot(Et),Pt=ht(Et),Ze=function(Be){return St(Math.pow(Be,bt))}(Et),Ye={pxmid:ye(zt,(Ut+Pt)/2),rpx1:zt,transform:{textPosAngle:rt(Et),rCenter:Ze,x:Ve.x,y:Ve.y}};return t(P.type,Ve,_),{transform:{targetX:he(Ye),targetY:ve(Ye),scale:_t(Et),rotate:dt(Et),rCenter:Ze}}}}(ze);return function(de){return Ce(le(de),Re)}}):me.attr("transform",Ce(Te,Re))})}function y(p){return m=p.rpx1,w=p.transform.textPosAngle,[m*Math.sin(w),-m*Math.cos(w)];var m,w}R.plot=function(p,m,w,u){var S,_,E=p._fullLayout,L=E._sunburstlayer,C=!w,P=!E.uniformtext.mode&&v.hasTransition(w);o("sunburst",E),(S=L.selectAll("g.trace.sunburst").data(m,function(I){return I[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),P?(u&&(_=u()),A.transition().duration(w.duration).ease(w.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()}).each(function(){L.selectAll("g.trace").each(function(I){g(p,I,this,w)})})):(S.each(function(I){g(p,I,this,w)}),E.uniformtext.mode&&h(p,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&S.exit().remove()},R.formatSliceLabel=function(p,m,w,u,S){var _=w.texttemplate,E=w.textinfo;if(!(_||E&&E!=="none"))return"";var L=S.separators,C=u[0],P=p.data.data,I=C.hierarchy,U=v.isHierarchyRoot(p),z=v.getParent(I,p),H=v.getValue(p);if(!_){var F,N=E.split("+"),B=function(re){return N.indexOf(re)!==-1},j=[];if(B("label")&&P.label&&j.push(P.label),P.hasOwnProperty("v")&&B("value")&&j.push(v.formatValue(P.v,L)),!U){B("current path")&&j.push(v.getPath(p.data));var K=0;B("percent parent")&&K++,B("percent entry")&&K++,B("percent root")&&K++;var G=K>1;if(K){var V,W=function(re){F=v.formatPercent(V,L),G&&(F+=" of "+re),j.push(F)};B("percent parent")&&!U&&(V=H/v.getValue(z),W("parent")),B("percent entry")&&(V=H/v.getValue(m),W("entry")),B("percent root")&&(V=H/v.getValue(I),W("root"))}}return B("text")&&(F=x.castOption(w,P.i,"text"),x.isValidTextValue(F)&&j.push(F)),j.join("<br>")}var J=x.castOption(w,P.i,"texttemplate");if(!J)return"";var X={};P.label&&(X.label=P.label),P.hasOwnProperty("v")&&(X.value=P.v,X.valueLabel=v.formatValue(P.v,L)),X.currentPath=v.getPath(p.data),U||(X.percentParent=H/v.getValue(z),X.percentParentLabel=v.formatPercent(X.percentParent,L),X.parent=v.getPtLabel(z)),X.percentEntry=H/v.getValue(m),X.percentEntryLabel=v.formatPercent(X.percentEntry,L),X.entry=v.getPtLabel(m),X.percentRoot=H/v.getValue(I),X.percentRootLabel=v.formatPercent(X.percentRoot,L),X.root=v.getPtLabel(I),P.hasOwnProperty("color")&&(X.color=P.color);var ee=x.castOption(w,P.i,"text");return(x.isValidTextValue(ee)||ee==="")&&(X.text=ee),X.customdata=x.castOption(w,P.i,"customdata"),x.texttemplateString(J,X,S._d3locale,X,w._meta||{})}},29969:function($,R,e){var A=e(39898),k=e(7901),l=e(71828),T=e(72597).resizeText;function x(d,s,t){var o=s.data.data,r=!s.children,n=o.i,a=l.castOption(t,n,"marker.line.color")||k.defaultLine,i=l.castOption(t,n,"marker.line.width")||0;d.style("stroke-width",i).call(k.fill,o.color).call(k.stroke,a).style("opacity",r?t.leaf.opacity:null)}$.exports={style:function(d){var s=d._fullLayout._sunburstlayer.selectAll(".trace");T(d,s,"sunburst"),s.each(function(t){var o=A.select(this),r=t[0].trace;o.style("opacity",r.opacity),o.selectAll("path.surface").each(function(n){A.select(this).call(x,n,r)})})},styleOne:x}},54532:function($,R,e){var A=e(7901),k=e(50693),l=e(12663).axisHoverFormat,T=e(5386).f,x=e(9012),d=e(1426).extendFlat,s=e(30962).overrideAll;function t(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:A.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:A.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var o=$.exports=s(d({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:d({},k.zauto,{}),zmin:d({},k.zmin,{}),zmax:d({},k.zmax,{})},hoverinfo:d({},x.hoverinfo),showlegend:d({},x.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes",o.transforms=void 0},18396:function($,R,e){var A=e(78803);$.exports=function(k,l){l.surfacecolor?A(k,l,{vals:l.surfacecolor,containerStr:"",cLetter:"c"}):A(k,l,{vals:l.z,containerStr:"",cLetter:"c"})}},43768:function($,R,e){var A=e(9330).gl_surface3d,k=e(9330).ndarray,l=e(9330).ndarray_linear_interpolate.d2,T=e(824),x=e(43907),d=e(71828).isArrayOrTypedArray,s=e(81697).parseColorScale,t=e(78614),o=e(21081).extractOpts;function r(w,u,S){this.scene=w,this.uid=S,this.surface=u,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(w,u,S,_){var E=d(this.data.x)?d(this.data.x[0])?this.data.x[u][w]:this.data.x[w]:w;return S===void 0?E:_.d2l(E,0,S)},n.getYat=function(w,u,S,_){var E=d(this.data.y)?d(this.data.y[0])?this.data.y[u][w]:this.data.y[u]:u;return S===void 0?E:_.d2l(E,0,S)},n.getZat=function(w,u,S,_){var E=this.data.z[u][w];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[u][w]),S===void 0?E:_.d2l(E,0,S)},n.handlePick=function(w){if(w.object===this.surface){var u=(w.data.index[0]-1)/this.dataScaleX-1,S=(w.data.index[1]-1)/this.dataScaleY-1,_=Math.max(Math.min(Math.round(u),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);w.index=[_,E],w.traceCoordinate=[this.getXat(_,E),this.getYat(_,E),this.getZat(_,E)],w.dataCoordinate=[this.getXat(_,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(_,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(_,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var L=0;L<3;L++)w.dataCoordinate[L]!=null&&(w.dataCoordinate[L]*=this.scene.dataScale[L]);var C=this.data.hovertext||this.data.text;return Array.isArray(C)&&C[E]&&C[E][_]!==void 0?w.textLabel=C[E][_]:w.textLabel=C||"",w.data.dataCoordinate=w.dataCoordinate.slice(),this.surface.highlight(w.data),this.scene.glplot.spikes.position=w.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function i(w,u){if(w<u)return 0;for(var S=0;Math.floor(w%u)===0;)w/=u,S++;return S}function c(w){for(var u=[],S=0;S<a.length;S++){var _=a[S];u.push(i(w,_))}return u}function h(w){for(var u=c(w),S=w,_=0;_<a.length;_++)if(u[_]>0){S=a[_];break}return S}function f(w,u){if(!(w<1||u<1)){for(var S=c(w),_=c(u),E=1,L=0;L<a.length;L++)E*=Math.pow(a[L],Math.max(S[L],_[L]));return E}}n.calcXnums=function(w){var u,S=[];for(u=1;u<w;u++){var _=this.getXat(u-1,0),E=this.getXat(u,0);S[u-1]=E!==_&&_!=null&&E!=null?Math.abs(E-_):0}var L=0;for(u=1;u<w;u++)L+=S[u-1];for(u=1;u<w;u++)S[u-1]===0?S[u-1]=1:S[u-1]=Math.round(L/S[u-1]);return S},n.calcYnums=function(w){var u,S=[];for(u=1;u<w;u++){var _=this.getYat(0,u-1),E=this.getYat(0,u);S[u-1]=E!==_&&_!=null&&E!=null?Math.abs(E-_):0}var L=0;for(u=1;u<w;u++)L+=S[u-1];for(u=1;u<w;u++)S[u-1]===0?S[u-1]=1:S[u-1]=Math.round(L/S[u-1]);return S};var b=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],v=b[9],g=b[13];function y(w,u,S){var _=S[8]+S[2]*u[0]+S[5]*u[1];return w[0]=(S[6]+S[0]*u[0]+S[3]*u[1])/_,w[1]=(S[7]+S[1]*u[0]+S[4]*u[1])/_,w}function p(w,u,S){return function(_,E,L,C){for(var P=[0,0],I=_.shape[0],U=_.shape[1],z=0;z<I;z++)for(var H=0;H<U;H++)L(P,[z,H],C),_.set(z,H,l(E,P[0],P[1]))}(w,u,y,S),w}function m(w,u){for(var S=!1,_=0;_<w.length;_++)if(u===w[_]){S=!0;break}S===!1&&w.push(u)}n.estimateScale=function(w,u){for(var S=1+function(E){if(E.length!==0){for(var L=1,C=0;C<E.length;C++)L=f(L,E[C]);return L}}(u===0?this.calcXnums(w):this.calcYnums(w));S<v;)S*=2;for(;S>g;)S--,S/=h(S),++S<v&&(S=g);var _=Math.round(S/w);return _>1?_:1},n.refineCoords=function(w){for(var u=this.dataScaleX,S=this.dataScaleY,_=w[0].shape[0],E=w[0].shape[1],L=0|Math.floor(w[0].shape[0]*u+1),C=0|Math.floor(w[0].shape[1]*S+1),P=1+_+1,I=1+E+1,U=k(new Float32Array(P*I),[P,I]),z=[1/u,0,0,0,1/S,0,0,0,1],H=0;H<w.length;++H){this.surface.padField(U,w[H]);var F=k(new Float32Array(L*C),[L,C]);p(F,U,z),w[H]=F}},n.setContourLevels=function(){var w,u,S,_=[[],[],[]],E=[!1,!1,!1],L=!1;for(w=0;w<3;++w)if(this.showContour[w]&&(L=!0,this.contourSize[w]>0&&this.contourStart[w]!==null&&this.contourEnd[w]!==null&&this.contourEnd[w]>this.contourStart[w]))for(E[w]=!0,u=this.contourStart[w];u<this.contourEnd[w];u+=this.contourSize[w])S=u*this.scene.dataScale[w],m(_[w],S);if(L){var C=[[],[],[]];for(w=0;w<3;++w)this.showContour[w]&&(C[w]=E[w]?_[w]:this.scene.contourLevels[w]);this.surface.update({levels:C})}},n.update=function(w){var u,S,_,E,L=this.scene,C=L.fullSceneLayout,P=this.surface,I=s(w),U=L.dataScale,z=w.z[0].length,H=w._ylength,F=L.contourLevels;this.data=w;var N=[];for(u=0;u<3;u++)for(N[u]=[],S=0;S<z;S++)N[u][S]=[];for(S=0;S<z;S++)for(_=0;_<H;_++)N[0][S][_]=this.getXat(S,_,w.xcalendar,C.xaxis),N[1][S][_]=this.getYat(S,_,w.ycalendar,C.yaxis),N[2][S][_]=this.getZat(S,_,w.zcalendar,C.zaxis);if(w.connectgaps)for(w._emptypoints=x(N[2]),T(N[2],w._emptypoints),w._interpolatedZ=[],S=0;S<z;S++)for(w._interpolatedZ[S]=[],_=0;_<H;_++)w._interpolatedZ[S][_]=N[2][S][_];for(u=0;u<3;u++)for(S=0;S<z;S++)for(_=0;_<H;_++)(E=N[u][S][_])==null?N[u][S][_]=NaN:E=N[u][S][_]*=U[u];for(u=0;u<3;u++)for(S=0;S<z;S++)for(_=0;_<H;_++)(E=N[u][S][_])!=null&&(this.minValues[u]>E&&(this.minValues[u]=E),this.maxValues[u]<E&&(this.maxValues[u]=E));for(u=0;u<3;u++)this.objectOffset[u]=.5*(this.minValues[u]+this.maxValues[u]);for(u=0;u<3;u++)for(S=0;S<z;S++)for(_=0;_<H;_++)(E=N[u][S][_])!=null&&(N[u][S][_]-=this.objectOffset[u]);var B=[k(new Float32Array(z*H),[z,H]),k(new Float32Array(z*H),[z,H]),k(new Float32Array(z*H),[z,H])];for(u=0;u<3;u++)for(S=0;S<z;S++)for(_=0;_<H;_++)B[u].set(S,_,N[u][S][_]);N=[];var j={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity},K=o(w);if(j.intensityBounds=[K.min,K.max],w.surfacecolor){var G=k(new Float32Array(z*H),[z,H]);for(S=0;S<z;S++)for(_=0;_<H;_++)G.set(S,_,w.surfacecolor[_][S]);B.push(G)}else j.intensityBounds[0]*=U[2],j.intensityBounds[1]*=U[2];(g<B[0].shape[0]||g<B[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(B[0].shape[0],0),this.dataScaleY=this.estimateScale(B[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(B)),w.surfacecolor&&(j.intensity=B.pop());var V=[!0,!0,!0],W=["x","y","z"];for(u=0;u<3;++u){var J=w.contours[W[u]];V[u]=J.highlight,j.showContour[u]=J.show||J.highlight,j.showContour[u]&&(j.contourProject[u]=[J.project.x,J.project.y,J.project.z],J.show?(this.showContour[u]=!0,j.levels[u]=F[u],P.highlightColor[u]=j.contourColor[u]=t(J.color),J.usecolormap?P.highlightTint[u]=j.contourTint[u]=0:P.highlightTint[u]=j.contourTint[u]=1,j.contourWidth[u]=J.width,this.contourStart[u]=J.start,this.contourEnd[u]=J.end,this.contourSize[u]=J.size):(this.showContour[u]=!1,this.contourStart[u]=null,this.contourEnd[u]=null,this.contourSize[u]=0),J.highlight&&(j.dynamicColor[u]=t(J.highlightcolor),j.dynamicWidth[u]=J.highlightwidth))}(function(X){var ee=X[0].rgb,re=X[X.length-1].rgb;return ee[0]===re[0]&&ee[1]===re[1]&&ee[2]===re[2]&&ee[3]===re[3]})(I)&&(j.vertexColor=!0),j.objectOffset=this.objectOffset,j.coords=B,P.update(j),P.visible=w.visible,P.enableDynamic=V,P.enableHighlight=V,P.snapToData=!0,"lighting"in w&&(P.ambientLight=w.lighting.ambient,P.diffuseLight=w.lighting.diffuse,P.specularLight=w.lighting.specular,P.roughness=w.lighting.roughness,P.fresnel=w.lighting.fresnel),"lightposition"in w&&(P.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},$.exports=function(w,u){var S=w.glplot.gl,_=A({gl:S}),E=new r(w,_,u.uid);return _._trace=E,E.update(u),w.glplot.add(_),E}},91831:function($,R,e){var A=e(73972),k=e(71828),l=e(1586),T=e(54532);function x(s,t,o,r){var n=r("opacityscale");n==="max"?t.opacityscale=[[0,.1],[1,1]]:n==="min"?t.opacityscale=[[0,1],[1,.1]]:n==="extremes"?t.opacityscale=function(a,i){for(var c=[],h=0;h<32;h++){var f=h/31,b=.1+.9*(1-Math.pow(Math.sin(1*f*Math.PI),2));c.push([f,Math.max(0,Math.min(1,b))])}return c}():function(a){var i=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var c=0;c<a.length;c++){var h=a[c];if(h.length!==2||+h[0]<i)return!1;i=+h[0]}return!0}(n)||(t.opacityscale=void 0)}function d(s,t,o){t in s&&!(o in s)&&(s[o]=s[t])}$.exports={supplyDefaults:function(s,t,o,r){var n,a;function i(m,w){return k.coerce(s,t,T,m,w)}var c=i("x"),h=i("y"),f=i("z");if(!f||!f.length||c&&c.length<1||h&&h.length<1)t.visible=!1;else{t._xlength=Array.isArray(c)&&k.isArrayOrTypedArray(c[0])?f.length:f[0].length,t._ylength=f.length,A.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],r),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){i(m)});var b=i("surfacecolor"),v=["x","y","z"];for(n=0;n<3;++n){var g="contours."+v[n],y=i(g+".show"),p=i(g+".highlight");if(y||p)for(a=0;a<3;++a)i(g+".project."+v[a]);y&&(i(g+".color"),i(g+".width"),i(g+".usecolormap")),p&&(i(g+".highlightcolor"),i(g+".highlightwidth")),i(g+".start"),i(g+".end"),i(g+".size")}b||(d(s,"zmin","cmin"),d(s,"zmax","cmax"),d(s,"zauto","cauto")),l(s,t,r,i,{prefix:"",cLetter:"c"}),x(0,t,0,i),t._length=null}},opacityscaleDefaults:x}},93601:function($,R,e){$.exports={attributes:e(54532),supplyDefaults:e(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(18396),plot:e(43768),moduleType:"trace",name:"surface",basePlotModule:e(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function($,R,e){var A=e(50215),k=e(1426).extendFlat,l=e(30962).overrideAll,T=e(41940),x=e(27670).Y,d=e(12663).descriptionOnlyNumbers;($.exports=l({domain:x({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},A.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},A.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function($,R,e){var A=e(27659).a0,k=e(36736),l="table";R.name=l,R.plot=function(T){var x=A(T.calcdata,l)[0];x.length&&k(T,x)},R.clean=function(T,x,d,s){var t=s._has&&s._has(l),o=x._has&&x._has(l);t&&!o&&s._paperdiv.selectAll(".table").remove()}},76333:function($,R,e){var A=e(28984).wrap;$.exports=function(){return A({})}},49850:function($){$.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function($,R,e){var A=e(49850),k=e(1426).extendFlat,l=e(92770);function T(n){if(Array.isArray(n)){for(var a=0,i=0;i<n.length;i++)a=Math.max(a,T(n[i]));return a}return n}function x(n,a){return n+a}function d(n){var a,i=n.slice(),c=1/0,h=0;for(a=0;a<i.length;a++)Array.isArray(i[a])||(i[a]=[i[a]]),c=Math.min(c,i[a].length),h=Math.max(h,i[a].length);if(c!==h)for(a=0;a<i.length;a++){var f=h-i[a].length;f&&(i[a]=i[a].concat(s(f)))}return i}function s(n){for(var a=new Array(n),i=0;i<n;i++)a[i]="";return a}function t(n){return n.calcdata.columns.reduce(function(a,i){return i.xIndex<n.xIndex?a+i.columnWidth:a},0)}function o(n,a){return Object.keys(n).map(function(i){return k({},n[i],{auxiliaryBlocks:a})})}function r(n,a){for(var i,c={},h=0,f=0,b={firstRowIndex:null,lastRowIndex:null,rows:[]},v=0,g=0,y=0;y<n.length;y++)i=n[y],b.rows.push({rowIndex:y,rowHeight:i}),((f+=i)>=a||y===n.length-1)&&(c[h]=b,b.key=g++,b.firstRowIndex=v,b.lastRowIndex=y,b={firstRowIndex:null,lastRowIndex:null,rows:[]},h+=f,v=y+1,f=0);return c}$.exports=function(n,a){var i=d(a.cells.values),c=function(U){return U.slice(a.header.values.length,U.length)},h=d(a.header.values);h.length&&!h[0].length&&(h[0]=[""],h=d(h));var f=h.concat(c(i).map(function(){return s((h[0]||[""]).length)})),b=a.domain,v=Math.floor(n._fullLayout._size.w*(b.x[1]-b.x[0])),g=Math.floor(n._fullLayout._size.h*(b.y[1]-b.y[0])),y=a.header.values.length?f[0].map(function(){return a.header.height}):[A.emptyHeaderHeight],p=i.length?i[0].map(function(){return a.cells.height}):[],m=y.reduce(x,0),w=r(p,g-m+A.uplift),u=o(r(y,m),[]),S=o(w,u),_={},E=a._fullInput.columnorder.concat(c(i.map(function(U,z){return z}))),L=f.map(function(U,z){var H=Array.isArray(a.columnwidth)?a.columnwidth[Math.min(z,a.columnwidth.length-1)]:a.columnwidth;return l(H)?Number(H):1}),C=L.reduce(x,0);L=L.map(function(U){return U/C*v});var P=Math.max(T(a.header.line.width),T(a.cells.line.width)),I={key:a.uid+n._context.staticPlot,translateX:b.x[0]*n._fullLayout._size.w,translateY:n._fullLayout._size.h*(1-b.y[1]),size:n._fullLayout._size,width:v,maxLineWidth:P,height:g,columnOrder:E,groupHeight:g,rowBlocks:S,headerRowBlocks:u,scrollY:0,cells:k({},a.cells,{values:i}),headerCells:k({},a.header,{values:f}),gdColumns:f.map(function(U){return U[0]}),gdColumnsOriginalOrder:f.map(function(U){return U[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:f.map(function(U,z){var H=_[U];return _[U]=(H||0)+1,{key:U+"__"+_[U],label:U,specIndex:z,xIndex:E[z],xScale:t,x:void 0,calcdata:void 0,columnWidth:L[z]}})};return I.columns.forEach(function(U){U.calcdata=I,U.x=t(U)}),I}},56269:function($,R,e){var A=e(1426).extendFlat;R.splitToPanels=function(k){var l=[0,0],T=A({},k,{key:"header",type:"header",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:A({},k.calcdata,{cells:k.calcdata.headerCells})});return[A({},k,{key:"cells1",type:"cells",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),A({},k,{key:"cells2",type:"cells",page:1,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},R.splitToCells=function(k){var l=function(T){var x=T.rowBlocks[T.page],d=x?x.rows[0].rowIndex:0;return[d,x?d+x.rows.length:0]}(k);return(k.values||[]).slice(l[0],l[1]).map(function(T,x){return{keyWithinBlock:x+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:l[0]+x,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},39754:function($,R,e){var A=e(71828),k=e(44464),l=e(27670).c;$.exports=function(T,x,d,s){function t(o,r){return A.coerce(T,x,k,o,r)}l(x,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),A.coerceFont(t,"header.font",A.extendFlat({},s.font)),function(o,r){for(var n=o.columnorder||[],a=o.header.values.length,i=n.slice(0,a),c=i.slice().sort(function(b,v){return b-v}),h=i.map(function(b){return c.indexOf(b)}),f=h.length;f<a;f++)h.push(f);r("columnorder",h)}(x,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),A.coerceFont(t,"cells.font",A.extendFlat({},s.font)),x._length=null}},96595:function($,R,e){$.exports={attributes:e(44464),supplyDefaults:e(39754),calc:e(76333),plot:e(36736),moduleType:"trace",name:"table",basePlotModule:e(99469),categories:["noOpacity"],meta:{}}},36736:function($,R,e){var A=e(49850),k=e(39898),l=e(71828).numberFormat,T=e(28984),x=e(91424),d=e(63893),s=e(71828).raiseToTop,t=e(71828).strTranslate,o=e(71828).cancelTransition,r=e(51018),n=e(56269),a=e(7901);function i(B){return Math.ceil(B.calcdata.maxLineWidth/2)}function c(B,j){return"clip"+B._fullLayout._uid+"_scrollAreaBottomClip_"+j.key}function h(B,j){return"clip"+B._fullLayout._uid+"_columnBoundaryClippath_"+j.calcdata.key+"_"+j.specIndex}function f(B){return[].concat.apply([],B.map(function(j){return j})).map(function(j){return j.__data__})}function b(B,j,K){var G=B.selectAll("."+A.cn.scrollbarKit).data(T.repeat,T.keyFun);G.enter().append("g").classed(A.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),G.each(function(ee){var re=ee.scrollbarState;re.totalHeight=function(ie){var se=ie.rowBlocks;return z(se,se.length-1)+(se.length?H(se[se.length-1],1/0):1)}(ee),re.scrollableAreaHeight=ee.groupHeight-S(ee),re.currentlyVisibleHeight=Math.min(re.totalHeight,re.scrollableAreaHeight),re.ratio=re.currentlyVisibleHeight/re.totalHeight,re.barLength=Math.max(re.ratio*re.currentlyVisibleHeight,A.goldenRatio*A.scrollbarWidth),re.barWiggleRoom=re.currentlyVisibleHeight-re.barLength,re.wiggleRoom=Math.max(0,re.totalHeight-re.scrollableAreaHeight),re.topY=re.barWiggleRoom===0?0:ee.scrollY/re.wiggleRoom*re.barWiggleRoom,re.bottomY=re.topY+re.barLength,re.dragMultiplier=re.wiggleRoom/re.barWiggleRoom}).attr("transform",function(ee){var re=ee.width+A.scrollbarWidth/2+A.scrollbarOffset;return t(re,S(ee))});var V=G.selectAll("."+A.cn.scrollbar).data(T.repeat,T.keyFun);V.enter().append("g").classed(A.cn.scrollbar,!0);var W=V.selectAll("."+A.cn.scrollbarSlider).data(T.repeat,T.keyFun);W.enter().append("g").classed(A.cn.scrollbarSlider,!0),W.attr("transform",function(ee){return t(0,ee.scrollbarState.topY||0)});var J=W.selectAll("."+A.cn.scrollbarGlyph).data(T.repeat,T.keyFun);J.enter().append("line").classed(A.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",A.scrollbarWidth).attr("stroke-linecap","round").attr("y1",A.scrollbarWidth/2),J.attr("y2",function(ee){return ee.scrollbarState.barLength-A.scrollbarWidth/2}).attr("stroke-opacity",function(ee){return ee.columnDragInProgress||!ee.scrollbarState.barWiggleRoom||K?0:.4}),J.transition().delay(0).duration(0),J.transition().delay(A.scrollbarHideDelay).duration(A.scrollbarHideDuration).attr("stroke-opacity",0);var X=V.selectAll("."+A.cn.scrollbarCaptureZone).data(T.repeat,T.keyFun);X.enter().append("line").classed(A.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",A.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ee){var re=k.event.y,ie=this.getBoundingClientRect(),se=ee.scrollbarState,fe=re-ie.top,ye=k.scale.linear().domain([0,se.scrollableAreaHeight]).range([0,se.totalHeight]).clamp(!0);se.topY<=fe&&fe<=se.bottomY||E(j,B,null,ye(fe-se.barLength/2))(ee)}).call(k.behavior.drag().origin(function(ee){return k.event.stopPropagation(),ee.scrollbarState.scrollbarScrollInProgress=!0,ee}).on("drag",E(j,B)).on("dragend",function(){})),X.attr("y2",function(ee){return ee.scrollbarState.scrollableAreaHeight}),j._context.staticPlot&&(J.remove(),X.remove())}function v(B,j,K,G){var V=function(re){var ie=re.selectAll("."+A.cn.columnCells).data(T.repeat,T.keyFun);return ie.enter().append("g").classed(A.cn.columnCells,!0),ie.exit().remove(),ie}(K),W=function(re){var ie=re.selectAll("."+A.cn.columnCell).data(n.splitToCells,function(se){return se.keyWithinBlock});return ie.enter().append("g").classed(A.cn.columnCell,!0),ie.exit().remove(),ie}(V);(function(re){re.each(function(ie,se){var fe=ie.calcdata.cells.font,ye=ie.column.specIndex,ge={size:p(fe.size,ye,se),color:p(fe.color,ye,se),family:p(fe.family,ye,se)};ie.rowNumber=ie.key,ie.align=p(ie.calcdata.cells.align,ye,se),ie.cellBorderWidth=p(ie.calcdata.cells.line.width,ye,se),ie.font=ge})})(W);var J=function(re){var ie=re.selectAll("."+A.cn.cellRect).data(T.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("rect").classed(A.cn.cellRect,!0),ie}(W);(function(re){re.attr("width",function(ie){return ie.column.columnWidth}).attr("stroke-width",function(ie){return ie.cellBorderWidth}).each(function(ie){var se=k.select(this);a.stroke(se,p(ie.calcdata.cells.line.color,ie.column.specIndex,ie.rowNumber)),a.fill(se,p(ie.calcdata.cells.fill.color,ie.column.specIndex,ie.rowNumber))})})(J);var X=function(re){var ie=re.selectAll("."+A.cn.cellTextHolder).data(T.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("g").classed(A.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ie}(W),ee=function(re){var ie=re.selectAll("."+A.cn.cellText).data(T.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("text").classed(A.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ie}(X);(function(re){re.each(function(ie){x.font(k.select(this),ie.font)})})(ee),g(ee,j,G,B),U(W)}function g(B,j,K,G){B.text(function(V){var W=V.column.specIndex,J=V.rowNumber,X=V.value,ee=typeof X=="string",re=ee&&X.match(/<br>/i),ie=!ee||re;V.mayHaveMarkup=ee&&X.match(/[<&>]/);var se,fe=typeof(se=X)=="string"&&se.match(A.latexCheck);V.latex=fe;var ye,ge,he=fe?"":p(V.calcdata.cells.prefix,W,J)||"",ve=fe?"":p(V.calcdata.cells.suffix,W,J)||"",Ie=fe?null:p(V.calcdata.cells.format,W,J)||null,xe=he+(Ie?l(Ie)(V.value):V.value)+ve;if(V.wrappingNeeded=!V.wrapped&&!ie&&!fe&&(ye=y(xe)),V.cellHeightMayIncrease=re||fe||V.mayHaveMarkup||(ye===void 0?y(xe):ye),V.needsConvertToTspans=V.mayHaveMarkup||V.wrappingNeeded||V.latex,V.wrappingNeeded){var Ae=(A.wrapSplitCharacter===" "?xe.replace(/<a href=/gi,"<a_href="):xe).split(A.wrapSplitCharacter),Se=A.wrapSplitCharacter===" "?Ae.map(function(Te){return Te.replace(/<a_href=/gi,"<a href=")}):Ae;V.fragments=Se.map(function(Te){return{text:Te,width:null}}),V.fragments.push({fragment:A.wrapSpacer,width:null}),ge=Se.join(A.lineBreaker)+A.lineBreaker+A.wrapSpacer}else delete V.fragments,ge=xe;return ge}).attr("dy",function(V){return V.needsConvertToTspans?0:"0.75em"}).each(function(V){var W=this,J=k.select(W),X=V.wrappingNeeded?C:P;V.needsConvertToTspans?d.convertToTspans(J,G,X(K,W,j,G,V)):k.select(W.parentNode).attr("transform",function(ee){return t(I(ee),A.cellPad)}).attr("text-anchor",function(ee){return{left:"start",center:"middle",right:"end"}[ee.align]})})}function y(B){return B.indexOf(A.wrapSplitCharacter)!==-1}function p(B,j,K){if(Array.isArray(B)){var G=B[Math.min(j,B.length-1)];return Array.isArray(G)?G[Math.min(K,G.length-1)]:G}return B}function m(B,j,K){B.transition().ease(A.releaseTransitionEase).duration(A.releaseTransitionDuration).attr("transform",t(j.x,K))}function w(B){return B.type==="cells"}function u(B){return B.type==="header"}function S(B){return(B.rowBlocks.length?B.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(j,K){return j+H(K,1/0)},0)}function _(B,j,K){var G=f(j)[0];if(G!==void 0){var V=G.rowBlocks,W=G.calcdata,J=z(V,V.length),X=G.calcdata.groupHeight-S(G),ee=W.scrollY=Math.max(0,Math.min(J-X,W.scrollY)),re=function(ie,se,fe){for(var ye=[],ge=0,he=0;he<ie.length;he++){for(var ve=ie[he],Ie=ve.rows,xe=0,Ae=0;Ae<Ie.length;Ae++)xe+=Ie[Ae].rowHeight;ve.allRowsHeight=xe,se<ge+xe&&se+fe>ge&&ye.push(he),ge+=xe}return ye}(V,ee,X);re.length===1&&(re[0]===V.length-1?re.unshift(re[0]-1):re.push(re[0]+1)),re[0]%2&&re.reverse(),j.each(function(ie,se){ie.page=re[se],ie.scrollY=ee}),j.attr("transform",function(ie){var se=z(ie.rowBlocks,ie.page)-ie.scrollY;return t(0,se)}),B&&(L(B,K,j,re,G.prevPages,G,0),L(B,K,j,re,G.prevPages,G,1),b(K,B))}}function E(B,j,K,G){return function(V){var W=V.calcdata?V.calcdata:V,J=j.filter(function(ie){return W.key===ie.key}),X=K||W.scrollbarState.dragMultiplier,ee=W.scrollY;W.scrollY=G===void 0?W.scrollY+X*k.event.dy:G;var re=J.selectAll("."+A.cn.yColumn).selectAll("."+A.cn.columnBlock).filter(w);return _(B,re,J),W.scrollY===ee}}function L(B,j,K,G,V,W,J){G[J]!==V[J]&&(clearTimeout(W.currentRepaint[J]),W.currentRepaint[J]=setTimeout(function(){var X=K.filter(function(ee,re){return re===J&&G[re]!==V[re]});v(B,j,X,K),V[J]=G[J]}))}function C(B,j,K,G){return function(){var V=k.select(j.parentNode);V.each(function(W){var J=W.fragments;V.selectAll("tspan.line").each(function(ge,he){J[he].width=this.getComputedTextLength()});var X,ee,re=J[J.length-1].width,ie=J.slice(0,-1),se=[],fe=0,ye=W.column.columnWidth-2*A.cellPad;for(W.value="";ie.length;)fe+(ee=(X=ie.shift()).width+re)>ye&&(W.value+=se.join(A.wrapSpacer)+A.lineBreaker,se=[],fe=0),se.push(X.text),fe+=ee;fe&&(W.value+=se.join(A.wrapSpacer)),W.wrapped=!0}),V.selectAll("tspan.line").remove(),g(V.select("."+A.cn.cellText),K,B,G),k.select(j.parentNode.parentNode).call(U)}}function P(B,j,K,G,V){return function(){if(!V.settledY){var W=k.select(j.parentNode),J=N(V),X=V.key-J.firstRowIndex,ee=J.rows[X].rowHeight,re=V.cellHeightMayIncrease?j.parentNode.getBoundingClientRect().height+2*A.cellPad:ee,ie=Math.max(re,ee);ie-J.rows[X].rowHeight&&(J.rows[X].rowHeight=ie,B.selectAll("."+A.cn.columnCell).call(U),_(null,B.filter(w),0),b(K,G,!0)),W.attr("transform",function(){var se=this,fe=se.parentNode.getBoundingClientRect(),ye=k.select(se.parentNode).select("."+A.cn.cellRect).node().getBoundingClientRect(),ge=se.transform.baseVal.consolidate(),he=ye.top-fe.top+(ge?ge.matrix.f:A.cellPad);return t(I(V,k.select(se.parentNode).select("."+A.cn.cellTextHolder).node().getBoundingClientRect().width),he)}),V.settledY=!0}}}function I(B,j){switch(B.align){case"left":default:return A.cellPad;case"right":return B.column.columnWidth-(j||0)-A.cellPad;case"center":return(B.column.columnWidth-(j||0))/2}}function U(B){B.attr("transform",function(j){var K=j.rowBlocks[0].auxiliaryBlocks.reduce(function(V,W){return V+H(W,1/0)},0),G=H(N(j),j.key);return t(0,G+K)}).selectAll("."+A.cn.cellRect).attr("height",function(j){return(K=N(j),G=j.key,K.rows[G-K.firstRowIndex]).rowHeight;var K,G})}function z(B,j){for(var K=0,G=j-1;G>=0;G--)K+=F(B[G]);return K}function H(B,j){for(var K=0,G=0;G<B.rows.length&&B.rows[G].rowIndex<j;G++)K+=B.rows[G].rowHeight;return K}function F(B){var j=B.allRowsHeight;if(j!==void 0)return j;for(var K=0,G=0;G<B.rows.length;G++)K+=B.rows[G].rowHeight;return B.allRowsHeight=K,K}function N(B){return B.rowBlocks[B.page]}$.exports=function(B,j){var K=!B._context.staticPlot,G=B._fullLayout._paper.selectAll("."+A.cn.table).data(j.map(function(ve){var Ie=T.unwrap(ve).trace;return r(B,Ie)}),T.keyFun);G.exit().remove(),G.enter().append("g").classed(A.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),G.attr("width",function(ve){return ve.width+ve.size.l+ve.size.r}).attr("height",function(ve){return ve.height+ve.size.t+ve.size.b}).attr("transform",function(ve){return t(ve.translateX,ve.translateY)});var V=G.selectAll("."+A.cn.tableControlView).data(T.repeat,T.keyFun),W=V.enter().append("g").classed(A.cn.tableControlView,!0).style("box-sizing","content-box");if(K){var J="onwheel"in document?"wheel":"mousewheel";W.on("mousemove",function(ve){V.filter(function(Ie){return ve===Ie}).call(b,B)}).on(J,function(ve){if(!ve.scrollbarState.wheeling){ve.scrollbarState.wheeling=!0;var Ie=ve.scrollY+k.event.deltaY;E(B,V,null,Ie)(ve)||(k.event.stopPropagation(),k.event.preventDefault()),ve.scrollbarState.wheeling=!1}}).call(b,B,!0)}V.attr("transform",function(ve){return t(ve.size.l,ve.size.t)});var X=V.selectAll("."+A.cn.scrollBackground).data(T.repeat,T.keyFun);X.enter().append("rect").classed(A.cn.scrollBackground,!0).attr("fill","none"),X.attr("width",function(ve){return ve.width}).attr("height",function(ve){return ve.height}),V.each(function(ve){x.setClipUrl(k.select(this),c(B,ve),B)});var ee=V.selectAll("."+A.cn.yColumn).data(function(ve){return ve.columns},T.keyFun);ee.enter().append("g").classed(A.cn.yColumn,!0),ee.exit().remove(),ee.attr("transform",function(ve){return t(ve.x,0)}),K&&ee.call(k.behavior.drag().origin(function(ve){return m(k.select(this),ve,-A.uplift),s(this),ve.calcdata.columnDragInProgress=!0,b(V.filter(function(Ie){return ve.calcdata.key===Ie.key}),B),ve}).on("drag",function(ve){var Ie=k.select(this),xe=function(Ae){return(ve===Ae?k.event.x:Ae.x)+Ae.columnWidth/2};ve.x=Math.max(-A.overdrag,Math.min(ve.calcdata.width+A.overdrag-ve.columnWidth,k.event.x)),f(ee).filter(function(Ae){return Ae.calcdata.key===ve.calcdata.key}).sort(function(Ae,Se){return xe(Ae)-xe(Se)}).forEach(function(Ae,Se){Ae.xIndex=Se,Ae.x=ve===Ae?Ae.x:Ae.xScale(Ae)}),ee.filter(function(Ae){return ve!==Ae}).transition().ease(A.transitionEase).duration(A.transitionDuration).attr("transform",function(Ae){return t(Ae.x,0)}),Ie.call(o).attr("transform",t(ve.x,-A.uplift))}).on("dragend",function(ve){var Ie=k.select(this),xe=ve.calcdata;ve.x=ve.xScale(ve),ve.calcdata.columnDragInProgress=!1,m(Ie,ve,0),function(Ae,Se,Te){var Q=Se.gdColumnsOriginalOrder;Se.gdColumns.sort(function(oe,ce){return Te[Q.indexOf(oe)]-Te[Q.indexOf(ce)]}),Se.columnorder=Te,Ae.emit("plotly_restyle")}(B,xe,xe.columns.map(function(Ae){return Ae.xIndex}))})),ee.each(function(ve){x.setClipUrl(k.select(this),h(B,ve),B)});var re=ee.selectAll("."+A.cn.columnBlock).data(n.splitToPanels,T.keyFun);re.enter().append("g").classed(A.cn.columnBlock,!0).attr("id",function(ve){return ve.key}),re.style("cursor",function(ve){return ve.dragHandle?"ew-resize":ve.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ie=re.filter(u),se=re.filter(w);K&&se.call(k.behavior.drag().origin(function(ve){return k.event.stopPropagation(),ve}).on("drag",E(B,V,-1)).on("dragend",function(){})),v(B,V,ie,re),v(B,V,se,re);var fe=V.selectAll("."+A.cn.scrollAreaClip).data(T.repeat,T.keyFun);fe.enter().append("clipPath").classed(A.cn.scrollAreaClip,!0).attr("id",function(ve){return c(B,ve)});var ye=fe.selectAll("."+A.cn.scrollAreaClipRect).data(T.repeat,T.keyFun);ye.enter().append("rect").classed(A.cn.scrollAreaClipRect,!0).attr("x",-A.overdrag).attr("y",-A.uplift).attr("fill","none"),ye.attr("width",function(ve){return ve.width+2*A.overdrag}).attr("height",function(ve){return ve.height+A.uplift}),ee.selectAll("."+A.cn.columnBoundary).data(T.repeat,T.keyFun).enter().append("g").classed(A.cn.columnBoundary,!0);var ge=ee.selectAll("."+A.cn.columnBoundaryClippath).data(T.repeat,T.keyFun);ge.enter().append("clipPath").classed(A.cn.columnBoundaryClippath,!0),ge.attr("id",function(ve){return h(B,ve)});var he=ge.selectAll("."+A.cn.columnBoundaryRect).data(T.repeat,T.keyFun);he.enter().append("rect").classed(A.cn.columnBoundaryRect,!0).attr("fill","none"),he.attr("width",function(ve){return ve.columnWidth+2*i(ve)}).attr("height",function(ve){return ve.calcdata.height+2*i(ve)+A.uplift}).attr("x",function(ve){return-i(ve)}).attr("y",function(ve){return-i(ve)}),_(null,se,V)}},45802:function($,R,e){var A=e(5386).f,k=e(5386).s,l=e(50693),T=e(27670).Y,x=e(34e3),d=e(57564),s=e(43473),t=e(1426).extendFlat;$.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:d.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:d.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},x.textfont,{}),editType:"calc"},text:x.text,textinfo:d.textinfo,texttemplate:k({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:x.hovertext,hoverinfo:d.hoverinfo,hovertemplate:A({},{keys:s.eventDataKeys}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:t({},x.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:x.sort,root:d.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},78018:function($,R,e){var A=e(74875);R.name="treemap",R.plot=function(k,l,T,x){A.plotBasePlot(R.name,k,l,T,x)},R.clean=function(k,l,T,x){A.cleanBasePlot(R.name,k,l,T,x)}},65039:function($,R,e){var A=e(52147);R.y=function(k,l){return A.calc(k,l)},R.T=function(k){return A._runCrossTraceCalc("treemap",k)}},43473:function($){$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function($,R,e){var A=e(71828),k=e(45802),l=e(7901),T=e(27670).c,x=e(90769).handleText,d=e(97313).TEXTPAD,s=e(21081),t=s.hasColorscale,o=s.handleDefaults;$.exports=function(r,n,a,i){function c(w,u){return A.coerce(r,n,k,w,u)}var h=c("labels"),f=c("parents");if(h&&h.length&&f&&f.length){var b=c("values");b&&b.length?c("branchvalues"):c("count"),c("level"),c("maxdepth"),c("tiling.packing")==="squarify"&&c("tiling.squarifyratio"),c("tiling.flip"),c("tiling.pad");var v=c("text");c("texttemplate"),n.texttemplate||c("textinfo",Array.isArray(v)?"text+label":"label"),c("hovertext"),c("hovertemplate");var g=c("pathbar.visible");x(r,n,i,c,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition");var y=n.textposition.indexOf("bottom")!==-1;c("marker.line.width")&&c("marker.line.color",i.paper_bgcolor);var p=c("marker.colors");(n._hasColorscale=t(r,"marker","colors")||(r.marker||{}).coloraxis)?o(r,n,i,c,{prefix:"marker.",cLetter:"c"}):c("marker.depthfade",!(p||[]).length);var m=2*n.textfont.size;c("marker.pad.t",y?m/4:m),c("marker.pad.l",m/4),c("marker.pad.r",m/4),c("marker.pad.b",y?m:m/4),c("marker.cornerradius"),n._hovered={marker:{line:{width:2,color:l.contrast(i.paper_bgcolor)}}},g&&(c("pathbar.thickness",n.pathbar.textfont.size+2*d),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),T(n,i,c),n._length=null}else n.visible=!1}},80694:function($,R,e){var A=e(39898),k=e(2791),l=e(72597).clearMinTextSize,T=e(16688).resizeText,x=e(46650);$.exports=function(d,s,t,o,r){var n,a,i=r.type,c=r.drawDescendants,h=d._fullLayout,f=h["_"+i+"layer"],b=!t;l(i,h),(n=f.selectAll("g.trace."+i).data(s,function(v){return v[0].trace.uid})).enter().append("g").classed("trace",!0).classed(i,!0),n.order(),!h.uniformtext.mode&&k.hasTransition(t)?(o&&(a=o()),A.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){f.selectAll("g.trace").each(function(v){x(d,v,this,t,c)})})):(n.each(function(v){x(d,v,this,t,c)}),h.uniformtext.mode&&T(d,f.selectAll(".trace"),i)),b&&n.exit().remove()}},66209:function($,R,e){var A=e(39898),k=e(71828),l=e(91424),T=e(63893),x=e(37210),d=e(96362).styleOne,s=e(43473),t=e(2791),o=e(83523),r=!0;$.exports=function(n,a,i,c,h){var f=h.barDifY,b=h.width,v=h.height,g=h.viewX,y=h.viewY,p=h.pathSlice,m=h.toMoveInsideSlice,w=h.strTransform,u=h.hasTransition,S=h.handleSlicesExit,_=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,L={},C=n._context.staticPlot,P=n._fullLayout,I=a[0],U=I.trace,z=I.hierarchy,H=b/U._entryDepth,F=t.listPath(i.data,"id"),N=x(z.copy(),[b,v],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(N=N.filter(function(j){var K=F.indexOf(j.data.id);return K!==-1&&(j.x0=H*K,j.x1=H*(K+1),j.y0=f,j.y1=f+v,j.onPathbar=!0,!0)})).reverse(),(c=c.data(N,t.getPtId)).enter().append("g").classed("pathbar",!0),S(c,r,L,[b,v],p),c.order();var B=c;u&&(B=B.transition().each("end",function(){var j=A.select(this);t.setSliceCursor(j,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),B.each(function(j){j._x0=g(j.x0),j._x1=g(j.x1),j._y0=y(j.y0),j._y1=y(j.y1),j._hoverX=g(j.x1-Math.min(b,v)/2),j._hoverY=y(j.y1-v/2);var K=A.select(this),G=k.ensureSingle(K,"path","surface",function(X){X.style("pointer-events",C?"none":"all")});u?G.transition().attrTween("d",function(X){var ee=_(X,r,L,[b,v]);return function(re){return p(ee(re))}}):G.attr("d",p),K.call(o,i,n,a,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),G.call(d,j,U,{hovered:!1}),j._text=(t.getPtLabel(j)||"").split("<br>").join(" ")||"";var V=k.ensureSingle(K,"g","slicetext"),W=k.ensureSingle(V,"text","",function(X){X.attr("data-notex",1)}),J=k.ensureUniformFontSize(n,t.determineTextFont(U,j,P.font,{onPathbar:!0}));W.text(j._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,J).call(T.convertToTspans,n),j.textBB=l.bBox(W.node()),j.transform=m(j,{fontSize:J.size,onPathbar:!0}),j.transform.fontSize=J.size,u?W.transition().attrTween("transform",function(X){var ee=E(X,r,L,[b,v]);return function(re){return w(ee(re))}}):W.attr("transform",w(j))})}},52583:function($,R,e){var A=e(39898),k=e(71828),l=e(91424),T=e(63893),x=e(37210),d=e(96362).styleOne,s=e(43473),t=e(2791),o=e(83523),r=e(24714).formatSliceLabel,n=!1;$.exports=function(a,i,c,h,f){var b=f.width,v=f.height,g=f.viewX,y=f.viewY,p=f.pathSlice,m=f.toMoveInsideSlice,w=f.strTransform,u=f.hasTransition,S=f.handleSlicesExit,_=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,C=a._context.staticPlot,P=a._fullLayout,I=i[0].trace,U=I.textposition.indexOf("left")!==-1,z=I.textposition.indexOf("right")!==-1,H=I.textposition.indexOf("bottom")!==-1,F=!H&&!I.marker.pad.t||H&&!I.marker.pad.b,N=x(c,[b,v],{packing:I.tiling.packing,squarifyratio:I.tiling.squarifyratio,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,pad:{inner:I.tiling.pad,top:I.marker.pad.t,left:I.marker.pad.l,right:I.marker.pad.r,bottom:I.marker.pad.b}}).descendants(),B=1/0,j=-1/0;N.forEach(function(J){var X=J.depth;X>=I._maxDepth?(J.x0=J.x1=(J.x0+J.x1)/2,J.y0=J.y1=(J.y0+J.y1)/2):(B=Math.min(B,X),j=Math.max(j,X))}),h=h.data(N,t.getPtId),I._maxVisibleLayers=isFinite(j)?j-B+1:0,h.enter().append("g").classed("slice",!0),S(h,n,{},[b,v],p),h.order();var K=null;if(u&&L){var G=t.getPtId(L);h.each(function(J){K===null&&t.getPtId(J)===G&&(K={x0:J.x0,x1:J.x1,y0:J.y0,y1:J.y1})})}var V=function(){return K||{x0:0,x1:b,y0:0,y1:v}},W=h;return u&&(W=W.transition().each("end",function(){var J=A.select(this);t.setSliceCursor(J,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),W.each(function(J){var X=t.isHeader(J,I);J._x0=g(J.x0),J._x1=g(J.x1),J._y0=y(J.y0),J._y1=y(J.y1),J._hoverX=g(J.x1-I.marker.pad.r),J._hoverY=y(H?J.y1-I.marker.pad.b/2:J.y0+I.marker.pad.t/2);var ee=A.select(this),re=k.ensureSingle(ee,"path","surface",function(ye){ye.style("pointer-events",C?"none":"all")});u?re.transition().attrTween("d",function(ye){var ge=_(ye,n,V(),[b,v]);return function(he){return p(ge(he))}}):re.attr("d",p),ee.call(o,c,a,i,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),re.call(d,J,I,{hovered:!1}),J.x0===J.x1||J.y0===J.y1?J._text="":J._text=X?F?"":t.getPtLabel(J)||"":r(J,c,I,i,P)||"";var ie=k.ensureSingle(ee,"g","slicetext"),se=k.ensureSingle(ie,"text","",function(ye){ye.attr("data-notex",1)}),fe=k.ensureUniformFontSize(a,t.determineTextFont(I,J,P.font));se.text(J._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":U||X?"start":"middle").call(l.font,fe).call(T.convertToTspans,a),J.textBB=l.bBox(se.node()),J.transform=m(J,{fontSize:fe.size,isHeader:X}),J.transform.fontSize=fe.size,u?se.transition().attrTween("transform",function(ye){var ge=E(ye,n,V(),[b,v]);return function(he){return w(ge(he))}}):se.attr("transform",w(J))}),K}},14102:function($){$.exports=function R(e,A,k){var l;k.swapXY&&(l=e.x0,e.x0=e.y0,e.y0=l,l=e.x1,e.x1=e.y1,e.y1=l),k.flipX&&(l=e.x0,e.x0=A[0]-e.x1,e.x1=A[0]-l),k.flipY&&(l=e.y0,e.y0=A[1]-e.y1,e.y1=A[1]-l);var T=e.children;if(T)for(var x=0;x<T.length;x++)R(T[x],A,k)}},70954:function($,R,e){$.exports={moduleType:"trace",name:"treemap",basePlotModule:e(78018),categories:[],animatable:!0,attributes:e(45802),layoutAttributes:e(55479),supplyDefaults:e(91174),supplyLayoutDefaults:e(77182),calc:e(65039).y,crossTraceCalc:e(65039).T,plot:e(5893),style:e(96362).style,colorbar:e(4898),meta:{}}},55479:function($){$.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function($,R,e){var A=e(71828),k=e(55479);$.exports=function(l,T){function x(d,s){return A.coerce(l,T,k,d,s)}x("treemapcolorway",T.colorway),x("extendtreemapcolors")}},37210:function($,R,e){var A=e(674),k=e(14102);$.exports=function(l,T,x){var d,s=x.flipX,t=x.flipY,o=x.packing==="dice-slice",r=x.pad[t?"bottom":"top"],n=x.pad[s?"right":"left"],a=x.pad[s?"left":"right"],i=x.pad[t?"top":"bottom"];o&&(d=n,n=r,r=d,d=a,a=i,i=d);var c=A.treemap().tile(function(h,f){switch(h){case"squarify":return A.treemapSquarify.ratio(f);case"binary":return A.treemapBinary;case"dice":return A.treemapDice;case"slice":return A.treemapSlice;default:return A.treemapSliceDice}}(x.packing,x.squarifyratio)).paddingInner(x.pad.inner).paddingLeft(n).paddingRight(a).paddingTop(r).paddingBottom(i).size(o?[T[1],T[0]]:T)(l);return(o||s||t)&&k(c,T,{swapXY:o,flipX:s,flipY:t}),c}},5893:function($,R,e){var A=e(80694),k=e(52583);$.exports=function(l,T,x,d){return A(l,T,x,d,{type:"treemap",drawDescendants:k})}},46650:function($,R,e){var A=e(39898),k=e(29502).sX,l=e(2791),T=e(71828),x=e(97313).TEXTPAD,d=e(17295).toMoveInsideBar,s=e(72597).recordMinTextSize,t=e(43473),o=e(66209);function r(n){return l.isHierarchyRoot(n)?"":l.getPtId(n)}$.exports=function(n,a,i,c,h){var f=n._fullLayout,b=a[0],v=b.trace,g=v.type==="icicle",y=b.hierarchy,p=l.findEntryWithLevel(y,v.level),m=A.select(i),w=m.selectAll("g.pathbar"),u=m.selectAll("g.slice");if(!p)return w.remove(),void u.remove();var S=l.isHierarchyRoot(p),_=!f.uniformtext.mode&&l.hasTransition(c),E=l.getMaxDepth(v),L=f._size,C=v.domain,P=L.w*(C.x[1]-C.x[0]),I=L.h*(C.y[1]-C.y[0]),U=P,z=v.pathbar.thickness,H=v.marker.line.width+t.gapWithPathbar,F=v.pathbar.visible?v.pathbar.side.indexOf("bottom")>-1?I+H:-(z+H):0,N={x0:U,x1:U,y0:F,y1:F+z},B=function(le,de,be){var Fe=v.tiling.pad,Ve=function(ot){return ot-Fe<=de.x0},He=function(ot){return ot+Fe>=de.x1},rt=function(ot){return ot-Fe<=de.y0},tt=function(ot){return ot+Fe>=de.y1};return le.x0===de.x0&&le.x1===de.x1&&le.y0===de.y0&&le.y1===de.y1?{x0:le.x0,x1:le.x1,y0:le.y0,y1:le.y1}:{x0:Ve(le.x0-Fe)?0:He(le.x0-Fe)?be[0]:le.x0,x1:Ve(le.x1+Fe)?0:He(le.x1+Fe)?be[0]:le.x1,y0:rt(le.y0-Fe)?0:tt(le.y0-Fe)?be[1]:le.y0,y1:rt(le.y1+Fe)?0:tt(le.y1+Fe)?be[1]:le.y1}},j=null,K={},G={},V=null,W=function(le,de){return de?K[r(le)]:G[r(le)]};b.hasMultipleRoots&&S&&E++,v._maxDepth=E,v._backgroundColor=f.paper_bgcolor,v._entryDepth=p.data.depth,v._atRootLevel=S;var J=-P/2+L.l+L.w*(C.x[1]+C.x[0])/2,X=-I/2+L.t+L.h*(1-(C.y[1]+C.y[0])/2),ee=function(le){return J+le},re=function(le){return X+le},ie=re(0),se=ee(0),fe=function(le){return se+le},ye=function(le){return ie+le};function ge(le,de){return le+","+de}var he=fe(0),ve=function(le){le.x=Math.max(he,le.x)},Ie=v.pathbar.edgeshape,xe=v[g?"tiling":"marker"].pad,Ae=function(le){return v.textposition.indexOf(le)!==-1},Se=Ae("top"),Te=Ae("left"),Q=Ae("right"),oe=Ae("bottom"),ce=function(le,de){var be=le.x0,Fe=le.x1,Ve=le.y0,He=le.y1,rt=le.textBB,tt=Se||de.isHeader&&!oe?"start":oe?"end":"middle",ot=Ae("right"),ht=Ae("left")||de.onPathbar?-1:ot?1:0;if(de.isHeader){if((be+=(g?xe:xe.l)-x)>=(Fe-=(g?xe:xe.r)-x)){var _t=(be+Fe)/2;be=_t,Fe=_t}var dt;oe?Ve<(dt=He-(g?xe:xe.b))&&dt<He&&(Ve=dt):Ve<(dt=Ve+(g?xe:xe.t))&&dt<He&&(He=dt)}var bt=d(be,Fe,Ve,He,rt,{isHorizontal:!1,constrained:!0,angle:0,anchor:tt,leftToRight:ht});return bt.fontSize=de.fontSize,bt.targetX=ee(bt.targetX),bt.targetY=re(bt.targetY),isNaN(bt.targetX)||isNaN(bt.targetY)?{}:(be!==Fe&&Ve!==He&&s(v.type,bt,f),{scale:bt.scale,rotate:bt.rotate,textX:bt.textX,textY:bt.textY,anchorX:bt.anchorX,anchorY:bt.anchorY,targetX:bt.targetX,targetY:bt.targetY})},me=function(le,de){for(var be,Fe=0,Ve=le;!be&&Fe<E;)Fe++,(Ve=Ve.parent)?be=W(Ve,de):Fe=E;return be||{}},Me=function(le,de,be,Fe,Ve){var He,rt=W(le,de);if(rt)He=rt;else if(de)He=N;else if(j)if(le.parent){var tt=V||be;tt&&!de?He=B(le,tt,Fe):(He={},T.extendFlat(He,me(le,de)))}else He=T.extendFlat({},le),g&&(Ve.orientation==="h"?Ve.flipX?He.x0=le.x1:He.x1=0:Ve.flipY?He.y0=le.y1:He.y1=0);else He={};return k(He,{x0:le.x0,x1:le.x1,y0:le.y0,y1:le.y1})},Re=function(le,de,be,Fe){var Ve=W(le,de),He={},rt=function(ot,ht,_t,dt){if(ht)return K[r(y)]||N;var bt=G[v.level]||_t;return function(St){return St.data.depth-p.data.depth<E}(ot)?B(ot,bt,dt):{}}(le,de,be,Fe);T.extendFlat(He,{transform:ce({x0:rt.x0,x1:rt.x1,y0:rt.y0,y1:rt.y1,textBB:le.textBB,_text:le._text},{isHeader:l.isHeader(le,v)})}),Ve?He=Ve:le.parent&&T.extendFlat(He,me(le,de));var tt=le.transform;return le.x0!==le.x1&&le.y0!==le.y1&&s(v.type,tt,f),k(He,{transform:{scale:tt.scale,rotate:tt.rotate,textX:tt.textX,textY:tt.textY,anchorX:tt.anchorX,anchorY:tt.anchorY,targetX:tt.targetX,targetY:tt.targetY}})},Ce=function(le,de,be,Fe,Ve){var He=Fe[0],rt=Fe[1];_?le.exit().transition().each(function(){var tt=A.select(this);tt.select("path.surface").transition().attrTween("d",function(ot){var ht=function(_t,dt,bt,St){var Et,zt=W(_t,dt);if(dt)Et=N;else{var Ut=W(p,dt);Et=Ut?B(_t,Ut,St):{}}return k(zt,Et)}(ot,de,0,[He,rt]);return function(_t){return Ve(ht(_t))}}),tt.select("g.slicetext").attr("opacity",0)}).remove():le.exit().remove()},ze=function(le){var de=le.transform;return le.x0!==le.x1&&le.y0!==le.y1&&s(v.type,de,f),T.getTextTransform({textX:de.textX,textY:de.textY,anchorX:de.anchorX,anchorY:de.anchorY,targetX:de.targetX,targetY:de.targetY,scale:de.scale,rotate:de.rotate})};_&&(w.each(function(le){K[r(le)]={x0:le.x0,x1:le.x1,y0:le.y0,y1:le.y1},le.transform&&(K[r(le)].transform={textX:le.transform.textX,textY:le.transform.textY,anchorX:le.transform.anchorX,anchorY:le.transform.anchorY,targetX:le.transform.targetX,targetY:le.transform.targetY,scale:le.transform.scale,rotate:le.transform.rotate})}),u.each(function(le){G[r(le)]={x0:le.x0,x1:le.x1,y0:le.y0,y1:le.y1},le.transform&&(G[r(le)].transform={textX:le.transform.textX,textY:le.transform.textY,anchorX:le.transform.anchorX,anchorY:le.transform.anchorY,targetX:le.transform.targetX,targetY:le.transform.targetY,scale:le.transform.scale,rotate:le.transform.rotate}),!j&&l.isEntry(le)&&(j=le)})),V=h(n,a,p,u,{width:P,height:I,viewX:ee,viewY:re,pathSlice:function(le){var de=ee(le.x0),be=ee(le.x1),Fe=re(le.y0),Ve=re(le.y1),He=be-de,rt=Ve-Fe;if(!He||!rt)return"";var tt=v.marker.cornerradius||0,ot=Math.min(tt,He/2,rt/2);ot&&le.data&&le.data.data&&le.data.data.label&&(Se&&(ot=Math.min(ot,xe.t)),Te&&(ot=Math.min(ot,xe.l)),Q&&(ot=Math.min(ot,xe.r)),oe&&(ot=Math.min(ot,xe.b)));var ht=function(_t,dt){return ot?"a"+ge(ot,ot)+" 0 0 1 "+ge(_t,dt):""};return"M"+ge(de,Fe+ot)+ht(ot,-ot)+"L"+ge(be-ot,Fe)+ht(ot,ot)+"L"+ge(be,Ve-ot)+ht(-ot,ot)+"L"+ge(de+ot,Ve)+ht(-ot,-ot)+"Z"},toMoveInsideSlice:ce,prevEntry:j,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Re,handleSlicesExit:Ce,hasTransition:_,strTransform:ze}),v.pathbar.visible?o(n,a,p,w,{barDifY:F,width:U,height:z,viewX:fe,viewY:ye,pathSlice:function(le){var de=fe(Math.max(Math.min(le.x0,le.x0),0)),be=fe(Math.min(Math.max(le.x1,le.x1),U)),Fe=ye(le.y0),Ve=ye(le.y1),He=z/2,rt={},tt={};rt.x=de,tt.x=be,rt.y=tt.y=(Fe+Ve)/2;var ot={x:de,y:Fe},ht={x:be,y:Fe},_t={x:be,y:Ve},dt={x:de,y:Ve};return Ie===">"?(ot.x-=He,ht.x-=He,_t.x-=He,dt.x-=He):Ie==="/"?(_t.x-=He,dt.x-=He,rt.x-=He/2,tt.x-=He/2):Ie==="\\"?(ot.x-=He,ht.x-=He,rt.x-=He/2,tt.x-=He/2):Ie==="<"&&(rt.x-=He,tt.x-=He),ve(ot),ve(dt),ve(rt),ve(ht),ve(_t),ve(tt),"M"+ge(ot.x,ot.y)+"L"+ge(ht.x,ht.y)+"L"+ge(tt.x,tt.y)+"L"+ge(_t.x,_t.y)+"L"+ge(dt.x,dt.y)+"L"+ge(rt.x,rt.y)+"Z"},toMoveInsideSlice:ce,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Re,handleSlicesExit:Ce,hasTransition:_,strTransform:ze}):w.remove()}},96362:function($,R,e){var A=e(39898),k=e(7901),l=e(71828),T=e(2791),x=e(72597).resizeText;function d(s,t,o,r){var n,a,i=(r||{}).hovered,c=t.data.data,h=c.i,f=c.color,b=T.isHierarchyRoot(t),v=1;if(i)n=o._hovered.marker.line.color,a=o._hovered.marker.line.width;else if(b&&f===o.root.color)v=100,n="rgba(0,0,0,0)",a=0;else if(n=l.castOption(o,h,"marker.line.color")||k.defaultLine,a=l.castOption(o,h,"marker.line.width")||0,!o._hasColorscale&&!t.onPathbar){var g=o.marker.depthfade;if(g){var y,p=k.combine(k.addOpacity(o._backgroundColor,.75),f);if(g===!0){var m=T.getMaxDepth(o);y=isFinite(m)?T.isLeaf(t)?0:o._maxVisibleLayers-(t.data.depth-o._entryDepth):t.data.height+1}else y=t.data.depth-o._entryDepth,o._atRootLevel||y++;if(y>0)for(var w=0;w<y;w++){var u=.5*w/y;f=k.combine(k.addOpacity(p,u),f)}}}s.style("stroke-width",a).call(k.fill,f).call(k.stroke,n).style("opacity",v)}$.exports={style:function(s){var t=s._fullLayout._treemaplayer.selectAll(".trace");x(s,t,"treemap"),t.each(function(o){var r=A.select(this),n=o[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){A.select(this).call(d,a,n,{hovered:!1})})})},styleOne:d}},68875:function($,R,e){var A=e(53522),k=e(1426).extendFlat,l=e(12663).axisHoverFormat;$.exports={y:A.y,x:A.x,x0:A.x0,y0:A.y0,xhoverformat:l("x"),yhoverformat:l("y"),name:k({},A.name,{}),orientation:k({},A.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:A.fillcolor,points:k({},A.boxpoints,{}),jitter:k({},A.jitter,{}),pointpos:k({},A.pointpos,{}),width:k({},A.width,{}),marker:A.marker,text:A.text,hovertext:A.hovertext,hovertemplate:A.hovertemplate,quartilemethod:A.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:A.selected,unselected:A.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function($,R,e){var A=e(71828),k=e(89298),l=e(48518),T=e(60168),x=e(50606).BADNUM;function d(t,o,r){var n=o.max-o.min;if(!n)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,n/1e4);var a=r.length,i=A.stdev(r,a-1,o.mean);return Math.max(function(c,h,f){return 1.059*Math.min(h,f/1.349)*Math.pow(c,-.2)}(a,i,o.q3-o.q1),n/100)}function s(t,o,r,n){var a,i=t.spanmode,c=t.span||[],h=[o.min,o.max],f=[o.min-2*n,o.max+2*n];function b(g){var y=c[g],p=r.type==="multicategory"?r.r2c(y):r.d2c(y,0,t[o.valLetter+"calendar"]);return p===x?f[g]:p}var v={type:"linear",range:a=i==="soft"?f:i==="hard"?h:[b(0),b(1)]};return k.setConvert(v),v.cleanRange(),a}$.exports=function(t,o){var r=l(t,o);if(r[0].t.empty)return r;for(var n=t._fullLayout,a=k.getFromId(t,o[o.orientation==="h"?"xaxis":"yaxis"]),i=1/0,c=-1/0,h=0,f=0,b=0;b<r.length;b++){var v=r[b],g=v.pts.map(T.extractVal),y=v.bandwidth=d(o,v,g),p=v.span=s(o,v,a,y);if(v.min===v.max&&y===0)p=v.span=[v.min,v.max],v.density=[{v:1,t:p[0]}],v.bandwidth=y,h=Math.max(h,1);else{var m=p[1]-p[0],w=Math.ceil(m/(y/3)),u=m/w;if(!isFinite(u)||!isFinite(w))return A.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var S=T.makeKDE(v,o,g);v.density=new Array(w);for(var _=0,E=p[0];E<p[1]+u/2;_++,E+=u){var L=S(E);v.density[_]={v:L,t:E},h=Math.max(h,L)}}f=Math.max(f,g.length),i=Math.min(i,p[0]),c=Math.max(c,p[1])}var C=k.findExtremes(a,[i,c],{padded:!0});if(o._extremes[a._id]=C,o.width)r[0].t.maxKDE=h;else{var P=n._violinScaleGroupStats,I=o.scalegroup,U=P[I];U?(U.maxKDE=Math.max(U.maxKDE,h),U.maxCount=Math.max(U.maxCount,f)):P[I]={maxKDE:h,maxCount:f}}return r[0].t.labels.kde=A._(t,"kde:"),r}},86403:function($,R,e){var A=e(37188).setPositionOffset,k=["v","h"];$.exports=function(l,T){for(var x=l.calcdata,d=T.xaxis,s=T.yaxis,t=0;t<k.length;t++){for(var o=k[t],r=o==="h"?s:d,n=[],a=0;a<x.length;a++){var i=x[a],c=i[0].t,h=i[0].trace;h.visible!==!0||h.type!=="violin"||c.empty||h.orientation!==o||h.xaxis!==d._id||h.yaxis!==s._id||n.push(a)}A("violin",l,n,r)}}},15899:function($,R,e){var A=e(71828),k=e(7901),l=e(36411),T=e(68875);$.exports=function(x,d,s,t){function o(m,w){return A.coerce(x,d,T,m,w)}function r(m,w){return A.coerce2(x,d,T,m,w)}if(l.handleSampleDefaults(x,d,o,t),d.visible!==!1){o("bandwidth"),o("side"),o("width")||(o("scalegroup",d.name),o("scalemode"));var n,a=o("span");Array.isArray(a)&&(n="manual"),o("spanmode",n);var i=o("line.color",(x.marker||{}).color||s),c=o("line.width"),h=o("fillcolor",k.addOpacity(d.line.color,.5));l.handlePointsDefaults(x,d,o,{prefix:""});var f=r("box.width"),b=r("box.fillcolor",h),v=r("box.line.color",i),g=r("box.line.width",c);o("box.visible",Boolean(f||b||v||g))||(d.box={visible:!1});var y=r("meanline.color",i),p=r("meanline.width",c);o("meanline.visible",Boolean(y||p))||(d.meanline={visible:!1}),o("quartilemethod")}}},60168:function($,R,e){var A=e(71828),k=function(l){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*l*l)};R.makeKDE=function(l,T,x){var d=x.length,s=k,t=l.bandwidth,o=1/(d*t);return function(r){for(var n=0,a=0;a<d;a++)n+=s((r-x[a])/t);return o*n}},R.getPositionOnKdePath=function(l,T,x){var d,s;T.orientation==="h"?(d="y",s="x"):(d="x",s="y");var t=A.findPointOnPath(l.path,x,s,{pathLength:l.pathLength}),o=l.posCenterPx,r=t[d];return[r,T.side==="both"?2*o-r:o]},R.getKdeValue=function(l,T,x){var d=l.pts.map(R.extractVal);return R.makeKDE(l,T,d)(x)/l.posDensityScale},R.extractVal=function(l){return l.v}},57634:function($,R,e){var A=e(7901),k=e(71828),l=e(89298),T=e(41868),x=e(60168);$.exports=function(d,s,t,o,r){r||(r={});var n,a,i=r.hoverLayer,c=d.cd,h=c[0].trace,f=h.hoveron,b=f.indexOf("violins")!==-1,v=f.indexOf("kde")!==-1,g=[];if(b||v){var y=T.hoverOnBoxes(d,s,t,o);if(v&&y.length>0){var p,m,w,u,S,_=d.xa,E=d.ya;h.orientation==="h"?(S=s,p="y",w=E,m="x",u=_):(S=t,p="x",w=_,m="y",u=E);var L=c[d.index];if(S>=L.span[0]&&S<=L.span[1]){var C=k.extendFlat({},d),P=u.c2p(S,!0),I=x.getKdeValue(L,h,S),U=x.getPositionOnKdePath(L,h,P),z=w._offset,H=w._length;C[p+"0"]=U[0],C[p+"1"]=U[1],C[m+"0"]=C[m+"1"]=P,C[m+"Label"]=m+": "+l.hoverLabelText(u,S,h[m+"hoverformat"])+", "+c[0].t.labels.kde+" "+I.toFixed(3);for(var F=0,N=0;N<y.length;N++)if(y[N].attr==="med"){F=N;break}C.spikeDistance=y[F].spikeDistance;var B=p+"Spike";C[B]=y[F][B],y[F].spikeDistance=void 0,y[F][B]=void 0,C.hovertemplate=!1,g.push(C),(a={})[p+"1"]=k.constrain(z+U[0],z,z+H),a[p+"2"]=k.constrain(z+U[1],z,z+H),a[m+"1"]=a[m+"2"]=u._offset+P}}b&&(g=g.concat(y))}f.indexOf("points")!==-1&&(n=T.hoverOnPoints(d,s,t));var j=i.selectAll(".violinline-"+h.uid).data(a?[0]:[]);return j.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),j.exit().remove(),j.attr(a).call(A.stroke,d.color),o==="closest"?n?[n]:g:(n&&g.push(n),g)}},47462:function($,R,e){$.exports={attributes:e(68875),layoutAttributes:e(9228),supplyDefaults:e(15899),crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(33598),calc:e(38603),crossTraceCalc:e(86403),plot:e(28443),style:e(31847),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(57634),selectPoints:e(24626),moduleType:"trace",name:"violin",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function($,R,e){var A=e(40094),k=e(71828).extendFlat;$.exports={violinmode:k({},A.boxmode,{}),violingap:k({},A.boxgap,{}),violingroupgap:k({},A.boxgroupgap,{})}},33598:function($,R,e){var A=e(71828),k=e(9228),l=e(4199);$.exports=function(T,x,d){l._supply(T,x,d,function(s,t){return A.coerce(T,x,k,s,t)},"violin")}},28443:function($,R,e){var A=e(39898),k=e(71828),l=e(91424),T=e(86047),x=e(34621),d=e(60168);$.exports=function(s,t,o,r){var n=s._fullLayout,a=t.xaxis,i=t.yaxis;function c(h,f){var b=x(h,{xaxis:a,yaxis:i,trace:f,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(b[0],1)}k.makeTraceGroups(r,o,"trace violins").each(function(h){var f=A.select(this),b=h[0],v=b.t,g=b.trace;if(g.visible!==!0||v.empty)f.remove();else{var y=v.bPos,p=v.bdPos,m=t[v.valLetter+"axis"],w=t[v.posLetter+"axis"],u=g.side==="both",S=u||g.side==="positive",_=u||g.side==="negative",E=f.selectAll("path.violin").data(k.identity);E.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),E.exit().remove(),E.each(function(F){var N,B,j,K,G,V,W,J,X=A.select(this),ee=F.density,re=ee.length,ie=w.c2l(F.pos+y,!0),se=w.l2p(ie);if(g.width)N=v.maxKDE/p;else{var fe=n._violinScaleGroupStats[g.scalegroup];N=g.scalemode==="count"?fe.maxKDE/p*(fe.maxCount/F.pts.length):fe.maxKDE/p}if(S){for(W=new Array(re),G=0;G<re;G++)(J=W[G]={})[v.posLetter]=ie+ee[G].v/N,J[v.valLetter]=m.c2l(ee[G].t,!0);B=c(W,g)}if(_){for(W=new Array(re),V=0,G=re-1;V<re;V++,G--)(J=W[V]={})[v.posLetter]=ie-ee[G].v/N,J[v.valLetter]=m.c2l(ee[G].t,!0);j=c(W,g)}if(u)K=B+"L"+j.substr(1)+"Z";else{var ye=[se,m.c2p(ee[0].t)],ge=[se,m.c2p(ee[re-1].t)];g.orientation==="h"&&(ye.reverse(),ge.reverse()),K=S?"M"+ye+"L"+B.substr(1)+"L"+ge:"M"+ge+"L"+j.substr(1)+"L"+ye}X.attr("d",K),F.posCenterPx=se,F.posDensityScale=N*p,F.path=X.node(),F.pathLength=F.path.getTotalLength()/(u?2:1)});var L,C,P,I=g.box,U=I.width,z=(I.line||{}).width;u?(L=p*U,C=0):S?(L=[0,p*U/2],C=z*{x:1,y:-1}[v.posLetter]):(L=[p*U/2,0],C=z*{x:-1,y:1}[v.posLetter]),T.plotBoxAndWhiskers(f,{pos:w,val:m},g,{bPos:y,bdPos:L,bPosPxOffset:C}),T.plotBoxMean(f,{pos:w,val:m},g,{bPos:y,bdPos:L,bPosPxOffset:C}),!g.box.visible&&g.meanline.visible&&(P=k.identity);var H=f.selectAll("path.meanline").data(P||[]);H.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),H.exit().remove(),H.each(function(F){var N=m.c2p(F.mean,!0),B=d.getPositionOnKdePath(F,g,N);A.select(this).attr("d",g.orientation==="h"?"M"+N+","+B[0]+"V"+B[1]:"M"+B[0]+","+N+"H"+B[1])}),T.plotPoints(f,{x:a,y:i},g,v)}})}},31847:function($,R,e){var A=e(39898),k=e(7901),l=e(16296).stylePoints;$.exports=function(T){var x=A.select(T).selectAll("g.trace.violins");x.style("opacity",function(d){return d[0].trace.opacity}),x.each(function(d){var s=d[0].trace,t=A.select(this),o=s.box||{},r=o.line||{},n=s.meanline||{},a=n.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(k.stroke,s.line.color).call(k.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(k.stroke,r.color).call(k.fill,o.fillcolor);var i={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(i).call(k.stroke,n.color),t.selectAll("path.meanline").style(i).call(k.stroke,n.color),l(t,s,T)})}},16336:function($,R,e){var A=e(50693),k=e(16249),l=e(54532),T=e(9012),x=e(1426).extendFlat,d=e(30962).overrideAll,s=$.exports=d(x({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},A("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:l.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:x({},T.hoverinfo),showlegend:x({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},64809:function($,R,e){var A=e(9330).gl_mesh3d,k=e(81697).parseColorScale,l=e(78614),T=e(21081).extractOpts,x=e(90060),d=e(22674).findNearestOnAxis,s=e(22674).generateIsoMeshes;function t(r,n,a){this.scene=r,this.uid=a,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var o=t.prototype;o.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,a=this.data._meshX[n],i=this.data._meshY[n],c=this.data._meshZ[n],h=this.data._Ys.length,f=this.data._Zs.length,b=d(a,this.data._Xs).id,v=d(i,this.data._Ys).id,g=d(c,this.data._Zs).id,y=r.index=g+f*v+f*h*b;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[y]!==void 0?r.textLabel=p[y]:p&&(r.textLabel=p),!0}},o.update=function(r){var n=this.scene,a=n.fullSceneLayout;function i(f,b,v,g){return b.map(function(y){return f.d2l(y,0,g)*v})}this.data=s(r);var c={positions:x(i(a.xaxis,r._meshX,n.dataScale[0],r.xcalendar),i(a.yaxis,r._meshY,n.dataScale[1],r.ycalendar),i(a.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:x(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},h=T(r);c.vertexIntensity=r._meshIntensity,c.vertexIntensityBounds=[h.min,h.max],c.colormap=k(r),this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(r,n){var a=r.glplot.gl,i=A({gl:a}),c=new t(r,i,n.uid);return i._trace=c,c.update(n),r.glplot.add(i),c}},47651:function($,R,e){var A=e(71828),k=e(16336),l=e(82738).supplyIsoDefaults,T=e(91831).opacityscaleDefaults;$.exports=function(x,d,s,t){function o(r,n){return A.coerce(x,d,k,r,n)}l(x,d,s,t,o),T(x,d,t,o)}},17659:function($,R,e){$.exports={attributes:e(16336),supplyDefaults:e(47651),calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(64809),moduleType:"trace",name:"volume",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function($,R,e){var A=e(1486),k=e(82196).line,l=e(9012),T=e(12663).axisHoverFormat,x=e(5386).f,d=e(5386).s,s=e(48334),t=e(1426).extendFlat,o=e(7901);function r(n){return{marker:{color:t({},A.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},A.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},A.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}$.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:A.hovertext,hovertemplate:x({},{keys:s.eventDataKeys}),hoverinfo:t({},l.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:d({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:A.text,textposition:A.textposition,insidetextanchor:A.insidetextanchor,textangle:A.textangle,textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:A.outsidetextfont,constraintext:A.constraintext,cliponaxis:A.cliponaxis,orientation:A.orientation,offset:A.offset,width:A.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:t({},k.color,{dflt:o.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup}},52752:function($,R,e){var A=e(89298),k=e(42973),l=e(71828).mergeArray,T=e(66279),x=e(50606).BADNUM;function d(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}$.exports=function(t,o){var r,n,a,i,c,h,f=A.getFromId(t,o.xaxis||"x"),b=A.getFromId(t,o.yaxis||"y");o.orientation==="h"?(r=f.makeCalcdata(o,"x"),a=b.makeCalcdata(o,"y"),i=k(o,b,"y",a),c=!!o.yperiodalignment,h="y"):(r=b.makeCalcdata(o,"y"),a=f.makeCalcdata(o,"x"),i=k(o,f,"x",a),c=!!o.xperiodalignment,h="x"),n=i.vals;for(var v,g=Math.min(n.length,r.length),y=new Array(g),p=0,m=!1,w=0;w<g;w++){var u=r[w]||0,S=!1;(r[w]!==x||s(o.measure[w])||d(o.measure[w]))&&w+1<g&&(r[w+1]!==x||s(o.measure[w+1])||d(o.measure[w+1]))&&(S=!0);var _=y[w]={i:w,p:n[w],s:u,rawS:u,cNext:S};d(o.measure[w])?(p=_.s,_.isSum=!0,_.dir="totals",_.s=p):s(o.measure[w])?(_.isSum=!0,_.dir="totals",_.s=p):(_.isSum=!1,_.dir=_.rawS<0?"decreasing":"increasing",v=_.s,_.s=p+v,p+=v),_.dir==="totals"&&(m=!0),c&&(y[w].orig_p=a[w],y[w][h+"End"]=i.ends[w],y[w][h+"Start"]=i.starts[w]),o.ids&&(_.id=String(o.ids[w])),_.v=(o.base||0)+p}return y.length&&(y[0].hasTotals=m),l(o.text,y,"tx"),l(o.hovertext,y,"htx"),T(y,o),y}},48334:function($){$.exports={eventDataKeys:["initial","delta","final"]}},70766:function($,R,e){var A=e(11661).setGroupPositions;$.exports=function(k,l){var T,x,d=k._fullLayout,s=k._fullData,t=k.calcdata,o=l.xaxis,r=l.yaxis,n=[],a=[],i=[];for(x=0;x<s.length;x++){var c=s[x];c.visible===!0&&c.xaxis===o._id&&c.yaxis===r._id&&c.type==="waterfall"&&(T=t[x],c.orientation==="h"?i.push(T):a.push(T),n.push(T))}var h={mode:d.waterfallmode,norm:d.waterfallnorm,gap:d.waterfallgap,groupgap:d.waterfallgroupgap};for(A(k,o,r,a,h),A(k,r,o,i,h),x=0;x<n.length;x++){T=n[x];for(var f=0;f<T.length;f++){var b=T[f];b.isSum===!1&&(b.s0+=f===0?0:T[f-1].s),f+1<T.length&&(T[f].nextP0=T[f+1].p0,T[f].nextS0=T[f+1].s0)}}}},83266:function($,R,e){var A=e(71828),k=e(26125),l=e(90769).handleText,T=e(67513),x=e(73927),d=e(43037),s=e(7901),t=e(22372),o=t.INCREASING.COLOR,r=t.DECREASING.COLOR;function n(a,i,c){a(i+".marker.color",c),a(i+".marker.line.color",s.defaultLine),a(i+".marker.line.width")}$.exports={supplyDefaults:function(a,i,c,h){function f(v,g){return A.coerce(a,i,d,v,g)}if(T(a,i,h,f)){x(a,i,h,f),f("xhoverformat"),f("yhoverformat"),f("measure"),f("orientation",i.x&&!i.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate");var b=f("textposition");l(a,i,h,f,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition!=="none"&&(f("texttemplate"),i.texttemplate||f("textinfo")),n(f,"increasing",o),n(f,"decreasing",r),n(f,"totals","#4499FF"),f("connector.visible")&&(f("connector.mode"),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash")))}else i.visible=!1},crossTraceDefaults:function(a,i){var c,h;function f(v){return A.coerce(h._input,h,d,v)}if(i.waterfallmode==="group")for(var b=0;b<a.length;b++)c=(h=a[b])._input,k(c,h,i,f)}}},58593:function($){$.exports=function(R,e){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"initial"in e&&(R.initial=e.initial),"delta"in e&&(R.delta=e.delta),"final"in e&&(R.final=e.final),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},61326:function($,R,e){var A=e(89298).hoverLabelText,k=e(7901).opacity,l=e(95423).hoverOnBars,T=e(22372),x=T.INCREASING.SYMBOL,d=T.DECREASING.SYMBOL;$.exports=function(s,t,o,r,n){var a=l(s,t,o,r,n);if(a){var i=a.cd,c=i[0].trace,h=c.orientation==="h",f=h?"x":"y",b=h?s.xa:s.ya,v=i[a.index],g=v.isSum?v.b+v.s:v.rawS;if(!v.isSum){a.initial=v.b+v.s-g,a.delta=g,a.final=a.initial+a.delta;var y=_(Math.abs(a.delta));a.deltaLabel=g<0?"("+y+")":y,a.finalLabel=_(a.final),a.initialLabel=_(a.initial)}var p=v.hi||c.hoverinfo,m=[];if(p&&p!=="none"&&p!=="skip"){var w=p==="all",u=p.split("+"),S=function(E){return w||u.indexOf(E)!==-1};v.isSum||(!S("final")||S(h?"x":"y")||m.push(a.finalLabel),S("delta")&&(g<0?m.push(a.deltaLabel+" "+d):m.push(a.deltaLabel+" "+x)),S("initial")&&m.push("Initial: "+a.initialLabel))}return m.length&&(a.extraText=m.join("<br>")),a.color=function(E,L){var C=E[L.dir].marker,P=C.color,I=C.line.color,U=C.line.width;return k(P)?P:k(I)&&U?I:void 0}(c,v),[a]}function _(E){return A(b,E,c[f+"hoverformat"])}}},19990:function($,R,e){$.exports={attributes:e(43037),layoutAttributes:e(13494),supplyDefaults:e(83266).supplyDefaults,crossTraceDefaults:e(83266).crossTraceDefaults,supplyLayoutDefaults:e(5176),calc:e(52752),crossTraceCalc:e(70766),plot:e(30436),style:e(55750).style,hoverPoints:e(61326),eventData:e(58593),selectPoints:e(81974),moduleType:"trace",name:"waterfall",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function($){$.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function($,R,e){var A=e(71828),k=e(13494);$.exports=function(l,T,x){var d=!1;function s(r,n){return A.coerce(l,T,k,r,n)}for(var t=0;t<x.length;t++){var o=x[t];if(o.visible&&o.type==="waterfall"){d=!0;break}}d&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},30436:function($,R,e){var A=e(39898),k=e(71828),l=e(91424),T=e(50606).BADNUM,x=e(17295),d=e(72597).clearMinTextSize;$.exports=function(s,t,o,r){var n=s._fullLayout;d("waterfall",n),x.plot(s,t,o,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),function(a,i,c,h){var f=i.xaxis,b=i.yaxis;k.makeTraceGroups(h,c,"trace bars").each(function(v){var g=A.select(this),y=v[0].trace,p=k.ensureSingle(g,"g","lines");if(y.connector&&y.connector.visible){var m=y.orientation==="h",w=y.connector.mode,u=p.selectAll("g.line").data(k.identity);u.enter().append("g").classed("line",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=function(U,z,H,F){var N=[],B=[],j=F?z:H,K=F?H:z;return N[0]=j.c2p(U.s0,!0),B[0]=K.c2p(U.p0,!0),N[1]=j.c2p(U.s1,!0),B[1]=K.c2p(U.p1,!0),N[2]=j.c2p(U.nextS0,!0),B[2]=K.c2p(U.nextP0,!0),F?[N,B]:[B,N]}(_,f,b,m),C=L[0],P=L[1],I="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&(w==="spanning"&&!_.isSum&&E>0&&(I+=m?"M"+C[0]+","+P[1]+"V"+P[0]:"M"+C[1]+","+P[0]+"H"+C[0]),w!=="between"&&(_.isSum||E<S-1)&&(I+=m?"M"+C[1]+","+P[0]+"V"+P[1]:"M"+C[0]+","+P[1]+"H"+C[1]),C[2]!==T&&P[2]!==T&&(I+=m?"M"+C[1]+","+P[1]+"V"+P[2]:"M"+C[1]+","+P[1]+"H"+C[2])),I===""&&(I="M0,0Z"),k.ensureSingle(A.select(this),"path").attr("d",I).call(l.setClipUrl,i.layerClipId,a)}})}else p.remove()})}(s,t,o,r)}},55750:function($,R,e){var A=e(39898),k=e(91424),l=e(7901),T=e(37822).DESELECTDIM,x=e(16688),d=e(72597).resizeText,s=x.styleTextPoints;$.exports={style:function(t,o,r){var n=r||A.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");d(t,n,"waterfall"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=A.select(this),c=a[0].trace;i.selectAll(".point > path").each(function(h){if(!h.isBlank){var f=c[h.dir].marker;A.select(this).call(l.fill,f.color).call(l.stroke,f.line.color).call(k.dashLine,f.line.dash,f.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),s(i,c,t),i.selectAll(".lines").each(function(){var h=c.connector.line;k.lineGroupStyle(A.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},82887:function($,R,e){var A=e(89298),k=e(71828),l=e(86281),T=e(79344).p,x=e(50606).BADNUM;R.moduleType="transform",R.name="aggregate";var d=R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=d.aggregations;function t(a,i,c,h){if(h.enabled){for(var f=h.target,b=k.nestedProperty(i,f),v=b.get(),g=function(m,w){var u=m.func,S=w.d2c,_=w.c2d;switch(u){case"count":return o;case"first":return r;case"last":return n;case"sum":return function(E,L){for(var C=0,P=0;P<L.length;P++){var I=S(E[L[P]]);I!==x&&(C+=I)}return _(C)};case"avg":return function(E,L){for(var C=0,P=0,I=0;I<L.length;I++){var U=S(E[L[I]]);U!==x&&(C+=U,P++)}return P?_(C/P):x};case"min":return function(E,L){for(var C=1/0,P=0;P<L.length;P++){var I=S(E[L[P]]);I!==x&&(C=Math.min(C,I))}return C===1/0?x:_(C)};case"max":return function(E,L){for(var C=-1/0,P=0;P<L.length;P++){var I=S(E[L[P]]);I!==x&&(C=Math.max(C,I))}return C===-1/0?x:_(C)};case"range":return function(E,L){for(var C=1/0,P=-1/0,I=0;I<L.length;I++){var U=S(E[L[I]]);U!==x&&(C=Math.min(C,U),P=Math.max(P,U))}return P===-1/0||C===1/0?x:_(P-C)};case"change":return function(E,L){var C=S(E[L[0]]),P=S(E[L[L.length-1]]);return C===x||P===x?x:_(P-C)};case"median":return function(E,L){for(var C=[],P=0;P<L.length;P++){var I=S(E[L[P]]);I!==x&&C.push(I)}if(!C.length)return x;C.sort(k.sorterAsc);var U=(C.length-1)/2;return _((C[Math.floor(U)]+C[Math.ceil(U)])/2)};case"mode":return function(E,L){for(var C={},P=0,I=x,U=0;U<L.length;U++){var z=S(E[L[U]]);if(z!==x){var H=C[z]=(C[z]||0)+1;H>P&&(P=H,I=z)}}return P?_(I):x};case"rms":return function(E,L){for(var C=0,P=0,I=0;I<L.length;I++){var U=S(E[L[I]]);U!==x&&(C+=U*U,P++)}return P?_(Math.sqrt(C/P)):x};case"stddev":return function(E,L){var C,P=0,I=0,U=1,z=x;for(C=0;C<L.length&&z===x;C++)z=S(E[L[C]]);if(z===x)return x;for(;C<L.length;C++){var H=S(E[L[C]]);if(H!==x){var F=H-z;P+=F,I+=F*F,U++}}var N=m.funcmode==="sample"?U-1:U;return N?Math.sqrt((I-P*P/U)/N):0}}}(h,A.getDataConversions(a,i,f,v)),y=new Array(c.length),p=0;p<c.length;p++)y[p]=g(v,c[p]);b.set(y),h.func==="count"&&k.pushUnique(i._arrayAttrs,f)}}function o(a,i){return i.length}function r(a,i){return a[i[0]]}function n(a,i){return a[i[i.length-1]]}R.supplyDefaults=function(a,i){var c,h={};function f(_,E){return k.coerce(a,h,d,_,E)}if(!f("enabled"))return h;var b=l.findArrayAttributes(i),v={};for(c=0;c<b.length;c++)v[b[c]]=1;var g=f("groups");if(!Array.isArray(g)){if(!v[g])return h.enabled=!1,h;v[g]=0}var y,p=a.aggregations||[],m=h.aggregations=new Array(p.length);function w(_,E){return k.coerce(p[c],y,s,_,E)}for(c=0;c<p.length;c++){y={_index:c};var u=w("target"),S=w("func");w("enabled")&&u&&(v[u]||S==="count"&&v[u]===void 0)?(S==="stddev"&&w("funcmode"),v[u]=0,m[c]=y):m[c]={enabled:!1,_index:c}}for(c=0;c<b.length;c++)v[b[c]]&&m.push({target:b[c],func:s.func.dflt,enabled:!0,_index:-1});return h},R.calcTransform=function(a,i,c){if(c.enabled){var h=c.groups,f=k.getTargetArray(i,{target:h});if(f){var b,v,g,y,p={},m={},w=[],u=T(i.transforms,c),S=f.length;for(i._length&&(S=Math.min(S,i._length)),b=0;b<S;b++)(g=p[v=f[b]])===void 0?(p[v]=w.length,y=[b],w.push(y),m[p[v]]=u(b)):(w[g].push(b),m[p[v]]=(m[p[v]]||[]).concat(u(b)));c._indexToPoints=m;var _=c.aggregations;for(b=0;b<_.length;b++)t(a,i,w,_[b]);typeof h=="string"&&t(a,i,w,{target:h,func:"first",enabled:!0}),i._length=w.length}}}},14382:function($,R,e){var A=e(71828),k=e(73972),l=e(89298),T=e(79344).p,x=e(74808),d=x.COMPARISON_OPS,s=x.INTERVAL_OPS,t=x.SET_OPS;R.moduleType="transform",R.name="filter",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(d).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},R.supplyDefaults=function(o){var r={};function n(c,h){return A.coerce(o,r,R.attributes,c,h)}if(n("enabled")){var a=n("target");if(A.isArrayOrTypedArray(a)&&a.length===0)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var i=k.getComponentMethod("calendars","handleDefaults");i(o,r,"valuecalendar",null),i(o,r,"targetcalendar",null)}return r},R.calcTransform=function(o,r,n){if(n.enabled){var a=A.getTargetArray(r,n);if(a){var i=n.target,c=a.length;r._length&&(c=Math.min(c,r._length));var h=n.targetcalendar,f=r._arrayAttrs,b=n.preservegaps;if(typeof i=="string"){var v=A.nestedProperty(r,i+"calendar").get();v&&(h=v)}var g,y,p=function(L,C,P){var I=L.operation,U=L.value,z=Array.isArray(U);function H(j){return j.indexOf(I)!==-1}var F,N=function(j){return C(j,0,L.valuecalendar)},B=function(j){return C(j,0,P)};switch(H(d)?F=N(z?U[0]:U):H(s)?F=z?[N(U[0]),N(U[1])]:[N(U),N(U)]:H(t)&&(F=z?U.map(N):[N(U)]),I){case"=":return function(j){return B(j)===F};case"!=":return function(j){return B(j)!==F};case"<":return function(j){return B(j)<F};case"<=":return function(j){return B(j)<=F};case">":return function(j){return B(j)>F};case">=":return function(j){return B(j)>=F};case"[]":return function(j){var K=B(j);return K>=F[0]&&K<=F[1]};case"()":return function(j){var K=B(j);return K>F[0]&&K<F[1]};case"[)":return function(j){var K=B(j);return K>=F[0]&&K<F[1]};case"(]":return function(j){var K=B(j);return K>F[0]&&K<=F[1]};case"][":return function(j){var K=B(j);return K<=F[0]||K>=F[1]};case")(":return function(j){var K=B(j);return K<F[0]||K>F[1]};case"](":return function(j){var K=B(j);return K<=F[0]||K>F[1]};case")[":return function(j){var K=B(j);return K<F[0]||K>=F[1]};case"{}":return function(j){return F.indexOf(B(j))!==-1};case"}{":return function(j){return F.indexOf(B(j))===-1}}}(n,l.getDataToCoordFunc(o,r,i,a),h),m={},w={},u=0;b?(g=function(L){m[L.astr]=A.extendDeep([],L.get()),L.set(new Array(c))},y=function(L,C){var P=m[L.astr][C];L.get()[C]=P}):(g=function(L){m[L.astr]=A.extendDeep([],L.get()),L.set([])},y=function(L,C){var P=m[L.astr][C];L.get().push(P)}),E(g);for(var S=T(r.transforms,n),_=0;_<c;_++)p(a[_])?(E(y,_),w[u++]=S(_)):b&&u++;n._indexToPoints=w,r._length=u}}function E(L,C){for(var P=0;P<f.length;P++)L(A.nestedProperty(r,f[P]),C)}}},43102:function($,R,e){var A=e(71828),k=e(86281),l=e(74875),T=e(79344).p;function x(d,s){var t,o,r,n,a,i,c,h,f,b,v=s.transform,g=s.transformIndex,y=d.transforms[g].groups,p=T(d.transforms,v);if(!A.isArrayOrTypedArray(y)||y.length===0)return[d];var m=A.filterUnique(y),w=new Array(m.length),u=y.length,S=k.findArrayAttributes(d),_=v.styles||[],E={};for(t=0;t<_.length;t++)E[_[t].target]=_[t].value;v.styles&&(b=A.keyedContainer(v,"styles","target","value.name"));var L={},C={};for(t=0;t<m.length;t++){L[i=m[t]]=t,C[i]=0,(c=w[t]=A.extendDeepNoArrays({},d))._group=i,c.transforms[g]._indexToPoints={};var P=null;for(b&&(P=b.get(i)),c.name=P||P===""?P:A.templateString(v.nameformat,{trace:d.name,group:i}),h=c.transforms,c.transforms=[],o=0;o<h.length;o++)c.transforms[o]=A.extendDeepNoArrays({},h[o]);for(o=0;o<S.length;o++)A.nestedProperty(c,S[o]).set([])}for(r=0;r<S.length;r++){for(n=S[r],o=0,f=[];o<m.length;o++)f[o]=A.nestedProperty(w[o],n).get();for(a=A.nestedProperty(d,n).get(),o=0;o<u;o++)f[L[y[o]]].push(a[o])}for(o=0;o<u;o++)(c=w[L[y[o]]]).transforms[g]._indexToPoints[C[y[o]]]=p(o),C[y[o]]++;for(t=0;t<m.length;t++)i=m[t],c=w[t],l.clearExpandedTraceDefaultColors(c),c=A.extendDeepNoArrays(c,E[i]||{});return w}R.moduleType="transform",R.name="groupby",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},R.supplyDefaults=function(d,s,t){var o,r={};function n(f,b){return A.coerce(d,r,R.attributes,f,b)}if(!n("enabled"))return r;n("groups"),n("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=d.styles,i=r.styles=[];if(a)for(o=0;o<a.length;o++){var c=i[o]={};A.coerce(a[o],i[o],R.attributes.styles,"target");var h=A.coerce(a[o],i[o],R.attributes.styles,"value");A.isPlainObject(h)?c.value=A.extendDeep({},h):h&&delete c.value}return r},R.transform=function(d,s){var t,o,r,n=[];for(o=0;o<d.length;o++)for(t=x(d[o],s),r=0;r<t.length;r++)n.push(t[r]);return n}},79344:function($,R){R.p=function(e,A){for(var k,l,T=0;T<e.length&&(k=e[T])!==A;T++)k._indexToPoints&&k.enabled!==!1&&(l=k._indexToPoints);var x=l?function(d){return l[d]}:function(d){return[d]};return x}},32275:function($,R,e){var A=e(71828),k=e(89298),l=e(79344).p,T=e(50606).BADNUM;R.moduleType="transform",R.name="sort",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},R.supplyDefaults=function(x){var d={};function s(t,o){return A.coerce(x,d,R.attributes,t,o)}return s("enabled")&&(s("target"),s("order")),d},R.calcTransform=function(x,d,s){if(s.enabled){var t=A.getTargetArray(d,s);if(t){var o=s.target,r=t.length;d._length&&(r=Math.min(r,d._length));var n,a,i=d._arrayAttrs,c=function(y,p,m,w){var u,S=new Array(w),_=new Array(w);for(u=0;u<w;u++)S[u]={v:p[u],i:u};for(S.sort(function(E,L){switch(E.order){case"ascending":return function(C,P){var I=L(C.v),U=L(P.v);return I===T?1:U===T?-1:I-U};case"descending":return function(C,P){var I=L(C.v),U=L(P.v);return I===T?1:U===T?-1:U-I}}}(y,m)),u=0;u<w;u++)_[u]=S[u].i;return _}(s,t,k.getDataToCoordFunc(x,d,o,t),r),h=l(d.transforms,s),f={};for(n=0;n<i.length;n++){var b=A.nestedProperty(d,i[n]),v=b.get(),g=new Array(r);for(a=0;a<r;a++)g[a]=v[c[a]];b.set(g)}for(a=0;a<r;a++)f[a]=h(c[a]);s._indexToPoints=f,d._length=r}}}},11506:function($,R){R.version="2.17.1"},9330:function($,R,e){var A,k=e(90386);A=function(){return function(){var l={7386:function(d,s,t){d.exports={alpha_shape:t(2350),convex_hull:t(5537),delaunay_triangulate:t(4419),gl_cone3d:t(1140),gl_error3d:t(3110),gl_heatmap2d:t(6386),gl_line3d:t(6086),gl_mesh3d:t(8116),gl_plot2d:t(2117),gl_plot3d:t(1059),gl_pointcloud2d:t(8271),gl_scatter3d:t(2182),gl_select_box:t(6623),gl_spikes2d:t(3050),gl_streamtube3d:t(7307),gl_surface3d:t(3754),ndarray:t(5050),ndarray_linear_interpolate:t(3581)}},2146:function(d,s,t){function o(le,de){if(!(le instanceof de))throw new TypeError("Cannot call a class as a function")}function r(le,de){for(var be=0;be<de.length;be++){var Fe=de[be];Fe.enumerable=Fe.enumerable||!1,Fe.configurable=!0,"value"in Fe&&(Fe.writable=!0),Object.defineProperty(le,Fe.key,Fe)}}function n(le,de){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(be,Fe){return be.__proto__=Fe,be},n(le,de)}function a(le,de){if(de&&(h(de)==="object"||typeof de=="function"))return de;if(de!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(le)}function i(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}function c(le){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(de){return de.__proto__||Object.getPrototypeOf(de)},c(le)}function h(le){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},h(le)}var f=t(3910),b=t(3187),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.lW=p,s.h2=50;var g=2147483647;function y(le){if(le>g)throw new RangeError('The value "'+le+'" is invalid for option "size"');var de=new Uint8Array(le);return Object.setPrototypeOf(de,p.prototype),de}function p(le,de,be){if(typeof le=="number"){if(typeof de=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(le)}return m(le,de,be)}function m(le,de,be){if(typeof le=="string")return function(He,rt){if(typeof rt=="string"&&rt!==""||(rt="utf8"),!p.isEncoding(rt))throw new TypeError("Unknown encoding: "+rt);var tt=0|L(He,rt),ot=y(tt),ht=ot.write(He,rt);return ht!==tt&&(ot=ot.slice(0,ht)),ot}(le,de);if(ArrayBuffer.isView(le))return function(He){if(me(He,Uint8Array)){var rt=new Uint8Array(He);return _(rt.buffer,rt.byteOffset,rt.byteLength)}return S(He)}(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(le));if(me(le,ArrayBuffer)||le&&me(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(le,SharedArrayBuffer)||le&&me(le.buffer,SharedArrayBuffer)))return _(le,de,be);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Fe=le.valueOf&&le.valueOf();if(Fe!=null&&Fe!==le)return p.from(Fe,de,be);var Ve=function(He){if(p.isBuffer(He)){var rt=0|E(He.length),tt=y(rt);return tt.length===0||He.copy(tt,0,0,rt),tt}return He.length!==void 0?typeof He.length!="number"||Me(He.length)?y(0):S(He):He.type==="Buffer"&&Array.isArray(He.data)?S(He.data):void 0}(le);if(Ve)return Ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return p.from(le[Symbol.toPrimitive]("string"),de,be);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(le))}function w(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function u(le){return w(le),y(le<0?0:0|E(le))}function S(le){for(var de=le.length<0?0:0|E(le.length),be=y(de),Fe=0;Fe<de;Fe+=1)be[Fe]=255&le[Fe];return be}function _(le,de,be){if(de<0||le.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<de+(be||0))throw new RangeError('"length" is outside of buffer bounds');var Fe;return Fe=de===void 0&&be===void 0?new Uint8Array(le):be===void 0?new Uint8Array(le,de):new Uint8Array(le,de,be),Object.setPrototypeOf(Fe,p.prototype),Fe}function E(le){if(le>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|le}function L(le,de){if(p.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||me(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+h(le));var be=le.length,Fe=arguments.length>2&&arguments[2]===!0;if(!Fe&&be===0)return 0;for(var Ve=!1;;)switch(de){case"ascii":case"latin1":case"binary":return be;case"utf8":case"utf-8":return Q(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*be;case"hex":return be>>>1;case"base64":return oe(le).length;default:if(Ve)return Fe?-1:Q(le).length;de=(""+de).toLowerCase(),Ve=!0}}function C(le,de,be){var Fe=!1;if((de===void 0||de<0)&&(de=0),de>this.length||((be===void 0||be>this.length)&&(be=this.length),be<=0)||(be>>>=0)<=(de>>>=0))return"";for(le||(le="utf8");;)switch(le){case"hex":return J(this,de,be);case"utf8":case"utf-8":return K(this,de,be);case"ascii":return V(this,de,be);case"latin1":case"binary":return W(this,de,be);case"base64":return j(this,de,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,de,be);default:if(Fe)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Fe=!0}}function P(le,de,be){var Fe=le[de];le[de]=le[be],le[be]=Fe}function I(le,de,be,Fe,Ve){if(le.length===0)return-1;if(typeof be=="string"?(Fe=be,be=0):be>2147483647?be=2147483647:be<-2147483648&&(be=-2147483648),Me(be=+be)&&(be=Ve?0:le.length-1),be<0&&(be=le.length+be),be>=le.length){if(Ve)return-1;be=le.length-1}else if(be<0){if(!Ve)return-1;be=0}if(typeof de=="string"&&(de=p.from(de,Fe)),p.isBuffer(de))return de.length===0?-1:U(le,de,be,Fe,Ve);if(typeof de=="number")return de&=255,typeof Uint8Array.prototype.indexOf=="function"?Ve?Uint8Array.prototype.indexOf.call(le,de,be):Uint8Array.prototype.lastIndexOf.call(le,de,be):U(le,[de],be,Fe,Ve);throw new TypeError("val must be string, number or Buffer")}function U(le,de,be,Fe,Ve){var He,rt=1,tt=le.length,ot=de.length;if(Fe!==void 0&&((Fe=String(Fe).toLowerCase())==="ucs2"||Fe==="ucs-2"||Fe==="utf16le"||Fe==="utf-16le")){if(le.length<2||de.length<2)return-1;rt=2,tt/=2,ot/=2,be/=2}function ht(St,Et){return rt===1?St[Et]:St.readUInt16BE(Et*rt)}if(Ve){var _t=-1;for(He=be;He<tt;He++)if(ht(le,He)===ht(de,_t===-1?0:He-_t)){if(_t===-1&&(_t=He),He-_t+1===ot)return _t*rt}else _t!==-1&&(He-=He-_t),_t=-1}else for(be+ot>tt&&(be=tt-ot),He=be;He>=0;He--){for(var dt=!0,bt=0;bt<ot;bt++)if(ht(le,He+bt)!==ht(de,bt)){dt=!1;break}if(dt)return He}return-1}function z(le,de,be,Fe){be=Number(be)||0;var Ve=le.length-be;Fe?(Fe=Number(Fe))>Ve&&(Fe=Ve):Fe=Ve;var He,rt=de.length;for(Fe>rt/2&&(Fe=rt/2),He=0;He<Fe;++He){var tt=parseInt(de.substr(2*He,2),16);if(Me(tt))return He;le[be+He]=tt}return He}function H(le,de,be,Fe){return ce(Q(de,le.length-be),le,be,Fe)}function F(le,de,be,Fe){return ce(function(Ve){for(var He=[],rt=0;rt<Ve.length;++rt)He.push(255&Ve.charCodeAt(rt));return He}(de),le,be,Fe)}function N(le,de,be,Fe){return ce(oe(de),le,be,Fe)}function B(le,de,be,Fe){return ce(function(Ve,He){for(var rt,tt,ot,ht=[],_t=0;_t<Ve.length&&!((He-=2)<0);++_t)tt=(rt=Ve.charCodeAt(_t))>>8,ot=rt%256,ht.push(ot),ht.push(tt);return ht}(de,le.length-be),le,be,Fe)}function j(le,de,be){return de===0&&be===le.length?f.fromByteArray(le):f.fromByteArray(le.slice(de,be))}function K(le,de,be){be=Math.min(le.length,be);for(var Fe=[],Ve=de;Ve<be;){var He=le[Ve],rt=null,tt=He>239?4:He>223?3:He>191?2:1;if(Ve+tt<=be){var ot=void 0,ht=void 0,_t=void 0,dt=void 0;switch(tt){case 1:He<128&&(rt=He);break;case 2:(192&(ot=le[Ve+1]))==128&&(dt=(31&He)<<6|63&ot)>127&&(rt=dt);break;case 3:ot=le[Ve+1],ht=le[Ve+2],(192&ot)==128&&(192&ht)==128&&(dt=(15&He)<<12|(63&ot)<<6|63&ht)>2047&&(dt<55296||dt>57343)&&(rt=dt);break;case 4:ot=le[Ve+1],ht=le[Ve+2],_t=le[Ve+3],(192&ot)==128&&(192&ht)==128&&(192&_t)==128&&(dt=(15&He)<<18|(63&ot)<<12|(63&ht)<<6|63&_t)>65535&&dt<1114112&&(rt=dt)}}rt===null?(rt=65533,tt=1):rt>65535&&(rt-=65536,Fe.push(rt>>>10&1023|55296),rt=56320|1023&rt),Fe.push(rt),Ve+=tt}return function(bt){var St=bt.length;if(St<=G)return String.fromCharCode.apply(String,bt);for(var Et="",zt=0;zt<St;)Et+=String.fromCharCode.apply(String,bt.slice(zt,zt+=G));return Et}(Fe)}p.TYPED_ARRAY_SUPPORT=function(){try{var le=new Uint8Array(1),de={foo:function(){return 42}};return Object.setPrototypeOf(de,Uint8Array.prototype),Object.setPrototypeOf(le,de),le.foo()===42}catch{return!1}}(),p.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(le,de,be){return m(le,de,be)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(le,de,be){return function(Fe,Ve,He){return w(Fe),Fe<=0?y(Fe):Ve!==void 0?typeof He=="string"?y(Fe).fill(Ve,He):y(Fe).fill(Ve):y(Fe)}(le,de,be)},p.allocUnsafe=function(le){return u(le)},p.allocUnsafeSlow=function(le){return u(le)},p.isBuffer=function(le){return le!=null&&le._isBuffer===!0&&le!==p.prototype},p.compare=function(le,de){if(me(le,Uint8Array)&&(le=p.from(le,le.offset,le.byteLength)),me(de,Uint8Array)&&(de=p.from(de,de.offset,de.byteLength)),!p.isBuffer(le)||!p.isBuffer(de))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===de)return 0;for(var be=le.length,Fe=de.length,Ve=0,He=Math.min(be,Fe);Ve<He;++Ve)if(le[Ve]!==de[Ve]){be=le[Ve],Fe=de[Ve];break}return be<Fe?-1:Fe<be?1:0},p.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(le,de){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(le.length===0)return p.alloc(0);var be;if(de===void 0)for(de=0,be=0;be<le.length;++be)de+=le[be].length;var Fe=p.allocUnsafe(de),Ve=0;for(be=0;be<le.length;++be){var He=le[be];if(me(He,Uint8Array))Ve+He.length>Fe.length?(p.isBuffer(He)||(He=p.from(He)),He.copy(Fe,Ve)):Uint8Array.prototype.set.call(Fe,He,Ve);else{if(!p.isBuffer(He))throw new TypeError('"list" argument must be an Array of Buffers');He.copy(Fe,Ve)}Ve+=He.length}return Fe},p.byteLength=L,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var de=0;de<le;de+=2)P(this,de,de+1);return this},p.prototype.swap32=function(){var le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var de=0;de<le;de+=4)P(this,de,de+3),P(this,de+1,de+2);return this},p.prototype.swap64=function(){var le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var de=0;de<le;de+=8)P(this,de,de+7),P(this,de+1,de+6),P(this,de+2,de+5),P(this,de+3,de+4);return this},p.prototype.toString=function(){var le=this.length;return le===0?"":arguments.length===0?K(this,0,le):C.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(le){if(!p.isBuffer(le))throw new TypeError("Argument must be a Buffer");return this===le||p.compare(this,le)===0},p.prototype.inspect=function(){var le="",de=s.h2;return le=this.toString("hex",0,de).replace(/(.{2})/g,"$1 ").trim(),this.length>de&&(le+=" ... "),"<Buffer "+le+">"},v&&(p.prototype[v]=p.prototype.inspect),p.prototype.compare=function(le,de,be,Fe,Ve){if(me(le,Uint8Array)&&(le=p.from(le,le.offset,le.byteLength)),!p.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+h(le));if(de===void 0&&(de=0),be===void 0&&(be=le?le.length:0),Fe===void 0&&(Fe=0),Ve===void 0&&(Ve=this.length),de<0||be>le.length||Fe<0||Ve>this.length)throw new RangeError("out of range index");if(Fe>=Ve&&de>=be)return 0;if(Fe>=Ve)return-1;if(de>=be)return 1;if(this===le)return 0;for(var He=(Ve>>>=0)-(Fe>>>=0),rt=(be>>>=0)-(de>>>=0),tt=Math.min(He,rt),ot=this.slice(Fe,Ve),ht=le.slice(de,be),_t=0;_t<tt;++_t)if(ot[_t]!==ht[_t]){He=ot[_t],rt=ht[_t];break}return He<rt?-1:rt<He?1:0},p.prototype.includes=function(le,de,be){return this.indexOf(le,de,be)!==-1},p.prototype.indexOf=function(le,de,be){return I(this,le,de,be,!0)},p.prototype.lastIndexOf=function(le,de,be){return I(this,le,de,be,!1)},p.prototype.write=function(le,de,be,Fe){if(de===void 0)Fe="utf8",be=this.length,de=0;else if(be===void 0&&typeof de=="string")Fe=de,be=this.length,de=0;else{if(!isFinite(de))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");de>>>=0,isFinite(be)?(be>>>=0,Fe===void 0&&(Fe="utf8")):(Fe=be,be=void 0)}var Ve=this.length-de;if((be===void 0||be>Ve)&&(be=Ve),le.length>0&&(be<0||de<0)||de>this.length)throw new RangeError("Attempt to write outside buffer bounds");Fe||(Fe="utf8");for(var He=!1;;)switch(Fe){case"hex":return z(this,le,de,be);case"utf8":case"utf-8":return H(this,le,de,be);case"ascii":case"latin1":case"binary":return F(this,le,de,be);case"base64":return N(this,le,de,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,le,de,be);default:if(He)throw new TypeError("Unknown encoding: "+Fe);Fe=(""+Fe).toLowerCase(),He=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var G=4096;function V(le,de,be){var Fe="";be=Math.min(le.length,be);for(var Ve=de;Ve<be;++Ve)Fe+=String.fromCharCode(127&le[Ve]);return Fe}function W(le,de,be){var Fe="";be=Math.min(le.length,be);for(var Ve=de;Ve<be;++Ve)Fe+=String.fromCharCode(le[Ve]);return Fe}function J(le,de,be){var Fe=le.length;(!de||de<0)&&(de=0),(!be||be<0||be>Fe)&&(be=Fe);for(var Ve="",He=de;He<be;++He)Ve+=Re[le[He]];return Ve}function X(le,de,be){for(var Fe=le.slice(de,be),Ve="",He=0;He<Fe.length-1;He+=2)Ve+=String.fromCharCode(Fe[He]+256*Fe[He+1]);return Ve}function ee(le,de,be){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(le+de>be)throw new RangeError("Trying to access beyond buffer length")}function re(le,de,be,Fe,Ve,He){if(!p.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(de>Ve||de<He)throw new RangeError('"value" argument is out of bounds');if(be+Fe>le.length)throw new RangeError("Index out of range")}function ie(le,de,be,Fe,Ve){xe(de,Fe,Ve,le,be,7);var He=Number(de&BigInt(4294967295));le[be++]=He,He>>=8,le[be++]=He,He>>=8,le[be++]=He,He>>=8,le[be++]=He;var rt=Number(de>>BigInt(32)&BigInt(4294967295));return le[be++]=rt,rt>>=8,le[be++]=rt,rt>>=8,le[be++]=rt,rt>>=8,le[be++]=rt,be}function se(le,de,be,Fe,Ve){xe(de,Fe,Ve,le,be,7);var He=Number(de&BigInt(4294967295));le[be+7]=He,He>>=8,le[be+6]=He,He>>=8,le[be+5]=He,He>>=8,le[be+4]=He;var rt=Number(de>>BigInt(32)&BigInt(4294967295));return le[be+3]=rt,rt>>=8,le[be+2]=rt,rt>>=8,le[be+1]=rt,rt>>=8,le[be]=rt,be+8}function fe(le,de,be,Fe,Ve,He){if(be+Fe>le.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("Index out of range")}function ye(le,de,be,Fe,Ve){return de=+de,be>>>=0,Ve||fe(le,0,be,4),b.write(le,de,be,Fe,23,4),be+4}function ge(le,de,be,Fe,Ve){return de=+de,be>>>=0,Ve||fe(le,0,be,8),b.write(le,de,be,Fe,52,8),be+8}p.prototype.slice=function(le,de){var be=this.length;(le=~~le)<0?(le+=be)<0&&(le=0):le>be&&(le=be),(de=de===void 0?be:~~de)<0?(de+=be)<0&&(de=0):de>be&&(de=be),de<le&&(de=le);var Fe=this.subarray(le,de);return Object.setPrototypeOf(Fe,p.prototype),Fe},p.prototype.readUintLE=p.prototype.readUIntLE=function(le,de,be){le>>>=0,de>>>=0,be||ee(le,de,this.length);for(var Fe=this[le],Ve=1,He=0;++He<de&&(Ve*=256);)Fe+=this[le+He]*Ve;return Fe},p.prototype.readUintBE=p.prototype.readUIntBE=function(le,de,be){le>>>=0,de>>>=0,be||ee(le,de,this.length);for(var Fe=this[le+--de],Ve=1;de>0&&(Ve*=256);)Fe+=this[le+--de]*Ve;return Fe},p.prototype.readUint8=p.prototype.readUInt8=function(le,de){return le>>>=0,de||ee(le,1,this.length),this[le]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(le,de){return le>>>=0,de||ee(le,2,this.length),this[le]|this[le+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(le,de){return le>>>=0,de||ee(le,2,this.length),this[le]<<8|this[le+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(le,de){return le>>>=0,de||ee(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+16777216*this[le+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(le,de){return le>>>=0,de||ee(le,4,this.length),16777216*this[le]+(this[le+1]<<16|this[le+2]<<8|this[le+3])},p.prototype.readBigUInt64LE=Ce(function(le){Ae(le>>>=0,"offset");var de=this[le],be=this[le+7];de!==void 0&&be!==void 0||Se(le,this.length-8);var Fe=de+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,24),Ve=this[++le]+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+be*Math.pow(2,24);return BigInt(Fe)+(BigInt(Ve)<<BigInt(32))}),p.prototype.readBigUInt64BE=Ce(function(le){Ae(le>>>=0,"offset");var de=this[le],be=this[le+7];de!==void 0&&be!==void 0||Se(le,this.length-8);var Fe=de*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+this[++le],Ve=this[++le]*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+be;return(BigInt(Fe)<<BigInt(32))+BigInt(Ve)}),p.prototype.readIntLE=function(le,de,be){le>>>=0,de>>>=0,be||ee(le,de,this.length);for(var Fe=this[le],Ve=1,He=0;++He<de&&(Ve*=256);)Fe+=this[le+He]*Ve;return Fe>=(Ve*=128)&&(Fe-=Math.pow(2,8*de)),Fe},p.prototype.readIntBE=function(le,de,be){le>>>=0,de>>>=0,be||ee(le,de,this.length);for(var Fe=de,Ve=1,He=this[le+--Fe];Fe>0&&(Ve*=256);)He+=this[le+--Fe]*Ve;return He>=(Ve*=128)&&(He-=Math.pow(2,8*de)),He},p.prototype.readInt8=function(le,de){return le>>>=0,de||ee(le,1,this.length),128&this[le]?-1*(255-this[le]+1):this[le]},p.prototype.readInt16LE=function(le,de){le>>>=0,de||ee(le,2,this.length);var be=this[le]|this[le+1]<<8;return 32768&be?4294901760|be:be},p.prototype.readInt16BE=function(le,de){le>>>=0,de||ee(le,2,this.length);var be=this[le+1]|this[le]<<8;return 32768&be?4294901760|be:be},p.prototype.readInt32LE=function(le,de){return le>>>=0,de||ee(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},p.prototype.readInt32BE=function(le,de){return le>>>=0,de||ee(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},p.prototype.readBigInt64LE=Ce(function(le){Ae(le>>>=0,"offset");var de=this[le],be=this[le+7];de!==void 0&&be!==void 0||Se(le,this.length-8);var Fe=this[le+4]+this[le+5]*Math.pow(2,8)+this[le+6]*Math.pow(2,16)+(be<<24);return(BigInt(Fe)<<BigInt(32))+BigInt(de+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,24))}),p.prototype.readBigInt64BE=Ce(function(le){Ae(le>>>=0,"offset");var de=this[le],be=this[le+7];de!==void 0&&be!==void 0||Se(le,this.length-8);var Fe=(de<<24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+this[++le];return(BigInt(Fe)<<BigInt(32))+BigInt(this[++le]*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+be)}),p.prototype.readFloatLE=function(le,de){return le>>>=0,de||ee(le,4,this.length),b.read(this,le,!0,23,4)},p.prototype.readFloatBE=function(le,de){return le>>>=0,de||ee(le,4,this.length),b.read(this,le,!1,23,4)},p.prototype.readDoubleLE=function(le,de){return le>>>=0,de||ee(le,8,this.length),b.read(this,le,!0,52,8)},p.prototype.readDoubleBE=function(le,de){return le>>>=0,de||ee(le,8,this.length),b.read(this,le,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(le,de,be,Fe){le=+le,de>>>=0,be>>>=0,Fe||re(this,le,de,be,Math.pow(2,8*be)-1,0);var Ve=1,He=0;for(this[de]=255&le;++He<be&&(Ve*=256);)this[de+He]=le/Ve&255;return de+be},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(le,de,be,Fe){le=+le,de>>>=0,be>>>=0,Fe||re(this,le,de,be,Math.pow(2,8*be)-1,0);var Ve=be-1,He=1;for(this[de+Ve]=255&le;--Ve>=0&&(He*=256);)this[de+Ve]=le/He&255;return de+be},p.prototype.writeUint8=p.prototype.writeUInt8=function(le,de,be){return le=+le,de>>>=0,be||re(this,le,de,1,255,0),this[de]=255&le,de+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(le,de,be){return le=+le,de>>>=0,be||re(this,le,de,2,65535,0),this[de]=255&le,this[de+1]=le>>>8,de+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(le,de,be){return le=+le,de>>>=0,be||re(this,le,de,2,65535,0),this[de]=le>>>8,this[de+1]=255&le,de+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(le,de,be){return le=+le,de>>>=0,be||re(this,le,de,4,4294967295,0),this[de+3]=le>>>24,this[de+2]=le>>>16,this[de+1]=le>>>8,this[de]=255&le,de+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(le,de,be){return le=+le,de>>>=0,be||re(this,le,de,4,4294967295,0),this[de]=le>>>24,this[de+1]=le>>>16,this[de+2]=le>>>8,this[de+3]=255&le,de+4},p.prototype.writeBigUInt64LE=Ce(function(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ie(this,le,de,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Ce(function(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return se(this,le,de,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(le,de,be,Fe){if(le=+le,de>>>=0,!Fe){var Ve=Math.pow(2,8*be-1);re(this,le,de,be,Ve-1,-Ve)}var He=0,rt=1,tt=0;for(this[de]=255&le;++He<be&&(rt*=256);)le<0&&tt===0&&this[de+He-1]!==0&&(tt=1),this[de+He]=(le/rt>>0)-tt&255;return de+be},p.prototype.writeIntBE=function(le,de,be,Fe){if(le=+le,de>>>=0,!Fe){var Ve=Math.pow(2,8*be-1);re(this,le,de,be,Ve-1,-Ve)}var He=be-1,rt=1,tt=0;for(this[de+He]=255&le;--He>=0&&(rt*=256);)le<0&&tt===0&&this[de+He+1]!==0&&(tt=1),this[de+He]=(le/rt>>0)-tt&255;return de+be},p.prototype.writeInt8=function(le,de,be){return le=+le,de>>>=0,be||re(this,le,de,1,127,-128),le<0&&(le=255+le+1),this[de]=255&le,de+1},p.prototype.writeInt16LE=function(le,de,be){return le=+le,de>>>=0,be||re(this,le,de,2,32767,-32768),this[de]=255&le,this[de+1]=le>>>8,de+2},p.prototype.writeInt16BE=function(le,de,be){return le=+le,de>>>=0,be||re(this,le,de,2,32767,-32768),this[de]=le>>>8,this[de+1]=255&le,de+2},p.prototype.writeInt32LE=function(le,de,be){return le=+le,de>>>=0,be||re(this,le,de,4,2147483647,-2147483648),this[de]=255&le,this[de+1]=le>>>8,this[de+2]=le>>>16,this[de+3]=le>>>24,de+4},p.prototype.writeInt32BE=function(le,de,be){return le=+le,de>>>=0,be||re(this,le,de,4,2147483647,-2147483648),le<0&&(le=4294967295+le+1),this[de]=le>>>24,this[de+1]=le>>>16,this[de+2]=le>>>8,this[de+3]=255&le,de+4},p.prototype.writeBigInt64LE=Ce(function(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ie(this,le,de,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Ce(function(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return se(this,le,de,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(le,de,be){return ye(this,le,de,!0,be)},p.prototype.writeFloatBE=function(le,de,be){return ye(this,le,de,!1,be)},p.prototype.writeDoubleLE=function(le,de,be){return ge(this,le,de,!0,be)},p.prototype.writeDoubleBE=function(le,de,be){return ge(this,le,de,!1,be)},p.prototype.copy=function(le,de,be,Fe){if(!p.isBuffer(le))throw new TypeError("argument should be a Buffer");if(be||(be=0),Fe||Fe===0||(Fe=this.length),de>=le.length&&(de=le.length),de||(de=0),Fe>0&&Fe<be&&(Fe=be),Fe===be||le.length===0||this.length===0)return 0;if(de<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(Fe<0)throw new RangeError("sourceEnd out of bounds");Fe>this.length&&(Fe=this.length),le.length-de<Fe-be&&(Fe=le.length-de+be);var Ve=Fe-be;return this===le&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(de,be,Fe):Uint8Array.prototype.set.call(le,this.subarray(be,Fe),de),Ve},p.prototype.fill=function(le,de,be,Fe){if(typeof le=="string"){if(typeof de=="string"?(Fe=de,de=0,be=this.length):typeof be=="string"&&(Fe=be,be=this.length),Fe!==void 0&&typeof Fe!="string")throw new TypeError("encoding must be a string");if(typeof Fe=="string"&&!p.isEncoding(Fe))throw new TypeError("Unknown encoding: "+Fe);if(le.length===1){var Ve=le.charCodeAt(0);(Fe==="utf8"&&Ve<128||Fe==="latin1")&&(le=Ve)}}else typeof le=="number"?le&=255:typeof le=="boolean"&&(le=Number(le));if(de<0||this.length<de||this.length<be)throw new RangeError("Out of range index");if(be<=de)return this;var He;if(de>>>=0,be=be===void 0?this.length:be>>>0,le||(le=0),typeof le=="number")for(He=de;He<be;++He)this[He]=le;else{var rt=p.isBuffer(le)?le:p.from(le,Fe),tt=rt.length;if(tt===0)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(He=0;He<be-de;++He)this[He+de]=rt[He%tt]}return this};var he={};function ve(le,de,be){he[le]=function(Fe){(function(_t,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Super expression must either be null or a function");_t.prototype=Object.create(dt&&dt.prototype,{constructor:{value:_t,writable:!0,configurable:!0}}),Object.defineProperty(_t,"prototype",{writable:!1}),dt&&n(_t,dt)})(ht,Fe);var Ve,He,rt,tt,ot=(rt=ht,tt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _t,dt=c(rt);if(tt){var bt=c(this).constructor;_t=Reflect.construct(dt,arguments,bt)}else _t=dt.apply(this,arguments);return a(this,_t)});function ht(){var _t;return o(this,ht),_t=ot.call(this),Object.defineProperty(i(_t),"message",{value:de.apply(i(_t),arguments),writable:!0,configurable:!0}),_t.name="".concat(_t.name," [").concat(le,"]"),_t.stack,delete _t.name,_t}return Ve=ht,(He=[{key:"code",get:function(){return le},set:function(_t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_t,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(le,"]: ").concat(this.message)}}])&&r(Ve.prototype,He),Object.defineProperty(Ve,"prototype",{writable:!1}),ht}(be)}function Ie(le){for(var de="",be=le.length,Fe=le[0]==="-"?1:0;be>=Fe+4;be-=3)de="_".concat(le.slice(be-3,be)).concat(de);return"".concat(le.slice(0,be)).concat(de)}function xe(le,de,be,Fe,Ve,He){if(le>be||le<de){var rt,tt=typeof de=="bigint"?"n":"";throw rt=He>3?de===0||de===BigInt(0)?">= 0".concat(tt," and < 2").concat(tt," ** ").concat(8*(He+1)).concat(tt):">= -(2".concat(tt," ** ").concat(8*(He+1)-1).concat(tt,") and < 2 ** ")+"".concat(8*(He+1)-1).concat(tt):">= ".concat(de).concat(tt," and <= ").concat(be).concat(tt),new he.ERR_OUT_OF_RANGE("value",rt,le)}(function(ot,ht,_t){Ae(ht,"offset"),ot[ht]!==void 0&&ot[ht+_t]!==void 0||Se(ht,ot.length-(_t+1))})(Fe,Ve,He)}function Ae(le,de){if(typeof le!="number")throw new he.ERR_INVALID_ARG_TYPE(de,"number",le)}function Se(le,de,be){throw Math.floor(le)!==le?(Ae(le,be),new he.ERR_OUT_OF_RANGE(be||"offset","an integer",le)):de<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE(be||"offset",">= ".concat(be?1:0," and <= ").concat(de),le)}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?"".concat(le," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(le,de){return'The "'.concat(le,'" argument must be of type number. Received type ').concat(h(de))},TypeError),ve("ERR_OUT_OF_RANGE",function(le,de,be){var Fe='The value of "'.concat(le,'" is out of range.'),Ve=be;return Number.isInteger(be)&&Math.abs(be)>Math.pow(2,32)?Ve=Ie(String(be)):typeof be=="bigint"&&(Ve=String(be),(be>Math.pow(BigInt(2),BigInt(32))||be<-Math.pow(BigInt(2),BigInt(32)))&&(Ve=Ie(Ve)),Ve+="n"),Fe+" It must be ".concat(de,". Received ").concat(Ve)},RangeError);var Te=/[^+/0-9A-Za-z-_]/g;function Q(le,de){var be;de=de||1/0;for(var Fe=le.length,Ve=null,He=[],rt=0;rt<Fe;++rt){if((be=le.charCodeAt(rt))>55295&&be<57344){if(!Ve){if(be>56319){(de-=3)>-1&&He.push(239,191,189);continue}if(rt+1===Fe){(de-=3)>-1&&He.push(239,191,189);continue}Ve=be;continue}if(be<56320){(de-=3)>-1&&He.push(239,191,189),Ve=be;continue}be=65536+(Ve-55296<<10|be-56320)}else Ve&&(de-=3)>-1&&He.push(239,191,189);if(Ve=null,be<128){if((de-=1)<0)break;He.push(be)}else if(be<2048){if((de-=2)<0)break;He.push(be>>6|192,63&be|128)}else if(be<65536){if((de-=3)<0)break;He.push(be>>12|224,be>>6&63|128,63&be|128)}else{if(!(be<1114112))throw new Error("Invalid code point");if((de-=4)<0)break;He.push(be>>18|240,be>>12&63|128,be>>6&63|128,63&be|128)}}return He}function oe(le){return f.toByteArray(function(de){if((de=(de=de.split("=")[0]).trim().replace(Te,"")).length<2)return"";for(;de.length%4!=0;)de+="=";return de}(le))}function ce(le,de,be,Fe){var Ve;for(Ve=0;Ve<Fe&&!(Ve+be>=de.length||Ve>=le.length);++Ve)de[Ve+be]=le[Ve];return Ve}function me(le,de){return le instanceof de||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===de.name}function Me(le){return le!=le}var Re=function(){for(var le="0123456789abcdef",de=new Array(256),be=0;be<16;++be)for(var Fe=16*be,Ve=0;Ve<16;++Ve)de[Fe+Ve]=le[be]+le[Ve];return de}();function Ce(le){return typeof BigInt>"u"?ze:le}function ze(){throw new Error("BigInt not supported")}},3910:function(d,s){s.byteLength=function(f){var b=c(f),v=b[0],g=b[1];return 3*(v+g)/4-g},s.toByteArray=function(f){var b,v,g=c(f),y=g[0],p=g[1],m=new r(function(S,_,E){return 3*(_+E)/4-E}(0,y,p)),w=0,u=p>0?y-4:y;for(v=0;v<u;v+=4)b=o[f.charCodeAt(v)]<<18|o[f.charCodeAt(v+1)]<<12|o[f.charCodeAt(v+2)]<<6|o[f.charCodeAt(v+3)],m[w++]=b>>16&255,m[w++]=b>>8&255,m[w++]=255&b;return p===2&&(b=o[f.charCodeAt(v)]<<2|o[f.charCodeAt(v+1)]>>4,m[w++]=255&b),p===1&&(b=o[f.charCodeAt(v)]<<10|o[f.charCodeAt(v+1)]<<4|o[f.charCodeAt(v+2)]>>2,m[w++]=b>>8&255,m[w++]=255&b),m},s.fromByteArray=function(f){for(var b,v=f.length,g=v%3,y=[],p=16383,m=0,w=v-g;m<w;m+=p)y.push(h(f,m,m+p>w?w:m+p));return g===1?(b=f[v-1],y.push(t[b>>2]+t[b<<4&63]+"==")):g===2&&(b=(f[v-2]<<8)+f[v-1],y.push(t[b>>10]+t[b>>4&63]+t[b<<2&63]+"=")),y.join("")};for(var t=[],o=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=n.length;a<i;++a)t[a]=n[a],o[n.charCodeAt(a)]=a;function c(f){var b=f.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=f.indexOf("=");return v===-1&&(v=b),[v,v===b?0:4-v%4]}function h(f,b,v){for(var g,y,p=[],m=b;m<v;m+=3)g=(f[m]<<16&16711680)+(f[m+1]<<8&65280)+(255&f[m+2]),p.push(t[(y=g)>>18&63]+t[y>>12&63]+t[y>>6&63]+t[63&y]);return p.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},3187:function(d,s){s.read=function(t,o,r,n,a){var i,c,h=8*a-n-1,f=(1<<h)-1,b=f>>1,v=-7,g=r?a-1:0,y=r?-1:1,p=t[o+g];for(g+=y,i=p&(1<<-v)-1,p>>=-v,v+=h;v>0;i=256*i+t[o+g],g+=y,v-=8);for(c=i&(1<<-v)-1,i>>=-v,v+=n;v>0;c=256*c+t[o+g],g+=y,v-=8);if(i===0)i=1-b;else{if(i===f)return c?NaN:1/0*(p?-1:1);c+=Math.pow(2,n),i-=b}return(p?-1:1)*c*Math.pow(2,i-n)},s.write=function(t,o,r,n,a,i){var c,h,f,b=8*i-a-1,v=(1<<b)-1,g=v>>1,y=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,m=n?1:-1,w=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(h=isNaN(o)?1:0,c=v):(c=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-c))<1&&(c--,f*=2),(o+=c+g>=1?y/f:y*Math.pow(2,1-g))*f>=2&&(c++,f/=2),c+g>=v?(h=0,c=v):c+g>=1?(h=(o*f-1)*Math.pow(2,a),c+=g):(h=o*Math.pow(2,g-1)*Math.pow(2,a),c=0));a>=8;t[r+p]=255&h,p+=m,h/=256,a-=8);for(c=c<<a|h,b+=a;b>0;t[r+p]=255&c,p+=m,c/=256,b-=8);t[r+p-m]|=128*w}},1152:function(d,s,t){d.exports=function(c){var h=(c=c||{}).eye||[0,0,1],f=c.center||[0,0,0],b=c.up||[0,1,0],v=c.distanceLimits||[0,1/0],g=c.mode||"turntable",y=o(),p=r(),m=n();return y.setDistanceLimits(v[0],v[1]),y.lookAt(0,h,f,b),p.setDistanceLimits(v[0],v[1]),p.lookAt(0,h,f,b),m.setDistanceLimits(v[0],v[1]),m.lookAt(0,h,f,b),new a({turntable:y,orbit:p,matrix:m},g)};var o=t(3440),r=t(7774),n=t(9298);function a(c,h){this._controllerNames=Object.keys(c),this._controllerList=this._controllerNames.map(function(f){return c[f]}),this._mode=h,this._active=c[h],this._active||(this._mode="turntable",this._active=c.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var i=a.prototype;i.flush=function(c){for(var h=this._controllerList,f=0;f<h.length;++f)h[f].flush(c)},i.idle=function(c){for(var h=this._controllerList,f=0;f<h.length;++f)h[f].idle(c)},i.lookAt=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].lookAt(c,h,f,b)},i.rotate=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].rotate(c,h,f,b)},i.pan=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].pan(c,h,f,b)},i.translate=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].translate(c,h,f,b)},i.setMatrix=function(c,h){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setMatrix(c,h)},i.setDistanceLimits=function(c,h){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setDistanceLimits(c,h)},i.setDistance=function(c,h){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setDistance(c,h)},i.recalcMatrix=function(c){this._active.recalcMatrix(c)},i.getDistance=function(c){return this._active.getDistance(c)},i.getDistanceLimits=function(c){return this._active.getDistanceLimits(c)},i.lastT=function(){return this._active.lastT()},i.setMode=function(c){if(c!==this._mode){var h=this._controllerNames.indexOf(c);if(!(h<0)){var f=this._active,b=this._controllerList[h],v=Math.max(f.lastT(),b.lastT());f.recalcMatrix(v),b.setMatrix(v,f.computedMatrix),this._active=b,this._mode=c,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},8126:function(d,s,t){var o=typeof WeakMap>"u"?t(5346):WeakMap,r=t(5827),n=t(2944),a=new o;d.exports=function(i){var c=a.get(i),h=c&&(c._triangleBuffer.handle||c._triangleBuffer.buffer);if(!h||!i.isBuffer(h)){var f=r(i,new Float32Array([-1,-1,-1,4,4,-1]));(c=n(i,[{buffer:f,type:i.FLOAT,size:2}]))._triangleBuffer=f,a.set(i,c)}c.bind(),i.drawArrays(i.TRIANGLES,0,3),c.unbind()}},8008:function(d,s,t){var o=t(4930);d.exports=function(r,n,a){n=typeof n=="number"?n:1,a=a||": ";var i=r.split(/\r?\n/),c=String(i.length+n-1).length;return i.map(function(h,f){var b=f+n,v=String(b).length;return o(b,c-v)+a+h}).join(`
`)}},2153:function(d,s,t){d.exports=function(n){var a=n.length;if(a===0)return[];if(a===1)return[0];for(var i=n[0].length,c=[n[0]],h=[0],f=1;f<a;++f)if(c.push(n[f]),r(c,i)){if(h.push(f),h.length===i+1)return h}else c.pop();return h};var o=t(417);function r(n,a){for(var i=new Array(a+1),c=0;c<n.length;++c)i[c]=n[c];for(c=0;c<=n.length;++c){for(var h=n.length;h<=a;++h){for(var f=new Array(a),b=0;b<a;++b)f[b]=Math.pow(h+1-c,b);i[h]=f}if(o.apply(void 0,i))return!0}return!1}},4653:function(d,s,t){d.exports=function(n,a){return o(a).filter(function(i){for(var c=new Array(i.length),h=0;h<i.length;++h)c[h]=a[i[h]];return r(c)*n<1})};var o=t(4419),r=t(1778)},2350:function(d,s,t){d.exports=function(n,a){return r(o(n,a))};var o=t(4653),r=t(8691)},7896:function(d){d.exports=function(s){return atob(s)}},957:function(d,s,t){d.exports=function(n,a){for(var i=a.length,c=new Array(i+1),h=0;h<i;++h){for(var f=new Array(i+1),b=0;b<=i;++b)f[b]=n[b][h];c[h]=f}for(c[i]=new Array(i+1),h=0;h<=i;++h)c[i][h]=1;var v=new Array(i+1);for(h=0;h<i;++h)v[h]=a[h];v[i]=1;var g=o(c,v),y=r(g[i+1]);y===0&&(y=1);var p=new Array(i+1);for(h=0;h<=i;++h)p[h]=r(g[h])/y;return p};var o=t(6606);function r(n){for(var a=0,i=0;i<n.length;++i)a+=n[i];return a}},1539:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},8846:function(d){d.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},9189:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]),r[1].mul(n[0]))}},5125:function(d,s,t){var o=t(234),r=t(3218),n=t(5514),a=t(2813),i=t(8524),c=t(9189);d.exports=function h(f,b){if(o(f))return b?c(f,h(b)):[f[0].clone(),f[1].clone()];var v,g,y=0;if(r(f))v=f.clone();else if(typeof f=="string")v=a(f);else{if(f===0)return[n(0),n(1)];if(f===Math.floor(f))v=n(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),y-=256;v=n(f)}}if(o(b))v.mul(b[1]),g=b[0].clone();else if(r(b))g=b.clone();else if(typeof b=="string")g=a(b);else if(b)if(b===Math.floor(b))g=n(b);else{for(;b!==Math.floor(b);)b*=Math.pow(2,256),y+=256;g=n(b)}else g=n(1);return y>0?v=v.ushln(y):y<0&&(g=g.ushln(-y)),i(v,g)}},234:function(d,s,t){var o=t(3218);d.exports=function(r){return Array.isArray(r)&&r.length===2&&o(r[0])&&o(r[1])}},4275:function(d,s,t){var o=t(1928);d.exports=function(r){return r.cmp(new o(0))}},9958:function(d,s,t){var o=t(4275);d.exports=function(r){var n=r.length,a=r.words,i=0;if(n===1)i=a[0];else if(n===2)i=a[0]+67108864*a[1];else for(var c=0;c<n;c++)i+=a[c]*Math.pow(67108864,c);return o(r)*i}},1112:function(d,s,t){var o=t(8362),r=t(2288).countTrailingZeros;d.exports=function(n){var a=r(o.lo(n));if(a<32)return a;var i=r(o.hi(n));return i>20?52:i+32}},3218:function(d,s,t){t(1928),d.exports=function(o){return o&&typeof o=="object"&&Boolean(o.words)}},5514:function(d,s,t){var o=t(1928),r=t(8362);d.exports=function(n){var a=r.exponent(n);return a<52?new o(n):new o(n*Math.pow(2,52-a)).ushln(a-52)}},8524:function(d,s,t){var o=t(5514),r=t(4275);d.exports=function(n,a){var i=r(n),c=r(a);if(i===0)return[o(0),o(1)];if(c===0)return[o(0),o(0)];c<0&&(n=n.neg(),a=a.neg());var h=n.gcd(a);return h.cmpn(1)?[n.div(h),a.div(h)]:[n,a]}},2813:function(d,s,t){var o=t(1928);d.exports=function(r){return new o(r)}},3962:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[0]),r[1].mul(n[1]))}},4951:function(d,s,t){var o=t(4275);d.exports=function(r){return o(r[0])*o(r[1])}},4354:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},7999:function(d,s,t){var o=t(9958),r=t(1112);d.exports=function(n){var a=n[0],i=n[1];if(a.cmpn(0)===0)return 0;var c=a.abs().divmod(i.abs()),h=c.div,f=o(h),b=c.mod,v=a.negative!==i.negative?-1:1;if(b.cmpn(0)===0)return v*f;if(f){var g=r(f)+4,y=o(b.ushln(g).divRound(i));return v*(f+y*Math.pow(2,-g))}var p=i.bitLength()-b.bitLength()+53;return y=o(b.ushln(p).divRound(i)),p<1023?v*y*Math.pow(2,-p):v*(y*=Math.pow(2,-1023))*Math.pow(2,1023-p)}},5070:function(d){function s(i,c,h,f,b){for(var v=b+1;f<=b;){var g=f+b>>>1,y=i[g];(h!==void 0?h(y,c):y-c)>=0?(v=g,b=g-1):f=g+1}return v}function t(i,c,h,f,b){for(var v=b+1;f<=b;){var g=f+b>>>1,y=i[g];(h!==void 0?h(y,c):y-c)>0?(v=g,b=g-1):f=g+1}return v}function o(i,c,h,f,b){for(var v=f-1;f<=b;){var g=f+b>>>1,y=i[g];(h!==void 0?h(y,c):y-c)<0?(v=g,f=g+1):b=g-1}return v}function r(i,c,h,f,b){for(var v=f-1;f<=b;){var g=f+b>>>1,y=i[g];(h!==void 0?h(y,c):y-c)<=0?(v=g,f=g+1):b=g-1}return v}function n(i,c,h,f,b){for(;f<=b;){var v=f+b>>>1,g=i[v],y=h!==void 0?h(g,c):g-c;if(y===0)return v;y<=0?f=v+1:b=v-1}return-1}function a(i,c,h,f,b,v){return typeof h=="function"?v(i,c,h,f===void 0?0:0|f,b===void 0?i.length-1:0|b):v(i,c,void 0,h===void 0?0:0|h,f===void 0?i.length-1:0|f)}d.exports={ge:function(i,c,h,f,b){return a(i,c,h,f,b,s)},gt:function(i,c,h,f,b){return a(i,c,h,f,b,t)},lt:function(i,c,h,f,b){return a(i,c,h,f,b,o)},le:function(i,c,h,f,b){return a(i,c,h,f,b,r)},eq:function(i,c,h,f,b){return a(i,c,h,f,b,n)}}},2288:function(d,s){function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,i=n,c=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=1&a,--c;r[n]=i<<c&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},1928:function(d,s,t){(function(o,r){function n(z,H){if(!z)throw new Error(H||"Assertion failed")}function a(z,H){z.super_=H;var F=function(){};F.prototype=H.prototype,z.prototype=new F,z.prototype.constructor=z}function i(z,H,F){if(i.isBN(z))return z;this.negative=0,this.words=null,this.length=0,this.red=null,z!==null&&(H!=="le"&&H!=="be"||(F=H,H=10),this._init(z||0,H||10,F||"be"))}var c;typeof o=="object"?o.exports=i:r.BN=i,i.BN=i,i.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(6601).Buffer}catch{}function h(z,H){var F=z.charCodeAt(H);return F>=65&&F<=70?F-55:F>=97&&F<=102?F-87:F-48&15}function f(z,H,F){var N=h(z,F);return F-1>=H&&(N|=h(z,F-1)<<4),N}function b(z,H,F,N){for(var B=0,j=Math.min(z.length,F),K=H;K<j;K++){var G=z.charCodeAt(K)-48;B*=N,B+=G>=49?G-49+10:G>=17?G-17+10:G}return B}i.isBN=function(z){return z instanceof i||z!==null&&typeof z=="object"&&z.constructor.wordSize===i.wordSize&&Array.isArray(z.words)},i.max=function(z,H){return z.cmp(H)>0?z:H},i.min=function(z,H){return z.cmp(H)<0?z:H},i.prototype._init=function(z,H,F){if(typeof z=="number")return this._initNumber(z,H,F);if(typeof z=="object")return this._initArray(z,H,F);H==="hex"&&(H=16),n(H===(0|H)&&H>=2&&H<=36);var N=0;(z=z.toString().replace(/\s+/g,""))[0]==="-"&&(N++,this.negative=1),N<z.length&&(H===16?this._parseHex(z,N,F):(this._parseBase(z,H,N),F==="le"&&this._initArray(this.toArray(),H,F)))},i.prototype._initNumber=function(z,H,F){z<0&&(this.negative=1,z=-z),z<67108864?(this.words=[67108863&z],this.length=1):z<4503599627370496?(this.words=[67108863&z,z/67108864&67108863],this.length=2):(n(z<9007199254740992),this.words=[67108863&z,z/67108864&67108863,1],this.length=3),F==="le"&&this._initArray(this.toArray(),H,F)},i.prototype._initArray=function(z,H,F){if(n(typeof z.length=="number"),z.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(z.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var B,j,K=0;if(F==="be")for(N=z.length-1,B=0;N>=0;N-=3)j=z[N]|z[N-1]<<8|z[N-2]<<16,this.words[B]|=j<<K&67108863,this.words[B+1]=j>>>26-K&67108863,(K+=24)>=26&&(K-=26,B++);else if(F==="le")for(N=0,B=0;N<z.length;N+=3)j=z[N]|z[N+1]<<8|z[N+2]<<16,this.words[B]|=j<<K&67108863,this.words[B+1]=j>>>26-K&67108863,(K+=24)>=26&&(K-=26,B++);return this.strip()},i.prototype._parseHex=function(z,H,F){this.length=Math.ceil((z.length-H)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var B,j=0,K=0;if(F==="be")for(N=z.length-1;N>=H;N-=2)B=f(z,H,N)<<j,this.words[K]|=67108863&B,j>=18?(j-=18,K+=1,this.words[K]|=B>>>26):j+=8;else for(N=(z.length-H)%2==0?H+1:H;N<z.length;N+=2)B=f(z,H,N)<<j,this.words[K]|=67108863&B,j>=18?(j-=18,K+=1,this.words[K]|=B>>>26):j+=8;this.strip()},i.prototype._parseBase=function(z,H,F){this.words=[0],this.length=1;for(var N=0,B=1;B<=67108863;B*=H)N++;N--,B=B/H|0;for(var j=z.length-F,K=j%N,G=Math.min(j,j-K)+F,V=0,W=F;W<G;W+=N)V=b(z,W,W+N,H),this.imuln(B),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V);if(K!==0){var J=1;for(V=b(z,W,z.length,H),W=0;W<K;W++)J*=H;this.imuln(J),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V)}this.strip()},i.prototype.copy=function(z){z.words=new Array(this.length);for(var H=0;H<this.length;H++)z.words[H]=this.words[H];z.length=this.length,z.negative=this.negative,z.red=this.red},i.prototype.clone=function(){var z=new i(null);return this.copy(z),z},i.prototype._expand=function(z){for(;this.length<z;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(z,H,F){F.negative=H.negative^z.negative;var N=z.length+H.length|0;F.length=N,N=N-1|0;var B=0|z.words[0],j=0|H.words[0],K=B*j,G=67108863&K,V=K/67108864|0;F.words[0]=G;for(var W=1;W<N;W++){for(var J=V>>>26,X=67108863&V,ee=Math.min(W,H.length-1),re=Math.max(0,W-z.length+1);re<=ee;re++){var ie=W-re|0;J+=(K=(B=0|z.words[ie])*(j=0|H.words[re])+X)/67108864|0,X=67108863&K}F.words[W]=0|X,V=0|J}return V!==0?F.words[W]=0|V:F.length--,F.strip()}i.prototype.toString=function(z,H){var F;if(H=0|H||1,(z=z||10)===16||z==="hex"){F="";for(var N=0,B=0,j=0;j<this.length;j++){var K=this.words[j],G=(16777215&(K<<N|B)).toString(16);F=(B=K>>>24-N&16777215)!=0||j!==this.length-1?v[6-G.length]+G+F:G+F,(N+=2)>=26&&(N-=26,j--)}for(B!==0&&(F=B.toString(16)+F);F.length%H!=0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}if(z===(0|z)&&z>=2&&z<=36){var V=g[z],W=y[z];F="";var J=this.clone();for(J.negative=0;!J.isZero();){var X=J.modn(W).toString(z);F=(J=J.idivn(W)).isZero()?X+F:v[V-X.length]+X+F}for(this.isZero()&&(F="0"+F);F.length%H!=0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var z=this.words[0];return this.length===2?z+=67108864*this.words[1]:this.length===3&&this.words[2]===1?z+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-z:z},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(z,H){return n(c!==void 0),this.toArrayLike(c,z,H)},i.prototype.toArray=function(z,H){return this.toArrayLike(Array,z,H)},i.prototype.toArrayLike=function(z,H,F){var N=this.byteLength(),B=F||Math.max(1,N);n(N<=B,"byte array longer than desired length"),n(B>0,"Requested array length <= 0"),this.strip();var j,K,G=H==="le",V=new z(B),W=this.clone();if(G){for(K=0;!W.isZero();K++)j=W.andln(255),W.iushrn(8),V[K]=j;for(;K<B;K++)V[K]=0}else{for(K=0;K<B-N;K++)V[K]=0;for(K=0;!W.isZero();K++)j=W.andln(255),W.iushrn(8),V[B-K-1]=j}return V},Math.clz32?i.prototype._countBits=function(z){return 32-Math.clz32(z)}:i.prototype._countBits=function(z){var H=z,F=0;return H>=4096&&(F+=13,H>>>=13),H>=64&&(F+=7,H>>>=7),H>=8&&(F+=4,H>>>=4),H>=2&&(F+=2,H>>>=2),F+H},i.prototype._zeroBits=function(z){if(z===0)return 26;var H=z,F=0;return!(8191&H)&&(F+=13,H>>>=13),!(127&H)&&(F+=7,H>>>=7),!(15&H)&&(F+=4,H>>>=4),!(3&H)&&(F+=2,H>>>=2),!(1&H)&&F++,F},i.prototype.bitLength=function(){var z=this.words[this.length-1],H=this._countBits(z);return 26*(this.length-1)+H},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var z=0,H=0;H<this.length;H++){var F=this._zeroBits(this.words[H]);if(z+=F,F!==26)break}return z},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(z){return this.negative!==0?this.abs().inotn(z).iaddn(1):this.clone()},i.prototype.fromTwos=function(z){return this.testn(z-1)?this.notn(z).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(z){for(;this.length<z.length;)this.words[this.length++]=0;for(var H=0;H<z.length;H++)this.words[H]=this.words[H]|z.words[H];return this.strip()},i.prototype.ior=function(z){return n((this.negative|z.negative)==0),this.iuor(z)},i.prototype.or=function(z){return this.length>z.length?this.clone().ior(z):z.clone().ior(this)},i.prototype.uor=function(z){return this.length>z.length?this.clone().iuor(z):z.clone().iuor(this)},i.prototype.iuand=function(z){var H;H=this.length>z.length?z:this;for(var F=0;F<H.length;F++)this.words[F]=this.words[F]&z.words[F];return this.length=H.length,this.strip()},i.prototype.iand=function(z){return n((this.negative|z.negative)==0),this.iuand(z)},i.prototype.and=function(z){return this.length>z.length?this.clone().iand(z):z.clone().iand(this)},i.prototype.uand=function(z){return this.length>z.length?this.clone().iuand(z):z.clone().iuand(this)},i.prototype.iuxor=function(z){var H,F;this.length>z.length?(H=this,F=z):(H=z,F=this);for(var N=0;N<F.length;N++)this.words[N]=H.words[N]^F.words[N];if(this!==H)for(;N<H.length;N++)this.words[N]=H.words[N];return this.length=H.length,this.strip()},i.prototype.ixor=function(z){return n((this.negative|z.negative)==0),this.iuxor(z)},i.prototype.xor=function(z){return this.length>z.length?this.clone().ixor(z):z.clone().ixor(this)},i.prototype.uxor=function(z){return this.length>z.length?this.clone().iuxor(z):z.clone().iuxor(this)},i.prototype.inotn=function(z){n(typeof z=="number"&&z>=0);var H=0|Math.ceil(z/26),F=z%26;this._expand(H),F>0&&H--;for(var N=0;N<H;N++)this.words[N]=67108863&~this.words[N];return F>0&&(this.words[N]=~this.words[N]&67108863>>26-F),this.strip()},i.prototype.notn=function(z){return this.clone().inotn(z)},i.prototype.setn=function(z,H){n(typeof z=="number"&&z>=0);var F=z/26|0,N=z%26;return this._expand(F+1),this.words[F]=H?this.words[F]|1<<N:this.words[F]&~(1<<N),this.strip()},i.prototype.iadd=function(z){var H,F,N;if(this.negative!==0&&z.negative===0)return this.negative=0,H=this.isub(z),this.negative^=1,this._normSign();if(this.negative===0&&z.negative!==0)return z.negative=0,H=this.isub(z),z.negative=1,H._normSign();this.length>z.length?(F=this,N=z):(F=z,N=this);for(var B=0,j=0;j<N.length;j++)H=(0|F.words[j])+(0|N.words[j])+B,this.words[j]=67108863&H,B=H>>>26;for(;B!==0&&j<F.length;j++)H=(0|F.words[j])+B,this.words[j]=67108863&H,B=H>>>26;if(this.length=F.length,B!==0)this.words[this.length]=B,this.length++;else if(F!==this)for(;j<F.length;j++)this.words[j]=F.words[j];return this},i.prototype.add=function(z){var H;return z.negative!==0&&this.negative===0?(z.negative=0,H=this.sub(z),z.negative^=1,H):z.negative===0&&this.negative!==0?(this.negative=0,H=z.sub(this),this.negative=1,H):this.length>z.length?this.clone().iadd(z):z.clone().iadd(this)},i.prototype.isub=function(z){if(z.negative!==0){z.negative=0;var H=this.iadd(z);return z.negative=1,H._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(z),this.negative=1,this._normSign();var F,N,B=this.cmp(z);if(B===0)return this.negative=0,this.length=1,this.words[0]=0,this;B>0?(F=this,N=z):(F=z,N=this);for(var j=0,K=0;K<N.length;K++)j=(H=(0|F.words[K])-(0|N.words[K])+j)>>26,this.words[K]=67108863&H;for(;j!==0&&K<F.length;K++)j=(H=(0|F.words[K])+j)>>26,this.words[K]=67108863&H;if(j===0&&K<F.length&&F!==this)for(;K<F.length;K++)this.words[K]=F.words[K];return this.length=Math.max(this.length,K),F!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(z){return this.clone().isub(z)};var m=function(z,H,F){var N,B,j,K=z.words,G=H.words,V=F.words,W=0,J=0|K[0],X=8191&J,ee=J>>>13,re=0|K[1],ie=8191&re,se=re>>>13,fe=0|K[2],ye=8191&fe,ge=fe>>>13,he=0|K[3],ve=8191&he,Ie=he>>>13,xe=0|K[4],Ae=8191&xe,Se=xe>>>13,Te=0|K[5],Q=8191&Te,oe=Te>>>13,ce=0|K[6],me=8191&ce,Me=ce>>>13,Re=0|K[7],Ce=8191&Re,ze=Re>>>13,le=0|K[8],de=8191&le,be=le>>>13,Fe=0|K[9],Ve=8191&Fe,He=Fe>>>13,rt=0|G[0],tt=8191&rt,ot=rt>>>13,ht=0|G[1],_t=8191&ht,dt=ht>>>13,bt=0|G[2],St=8191&bt,Et=bt>>>13,zt=0|G[3],Ut=8191&zt,Pt=zt>>>13,Ze=0|G[4],Ye=8191&Ze,Be=Ze>>>13,ke=0|G[5],Pe=8191&ke,qe=ke>>>13,Xe=0|G[6],nt=8191&Xe,ut=Xe>>>13,ct=0|G[7],Ct=8191&ct,Lt=ct>>>13,Mt=0|G[8],mt=8191&Mt,kt=Mt>>>13,wt=0|G[9],Ot=8191&wt,It=wt>>>13;F.negative=z.negative^H.negative,F.length=19;var Nt=(W+(N=Math.imul(X,tt))|0)+((8191&(B=(B=Math.imul(X,ot))+Math.imul(ee,tt)|0))<<13)|0;W=((j=Math.imul(ee,ot))+(B>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,N=Math.imul(ie,tt),B=(B=Math.imul(ie,ot))+Math.imul(se,tt)|0,j=Math.imul(se,ot);var Dt=(W+(N=N+Math.imul(X,_t)|0)|0)+((8191&(B=(B=B+Math.imul(X,dt)|0)+Math.imul(ee,_t)|0))<<13)|0;W=((j=j+Math.imul(ee,dt)|0)+(B>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,N=Math.imul(ye,tt),B=(B=Math.imul(ye,ot))+Math.imul(ge,tt)|0,j=Math.imul(ge,ot),N=N+Math.imul(ie,_t)|0,B=(B=B+Math.imul(ie,dt)|0)+Math.imul(se,_t)|0,j=j+Math.imul(se,dt)|0;var qt=(W+(N=N+Math.imul(X,St)|0)|0)+((8191&(B=(B=B+Math.imul(X,Et)|0)+Math.imul(ee,St)|0))<<13)|0;W=((j=j+Math.imul(ee,Et)|0)+(B>>>13)|0)+(qt>>>26)|0,qt&=67108863,N=Math.imul(ve,tt),B=(B=Math.imul(ve,ot))+Math.imul(Ie,tt)|0,j=Math.imul(Ie,ot),N=N+Math.imul(ye,_t)|0,B=(B=B+Math.imul(ye,dt)|0)+Math.imul(ge,_t)|0,j=j+Math.imul(ge,dt)|0,N=N+Math.imul(ie,St)|0,B=(B=B+Math.imul(ie,Et)|0)+Math.imul(se,St)|0,j=j+Math.imul(se,Et)|0;var Xt=(W+(N=N+Math.imul(X,Ut)|0)|0)+((8191&(B=(B=B+Math.imul(X,Pt)|0)+Math.imul(ee,Ut)|0))<<13)|0;W=((j=j+Math.imul(ee,Pt)|0)+(B>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,N=Math.imul(Ae,tt),B=(B=Math.imul(Ae,ot))+Math.imul(Se,tt)|0,j=Math.imul(Se,ot),N=N+Math.imul(ve,_t)|0,B=(B=B+Math.imul(ve,dt)|0)+Math.imul(Ie,_t)|0,j=j+Math.imul(Ie,dt)|0,N=N+Math.imul(ye,St)|0,B=(B=B+Math.imul(ye,Et)|0)+Math.imul(ge,St)|0,j=j+Math.imul(ge,Et)|0,N=N+Math.imul(ie,Ut)|0,B=(B=B+Math.imul(ie,Pt)|0)+Math.imul(se,Ut)|0,j=j+Math.imul(se,Pt)|0;var cn=(W+(N=N+Math.imul(X,Ye)|0)|0)+((8191&(B=(B=B+Math.imul(X,Be)|0)+Math.imul(ee,Ye)|0))<<13)|0;W=((j=j+Math.imul(ee,Be)|0)+(B>>>13)|0)+(cn>>>26)|0,cn&=67108863,N=Math.imul(Q,tt),B=(B=Math.imul(Q,ot))+Math.imul(oe,tt)|0,j=Math.imul(oe,ot),N=N+Math.imul(Ae,_t)|0,B=(B=B+Math.imul(Ae,dt)|0)+Math.imul(Se,_t)|0,j=j+Math.imul(Se,dt)|0,N=N+Math.imul(ve,St)|0,B=(B=B+Math.imul(ve,Et)|0)+Math.imul(Ie,St)|0,j=j+Math.imul(Ie,Et)|0,N=N+Math.imul(ye,Ut)|0,B=(B=B+Math.imul(ye,Pt)|0)+Math.imul(ge,Ut)|0,j=j+Math.imul(ge,Pt)|0,N=N+Math.imul(ie,Ye)|0,B=(B=B+Math.imul(ie,Be)|0)+Math.imul(se,Ye)|0,j=j+Math.imul(se,Be)|0;var yn=(W+(N=N+Math.imul(X,Pe)|0)|0)+((8191&(B=(B=B+Math.imul(X,qe)|0)+Math.imul(ee,Pe)|0))<<13)|0;W=((j=j+Math.imul(ee,qe)|0)+(B>>>13)|0)+(yn>>>26)|0,yn&=67108863,N=Math.imul(me,tt),B=(B=Math.imul(me,ot))+Math.imul(Me,tt)|0,j=Math.imul(Me,ot),N=N+Math.imul(Q,_t)|0,B=(B=B+Math.imul(Q,dt)|0)+Math.imul(oe,_t)|0,j=j+Math.imul(oe,dt)|0,N=N+Math.imul(Ae,St)|0,B=(B=B+Math.imul(Ae,Et)|0)+Math.imul(Se,St)|0,j=j+Math.imul(Se,Et)|0,N=N+Math.imul(ve,Ut)|0,B=(B=B+Math.imul(ve,Pt)|0)+Math.imul(Ie,Ut)|0,j=j+Math.imul(Ie,Pt)|0,N=N+Math.imul(ye,Ye)|0,B=(B=B+Math.imul(ye,Be)|0)+Math.imul(ge,Ye)|0,j=j+Math.imul(ge,Be)|0,N=N+Math.imul(ie,Pe)|0,B=(B=B+Math.imul(ie,qe)|0)+Math.imul(se,Pe)|0,j=j+Math.imul(se,qe)|0;var Kt=(W+(N=N+Math.imul(X,nt)|0)|0)+((8191&(B=(B=B+Math.imul(X,ut)|0)+Math.imul(ee,nt)|0))<<13)|0;W=((j=j+Math.imul(ee,ut)|0)+(B>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,N=Math.imul(Ce,tt),B=(B=Math.imul(Ce,ot))+Math.imul(ze,tt)|0,j=Math.imul(ze,ot),N=N+Math.imul(me,_t)|0,B=(B=B+Math.imul(me,dt)|0)+Math.imul(Me,_t)|0,j=j+Math.imul(Me,dt)|0,N=N+Math.imul(Q,St)|0,B=(B=B+Math.imul(Q,Et)|0)+Math.imul(oe,St)|0,j=j+Math.imul(oe,Et)|0,N=N+Math.imul(Ae,Ut)|0,B=(B=B+Math.imul(Ae,Pt)|0)+Math.imul(Se,Ut)|0,j=j+Math.imul(Se,Pt)|0,N=N+Math.imul(ve,Ye)|0,B=(B=B+Math.imul(ve,Be)|0)+Math.imul(Ie,Ye)|0,j=j+Math.imul(Ie,Be)|0,N=N+Math.imul(ye,Pe)|0,B=(B=B+Math.imul(ye,qe)|0)+Math.imul(ge,Pe)|0,j=j+Math.imul(ge,qe)|0,N=N+Math.imul(ie,nt)|0,B=(B=B+Math.imul(ie,ut)|0)+Math.imul(se,nt)|0,j=j+Math.imul(se,ut)|0;var Mn=(W+(N=N+Math.imul(X,Ct)|0)|0)+((8191&(B=(B=B+Math.imul(X,Lt)|0)+Math.imul(ee,Ct)|0))<<13)|0;W=((j=j+Math.imul(ee,Lt)|0)+(B>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,N=Math.imul(de,tt),B=(B=Math.imul(de,ot))+Math.imul(be,tt)|0,j=Math.imul(be,ot),N=N+Math.imul(Ce,_t)|0,B=(B=B+Math.imul(Ce,dt)|0)+Math.imul(ze,_t)|0,j=j+Math.imul(ze,dt)|0,N=N+Math.imul(me,St)|0,B=(B=B+Math.imul(me,Et)|0)+Math.imul(Me,St)|0,j=j+Math.imul(Me,Et)|0,N=N+Math.imul(Q,Ut)|0,B=(B=B+Math.imul(Q,Pt)|0)+Math.imul(oe,Ut)|0,j=j+Math.imul(oe,Pt)|0,N=N+Math.imul(Ae,Ye)|0,B=(B=B+Math.imul(Ae,Be)|0)+Math.imul(Se,Ye)|0,j=j+Math.imul(Se,Be)|0,N=N+Math.imul(ve,Pe)|0,B=(B=B+Math.imul(ve,qe)|0)+Math.imul(Ie,Pe)|0,j=j+Math.imul(Ie,qe)|0,N=N+Math.imul(ye,nt)|0,B=(B=B+Math.imul(ye,ut)|0)+Math.imul(ge,nt)|0,j=j+Math.imul(ge,ut)|0,N=N+Math.imul(ie,Ct)|0,B=(B=B+Math.imul(ie,Lt)|0)+Math.imul(se,Ct)|0,j=j+Math.imul(se,Lt)|0;var Un=(W+(N=N+Math.imul(X,mt)|0)|0)+((8191&(B=(B=B+Math.imul(X,kt)|0)+Math.imul(ee,mt)|0))<<13)|0;W=((j=j+Math.imul(ee,kt)|0)+(B>>>13)|0)+(Un>>>26)|0,Un&=67108863,N=Math.imul(Ve,tt),B=(B=Math.imul(Ve,ot))+Math.imul(He,tt)|0,j=Math.imul(He,ot),N=N+Math.imul(de,_t)|0,B=(B=B+Math.imul(de,dt)|0)+Math.imul(be,_t)|0,j=j+Math.imul(be,dt)|0,N=N+Math.imul(Ce,St)|0,B=(B=B+Math.imul(Ce,Et)|0)+Math.imul(ze,St)|0,j=j+Math.imul(ze,Et)|0,N=N+Math.imul(me,Ut)|0,B=(B=B+Math.imul(me,Pt)|0)+Math.imul(Me,Ut)|0,j=j+Math.imul(Me,Pt)|0,N=N+Math.imul(Q,Ye)|0,B=(B=B+Math.imul(Q,Be)|0)+Math.imul(oe,Ye)|0,j=j+Math.imul(oe,Be)|0,N=N+Math.imul(Ae,Pe)|0,B=(B=B+Math.imul(Ae,qe)|0)+Math.imul(Se,Pe)|0,j=j+Math.imul(Se,qe)|0,N=N+Math.imul(ve,nt)|0,B=(B=B+Math.imul(ve,ut)|0)+Math.imul(Ie,nt)|0,j=j+Math.imul(Ie,ut)|0,N=N+Math.imul(ye,Ct)|0,B=(B=B+Math.imul(ye,Lt)|0)+Math.imul(ge,Ct)|0,j=j+Math.imul(ge,Lt)|0,N=N+Math.imul(ie,mt)|0,B=(B=B+Math.imul(ie,kt)|0)+Math.imul(se,mt)|0,j=j+Math.imul(se,kt)|0;var xn=(W+(N=N+Math.imul(X,Ot)|0)|0)+((8191&(B=(B=B+Math.imul(X,It)|0)+Math.imul(ee,Ot)|0))<<13)|0;W=((j=j+Math.imul(ee,It)|0)+(B>>>13)|0)+(xn>>>26)|0,xn&=67108863,N=Math.imul(Ve,_t),B=(B=Math.imul(Ve,dt))+Math.imul(He,_t)|0,j=Math.imul(He,dt),N=N+Math.imul(de,St)|0,B=(B=B+Math.imul(de,Et)|0)+Math.imul(be,St)|0,j=j+Math.imul(be,Et)|0,N=N+Math.imul(Ce,Ut)|0,B=(B=B+Math.imul(Ce,Pt)|0)+Math.imul(ze,Ut)|0,j=j+Math.imul(ze,Pt)|0,N=N+Math.imul(me,Ye)|0,B=(B=B+Math.imul(me,Be)|0)+Math.imul(Me,Ye)|0,j=j+Math.imul(Me,Be)|0,N=N+Math.imul(Q,Pe)|0,B=(B=B+Math.imul(Q,qe)|0)+Math.imul(oe,Pe)|0,j=j+Math.imul(oe,qe)|0,N=N+Math.imul(Ae,nt)|0,B=(B=B+Math.imul(Ae,ut)|0)+Math.imul(Se,nt)|0,j=j+Math.imul(Se,ut)|0,N=N+Math.imul(ve,Ct)|0,B=(B=B+Math.imul(ve,Lt)|0)+Math.imul(Ie,Ct)|0,j=j+Math.imul(Ie,Lt)|0,N=N+Math.imul(ye,mt)|0,B=(B=B+Math.imul(ye,kt)|0)+Math.imul(ge,mt)|0,j=j+Math.imul(ge,kt)|0;var dn=(W+(N=N+Math.imul(ie,Ot)|0)|0)+((8191&(B=(B=B+Math.imul(ie,It)|0)+Math.imul(se,Ot)|0))<<13)|0;W=((j=j+Math.imul(se,It)|0)+(B>>>13)|0)+(dn>>>26)|0,dn&=67108863,N=Math.imul(Ve,St),B=(B=Math.imul(Ve,Et))+Math.imul(He,St)|0,j=Math.imul(He,Et),N=N+Math.imul(de,Ut)|0,B=(B=B+Math.imul(de,Pt)|0)+Math.imul(be,Ut)|0,j=j+Math.imul(be,Pt)|0,N=N+Math.imul(Ce,Ye)|0,B=(B=B+Math.imul(Ce,Be)|0)+Math.imul(ze,Ye)|0,j=j+Math.imul(ze,Be)|0,N=N+Math.imul(me,Pe)|0,B=(B=B+Math.imul(me,qe)|0)+Math.imul(Me,Pe)|0,j=j+Math.imul(Me,qe)|0,N=N+Math.imul(Q,nt)|0,B=(B=B+Math.imul(Q,ut)|0)+Math.imul(oe,nt)|0,j=j+Math.imul(oe,ut)|0,N=N+Math.imul(Ae,Ct)|0,B=(B=B+Math.imul(Ae,Lt)|0)+Math.imul(Se,Ct)|0,j=j+Math.imul(Se,Lt)|0,N=N+Math.imul(ve,mt)|0,B=(B=B+Math.imul(ve,kt)|0)+Math.imul(Ie,mt)|0,j=j+Math.imul(Ie,kt)|0;var gn=(W+(N=N+Math.imul(ye,Ot)|0)|0)+((8191&(B=(B=B+Math.imul(ye,It)|0)+Math.imul(ge,Ot)|0))<<13)|0;W=((j=j+Math.imul(ge,It)|0)+(B>>>13)|0)+(gn>>>26)|0,gn&=67108863,N=Math.imul(Ve,Ut),B=(B=Math.imul(Ve,Pt))+Math.imul(He,Ut)|0,j=Math.imul(He,Pt),N=N+Math.imul(de,Ye)|0,B=(B=B+Math.imul(de,Be)|0)+Math.imul(be,Ye)|0,j=j+Math.imul(be,Be)|0,N=N+Math.imul(Ce,Pe)|0,B=(B=B+Math.imul(Ce,qe)|0)+Math.imul(ze,Pe)|0,j=j+Math.imul(ze,qe)|0,N=N+Math.imul(me,nt)|0,B=(B=B+Math.imul(me,ut)|0)+Math.imul(Me,nt)|0,j=j+Math.imul(Me,ut)|0,N=N+Math.imul(Q,Ct)|0,B=(B=B+Math.imul(Q,Lt)|0)+Math.imul(oe,Ct)|0,j=j+Math.imul(oe,Lt)|0,N=N+Math.imul(Ae,mt)|0,B=(B=B+Math.imul(Ae,kt)|0)+Math.imul(Se,mt)|0,j=j+Math.imul(Se,kt)|0;var an=(W+(N=N+Math.imul(ve,Ot)|0)|0)+((8191&(B=(B=B+Math.imul(ve,It)|0)+Math.imul(Ie,Ot)|0))<<13)|0;W=((j=j+Math.imul(Ie,It)|0)+(B>>>13)|0)+(an>>>26)|0,an&=67108863,N=Math.imul(Ve,Ye),B=(B=Math.imul(Ve,Be))+Math.imul(He,Ye)|0,j=Math.imul(He,Be),N=N+Math.imul(de,Pe)|0,B=(B=B+Math.imul(de,qe)|0)+Math.imul(be,Pe)|0,j=j+Math.imul(be,qe)|0,N=N+Math.imul(Ce,nt)|0,B=(B=B+Math.imul(Ce,ut)|0)+Math.imul(ze,nt)|0,j=j+Math.imul(ze,ut)|0,N=N+Math.imul(me,Ct)|0,B=(B=B+Math.imul(me,Lt)|0)+Math.imul(Me,Ct)|0,j=j+Math.imul(Me,Lt)|0,N=N+Math.imul(Q,mt)|0,B=(B=B+Math.imul(Q,kt)|0)+Math.imul(oe,mt)|0,j=j+Math.imul(oe,kt)|0;var sn=(W+(N=N+Math.imul(Ae,Ot)|0)|0)+((8191&(B=(B=B+Math.imul(Ae,It)|0)+Math.imul(Se,Ot)|0))<<13)|0;W=((j=j+Math.imul(Se,It)|0)+(B>>>13)|0)+(sn>>>26)|0,sn&=67108863,N=Math.imul(Ve,Pe),B=(B=Math.imul(Ve,qe))+Math.imul(He,Pe)|0,j=Math.imul(He,qe),N=N+Math.imul(de,nt)|0,B=(B=B+Math.imul(de,ut)|0)+Math.imul(be,nt)|0,j=j+Math.imul(be,ut)|0,N=N+Math.imul(Ce,Ct)|0,B=(B=B+Math.imul(Ce,Lt)|0)+Math.imul(ze,Ct)|0,j=j+Math.imul(ze,Lt)|0,N=N+Math.imul(me,mt)|0,B=(B=B+Math.imul(me,kt)|0)+Math.imul(Me,mt)|0,j=j+Math.imul(Me,kt)|0;var On=(W+(N=N+Math.imul(Q,Ot)|0)|0)+((8191&(B=(B=B+Math.imul(Q,It)|0)+Math.imul(oe,Ot)|0))<<13)|0;W=((j=j+Math.imul(oe,It)|0)+(B>>>13)|0)+(On>>>26)|0,On&=67108863,N=Math.imul(Ve,nt),B=(B=Math.imul(Ve,ut))+Math.imul(He,nt)|0,j=Math.imul(He,ut),N=N+Math.imul(de,Ct)|0,B=(B=B+Math.imul(de,Lt)|0)+Math.imul(be,Ct)|0,j=j+Math.imul(be,Lt)|0,N=N+Math.imul(Ce,mt)|0,B=(B=B+Math.imul(Ce,kt)|0)+Math.imul(ze,mt)|0,j=j+Math.imul(ze,kt)|0;var En=(W+(N=N+Math.imul(me,Ot)|0)|0)+((8191&(B=(B=B+Math.imul(me,It)|0)+Math.imul(Me,Ot)|0))<<13)|0;W=((j=j+Math.imul(Me,It)|0)+(B>>>13)|0)+(En>>>26)|0,En&=67108863,N=Math.imul(Ve,Ct),B=(B=Math.imul(Ve,Lt))+Math.imul(He,Ct)|0,j=Math.imul(He,Lt),N=N+Math.imul(de,mt)|0,B=(B=B+Math.imul(de,kt)|0)+Math.imul(be,mt)|0,j=j+Math.imul(be,kt)|0;var Dn=(W+(N=N+Math.imul(Ce,Ot)|0)|0)+((8191&(B=(B=B+Math.imul(Ce,It)|0)+Math.imul(ze,Ot)|0))<<13)|0;W=((j=j+Math.imul(ze,It)|0)+(B>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,N=Math.imul(Ve,mt),B=(B=Math.imul(Ve,kt))+Math.imul(He,mt)|0,j=Math.imul(He,kt);var Zn=(W+(N=N+Math.imul(de,Ot)|0)|0)+((8191&(B=(B=B+Math.imul(de,It)|0)+Math.imul(be,Ot)|0))<<13)|0;W=((j=j+Math.imul(be,It)|0)+(B>>>13)|0)+(Zn>>>26)|0,Zn&=67108863;var Fn=(W+(N=Math.imul(Ve,Ot))|0)+((8191&(B=(B=Math.imul(Ve,It))+Math.imul(He,Ot)|0))<<13)|0;return W=((j=Math.imul(He,It))+(B>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,V[0]=Nt,V[1]=Dt,V[2]=qt,V[3]=Xt,V[4]=cn,V[5]=yn,V[6]=Kt,V[7]=Mn,V[8]=Un,V[9]=xn,V[10]=dn,V[11]=gn,V[12]=an,V[13]=sn,V[14]=On,V[15]=En,V[16]=Dn,V[17]=Zn,V[18]=Fn,W!==0&&(V[19]=W,F.length++),F};function w(z,H,F){return new u().mulp(z,H,F)}function u(z,H){this.x=z,this.y=H}Math.imul||(m=p),i.prototype.mulTo=function(z,H){var F,N=this.length+z.length;return F=this.length===10&&z.length===10?m(this,z,H):N<63?p(this,z,H):N<1024?function(B,j,K){K.negative=j.negative^B.negative,K.length=B.length+j.length;for(var G=0,V=0,W=0;W<K.length-1;W++){var J=V;V=0;for(var X=67108863&G,ee=Math.min(W,j.length-1),re=Math.max(0,W-B.length+1);re<=ee;re++){var ie=W-re,se=(0|B.words[ie])*(0|j.words[re]),fe=67108863&se;X=67108863&(fe=fe+X|0),V+=(J=(J=J+(se/67108864|0)|0)+(fe>>>26)|0)>>>26,J&=67108863}K.words[W]=X,G=J,J=V}return G!==0?K.words[W]=G:K.length--,K.strip()}(this,z,H):w(this,z,H),F},u.prototype.makeRBT=function(z){for(var H=new Array(z),F=i.prototype._countBits(z)-1,N=0;N<z;N++)H[N]=this.revBin(N,F,z);return H},u.prototype.revBin=function(z,H,F){if(z===0||z===F-1)return z;for(var N=0,B=0;B<H;B++)N|=(1&z)<<H-B-1,z>>=1;return N},u.prototype.permute=function(z,H,F,N,B,j){for(var K=0;K<j;K++)N[K]=H[z[K]],B[K]=F[z[K]]},u.prototype.transform=function(z,H,F,N,B,j){this.permute(j,z,H,F,N,B);for(var K=1;K<B;K<<=1)for(var G=K<<1,V=Math.cos(2*Math.PI/G),W=Math.sin(2*Math.PI/G),J=0;J<B;J+=G)for(var X=V,ee=W,re=0;re<K;re++){var ie=F[J+re],se=N[J+re],fe=F[J+re+K],ye=N[J+re+K],ge=X*fe-ee*ye;ye=X*ye+ee*fe,fe=ge,F[J+re]=ie+fe,N[J+re]=se+ye,F[J+re+K]=ie-fe,N[J+re+K]=se-ye,re!==G&&(ge=V*X-W*ee,ee=V*ee+W*X,X=ge)}},u.prototype.guessLen13b=function(z,H){var F=1|Math.max(H,z),N=1&F,B=0;for(F=F/2|0;F;F>>>=1)B++;return 1<<B+1+N},u.prototype.conjugate=function(z,H,F){if(!(F<=1))for(var N=0;N<F/2;N++){var B=z[N];z[N]=z[F-N-1],z[F-N-1]=B,B=H[N],H[N]=-H[F-N-1],H[F-N-1]=-B}},u.prototype.normalize13b=function(z,H){for(var F=0,N=0;N<H/2;N++){var B=8192*Math.round(z[2*N+1]/H)+Math.round(z[2*N]/H)+F;z[N]=67108863&B,F=B<67108864?0:B/67108864|0}return z},u.prototype.convert13b=function(z,H,F,N){for(var B=0,j=0;j<H;j++)B+=0|z[j],F[2*j]=8191&B,B>>>=13,F[2*j+1]=8191&B,B>>>=13;for(j=2*H;j<N;++j)F[j]=0;n(B===0),n((-8192&B)==0)},u.prototype.stub=function(z){for(var H=new Array(z),F=0;F<z;F++)H[F]=0;return H},u.prototype.mulp=function(z,H,F){var N=2*this.guessLen13b(z.length,H.length),B=this.makeRBT(N),j=this.stub(N),K=new Array(N),G=new Array(N),V=new Array(N),W=new Array(N),J=new Array(N),X=new Array(N),ee=F.words;ee.length=N,this.convert13b(z.words,z.length,K,N),this.convert13b(H.words,H.length,W,N),this.transform(K,j,G,V,N,B),this.transform(W,j,J,X,N,B);for(var re=0;re<N;re++){var ie=G[re]*J[re]-V[re]*X[re];V[re]=G[re]*X[re]+V[re]*J[re],G[re]=ie}return this.conjugate(G,V,N),this.transform(G,V,ee,j,N,B),this.conjugate(ee,j,N),this.normalize13b(ee,N),F.negative=z.negative^H.negative,F.length=z.length+H.length,F.strip()},i.prototype.mul=function(z){var H=new i(null);return H.words=new Array(this.length+z.length),this.mulTo(z,H)},i.prototype.mulf=function(z){var H=new i(null);return H.words=new Array(this.length+z.length),w(this,z,H)},i.prototype.imul=function(z){return this.clone().mulTo(z,this)},i.prototype.imuln=function(z){n(typeof z=="number"),n(z<67108864);for(var H=0,F=0;F<this.length;F++){var N=(0|this.words[F])*z,B=(67108863&N)+(67108863&H);H>>=26,H+=N/67108864|0,H+=B>>>26,this.words[F]=67108863&B}return H!==0&&(this.words[F]=H,this.length++),this},i.prototype.muln=function(z){return this.clone().imuln(z)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(z){var H=function(j){for(var K=new Array(j.bitLength()),G=0;G<K.length;G++){var V=G/26|0,W=G%26;K[G]=(j.words[V]&1<<W)>>>W}return K}(z);if(H.length===0)return new i(1);for(var F=this,N=0;N<H.length&&H[N]===0;N++,F=F.sqr());if(++N<H.length)for(var B=F.sqr();N<H.length;N++,B=B.sqr())H[N]!==0&&(F=F.mul(B));return F},i.prototype.iushln=function(z){n(typeof z=="number"&&z>=0);var H,F=z%26,N=(z-F)/26,B=67108863>>>26-F<<26-F;if(F!==0){var j=0;for(H=0;H<this.length;H++){var K=this.words[H]&B,G=(0|this.words[H])-K<<F;this.words[H]=G|j,j=K>>>26-F}j&&(this.words[H]=j,this.length++)}if(N!==0){for(H=this.length-1;H>=0;H--)this.words[H+N]=this.words[H];for(H=0;H<N;H++)this.words[H]=0;this.length+=N}return this.strip()},i.prototype.ishln=function(z){return n(this.negative===0),this.iushln(z)},i.prototype.iushrn=function(z,H,F){var N;n(typeof z=="number"&&z>=0),N=H?(H-H%26)/26:0;var B=z%26,j=Math.min((z-B)/26,this.length),K=67108863^67108863>>>B<<B,G=F;if(N-=j,N=Math.max(0,N),G){for(var V=0;V<j;V++)G.words[V]=this.words[V];G.length=j}if(j!==0)if(this.length>j)for(this.length-=j,V=0;V<this.length;V++)this.words[V]=this.words[V+j];else this.words[0]=0,this.length=1;var W=0;for(V=this.length-1;V>=0&&(W!==0||V>=N);V--){var J=0|this.words[V];this.words[V]=W<<26-B|J>>>B,W=J&K}return G&&W!==0&&(G.words[G.length++]=W),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(z,H,F){return n(this.negative===0),this.iushrn(z,H,F)},i.prototype.shln=function(z){return this.clone().ishln(z)},i.prototype.ushln=function(z){return this.clone().iushln(z)},i.prototype.shrn=function(z){return this.clone().ishrn(z)},i.prototype.ushrn=function(z){return this.clone().iushrn(z)},i.prototype.testn=function(z){n(typeof z=="number"&&z>=0);var H=z%26,F=(z-H)/26,N=1<<H;return!(this.length<=F||!(this.words[F]&N))},i.prototype.imaskn=function(z){n(typeof z=="number"&&z>=0);var H=z%26,F=(z-H)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=F)return this;if(H!==0&&F++,this.length=Math.min(F,this.length),H!==0){var N=67108863^67108863>>>H<<H;this.words[this.length-1]&=N}return this.strip()},i.prototype.maskn=function(z){return this.clone().imaskn(z)},i.prototype.iaddn=function(z){return n(typeof z=="number"),n(z<67108864),z<0?this.isubn(-z):this.negative!==0?this.length===1&&(0|this.words[0])<z?(this.words[0]=z-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(z),this.negative=1,this):this._iaddn(z)},i.prototype._iaddn=function(z){this.words[0]+=z;for(var H=0;H<this.length&&this.words[H]>=67108864;H++)this.words[H]-=67108864,H===this.length-1?this.words[H+1]=1:this.words[H+1]++;return this.length=Math.max(this.length,H+1),this},i.prototype.isubn=function(z){if(n(typeof z=="number"),n(z<67108864),z<0)return this.iaddn(-z);if(this.negative!==0)return this.negative=0,this.iaddn(z),this.negative=1,this;if(this.words[0]-=z,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var H=0;H<this.length&&this.words[H]<0;H++)this.words[H]+=67108864,this.words[H+1]-=1;return this.strip()},i.prototype.addn=function(z){return this.clone().iaddn(z)},i.prototype.subn=function(z){return this.clone().isubn(z)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(z,H,F){var N,B,j=z.length+F;this._expand(j);var K=0;for(N=0;N<z.length;N++){B=(0|this.words[N+F])+K;var G=(0|z.words[N])*H;K=((B-=67108863&G)>>26)-(G/67108864|0),this.words[N+F]=67108863&B}for(;N<this.length-F;N++)K=(B=(0|this.words[N+F])+K)>>26,this.words[N+F]=67108863&B;if(K===0)return this.strip();for(n(K===-1),K=0,N=0;N<this.length;N++)K=(B=-(0|this.words[N])+K)>>26,this.words[N]=67108863&B;return this.negative=1,this.strip()},i.prototype._wordDiv=function(z,H){var F=(this.length,z.length),N=this.clone(),B=z,j=0|B.words[B.length-1];(F=26-this._countBits(j))!=0&&(B=B.ushln(F),N.iushln(F),j=0|B.words[B.length-1]);var K,G=N.length-B.length;if(H!=="mod"){(K=new i(null)).length=G+1,K.words=new Array(K.length);for(var V=0;V<K.length;V++)K.words[V]=0}var W=N.clone()._ishlnsubmul(B,1,G);W.negative===0&&(N=W,K&&(K.words[G]=1));for(var J=G-1;J>=0;J--){var X=67108864*(0|N.words[B.length+J])+(0|N.words[B.length+J-1]);for(X=Math.min(X/j|0,67108863),N._ishlnsubmul(B,X,J);N.negative!==0;)X--,N.negative=0,N._ishlnsubmul(B,1,J),N.isZero()||(N.negative^=1);K&&(K.words[J]=X)}return K&&K.strip(),N.strip(),H!=="div"&&F!==0&&N.iushrn(F),{div:K||null,mod:N}},i.prototype.divmod=function(z,H,F){return n(!z.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:this.negative!==0&&z.negative===0?(j=this.neg().divmod(z,H),H!=="mod"&&(N=j.div.neg()),H!=="div"&&(B=j.mod.neg(),F&&B.negative!==0&&B.iadd(z)),{div:N,mod:B}):this.negative===0&&z.negative!==0?(j=this.divmod(z.neg(),H),H!=="mod"&&(N=j.div.neg()),{div:N,mod:j.mod}):this.negative&z.negative?(j=this.neg().divmod(z.neg(),H),H!=="div"&&(B=j.mod.neg(),F&&B.negative!==0&&B.isub(z)),{div:j.div,mod:B}):z.length>this.length||this.cmp(z)<0?{div:new i(0),mod:this}:z.length===1?H==="div"?{div:this.divn(z.words[0]),mod:null}:H==="mod"?{div:null,mod:new i(this.modn(z.words[0]))}:{div:this.divn(z.words[0]),mod:new i(this.modn(z.words[0]))}:this._wordDiv(z,H);var N,B,j},i.prototype.div=function(z){return this.divmod(z,"div",!1).div},i.prototype.mod=function(z){return this.divmod(z,"mod",!1).mod},i.prototype.umod=function(z){return this.divmod(z,"mod",!0).mod},i.prototype.divRound=function(z){var H=this.divmod(z);if(H.mod.isZero())return H.div;var F=H.div.negative!==0?H.mod.isub(z):H.mod,N=z.ushrn(1),B=z.andln(1),j=F.cmp(N);return j<0||B===1&&j===0?H.div:H.div.negative!==0?H.div.isubn(1):H.div.iaddn(1)},i.prototype.modn=function(z){n(z<=67108863);for(var H=67108864%z,F=0,N=this.length-1;N>=0;N--)F=(H*F+(0|this.words[N]))%z;return F},i.prototype.idivn=function(z){n(z<=67108863);for(var H=0,F=this.length-1;F>=0;F--){var N=(0|this.words[F])+67108864*H;this.words[F]=N/z|0,H=N%z}return this.strip()},i.prototype.divn=function(z){return this.clone().idivn(z)},i.prototype.egcd=function(z){n(z.negative===0),n(!z.isZero());var H=this,F=z.clone();H=H.negative!==0?H.umod(z):H.clone();for(var N=new i(1),B=new i(0),j=new i(0),K=new i(1),G=0;H.isEven()&&F.isEven();)H.iushrn(1),F.iushrn(1),++G;for(var V=F.clone(),W=H.clone();!H.isZero();){for(var J=0,X=1;!(H.words[0]&X)&&J<26;++J,X<<=1);if(J>0)for(H.iushrn(J);J-- >0;)(N.isOdd()||B.isOdd())&&(N.iadd(V),B.isub(W)),N.iushrn(1),B.iushrn(1);for(var ee=0,re=1;!(F.words[0]&re)&&ee<26;++ee,re<<=1);if(ee>0)for(F.iushrn(ee);ee-- >0;)(j.isOdd()||K.isOdd())&&(j.iadd(V),K.isub(W)),j.iushrn(1),K.iushrn(1);H.cmp(F)>=0?(H.isub(F),N.isub(j),B.isub(K)):(F.isub(H),j.isub(N),K.isub(B))}return{a:j,b:K,gcd:F.iushln(G)}},i.prototype._invmp=function(z){n(z.negative===0),n(!z.isZero());var H=this,F=z.clone();H=H.negative!==0?H.umod(z):H.clone();for(var N,B=new i(1),j=new i(0),K=F.clone();H.cmpn(1)>0&&F.cmpn(1)>0;){for(var G=0,V=1;!(H.words[0]&V)&&G<26;++G,V<<=1);if(G>0)for(H.iushrn(G);G-- >0;)B.isOdd()&&B.iadd(K),B.iushrn(1);for(var W=0,J=1;!(F.words[0]&J)&&W<26;++W,J<<=1);if(W>0)for(F.iushrn(W);W-- >0;)j.isOdd()&&j.iadd(K),j.iushrn(1);H.cmp(F)>=0?(H.isub(F),B.isub(j)):(F.isub(H),j.isub(B))}return(N=H.cmpn(1)===0?B:j).cmpn(0)<0&&N.iadd(z),N},i.prototype.gcd=function(z){if(this.isZero())return z.abs();if(z.isZero())return this.abs();var H=this.clone(),F=z.clone();H.negative=0,F.negative=0;for(var N=0;H.isEven()&&F.isEven();N++)H.iushrn(1),F.iushrn(1);for(;;){for(;H.isEven();)H.iushrn(1);for(;F.isEven();)F.iushrn(1);var B=H.cmp(F);if(B<0){var j=H;H=F,F=j}else if(B===0||F.cmpn(1)===0)break;H.isub(F)}return F.iushln(N)},i.prototype.invm=function(z){return this.egcd(z).a.umod(z)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(z){return this.words[0]&z},i.prototype.bincn=function(z){n(typeof z=="number");var H=z%26,F=(z-H)/26,N=1<<H;if(this.length<=F)return this._expand(F+1),this.words[F]|=N,this;for(var B=N,j=F;B!==0&&j<this.length;j++){var K=0|this.words[j];B=(K+=B)>>>26,K&=67108863,this.words[j]=K}return B!==0&&(this.words[j]=B,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(z){var H,F=z<0;if(this.negative!==0&&!F)return-1;if(this.negative===0&&F)return 1;if(this.strip(),this.length>1)H=1;else{F&&(z=-z),n(z<=67108863,"Number is too big");var N=0|this.words[0];H=N===z?0:N<z?-1:1}return this.negative!==0?0|-H:H},i.prototype.cmp=function(z){if(this.negative!==0&&z.negative===0)return-1;if(this.negative===0&&z.negative!==0)return 1;var H=this.ucmp(z);return this.negative!==0?0|-H:H},i.prototype.ucmp=function(z){if(this.length>z.length)return 1;if(this.length<z.length)return-1;for(var H=0,F=this.length-1;F>=0;F--){var N=0|this.words[F],B=0|z.words[F];if(N!==B){N<B?H=-1:N>B&&(H=1);break}}return H},i.prototype.gtn=function(z){return this.cmpn(z)===1},i.prototype.gt=function(z){return this.cmp(z)===1},i.prototype.gten=function(z){return this.cmpn(z)>=0},i.prototype.gte=function(z){return this.cmp(z)>=0},i.prototype.ltn=function(z){return this.cmpn(z)===-1},i.prototype.lt=function(z){return this.cmp(z)===-1},i.prototype.lten=function(z){return this.cmpn(z)<=0},i.prototype.lte=function(z){return this.cmp(z)<=0},i.prototype.eqn=function(z){return this.cmpn(z)===0},i.prototype.eq=function(z){return this.cmp(z)===0},i.red=function(z){return new I(z)},i.prototype.toRed=function(z){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),z.convertTo(this)._forceRed(z)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(z){return this.red=z,this},i.prototype.forceRed=function(z){return n(!this.red,"Already a number in reduction context"),this._forceRed(z)},i.prototype.redAdd=function(z){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,z)},i.prototype.redIAdd=function(z){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,z)},i.prototype.redSub=function(z){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,z)},i.prototype.redISub=function(z){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,z)},i.prototype.redShl=function(z){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,z)},i.prototype.redMul=function(z){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.mul(this,z)},i.prototype.redIMul=function(z){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.imul(this,z)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(z){return n(this.red&&!z.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,z)};var S={k256:null,p224:null,p192:null,p25519:null};function _(z,H){this.name=z,this.p=new i(H,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function L(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(z){if(typeof z=="string"){var H=i._prime(z);this.m=H.p,this.prime=H}else n(z.gtn(1),"modulus must be greater than 1"),this.m=z,this.prime=null}function U(z){I.call(this,z),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var z=new i(null);return z.words=new Array(Math.ceil(this.n/13)),z},_.prototype.ireduce=function(z){var H,F=z;do this.split(F,this.tmp),H=(F=(F=this.imulK(F)).iadd(this.tmp)).bitLength();while(H>this.n);var N=H<this.n?-1:F.ucmp(this.p);return N===0?(F.words[0]=0,F.length=1):N>0?F.isub(this.p):F.strip!==void 0?F.strip():F._strip(),F},_.prototype.split=function(z,H){z.iushrn(this.n,0,H)},_.prototype.imulK=function(z){return z.imul(this.k)},a(E,_),E.prototype.split=function(z,H){for(var F=4194303,N=Math.min(z.length,9),B=0;B<N;B++)H.words[B]=z.words[B];if(H.length=N,z.length<=9)return z.words[0]=0,void(z.length=1);var j=z.words[9];for(H.words[H.length++]=j&F,B=10;B<z.length;B++){var K=0|z.words[B];z.words[B-10]=(K&F)<<4|j>>>22,j=K}j>>>=22,z.words[B-10]=j,j===0&&z.length>10?z.length-=10:z.length-=9},E.prototype.imulK=function(z){z.words[z.length]=0,z.words[z.length+1]=0,z.length+=2;for(var H=0,F=0;F<z.length;F++){var N=0|z.words[F];H+=977*N,z.words[F]=67108863&H,H=64*N+(H/67108864|0)}return z.words[z.length-1]===0&&(z.length--,z.words[z.length-1]===0&&z.length--),z},a(L,_),a(C,_),a(P,_),P.prototype.imulK=function(z){for(var H=0,F=0;F<z.length;F++){var N=19*(0|z.words[F])+H,B=67108863&N;N>>>=26,z.words[F]=B,H=N}return H!==0&&(z.words[z.length++]=H),z},i._prime=function(z){if(S[z])return S[z];var H;if(z==="k256")H=new E;else if(z==="p224")H=new L;else if(z==="p192")H=new C;else{if(z!=="p25519")throw new Error("Unknown prime "+z);H=new P}return S[z]=H,H},I.prototype._verify1=function(z){n(z.negative===0,"red works only with positives"),n(z.red,"red works only with red numbers")},I.prototype._verify2=function(z,H){n((z.negative|H.negative)==0,"red works only with positives"),n(z.red&&z.red===H.red,"red works only with red numbers")},I.prototype.imod=function(z){return this.prime?this.prime.ireduce(z)._forceRed(this):z.umod(this.m)._forceRed(this)},I.prototype.neg=function(z){return z.isZero()?z.clone():this.m.sub(z)._forceRed(this)},I.prototype.add=function(z,H){this._verify2(z,H);var F=z.add(H);return F.cmp(this.m)>=0&&F.isub(this.m),F._forceRed(this)},I.prototype.iadd=function(z,H){this._verify2(z,H);var F=z.iadd(H);return F.cmp(this.m)>=0&&F.isub(this.m),F},I.prototype.sub=function(z,H){this._verify2(z,H);var F=z.sub(H);return F.cmpn(0)<0&&F.iadd(this.m),F._forceRed(this)},I.prototype.isub=function(z,H){this._verify2(z,H);var F=z.isub(H);return F.cmpn(0)<0&&F.iadd(this.m),F},I.prototype.shl=function(z,H){return this._verify1(z),this.imod(z.ushln(H))},I.prototype.imul=function(z,H){return this._verify2(z,H),this.imod(z.imul(H))},I.prototype.mul=function(z,H){return this._verify2(z,H),this.imod(z.mul(H))},I.prototype.isqr=function(z){return this.imul(z,z.clone())},I.prototype.sqr=function(z){return this.mul(z,z)},I.prototype.sqrt=function(z){if(z.isZero())return z.clone();var H=this.m.andln(3);if(n(H%2==1),H===3){var F=this.m.add(new i(1)).iushrn(2);return this.pow(z,F)}for(var N=this.m.subn(1),B=0;!N.isZero()&&N.andln(1)===0;)B++,N.iushrn(1);n(!N.isZero());var j=new i(1).toRed(this),K=j.redNeg(),G=this.m.subn(1).iushrn(1),V=this.m.bitLength();for(V=new i(2*V*V).toRed(this);this.pow(V,G).cmp(K)!==0;)V.redIAdd(K);for(var W=this.pow(V,N),J=this.pow(z,N.addn(1).iushrn(1)),X=this.pow(z,N),ee=B;X.cmp(j)!==0;){for(var re=X,ie=0;re.cmp(j)!==0;ie++)re=re.redSqr();n(ie<ee);var se=this.pow(W,new i(1).iushln(ee-ie-1));J=J.redMul(se),W=se.redSqr(),X=X.redMul(W),ee=ie}return J},I.prototype.invm=function(z){var H=z._invmp(this.m);return H.negative!==0?(H.negative=0,this.imod(H).redNeg()):this.imod(H)},I.prototype.pow=function(z,H){if(H.isZero())return new i(1).toRed(this);if(H.cmpn(1)===0)return z.clone();var F=new Array(16);F[0]=new i(1).toRed(this),F[1]=z;for(var N=2;N<F.length;N++)F[N]=this.mul(F[N-1],z);var B=F[0],j=0,K=0,G=H.bitLength()%26;for(G===0&&(G=26),N=H.length-1;N>=0;N--){for(var V=H.words[N],W=G-1;W>=0;W--){var J=V>>W&1;B!==F[0]&&(B=this.sqr(B)),J!==0||j!==0?(j<<=1,j|=J,(++K==4||N===0&&W===0)&&(B=this.mul(B,F[j]),K=0,j=0)):K=0}G=26}return B},I.prototype.convertTo=function(z){var H=z.umod(this.m);return H===z?H.clone():H},I.prototype.convertFrom=function(z){var H=z.clone();return H.red=null,H},i.mont=function(z){return new U(z)},a(U,I),U.prototype.convertTo=function(z){return this.imod(z.ushln(this.shift))},U.prototype.convertFrom=function(z){var H=this.imod(z.mul(this.rinv));return H.red=null,H},U.prototype.imul=function(z,H){if(z.isZero()||H.isZero())return z.words[0]=0,z.length=1,z;var F=z.imul(H),N=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=F.isub(N).iushrn(this.shift),j=B;return B.cmp(this.m)>=0?j=B.isub(this.m):B.cmpn(0)<0&&(j=B.iadd(this.m)),j._forceRed(this)},U.prototype.mul=function(z,H){if(z.isZero()||H.isZero())return new i(0)._forceRed(this);var F=z.mul(H),N=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=F.isub(N).iushrn(this.shift),j=B;return B.cmp(this.m)>=0?j=B.isub(this.m):B.cmpn(0)<0&&(j=B.iadd(this.m)),j._forceRed(this)},U.prototype.invm=function(z){return this.imod(z._invmp(this.m).mul(this.r2))._forceRed(this)}})(d=t.nmd(d),this)},2692:function(d){d.exports=function(s){var t,o,r,n=s.length,a=0;for(t=0;t<n;++t)a+=s[t].length;var i=new Array(a),c=0;for(t=0;t<n;++t){var h=s[t],f=h.length;for(o=0;o<f;++o){var b=i[c++]=new Array(f-1),v=0;for(r=0;r<f;++r)r!==o&&(b[v++]=h[r]);if(1&o){var g=b[1];b[1]=b[0],b[0]=g}}}return i}},2569:function(d,s,t){d.exports=function(g,y,p){switch(arguments.length){case 1:return b(g);case 2:return typeof y=="function"?h(g,g,y,!0):v(g,y);case 3:return h(g,y,p,!1);default:throw new Error("box-intersect: Invalid arguments")}};var o,r=t(5306),n=t(1390),a=t(2337);function i(g,y){for(var p=0;p<g;++p)if(!(y[p]<=y[p+g]))return!0;return!1}function c(g,y,p,m){for(var w=0,u=0,S=0,_=g.length;S<_;++S){var E=g[S];if(!i(y,E)){for(var L=0;L<2*y;++L)p[w++]=E[L];m[u++]=S}}return u}function h(g,y,p,m){var w=g.length,u=y.length;if(!(w<=0||u<=0)){var S=g[0].length>>>1;if(!(S<=0)){var _,E=r.mallocDouble(2*S*w),L=r.mallocInt32(w);if((w=c(g,S,E,L))>0){if(S===1&&m)n.init(w),_=n.sweepComplete(S,p,0,w,E,L,0,w,E,L);else{var C=r.mallocDouble(2*S*u),P=r.mallocInt32(u);(u=c(y,S,C,P))>0&&(n.init(w+u),_=S===1?n.sweepBipartite(S,p,0,w,E,L,0,u,C,P):a(S,p,m,w,E,L,u,C,P),r.free(C),r.free(P))}r.free(E),r.free(L)}return _}}}function f(g,y){o.push([g,y])}function b(g){return o=[],h(g,g,f,!0),o}function v(g,y){return o=[],h(g,y,f,!1),o}},7333:function(d,s){function t(o){return o?function(r,n,a,i,c,h,f,b,v,g,y){return c-i>v-b?function(p,m,w,u,S,_,E,L,C,P,I){for(var U=2*p,z=u,H=U*u;z<S;++z,H+=U){var F=_[m+H],N=_[m+H+p],B=E[z];e:for(var j=L,K=U*L;j<C;++j,K+=U){var G=P[m+K],V=P[m+K+p],W=I[j];if(!(V<F||N<G)){for(var J=m+1;J<p;++J){var X=_[J+H],ee=_[J+p+H],re=P[J+K],ie=P[J+p+K];if(ee<re||ie<X)continue e}var se=w(B,W);if(se!==void 0)return se}}}}(r,n,a,i,c,h,f,b,v,g,y):function(p,m,w,u,S,_,E,L,C,P,I){for(var U=2*p,z=L,H=U*L;z<C;++z,H+=U){var F=P[m+H],N=P[m+H+p],B=I[z];e:for(var j=u,K=U*u;j<S;++j,K+=U){var G=_[m+K],V=_[m+K+p],W=E[j];if(!(N<G||V<F)){for(var J=m+1;J<p;++J){var X=_[J+K],ee=_[J+p+K],re=P[J+H],ie=P[J+p+H];if(ee<re||ie<X)continue e}var se=w(W,B);if(se!==void 0)return se}}}}(r,n,a,i,c,h,f,b,v,g,y)}:function(r,n,a,i,c,h,f,b,v,g,y,p){return h-c>g-v?i?function(m,w,u,S,_,E,L,C,P,I,U){for(var z=2*m,H=S,F=z*S;H<_;++H,F+=z){var N=E[w+F],B=E[w+F+m],j=L[H];e:for(var K=C,G=z*C;K<P;++K,G+=z){var V=I[w+G],W=U[K];if(!(V<=N||B<V)){for(var J=w+1;J<m;++J){var X=E[J+F],ee=E[J+m+F],re=I[J+G],ie=I[J+m+G];if(ee<re||ie<X)continue e}var se=u(W,j);if(se!==void 0)return se}}}}(r,n,a,c,h,f,b,v,g,y,p):function(m,w,u,S,_,E,L,C,P,I,U){for(var z=2*m,H=S,F=z*S;H<_;++H,F+=z){var N=E[w+F],B=E[w+F+m],j=L[H];e:for(var K=C,G=z*C;K<P;++K,G+=z){var V=I[w+G],W=U[K];if(!(V<N||B<V)){for(var J=w+1;J<m;++J){var X=E[J+F],ee=E[J+m+F],re=I[J+G],ie=I[J+m+G];if(ee<re||ie<X)continue e}var se=u(j,W);if(se!==void 0)return se}}}}(r,n,a,c,h,f,b,v,g,y,p):i?function(m,w,u,S,_,E,L,C,P,I,U){for(var z=2*m,H=C,F=z*C;H<P;++H,F+=z){var N=I[w+F],B=U[H];e:for(var j=S,K=z*S;j<_;++j,K+=z){var G=E[w+K],V=E[w+K+m],W=L[j];if(!(N<=G||V<N)){for(var J=w+1;J<m;++J){var X=E[J+K],ee=E[J+m+K],re=I[J+F],ie=I[J+m+F];if(ee<re||ie<X)continue e}var se=u(B,W);if(se!==void 0)return se}}}}(r,n,a,c,h,f,b,v,g,y,p):function(m,w,u,S,_,E,L,C,P,I,U){for(var z=2*m,H=C,F=z*C;H<P;++H,F+=z){var N=I[w+F],B=U[H];e:for(var j=S,K=z*S;j<_;++j,K+=z){var G=E[w+K],V=E[w+K+m],W=L[j];if(!(N<G||V<N)){for(var J=w+1;J<m;++J){var X=E[J+K],ee=E[J+m+K],re=I[J+F],ie=I[J+m+F];if(ee<re||ie<X)continue e}var se=u(W,B);if(se!==void 0)return se}}}}(r,n,a,c,h,f,b,v,g,y,p)}}s.partial=t(!1),s.full=t(!0)},2337:function(d,s,t){d.exports=function(L,C,P,I,U,z,H,F,N){(function(Re,Ce){var ze=8*r.log2(Ce+1)*(Re+1)|0,le=r.nextPow2(6*ze);w.length<le&&(o.free(w),w=o.mallocInt32(le));var de=r.nextPow2(2*ze);u.length<de&&(o.free(u),u=o.mallocDouble(de))})(L,I+H);var B,j=0,K=2*L;for(S(j++,0,0,I,0,H,P?16:0,-1/0,1/0),P||S(j++,0,0,H,0,I,1,-1/0,1/0);j>0;){var G=6*(j-=1),V=w[G],W=w[G+1],J=w[G+2],X=w[G+3],ee=w[G+4],re=w[G+5],ie=2*j,se=u[ie],fe=u[ie+1],ye=1&re,ge=!!(16&re),he=U,ve=z,Ie=F,xe=N;if(ye&&(he=F,ve=N,Ie=U,xe=z),!(2&re&&(J=g(L,V,W,J,he,ve,fe),W>=J)||4&re&&(W=y(L,V,W,J,he,ve,se))>=J)){var Ae=J-W,Se=ee-X;if(ge){if(L*Ae*(Ae+Se)<4194304){if((B=c.scanComplete(L,V,C,W,J,he,ve,X,ee,Ie,xe))!==void 0)return B;continue}}else{if(L*Math.min(Ae,Se)<128){if((B=a(L,V,C,ye,W,J,he,ve,X,ee,Ie,xe))!==void 0)return B;continue}if(L*Ae*Se<4194304){if((B=c.scanBipartite(L,V,C,ye,W,J,he,ve,X,ee,Ie,xe))!==void 0)return B;continue}}var Te=b(L,V,W,J,he,ve,se,fe);if(W<Te)if(L*(Te-W)<128){if((B=i(L,V+1,C,W,Te,he,ve,X,ee,Ie,xe))!==void 0)return B}else if(V===L-2){if((B=ye?c.sweepBipartite(L,C,X,ee,Ie,xe,W,Te,he,ve):c.sweepBipartite(L,C,W,Te,he,ve,X,ee,Ie,xe))!==void 0)return B}else S(j++,V+1,W,Te,X,ee,ye,-1/0,1/0),S(j++,V+1,X,ee,W,Te,1^ye,-1/0,1/0);if(Te<J){var Q=h(L,V,X,ee,Ie,xe),oe=Ie[K*Q+V],ce=v(L,V,Q,ee,Ie,xe,oe);if(ce<ee&&S(j++,V,Te,J,ce,ee,(4|ye)+(ge?16:0),oe,fe),X<Q&&S(j++,V,Te,J,X,Q,(2|ye)+(ge?16:0),se,oe),Q+1===ce){if((B=ge?E(L,V,C,Te,J,he,ve,Q,Ie,xe[Q]):_(L,V,C,ye,Te,J,he,ve,Q,Ie,xe[Q]))!==void 0)return B}else if(Q<ce){var me;if(ge){if(Te<(me=p(L,V,Te,J,he,ve,oe))){var Me=v(L,V,Te,me,he,ve,oe);if(V===L-2){if(Te<Me&&(B=c.sweepComplete(L,C,Te,Me,he,ve,Q,ce,Ie,xe))!==void 0||Me<me&&(B=c.sweepBipartite(L,C,Me,me,he,ve,Q,ce,Ie,xe))!==void 0)return B}else Te<Me&&S(j++,V+1,Te,Me,Q,ce,16,-1/0,1/0),Me<me&&(S(j++,V+1,Me,me,Q,ce,0,-1/0,1/0),S(j++,V+1,Q,ce,Me,me,1,-1/0,1/0))}}else Te<(me=ye?m(L,V,Te,J,he,ve,oe):p(L,V,Te,J,he,ve,oe))&&(V===L-2?B=ye?c.sweepBipartite(L,C,Q,ce,Ie,xe,Te,me,he,ve):c.sweepBipartite(L,C,Te,me,he,ve,Q,ce,Ie,xe):(S(j++,V+1,Te,me,Q,ce,ye,-1/0,1/0),S(j++,V+1,Q,ce,Te,me,1^ye,-1/0,1/0)))}}}}};var o=t(5306),r=t(2288),n=t(7333),a=n.partial,i=n.full,c=t(1390),h=t(2464),f=t(122),b=f("!(lo>=p0)&&!(p1>=hi)"),v=f("lo===p0"),g=f("lo<p0"),y=f("hi<=p0"),p=f("lo<=p0&&p0<=hi"),m=f("lo<p0&&p0<=hi"),w=o.mallocInt32(1024),u=o.mallocDouble(1024);function S(L,C,P,I,U,z,H,F,N){var B=6*L;w[B]=C,w[B+1]=P,w[B+2]=I,w[B+3]=U,w[B+4]=z,w[B+5]=H;var j=2*L;u[j]=F,u[j+1]=N}function _(L,C,P,I,U,z,H,F,N,B,j){var K=2*L,G=N*K,V=B[G+C];e:for(var W=U,J=U*K;W<z;++W,J+=K){var X=H[J+C],ee=H[J+C+L];if(!(V<X||ee<V||I&&V===X)){for(var re,ie=F[W],se=C+1;se<L;++se){X=H[J+se],ee=H[J+se+L];var fe=B[G+se],ye=B[G+se+L];if(ee<fe||ye<X)continue e}if((re=I?P(j,ie):P(ie,j))!==void 0)return re}}}function E(L,C,P,I,U,z,H,F,N,B){var j=2*L,K=F*j,G=N[K+C];e:for(var V=I,W=I*j;V<U;++V,W+=j){var J=H[V];if(J!==B){var X=z[W+C],ee=z[W+C+L];if(!(G<X||ee<G)){for(var re=C+1;re<L;++re){X=z[W+re],ee=z[W+re+L];var ie=N[K+re],se=N[K+re+L];if(ee<ie||se<X)continue e}var fe=P(J,B);if(fe!==void 0)return fe}}}}},2464:function(d,s,t){d.exports=function(n,a,i,c,h,f){if(c<=i+1)return i;for(var b=i,v=c,g=c+i>>>1,y=2*n,p=g,m=h[y*g+a];b<v;){if(v-b<8){r(n,a,b,v,h,f),m=h[y*g+a];break}var w=v-b,u=Math.random()*w+b|0,S=h[y*u+a],_=Math.random()*w+b|0,E=h[y*_+a],L=Math.random()*w+b|0,C=h[y*L+a];S<=E?C>=E?(p=_,m=E):S>=C?(p=u,m=S):(p=L,m=C):E>=C?(p=_,m=E):C>=S?(p=u,m=S):(p=L,m=C);for(var P=y*(v-1),I=y*p,U=0;U<y;++U,++P,++I){var z=h[P];h[P]=h[I],h[I]=z}var H=f[v-1];for(f[v-1]=f[p],f[p]=H,P=y*(v-1),I=y*(p=o(n,a,b,v-1,h,f,m)),U=0;U<y;++U,++P,++I)z=h[P],h[P]=h[I],h[I]=z;if(H=f[v-1],f[v-1]=f[p],f[p]=H,g<p){for(v=p-1;b<v&&h[y*(v-1)+a]===m;)v-=1;v+=1}else{if(!(p<g))break;for(b=p+1;b<v&&h[y*b+a]===m;)b+=1}}return o(n,a,i,g,h,f,h[y*g+a])};var o=t(122)("lo<p0");function r(n,a,i,c,h,f){for(var b=2*n,v=b*(i+1)+a,g=i+1;g<c;++g,v+=b)for(var y=h[v],p=g,m=b*(g-1);p>i&&h[m+a]>y;--p,m-=b){for(var w=m,u=m+b,S=0;S<b;++S,++w,++u){var _=h[w];h[w]=h[u],h[u]=_}var E=f[p];f[p]=f[p-1],f[p-1]=E}}},122:function(d){d.exports=function(t){return s[t]};var s={"lo===p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=o,y=r;n>y;++y,f+=h)if(a[f+g]===c)if(v===y)v+=1,b+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=o,y=r;n>y;++y,f+=h)if(a[f+g]<c)if(v===y)v+=1,b+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<=p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=t+o,y=r;n>y;++y,f+=h)if(a[f+g]<=c)if(v===y)v+=1,b+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"hi<=p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=t+o,y=r;n>y;++y,f+=h)if(a[f+g]<=c)if(v===y)v+=1,b+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<p0&&p0<=hi":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=o,y=t+o,p=r;n>p;++p,f+=h){var m=a[f+g],w=a[f+y];if(m<c&&c<=w)if(v===p)v+=1,b+=h;else{for(var u=0;h>u;++u){var S=a[f+u];a[f+u]=a[b],a[b++]=S}var _=i[p];i[p]=i[v],i[v++]=_}}return v},"lo<=p0&&p0<=hi":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=o,y=t+o,p=r;n>p;++p,f+=h){var m=a[f+g],w=a[f+y];if(m<=c&&c<=w)if(v===p)v+=1,b+=h;else{for(var u=0;h>u;++u){var S=a[f+u];a[f+u]=a[b],a[b++]=S}var _=i[p];i[p]=i[v],i[v++]=_}}return v},"!(lo>=p0)&&!(p1>=hi)":function(t,o,r,n,a,i,c,h){for(var f=2*t,b=f*r,v=b,g=r,y=o,p=t+o,m=r;n>m;++m,b+=f){var w=a[b+y],u=a[b+p];if(!(w>=c||h>=u))if(g===m)g+=1,v+=f;else{for(var S=0;f>S;++S){var _=a[b+S];a[b+S]=a[v],a[v++]=_}var E=i[m];i[m]=i[g],i[g++]=E}}return g}}},309:function(d){function s(h,f,b){for(var v=2*(h+1),g=h+1;g<=f;++g){for(var y=b[v++],p=b[v++],m=g,w=v-2;m-- >h;){var u=b[w-2],S=b[w-1];if(u<y||u===y&&S<p)break;b[w]=u,b[w+1]=S,w-=2}b[w]=y,b[w+1]=p}}function t(h,f,b){f*=2;var v=b[h*=2],g=b[h+1];b[h]=b[f],b[h+1]=b[f+1],b[f]=v,b[f+1]=g}function o(h,f,b){f*=2,b[h*=2]=b[f],b[h+1]=b[f+1]}function r(h,f,b,v){f*=2,b*=2;var g=v[h*=2],y=v[h+1];v[h]=v[f],v[h+1]=v[f+1],v[f]=v[b],v[f+1]=v[b+1],v[b]=g,v[b+1]=y}function n(h,f,b,v,g){f*=2,g[h*=2]=g[f],g[f]=b,g[h+1]=g[f+1],g[f+1]=v}function a(h,f,b){f*=2;var v=b[h*=2],g=b[f];return!(v<g)&&(v!==g||b[h+1]>b[f+1])}function i(h,f,b,v){var g=v[h*=2];return g<f||g===f&&v[h+1]<b}function c(h,f,b){var v=(f-h+1)/6|0,g=h+v,y=f-v,p=h+f>>1,m=p-v,w=p+v,u=g,S=m,_=p,E=w,L=y,C=h+1,P=f-1,I=0;a(u,S,b)&&(I=u,u=S,S=I),a(E,L,b)&&(I=E,E=L,L=I),a(u,_,b)&&(I=u,u=_,_=I),a(S,_,b)&&(I=S,S=_,_=I),a(u,E,b)&&(I=u,u=E,E=I),a(_,E,b)&&(I=_,_=E,E=I),a(S,L,b)&&(I=S,S=L,L=I),a(S,_,b)&&(I=S,S=_,_=I),a(E,L,b)&&(I=E,E=L,L=I);for(var U=b[2*S],z=b[2*S+1],H=b[2*E],F=b[2*E+1],N=2*u,B=2*_,j=2*L,K=2*g,G=2*p,V=2*y,W=0;W<2;++W){var J=b[N+W],X=b[B+W],ee=b[j+W];b[K+W]=J,b[G+W]=X,b[V+W]=ee}o(m,h,b),o(w,f,b);for(var re=C;re<=P;++re)if(i(re,U,z,b))re!==C&&t(re,C,b),++C;else if(!i(re,H,F,b))for(;;){if(i(P,H,F,b)){i(P,U,z,b)?(r(re,C,P,b),++C,--P):(t(re,P,b),--P);break}if(--P<re)break}n(h,C-1,U,z,b),n(f,P+1,H,F,b),C-2-h<=32?s(h,C-2,b):c(h,C-2,b),f-(P+2)<=32?s(P+2,f,b):c(P+2,f,b),P-C<=32?s(C,P,b):c(C,P,b)}d.exports=function(h,f){f<=128?s(0,f-1,h):c(0,f-1,h)}},1390:function(d,s,t){d.exports={init:function(w){var u=r.nextPow2(w);c.length<u&&(o.free(c),c=o.mallocInt32(u)),h.length<u&&(o.free(h),h=o.mallocInt32(u)),f.length<u&&(o.free(f),f=o.mallocInt32(u)),b.length<u&&(o.free(b),b=o.mallocInt32(u)),v.length<u&&(o.free(v),v=o.mallocInt32(u)),g.length<u&&(o.free(g),g=o.mallocInt32(u));var S=8*u;y.length<S&&(o.free(y),y=o.mallocDouble(S))},sweepBipartite:function(w,u,S,_,E,L,C,P,I,U){for(var z=0,H=2*w,F=w-1,N=H-1,B=S;B<_;++B){var j=L[B],K=H*B;y[z++]=E[K+F],y[z++]=-(j+1),y[z++]=E[K+N],y[z++]=j}for(B=C;B<P;++B){j=U[B]+a;var G=H*B;y[z++]=I[G+F],y[z++]=-j,y[z++]=I[G+N],y[z++]=j}var V=z>>>1;n(y,V);var W=0,J=0;for(B=0;B<V;++B){var X=0|y[2*B+1];if(X>=a)p(f,b,J--,X=X-a|0);else if(X>=0)p(c,h,W--,X);else if(X<=-268435456){X=-X-a|0;for(var ee=0;ee<W;++ee)if((re=u(c[ee],X))!==void 0)return re;m(f,b,J++,X)}else{for(X=-X-1|0,ee=0;ee<J;++ee){var re;if((re=u(X,f[ee]))!==void 0)return re}m(c,h,W++,X)}}},sweepComplete:function(w,u,S,_,E,L,C,P,I,U){for(var z=0,H=2*w,F=w-1,N=H-1,B=S;B<_;++B){var j=L[B]+1<<1,K=H*B;y[z++]=E[K+F],y[z++]=-j,y[z++]=E[K+N],y[z++]=j}for(B=C;B<P;++B){j=U[B]+1<<1;var G=H*B;y[z++]=I[G+F],y[z++]=1|-j,y[z++]=I[G+N],y[z++]=1|j}var V=z>>>1;n(y,V);var W=0,J=0,X=0;for(B=0;B<V;++B){var ee=0|y[2*B+1],re=1&ee;if(B<V-1&&ee>>1==y[2*B+3]>>1&&(re=2,B+=1),ee<0){for(var ie=-(ee>>1)-1,se=0;se<X;++se)if((fe=u(v[se],ie))!==void 0)return fe;if(re!==0){for(se=0;se<W;++se)if((fe=u(c[se],ie))!==void 0)return fe}if(re!==1)for(se=0;se<J;++se){var fe;if((fe=u(f[se],ie))!==void 0)return fe}re===0?m(c,h,W++,ie):re===1?m(f,b,J++,ie):re===2&&m(v,g,X++,ie)}else ie=(ee>>1)-1,re===0?p(c,h,W--,ie):re===1?p(f,b,J--,ie):re===2&&p(v,g,X--,ie)}},scanBipartite:function(w,u,S,_,E,L,C,P,I,U,z,H){var F=0,N=2*w,B=u,j=u+w,K=1,G=1;_?G=a:K=a;for(var V=E;V<L;++V){var W=V+K,J=N*V;y[F++]=C[J+B],y[F++]=-W,y[F++]=C[J+j],y[F++]=W}for(V=I;V<U;++V){W=V+G;var X=N*V;y[F++]=z[X+B],y[F++]=-W}var ee=F>>>1;n(y,ee);var re=0;for(V=0;V<ee;++V){var ie=0|y[2*V+1];if(ie<0){var se=!1;if((W=-ie)>=a?(se=!_,W-=a):(se=!!_,W-=1),se)m(c,h,re++,W);else{var fe=H[W],ye=N*W,ge=z[ye+u+1],he=z[ye+u+1+w];e:for(var ve=0;ve<re;++ve){var Ie=c[ve],xe=N*Ie;if(!(he<C[xe+u+1]||C[xe+u+1+w]<ge)){for(var Ae=u+2;Ae<w;++Ae)if(z[ye+Ae+w]<C[xe+Ae]||C[xe+Ae+w]<z[ye+Ae])continue e;var Se,Te=P[Ie];if((Se=_?S(fe,Te):S(Te,fe))!==void 0)return Se}}}}else p(c,h,re--,ie-K)}},scanComplete:function(w,u,S,_,E,L,C,P,I,U,z){for(var H=0,F=2*w,N=u,B=u+w,j=_;j<E;++j){var K=j+a,G=F*j;y[H++]=L[G+N],y[H++]=-K,y[H++]=L[G+B],y[H++]=K}for(j=P;j<I;++j){K=j+1;var V=F*j;y[H++]=U[V+N],y[H++]=-K}var W=H>>>1;n(y,W);var J=0;for(j=0;j<W;++j){var X=0|y[2*j+1];if(X<0)if((K=-X)>=a)c[J++]=K-a;else{var ee=z[K-=1],re=F*K,ie=U[re+u+1],se=U[re+u+1+w];e:for(var fe=0;fe<J;++fe){var ye=c[fe],ge=C[ye];if(ge===ee)break;var he=F*ye;if(!(se<L[he+u+1]||L[he+u+1+w]<ie)){for(var ve=u+2;ve<w;++ve)if(U[re+ve+w]<L[he+ve]||L[he+ve+w]<U[re+ve])continue e;var Ie=S(ge,ee);if(Ie!==void 0)return Ie}}}else{for(K=X-a,fe=J-1;fe>=0;--fe)if(c[fe]===K){for(ve=fe+1;ve<J;++ve)c[ve-1]=c[ve];break}--J}}}};var o=t(5306),r=t(2288),n=t(309),a=1<<28,i=1024,c=o.mallocInt32(i),h=o.mallocInt32(i),f=o.mallocInt32(i),b=o.mallocInt32(i),v=o.mallocInt32(i),g=o.mallocInt32(i),y=o.mallocDouble(8192);function p(w,u,S,_){var E=u[_],L=w[S-1];w[E]=L,u[L]=E}function m(w,u,S,_){w[S]=_,u[_]=S}},7761:function(d,s,t){var o=t(9971),r=t(743),n=t(2161),a=t(7098);function i(f){return[Math.min(f[0],f[1]),Math.max(f[0],f[1])]}function c(f,b){return f[0]-b[0]||f[1]-b[1]}function h(f,b,v){return b in f?f[b]:v}d.exports=function(f,b,v){Array.isArray(b)?(v=v||{},b=b||[]):(v=b||{},b=[]);var g=!!h(v,"delaunay",!0),y=!!h(v,"interior",!0),p=!!h(v,"exterior",!0),m=!!h(v,"infinity",!1);if(!y&&!p||f.length===0)return[];var w=o(f,b);if(g||y!==p||m){for(var u=r(f.length,function(E){return E.map(i).sort(c)}(b)),S=0;S<w.length;++S){var _=w[S];u.addTriangle(_[0],_[1],_[2])}return g&&n(f,u),p?y?m?a(u,0,m):u.cells():a(u,1,m):a(u,-1)}return w}},2161:function(d,s,t){var o=t(2227)[4];function r(n,a,i,c,h,f){var b=a.opposite(c,h);if(!(b<0)){if(h<c){var v=c;c=h,h=v,v=f,f=b,b=v}a.isConstraint(c,h)||o(n[c],n[h],n[f],n[b])<0&&i.push(c,h)}}t(5070),d.exports=function(n,a){for(var i=[],c=n.length,h=a.stars,f=0;f<c;++f)for(var b=h[f],v=1;v<b.length;v+=2)if(!((m=b[v])<f||a.isConstraint(f,m))){for(var g=b[v-1],y=-1,p=1;p<b.length;p+=2)if(b[p-1]===m){y=b[p];break}y<0||o(n[f],n[m],n[g],n[y])<0&&i.push(f,m)}for(;i.length>0;){for(var m=i.pop(),w=(g=-1,y=-1,b=h[f=i.pop()],1);w<b.length;w+=2){var u=b[w-1],S=b[w];u===m?y=S:S===m&&(g=u)}g<0||y<0||o(n[f],n[m],n[g],n[y])>=0||(a.flip(f,m),r(n,a,i,g,f,y),r(n,a,i,f,y,g),r(n,a,i,y,m,g),r(n,a,i,m,g,y))}}},7098:function(d,s,t){var o,r=t(5070);function n(i,c,h,f,b,v,g){this.cells=i,this.neighbor=c,this.flags=f,this.constraint=h,this.active=b,this.next=v,this.boundary=g}function a(i,c){return i[0]-c[0]||i[1]-c[1]||i[2]-c[2]}d.exports=function(i,c,h){var f=function(C,P){for(var I=C.cells(),U=I.length,z=0;z<U;++z){var H=(X=I[z])[0],F=X[1],N=X[2];F<N?F<H&&(X[0]=F,X[1]=N,X[2]=H):N<H&&(X[0]=N,X[1]=H,X[2]=F)}I.sort(a);var B=new Array(U);for(z=0;z<B.length;++z)B[z]=0;var j=[],K=[],G=new Array(3*U),V=new Array(3*U),W=null;P&&(W=[]);var J=new n(I,G,V,B,j,K,W);for(z=0;z<U;++z)for(var X=I[z],ee=0;ee<3;++ee){H=X[ee],F=X[(ee+1)%3];var re=G[3*z+ee]=J.locate(F,H,C.opposite(F,H)),ie=V[3*z+ee]=C.isConstraint(H,F);re<0&&(ie?K.push(z):(j.push(z),B[z]=1),P&&W.push([F,H,-1]))}return J}(i,h);if(c===0)return h?f.cells.concat(f.boundary):f.cells;for(var b=1,v=f.active,g=f.next,y=f.flags,p=f.cells,m=f.constraint,w=f.neighbor;v.length>0||g.length>0;){for(;v.length>0;){var u=v.pop();if(y[u]!==-b){y[u]=b,p[u];for(var S=0;S<3;++S){var _=w[3*u+S];_>=0&&y[_]===0&&(m[3*u+S]?g.push(_):(v.push(_),y[_]=b))}}}var E=g;g=v,v=E,g.length=0,b=-b}var L=function(C,P,I){for(var U=0,z=0;z<C.length;++z)P[z]===I&&(C[U++]=C[z]);return C.length=U,C}(p,y,c);return h?L.concat(f.boundary):L},n.prototype.locate=(o=[0,0,0],function(i,c,h){var f=i,b=c,v=h;return c<h?c<i&&(f=c,b=h,v=i):h<i&&(f=h,b=i,v=c),f<0?-1:(o[0]=f,o[1]=b,o[2]=v,r.eq(this.cells,o,a))})},9971:function(d,s,t){var o=t(5070),r=t(417)[3];function n(g,y,p,m,w){this.a=g,this.b=y,this.idx=p,this.lowerIds=m,this.upperIds=w}function a(g,y,p,m){this.a=g,this.b=y,this.type=p,this.idx=m}function i(g,y){var p=g.a[0]-y.a[0]||g.a[1]-y.a[1]||g.type-y.type;return p||(g.type!==0&&(p=r(g.a,g.b,y.b))?p:g.idx-y.idx)}function c(g,y){return r(g.a,g.b,y)}function h(g,y,p,m,w){for(var u=o.lt(y,m,c),S=o.gt(y,m,c),_=u;_<S;++_){for(var E=y[_],L=E.lowerIds,C=L.length;C>1&&r(p[L[C-2]],p[L[C-1]],m)>0;)g.push([L[C-1],L[C-2],w]),C-=1;L.length=C,L.push(w);var P=E.upperIds;for(C=P.length;C>1&&r(p[P[C-2]],p[P[C-1]],m)<0;)g.push([P[C-2],P[C-1],w]),C-=1;P.length=C,P.push(w)}}function f(g,y){var p;return(p=g.a[0]<y.a[0]?r(g.a,g.b,y.a):r(y.b,y.a,g.a))?p:(p=y.b[0]<g.b[0]?r(g.a,g.b,y.b):r(y.b,y.a,g.b))||g.idx-y.idx}function b(g,y,p){var m=o.le(g,p,f),w=g[m],u=w.upperIds,S=u[u.length-1];w.upperIds=[S],g.splice(m+1,0,new n(p.a,p.b,p.idx,[S],u))}function v(g,y,p){var m=p.a;p.a=p.b,p.b=m;var w=o.eq(g,p,f),u=g[w];g[w-1].upperIds=u.upperIds,g.splice(w,1)}d.exports=function(g,y){for(var p=g.length,m=y.length,w=[],u=0;u<p;++u)w.push(new a(g[u],null,0,u));for(u=0;u<m;++u){var S=y[u],_=g[S[0]],E=g[S[1]];_[0]<E[0]?w.push(new a(_,E,2,u),new a(E,_,1,u)):_[0]>E[0]&&w.push(new a(E,_,2,u),new a(_,E,1,u))}w.sort(i);for(var L=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),C=[new n([L,1],[L,0],-1,[],[])],P=[],I=(u=0,w.length);u<I;++u){var U=w[u],z=U.type;z===0?h(P,C,g,U.a,U.idx):z===2?b(C,0,U):v(C,0,U)}return P}},743:function(d,s,t){var o=t(5070);function r(i,c){this.stars=i,this.edges=c}d.exports=function(i,c){for(var h=new Array(i),f=0;f<i;++f)h[f]=[];return new r(h,c)};var n=r.prototype;function a(i,c,h){for(var f=1,b=i.length;f<b;f+=2)if(i[f-1]===c&&i[f]===h)return i[f-1]=i[b-2],i[f]=i[b-1],void(i.length=b-2)}n.isConstraint=function(){var i=[0,0];function c(h,f){return h[0]-f[0]||h[1]-f[1]}return function(h,f){return i[0]=Math.min(h,f),i[1]=Math.max(h,f),o.eq(this.edges,i,c)>=0}}(),n.removeTriangle=function(i,c,h){var f=this.stars;a(f[i],c,h),a(f[c],h,i),a(f[h],i,c)},n.addTriangle=function(i,c,h){var f=this.stars;f[i].push(c,h),f[c].push(h,i),f[h].push(i,c)},n.opposite=function(i,c){for(var h=this.stars[c],f=1,b=h.length;f<b;f+=2)if(h[f]===i)return h[f-1];return-1},n.flip=function(i,c){var h=this.opposite(i,c),f=this.opposite(c,i);this.removeTriangle(i,c,h),this.removeTriangle(c,i,f),this.addTriangle(i,f,h),this.addTriangle(c,h,f)},n.edges=function(){for(var i=this.stars,c=[],h=0,f=i.length;h<f;++h)for(var b=i[h],v=0,g=b.length;v<g;v+=2)c.push([b[v],b[v+1]]);return c},n.cells=function(){for(var i=this.stars,c=[],h=0,f=i.length;h<f;++h)for(var b=i[h],v=0,g=b.length;v<g;v+=2){var y=b[v],p=b[v+1];h<Math.min(y,p)&&c.push([h,y,p])}return c}},9887:function(d){d.exports=function(s){for(var t=1,o=1;o<s.length;++o)for(var r=0;r<o;++r)if(s[o]<s[r])t=-t;else if(s[r]===s[o])return 0;return t}},9243:function(d,s,t){var o=t(3094),r=t(6606);function n(c,h){for(var f=0,b=c.length,v=0;v<b;++v)f+=c[v]*h[v];return f}function a(c){var h=c.length;if(h===0)return[];c[0].length;var f=o([c.length+1,c.length+1],1),b=o([c.length+1],1);f[h][h]=0;for(var v=0;v<h;++v){for(var g=0;g<=v;++g)f[g][v]=f[v][g]=2*n(c[v],c[g]);b[v]=n(c[v],c[v])}var y=r(f,b),p=0,m=y[h+1];for(v=0;v<m.length;++v)p+=m[v];var w=new Array(h);for(v=0;v<h;++v){m=y[v];var u=0;for(g=0;g<m.length;++g)u+=m[g];w[v]=u/p}return w}function i(c){if(c.length===0)return[];for(var h=c[0].length,f=o([h]),b=a(c),v=0;v<c.length;++v)for(var g=0;g<h;++g)f[g]+=c[v][g]*b[v];return f}i.barycenetric=a,d.exports=i},1778:function(d,s,t){d.exports=function(r){for(var n=o(r),a=0,i=0;i<r.length;++i)for(var c=r[i],h=0;h<n.length;++h)a+=Math.pow(c[h]-n[h],2);return Math.sqrt(a/r.length)};var o=t(9243)},197:function(d,s,t){d.exports=function(S,_,E){var L;if(E){L=_;for(var C=new Array(_.length),P=0;P<_.length;++P){var I=_[P];C[P]=[I[0],I[1],E[P]]}_=C}for(var U=function(z,H,F){var N=y(z,[],g(z));return w(H,N,F),!!N}(S,_,!!E);u(S,_,!!E);)U=!0;if(E&&U)for(L.length=0,E.length=0,P=0;P<_.length;++P)I=_[P],L.push([I[0],I[1]]),E.push(I[2]);return U};var o=t(1731),r=t(2569),n=t(4434),a=t(5125),i=t(8846),c=t(7999),h=t(2826),f=t(8551),b=t(5528);function v(S){var _=c(S);return[f(_,-1/0),f(_,1/0)]}function g(S){for(var _=new Array(S.length),E=0;E<S.length;++E){var L=S[E];_[E]=[f(L[0],-1/0),f(L[1],-1/0),f(L[0],1/0),f(L[1],1/0)]}return _}function y(S,_,E){for(var L=_.length,C=new o(L),P=[],I=0;I<_.length;++I){var U=_[I],z=v(U[0]),H=v(U[1]);P.push([f(z[0],-1/0),f(H[0],-1/0),f(z[1],1/0),f(H[1],1/0)])}r(P,function(K,G){C.link(K,G)});var F=!0,N=new Array(L);for(I=0;I<L;++I)(j=C.find(I))!==I&&(F=!1,S[j]=[Math.min(S[I][0],S[j][0]),Math.min(S[I][1],S[j][1])]);if(F)return null;var B=0;for(I=0;I<L;++I){var j;(j=C.find(I))===I?(N[I]=B,S[B++]=S[I]):N[I]=-1}for(S.length=B,I=0;I<L;++I)N[I]<0&&(N[I]=N[C.find(I)]);return N}function p(S,_){return S[0]-_[0]||S[1]-_[1]}function m(S,_){return S[0]-_[0]||S[1]-_[1]||(S[2]<_[2]?-1:S[2]>_[2]?1:0)}function w(S,_,E){if(S.length!==0){if(_)for(var L=0;L<S.length;++L){var C=_[(I=S[L])[0]],P=_[I[1]];I[0]=Math.min(C,P),I[1]=Math.max(C,P)}else for(L=0;L<S.length;++L){var I;C=(I=S[L])[0],P=I[1],I[0]=Math.min(C,P),I[1]=Math.max(C,P)}E?S.sort(m):S.sort(p);var U=1;for(L=1;L<S.length;++L){var z=S[L-1],H=S[L];(H[0]!==z[0]||H[1]!==z[1]||E&&H[2]!==z[2])&&(S[U++]=H)}S.length=U}}function u(S,_,E){var L=function(z,H){for(var F=new Array(H.length),N=0;N<H.length;++N){var B=H[N],j=z[B[0]],K=z[B[1]];F[N]=[f(Math.min(j[0],K[0]),-1/0),f(Math.min(j[1],K[1]),-1/0),f(Math.max(j[0],K[0]),1/0),f(Math.max(j[1],K[1]),1/0)]}return F}(S,_),C=function(z,H,F){var N=[];return r(F,function(B,j){var K=H[B],G=H[j];if(K[0]!==G[0]&&K[0]!==G[1]&&K[1]!==G[0]&&K[1]!==G[1]){var V=z[K[0]],W=z[K[1]],J=z[G[0]],X=z[G[1]];n(V,W,J,X)&&N.push([B,j])}}),N}(S,_,L),P=function(z,H,F,N){var B=[];return r(F,N,function(j,K){var G=H[j];if(G[0]!==K&&G[1]!==K){var V=z[K],W=z[G[0]],J=z[G[1]];n(W,J,V,V)&&B.push([j,K])}}),B}(S,_,L,g(S)),I=function(z,H,F,N,B){var j,K,G=z.map(function(Se){return[a(Se[0]),a(Se[1])]});for(j=0;j<F.length;++j){var V=F[j];K=V[0];var W=V[1],J=H[K],X=H[W],ee=b(h(z[J[0]]),h(z[J[1]]),h(z[X[0]]),h(z[X[1]]));if(ee){var re=z.length;z.push([c(ee[0]),c(ee[1])]),G.push(ee),N.push([K,re],[W,re])}}for(N.sort(function(Se,Te){if(Se[0]!==Te[0])return Se[0]-Te[0];var Q=G[Se[1]],oe=G[Te[1]];return i(Q[0],oe[0])||i(Q[1],oe[1])}),j=N.length-1;j>=0;--j){var ie=H[K=(xe=N[j])[0]],se=ie[0],fe=ie[1],ye=z[se],ge=z[fe];if((ye[0]-ge[0]||ye[1]-ge[1])<0){var he=se;se=fe,fe=he}ie[0]=se;var ve,Ie=ie[1]=xe[1];for(B&&(ve=ie[2]);j>0&&N[j-1][0]===K;){var xe,Ae=(xe=N[--j])[1];B?H.push([Ie,Ae,ve]):H.push([Ie,Ae]),Ie=Ae}B?H.push([Ie,fe,ve]):H.push([Ie,fe])}return G}(S,_,C,P,E),U=y(S,I);return w(_,U,E),!!U||C.length>0||P.length>0}},5528:function(d,s,t){d.exports=function(b,v,g,y){var p=i(v,b),m=i(y,g),w=f(p,m);if(a(w)===0)return null;var u=f(m,i(b,g)),S=r(u,w),_=h(p,S);return c(b,_)};var o=t(3962),r=t(9189),n=t(4354),a=t(4951),i=t(6695),c=t(7584),h=t(4469);function f(b,v){return n(o(b[0],v[1]),o(b[1],v[0]))}},5692:function(d){d.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(d,s,t){var o=t(5692),r=t(3578);function n(c){return[c[0]/255,c[1]/255,c[2]/255,c[3]]}function a(c){for(var h,f="#",b=0;b<3;++b)f+=("00"+(h=(h=c[b]).toString(16))).substr(h.length);return f}function i(c){return"rgba("+c.join(",")+")"}d.exports=function(c){var h,f,b,v,g,y,p,m,w,u;if(c||(c={}),m=(c.nshades||72)-1,p=c.format||"hex",(y=c.colormap)||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!o[y])throw Error(y+" not a supported colorscale");g=o[y]}else{if(!Array.isArray(y))throw Error("unsupported colormap option",y);g=y.slice()}if(g.length>m+1)throw new Error(y+" map requires nshades to be at least size "+g.length);w=Array.isArray(c.alpha)?c.alpha.length!==2?[1,1]:c.alpha.slice():typeof c.alpha=="number"?[c.alpha,c.alpha]:[1,1],h=g.map(function(C){return Math.round(C.index*m)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var S=g.map(function(C,P){var I=g[P].index,U=g[P].rgb.slice();return U.length===4&&U[3]>=0&&U[3]<=1||(U[3]=w[0]+(w[1]-w[0])*I),U}),_=[];for(u=0;u<h.length-1;++u){v=h[u+1]-h[u],f=S[u],b=S[u+1];for(var E=0;E<v;E++){var L=E/v;_.push([Math.round(r(f[0],b[0],L)),Math.round(r(f[1],b[1],L)),Math.round(r(f[2],b[2],L)),r(f[3],b[3],L)])}}return _.push(g[g.length-1].rgb.concat(w[1])),p==="hex"?_=_.map(a):p==="rgbaString"?_=_.map(i):p==="float"&&(_=_.map(n)),_}},9398:function(d,s,t){d.exports=function(h,f,b,v){var g=o(f,b,v);if(g===0){var y=r(o(h,f,b)),p=r(o(h,f,v));if(y===p){if(y===0){var m=c(h,f,b);return m===c(h,f,v)?0:m?1:-1}return 0}return p===0?y>0||c(h,f,v)?-1:1:y===0?p>0||c(h,f,b)?1:-1:r(p-y)}var w=o(h,f,b);return w>0?g>0&&o(h,f,v)>0?1:-1:w<0?g>0||o(h,f,v)>0?1:-1:o(h,f,v)>0||c(h,f,b)?1:-1};var o=t(417),r=t(7538),n=t(87),a=t(2019),i=t(9662);function c(h,f,b){var v=n(h[0],-f[0]),g=n(h[1],-f[1]),y=n(b[0],-f[0]),p=n(b[1],-f[1]),m=i(a(v,y),a(g,p));return m[m.length-1]>=0}},7538:function(d){d.exports=function(s){return s<0?-1:s>0?1:0}},9209:function(d){d.exports=function(o,r){var n=o.length,a=o.length-r.length;if(a)return a;switch(n){case 0:return 0;case 1:return o[0]-r[0];case 2:return o[0]+o[1]-r[0]-r[1]||s(o[0],o[1])-s(r[0],r[1]);case 3:var i=o[0]+o[1],c=r[0]+r[1];if(a=i+o[2]-(c+r[2]))return a;var h=s(o[0],o[1]),f=s(r[0],r[1]);return s(h,o[2])-s(f,r[2])||s(h+o[2],i)-s(f+r[2],c);case 4:var b=o[0],v=o[1],g=o[2],y=o[3],p=r[0],m=r[1],w=r[2],u=r[3];return b+v+g+y-(p+m+w+u)||s(b,v,g,y)-s(p,m,w,u,p)||s(b+v,b+g,b+y,v+g,v+y,g+y)-s(p+m,p+w,p+u,m+w,m+u,w+u)||s(b+v+g,b+v+y,b+g+y,v+g+y)-s(p+m+w,p+m+u,p+w+u,m+w+u);default:for(var S=o.slice().sort(t),_=r.slice().sort(t),E=0;E<n;++E)if(a=S[E]-_[E])return a;return 0}};var s=Math.min;function t(o,r){return o-r}},1284:function(d,s,t){var o=t(9209),r=t(9887);d.exports=function(n,a){return o(n,a)||r(n)-r(a)}},5537:function(d,s,t){var o=t(8950),r=t(8722),n=t(3332);d.exports=function(a){var i=a.length;if(i===0)return[];if(i===1)return[[0]];var c=a[0].length;return c===0?[]:c===1?o(a):c===2?r(a):n(a,c)}},8950:function(d){d.exports=function(s){for(var t=0,o=0,r=1;r<s.length;++r)s[r][0]<s[t][0]&&(t=r),s[r][0]>s[o][0]&&(o=r);return t<o?[[t],[o]]:t>o?[[o],[t]]:[[t]]}},8722:function(d,s,t){d.exports=function(r){var n=o(r),a=n.length;if(a<=2)return[];for(var i=new Array(a),c=n[a-1],h=0;h<a;++h){var f=n[h];i[h]=[c,f],c=f}return i};var o=t(3266)},3332:function(d,s,t){d.exports=function(n,a){try{return o(n,!0)}catch{var i=r(n);if(i.length<=a)return[];var c=function(f,b){for(var v=f.length,g=new Array(v),y=0;y<b.length;++y)g[y]=f[b[y]];var p=b.length;for(y=0;y<v;++y)b.indexOf(y)<0&&(g[p++]=f[y]);return g}(n,i);return function(f,b){for(var v=f.length,g=b.length,y=0;y<v;++y)for(var p=f[y],m=0;m<p.length;++m){var w=p[m];if(w<g)p[m]=b[w];else{w-=g;for(var u=0;u<g;++u)w>=b[u]&&(w+=1);p[m]=w}}return f}(o(c,!0),i)}};var o=t(2183),r=t(2153)},9680:function(d){d.exports=function(s,t,o,r,n,a){var i=n-1,c=n*n,h=i*i,f=(1+2*n)*h,b=n*h,v=c*(3-2*n),g=c*i;if(s.length){a||(a=new Array(s.length));for(var y=s.length-1;y>=0;--y)a[y]=f*s[y]+b*t[y]+v*o[y]+g*r[y];return a}return f*s+b*t+v*o+g*r},d.exports.derivative=function(s,t,o,r,n,a){var i=6*n*n-6*n,c=3*n*n-4*n+1,h=-6*n*n+6*n,f=3*n*n-2*n;if(s.length){a||(a=new Array(s.length));for(var b=s.length-1;b>=0;--b)a[b]=i*s[b]+c*t[b]+h*o[b]+f*r[b];return a}return i*s+c*t+h*o[b]+f*r}},4419:function(d,s,t){var o=t(2183),r=t(1215);function n(i,c){this.point=i,this.index=c}function a(i,c){for(var h=i.point,f=c.point,b=h.length,v=0;v<b;++v){var g=f[v]-h[v];if(g)return g}return 0}d.exports=function(i,c){var h=i.length;if(h===0)return[];var f=i[0].length;if(f<1)return[];if(f===1)return function(I,U,z){if(I===1)return z?[[-1,0]]:[];var H=U.map(function(K,G){return[K[0],G]});H.sort(function(K,G){return K[0]-G[0]});for(var F=new Array(I-1),N=1;N<I;++N){var B=H[N-1],j=H[N];F[N-1]=[B[1],j[1]]}return z&&F.push([-1,F[0][1]],[F[I-1][1],-1]),F}(h,i,c);for(var b=new Array(h),v=1,g=0;g<h;++g){for(var y=i[g],p=new Array(f+1),m=0,w=0;w<f;++w){var u=y[w];p[w]=u,m+=u*u}p[f]=m,b[g]=new n(p,g),v=Math.max(m,v)}r(b,a),h=b.length;var S=new Array(h+f+1),_=new Array(h+f+1),E=(f+1)*(f+1)*v,L=new Array(f+1);for(g=0;g<=f;++g)L[g]=0;for(L[f]=E,S[0]=L.slice(),_[0]=-1,g=0;g<=f;++g)(p=L.slice())[g]=1,S[g+1]=p,_[g+1]=-1;for(g=0;g<h;++g){var C=b[g];S[g+f+1]=C.point,_[g+f+1]=C.index}var P=o(S,!1);if(P=c?P.filter(function(I){for(var U=0,z=0;z<=f;++z){var H=_[I[z]];if(H<0&&++U>=2)return!1;I[z]=H}return!0}):P.filter(function(I){for(var U=0;U<=f;++U){var z=_[I[U]];if(z<0)return!1;I[U]=z}return!0}),1&f)for(g=0;g<P.length;++g)p=(C=P[g])[0],C[0]=C[1],C[1]=p;return P}},8362:function(d){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),o=new Uint32Array(t.buffer);t[0]=1,s=!0,o[1]===1072693248?(d.exports=function(n){return t[0]=n,[o[0],o[1]]},d.exports.pack=function(n,a){return o[0]=n,o[1]=a,t[0]},d.exports.lo=function(n){return t[0]=n,o[0]},d.exports.hi=function(n){return t[0]=n,o[1]}):o[0]===1072693248?(d.exports=function(n){return t[0]=n,[o[1],o[0]]},d.exports.pack=function(n,a){return o[1]=n,o[0]=a,t[0]},d.exports.lo=function(n){return t[0]=n,o[1]},d.exports.hi=function(n){return t[0]=n,o[0]}):s=!1}if(!s){var r=new Buffer(8);d.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},d.exports.pack=function(n,a){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(a,4,!0),r.readDoubleLE(0,!0)},d.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},d.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}d.exports.sign=function(n){return d.exports.hi(n)>>>31},d.exports.exponent=function(n){return(d.exports.hi(n)<<1>>>21)-1023},d.exports.fraction=function(n){var a=d.exports.lo(n),i=d.exports.hi(n),c=1048575&i;return 2146435072&i&&(c+=1048576),[a,c]},d.exports.denormalized=function(n){return!(2146435072&d.exports.hi(n))}},3094:function(d){function s(t,o,r){var n=0|t[r];if(n<=0)return[];var a,i=new Array(n);if(r===t.length-1)for(a=0;a<n;++a)i[a]=o;else for(a=0;a<n;++a)i[a]=s(t,o,r+1);return i}d.exports=function(t,o){switch(o===void 0&&(o=0),typeof t){case"number":if(t>0)return function(r,n){var a,i;for(a=new Array(r),i=0;i<r;++i)a[i]=n;return a}(0|t,o);break;case"object":if(typeof t.length=="number")return s(t,o,0)}return[]}},8348:function(d,s,t){d.exports=function(r,n){var a=r.length;if(typeof n!="number"){n=0;for(var i=0;i<a;++i){var c=r[i];n=Math.max(n,c[0],c[1])}n=1+(0|n)}n|=0;var h=new Array(n);for(i=0;i<n;++i)h[i]=[];for(i=0;i<a;++i)h[(c=r[i])[0]].push(c[1]),h[c[1]].push(c[0]);for(var f=0;f<n;++f)o(h[f],function(b,v){return b-v});return h};var o=t(1215)},5795:function(d){d.exports=function(s,t,o){var r=t||0,n=o||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[n*s[12]-s[8],n*s[13]-s[9],n*s[14]-s[10],n*s[15]-s[11]]]}},8444:function(d,s,t){d.exports=function(h,f,b){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return typeof h=="number"?new a(v=c(h),v,0):new a(h,c(h.length),0);case 2:if(typeof f=="number"){var v=c(h.length);return new a(h,v,+f)}b=0;case 3:if(h.length!==f.length)throw new Error("state and velocity lengths must match");return new a(h,f,b)}};var o=t(9680),r=t(5070);function n(h,f,b){return Math.min(f,Math.max(h,b))}function a(h,f,b){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var v=0;v<this.dimension;++v)this.bounds[0][v]=-1/0,this.bounds[1][v]=1/0;this._state=h.slice().reverse(),this._velocity=f.slice().reverse(),this._time=[b],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var i=a.prototype;function c(h){for(var f=new Array(h),b=0;b<h;++b)f[b]=0;return f}i.flush=function(h){var f=r.gt(this._time,h)-1;f<=0||(this._time.splice(0,f),this._state.splice(0,f*this.dimension),this._velocity.splice(0,f*this.dimension))},i.curve=function(h){var f=this._time,b=f.length,v=r.le(f,h),g=this._scratch[0],y=this._state,p=this._velocity,m=this.dimension,w=this.bounds;if(v<0)for(var u=m-1,S=0;S<m;++S,--u)g[S]=y[u];else if(v>=b-1){u=y.length-1;var _=h-f[b-1];for(S=0;S<m;++S,--u)g[S]=y[u]+_*p[u]}else{u=m*(v+1)-1;var E=f[v],L=f[v+1]-E||1,C=this._scratch[1],P=this._scratch[2],I=this._scratch[3],U=this._scratch[4],z=!0;for(S=0;S<m;++S,--u)C[S]=y[u],I[S]=p[u]*L,P[S]=y[u+m],U[S]=p[u+m]*L,z=z&&C[S]===P[S]&&I[S]===U[S]&&I[S]===0;if(z)for(S=0;S<m;++S)g[S]=C[S];else o(C,I,P,U,(h-E)/L,g)}var H=w[0],F=w[1];for(S=0;S<m;++S)g[S]=n(H[S],F[S],g[S]);return g},i.dcurve=function(h){var f=this._time,b=f.length,v=r.le(f,h),g=this._scratch[0],y=this._state,p=this._velocity,m=this.dimension;if(v>=b-1)for(var w=y.length-1,u=(f[b-1],0);u<m;++u,--w)g[u]=p[w];else{w=m*(v+1)-1;var S=f[v],_=f[v+1]-S||1,E=this._scratch[1],L=this._scratch[2],C=this._scratch[3],P=this._scratch[4],I=!0;for(u=0;u<m;++u,--w)E[u]=y[w],C[u]=p[w]*_,L[u]=y[w+m],P[u]=p[w+m]*_,I=I&&E[u]===L[u]&&C[u]===P[u]&&C[u]===0;if(I)for(u=0;u<m;++u)g[u]=0;else for(o.derivative(E,C,L,P,(h-S)/_,g),u=0;u<m;++u)g[u]/=_}return g},i.lastT=function(){var h=this._time;return h[h.length-1]},i.stable=function(){for(var h=this._velocity,f=h.length,b=this.dimension-1;b>=0;--b)if(h[--f])return!1;return!0},i.jump=function(h){var f=this.lastT(),b=this.dimension;if(!(h<f||arguments.length!==b+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=this.bounds,m=p[0],w=p[1];this._time.push(f,h);for(var u=0;u<2;++u)for(var S=0;S<b;++S)v.push(v[y++]),g.push(0);for(this._time.push(h),S=b;S>0;--S)v.push(n(m[S-1],w[S-1],arguments[S])),g.push(0)}},i.push=function(h){var f=this.lastT(),b=this.dimension;if(!(h<f||arguments.length!==b+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=h-f,m=this.bounds,w=m[0],u=m[1],S=p>1e-6?1/p:0;this._time.push(h);for(var _=b;_>0;--_){var E=n(w[_-1],u[_-1],arguments[_]);v.push(E),g.push((E-v[y++])*S)}}},i.set=function(h){var f=this.dimension;if(!(h<this.lastT()||arguments.length!==f+1)){var b=this._state,v=this._velocity,g=this.bounds,y=g[0],p=g[1];this._time.push(h);for(var m=f;m>0;--m)b.push(n(y[m-1],p[m-1],arguments[m])),v.push(0)}},i.move=function(h){var f=this.lastT(),b=this.dimension;if(!(h<=f||arguments.length!==b+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=this.bounds,m=p[0],w=p[1],u=h-f,S=u>1e-6?1/u:0;this._time.push(h);for(var _=b;_>0;--_){var E=arguments[_];v.push(n(m[_-1],w[_-1],v[y++]+E)),g.push(E*S)}}},i.idle=function(h){var f=this.lastT();if(!(h<f)){var b=this.dimension,v=this._state,g=this._velocity,y=v.length-b,p=this.bounds,m=p[0],w=p[1],u=h-f;this._time.push(h);for(var S=b-1;S>=0;--S)v.push(n(m[S],w[S],v[y]+u*g[y])),g.push(0),y+=1}}},7080:function(d){function s(y,p,m,w,u,S){this._color=y,this.key=p,this.value=m,this.left=w,this.right=u,this._count=S}function t(y){return new s(y._color,y.key,y.value,y.left,y.right,y._count)}function o(y,p){return new s(y,p.key,p.value,p.left,p.right,p._count)}function r(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function n(y,p){this._compare=y,this.root=p}d.exports=function(y){return new n(y||g,null)};var a=n.prototype;function i(y,p){var m;return p.left&&(m=i(y,p.left))?m:(m=y(p.key,p.value))||(p.right?i(y,p.right):void 0)}function c(y,p,m,w){if(p(y,w.key)<=0){var u;if(w.left&&(u=c(y,p,m,w.left))||(u=m(w.key,w.value)))return u}if(w.right)return c(y,p,m,w.right)}function h(y,p,m,w,u){var S,_=m(y,u.key),E=m(p,u.key);if(_<=0&&(u.left&&(S=h(y,p,m,w,u.left))||E>0&&(S=w(u.key,u.value))))return S;if(E>0&&u.right)return h(y,p,m,w,u.right)}function f(y,p){this.tree=y,this._stack=p}Object.defineProperty(a,"keys",{get:function(){var y=[];return this.forEach(function(p,m){y.push(p)}),y}}),Object.defineProperty(a,"values",{get:function(){var y=[];return this.forEach(function(p,m){y.push(m)}),y}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(y,p){for(var m=this._compare,w=this.root,u=[],S=[];w;){var _=m(y,w.key);u.push(w),S.push(_),w=_<=0?w.left:w.right}u.push(new s(0,y,p,null,null,1));for(var E=u.length-2;E>=0;--E)w=u[E],S[E]<=0?u[E]=new s(w._color,w.key,w.value,u[E+1],w.right,w._count+1):u[E]=new s(w._color,w.key,w.value,w.left,u[E+1],w._count+1);for(E=u.length-1;E>1;--E){var L=u[E-1];if(w=u[E],L._color===1||w._color===1)break;var C=u[E-2];if(C.left===L)if(L.left===w){if(!(P=C.right)||P._color!==0){C._color=0,C.left=L.right,L._color=1,L.right=C,u[E-2]=L,u[E-1]=w,r(C),r(L),E>=3&&((I=u[E-3]).left===C?I.left=L:I.right=L);break}L._color=1,C.right=o(1,P),C._color=0,E-=1}else{if(!(P=C.right)||P._color!==0){L.right=w.left,C._color=0,C.left=w.right,w._color=1,w.left=L,w.right=C,u[E-2]=w,u[E-1]=L,r(C),r(L),r(w),E>=3&&((I=u[E-3]).left===C?I.left=w:I.right=w);break}L._color=1,C.right=o(1,P),C._color=0,E-=1}else if(L.right===w){if(!(P=C.left)||P._color!==0){C._color=0,C.right=L.left,L._color=1,L.left=C,u[E-2]=L,u[E-1]=w,r(C),r(L),E>=3&&((I=u[E-3]).right===C?I.right=L:I.left=L);break}L._color=1,C.left=o(1,P),C._color=0,E-=1}else{var P;if(!(P=C.left)||P._color!==0){var I;L.left=w.right,C._color=0,C.right=w.left,w._color=1,w.right=L,w.left=C,u[E-2]=w,u[E-1]=L,r(C),r(L),r(w),E>=3&&((I=u[E-3]).right===C?I.right=w:I.left=w);break}L._color=1,C.left=o(1,P),C._color=0,E-=1}}return u[0]._color=1,new n(m,u[0])},a.forEach=function(y,p,m){if(this.root)switch(arguments.length){case 1:return i(y,this.root);case 2:return c(p,this._compare,y,this.root);case 3:return this._compare(p,m)>=0?void 0:h(p,m,this._compare,y,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var y=[],p=this.root;p;)y.push(p),p=p.left;return new f(this,y)}}),Object.defineProperty(a,"end",{get:function(){for(var y=[],p=this.root;p;)y.push(p),p=p.right;return new f(this,y)}}),a.at=function(y){if(y<0)return new f(this,[]);for(var p=this.root,m=[];;){if(m.push(p),p.left){if(y<p.left._count){p=p.left;continue}y-=p.left._count}if(!y)return new f(this,m);if(y-=1,!p.right||y>=p.right._count)break;p=p.right}return new f(this,[])},a.ge=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S<=0&&(u=w.length),m=S<=0?m.left:m.right}return w.length=u,new f(this,w)},a.gt=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S<0&&(u=w.length),m=S<0?m.left:m.right}return w.length=u,new f(this,w)},a.lt=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S>0&&(u=w.length),m=S<=0?m.left:m.right}return w.length=u,new f(this,w)},a.le=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S>=0&&(u=w.length),m=S<0?m.left:m.right}return w.length=u,new f(this,w)},a.find=function(y){for(var p=this._compare,m=this.root,w=[];m;){var u=p(y,m.key);if(w.push(m),u===0)return new f(this,w);m=u<=0?m.left:m.right}return new f(this,[])},a.remove=function(y){var p=this.find(y);return p?p.remove():this},a.get=function(y){for(var p=this._compare,m=this.root;m;){var w=p(y,m.key);if(w===0)return m.value;m=w<=0?m.left:m.right}};var b=f.prototype;function v(y,p){y.key=p.key,y.value=p.value,y.left=p.left,y.right=p.right,y._color=p._color,y._count=p._count}function g(y,p){return y<p?-1:y>p?1:0}Object.defineProperty(b,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(b,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),b.clone=function(){return new f(this.tree,this._stack.slice())},b.remove=function(){var y=this._stack;if(y.length===0)return this.tree;var p=new Array(y.length),m=y[y.length-1];p[p.length-1]=new s(m._color,m.key,m.value,m.left,m.right,m._count);for(var w=y.length-2;w>=0;--w)(m=y[w]).left===y[w+1]?p[w]=new s(m._color,m.key,m.value,p[w+1],m.right,m._count):p[w]=new s(m._color,m.key,m.value,m.left,p[w+1],m._count);if((m=p[p.length-1]).left&&m.right){var u=p.length;for(m=m.left;m.right;)p.push(m),m=m.right;var S=p[u-1];for(p.push(new s(m._color,S.key,S.value,m.left,m.right,m._count)),p[u-1].key=m.key,p[u-1].value=m.value,w=p.length-2;w>=u;--w)m=p[w],p[w]=new s(m._color,m.key,m.value,m.left,p[w+1],m._count);p[u-1].left=p[u]}if((m=p[p.length-1])._color===0){var _=p[p.length-2];for(_.left===m?_.left=null:_.right===m&&(_.right=null),p.pop(),w=0;w<p.length;++w)p[w]._count--;return new n(this.tree._compare,p[0])}if(m.left||m.right){for(m.left?v(m,m.left):m.right&&v(m,m.right),m._color=1,w=0;w<p.length-1;++w)p[w]._count--;return new n(this.tree._compare,p[0])}if(p.length===1)return new n(this.tree._compare,null);for(w=0;w<p.length;++w)p[w]._count--;var E=p[p.length-2];return function(L){for(var C,P,I,U,z=L.length-1;z>=0;--z){if(C=L[z],z===0)return void(C._color=1);if((P=L[z-1]).left===C){if((I=P.right).right&&I.right._color===0)return U=(I=P.right=t(I)).right=t(I.right),P.right=I.left,I.left=P,I.right=U,I._color=P._color,C._color=1,P._color=1,U._color=1,r(P),r(I),z>1&&((H=L[z-2]).left===P?H.left=I:H.right=I),void(L[z-1]=I);if(I.left&&I.left._color===0)return U=(I=P.right=t(I)).left=t(I.left),P.right=U.left,I.left=U.right,U.left=P,U.right=I,U._color=P._color,P._color=1,I._color=1,C._color=1,r(P),r(I),r(U),z>1&&((H=L[z-2]).left===P?H.left=U:H.right=U),void(L[z-1]=U);if(I._color===1){if(P._color===0)return P._color=1,void(P.right=o(0,I));P.right=o(0,I);continue}I=t(I),P.right=I.left,I.left=P,I._color=P._color,P._color=0,r(P),r(I),z>1&&((H=L[z-2]).left===P?H.left=I:H.right=I),L[z-1]=I,L[z]=P,z+1<L.length?L[z+1]=C:L.push(C),z+=2}else{if((I=P.left).left&&I.left._color===0)return U=(I=P.left=t(I)).left=t(I.left),P.left=I.right,I.right=P,I.left=U,I._color=P._color,C._color=1,P._color=1,U._color=1,r(P),r(I),z>1&&((H=L[z-2]).right===P?H.right=I:H.left=I),void(L[z-1]=I);if(I.right&&I.right._color===0)return U=(I=P.left=t(I)).right=t(I.right),P.left=U.right,I.right=U.left,U.right=P,U.left=I,U._color=P._color,P._color=1,I._color=1,C._color=1,r(P),r(I),r(U),z>1&&((H=L[z-2]).right===P?H.right=U:H.left=U),void(L[z-1]=U);if(I._color===1){if(P._color===0)return P._color=1,void(P.left=o(0,I));P.left=o(0,I);continue}var H;I=t(I),P.left=I.right,I.right=P,I._color=P._color,P._color=0,r(P),r(I),z>1&&((H=L[z-2]).right===P?H.right=I:H.left=I),L[z-1]=I,L[z]=P,z+1<L.length?L[z+1]=C:L.push(C),z+=2}}}(p),E.left===m?E.left=null:E.right=null,new n(this.tree._compare,p[0])},Object.defineProperty(b,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(b,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(b,"index",{get:function(){var y=0,p=this._stack;if(p.length===0){var m=this.tree.root;return m?m._count:0}p[p.length-1].left&&(y=p[p.length-1].left._count);for(var w=p.length-2;w>=0;--w)p[w+1]===p[w].right&&(++y,p[w].left&&(y+=p[w].left._count));return y},enumerable:!0}),b.next=function(){var y=this._stack;if(y.length!==0){var p=y[y.length-1];if(p.right)for(p=p.right;p;)y.push(p),p=p.left;else for(y.pop();y.length>0&&y[y.length-1].right===p;)p=y[y.length-1],y.pop()}},Object.defineProperty(b,"hasNext",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].right)return!0;for(var p=y.length-1;p>0;--p)if(y[p-1].left===y[p])return!0;return!1}}),b.update=function(y){var p=this._stack;if(p.length===0)throw new Error("Can't update empty node!");var m=new Array(p.length),w=p[p.length-1];m[m.length-1]=new s(w._color,w.key,y,w.left,w.right,w._count);for(var u=p.length-2;u>=0;--u)(w=p[u]).left===p[u+1]?m[u]=new s(w._color,w.key,w.value,m[u+1],w.right,w._count):m[u]=new s(w._color,w.key,w.value,w.left,m[u+1],w._count);return new n(this.tree._compare,m[0])},b.prev=function(){var y=this._stack;if(y.length!==0){var p=y[y.length-1];if(p.left)for(p=p.left;p;)y.push(p),p=p.right;else for(y.pop();y.length>0&&y[y.length-1].left===p;)p=y[y.length-1],y.pop()}},Object.defineProperty(b,"hasPrev",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].left)return!0;for(var p=y.length-1;p>0;--p)if(y[p-1].right===y[p])return!0;return!1}})},7453:function(d,s,t){d.exports=function(_,E){var L=new f(_);return L.update(E),L};var o=t(9557),r=t(1681),n=t(1011),a=t(2864),i=t(8468),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function h(_,E){return _[0]=E[0],_[1]=E[1],_[2]=E[2],_}function f(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(_)}var b=f.prototype;function v(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}b.update=function(_){function E(K,G,V){if(V in _){var W,J=_[V],X=this[V];(K?Array.isArray(J)&&Array.isArray(J[0]):Array.isArray(J))?this[V]=W=[G(J[0]),G(J[1]),G(J[2])]:this[V]=W=[G(J),G(J),G(J)];for(var ee=0;ee<3;++ee)if(W[ee]!==X[ee])return!0}return!1}_=_||{};var L,C=E.bind(this,!1,Number),P=E.bind(this,!1,Boolean),I=E.bind(this,!1,String),U=E.bind(this,!0,function(K){if(Array.isArray(K)){if(K.length===3)return[+K[0],+K[1],+K[2],1];if(K.length===4)return[+K[0],+K[1],+K[2],+K[3]]}return[0,0,0,1]}),z=!1,H=!1;if("bounds"in _)for(var F=_.bounds,N=0;N<2;++N)for(var B=0;B<3;++B)F[N][B]!==this.bounds[N][B]&&(H=!0),this.bounds[N][B]=F[N][B];if("ticks"in _)for(L=_.ticks,z=!0,this.autoTicks=!1,N=0;N<3;++N)this.tickSpacing[N]=0;else C("tickSpacing")&&(this.autoTicks=!0,H=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),H=!0,z=!0,this._firstInit=!1),H&&this.autoTicks&&(L=i.create(this.bounds,this.tickSpacing),z=!0),z){for(N=0;N<3;++N)L[N].sort(function(K,G){return K.x-G.x});i.equal(L,this.ticks)?z=!1:this.ticks=L}P("tickEnable"),I("tickFont")&&(z=!0),C("tickSize"),C("tickAngle"),C("tickPad"),U("tickColor");var j=I("labels");I("labelFont")&&(j=!0),P("labelEnable"),C("labelSize"),C("labelPad"),U("labelColor"),P("lineEnable"),P("lineMirror"),C("lineWidth"),U("lineColor"),P("lineTickEnable"),P("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),U("lineTickColor"),P("gridEnable"),C("gridWidth"),U("gridColor"),P("zeroEnable"),U("zeroLineColor"),C("zeroLineWidth"),P("backgroundEnable"),U("backgroundColor"),this._text?this._text&&(j||z)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=o(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&z&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var g=[new v,new v,new v];function y(_,E,L,C,P){for(var I=_.primalOffset,U=_.primalMinor,z=_.mirrorOffset,H=_.mirrorMinor,F=C[E],N=0;N<3;++N)if(E!==N){var B=I,j=z,K=U,G=H;F&1<<N&&(B=z,j=I,K=H,G=U),B[N]=L[0][N],j[N]=L[1][N],P[N]>0?(K[N]=-1,G[N]=0):(K[N]=0,G[N]=1)}}var p=[0,0,0],m={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0},b.isTransparent=function(){return!1},b.drawTransparent=function(_){};var w=[0,0,0],u=[0,0,0],S=[0,0,0];b.draw=function(_){_=_||m;for(var E=this.gl,L=_.model||c,C=_.view||c,P=_.projection||c,I=this.bounds,U=_._ortho||!1,z=a(L,C,P,I,U),H=z.cubeEdges,F=z.axis,N=C[12],B=C[13],j=C[14],K=C[15],G=(U?2:1)*this.pixelRatio*(P[3]*N+P[7]*B+P[11]*j+P[15]*K)/E.drawingBufferHeight,V=0;V<3;++V)this.lastCubeProps.cubeEdges[V]=H[V],this.lastCubeProps.axis[V]=F[V];var W=g;for(V=0;V<3;++V)y(g[V],V,this.bounds,H,F);E=this.gl;var J,X,ee,re=p;for(V=0;V<3;++V)this.backgroundEnable[V]?re[V]=F[V]:re[V]=0;for(this._background.draw(L,C,P,I,re,this.backgroundColor),this._lines.bind(L,C,P,this),V=0;V<3;++V){var ie=[0,0,0];F[V]>0?ie[V]=I[1][V]:ie[V]=I[0][V];for(var se=0;se<2;++se){var fe=(V+1+se)%3,ye=(V+1+(1^se))%3;this.gridEnable[fe]&&this._lines.drawGrid(fe,ye,this.bounds,ie,this.gridColor[fe],this.gridWidth[fe]*this.pixelRatio)}for(se=0;se<2;++se)fe=(V+1+se)%3,ye=(V+1+(1^se))%3,this.zeroEnable[ye]&&Math.min(I[0][ye],I[1][ye])<=0&&Math.max(I[0][ye],I[1][ye])>=0&&this._lines.drawZero(fe,ye,this.bounds,ie,this.zeroLineColor[ye],this.zeroLineWidth[ye]*this.pixelRatio)}for(V=0;V<3;++V){this.lineEnable[V]&&this._lines.drawAxisLine(V,this.bounds,W[V].primalOffset,this.lineColor[V],this.lineWidth[V]*this.pixelRatio),this.lineMirror[V]&&this._lines.drawAxisLine(V,this.bounds,W[V].mirrorOffset,this.lineColor[V],this.lineWidth[V]*this.pixelRatio);var ge=h(w,W[V].primalMinor),he=h(u,W[V].mirrorMinor),ve=this.lineTickLength;for(se=0;se<3;++se){var Ie=G/L[5*se];ge[se]*=ve[se]*Ie,he[se]*=ve[se]*Ie}this.lineTickEnable[V]&&this._lines.drawAxisTicks(V,W[V].primalOffset,ge,this.lineTickColor[V],this.lineTickWidth[V]*this.pixelRatio),this.lineTickMirror[V]&&this._lines.drawAxisTicks(V,W[V].mirrorOffset,he,this.lineTickColor[V],this.lineTickWidth[V]*this.pixelRatio)}function xe(ce){(ee=[0,0,0])[ce]=1}function Ae(ce,me,Me){var Re=(ce+1)%3,Ce=(ce+2)%3,ze=me[Re],le=me[Ce],de=Me[Re],be=Me[Ce];ze>0&&be>0||ze>0&&be<0||ze<0&&be>0||ze<0&&be<0?xe(Re):(le>0&&de>0||le>0&&de<0||le<0&&de>0||le<0&&de<0)&&xe(Ce)}for(this._lines.unbind(),this._text.bind(L,C,P,this.pixelRatio),V=0;V<3;++V){var Se=W[V].primalMinor,Te=W[V].mirrorMinor,Q=h(S,W[V].primalOffset);for(se=0;se<3;++se)this.lineTickEnable[V]&&(Q[se]+=G*Se[se]*Math.max(this.lineTickLength[se],0)/L[5*se]);var oe=[0,0,0];if(oe[V]=1,this.tickEnable[V]){for(this.tickAngle[V]===-3600?(this.tickAngle[V]=0,this.tickAlign[V]="auto"):this.tickAlign[V]=-1,X=1,(J=[this.tickAlign[V],.5,X])[0]==="auto"?J[0]=0:J[0]=parseInt(""+J[0]),ee=[0,0,0],Ae(V,Se,Te),se=0;se<3;++se)Q[se]+=G*Se[se]*this.tickPad[se]/L[5*se];this._text.drawTicks(V,this.tickSize[V],this.tickAngle[V],Q,this.tickColor[V],oe,ee,J)}if(this.labelEnable[V]){for(X=0,ee=[0,0,0],this.labels[V].length>4&&(xe(V),X=1),(J=[this.labelAlign[V],.5,X])[0]==="auto"?J[0]=0:J[0]=parseInt(""+J[0]),se=0;se<3;++se)Q[se]+=G*Se[se]*this.labelPad[se]/L[5*se];Q[V]+=.5*(I[0][V]+I[1][V]),this._text.drawLabel(V,this.labelSize[V],this.labelAngle[V],Q,this.labelColor[V],[0,0,0],ee,J)}}this._text.unbind()},b.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(d,s,t){d.exports=function(c){for(var h=[],f=[],b=0,v=0;v<3;++v)for(var g=(v+1)%3,y=(v+2)%3,p=[0,0,0],m=[0,0,0],w=-1;w<=1;w+=2){f.push(b,b+2,b+1,b+1,b+2,b+3),p[v]=w,m[v]=w;for(var u=-1;u<=1;u+=2){p[g]=u;for(var S=-1;S<=1;S+=2)p[y]=S,h.push(p[0],p[1],p[2],m[0],m[1],m[2]),b+=1}var _=g;g=y,y=_}var E=o(c,new Float32Array(h)),L=o(c,new Uint16Array(f),c.ELEMENT_ARRAY_BUFFER),C=r(c,[{buffer:E,type:c.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:c.FLOAT,size:3,offset:12,stride:24}],L),P=n(c);return P.attributes.position.location=0,P.attributes.normal.location=1,new a(c,E,C,P)};var o=t(5827),r=t(2944),n=t(1943).bg;function a(c,h,f,b){this.gl=c,this.buffer=h,this.vao=f,this.shader=b}var i=a.prototype;i.draw=function(c,h,f,b,v,g){for(var y=!1,p=0;p<3;++p)y=y||v[p];if(y){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:c,view:h,projection:f,bounds:b,enable:v,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(d,s,t){d.exports=function(u,S,_,E,L){r(i,S,u),r(i,_,i);for(var C=0,P=0;P<2;++P){f[2]=E[P][2];for(var I=0;I<2;++I){f[1]=E[I][1];for(var U=0;U<2;++U)f[0]=E[U][0],v(c[C],f,i),C+=1}}var z=-1;for(P=0;P<8;++P){for(var H=c[P][3],F=0;F<3;++F)h[P][F]=c[P][F]/H;L&&(h[P][2]*=-1),H<0&&(z<0||h[P][2]<h[z][2])&&(z=P)}if(z<0){z=0;for(var N=0;N<3;++N){for(var B=(N+2)%3,j=(N+1)%3,K=-1,G=-1,V=0;V<2;++V){var W=(X=V<<N)+(V<<B)+(1-V<<j),J=X+(1-V<<B)+(V<<j);a(h[X],h[W],h[J],b)<0||(V?K=1:G=1)}if(K<0||G<0)G>K&&(z|=1<<N);else{for(V=0;V<2;++V){W=(X=V<<N)+(V<<B)+(1-V<<j),J=X+(1-V<<B)+(V<<j);var X,ee=y([c[X],c[W],c[J],c[X+(1<<B)+(1<<j)]]);V?K=ee:G=ee}G>K&&(z|=1<<N)}}}var re=7^z,ie=-1;for(P=0;P<8;++P)P!==z&&P!==re&&(ie<0||h[ie][1]>h[P][1])&&(ie=P);var se=-1;for(P=0;P<3;++P)(ye=ie^1<<P)!==z&&ye!==re&&(se<0&&(se=ye),(j=h[ye])[0]<h[se][0]&&(se=ye));var fe=-1;for(P=0;P<3;++P){var ye;(ye=ie^1<<P)!==z&&ye!==re&&ye!==se&&(fe<0&&(fe=ye),(j=h[ye])[0]>h[fe][0]&&(fe=ye))}var ge=p;ge[0]=ge[1]=ge[2]=0,ge[o.log2(se^ie)]=ie&se,ge[o.log2(ie^fe)]=ie&fe;var he=7^fe;he===z||he===re?(he=7^se,ge[o.log2(fe^he)]=he&fe):ge[o.log2(se^he)]=he&se;var ve=m,Ie=z;for(N=0;N<3;++N)ve[N]=Ie&1<<N?-1:1;return w};var o=t(2288),r=t(104),n=t(4670),a=t(417),i=new Array(16),c=new Array(8),h=new Array(8),f=new Array(3),b=[0,0,0];function v(u,S,_){for(var E=0;E<4;++E){u[E]=_[12+E];for(var L=0;L<3;++L)u[E]+=S[L]*_[4*L+E]}}(function(){for(var u=0;u<8;++u)c[u]=[1,1,1,1],h[u]=[1,1,1]})();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function y(u){for(var S=0;S<g.length;++S)if((u=n.positive(u,g[S])).length<3)return 0;var _=u[0],E=_[0]/_[3],L=_[1]/_[3],C=0;for(S=1;S+1<u.length;++S){var P=u[S],I=u[S+1],U=P[0]/P[3]-E,z=P[1]/P[3]-L,H=I[0]/I[3]-E,F=I[1]/I[3]-L;C+=Math.abs(U*F-z*H)}return C}var p=[1,1,1],m=[0,0,0],w={cubeEdges:p,axis:m}},1681:function(d,s,t){d.exports=function(p,m,w){var u=[],S=[0,0,0],_=[0,0,0],E=[0,0,0],L=[0,0,0];u.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var P=u.length/3|0,I=0;I<w[C].length;++I){var U=+w[C][I].x;u.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1)}var z=u.length/3|0;S[C]=P,_[C]=z-P,P=u.length/3|0;for(var H=0;H<w[C].length;++H)U=+w[C][H].x,u.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1);z=u.length/3|0,E[C]=P,L[C]=z-P}var F=o(p,new Float32Array(u)),N=r(p,[{buffer:F,type:p.FLOAT,size:3,stride:0,offset:0}]),B=n(p);return B.attributes.position.location=0,new g(p,F,N,B,_,S,L,E)};var o=t(5827),r=t(2944),n=t(1943).j,a=[0,0,0],i=[0,0,0],c=[0,0,0],h=[0,0,0],f=[1,1];function b(p){return p[0]=p[1]=p[2]=0,p}function v(p,m){return p[0]=m[0],p[1]=m[1],p[2]=m[2],p}function g(p,m,w,u,S,_,E,L){this.gl=p,this.vertBuffer=m,this.vao=w,this.shader=u,this.tickCount=S,this.tickOffset=_,this.gridCount=E,this.gridOffset=L}var y=g.prototype;y.bind=function(p,m,w){this.shader.bind(),this.shader.uniforms.model=p,this.shader.uniforms.view=m,this.shader.uniforms.projection=w,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=f,this.vao.bind()},y.unbind=function(){this.vao.unbind()},y.drawAxisLine=function(p,m,w,u,S){var _=b(i);this.shader.uniforms.majorAxis=i,_[p]=m[1][p]-m[0][p],this.shader.uniforms.minorAxis=_;var E,L=v(h,w);L[p]+=m[0][p],this.shader.uniforms.offset=L,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=u,(E=b(c))[(p+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=b(c))[(p+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},y.drawAxisTicks=function(p,m,w,u,S){if(this.tickCount[p]){var _=b(a);_[p]=1,this.shader.uniforms.majorAxis=_,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=u,this.shader.uniforms.lineWidth=S;var E=b(c);E[p]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p])}},y.drawGrid=function(p,m,w,u,S,_){if(this.gridCount[p]){var E=b(i);E[m]=w[1][m]-w[0][m],this.shader.uniforms.minorAxis=E;var L=v(h,u);L[m]+=w[0][m],this.shader.uniforms.offset=L;var C=b(a);C[p]=1,this.shader.uniforms.majorAxis=C;var P=b(c);P[p]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[p],this.gridOffset[p])}},y.drawZero=function(p,m,w,u,S,_){var E=b(i);this.shader.uniforms.majorAxis=E,E[p]=w[1][p]-w[0][p],this.shader.uniforms.minorAxis=E;var L=v(h,u);L[p]+=w[0][p],this.shader.uniforms.offset=L;var C=b(c);C[m]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},y.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.j=function(b){return r(b,n,a,null,[{name:"position",type:"vec3"}])};var i=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),c=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.f=function(b){return r(b,i,c,null,[{name:"position",type:"vec3"}])};var h=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),f=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(b){return r(b,h,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(d,s,t){d.exports=function(v,g,y,p,m,w){var u=o(v),S=r(v,[{buffer:u,size:3}]),_=a(v);_.attributes.position.location=0;var E=new h(v,_,u,S);return E.update(g,y,p,m,w),E};var o=t(5827),r=t(2944),n=t(875),a=t(1943).f,i=window||k.global||{},c=i.__TEXT_CACHE||{};function h(v,g,y,p){this.gl=v,this.shader=g,this.buffer=y,this.vao=p,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}i.__TEXT_CACHE={};var f=h.prototype,b=[0,0];f.bind=function(v,g,y,p){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=v,m.view=g,m.projection=y,m.pixelScale=p,b[0]=this.gl.drawingBufferWidth,b[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=b},f.unbind=function(){this.vao.unbind()},f.update=function(v,g,y,p,m){var w=[];function u(U,z,H,F,N,B){var j=c[H];j||(j=c[H]={});var K=j[z];K||(K=j[z]=function(se,fe){try{return n(se,fe)}catch(ye){return console.warn('error vectorizing text:"'+se+'" error:',ye),{cells:[],positions:[]}}}(z,{triangles:!0,font:H,textAlign:"center",textBaseline:"middle",lineSpacing:N,styletags:B}));for(var G=(F||12)/12,V=K.positions,W=K.cells,J=0,X=W.length;J<X;++J)for(var ee=W[J],re=2;re>=0;--re){var ie=V[ee[re]];w.push(G*ie[0],-G*ie[1],U)}}for(var S=[0,0,0],_=[0,0,0],E=[0,0,0],L=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){E[P]=w.length/3|0,u(.5*(v[0][P]+v[1][P]),g[P],y[P],12,1.25,C),L[P]=(w.length/3|0)-E[P],S[P]=w.length/3|0;for(var I=0;I<p[P].length;++I)p[P][I].text&&u(p[P][I].x,p[P][I].text,p[P][I].font||m,p[P][I].fontSize||12,1.25,C);_[P]=(w.length/3|0)-S[P]}this.buffer.update(w),this.tickOffset=S,this.tickCount=_,this.labelOffset=E,this.labelCount=L},f.drawTicks=function(v,g,y,p,m,w,u,S){this.tickCount[v]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=g,this.shader.uniforms.offset=p,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v]))},f.drawLabel=function(v,g,y,p,m,w,u,S){this.labelCount[v]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=g,this.shader.uniforms.offset=p,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[v],this.labelOffset[v]))},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(d,s){function t(o,r){var n=o+"",a=n.indexOf("."),i=0;a>=0&&(i=n.length-a-1);var c=Math.pow(10,i),h=Math.round(o*r*c),f=h+"";if(f.indexOf("e")>=0)return f;var b=h/c,v=h%c;h<0?(b=0|-Math.ceil(b),v=0|-v):(b=0|Math.floor(b),v|=0);var g=""+b;if(h<0&&(g="-"+g),i){for(var y=""+v;y.length<i;)y="0"+y;return g+"."+y}return g}s.create=function(o,r){for(var n=[],a=0;a<3;++a){for(var i=[],c=(o[0][a],o[1][a],0);c*r[a]<=o[1][a];++c)i.push({x:c*r[a],text:t(r[a],c)});for(c=-1;c*r[a]>=o[0][a];--c)i.push({x:c*r[a],text:t(r[a],c)});n.push(i)}return n},s.equal=function(o,r){for(var n=0;n<3;++n){if(o[n].length!==r[n].length)return!1;for(var a=0;a<o[n].length;++a){var i=o[n][a],c=r[n][a];if(i.x!==c.x||i.text!==c.text||i.font!==c.font||i.fontColor!==c.fontColor||i.fontSize!==c.fontSize||i.dx!==c.dx||i.dy!==c.dy)return!1}}return!0}},2771:function(d,s,t){d.exports=function(w,u,S,_,E){var L=u.model||h,C=u.view||h,P=u.projection||h,I=u._ortho||!1,U=w.bounds,z=(E=E||n(L,C,P,U,I)).axis;a(f,C,L),a(f,P,f);for(var H=p,F=0;F<3;++F)H[F].lo=1/0,H[F].hi=-1/0,H[F].pixelsPerDataUnit=1/0;var N=o(i(f,f));i(f,f);for(var B=0;B<3;++B){var j=(B+1)%3,K=(B+2)%3,G=m;e:for(F=0;F<2;++F){var V=[];if(z[B]<0!=!!F){G[B]=U[F][B];for(var W=0;W<2;++W){G[j]=U[W^F][j];for(var J=0;J<2;++J)G[K]=U[J^W^F][K],V.push(G.slice())}var X=I?5:4;for(W=X;W===X;++W){if(V.length===0)continue e;V=r.positive(V,N[W])}for(W=0;W<V.length;++W){K=V[W];var ee=y(m,f,K,S,_);for(J=0;J<3;++J)H[J].lo=Math.min(H[J].lo,K[J]),H[J].hi=Math.max(H[J].hi,K[J]),J!==B&&(H[J].pixelsPerDataUnit=Math.min(H[J].pixelsPerDataUnit,Math.abs(ee[J])))}}}}return H};var o=t(5795),r=t(4670),n=t(2864),a=t(104),i=t(2142),c=t(6342),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=new Float32Array(16);function b(w,u,S){this.lo=w,this.hi=u,this.pixelsPerDataUnit=S}var v=[0,0,0,1],g=[0,0,0,1];function y(w,u,S,_,E){for(var L=0;L<3;++L){for(var C=v,P=g,I=0;I<3;++I)P[I]=C[I]=S[I];P[3]=C[3]=1,P[L]+=1,c(P,P,u),P[3]<0&&(w[L]=1/0),C[L]-=1,c(C,C,u),C[3]<0&&(w[L]=1/0);var U=(C[0]/C[3]-P[0]/P[3])*_,z=(C[1]/C[3]-P[1]/P[3])*E;w[L]=.25*Math.sqrt(U*U+z*z)}return w}var p=[new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0)],m=[0,0,0]},5827:function(d,s,t){var o=t(5306),r=t(7498),n=t(5050),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function i(b,v,g,y,p){this.gl=b,this.type=v,this.handle=g,this.length=y,this.usage=p}var c=i.prototype;function h(b,v,g,y,p,m){var w=p.length*p.BYTES_PER_ELEMENT;if(m<0)return b.bufferData(v,p,y),w;if(w+m>g)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return b.bufferSubData(v,m,p),g}function f(b,v){for(var g=o.malloc(b.length,v),y=b.length,p=0;p<y;++p)g[p]=b[p];return g}c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)},c.update=function(b,v){if(typeof v!="number"&&(v=-1),this.bind(),typeof b=="object"&&b.shape!==void 0){var g=b.dtype;if(a.indexOf(g)<0&&(g="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(g=gl.getExtension("OES_element_index_uint")&&g!=="uint16"?"uint32":"uint16"),g===b.dtype&&function(w,u){for(var S=1,_=u.length-1;_>=0;--_){if(u[_]!==S)return!1;S*=w[_]}return!0}(b.shape,b.stride))b.offset===0&&b.data.length===b.shape[0]?this.length=h(this.gl,this.type,this.length,this.usage,b.data,v):this.length=h(this.gl,this.type,this.length,this.usage,b.data.subarray(b.offset,b.shape[0]),v);else{var y=o.malloc(b.size,g),p=n(y,b.shape);r.assign(p,b),this.length=h(this.gl,this.type,this.length,this.usage,v<0?y:y.subarray(0,b.size),v),o.free(y)}}else if(Array.isArray(b)){var m;m=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(b,"uint16"):f(b,"float32"),this.length=h(this.gl,this.type,this.length,this.usage,v<0?m:m.subarray(0,b.length),v),o.free(m)}else if(typeof b=="object"&&typeof b.length=="number")this.length=h(this.gl,this.type,this.length,this.usage,b,v);else{if(typeof b!="number"&&b!==void 0)throw new Error("gl-buffer: Invalid data type");if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(b|=0)<=0&&(b=1),this.gl.bufferData(this.type,0|b,this.usage),this.length=b}},d.exports=function(b,v,g,y){if(g=g||b.ARRAY_BUFFER,y=y||b.DYNAMIC_DRAW,g!==b.ARRAY_BUFFER&&g!==b.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==b.DYNAMIC_DRAW&&y!==b.STATIC_DRAW&&y!==b.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var p=b.createBuffer(),m=new i(b,g,p,0,y);return m.update(v),m}},1140:function(d,s,t){var o=t(2858);d.exports=function(n,a){var i=n.positions,c=n.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),h;for(var f=0,b=1/0,v=-1/0,g=1/0,y=-1/0,p=1/0,m=-1/0,w=null,u=null,S=[],_=1/0,E=!1,L=0;L<i.length;L++){var C=i[L];b=Math.min(C[0],b),v=Math.max(C[0],v),g=Math.min(C[1],g),y=Math.max(C[1],y),p=Math.min(C[2],p),m=Math.max(C[2],m);var P=c[L];if(o.length(P)>f&&(f=o.length(P)),L){var I=2*o.distance(w,C)/(o.length(u)+o.length(P));I?(_=Math.min(_,I),E=!1):E=!0}E||(w=C,u=P),S.push(P)}var U=[b,g,p],z=[v,y,m];a&&(a[0]=U,a[1]=z),f===0&&(f=1);var H=1/f;isFinite(_)||(_=1),h.vectorScale=_;var F=n.coneSize||.5;n.absoluteConeSize&&(F=n.absoluteConeSize*H),h.coneScale=F,L=0;for(var N=0;L<i.length;L++)for(var B=(C=i[L])[0],j=C[1],K=C[2],G=S[L],V=o.length(G)*H,W=0;W<8;W++){h.positions.push([B,j,K,N++]),h.positions.push([B,j,K,N++]),h.positions.push([B,j,K,N++]),h.positions.push([B,j,K,N++]),h.positions.push([B,j,K,N++]),h.positions.push([B,j,K,N++]),h.vectors.push(G),h.vectors.push(G),h.vectors.push(G),h.vectors.push(G),h.vectors.push(G),h.vectors.push(G),h.vertexIntensity.push(V,V,V),h.vertexIntensity.push(V,V,V);var J=h.positions.length;h.cells.push([J-6,J-5,J-4],[J-3,J-2,J-1])}return h};var r=t(7234);d.exports.createMesh=t(5028),d.exports.createConeMesh=function(n,a){return d.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},5028:function(d,s,t){var o=t(5158),r=t(5827),n=t(2944),a=t(8931),i=t(104),c=t(7437),h=t(5050),f=t(9156),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(m,w,u,S,_,E,L,C,P,I,U){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=u,this.pickShader=S,this.trianglePositions=_,this.triangleVectors=E,this.triangleColors=C,this.triangleUVs=P,this.triangleIds=L,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=U,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=b,this._view=b,this._projection=b,this._resolution=[1,1]}var g=v.prototype;function y(m,w){var u=o(m,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return u.attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.vector.location=4,u}function p(m,w){var u=o(m,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return u.attributes.position.location=0,u.attributes.id.location=1,u.attributes.vector.location=4,u}g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(m){this.pickId=m},g.update=function(m){m=m||{};var w=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),m.tubeScale!==void 0&&(this.tubeScale=m.tubeScale),m.vectorScale!==void 0&&(this.vectorScale=m.vectorScale),m.coneScale!==void 0&&(this.coneScale=m.coneScale),m.coneOffset!==void 0&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(function(ie){for(var se=f({colormap:ie,nshades:256,format:"rgba"}),fe=new Uint8Array(1024),ye=0;ye<256;++ye){for(var ge=se[ye],he=0;he<3;++he)fe[4*ye+he]=ge[he];fe[4*ye+3]=255*ge[3]}return h(fe,[256,256,4],[4,0,1])}(m.colormap)),this.texture.generateMipmap());var u=m.cells,S=m.positions,_=m.vectors;if(S&&u&&_){var E=[],L=[],C=[],P=[],I=[];this.cells=u,this.positions=S,this.vectors=_;var U=m.meshColor||[1,1,1,1],z=m.vertexIntensity,H=1/0,F=-1/0;if(z)if(m.vertexIntensityBounds)H=+m.vertexIntensityBounds[0],F=+m.vertexIntensityBounds[1];else for(var N=0;N<z.length;++N){var B=z[N];H=Math.min(H,B),F=Math.max(F,B)}else for(N=0;N<S.length;++N)B=S[N][2],H=Math.min(H,B),F=Math.max(F,B);for(this.intensity=z||function(ie){for(var se=ie.length,fe=new Array(se),ye=0;ye<se;++ye)fe[ye]=ie[ye][2];return fe}(S),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=0;N<S.length;++N)for(var j=S[N],K=0;K<3;++K)!isNaN(j[K])&&isFinite(j[K])&&(this.bounds[0][K]=Math.min(this.bounds[0][K],j[K]),this.bounds[1][K]=Math.max(this.bounds[1][K],j[K]));var G=0;e:for(N=0;N<u.length;++N){var V=u[N];if(V.length===3){for(K=0;K<3;++K){j=S[J=V[K]];for(var W=0;W<3;++W)if(isNaN(j[W])||!isFinite(j[W]))continue e}for(K=0;K<3;++K){var J;j=S[J=V[2-K]],E.push(j[0],j[1],j[2],j[3]);var X=_[J];L.push(X[0],X[1],X[2],X[3]||0);var ee,re=U;re.length===3?C.push(re[0],re[1],re[2],1):C.push(re[0],re[1],re[2],re[3]),ee=z?[(z[J]-H)/(F-H),0]:[(j[2]-H)/(F-H),0],P.push(ee[0],ee[1]),I.push(N)}G+=1}}this.triangleCount=G,this.trianglePositions.update(E),this.triangleVectors.update(L),this.triangleColors.update(C),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(I))}},g.drawTransparent=g.draw=function(m){m=m||{};for(var w=this.gl,u=m.model||b,S=m.view||b,_=m.projection||b,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)E[0][L]=Math.max(E[0][L],this.clipBounds[0][L]),E[1][L]=Math.min(E[1][L],this.clipBounds[1][L]);var C={model:u,view:S,projection:_,inverseModel:b.slice(),clipBounds:E,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};C.inverseModel=c(C.inverseModel,C.model),w.disable(w.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(i(P,C.view,C.model),i(P,C.projection,P),c(P,P),L=0;L<3;++L)C.eyePosition[L]=P[12+L]/P[15];var I=P[15];for(L=0;L<3;++L)I+=this.lightPosition[L]*P[4*L+3];for(L=0;L<3;++L){for(var U=P[12+L],z=0;z<3;++z)U+=P[4*z+L]*this.lightPosition[z];C.lightPosition[L]=U/I}if(this.triangleCount>0){var H=this.triShader;H.bind(),H.uniforms=C,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(m){m=m||{};for(var w=this.gl,u=m.model||b,S=m.view||b,_=m.projection||b,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)E[0][L]=Math.max(E[0][L],this.clipBounds[0][L]),E[1][L]=Math.min(E[1][L],this.clipBounds[1][L]);this._model=[].slice.call(u),this._view=[].slice.call(S),this._projection=[].slice.call(_),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var C={model:u,view:S,projection:_,clipBounds:E,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=C,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(m){if(!m||m.id!==this.pickId)return null;var w=m.value[0]+256*m.value[1]+65536*m.value[2],u=this.cells[w],S=this.positions[u[1]].slice(0,3),_={position:S,dataCoordinate:S,index:Math.floor(u[1]/48)};return this.traceType==="cone"?_.index=Math.floor(u[1]/48):this.traceType==="streamtube"&&(_.intensity=this.intensity[u[1]],_.velocity=this.vectors[u[1]].slice(0,3),_.divergence=this.vectors[u[1]][3],_.index=w),_},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},d.exports=function(m,w,u){var S=u.shaders;arguments.length===1&&(m=(w=m).gl);var _=y(m,S),E=p(m,S),L=a(m,h(new Uint8Array([255,255,255,255]),[1,1,4]));L.generateMipmap(),L.minFilter=m.LINEAR_MIPMAP_LINEAR,L.magFilter=m.LINEAR;var C=r(m),P=r(m),I=r(m),U=r(m),z=r(m),H=n(m,[{buffer:C,type:m.FLOAT,size:4},{buffer:z,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:m.FLOAT,size:4},{buffer:U,type:m.FLOAT,size:2},{buffer:P,type:m.FLOAT,size:4}]),F=new v(m,L,_,E,C,P,z,I,U,H,u.traceType||"cone");return F.update(w),F}},7234:function(d,s,t){var o=t(6832),r=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),i=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(d){d.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(d,s,t){var o=t(1950);d.exports=function(r){return o[r]}},3110:function(d,s,t){d.exports=function(v){var g=v.gl,y=o(g),p=r(g,[{buffer:y,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:g.FLOAT,size:3,offset:28,stride:40}]),m=n(g);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var w=new i(g,y,p,m);return w.update(v),w};var o=t(5827),r=t(2944),n=t(7667),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(v,g,y,p){this.gl=v,this.shader=p,this.buffer=g,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var c=i.prototype;function h(v,g){for(var y=0;y<3;++y)v[0][y]=Math.min(v[0][y],g[y]),v[1][y]=Math.max(v[1][y],g[y])}c.isOpaque=function(){return!this.hasAlpha},c.isTransparent=function(){return this.hasAlpha},c.drawTransparent=c.draw=function(v){var g=this.gl,y=this.shader.uniforms;this.shader.bind();var p=y.view=v.view||a,m=y.projection=v.projection||a;y.model=v.model||a,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var w=p[12],u=p[13],S=p[14],_=p[15],E=(v._ortho?2:1)*this.pixelRatio*(m[3]*w+m[7]*u+m[11]*S+m[15]*_)/g.drawingBufferHeight;this.vao.bind();for(var L=0;L<3;++L)g.lineWidth(this.lineWidth[L]*this.pixelRatio),y.capSize=this.capSize[L]*E,this.lineCount[L]&&g.drawArrays(g.LINES,this.lineOffset[L],this.lineCount[L]);this.vao.unbind()};var f=function(){for(var v=new Array(3),g=0;g<3;++g){for(var y=[],p=1;p<=2;++p)for(var m=-1;m<=1;m+=2){var w=[0,0,0];w[(p+g)%3]=m,y.push(w)}v[g]=y}return v}();function b(v,g,y,p){for(var m=f[p],w=0;w<m.length;++w){var u=m[w];v.push(g[0],g[1],g[2],y[0],y[1],y[2],y[3],u[0],u[1],u[2])}return m.length}c.update=function(v){"lineWidth"in(v=v||{})&&(this.lineWidth=v.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in v&&(this.capSize=v.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in v&&(this.opacity=+v.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=v.color||[[0,0,0],[0,0,0],[0,0,0]],y=v.position,p=v.error;if(Array.isArray(g[0])||(g=[g,g,g]),y&&p){var m=[],w=y.length,u=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=u;e:for(var _=0;_<w;++_){for(var E=y[_],L=0;L<3;++L)if(isNaN(E[L])||!isFinite(E[L]))continue e;var C,P=p[_],I=g[S];Array.isArray(I[0])&&(I=g[_]),I.length===3?I=[I[0],I[1],I[2],1]:I.length===4&&(I=[I[0],I[1],I[2],I[3]],!this.hasAlpha&&I[3]<1&&(this.hasAlpha=!0)),isNaN(P[0][S])||isNaN(P[1][S])||(P[0][S]<0&&((C=E.slice())[S]+=P[0][S],m.push(E[0],E[1],E[2],I[0],I[1],I[2],I[3],0,0,0,C[0],C[1],C[2],I[0],I[1],I[2],I[3],0,0,0),h(this.bounds,C),u+=2+b(m,C,I,S)),P[1][S]>0&&((C=E.slice())[S]+=P[1][S],m.push(E[0],E[1],E[2],I[0],I[1],I[2],I[3],0,0,0,C[0],C[1],C[2],I[0],I[1],I[2],I[3],0,0,0),h(this.bounds,C),u+=2+b(m,C,I,S)))}this.lineCount[S]=u-this.lineOffset[S]}this.buffer.update(m)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),a=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(d,s,t){var o=t(8931);d.exports=function(w,u,S,_){r||(r=w.FRAMEBUFFER_UNSUPPORTED,n=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,i=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=w.getExtension("WEBGL_draw_buffers");if(!c&&E&&function(H,F){var N=H.getParameter(F.MAX_COLOR_ATTACHMENTS_WEBGL);c=new Array(N+1);for(var B=0;B<=N;++B){for(var j=new Array(N),K=0;K<B;++K)j[K]=H.COLOR_ATTACHMENT0+K;for(K=B;K<N;++K)j[K]=H.NONE;c[B]=j}}(w,E),Array.isArray(u)&&(_=S,S=0|u[1],u=0|u[0]),typeof u!="number")throw new Error("gl-fbo: Missing shape parameter");var L=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(u<0||u>L||S<0||S>L)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(_=_||{})){if((C=Math.max(0|_.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>w.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var P=w.UNSIGNED_BYTE,I=w.getExtension("OES_texture_float");if(_.float&&C>0){if(!I)throw new Error("gl-fbo: Context does not support floating point textures");P=w.FLOAT}else _.preferFloat&&C>0&&I&&(P=w.FLOAT);var U=!0;"depth"in _&&(U=!!_.depth);var z=!1;return"stencil"in _&&(z=!!_.stencil),new y(w,u,S,P,C,U,z,E)};var r,n,a,i,c=null;function h(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function f(w,u){w.bindFramebuffer(w.FRAMEBUFFER,u[0]),w.bindRenderbuffer(w.RENDERBUFFER,u[1]),w.bindTexture(w.TEXTURE_2D,u[2])}function b(w){switch(w){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case i:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function v(w,u,S,_,E,L){if(!_)return null;var C=o(w,u,S,E,_);return C.magFilter=w.NEAREST,C.minFilter=w.NEAREST,C.mipSamples=1,C.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,L,w.TEXTURE_2D,C.handle,0),C}function g(w,u,S,_,E){var L=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,L),w.renderbufferStorage(w.RENDERBUFFER,_,u,S),w.framebufferRenderbuffer(w.FRAMEBUFFER,E,w.RENDERBUFFER,L),L}function y(w,u,S,_,E,L,C,P){this.gl=w,this._shape=[0|u,0|S],this._destroyed=!1,this._ext=P,this.color=new Array(E);for(var I=0;I<E;++I)this.color[I]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=L,this._useStencil=C;var U=this,z=[0|u,0|S];Object.defineProperties(z,{0:{get:function(){return U._shape[0]},set:function(H){return U.width=H}},1:{get:function(){return U._shape[1]},set:function(H){return U.height=H}}}),this._shapeVector=z,function(H){var F=h(H.gl),N=H.gl,B=H.handle=N.createFramebuffer(),j=H._shape[0],K=H._shape[1],G=H.color.length,V=H._ext,W=H._useStencil,J=H._useDepth,X=H._colorType;N.bindFramebuffer(N.FRAMEBUFFER,B);for(var ee=0;ee<G;++ee)H.color[ee]=v(N,j,K,X,N.RGBA,N.COLOR_ATTACHMENT0+ee);G===0?(H._color_rb=g(N,j,K,N.RGBA4,N.COLOR_ATTACHMENT0),V&&V.drawBuffersWEBGL(c[0])):G>1&&V.drawBuffersWEBGL(c[G]);var re=N.getExtension("WEBGL_depth_texture");re?W?H.depth=v(N,j,K,re.UNSIGNED_INT_24_8_WEBGL,N.DEPTH_STENCIL,N.DEPTH_STENCIL_ATTACHMENT):J&&(H.depth=v(N,j,K,N.UNSIGNED_SHORT,N.DEPTH_COMPONENT,N.DEPTH_ATTACHMENT)):J&&W?H._depth_rb=g(N,j,K,N.DEPTH_STENCIL,N.DEPTH_STENCIL_ATTACHMENT):J?H._depth_rb=g(N,j,K,N.DEPTH_COMPONENT16,N.DEPTH_ATTACHMENT):W&&(H._depth_rb=g(N,j,K,N.STENCIL_INDEX,N.STENCIL_ATTACHMENT));var ie=N.checkFramebufferStatus(N.FRAMEBUFFER);if(ie!==N.FRAMEBUFFER_COMPLETE){for(H._destroyed=!0,N.bindFramebuffer(N.FRAMEBUFFER,null),N.deleteFramebuffer(H.handle),H.handle=null,H.depth&&(H.depth.dispose(),H.depth=null),H._depth_rb&&(N.deleteRenderbuffer(H._depth_rb),H._depth_rb=null),ee=0;ee<H.color.length;++ee)H.color[ee].dispose(),H.color[ee]=null;H._color_rb&&(N.deleteRenderbuffer(H._color_rb),H._color_rb=null),f(N,F),b(ie)}f(N,F)}(this)}var p=y.prototype;function m(w,u,S){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==u||w._shape[1]!==S){var _=w.gl,E=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(u<0||u>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=u,w._shape[1]=S;for(var L=h(_),C=0;C<w.color.length;++C)w.color[C].shape=w._shape;w._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,w._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,w._shape[0],w._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,w.handle);var P=_.checkFramebufferStatus(_.FRAMEBUFFER);P!==_.FRAMEBUFFER_COMPLETE&&(w.dispose(),f(_,L),b(P)),f(_,L)}}Object.defineProperties(p,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),w.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var u=0|w[0],S=0|w[1];return m(this,u,S),[u,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return m(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return w|=0,m(this,this._shape[0],w),w},enumerable:!1}}),p.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},p.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var u=0;u<this.color.length;++u)this.color[u].dispose(),this.color[u]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(d,s,t){var o=t(8974).sprintf,r=t(6603),n=t(9365),a=t(8008);d.exports=function(i,c,h){var f=n(c)||"of unknown name (see npm glsl-shader-name)",b="unknown type";h!==void 0&&(b=h===r.FRAGMENT_SHADER?"fragment":"vertex");for(var v=o(`Error compiling %s shader %s:
`,b,f),g=o("%s%s",v,i),y=i.split(`
`),p={},m=0;m<y.length;m++){var w=y[m];if(w!==""&&w!=="\0"){var u=parseInt(w.split(":")[2]);if(isNaN(u))throw new Error(o("Could not parse error: %s",w));p[u]=w}}var S=a(c).split(`
`);for(m=0;m<S.length;m++)if((p[m+3]||p[m+2]||p[m+1])&&(v+=S[m]+`
`,p[m+1])){var _=p[m+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),v+=o(`^^^ %s

`,_)}return{long:v.trim(),short:g.trim()}}},6386:function(d,s,t){d.exports=function(g,y){var p=g.gl,m=new h(g,a(p,c.vertex,c.fragment),a(p,c.pickVertex,c.pickFragment),i(p),i(p),i(p),i(p));return m.update(y),g.addObject(m),m};var o=t(5070),r=t(9560),n=t(5306),a=t(5158),i=t(5827),c=t(1292);function h(g,y,p,m,w,u,S){this.plot=g,this.shader=y,this.pickShader=p,this.positionBuffer=m,this.weightBuffer=w,this.colorBuffer=u,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var f,b=h.prototype,v=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=(f=[1,0,0,0,1,0,0,0,1],function(){var g=this.plot,y=this.shader,p=this.bounds,m=this.numVertices;if(!(m<=0)){var w=g.gl,u=g.dataBox,S=p[2]-p[0],_=p[3]-p[1],E=u[2]-u[0],L=u[3]-u[1];f[0]=2*S/E,f[4]=2*_/L,f[6]=2*(p[0]-u[0])/E-1,f[7]=2*(p[1]-u[1])/L-1,y.bind();var C=y.uniforms;C.viewTransform=f,C.shape=this.shape;var P=y.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,m)}}),b.drawPick=function(){var g=[1,0,0,0,1,0,0,0,1],y=[0,0,0,0];return function(p){var m=this.plot,w=this.pickShader,u=this.bounds,S=this.numVertices;if(!(S<=0)){var _=m.gl,E=m.dataBox,L=u[2]-u[0],C=u[3]-u[1],P=E[2]-E[0],I=E[3]-E[1];g[0]=2*L/P,g[4]=2*C/I,g[6]=2*(u[0]-E[0])/P-1,g[7]=2*(u[1]-E[1])/I-1;for(var U=0;U<4;++U)y[U]=p>>8*U&255;this.pickOffset=p,w.bind();var z=w.uniforms;z.viewTransform=g,z.pickOffset=y,z.shape=this.shape;var H=w.attributes;return this.positionBuffer.bind(),H.position.pointer(),this.weightBuffer.bind(),H.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),H.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,S),p+this.shape[0]*this.shape[1]}}}(),b.pick=function(g,y,p){var m=this.pickOffset,w=this.shape[0]*this.shape[1];if(p<m||p>=m+w)return null;var u=p-m,S=this.xData,_=this.yData;return{object:this,pointId:u,dataCoord:[S[u%this.shape[0]],_[u/this.shape[0]|0]]}},b.update=function(g){var y=(g=g||{}).shape||[0,0],p=g.x||r(y[0]),m=g.y||r(y[1]),w=g.z||new Float32Array(y[0]*y[1]),u=g.zsmooth!==!1;this.xData=p,this.yData=m;var S,_,E,L,C=g.colorLevels||[0],P=g.colorValues||[0,0,0,1],I=C.length,U=this.bounds;u?(S=U[0]=p[0],_=U[1]=m[0],E=U[2]=p[p.length-1],L=U[3]=m[m.length-1]):(S=U[0]=p[0]+(p[1]-p[0])/2,_=U[1]=m[0]+(m[1]-m[0])/2,E=U[2]=p[p.length-1]+(p[p.length-1]-p[p.length-2])/2,L=U[3]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2);var z=1/(E-S),H=1/(L-_),F=y[0],N=y[1];this.shape=[F,N];var B=(u?(F-1)*(N-1):F*N)*(v.length>>>1);this.numVertices=B;for(var j=n.mallocUint8(4*B),K=n.mallocFloat32(2*B),G=n.mallocUint8(2*B),V=n.mallocUint32(B),W=0,J=u?F-1:F,X=u?N-1:N,ee=0;ee<X;++ee){var re,ie;u?(re=H*(m[ee]-_),ie=H*(m[ee+1]-_)):(re=ee<N-1?H*(m[ee]-(m[ee+1]-m[ee])/2-_):H*(m[ee]-(m[ee]-m[ee-1])/2-_),ie=ee<N-1?H*(m[ee]+(m[ee+1]-m[ee])/2-_):H*(m[ee]+(m[ee]-m[ee-1])/2-_));for(var se=0;se<J;++se){var fe,ye;u?(fe=z*(p[se]-S),ye=z*(p[se+1]-S)):(fe=se<F-1?z*(p[se]-(p[se+1]-p[se])/2-S):z*(p[se]-(p[se]-p[se-1])/2-S),ye=se<F-1?z*(p[se]+(p[se+1]-p[se])/2-S):z*(p[se]+(p[se]-p[se-1])/2-S));for(var ge=0;ge<v.length;ge+=2){var he,ve,Ie,xe,Ae=v[ge],Se=v[ge+1],Te=w[u?(ee+Se)*F+(se+Ae):ee*F+se],Q=o.le(C,Te);if(Q<0)he=P[0],ve=P[1],Ie=P[2],xe=P[3];else if(Q===I-1)he=P[4*I-4],ve=P[4*I-3],Ie=P[4*I-2],xe=P[4*I-1];else{var oe=(Te-C[Q])/(C[Q+1]-C[Q]),ce=1-oe,me=4*Q,Me=4*(Q+1);he=ce*P[me]+oe*P[Me],ve=ce*P[me+1]+oe*P[Me+1],Ie=ce*P[me+2]+oe*P[Me+2],xe=ce*P[me+3]+oe*P[Me+3]}j[4*W]=255*he,j[4*W+1]=255*ve,j[4*W+2]=255*Ie,j[4*W+3]=255*xe,K[2*W]=.5*fe+.5*ye,K[2*W+1]=.5*re+.5*ie,G[2*W]=Ae,G[2*W+1]=Se,V[W]=ee*F+se,W+=1}}}this.positionBuffer.update(K),this.weightBuffer.update(G),this.colorBuffer.update(j),this.idBuffer.update(V),n.free(K),n.free(j),n.free(G),n.free(V)},b.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(d,s,t){var o=t(6832);d.exports={fragment:o([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),i=o([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(h){return r(h,n,a,null,c)},s.createPickShader=function(h){return r(h,n,i,null,c)}},6086:function(d,s,t){d.exports=function(S){var _=S.gl||S.scene&&S.scene.gl,E=b(_);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var L=v(_);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var C=o(_),P=r(_,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),I=h(new Array(1024),[256,1,4]),U=0;U<1024;++U)I.data[U]=255;var z=n(_,I);z.wrap=_.REPEAT;var H=new w(_,E,L,C,P,z);return H.update(S),H};var o=t(5827),r=t(2944),n=t(8931),a=new Uint8Array(4),i=new Float32Array(a.buffer),c=t(5070),h=t(5050),f=t(248),b=f.createShader,v=f.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(S,_){for(var E=0,L=0;L<3;++L){var C=S[L]-_[L];E+=C*C}return Math.sqrt(E)}function p(S){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)_[0][E]=Math.max(S[0][E],_[0][E]),_[1][E]=Math.min(S[1][E],_[1][E]);return _}function m(S,_,E,L){this.arcLength=S,this.position=_,this.index=E,this.dataCoordinate=L}function w(S,_,E,L,C,P){this.gl=S,this.shader=_,this.pickShader=E,this.buffer=L,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var u=w.prototype;u.isTransparent=function(){return this.hasAlpha},u.isOpaque=function(){return!this.hasAlpha},u.pickSlots=1,u.setPickBase=function(S){this.pickId=S},u.drawTransparent=u.draw=function(S){if(this.vertexCount){var _=this.gl,E=this.shader,L=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},u.drawPick=function(S){if(this.vertexCount){var _=this.gl,E=this.pickShader,L=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},u.update=function(S){var _,E;this.dirty=!0;var L=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],P=[],I=[],U=0,z=0,H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],F=S.position||S.positions;if(F){var N=S.color||S.colors||[0,0,0,1],B=S.lineWidth||1,j=!1;e:for(_=1;_<F.length;++_){var K,G,V,W=F[_-1],J=F[_];for(P.push(U),I.push(W.slice()),E=0;E<3;++E){if(isNaN(W[E])||isNaN(J[E])||!isFinite(W[E])||!isFinite(J[E])){if(!L&&C.length>0){for(var X=0;X<24;++X)C.push(C[C.length-12]);z+=2,j=!0}continue e}H[0][E]=Math.min(H[0][E],W[E],J[E]),H[1][E]=Math.max(H[1][E],W[E],J[E])}Array.isArray(N[0])?(K=N.length>_-1?N[_-1]:N.length>0?N[N.length-1]:[0,0,0,1],G=N.length>_?N[_]:N.length>0?N[N.length-1]:[0,0,0,1]):K=G=N,K.length===3&&(K=[K[0],K[1],K[2],1]),G.length===3&&(G=[G[0],G[1],G[2],1]),!this.hasAlpha&&K[3]<1&&(this.hasAlpha=!0),V=Array.isArray(B)?B.length>_-1?B[_-1]:B.length>0?B[B.length-1]:[0,0,0,1]:B;var ee=U;if(U+=y(W,J),j){for(E=0;E<2;++E)C.push(W[0],W[1],W[2],J[0],J[1],J[2],ee,V,K[0],K[1],K[2],K[3]);z+=2,j=!1}C.push(W[0],W[1],W[2],J[0],J[1],J[2],ee,V,K[0],K[1],K[2],K[3],W[0],W[1],W[2],J[0],J[1],J[2],ee,-V,K[0],K[1],K[2],K[3],J[0],J[1],J[2],W[0],W[1],W[2],U,-V,G[0],G[1],G[2],G[3],J[0],J[1],J[2],W[0],W[1],W[2],U,V,G[0],G[1],G[2],G[3]),z+=4}}if(this.buffer.update(C),P.push(U),I.push(F[F.length-1].slice()),this.bounds=H,this.vertexCount=z,this.points=I,this.arcLength=P,"dashes"in S){var re=S.dashes.slice();for(re.unshift(0),_=1;_<re.length;++_)re[_]=re[_-1]+re[_];var ie=h(new Array(1024),[256,1,4]);for(_=0;_<256;++_){for(E=0;E<4;++E)ie.set(_,0,E,0);1&c.le(re,re[re.length-1]*_/255)?ie.set(_,0,0,0):ie.set(_,0,0,255)}this.texture.setPixels(ie)}},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},u.pick=function(S){if(!S||S.id!==this.pickId)return null;var _=function(F,N,B,j){return a[0]=0,a[1]=B,a[2]=N,a[3]=F,i[0]}(S.value[0],S.value[1],S.value[2]),E=c.le(this.arcLength,_);if(E<0)return null;if(E===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var L=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],P=(_-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),I=1-P,U=[0,0,0],z=0;z<3;++z)U[z]=I*L[z]+P*C[z];var H=Math.min(P<.5?E:E+1,this.points.length-1);return new m(_,U,H,this.points[H])}},7332:function(d){d.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},9823:function(d){d.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7787:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3],a=s[4],i=s[5],c=s[6],h=s[7],f=s[8],b=s[9],v=s[10],g=s[11],y=s[12],p=s[13],m=s[14],w=s[15];return(t*i-o*a)*(v*w-g*m)-(t*c-r*a)*(b*w-g*p)+(t*h-n*a)*(b*m-v*p)+(o*c-r*i)*(f*w-g*y)-(o*h-n*i)*(f*m-v*y)+(r*h-n*c)*(f*p-b*y)}},5950:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=o+o,c=r+r,h=n+n,f=o*i,b=r*i,v=r*c,g=n*i,y=n*c,p=n*h,m=a*i,w=a*c,u=a*h;return s[0]=1-v-p,s[1]=b+u,s[2]=g-w,s[3]=0,s[4]=b-u,s[5]=1-f-p,s[6]=y+m,s[7]=0,s[8]=g+w,s[9]=y-m,s[10]=1-f-v,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7280:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3],c=r+r,h=n+n,f=a+a,b=r*c,v=r*h,g=r*f,y=n*h,p=n*f,m=a*f,w=i*c,u=i*h,S=i*f;return s[0]=1-(y+m),s[1]=v+S,s[2]=g-u,s[3]=0,s[4]=v-S,s[5]=1-(b+m),s[6]=p+w,s[7]=0,s[8]=g+u,s[9]=p-w,s[10]=1-(b+y),s[11]=0,s[12]=o[0],s[13]=o[1],s[14]=o[2],s[15]=1,s}},9947:function(d){d.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7437:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=t[4],c=t[5],h=t[6],f=t[7],b=t[8],v=t[9],g=t[10],y=t[11],p=t[12],m=t[13],w=t[14],u=t[15],S=o*c-r*i,_=o*h-n*i,E=o*f-a*i,L=r*h-n*c,C=r*f-a*c,P=n*f-a*h,I=b*m-v*p,U=b*w-g*p,z=b*u-y*p,H=v*w-g*m,F=v*u-y*m,N=g*u-y*w,B=S*N-_*F+E*H+L*z-C*U+P*I;return B?(B=1/B,s[0]=(c*N-h*F+f*H)*B,s[1]=(n*F-r*N-a*H)*B,s[2]=(m*P-w*C+u*L)*B,s[3]=(g*C-v*P-y*L)*B,s[4]=(h*z-i*N-f*U)*B,s[5]=(o*N-n*z+a*U)*B,s[6]=(w*E-p*P-u*_)*B,s[7]=(b*P-g*E+y*_)*B,s[8]=(i*F-c*z+f*I)*B,s[9]=(r*z-o*F-a*I)*B,s[10]=(p*C-m*E+u*S)*B,s[11]=(v*E-b*C-y*S)*B,s[12]=(c*U-i*H-h*I)*B,s[13]=(o*H-r*U+n*I)*B,s[14]=(m*_-p*L-w*S)*B,s[15]=(b*L-v*_+g*S)*B,s):null}},3012:function(d,s,t){var o=t(9947);d.exports=function(r,n,a,i){var c,h,f,b,v,g,y,p,m,w,u=n[0],S=n[1],_=n[2],E=i[0],L=i[1],C=i[2],P=a[0],I=a[1],U=a[2];return Math.abs(u-P)<1e-6&&Math.abs(S-I)<1e-6&&Math.abs(_-U)<1e-6?o(r):(y=u-P,p=S-I,m=_-U,c=L*(m*=w=1/Math.sqrt(y*y+p*p+m*m))-C*(p*=w),h=C*(y*=w)-E*m,f=E*p-L*y,(w=Math.sqrt(c*c+h*h+f*f))?(c*=w=1/w,h*=w,f*=w):(c=0,h=0,f=0),b=p*f-m*h,v=m*c-y*f,g=y*h-p*c,(w=Math.sqrt(b*b+v*v+g*g))?(b*=w=1/w,v*=w,g*=w):(b=0,v=0,g=0),r[0]=c,r[1]=b,r[2]=y,r[3]=0,r[4]=h,r[5]=v,r[6]=p,r[7]=0,r[8]=f,r[9]=g,r[10]=m,r[11]=0,r[12]=-(c*u+h*S+f*_),r[13]=-(b*u+v*S+g*_),r[14]=-(y*u+p*S+m*_),r[15]=1,r)}},104:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3],c=t[4],h=t[5],f=t[6],b=t[7],v=t[8],g=t[9],y=t[10],p=t[11],m=t[12],w=t[13],u=t[14],S=t[15],_=o[0],E=o[1],L=o[2],C=o[3];return s[0]=_*r+E*c+L*v+C*m,s[1]=_*n+E*h+L*g+C*w,s[2]=_*a+E*f+L*y+C*u,s[3]=_*i+E*b+L*p+C*S,_=o[4],E=o[5],L=o[6],C=o[7],s[4]=_*r+E*c+L*v+C*m,s[5]=_*n+E*h+L*g+C*w,s[6]=_*a+E*f+L*y+C*u,s[7]=_*i+E*b+L*p+C*S,_=o[8],E=o[9],L=o[10],C=o[11],s[8]=_*r+E*c+L*v+C*m,s[9]=_*n+E*h+L*g+C*w,s[10]=_*a+E*f+L*y+C*u,s[11]=_*i+E*b+L*p+C*S,_=o[12],E=o[13],L=o[14],C=o[15],s[12]=_*r+E*c+L*v+C*m,s[13]=_*n+E*h+L*g+C*w,s[14]=_*a+E*f+L*y+C*u,s[15]=_*i+E*b+L*p+C*S,s}},5268:function(d){d.exports=function(s,t,o,r,n,a,i){var c=1/(t-o),h=1/(r-n),f=1/(a-i);return s[0]=-2*c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*h,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*f,s[11]=0,s[12]=(t+o)*c,s[13]=(n+r)*h,s[14]=(i+a)*f,s[15]=1,s}},1120:function(d){d.exports=function(s,t,o,r,n){var a=1/Math.tan(t/2),i=1/(r-n);return s[0]=a/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(n+r)*i,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*n*r*i,s[15]=0,s}},4422:function(d){d.exports=function(s,t,o,r){var n,a,i,c,h,f,b,v,g,y,p,m,w,u,S,_,E,L,C,P,I,U,z,H,F=r[0],N=r[1],B=r[2],j=Math.sqrt(F*F+N*N+B*B);return Math.abs(j)<1e-6?null:(F*=j=1/j,N*=j,B*=j,n=Math.sin(o),i=1-(a=Math.cos(o)),c=t[0],h=t[1],f=t[2],b=t[3],v=t[4],g=t[5],y=t[6],p=t[7],m=t[8],w=t[9],u=t[10],S=t[11],_=F*F*i+a,E=N*F*i+B*n,L=B*F*i-N*n,C=F*N*i-B*n,P=N*N*i+a,I=B*N*i+F*n,U=F*B*i+N*n,z=N*B*i-F*n,H=B*B*i+a,s[0]=c*_+v*E+m*L,s[1]=h*_+g*E+w*L,s[2]=f*_+y*E+u*L,s[3]=b*_+p*E+S*L,s[4]=c*C+v*P+m*I,s[5]=h*C+g*P+w*I,s[6]=f*C+y*P+u*I,s[7]=b*C+p*P+S*I,s[8]=c*U+v*z+m*H,s[9]=h*U+g*z+w*H,s[10]=f*U+y*z+u*H,s[11]=b*U+p*z+S*H,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},6109:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[4],i=t[5],c=t[6],h=t[7],f=t[8],b=t[9],v=t[10],g=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=a*n+f*r,s[5]=i*n+b*r,s[6]=c*n+v*r,s[7]=h*n+g*r,s[8]=f*n-a*r,s[9]=b*n-i*r,s[10]=v*n-c*r,s[11]=g*n-h*r,s}},7115:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[0],i=t[1],c=t[2],h=t[3],f=t[8],b=t[9],v=t[10],g=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*n-f*r,s[1]=i*n-b*r,s[2]=c*n-v*r,s[3]=h*n-g*r,s[8]=a*r+f*n,s[9]=i*r+b*n,s[10]=c*r+v*n,s[11]=h*r+g*n,s}},5240:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[0],i=t[1],c=t[2],h=t[3],f=t[4],b=t[5],v=t[6],g=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*n+f*r,s[1]=i*n+b*r,s[2]=c*n+v*r,s[3]=h*n+g*r,s[4]=f*n-a*r,s[5]=b*n-i*r,s[6]=v*n-c*r,s[7]=g*n-h*r,s}},3668:function(d){d.exports=function(s,t,o){var r=o[0],n=o[1],a=o[2];return s[0]=t[0]*r,s[1]=t[1]*r,s[2]=t[2]*r,s[3]=t[3]*r,s[4]=t[4]*n,s[5]=t[5]*n,s[6]=t[6]*n,s[7]=t[7]*n,s[8]=t[8]*a,s[9]=t[9]*a,s[10]=t[10]*a,s[11]=t[11]*a,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},998:function(d){d.exports=function(s,t,o){var r,n,a,i,c,h,f,b,v,g,y,p,m=o[0],w=o[1],u=o[2];return t===s?(s[12]=t[0]*m+t[4]*w+t[8]*u+t[12],s[13]=t[1]*m+t[5]*w+t[9]*u+t[13],s[14]=t[2]*m+t[6]*w+t[10]*u+t[14],s[15]=t[3]*m+t[7]*w+t[11]*u+t[15]):(r=t[0],n=t[1],a=t[2],i=t[3],c=t[4],h=t[5],f=t[6],b=t[7],v=t[8],g=t[9],y=t[10],p=t[11],s[0]=r,s[1]=n,s[2]=a,s[3]=i,s[4]=c,s[5]=h,s[6]=f,s[7]=b,s[8]=v,s[9]=g,s[10]=y,s[11]=p,s[12]=r*m+c*w+v*u+t[12],s[13]=n*m+h*w+g*u+t[13],s[14]=a*m+f*w+y*u+t[14],s[15]=i*m+b*w+p*u+t[15]),s}},2142:function(d){d.exports=function(s,t){if(s===t){var o=t[1],r=t[2],n=t[3],a=t[6],i=t[7],c=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=o,s[6]=t[9],s[7]=t[13],s[8]=r,s[9]=a,s[11]=t[14],s[12]=n,s[13]=i,s[14]=c}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},4340:function(d,s,t){var o=t(957),r=t(7309);function n(c,h){for(var f=[0,0,0,0],b=0;b<4;++b)for(var v=0;v<4;++v)f[v]+=c[4*b+v]*h[b];return f}function a(c,h,f,b,v){for(var g=n(b,n(f,n(h,[c[0],c[1],c[2],1]))),y=0;y<3;++y)g[y]/=g[3];return[.5*v[0]*(1+g[0]),.5*v[1]*(1-g[1])]}function i(c,h){for(var f=[0,0,0],b=0;b<c.length;++b)for(var v=c[b],g=h[b],y=0;y<3;++y)f[y]+=g*v[y];return f}d.exports=function(c,h,f,b,v,g){if(c.length===1)return[0,c[0].slice()];for(var y=new Array(c.length),p=0;p<c.length;++p)y[p]=a(c[p],f,b,v,g);var m=0,w=1/0;for(p=0;p<y.length;++p){for(var u=0,S=0;S<2;++S)u+=Math.pow(y[p][S]-h[S],2);u<w&&(w=u,m=p)}var _=function(L,C){if(L.length===2){for(var P=0,I=0,U=0;U<2;++U)P+=Math.pow(C[U]-L[0][U],2),I+=Math.pow(C[U]-L[1][U],2);return(P=Math.sqrt(P))+(I=Math.sqrt(I))<1e-6?[1,0]:[I/(P+I),P/(I+P)]}if(L.length===3){var z=[0,0];return r(L[0],L[1],L[2],C,z),o(L,z)}return[]}(y,h),E=0;for(p=0;p<3;++p){if(_[p]<-.001||_[p]>1.0001)return null;E+=_[p]}return Math.abs(E-1)>.001?null:[m,i(c,_),_]}},2056:function(d,s,t){var o=t(6832),r=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),i=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),h=o([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),b=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),v=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),g=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),y=o([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:c,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:f,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:v,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:g,fragment:y,attributes:[{name:"position",type:"vec3"}]}},8116:function(d,s,t){var o=t(5158),r=t(5827),n=t(2944),a=t(8931),i=t(115),c=t(104),h=t(7437),f=t(5050),b=t(9156),v=t(7212),g=t(5306),y=t(2056),p=t(4340),m=y.meshShader,w=y.wireShader,u=y.pointShader,S=y.pickShader,_=y.pointPickShader,E=y.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(j,K,G,V,W,J,X,ee,re,ie,se,fe,ye,ge,he,ve,Ie,xe,Ae,Se,Te,Q,oe,ce,me,Me,Re){this.gl=j,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=K,this.dirty=!0,this.triShader=G,this.lineShader=V,this.pointShader=W,this.pickShader=J,this.pointPickShader=X,this.contourShader=ee,this.trianglePositions=re,this.triangleColors=se,this.triangleNormals=ye,this.triangleUVs=fe,this.triangleIds=ie,this.triangleVAO=ge,this.triangleCount=0,this.lineWidth=1,this.edgePositions=he,this.edgeColors=Ie,this.edgeUVs=xe,this.edgeIds=ve,this.edgeVAO=Ae,this.edgeCount=0,this.pointPositions=Se,this.pointColors=Q,this.pointUVs=oe,this.pointSizes=ce,this.pointIds=Te,this.pointVAO=me,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Me,this.contourVAO=Re,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var P=C.prototype;function I(j,K){if(!K||!K.length)return 1;for(var G=0;G<K.length;++G){if(K.length<2)return 1;if(K[G][0]===j)return K[G][1];if(K[G][0]>j&&G>0){var V=(K[G][0]-j)/(K[G][0]-K[G-1][0]);return K[G][1]*(1-V)+V*K[G-1][1]}}return 1}function U(j){var K=o(j,m.vertex,m.fragment);return K.attributes.position.location=0,K.attributes.color.location=2,K.attributes.uv.location=3,K.attributes.normal.location=4,K}function z(j){var K=o(j,w.vertex,w.fragment);return K.attributes.position.location=0,K.attributes.color.location=2,K.attributes.uv.location=3,K}function H(j){var K=o(j,u.vertex,u.fragment);return K.attributes.position.location=0,K.attributes.color.location=2,K.attributes.uv.location=3,K.attributes.pointSize.location=4,K}function F(j){var K=o(j,S.vertex,S.fragment);return K.attributes.position.location=0,K.attributes.id.location=1,K}function N(j){var K=o(j,_.vertex,_.fragment);return K.attributes.position.location=0,K.attributes.id.location=1,K.attributes.pointSize.location=4,K}function B(j){var K=o(j,E.vertex,E.fragment);return K.attributes.position.location=0,K}P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(j){this.pickId=j},P.highlight=function(j){if(j&&this.contourEnable){for(var K=v(this.cells,this.intensity,j.intensity),G=K.cells,V=K.vertexIds,W=K.vertexWeights,J=G.length,X=g.mallocFloat32(6*J),ee=0,re=0;re<J;++re)for(var ie=G[re],se=0;se<2;++se){var fe=ie[0];ie.length===2&&(fe=ie[se]);for(var ye=V[fe][0],ge=V[fe][1],he=W[fe],ve=1-he,Ie=this.positions[ye],xe=this.positions[ge],Ae=0;Ae<3;++Ae)X[ee++]=he*Ie[Ae]+ve*xe[Ae]}this.contourCount=ee/3|0,this.contourPositions.update(X.subarray(0,ee)),g.free(X)}else this.contourCount=0},P.update=function(j){j=j||{};var K=this.gl;this.dirty=!0,"contourEnable"in j&&(this.contourEnable=j.contourEnable),"contourColor"in j&&(this.contourColor=j.contourColor),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"lightPosition"in j&&(this.lightPosition=j.lightPosition),this.hasAlpha=!1,"opacity"in j&&(this.opacity=j.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in j&&(this.opacityscale=j.opacityscale,this.hasAlpha=!0),"ambient"in j&&(this.ambientLight=j.ambient),"diffuse"in j&&(this.diffuseLight=j.diffuse),"specular"in j&&(this.specularLight=j.specular),"roughness"in j&&(this.roughness=j.roughness),"fresnel"in j&&(this.fresnel=j.fresnel),j.texture?(this.texture.dispose(),this.texture=a(K,j.texture)):j.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=K.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=K.LINEAR,this.texture.setPixels(function(Pt,Ze){for(var Ye=b({colormap:Pt,nshades:256,format:"rgba"}),Be=new Uint8Array(1024),ke=0;ke<256;++ke){for(var Pe=Ye[ke],qe=0;qe<3;++qe)Be[4*ke+qe]=Pe[qe];Be[4*ke+3]=Ze?255*I(ke/255,Ze):255*Pe[3]}return f(Be,[256,256,4],[4,0,1])}(j.colormap,this.opacityscale)),this.texture.generateMipmap());var G=j.cells,V=j.positions;if(V&&G){var W=[],J=[],X=[],ee=[],re=[],ie=[],se=[],fe=[],ye=[],ge=[],he=[],ve=[],Ie=[],xe=[];this.cells=G,this.positions=V;var Ae=j.vertexNormals,Se=j.cellNormals,Te=j.vertexNormalsEpsilon===void 0?1e-6:j.vertexNormalsEpsilon,Q=j.faceNormalsEpsilon===void 0?1e-6:j.faceNormalsEpsilon;j.useFacetNormals&&!Se&&(Se=i.faceNormals(G,V,Q)),Se||Ae||(Ae=i.vertexNormals(G,V,Te));var oe=j.vertexColors,ce=j.cellColors,me=j.meshColor||[1,1,1,1],Me=j.vertexUVs,Re=j.vertexIntensity,Ce=j.cellUVs,ze=j.cellIntensity,le=1/0,de=-1/0;if(!Me&&!Ce)if(Re)if(j.vertexIntensityBounds)le=+j.vertexIntensityBounds[0],de=+j.vertexIntensityBounds[1];else for(var be=0;be<Re.length;++be){var Fe=Re[be];le=Math.min(le,Fe),de=Math.max(de,Fe)}else if(ze)if(j.cellIntensityBounds)le=+j.cellIntensityBounds[0],de=+j.cellIntensityBounds[1];else for(be=0;be<ze.length;++be)Fe=ze[be],le=Math.min(le,Fe),de=Math.max(de,Fe);else for(be=0;be<V.length;++be)Fe=V[be][2],le=Math.min(le,Fe),de=Math.max(de,Fe);this.intensity=Re||ze||function(Pt){for(var Ze=Pt.length,Ye=new Array(Ze),Be=0;Be<Ze;++Be)Ye[Be]=Pt[Be][2];return Ye}(V),this.pickVertex=!(ze||ce);var Ve=j.pointSizes,He=j.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],be=0;be<V.length;++be)for(var rt=V[be],tt=0;tt<3;++tt)!isNaN(rt[tt])&&isFinite(rt[tt])&&(this.bounds[0][tt]=Math.min(this.bounds[0][tt],rt[tt]),this.bounds[1][tt]=Math.max(this.bounds[1][tt],rt[tt]));var ot=0,ht=0,_t=0;e:for(be=0;be<G.length;++be){var dt=G[be];switch(dt.length){case 1:for(rt=V[St=dt[0]],tt=0;tt<3;++tt)if(isNaN(rt[tt])||!isFinite(rt[tt]))continue e;ge.push(rt[0],rt[1],rt[2]),Et=oe?oe[St]:ce?ce[be]:me,this.opacityscale&&Re?J.push(Et[0],Et[1],Et[2],this.opacity*I((Re[St]-le)/(de-le),this.opacityscale)):Et.length===3?he.push(Et[0],Et[1],Et[2],this.opacity):(he.push(Et[0],Et[1],Et[2],Et[3]*this.opacity),Et[3]<1&&(this.hasAlpha=!0)),zt=Me?Me[St]:Re?[(Re[St]-le)/(de-le),0]:Ce?Ce[be]:ze?[(ze[be]-le)/(de-le),0]:[(rt[2]-le)/(de-le),0],ve.push(zt[0],zt[1]),Ve?Ie.push(Ve[St]):Ie.push(He),xe.push(be),_t+=1;break;case 2:for(tt=0;tt<2;++tt){rt=V[St=dt[tt]];for(var bt=0;bt<3;++bt)if(isNaN(rt[bt])||!isFinite(rt[bt]))continue e}for(tt=0;tt<2;++tt)rt=V[St=dt[tt]],ie.push(rt[0],rt[1],rt[2]),Et=oe?oe[St]:ce?ce[be]:me,this.opacityscale&&Re?J.push(Et[0],Et[1],Et[2],this.opacity*I((Re[St]-le)/(de-le),this.opacityscale)):Et.length===3?se.push(Et[0],Et[1],Et[2],this.opacity):(se.push(Et[0],Et[1],Et[2],Et[3]*this.opacity),Et[3]<1&&(this.hasAlpha=!0)),zt=Me?Me[St]:Re?[(Re[St]-le)/(de-le),0]:Ce?Ce[be]:ze?[(ze[be]-le)/(de-le),0]:[(rt[2]-le)/(de-le),0],fe.push(zt[0],zt[1]),ye.push(be);ht+=1;break;case 3:for(tt=0;tt<3;++tt)for(rt=V[St=dt[tt]],bt=0;bt<3;++bt)if(isNaN(rt[bt])||!isFinite(rt[bt]))continue e;for(tt=0;tt<3;++tt){var St,Et,zt,Ut;rt=V[St=dt[2-tt]],W.push(rt[0],rt[1],rt[2]),(Et=oe?oe[St]:ce?ce[be]:me)?this.opacityscale&&Re?J.push(Et[0],Et[1],Et[2],this.opacity*I((Re[St]-le)/(de-le),this.opacityscale)):Et.length===3?J.push(Et[0],Et[1],Et[2],this.opacity):(J.push(Et[0],Et[1],Et[2],Et[3]*this.opacity),Et[3]<1&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1),zt=Me?Me[St]:Re?[(Re[St]-le)/(de-le),0]:Ce?Ce[be]:ze?[(ze[be]-le)/(de-le),0]:[(rt[2]-le)/(de-le),0],ee.push(zt[0],zt[1]),Ut=Ae?Ae[St]:Se[be],X.push(Ut[0],Ut[1],Ut[2]),re.push(be)}ot+=1}}this.pointCount=_t,this.edgeCount=ht,this.triangleCount=ot,this.pointPositions.update(ge),this.pointColors.update(he),this.pointUVs.update(ve),this.pointSizes.update(Ie),this.pointIds.update(new Uint32Array(xe)),this.edgePositions.update(ie),this.edgeColors.update(se),this.edgeUVs.update(fe),this.edgeIds.update(new Uint32Array(ye)),this.trianglePositions.update(W),this.triangleColors.update(J),this.triangleUVs.update(ee),this.triangleNormals.update(X),this.triangleIds.update(new Uint32Array(re))}},P.drawTransparent=P.draw=function(j){j=j||{};for(var K=this.gl,G=j.model||L,V=j.view||L,W=j.projection||L,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)J[0][X]=Math.max(J[0][X],this.clipBounds[0][X]),J[1][X]=Math.min(J[1][X],this.clipBounds[1][X]);var ee={model:G,view:V,projection:W,inverseModel:L.slice(),clipBounds:J,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ee.inverseModel=h(ee.inverseModel,ee.model),K.disable(K.CULL_FACE),this.texture.bind(0);var re=new Array(16);for(c(re,ee.view,ee.model),c(re,ee.projection,re),h(re,re),X=0;X<3;++X)ee.eyePosition[X]=re[12+X]/re[15];var ie,se=re[15];for(X=0;X<3;++X)se+=this.lightPosition[X]*re[4*X+3];for(X=0;X<3;++X){for(var fe=re[12+X],ye=0;ye<3;++ye)fe+=re[4*ye+X]*this.lightPosition[ye];ee.lightPosition[X]=fe/se}this.triangleCount>0&&((ie=this.triShader).bind(),ie.uniforms=ee,this.triangleVAO.bind(),K.drawArrays(K.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ie=this.lineShader).bind(),ie.uniforms=ee,this.edgeVAO.bind(),K.lineWidth(this.lineWidth*this.pixelRatio),K.drawArrays(K.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointShader).bind(),ie.uniforms=ee,this.pointVAO.bind(),K.drawArrays(K.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ie=this.contourShader).bind(),ie.uniforms=ee,this.contourVAO.bind(),K.drawArrays(K.LINES,0,this.contourCount),this.contourVAO.unbind())},P.drawPick=function(j){j=j||{};for(var K=this.gl,G=j.model||L,V=j.view||L,W=j.projection||L,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)J[0][X]=Math.max(J[0][X],this.clipBounds[0][X]),J[1][X]=Math.min(J[1][X],this.clipBounds[1][X]);this._model=[].slice.call(G),this._view=[].slice.call(V),this._projection=[].slice.call(W),this._resolution=[K.drawingBufferWidth,K.drawingBufferHeight];var ee,re={model:G,view:V,projection:W,clipBounds:J,pickId:this.pickId/255};(ee=this.pickShader).bind(),ee.uniforms=re,this.triangleCount>0&&(this.triangleVAO.bind(),K.drawArrays(K.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),K.lineWidth(this.lineWidth*this.pixelRatio),K.drawArrays(K.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ee=this.pointPickShader).bind(),ee.uniforms=re,this.pointVAO.bind(),K.drawArrays(K.POINTS,0,this.pointCount),this.pointVAO.unbind())},P.pick=function(j){if(!j||j.id!==this.pickId)return null;for(var K=j.value[0]+256*j.value[1]+65536*j.value[2],G=this.cells[K],V=this.positions,W=new Array(G.length),J=0;J<G.length;++J)W[J]=V[G[J]];var X=j.coord[0],ee=j.coord[1];if(!this.pickVertex){var re=this.positions[G[0]],ie=this.positions[G[1]],se=this.positions[G[2]],fe=[(re[0]+ie[0]+se[0])/3,(re[1]+ie[1]+se[1])/3,(re[2]+ie[2]+se[2])/3];return{_cellCenter:!0,position:[X,ee],index:K,cell:G,cellId:K,intensity:this.intensity[K],dataCoordinate:fe}}var ye=p(W,[X*this.pixelRatio,this._resolution[1]-ee*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ye)return null;var ge=ye[2],he=0;for(J=0;J<G.length;++J)he+=ge[J]*this.intensity[G[J]];return{position:ye[1],index:G[ye[0]],cell:G,cellId:K,intensity:he,dataCoordinate:this.positions[G[ye[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},d.exports=function(j,K){arguments.length===1&&(j=(K=j).gl);var G=j.getExtension("OES_standard_derivatives")||j.getExtension("MOZ_OES_standard_derivatives")||j.getExtension("WEBKIT_OES_standard_derivatives");if(!G)throw new Error("derivatives not supported");var V=U(j),W=z(j),J=H(j),X=F(j),ee=N(j),re=B(j),ie=a(j,f(new Uint8Array([255,255,255,255]),[1,1,4]));ie.generateMipmap(),ie.minFilter=j.LINEAR_MIPMAP_LINEAR,ie.magFilter=j.LINEAR;var se=r(j),fe=r(j),ye=r(j),ge=r(j),he=r(j),ve=n(j,[{buffer:se,type:j.FLOAT,size:3},{buffer:he,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:fe,type:j.FLOAT,size:4},{buffer:ye,type:j.FLOAT,size:2},{buffer:ge,type:j.FLOAT,size:3}]),Ie=r(j),xe=r(j),Ae=r(j),Se=r(j),Te=n(j,[{buffer:Ie,type:j.FLOAT,size:3},{buffer:Se,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:xe,type:j.FLOAT,size:4},{buffer:Ae,type:j.FLOAT,size:2}]),Q=r(j),oe=r(j),ce=r(j),me=r(j),Me=r(j),Re=n(j,[{buffer:Q,type:j.FLOAT,size:3},{buffer:Me,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:j.FLOAT,size:4},{buffer:ce,type:j.FLOAT,size:2},{buffer:me,type:j.FLOAT,size:1}]),Ce=r(j),ze=n(j,[{buffer:Ce,type:j.FLOAT,size:3}]),le=new C(j,ie,V,W,J,X,ee,re,se,he,fe,ye,ge,ve,Ie,Se,xe,Ae,Te,Q,Me,oe,ce,me,Re,Ce,ze);return le.update(K),le}},4554:function(d,s,t){d.exports=function(f){var b=f.gl;return new a(f,o(b,[0,0,0,1,1,0,1,1]),r(b,n.boxVert,n.lineFrag))};var o=t(5827),r=t(5158),n=t(2709);function a(f,b,v){this.plot=f,this.vbo=b,this.shader=v}var i,c,h=a.prototype;h.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},h.drawBox=(i=[0,0],c=[0,0],function(f,b,v,g,y){var p=this.plot,m=this.shader,w=p.gl;i[0]=f,i[1]=b,c[0]=v,c[1]=g,m.uniforms.lo=i,m.uniforms.hi=c,m.uniforms.color=y,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(d,s,t){d.exports=function(p){var m=p.gl;return new i(p,o(m),r(m,a.gridVert,a.gridFrag),r(m,a.tickVert,a.gridFrag))};var o=t(5827),r=t(5158),n=t(5070),a=t(2709);function i(p,m,w,u){this.plot=p,this.vbo=m,this.shader=w,this.tickShader=u,this.ticks=[[],[]]}function c(p,m){return p-m}var h,f,b,v,g,y=i.prototype;y.draw=(h=[0,0],f=[0,0],b=[0,0],function(){for(var p=this.plot,m=this.vbo,w=this.shader,u=this.ticks,S=p.gl,_=p._tickBounds,E=p.dataBox,L=p.viewBox,C=p.gridLineWidth,P=p.gridLineColor,I=p.gridLineEnable,U=p.pixelRatio,z=0;z<2;++z){var H=_[z],F=_[z+2]-H,N=.5*(E[z+2]+E[z]),B=E[z+2]-E[z];f[z]=2*F/B,h[z]=2*(H-N)/B}w.bind(),m.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=h,w.uniforms.dataScale=f;var j=0;for(z=0;z<2;++z){b[0]=b[1]=0,b[z]=1,w.uniforms.dataAxis=b,w.uniforms.lineWidth=C[z]/(L[z+2]-L[z])*U,w.uniforms.color=P[z];var K=6*u[z].length;I[z]&&K&&S.drawArrays(S.TRIANGLES,j,K),j+=K}}),y.drawTickMarks=function(){var p=[0,0],m=[0,0],w=[1,0],u=[0,1],S=[0,0],_=[0,0];return function(){for(var E=this.plot,L=this.vbo,C=this.tickShader,P=this.ticks,I=E.gl,U=E._tickBounds,z=E.dataBox,H=E.viewBox,F=E.pixelRatio,N=E.screenBox,B=N[2]-N[0],j=N[3]-N[1],K=H[2]-H[0],G=H[3]-H[1],V=0;V<2;++V){var W=U[V],J=U[V+2]-W,X=.5*(z[V+2]+z[V]),ee=z[V+2]-z[V];m[V]=2*J/ee,p[V]=2*(W-X)/ee}m[0]*=K/B,p[0]*=K/B,m[1]*=G/j,p[1]*=G/j,C.bind(),L.bind(),C.attributes.dataCoord.pointer();var re=C.uniforms;re.dataShift=p,re.dataScale=m;var ie=E.tickMarkLength,se=E.tickMarkWidth,fe=E.tickMarkColor,ye=6*P[0].length,ge=Math.min(n.ge(P[0],(z[0]-U[0])/(U[2]-U[0]),c),P[0].length),he=Math.min(n.gt(P[0],(z[2]-U[0])/(U[2]-U[0]),c),P[0].length),ve=0+6*ge,Ie=6*Math.max(0,he-ge),xe=Math.min(n.ge(P[1],(z[1]-U[1])/(U[3]-U[1]),c),P[1].length),Ae=Math.min(n.gt(P[1],(z[3]-U[1])/(U[3]-U[1]),c),P[1].length),Se=ye+6*xe,Te=6*Math.max(0,Ae-xe);S[0]=2*(H[0]-ie[1])/B-1,S[1]=(H[3]+H[1])/j-1,_[0]=ie[1]*F/B,_[1]=se[1]*F/j,Te&&(re.color=fe[1],re.tickScale=_,re.dataAxis=u,re.screenOffset=S,I.drawArrays(I.TRIANGLES,Se,Te)),S[0]=(H[2]+H[0])/B-1,S[1]=2*(H[1]-ie[0])/j-1,_[0]=se[0]*F/B,_[1]=ie[0]*F/j,Ie&&(re.color=fe[0],re.tickScale=_,re.dataAxis=w,re.screenOffset=S,I.drawArrays(I.TRIANGLES,ve,Ie)),S[0]=2*(H[2]+ie[3])/B-1,S[1]=(H[3]+H[1])/j-1,_[0]=ie[3]*F/B,_[1]=se[3]*F/j,Te&&(re.color=fe[3],re.tickScale=_,re.dataAxis=u,re.screenOffset=S,I.drawArrays(I.TRIANGLES,Se,Te)),S[0]=(H[2]+H[0])/B-1,S[1]=2*(H[3]+ie[2])/j-1,_[0]=se[2]*F/B,_[1]=ie[2]*F/j,Ie&&(re.color=fe[2],re.tickScale=_,re.dataAxis=w,re.screenOffset=S,I.drawArrays(I.TRIANGLES,ve,Ie))}}(),y.update=(v=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(p){for(var m=p.ticks,w=p.bounds,u=new Float32Array(18*(m[0].length+m[1].length)),S=(this.plot.zeroLineEnable,0),_=[[],[]],E=0;E<2;++E)for(var L=_[E],C=m[E],P=w[E],I=w[E+2],U=0;U<C.length;++U){var z=(C[U].x-P)/(I-P);L.push(z);for(var H=0;H<6;++H)u[S++]=z,u[S++]=v[H],u[S++]=g[H]}this.ticks=_,this.vbo.update(u)}),y.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(d,s,t){d.exports=function(f){var b=f.gl;return new a(f,o(b,[-1,-1,-1,1,1,-1,1,1]),r(b,n.lineVert,n.lineFrag))};var o=t(5827),r=t(5158),n=t(2709);function a(f,b,v){this.plot=f,this.vbo=b,this.shader=v}var i,c,h=a.prototype;h.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},h.drawLine=(i=[0,0],c=[0,0],function(f,b,v,g,y,p){var m=this.plot,w=this.shader,u=m.gl;i[0]=f,i[1]=b,c[0]=v,c[1]=g,w.uniforms.start=i,w.uniforms.end=c,w.uniforms.width=y*m.pixelRatio,w.uniforms.color=p,u.drawArrays(u.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(d,s,t){var o=t(6832),r=o([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);d.exports={lineVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:o([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(d,s,t){d.exports=function(m){var w=m.gl;return new c(m,o(w),r(w,i.textVert,i.textFrag))};var o=t(5827),r=t(5158),n=t(6946),a=t(5070),i=t(2709);function c(m,w,u){this.plot=m,this.vbo=w,this.shader=u,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,f,b,v,g,y,p=c.prototype;p.drawTicks=(h=[0,0],f=[0,0],b=[0,0],function(m){var w=this.plot,u=this.shader,S=this.tickX[m],_=this.tickOffset[m],E=w.gl,L=w.viewBox,C=w.dataBox,P=w.screenBox,I=w.pixelRatio,U=w.tickEnable,z=w.tickPad,H=w.tickColor,F=w.tickAngle,N=w.labelEnable,B=w.labelPad,j=w.labelColor,K=w.labelAngle,G=this.labelOffset[m],V=this.labelCount[m],W=a.lt(S,C[m]),J=a.le(S,C[m+2]);h[0]=h[1]=0,h[m]=1,f[m]=(L[2+m]+L[m])/(P[2+m]-P[m])-1;var X=2/P[2+(1^m)]-P[1^m];f[1^m]=X*L[1^m]-1,U[m]&&(f[1^m]-=X*I*z[m],W<J&&_[J]>_[W]&&(u.uniforms.dataAxis=h,u.uniforms.screenOffset=f,u.uniforms.color=H[m],u.uniforms.angle=F[m],E.drawArrays(E.TRIANGLES,_[W],_[J]-_[W]))),N[m]&&V&&(f[1^m]-=X*I*B[m],u.uniforms.dataAxis=b,u.uniforms.screenOffset=f,u.uniforms.color=j[m],u.uniforms.angle=K[m],E.drawArrays(E.TRIANGLES,G,V)),f[1^m]=X*L[2+(1^m)]-1,U[m+2]&&(f[1^m]+=X*I*z[m+2],W<J&&_[J]>_[W]&&(u.uniforms.dataAxis=h,u.uniforms.screenOffset=f,u.uniforms.color=H[m+2],u.uniforms.angle=F[m+2],E.drawArrays(E.TRIANGLES,_[W],_[J]-_[W]))),N[m+2]&&V&&(f[1^m]+=X*I*B[m+2],u.uniforms.dataAxis=b,u.uniforms.screenOffset=f,u.uniforms.color=j[m+2],u.uniforms.angle=K[m+2],E.drawArrays(E.TRIANGLES,G,V))}),p.drawTitle=function(){var m=[0,0],w=[0,0];return function(){var u=this.plot,S=this.shader,_=u.gl,E=u.screenBox,L=u.titleCenter,C=u.titleAngle,P=u.titleColor,I=u.pixelRatio;if(this.titleCount){for(var U=0;U<2;++U)w[U]=2*(L[U]*I-E[U])/(E[2+U]-E[U])-1;S.bind(),S.uniforms.dataAxis=m,S.uniforms.screenOffset=w,S.uniforms.angle=C,S.uniforms.color=P,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}}(),p.bind=(v=[0,0],g=[0,0],y=[0,0],function(){var m=this.plot,w=this.shader,u=m._tickBounds,S=m.dataBox,_=m.screenBox,E=m.viewBox;w.bind();for(var L=0;L<2;++L){var C=u[L],P=u[L+2]-C,I=.5*(S[L+2]+S[L]),U=S[L+2]-S[L],z=E[L],H=E[L+2]-z,F=_[L],N=_[L+2]-F;g[L]=2*P/U*H/N,v[L]=2*(C-I)/U*H/N}y[1]=2*m.pixelRatio/(_[3]-_[1]),y[0]=y[1]*(_[3]-_[1])/(_[2]-_[0]),w.uniforms.dataScale=g,w.uniforms.dataShift=v,w.uniforms.textScale=y,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),p.update=function(m){var w,u,S,_,E,L=[],C=m.ticks,P=m.bounds;for(E=0;E<2;++E){var I=[Math.floor(L.length/3)],U=[-1/0],z=C[E];for(w=0;w<z.length;++w){var H=z[w],F=H.x,N=H.text,B=H.font||"sans-serif";_=H.fontSize||12;for(var j=1/(P[E+2]-P[E]),K=P[E],G=N.split(`
`),V=0;V<G.length;V++)for(S=n(B,G[V]).data,u=0;u<S.length;u+=2)L.push(S[u]*_,-S[u+1]*_-V*_*1.2,(F-K)*j);I.push(Math.floor(L.length/3)),U.push(F)}this.tickOffset[E]=I,this.tickX[E]=U}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(L.length/3),S=n(m.labelFont[E],m.labels[E],{textAlign:"center"}).data,_=m.labelSize[E],w=0;w<S.length;w+=2)L.push(S[w]*_,-S[w+1]*_,0);this.labelCount[E]=Math.floor(L.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(L.length/3),S=n(m.titleFont,m.title).data,_=m.titleSize,w=0;w<S.length;w+=2)L.push(S[w]*_,-S[w+1]*_,0);this.titleCount=Math.floor(L.length/3)-this.titleOffset,this.vbo.update(L)},p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(d,s,t){d.exports=function(v){var g=v.gl,y=new c(g,o(g,[g.drawingBufferWidth,g.drawingBufferHeight]));return y.grid=r(y),y.text=n(y),y.line=a(y),y.box=i(y),y.update(v),y};var o=t(2611),r=t(3016),n=t(5613),a=t(1154),i=t(4554);function c(v,g){this.gl=v,this.pickBuffer=g,this.screenBox=[0,0,v.drawingBufferWidth,v.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=c.prototype;function f(v){for(var g=v.slice(),y=0;y<g.length;++y)g[y]=g[y].slice();return g}function b(v,g){return v.x-g.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var v=this.gl,g=this.screenBox,y=this.viewBox,p=this.dataBox,m=this.pixelRatio,w=this.grid,u=this.line,S=this.text,_=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,v.bindFramebuffer(v.FRAMEBUFFER,null),v.enable(v.SCISSOR_TEST),v.disable(v.DEPTH_TEST),v.depthFunc(v.LESS),v.depthMask(!1),v.enable(v.BLEND),v.blendEquation(v.FUNC_ADD,v.FUNC_ADD),v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA),this.borderColor){v.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.borderColor;v.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT)}v.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),v.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var L=this.backgroundColor;v.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),v.clear(v.COLOR_BUFFER_BIT),w.draw();var C=this.zeroLineEnable,P=this.zeroLineColor,I=this.zeroLineWidth;if(C[0]||C[1]){u.bind();for(var U=0;U<2;++U)if(C[U]&&p[U]<=0&&p[U+2]>=0){var z=g[U]-p[U]*(g[U+2]-g[U])/(p[U+2]-p[U]);U===0?u.drawLine(z,g[1],z,g[3],I[U],P[U]):u.drawLine(g[0],z,g[2],z,I[U],P[U])}}for(U=0;U<_.length;++U)_[U].draw();v.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),v.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),u.bind();var H=this.borderLineEnable,F=this.borderLineWidth,N=this.borderLineColor;for(H[1]&&u.drawLine(y[0],y[1]-.5*F[1]*m,y[0],y[3]+.5*F[3]*m,F[1],N[1]),H[0]&&u.drawLine(y[0]-.5*F[0]*m,y[1],y[2]+.5*F[2]*m,y[1],F[0],N[0]),H[3]&&u.drawLine(y[2],y[1]-.5*F[1]*m,y[2],y[3]+.5*F[3]*m,F[3],N[3]),H[2]&&u.drawLine(y[0]-.5*F[0]*m,y[3],y[2]+.5*F[2]*m,y[3],F[2],N[2]),S.bind(),U=0;U<2;++U)S.drawTicks(U);this.titleEnable&&S.drawTitle();var B=this.overlays;for(U=0;U<B.length;++U)B[U].draw();v.disable(v.SCISSOR_TEST),v.disable(v.BLEND),v.depthMask(!0)}},h.drawPick=function(){if(!this.static){var v=this.pickBuffer;this.gl,this._pickTimeout=null,v.begin();for(var g=1,y=this.objects,p=0;p<y.length;++p)g=y[p].drawPick(g);v.end()}},h.pick=function(v,g){if(!this.static){var y=this.pixelRatio,p=this.pickPixelRatio,m=this.viewBox,w=0|Math.round((v-m[0]/y)*p),u=0|Math.round((g-m[1]/y)*p),S=this.pickBuffer.query(w,u,this.pickRadius);if(!S)return null;for(var _=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,L=0;L<E.length;++L){var C=E[L].pick(w,u,_);if(C)return C}return null}},h.setScreenBox=function(v){var g=this.screenBox,y=this.pixelRatio;g[0]=0|Math.round(v[0]*y),g[1]=0|Math.round(v[1]*y),g[2]=0|Math.round(v[2]*y),g[3]=0|Math.round(v[3]*y),this.setDirty()},h.setDataBox=function(v){var g=this.dataBox;(g[0]!==v[0]||g[1]!==v[1]||g[2]!==v[2]||g[3]!==v[3])&&(g[0]=v[0],g[1]=v[1],g[2]=v[2],g[3]=v[3],this.setDirty())},h.setViewBox=function(v){var g=this.pixelRatio,y=this.viewBox;y[0]=0|Math.round(v[0]*g),y[1]=0|Math.round(v[1]*g),y[2]=0|Math.round(v[2]*g),y[3]=0|Math.round(v[3]*g);var p=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((v[2]-v[0])*p),0|Math.round((v[3]-v[1])*p)],this.setDirty()},h.update=function(v){v=v||{};var g=this.gl;this.pixelRatio=v.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(v.screenBox||[0,0,g.drawingBufferWidth/y,g.drawingBufferHeight/y]),this.screenBox,this.setViewBox(v.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var p=this.viewBox,m=(p[2]-p[0])/(p[3]-p[1]);this.setDataBox(v.dataBox||[-10,-10/m,10,10/m]),this.borderColor=v.borderColor!==!1&&(v.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(v.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(v.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(v.gridLineWidth||[1,1]).slice(),this.gridLineColor=f(v.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(v.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(v.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=f(v.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(v.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(v.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=f(v.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(v.titleCenter||[.5*(p[0]+p[2])/y,(p[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in v)||!!v.titleEnable,this.titleAngle=v.titleAngle||0,this.titleColor=(v.titleColor||[0,0,0,1]).slice(),this.labelPad=(v.labelPad||[15,15,15,15]).slice(),this.labelAngle=(v.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(v.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=f(v.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(v.tickPad||[15,15,15,15]).slice(),this.tickAngle=(v.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(v.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=f(v.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(v.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(v.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=f(v.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=v.ticks||[[],[]],u=this._tickBounds;u[0]=u[1]=1/0,u[2]=u[3]=-1/0;for(var S=0;S<2;++S){var _=w[S].slice(0);_.length!==0&&(_.sort(b),u[S]=Math.min(u[S],_[0].x),u[S+2]=Math.max(u[S+2],_[_.length-1].x))}this.grid.update({bounds:u,ticks:w}),this.text.update({bounds:u,ticks:w,labels:v.labels||["x","y"],labelSize:v.labelSize||[12,12],labelFont:v.labelFont||["sans-serif","sans-serif"],title:v.title||"",titleSize:v.titleSize||18,titleFont:v.titleFont||"sans-serif"}),this.static=!!v.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var v=this.objects.length-1;v>=0;--v)this.objects[v].dispose();for(this.objects.length=0,v=this.overlays.length-1;v>=0;--v)this.overlays[v].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(v){this.objects.indexOf(v)<0&&(this.objects.push(v),this.setDirty())},h.removeObject=function(v){for(var g=this.objects,y=0;y<g.length;++y)if(g[y]===v){g.splice(y,1),this.setDirty();break}},h.addOverlay=function(v){this.overlays.indexOf(v)<0&&(this.overlays.push(v),this.setOverlayDirty())},h.removeOverlay=function(v){for(var g=this.overlays,y=0;y<g.length;++y)if(g[y]===v){g.splice(y,1),this.setOverlayDirty();break}}},4296:function(d,s,t){d.exports=function(h,f){h=h||document.body;var b=[.01,1/0];"distanceLimits"in(f=f||{})&&(b[0]=f.distanceLimits[0],b[1]=f.distanceLimits[1]),"zoomMin"in f&&(b[0]=f.zoomMin),"zoomMax"in f&&(b[1]=f.zoomMax);var v=r({center:f.center||[0,0,0],up:f.up||[0,1,0],eye:f.eye||[0,0,10],mode:f.mode||"orbit",distanceLimits:b}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,p=h.clientWidth,m=h.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:v,element:h,delay:f.delay||16,rotateSpeed:f.rotateSpeed||1,zoomSpeed:f.zoomSpeed||1,translateSpeed:f.translateSpeed||1,flipX:!!f.flipX,flipY:!!f.flipY,modes:v.modes,_ortho:f._ortho||f.projection&&f.projection.type==="orthographic"||!1,tick:function(){var u=o(),S=this.delay,_=u-2*S;v.idle(u-S),v.recalcMatrix(_),v.flush(u-(100+2*S));for(var E=!0,L=v.computedMatrix,C=0;C<16;++C)E=E&&g[C]===L[C],g[C]=L[C];var P=h.clientWidth===p&&h.clientHeight===m;return p=h.clientWidth,m=h.clientHeight,E?!P:(y=Math.exp(v.computedRadius[0]),!0)},lookAt:function(u,S,_){v.lookAt(v.lastT(),u,S,_)},rotate:function(u,S,_){v.rotate(v.lastT(),u,S,_)},pan:function(u,S,_){v.pan(v.lastT(),u,S,_)},translate:function(u,S,_){v.translate(v.lastT(),u,S,_)}};return Object.defineProperties(w,{matrix:{get:function(){return v.computedMatrix},set:function(u){return v.setMatrix(v.lastT(),u),v.computedMatrix},enumerable:!0},mode:{get:function(){return v.getMode()},set:function(u){var S=v.computedUp.slice(),_=v.computedEye.slice(),E=v.computedCenter.slice();if(v.setMode(u),u==="turntable"){var L=o();v._active.lookAt(L,_,E,S),v._active.lookAt(L+500,_,E,[0,0,1]),v._active.flush(L)}return v.getMode()},enumerable:!0},center:{get:function(){return v.computedCenter},set:function(u){return v.lookAt(v.lastT(),null,u),v.computedCenter},enumerable:!0},eye:{get:function(){return v.computedEye},set:function(u){return v.lookAt(v.lastT(),u),v.computedEye},enumerable:!0},up:{get:function(){return v.computedUp},set:function(u){return v.lookAt(v.lastT(),null,null,u),v.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(u){return v.setDistance(v.lastT(),u),u},enumerable:!0},distanceLimits:{get:function(){return v.getDistanceLimits(b)},set:function(u){return v.setDistanceLimits(u),u},enumerable:!0}}),h.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function u(S,_,E,L){var C=w.keyBindingMode;if(C!==!1){var P=C==="rotate",I=C==="pan",U=C==="zoom",z=!!L.control,H=!!L.alt,F=!!L.shift,N=!!(1&S),B=!!(2&S),j=!!(4&S),K=1/h.clientHeight,G=K*(_-w._lastX),V=K*(E-w._lastY),W=w.flipX?1:-1,J=w.flipY?1:-1,X=Math.PI*w.rotateSpeed,ee=o();if(w._lastX!==-1&&w._lastY!==-1&&((P&&N&&!z&&!H&&!F||N&&!z&&!H&&F)&&v.rotate(ee,W*X*G,-J*X*V,0),(I&&N&&!z&&!H&&!F||B||N&&z&&!H&&!F)&&v.pan(ee,-w.translateSpeed*G*y,w.translateSpeed*V*y,0),U&&N&&!z&&!H&&!F||j||N&&!z&&H&&!F)){var re=-w.zoomSpeed*V/window.innerHeight*(ee-v.lastT())*100;v.pan(ee,0,0,y*(Math.exp(re)-1))}return w._lastX=_,w._lastY=E,w._lastMods=L,!0}}w.mouseListener=n(h,u),h.addEventListener("touchstart",function(S){var _=i(S.changedTouches[0],h);u(0,_[0],_[1],w._lastMods),u(1,_[0],_[1],w._lastMods)},!!c&&{passive:!0}),h.addEventListener("touchmove",function(S){var _=i(S.changedTouches[0],h);u(1,_[0],_[1],w._lastMods),S.preventDefault()},!!c&&{passive:!1}),h.addEventListener("touchend",function(S){u(0,w._lastX,w._lastY,w._lastMods)},!!c&&{passive:!0}),w.wheelListener=a(h,function(S,_){if(w.keyBindingMode!==!1&&w.enableWheel){var E=w.flipX?1:-1,L=w.flipY?1:-1,C=o();if(Math.abs(S)>Math.abs(_))v.rotate(C,0,0,-S*E*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var P=-w.zoomSpeed*L*_/window.innerHeight*(C-v.lastT())/20;v.pan(C,0,0,y*(Math.exp(P)-1))}}},!0)},w.enableMouseListeners(),w};var o=t(8161),r=t(1152),n=t(6145),a=t(6475),i=t(2565),c=t(5233)},8245:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=o([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec2"}])}},1059:function(d,s,t){var o=t(4296),r=t(7453),n=t(2771),a=t(6496),i=t(2611),c=t(4234),h=t(8126),f=t(6145),b=t(1120),v=t(5268),g=t(8245),y=t(2861)({tablet:!0,featureDetect:!0});function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(u){var S=Math.round(Math.log(Math.abs(u))/Math.log(10));if(S<0){var _=Math.round(Math.pow(10,-S));return Math.ceil(u*_)/_}return S>0?(_=Math.round(Math.pow(10,S)),Math.ceil(u/_)*_):Math.ceil(u)}function w(u){return typeof u!="boolean"||u}d.exports={createScene:function(u){(u=u||{}).camera=u.camera||{};var S=u.canvas;S||(S=document.createElement("canvas"),u.container?u.container.appendChild(S):document.body.appendChild(S));var _=u.gl;if(_||(u.glOptions&&(y=!!u.glOptions.preserveDrawingBuffer),_=function(Ie,xe){var Ae=null;try{(Ae=Ie.getContext("webgl",xe))||(Ae=Ie.getContext("experimental-webgl",xe))}catch{return null}return Ae}(S,u.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:y})),!_)throw new Error("webgl not supported");var E=u.bounds||[[-10,-10,-10],[10,10,10]],L=new p,C=c(_,_.drawingBufferWidth,_.drawingBufferHeight,{preferFloat:!y}),P=g(_),I=u.cameraObject&&u.cameraObject._ortho===!0||u.camera.projection&&u.camera.projection.type==="orthographic"||!1,U={eye:u.camera.eye||[2,0,0],center:u.camera.center||[0,0,0],up:u.camera.up||[0,1,0],zoomMin:u.camera.zoomMax||.1,zoomMax:u.camera.zoomMin||100,mode:u.camera.mode||"turntable",_ortho:I},z=u.axes||{},H=r(_,z);H.enable=!z.disable;var F=u.spikes||{},N=a(_,F),B=[],j=[],K=[],G=[],V=!0,W=!0,J={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},X=(W=!0,[_.drawingBufferWidth,_.drawingBufferHeight]),ee=u.cameraObject||o(S,U),re={gl:_,contextLost:!1,pixelRatio:u.pixelRatio||1,canvas:S,selection:L,camera:ee,axes:H,axesPixels:null,spikes:N,bounds:E,objects:B,shape:X,aspect:u.aspectRatio||[1,1,1],pickRadius:u.pickRadius||10,zNear:u.zNear||.01,zFar:u.zFar||1e3,fovy:u.fovy||Math.PI/4,clearColor:u.clearColor||[0,0,0,0],autoResize:w(u.autoResize),autoBounds:w(u.autoBounds),autoScale:!!u.autoScale,autoCenter:w(u.autoCenter),clipToBounds:w(u.clipToBounds),snapToData:!!u.snapToData,onselect:u.onselect||null,onrender:u.onrender||null,onclick:u.onclick||null,cameraParams:J,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ie){this.aspect[0]=Ie.x,this.aspect[1]=Ie.y,this.aspect[2]=Ie.z,W=!0},setBounds:function(Ie,xe){this.bounds[0][Ie]=xe.min,this.bounds[1][Ie]=xe.max},setClearColor:function(Ie){this.clearColor=Ie},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ie=[_.drawingBufferWidth/re.pixelRatio|0,_.drawingBufferHeight/re.pixelRatio|0];function se(){if(!re._stopped&&re.autoResize){var Ie=S.parentNode,xe=1,Ae=1;Ie&&Ie!==document.body?(xe=Ie.clientWidth,Ae=Ie.clientHeight):(xe=window.innerWidth,Ae=window.innerHeight);var Se=0|Math.ceil(xe*re.pixelRatio),Te=0|Math.ceil(Ae*re.pixelRatio);if(Se!==S.width||Te!==S.height){S.width=Se,S.height=Te;var Q=S.style;Q.position=Q.position||"absolute",Q.left="0px",Q.top="0px",Q.width=xe+"px",Q.height=Ae+"px",V=!0}}}function fe(){for(var Ie=B.length,xe=G.length,Ae=0;Ae<xe;++Ae)K[Ae]=0;e:for(Ae=0;Ae<Ie;++Ae){var Se=B[Ae],Te=Se.pickSlots;if(Te){for(var Q=0;Q<xe;++Q)if(K[Q]+Te<255){j[Ae]=Q,Se.setPickBase(K[Q]+1),K[Q]+=Te;continue e}var oe=i(_,X);j[Ae]=xe,G.push(oe),K.push(Te),Se.setPickBase(1),xe+=1}else j[Ae]=-1}for(;xe>0&&K[xe-1]===0;)K.pop(),G.pop().dispose()}function ye(){if(re.contextLost)return!0;_.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}re.autoResize&&se(),window.addEventListener("resize",se),re.update=function(Ie){re._stopped||(V=!0,W=!0)},re.add=function(Ie){re._stopped||(Ie.axes=H,B.push(Ie),j.push(-1),V=!0,W=!0,fe())},re.remove=function(Ie){if(!re._stopped){var xe=B.indexOf(Ie);xe<0||(B.splice(xe,1),j.pop(),V=!0,W=!0,fe())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",se),S.removeEventListener("webglcontextlost",ye),re.mouseListener.enabled=!1,!re.contextLost)){H.dispose(),N.dispose();for(var Ie=0;Ie<B.length;++Ie)B[Ie].dispose();for(C.dispose(),Ie=0;Ie<G.length;++Ie)G[Ie].dispose();P.dispose(),_=null,H=null,N=null,B=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=f(S,function(Ie,xe,Ae){if(!re._stopped){var Se=G.length,Te=B.length,Q=L.object;L.distance=1/0,L.mouse[0]=xe,L.mouse[1]=Ae,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var oe=!1;if(Ie&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(W=!0),re._mouseRotating=!1;for(var ce=0;ce<Se;++ce){var me=G[ce].query(xe,ie[1]-Ae-1,re.pickRadius);if(me){if(me.distance>L.distance)continue;for(var Me=0;Me<Te;++Me){var Re=B[Me];if(j[Me]===ce){var Ce=Re.pick(me);Ce&&(L.buttons=Ie,L.screen=me.coord,L.distance=me.distance,L.object=Re,L.index=Ce.distance,L.dataPosition=Ce.position,L.dataCoordinate=Ce.dataCoordinate,L.data=Ce,oe=!0)}}}}}Q&&Q!==L.object&&(Q.highlight&&Q.highlight(null),V=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),V=!0),(oe=oe||L.object!==Q)&&re.onselect&&re.onselect(L),1&Ie&&!(1&re._prevButtons)&&re.onclick&&re.onclick(L),re._prevButtons=Ie}})},S.addEventListener("webglcontextlost",ye);var ge=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],he=[ge[0].slice(),ge[1].slice()];function ve(){if(!ye()){se();var Ie=re.camera.tick();J.view=re.camera.matrix,V=V||Ie,W=W||Ie,H.pixelRatio=re.pixelRatio,N.pixelRatio=re.pixelRatio;var xe=B.length,Ae=ge[0],Se=ge[1];Ae[0]=Ae[1]=Ae[2]=1/0,Se[0]=Se[1]=Se[2]=-1/0;for(var Te=0;Te<xe;++Te){(Fe=B[Te]).pixelRatio=re.pixelRatio,Fe.axes=re.axes,V=V||!!Fe.dirty,W=W||!!Fe.dirty;var Q=Fe.bounds;if(Q)for(var oe=Q[0],ce=Q[1],me=0;me<3;++me)Ae[me]=Math.min(Ae[me],oe[me]),Se[me]=Math.max(Se[me],ce[me])}var Me=re.bounds;if(re.autoBounds)for(me=0;me<3;++me){if(Se[me]<Ae[me])Ae[me]=-1,Se[me]=1;else{Ae[me]===Se[me]&&(Ae[me]-=1,Se[me]+=1);var Re=.05*(Se[me]-Ae[me]);Ae[me]=Ae[me]-Re,Se[me]=Se[me]+Re}Me[0][me]=Ae[me],Me[1][me]=Se[me]}var Ce=!1;for(me=0;me<3;++me)Ce=Ce||he[0][me]!==Me[0][me]||he[1][me]!==Me[1][me],he[0][me]=Me[0][me],he[1][me]=Me[1][me];if(W=W||Ce,V=V||Ce){if(Ce){var ze=[0,0,0];for(Te=0;Te<3;++Te)ze[Te]=m((Me[1][Te]-Me[0][Te])/10);H.autoTicks?H.update({bounds:Me,tickSpacing:ze}):H.update({bounds:Me})}var le=_.drawingBufferWidth,de=_.drawingBufferHeight;for(X[0]=le,X[1]=de,ie[0]=0|Math.max(le/re.pixelRatio,1),ie[1]=0|Math.max(de/re.pixelRatio,1),function(Ve,He){var rt=Ve.bounds,tt=Ve.cameraParams,ot=tt.projection,ht=tt.model,_t=Ve.gl.drawingBufferWidth,dt=Ve.gl.drawingBufferHeight,bt=Ve.zNear,St=Ve.zFar,Et=Ve.fovy,zt=_t/dt;He?(v(ot,-zt,zt,-1,1,bt,St),tt._ortho=!0):(b(ot,Et,zt,bt,St),tt._ortho=!1);for(var Ut=0;Ut<16;++Ut)ht[Ut]=0;ht[15]=1;var Pt=0;for(Ut=0;Ut<3;++Ut)Pt=Math.max(Pt,rt[1][Ut]-rt[0][Ut]);for(Ut=0;Ut<3;++Ut)Ve.autoScale?ht[5*Ut]=Ve.aspect[Ut]/(rt[1][Ut]-rt[0][Ut]):ht[5*Ut]=1/Pt,Ve.autoCenter&&(ht[12+Ut]=.5*-ht[5*Ut]*(rt[0][Ut]+rt[1][Ut]))}(re,I),Te=0;Te<xe;++Te)(Fe=B[Te]).axesBounds=Me,re.clipToBounds&&(Fe.clipBounds=Me);L.object&&(re.snapToData?N.position=L.dataCoordinate:N.position=L.dataPosition,N.bounds=Me),W&&(W=!1,function(){if(!ye()){_.colorMask(!0,!0,!0,!0),_.depthMask(!0),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL);for(var Ve=B.length,He=G.length,rt=0;rt<He;++rt){var tt=G[rt];tt.shape=ie,tt.begin();for(var ot=0;ot<Ve;++ot)if(j[ot]===rt){var ht=B[ot];ht.drawPick&&(ht.pixelRatio=1,ht.drawPick(J))}tt.end()}}}()),re.axesPixels=n(re.axes,J,le,de),re.onrender&&re.onrender(),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,le,de),re.clearRGBA(),_.depthMask(!0),_.colorMask(!0,!0,!0,!0),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.BLEND),_.disable(_.CULL_FACE);var be=!1;for(H.enable&&(be=be||H.isTransparent(),H.draw(J)),N.axes=H,L.object&&N.draw(J),_.disable(_.CULL_FACE),Te=0;Te<xe;++Te)(Fe=B[Te]).axes=H,Fe.pixelRatio=re.pixelRatio,Fe.isOpaque&&Fe.isOpaque()&&Fe.draw(J),Fe.isTransparent&&Fe.isTransparent()&&(be=!0);if(be){for(C.shape=X,C.bind(),_.clear(_.DEPTH_BUFFER_BIT),_.colorMask(!1,!1,!1,!1),_.depthMask(!0),_.depthFunc(_.LESS),H.enable&&H.isTransparent()&&H.drawTransparent(J),Te=0;Te<xe;++Te)(Fe=B[Te]).isOpaque&&Fe.isOpaque()&&Fe.draw(J);for(_.enable(_.BLEND),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.colorMask(!0,!0,!0,!0),_.depthMask(!1),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),H.isTransparent()&&H.drawTransparent(J),Te=0;Te<xe;++Te){var Fe;(Fe=B[Te]).isTransparent&&Fe.isTransparent()&&Fe.drawTransparent(J)}_.bindFramebuffer(_.FRAMEBUFFER,null),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.disable(_.DEPTH_TEST),P.bind(),C.color[0].bind(0),P.uniforms.accumBuffer=0,h(_),_.disable(_.BLEND)}for(V=!1,Te=0;Te<xe;++Te)B[Te].dirty=!1}}}return re.enableMouseListeners(),function Ie(){re._stopped||re.contextLost||(ve(),requestAnimationFrame(Ie))}(),re.redraw=function(){re._stopped||(V=!0,ve())},re},createCamera:o}},8023:function(d,s,t){var o=t(6832);s.pointVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(d,s,t){var o=t(5158),r=t(5827),n=t(5306),a=t(8023);function i(b,v,g,y,p){this.plot=b,this.offsetBuffer=v,this.pickBuffer=g,this.shader=y,this.pickShader=p,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}d.exports=function(b,v){var g=b.gl,y=new i(b,r(g),r(g),o(g,a.pointVertex,a.pointFragment),o(g,a.pickVertex,a.pickFragment));return y.update(v),b.addObject(y),y};var c,h,f=i.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(b){var v;function g(_,E){return _ in b?b[_]:E}b=b||{},this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var y=b.positions.length>>>1,p=b.positions instanceof Float32Array,m=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=y,w=b.positions,u=p?w:n.mallocFloat32(w.length),S=m?b.idToIndex:n.mallocInt32(y);if(p||u.set(w),!m)for(u.set(w),v=0;v<y;v++)S[v]=v;this.points=w,this.offsetBuffer.update(u),this.pickBuffer.update(S),p||n.free(u),m||n.free(S),this.pointCount=y,this.pickOffset=0},f.unifiedDraw=(c=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(b){var v=b!==void 0,g=v?this.pickShader:this.shader,y=this.plot.gl,p=this.plot.dataBox;if(this.pointCount===0)return b;var m=p[2]-p[0],w=p[3]-p[1],u=function(L,C){var P,I=0,U=L.length>>>1;for(P=0;P<U;P++){var z=L[2*P],H=L[2*P+1];z>=C[0]&&z<=C[2]&&H>=C[1]&&H<=C[3]&&I++}return I}(this.points,p),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));c[0]=2/m,c[4]=2/w,c[6]=-2*p[0]/m-1,c[7]=-2*p[1]/w-1,this.offsetBuffer.bind(),g.bind(),g.attributes.position.pointer(),g.uniforms.matrix=c,g.uniforms.color=this.color,g.uniforms.borderColor=this.borderColor,g.uniforms.pointCloud=S<5,g.uniforms.pointSize=S,g.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(h[0]=255&b,h[1]=b>>8&255,h[2]=b>>16&255,h[3]=b>>24&255,this.pickBuffer.bind(),g.attributes.pickId.pointer(y.UNSIGNED_BYTE),g.uniforms.pickOffset=h,this.pickOffset=b);var _=y.getParameter(y.BLEND),E=y.getParameter(y.DITHER);return _&&!this.blend&&y.disable(y.BLEND),E&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),_&&!this.blend&&y.enable(y.BLEND),E&&y.enable(y.DITHER),b+this.pointCount}),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(b,v,g){var y=this.pickOffset,p=this.pointCount;if(g<y||g>=y+p)return null;var m=g-y,w=this.points;return{object:this,pointId:m,dataCoord:[w[2*m],w[2*m+1]]}}},6093:function(d){d.exports=function(s,t,o,r){var n,a,i,c,h,f=t[0],b=t[1],v=t[2],g=t[3],y=o[0],p=o[1],m=o[2],w=o[3];return(a=f*y+b*p+v*m+g*w)<0&&(a=-a,y=-y,p=-p,m=-m,w=-w),1-a>1e-6?(n=Math.acos(a),i=Math.sin(n),c=Math.sin((1-r)*n)/i,h=Math.sin(r*n)/i):(c=1-r,h=r),s[0]=c*f+h*y,s[1]=c*b+h*p,s[2]=c*v+h*m,s[3]=c*g+h*w,s}},8240:function(d){d.exports=function(s){return s||s===0?s.toString():""}},4123:function(d,s,t){var o=t(875);d.exports=function(n,a,i){var c=r[a];if(c||(c=r[a]={}),n in c)return c[n];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},f=o(n,h);h.triangles=!1;var b,v,g=o(n,h);if(i&&i!==1){for(b=0;b<f.positions.length;++b)for(v=0;v<f.positions[b].length;++v)f.positions[b][v]/=i;for(b=0;b<g.positions.length;++b)for(v=0;v<g.positions[b].length;++v)g.positions[b][v]/=i}var y=[[1/0,1/0],[-1/0,-1/0]],p=g.positions.length;for(b=0;b<p;++b){var m=g.positions[b];for(v=0;v<2;++v)y[0][v]=Math.min(y[0][v],m[v]),y[1][v]=Math.max(y[1][v],m[v])}return c[n]=[f,g,y]};var r={}},9282:function(d,s,t){var o=t(5158),r=t(6832),n=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),i=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),h=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],b={vertex:n,fragment:c,attributes:f},v={vertex:a,fragment:c,attributes:f},g={vertex:i,fragment:c,attributes:f},y={vertex:n,fragment:h,attributes:f},p={vertex:a,fragment:h,attributes:f},m={vertex:i,fragment:h,attributes:f};function w(u,S){var _=o(u,S),E=_.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,_}s.createPerspective=function(u){return w(u,b)},s.createOrtho=function(u){return w(u,v)},s.createProject=function(u){return w(u,g)},s.createPickPerspective=function(u){return w(u,y)},s.createPickOrtho=function(u){return w(u,p)},s.createPickProject=function(u){return w(u,m)}},2182:function(d,s,t){var o=t(3596),r=t(5827),n=t(2944),a=t(5306),i=t(104),c=t(9282),h=t(4123),f=t(8240),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(j,K){var G=j[0],V=j[1],W=j[2],J=j[3];return j[0]=K[0]*G+K[4]*V+K[8]*W+K[12]*J,j[1]=K[1]*G+K[5]*V+K[9]*W+K[13]*J,j[2]=K[2]*G+K[6]*V+K[10]*W+K[14]*J,j[3]=K[3]*G+K[7]*V+K[11]*W+K[15]*J,j}function g(j,K,G,V){return v(V,V),v(V,V),v(V,V)}function y(j,K){this.index=j,this.dataCoordinate=this.position=K}function p(j){return j===!0||j>1?1:j}function m(j,K,G,V,W,J,X,ee,re,ie,se,fe){this.gl=j,this.pixelRatio=1,this.shader=K,this.orthoShader=G,this.projectShader=V,this.pointBuffer=W,this.colorBuffer=J,this.glyphBuffer=X,this.idBuffer=ee,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ie,this.pickOrthoShader=se,this.pickProjectShader=fe,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}d.exports=function(j){var K=j.gl,G=c.createPerspective(K),V=c.createOrtho(K),W=c.createProject(K),J=c.createPickPerspective(K),X=c.createPickOrtho(K),ee=c.createPickProject(K),re=r(K),ie=r(K),se=r(K),fe=r(K),ye=new m(K,G,V,W,re,ie,se,fe,n(K,[{buffer:re,size:3,type:K.FLOAT},{buffer:ie,size:4,type:K.FLOAT},{buffer:se,size:2,type:K.FLOAT},{buffer:fe,size:4,type:K.UNSIGNED_BYTE,normalized:!0}]),J,X,ee);return ye.update(j),ye};var w=m.prototype;w.pickSlots=1,w.setPickBase=function(j){this.pickId=j},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],S=[0,0,0],_=[0,0,0],E=[0,0,0,1],L=[0,0,0,1],C=b.slice(),P=[0,0,0],I=[[0,0,0],[0,0,0]];function U(j){return j[0]=j[1]=j[2]=0,j}function z(j,K){return j[0]=K[0],j[1]=K[1],j[2]=K[2],j[3]=1,j}function H(j,K,G,V){return j[0]=K[0],j[1]=K[1],j[2]=K[2],j[G]=V,j}var F=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function N(j,K,G,V,W,J,X){var ee=G.gl;if((J===G.projectHasAlpha||X)&&function(ie,se,fe,ye){var ge,he=se.axesProject,ve=se.gl,Ie=ie.uniforms,xe=fe.model||b,Ae=fe.view||b,Se=fe.projection||b,Te=se.axesBounds,Q=function(rt){for(var tt=I,ot=0;ot<2;++ot)for(var ht=0;ht<3;++ht)tt[ot][ht]=Math.max(Math.min(rt[ot][ht],1e8),-1e8);return tt}(se.clipBounds);ge=se.axes&&se.axes.lastCubeProps?se.axes.lastCubeProps.axis:[1,1,1],u[0]=2/ve.drawingBufferWidth,u[1]=2/ve.drawingBufferHeight,ie.bind(),Ie.view=Ae,Ie.projection=Se,Ie.screenSize=u,Ie.highlightId=se.highlightId,Ie.highlightScale=se.highlightScale,Ie.clipBounds=Q,Ie.pickGroup=se.pickId/255,Ie.pixelRatio=ye;for(var oe=0;oe<3;++oe)if(he[oe]){Ie.scale=se.projectScale[oe],Ie.opacity=se.projectOpacity[oe];for(var ce=C,me=0;me<16;++me)ce[me]=0;for(me=0;me<4;++me)ce[5*me]=1;ce[5*oe]=0,ge[oe]<0?ce[12+oe]=Te[0][oe]:ce[12+oe]=Te[1][oe],i(ce,xe,ce),Ie.model=ce;var Me=(oe+1)%3,Re=(oe+2)%3,Ce=U(S),ze=U(_);Ce[Me]=1,ze[Re]=1;var le=g(0,0,0,z(E,Ce)),de=g(0,0,0,z(L,ze));if(Math.abs(le[1])>Math.abs(de[1])){var be=le;le=de,de=be,be=Ce,Ce=ze,ze=be;var Fe=Me;Me=Re,Re=Fe}le[0]<0&&(Ce[Me]=-1),de[1]>0&&(ze[Re]=-1);var Ve=0,He=0;for(me=0;me<4;++me)Ve+=Math.pow(xe[4*Me+me],2),He+=Math.pow(xe[4*Re+me],2);Ce[Me]/=Math.sqrt(Ve),ze[Re]/=Math.sqrt(He),Ie.axes[0]=Ce,Ie.axes[1]=ze,Ie.fragClipBounds[0]=H(P,Q[0],oe,-1e8),Ie.fragClipBounds[1]=H(P,Q[1],oe,1e8),se.vao.bind(),se.vao.draw(ve.TRIANGLES,se.vertexCount),se.lineWidth>0&&(ve.lineWidth(se.lineWidth*ye),se.vao.draw(ve.LINES,se.lineVertexCount,se.vertexCount)),se.vao.unbind()}}(K,G,V,W),J===G.hasAlpha||X){j.bind();var re=j.uniforms;re.model=V.model||b,re.view=V.view||b,re.projection=V.projection||b,u[0]=2/ee.drawingBufferWidth,u[1]=2/ee.drawingBufferHeight,re.screenSize=u,re.highlightId=G.highlightId,re.highlightScale=G.highlightScale,re.fragClipBounds=F,re.clipBounds=G.axes.bounds,re.opacity=G.opacity,re.pickGroup=G.pickId/255,re.pixelRatio=W,G.vao.bind(),G.vao.draw(ee.TRIANGLES,G.vertexCount),G.lineWidth>0&&(ee.lineWidth(G.lineWidth*W),G.vao.draw(ee.LINES,G.lineVertexCount,G.vertexCount)),G.vao.unbind()}}function B(j,K,G,V){var W;W=Array.isArray(j)?K<j.length?j[K]:void 0:j,W=f(W);var J=!0;o(W)&&(W="▼",J=!1);var X=h(W,G,V);return{mesh:X[0],lines:X[1],bounds:X[2],visible:J}}w.draw=function(j){N(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,j,this.pixelRatio,!1,!1)},w.drawTransparent=function(j){N(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,j,this.pixelRatio,!0,!1)},w.drawPick=function(j){N(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,j,1,!0,!0)},w.pick=function(j){if(!j||j.id!==this.pickId)return null;var K=j.value[2]+(j.value[1]<<8)+(j.value[0]<<16);if(K>=this.pointCount||K<0)return null;var G=this.points[K],V=this._selectResult;V.index=K;for(var W=0;W<3;++W)V.position[W]=V.dataCoordinate[W]=G[W];return V},w.highlight=function(j){if(j){var K=j.index,G=255&K,V=K>>8&255,W=K>>16&255;this.highlightId=[G/255,V/255,W/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(j){if("perspective"in(j=j||{})&&(this.useOrtho=!j.perspective),"orthographic"in j&&(this.useOrtho=!!j.orthographic),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"project"in j)if(Array.isArray(j.project))this.axesProject=j.project;else{var K=!!j.project;this.axesProject=[K,K,K]}if("projectScale"in j)if(Array.isArray(j.projectScale))this.projectScale=j.projectScale.slice();else{var G=+j.projectScale;this.projectScale=[G,G,G]}if(this.projectHasAlpha=!1,"projectOpacity"in j){Array.isArray(j.projectOpacity)?this.projectOpacity=j.projectOpacity.slice():(G=+j.projectOpacity,this.projectOpacity=[G,G,G]);for(var V=0;V<3;++V)this.projectOpacity[V]=p(this.projectOpacity[V]),this.projectOpacity[V]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in j&&(this.opacity=p(j.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var W,J,X=j.position,ee=j.font||"normal",re=j.alignment||[0,0];if(re.length===2)W=re[0],J=re[1];else for(W=[],J=[],V=0;V<re.length;++V)W[V]=re[V][0],J[V]=re[V][1];var ie=[1/0,1/0,1/0],se=[-1/0,-1/0,-1/0],fe=j.glyph,ye=j.color,ge=j.size,he=j.angle,ve=j.lineColor,Ie=-1,xe=0,Ae=0,Se=0;if(X.length){Se=X.length;e:for(V=0;V<Se;++V){for(var Te=X[V],Q=0;Q<3;++Q)if(isNaN(Te[Q])||!isFinite(Te[Q]))continue e;var oe=(tt=B(fe,V,ee,this.pixelRatio)).mesh,ce=tt.lines,me=tt.bounds;xe+=3*oe.cells.length,Ae+=2*ce.edges.length}}var Me=xe+Ae,Re=a.mallocFloat(3*Me),Ce=a.mallocFloat(4*Me),ze=a.mallocFloat(2*Me),le=a.mallocUint32(Me);if(Me>0){var de=0,be=xe,Fe=[0,0,0,1],Ve=[0,0,0,1],He=Array.isArray(ye)&&Array.isArray(ye[0]),rt=Array.isArray(ve)&&Array.isArray(ve[0]);e:for(V=0;V<Se;++V){for(Ie+=1,Te=X[V],Q=0;Q<3;++Q){if(isNaN(Te[Q])||!isFinite(Te[Q]))continue e;se[Q]=Math.max(se[Q],Te[Q]),ie[Q]=Math.min(ie[Q],Te[Q])}oe=(tt=B(fe,V,ee,this.pixelRatio)).mesh,ce=tt.lines,me=tt.bounds;var tt,ot=tt.visible;if(ot)if(Array.isArray(ye)){if((ht=He?V<ye.length?ye[V]:[0,0,0,0]:ye).length===3){for(Q=0;Q<3;++Q)Fe[Q]=ht[Q];Fe[3]=1}else if(ht.length===4){for(Q=0;Q<4;++Q)Fe[Q]=ht[Q];!this.hasAlpha&&ht[3]<1&&(this.hasAlpha=!0)}}else Fe[0]=Fe[1]=Fe[2]=0,Fe[3]=1;else Fe=[1,1,1,0];if(ot)if(Array.isArray(ve)){var ht;if((ht=rt?V<ve.length?ve[V]:[0,0,0,0]:ve).length===3){for(Q=0;Q<3;++Q)Ve[Q]=ht[Q];Ve[Q]=1}else if(ht.length===4){for(Q=0;Q<4;++Q)Ve[Q]=ht[Q];!this.hasAlpha&&ht[3]<1&&(this.hasAlpha=!0)}}else Ve[0]=Ve[1]=Ve[2]=0,Ve[3]=1;else Ve=[1,1,1,0];var _t=.5;ot?Array.isArray(ge)?_t=V<ge.length?+ge[V]:12:ge?_t=+ge:this.useOrtho&&(_t=12):_t=0;var dt=0;Array.isArray(he)?dt=V<he.length?+he[V]:0:he&&(dt=+he);var bt=Math.cos(dt),St=Math.sin(dt);for(Te=X[V],Q=0;Q<3;++Q)se[Q]=Math.max(se[Q],Te[Q]),ie[Q]=Math.min(ie[Q],Te[Q]);var Et=W,zt=J;Et=0,Array.isArray(W)?Et=V<W.length?W[V]:0:W&&(Et=W),zt=0,Array.isArray(J)?zt=V<J.length?J[V]:0:J&&(zt=J);var Ut=[Et*=Et>0?1-me[0][0]:Et<0?1+me[1][0]:1,zt*=zt>0?1-me[0][1]:zt<0?1+me[1][1]:1],Pt=oe.cells||[],Ze=oe.positions||[];for(Q=0;Q<Pt.length;++Q)for(var Ye=Pt[Q],Be=0;Be<3;++Be){for(var ke=0;ke<3;++ke)Re[3*de+ke]=Te[ke];for(ke=0;ke<4;++ke)Ce[4*de+ke]=Fe[ke];le[de]=Ie;var Pe=Ze[Ye[Be]];ze[2*de]=_t*(bt*Pe[0]-St*Pe[1]+Ut[0]),ze[2*de+1]=_t*(St*Pe[0]+bt*Pe[1]+Ut[1]),de+=1}for(Pt=ce.edges,Ze=ce.positions,Q=0;Q<Pt.length;++Q)for(Ye=Pt[Q],Be=0;Be<2;++Be){for(ke=0;ke<3;++ke)Re[3*be+ke]=Te[ke];for(ke=0;ke<4;++ke)Ce[4*be+ke]=Ve[ke];le[be]=Ie,Pe=Ze[Ye[Be]],ze[2*be]=_t*(bt*Pe[0]-St*Pe[1]+Ut[0]),ze[2*be+1]=_t*(St*Pe[0]+bt*Pe[1]+Ut[1]),be+=1}}}this.bounds=[ie,se],this.points=X,this.pointCount=X.length,this.vertexCount=xe,this.lineVertexCount=Ae,this.pointBuffer.update(Re),this.colorBuffer.update(Ce),this.glyphBuffer.update(ze),this.idBuffer.update(le),a.free(Re),a.free(Ce),a.free(ze),a.free(le)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(d,s,t){var o=t(6832);s.boxVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(d,s,t){var o=t(5158),r=t(5827),n=t(1884);function a(c,h,f){this.plot=c,this.boxBuffer=h,this.boxShader=f,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}d.exports=function(c,h){var f=c.gl,b=new a(c,r(f,[0,0,0,1,1,0,1,1]),o(f,n.boxVertex,n.boxFragment));return b.update(h),c.addOverlay(b),b};var i=a.prototype;i.draw=function(){if(this.enabled){var c=this.plot,h=this.selectBox,f=this.borderWidth,b=(this.innerFill,this.innerColor),v=(this.outerFill,this.outerColor),g=this.borderColor,y=c.box,p=c.screenBox,m=c.dataBox,w=c.viewBox,u=c.pixelRatio,S=(h[0]-m[0])*(w[2]-w[0])/(m[2]-m[0])+w[0],_=(h[1]-m[1])*(w[3]-w[1])/(m[3]-m[1])+w[1],E=(h[2]-m[0])*(w[2]-w[0])/(m[2]-m[0])+w[0],L=(h[3]-m[1])*(w[3]-w[1])/(m[3]-m[1])+w[1];if(S=Math.max(S,w[0]),_=Math.max(_,w[1]),E=Math.min(E,w[2]),L=Math.min(L,w[3]),!(E<S||L<_)){y.bind();var C=p[2]-p[0],P=p[3]-p[1];if(this.outerFill&&(y.drawBox(0,0,C,_,v),y.drawBox(0,_,S,L,v),y.drawBox(0,L,C,P,v),y.drawBox(E,_,C,L,v)),this.innerFill&&y.drawBox(S,_,E,L,b),f>0){var I=f*u;y.drawBox(S-I,_-I,E+I,_+I,g),y.drawBox(S-I,L-I,E+I,L+I,g),y.drawBox(S-I,_-I,S+I,L+I,g),y.drawBox(E-I,_-I,E+I,L+I,g)}}}},i.update=function(c){c=c||{},this.innerFill=!!c.innerFill,this.outerFill=!!c.outerFill,this.innerColor=(c.innerColor||[0,0,0,.5]).slice(),this.outerColor=(c.outerColor||[0,0,0,.5]).slice(),this.borderColor=(c.borderColor||[0,0,0,1]).slice(),this.borderWidth=c.borderWidth||0,this.selectBox=(c.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(d,s,t){d.exports=function(f,b){var v=b[0],g=b[1];return new c(f,o(f,v,g,{}),r.mallocUint8(v*g*4))};var o=t(4234),r=t(5306),n=t(5050),a=t(2288).nextPow2;function i(f,b,v,g,y){this.coord=[f,b],this.id=v,this.value=g,this.distance=y}function c(f,b,v){this.gl=f,this.fbo=b,this.buffer=v,this._readTimeout=null;var g=this;this._readCallback=function(){g.gl&&(b.bind(),f.readPixels(0,0,b.shape[0],b.shape[1],f.RGBA,f.UNSIGNED_BYTE,g.buffer),g._readTimeout=null)}}var h=c.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(f){if(this.gl){this.fbo.shape=f;var b=this.fbo.shape[0],v=this.fbo.shape[1];if(v*b*4>this.buffer.length){r.free(this.buffer);for(var g=this.buffer=r.mallocUint8(a(v*b*4)),y=0;y<v*b*4;++y)g[y]=255}return f}}}),h.begin=function(){var f=this.gl;this.shape,f&&(this.fbo.bind(),f.clearColor(1,1,1,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT))},h.end=function(){var f=this.gl;f&&(f.bindFramebuffer(f.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(f,b,v){if(!this.gl)return null;var g=this.fbo.shape.slice();f|=0,b|=0,typeof v!="number"&&(v=1);var y=0|Math.min(Math.max(f-v,0),g[0]),p=0|Math.min(Math.max(f+v,0),g[0]),m=0|Math.min(Math.max(b-v,0),g[1]),w=0|Math.min(Math.max(b+v,0),g[1]);if(p<=y||w<=m)return null;var u=[p-y,w-m],S=n(this.buffer,[u[0],u[1],4],[4,4*g[0],1],4*(y+g[0]*m)),_=function(C,P,I){for(var U=1e8,z=-1,H=-1,F=C.shape[0],N=C.shape[1],B=0;B<F;B++)for(var j=0;j<N;j++){var K=C.get(B,j,0),G=C.get(B,j,1),V=C.get(B,j,2),W=C.get(B,j,3);if(K<255||G<255||V<255||W<255){var J=P-B,X=I-j,ee=J*J+X*X;ee<U&&(U=ee,z=B,H=j)}}return[z,H,U]}(S.hi(u[0],u[1],1),v,v),E=_[0],L=_[1];return E<0||Math.pow(this.radius,2)<_[2]?null:new i(E+y|0,L+m|0,S.get(E,L,0),[S.get(E,L,1),S.get(E,L,2),S.get(E,L,3)],Math.sqrt(_[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(d,s,t){var o=t(9016),r=t(4280),n=t(3984),a=t(1628),i=t(2631),c=t(9068);function h(v){this.gl=v,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=h.prototype;function b(v,g){return v.name<g.name?-1:1}f.bind=function(){var v;this.program||this._relink();var g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(g>y)for(v=y;v<g;v++)this.gl.enableVertexAttribArray(v);else if(y>g)for(v=g;v<y;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},f.dispose=function(){for(var v=this.gl.lastAttribCount,g=0;g<v;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},f.update=function(v,g,y,p){if(!g||arguments.length===1){var m=v;v=m.vertex,g=m.fragment,y=m.uniforms,p=m.attributes}var w=this,u=w.gl,S=w._vref;w._vref=a.shader(u,u.VERTEX_SHADER,v),S&&S.dispose(),w.vertShader=w._vref.shader;var _=this._fref;if(w._fref=a.shader(u,u.FRAGMENT_SHADER,g),_&&_.dispose(),w.fragShader=w._fref.shader,!y||!p){var E=u.createProgram();if(u.attachShader(E,w.fragShader),u.attachShader(E,w.vertShader),u.linkProgram(E),!u.getProgramParameter(E,u.LINK_STATUS)){var L=u.getProgramInfoLog(E);throw new c(L,"Error linking program:"+L)}y=y||i.uniforms(u,E),p=p||i.attributes(u,E),u.deleteProgram(E)}(p=p.slice()).sort(b);var C,P=[],I=[],U=[];for(C=0;C<p.length;++C){var z=p[C];if(z.type.indexOf("mat")>=0){for(var H=0|z.type.charAt(z.type.length-1),F=new Array(H),N=0;N<H;++N)F[N]=U.length,I.push(z.name+"["+N+"]"),typeof z.location=="number"?U.push(z.location+N):Array.isArray(z.location)&&z.location.length===H&&typeof z.location[N]=="number"?U.push(0|z.location[N]):U.push(-1);P.push({name:z.name,type:z.type,locations:F})}else P.push({name:z.name,type:z.type,locations:[U.length]}),I.push(z.name),typeof z.location=="number"?U.push(0|z.location):U.push(-1)}var B=0;for(C=0;C<U.length;++C)if(U[C]<0){for(;U.indexOf(B)>=0;)B+=1;U[C]=B}var j=new Array(y.length);function K(){w.program=a.program(u,w._vref,w._fref,I,U);for(var G=0;G<y.length;++G)j[G]=u.getUniformLocation(w.program,y[G].name)}K(),w._relink=K,w.types={uniforms:n(y),attributes:n(p)},w.attributes=r(u,w,P,U),Object.defineProperty(w,"uniforms",o(u,w,y,j))},d.exports=function(v,g,y,p,m){var w=new h(v);return w.update(g,y,p,m),w}},9068:function(d){function s(t,o,r){this.shortMessage=o||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(o||t||"")+(r?`
`+r:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,d.exports=s},4280:function(d,s,t){d.exports=function(h,f,b,v){for(var g={},y=0,p=b.length;y<p;++y){var m=b[y],w=m.name,u=m.type,S=m.locations;switch(u){case"bool":case"int":case"float":i(h,f,S[0],v,1,g,w);break;default:if(u.indexOf("vec")>=0){if((_=u.charCodeAt(u.length-1)-48)<2||_>4)throw new o("","Invalid data type for attribute "+w+": "+u);i(h,f,S[0],v,_,g,w)}else{if(!(u.indexOf("mat")>=0))throw new o("","Unknown data type for attribute "+w+": "+u);var _;if((_=u.charCodeAt(u.length-1)-48)<2||_>4)throw new o("","Invalid data type for attribute "+w+": "+u);c(h,f,S,v,_,g,w)}}}return g};var o=t(9068);function r(h,f,b,v,g,y){this._gl=h,this._wrapper=f,this._index=b,this._locations=v,this._dimension=g,this._constFunc=y}var n=r.prototype;n.pointer=function(h,f,b,v){var g=this,y=g._gl,p=g._locations[g._index];y.vertexAttribPointer(p,g._dimension,h||y.FLOAT,!!f,b||0,v||0),y.enableVertexAttribArray(p)},n.set=function(h,f,b,v){return this._constFunc(this._locations[this._index],h,f,b,v)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var a=[function(h,f,b){return b.length===void 0?h.vertexAttrib1f(f,b):h.vertexAttrib1fv(f,b)},function(h,f,b,v){return b.length===void 0?h.vertexAttrib2f(f,b,v):h.vertexAttrib2fv(f,b)},function(h,f,b,v,g){return b.length===void 0?h.vertexAttrib3f(f,b,v,g):h.vertexAttrib3fv(f,b)},function(h,f,b,v,g,y){return b.length===void 0?h.vertexAttrib4f(f,b,v,g,y):h.vertexAttrib4fv(f,b)}];function i(h,f,b,v,g,y,p){var m=a[g],w=new r(h,f,b,v,g,m);Object.defineProperty(y,p,{set:function(u){return h.disableVertexAttribArray(v[b]),m(h,v[b],u),u},get:function(){return w},enumerable:!0})}function c(h,f,b,v,g,y,p){for(var m=new Array(g),w=new Array(g),u=0;u<g;++u)i(h,f,b[u],v,g,m,u),w[u]=m[u];Object.defineProperty(m,"location",{set:function(E){if(Array.isArray(E))for(var L=0;L<g;++L)w[L].location=E[L];else for(L=0;L<g;++L)w[L].location=E+L;return E},get:function(){for(var E=new Array(g),L=0;L<g;++L)E[L]=v[b[L]];return E},enumerable:!0}),m.pointer=function(E,L,C,P){E=E||h.FLOAT,L=!!L,C=C||g*g,P=P||0;for(var I=0;I<g;++I){var U=v[b[I]];h.vertexAttribPointer(U,g,E,L,C,P+I*g),h.enableVertexAttribArray(U)}};var S=new Array(g),_=h["vertexAttrib"+g+"fv"];Object.defineProperty(y,p,{set:function(E){for(var L=0;L<g;++L){var C=v[b[L]];if(h.disableVertexAttribArray(C),Array.isArray(E[0]))_.call(h,C,E[L]);else{for(var P=0;P<g;++P)S[P]=E[g*L+P];_.call(h,C,S)}}return E},get:function(){return m},enumerable:!0})}},9016:function(d,s,t){var o=t(3984),r=t(9068);function n(i){return function(){return i}}function a(i,c){for(var h=new Array(i),f=0;f<i;++f)h[f]=c;return h}d.exports=function(i,c,h,f){function b(m){return function(w){for(var u=v("",m),S=0;S<u.length;++S){var _=u[S],E=_[0],L=_[1];if(f[L]){var C=w;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var P=E;if(E.indexOf(".")===0&&(P=E.slice(1)),P.indexOf("]")===P.length-1){var I=P.indexOf("["),U=P.slice(0,I),z=P.slice(I+1,P.length-1);C=U?w[U][z]:w[z]}else C=w[P]}var H,F=h[L].type;switch(F){case"bool":case"int":case"sampler2D":case"samplerCube":i.uniform1i(f[L],C);break;case"float":i.uniform1f(f[L],C);break;default:var N=F.indexOf("vec");if(!(0<=N&&N<=1&&F.length===4+N)){if(F.indexOf("mat")===0&&F.length===4){if((H=F.charCodeAt(F.length-1)-48)<2||H>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+F);i["uniformMatrix"+H+"fv"](f[L],!1,C);break}throw new r("","Unknown uniform data type for "+name+": "+F)}if((H=F.charCodeAt(F.length-1)-48)<2||H>4)throw new r("","Invalid data type");switch(F.charAt(0)){case"b":case"i":i["uniform"+H+"iv"](f[L],C);break;case"v":i["uniform"+H+"fv"](f[L],C);break;default:throw new r("","Unrecognized data type for vector "+name+": "+F)}}}}}}function v(m,w){if(typeof w!="object")return[[m,w]];var u=[];for(var S in w){var _=w[S],E=m;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof _=="object"?u.push.apply(u,v(E,_)):u.push([E,_])}return u}function g(m,w,u){if(typeof u=="object"){var S=y(u);Object.defineProperty(m,w,{get:n(S),set:b(u),enumerable:!0,configurable:!1})}else f[u]?Object.defineProperty(m,w,{get:(_=u,function(E,L,C){return E.getUniform(L.program,C[_])}),set:b(u),enumerable:!0,configurable:!1}):m[w]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var L=E.indexOf("vec");if(0<=L&&L<=1&&E.length===4+L){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid data type");return E.charAt(0)==="b"?a(C,!1):a(C,0)}if(E.indexOf("mat")===0&&E.length===4){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return a(C*C,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(h[u].type);var _}function y(m){var w;if(Array.isArray(m)){w=new Array(m.length);for(var u=0;u<m.length;++u)g(w,u,m[u])}else for(var S in w={},m)g(w,S,m[S]);return w}var p=o(h,!0);return{get:n(y(p)),set:b(p),enumerable:!0,configurable:!0}}},3984:function(d){d.exports=function(s,t){for(var o={},r=0;r<s.length;++r)for(var n=s[r].name.split("."),a=o,i=0;i<n.length;++i){var c=n[i].split("[");if(c.length>1){c[0]in a||(a[c[0]]=[]),a=a[c[0]];for(var h=1;h<c.length;++h){var f=parseInt(c[h]);h<c.length-1||i<n.length-1?(f in a||(h<c.length-1?a[f]=[]:a[f]={}),a=a[f]):a[f]=t?r:s[r].type}}else i<n.length-1?(c[0]in a||(a[c[0]]={}),a=a[c[0]]):a[c[0]]=t?r:s[r].type}return o}},2631:function(d,s){s.uniforms=function(n,a){for(var i=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),c=[],h=0;h<i;++h){var f=n.getActiveUniform(a,h);if(f){var b=r(n,f.type);if(f.size>1)for(var v=0;v<f.size;++v)c.push({name:f.name.replace("[0]","["+v+"]"),type:b});else c.push({name:f.name,type:b})}}return c},s.attributes=function(n,a){for(var i=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),c=[],h=0;h<i;++h){var f=n.getActiveAttrib(a,h);f&&c.push({name:f.name,type:r(n,f.type)})}return c};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function r(n,a){if(!o){var i=Object.keys(t);o={};for(var c=0;c<i.length;++c){var h=i[c];o[n[h]]=t[h]}}return o[a]}},1628:function(d,s,t){s.shader=function(b,v,g){return f(b).getShaderReference(v,g)},s.program=function(b,v,g,y,p){return f(b).getProgram(v,g,y,p)};var o=t(9068),r=t(3530),n=new(typeof WeakMap>"u"?t(4037):WeakMap),a=0;function i(b,v,g,y,p,m,w){this.id=b,this.src=v,this.type=g,this.shader=y,this.count=m,this.programs=[],this.cache=w}function c(b){this.gl=b,this.shaders=[{},{}],this.programs={}}i.prototype.dispose=function(){if(--this.count==0){for(var b=this.cache,v=b.gl,g=this.programs,y=0,p=g.length;y<p;++y){var m=b.programs[g[y]];m&&(delete b.programs[y],v.deleteProgram(m))}v.deleteShader(this.shader),delete b.shaders[this.type===v.FRAGMENT_SHADER|0][this.src]}};var h=c.prototype;function f(b){var v=n.get(b);return v||(v=new c(b),n.set(b,v)),v}h.getShaderReference=function(b,v){var g=this.gl,y=this.shaders[b===g.FRAGMENT_SHADER|0],p=y[v];if(p&&g.isShader(p.shader))p.count+=1;else{var m=function(w,u,S){var _=w.createShader(u);if(w.shaderSource(_,S),w.compileShader(_),!w.getShaderParameter(_,w.COMPILE_STATUS)){var E=w.getShaderInfoLog(_);try{var L=r(E,S,u)}catch(C){throw console.warn("Failed to format compiler error: "+C),new o(E,`Error compiling shader:
`+E)}throw new o(E,L.short,L.long)}return _}(g,b,v);p=y[v]=new i(a++,v,b,m,[],1,this)}return p},h.getProgram=function(b,v,g,y){var p=[b.id,v.id,g.join(":"),y.join(":")].join("@"),m=this.programs[p];return m&&this.gl.isProgram(m)||(this.programs[p]=m=function(w,u,S,_,E){var L=w.createProgram();w.attachShader(L,u),w.attachShader(L,S);for(var C=0;C<_.length;++C)w.bindAttribLocation(L,E[C],_[C]);if(w.linkProgram(L),!w.getProgramParameter(L,w.LINK_STATUS)){var P=w.getProgramInfoLog(L);throw new o(P,"Error linking program: "+P)}return L}(this.gl,b.shader,v.shader,g,y),b.programs.push(p),v.programs.push(p)),m}},3050:function(d){function s(o){this.plot=o,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}d.exports=function(o,r){var n=new s(o);return n.update(r),o.addOverlay(n),n};var t=s.prototype;t.update=function(o){o=o||{},this.enable=(o.enable||[!0,!0,!1,!1]).slice(),this.width=(o.width||[1,1,1,1]).slice(),this.color=(o.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(o.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var o=this.enable,r=this.width,n=this.color,a=this.center,i=this.plot,c=i.line,h=i.dataBox,f=i.viewBox;if(c.bind(),h[0]<=a[0]&&a[0]<=h[2]&&h[1]<=a[1]&&a[1]<=h[3]){var b=f[0]+(a[0]-h[0])/(h[2]-h[0])*(f[2]-f[0]),v=f[1]+(a[1]-h[1])/(h[3]-h[1])*(f[3]-f[1]);o[0]&&c.drawLine(b,v,f[0],v,r[0],n[0]),o[1]&&c.drawLine(b,v,b,f[1],r[1],n[1]),o[2]&&c.drawLine(b,v,f[2],v,r[2],n[2]),o[3]&&c.drawLine(b,v,b,f[3],r[3],n[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},3540:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(d,s,t){var o=t(5827),r=t(2944),n=t(3540);d.exports=function(v,g){var y=[];function p(_,E,L,C,P,I){var U=[_,E,L,0,0,0,1];U[C+3]=1,U[C]=P,y.push.apply(y,U),U[6]=-1,y.push.apply(y,U),U[C]=I,y.push.apply(y,U),y.push.apply(y,U),U[6]=1,y.push.apply(y,U),U[C]=P,y.push.apply(y,U)}p(0,0,0,0,0,1),p(0,0,0,1,0,1),p(0,0,0,2,0,1),p(1,0,0,1,-1,1),p(1,0,0,2,-1,1),p(0,1,0,0,-1,1),p(0,1,0,2,-1,1),p(0,0,1,0,-1,1),p(0,0,1,1,-1,1);var m=o(v,y),w=r(v,[{type:v.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:v.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:v.FLOAT,buffer:m,size:1,offset:24,stride:28}]),u=n(v);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var S=new i(v,m,w,u);return S.update(g),S};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(v,g,y,p){this.gl=v,this.buffer=g,this.vao=y,this.shader=p,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var c=i.prototype,h=[0,0,0],f=[0,0,0],b=[0,0];c.isTransparent=function(){return!1},c.drawTransparent=function(v){},c.draw=function(v){var g=this.gl,y=this.vao,p=this.shader;y.bind(),p.bind();var m,w=v.model||a,u=v.view||a,S=v.projection||a;this.axes&&(m=this.axes.lastCubeProps.axis);for(var _=h,E=f,L=0;L<3;++L)m&&m[L]<0?(_[L]=this.bounds[0][L],E[L]=this.bounds[1][L]):(_[L]=this.bounds[1][L],E[L]=this.bounds[0][L]);for(b[0]=g.drawingBufferWidth,b[1]=g.drawingBufferHeight,p.uniforms.model=w,p.uniforms.view=u,p.uniforms.projection=S,p.uniforms.coordinates=[this.position,_,E],p.uniforms.colors=this.colors,p.uniforms.screenShape=b,L=0;L<3;++L)p.uniforms.lineWidth=this.lineWidth[L]*this.pixelRatio,this.enabled[L]&&(y.draw(g.TRIANGLES,6,6*L),this.drawSides[L]&&y.draw(g.TRIANGLES,12,18+12*L));y.unbind()},c.update=function(v){v&&("bounds"in v&&(this.bounds=v.bounds),"position"in v&&(this.position=v.position),"lineWidth"in v&&(this.lineWidth=v.lineWidth),"colors"in v&&(this.colors=v.colors),"enabled"in v&&(this.enabled=v.enabled),"drawSides"in v&&(this.drawSides=v.drawSides))},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(d,s,t){var o=t(6832),r=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),i=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(d,s,t){var o=t(2858),r=t(4020),n=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(b,v){var g,y=b.length;for(g=0;g<y;g++){var p=b[g];if(p===v)return g;if(p>v)return g-1}return g},i=function(b,v,g){return b<v?v:b>g?g:b},c=function(b){var v=1/0;b.sort(function(m,w){return m-w});for(var g=b.length,y=1;y<g;y++){var p=Math.abs(b[y]-b[y-1]);p<v&&(v=p)}return v};d.exports=function(b,v){var g=b.startingPositions,y=b.maxLength||1e3,p=b.tubeSize||1,m=b.absoluteTubeSize,w=b.gridFill||"+x+y+z",u={};w.indexOf("-x")!==-1&&(u.reversedX=!0),w.indexOf("-y")!==-1&&(u.reversedY=!0),w.indexOf("-z")!==-1&&(u.reversedZ=!0),u.filled=n.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var S=b.getVelocity||function(ve){return function(Ie,xe,Ae){var Se=xe.vectors,Te=xe.meshgrid,Q=Ie[0],oe=Ie[1],ce=Ie[2],me=Te[0].length,Me=Te[1].length,Re=Te[2].length,Ce=a(Te[0],Q),ze=a(Te[1],oe),le=a(Te[2],ce),de=Ce+1,be=ze+1,Fe=le+1;if(Ce=i(Ce,0,me-1),de=i(de,0,me-1),ze=i(ze,0,Me-1),be=i(be,0,Me-1),le=i(le,0,Re-1),Fe=i(Fe,0,Re-1),Ce<0||ze<0||le<0||de>me-1||be>Me-1||Fe>Re-1)return o.create();var Ve,He,rt,tt,ot,ht,_t=Te[0][Ce],dt=Te[0][de],bt=Te[1][ze],St=Te[1][be],Et=Te[2][le],zt=(Q-_t)/(dt-_t),Ut=(oe-bt)/(St-bt),Pt=(ce-Et)/(Te[2][Fe]-Et);switch(isFinite(zt)||(zt=.5),isFinite(Ut)||(Ut=.5),isFinite(Pt)||(Pt=.5),Ae.reversedX&&(Ce=me-1-Ce,de=me-1-de),Ae.reversedY&&(ze=Me-1-ze,be=Me-1-be),Ae.reversedZ&&(le=Re-1-le,Fe=Re-1-Fe),Ae.filled){case 5:ot=le,ht=Fe,rt=ze*Re,tt=be*Re,Ve=Ce*Re*Me,He=de*Re*Me;break;case 4:ot=le,ht=Fe,Ve=Ce*Re,He=de*Re,rt=ze*Re*me,tt=be*Re*me;break;case 3:rt=ze,tt=be,ot=le*Me,ht=Fe*Me,Ve=Ce*Me*Re,He=de*Me*Re;break;case 2:rt=ze,tt=be,Ve=Ce*Me,He=de*Me,ot=le*Me*me,ht=Fe*Me*me;break;case 1:Ve=Ce,He=de,ot=le*me,ht=Fe*me,rt=ze*me*Re,tt=be*me*Re;break;default:Ve=Ce,He=de,rt=ze*me,tt=be*me,ot=le*me*Me,ht=Fe*me*Me}var Ze=Se[Ve+rt+ot],Ye=Se[Ve+rt+ht],Be=Se[Ve+tt+ot],ke=Se[Ve+tt+ht],Pe=Se[He+rt+ot],qe=Se[He+rt+ht],Xe=Se[He+tt+ot],nt=Se[He+tt+ht],ut=o.create(),ct=o.create(),Ct=o.create(),Lt=o.create();o.lerp(ut,Ze,Pe,zt),o.lerp(ct,Ye,qe,zt),o.lerp(Ct,Be,Xe,zt),o.lerp(Lt,ke,nt,zt);var Mt=o.create(),mt=o.create();o.lerp(Mt,ut,Ct,Ut),o.lerp(mt,ct,Lt,Ut);var kt=o.create();return o.lerp(kt,Mt,mt,Pt),kt}(ve,b,u)},_=b.getDivergence||function(ve,Ie){var xe=o.create(),Ae=1e-4;o.add(xe,ve,[Ae,0,0]);var Se=S(xe);o.subtract(Se,Se,Ie),o.scale(Se,Se,1/Ae),o.add(xe,ve,[0,Ae,0]);var Te=S(xe);o.subtract(Te,Te,Ie),o.scale(Te,Te,1/Ae),o.add(xe,ve,[0,0,Ae]);var Q=S(xe);return o.subtract(Q,Q,Ie),o.scale(Q,Q,1/Ae),o.add(xe,Se,Te),o.add(xe,xe,Q),xe},E=[],L=v[0][0],C=v[0][1],P=v[0][2],I=v[1][0],U=v[1][1],z=v[1][2],H=function(ve){var Ie=ve[0],xe=ve[1],Ae=ve[2];return!(Ie<L||Ie>I||xe<C||xe>U||Ae<P||Ae>z)},F=10*o.distance(v[0],v[1])/y,N=F*F,B=1,j=0,K=g.length;K>1&&(B=function(ve){for(var Ie=[],xe=[],Ae=[],Se={},Te={},Q={},oe=ve.length,ce=0;ce<oe;ce++){var me=ve[ce],Me=me[0],Re=me[1],Ce=me[2];Se[Me]||(Ie.push(Me),Se[Me]=!0),Te[Re]||(xe.push(Re),Te[Re]=!0),Q[Ce]||(Ae.push(Ce),Q[Ce]=!0)}var ze=c(Ie),le=c(xe),de=c(Ae),be=Math.min(ze,le,de);return isFinite(be)?be:1}(g));for(var G=0;G<K;G++){var V=o.create();o.copy(V,g[G]);var W=[V],J=[],X=S(V),ee=V;J.push(X);var re=[],ie=_(V,X),se=o.length(ie);isFinite(se)&&se>j&&(j=se),re.push(se),E.push({points:W,velocities:J,divergences:re});for(var fe=0;fe<100*y&&W.length<y&&H(V);){fe++;var ye=o.clone(X),ge=o.squaredLength(ye);if(ge===0)break;ge>N&&o.scale(ye,ye,F/Math.sqrt(ge)),o.add(ye,ye,V),X=S(ye),o.squaredDistance(ee,ye)-N>-1e-4*N&&(W.push(ye),ee=ye,J.push(X),ie=_(ye,X),se=o.length(ie),isFinite(se)&&se>j&&(j=se),re.push(se)),V=ye}}var he=function(ve,Ie,xe,Ae){for(var Se=0,Te=0;Te<ve.length;Te++)for(var Q=ve[Te].velocities,oe=0;oe<Q.length;oe++)Se=Math.max(Se,o.length(Q[oe]));var ce=ve.map(function(Ve){return function(He,rt,tt,ot){for(var ht=He.points,_t=He.velocities,dt=He.divergences,bt=[],St=[],Et=[],zt=[],Ut=[],Pt=[],Ze=0,Ye=0,Be=r.create(),ke=r.create(),Pe=0;Pe<ht.length;Pe++){var qe=ht[Pe],Xe=_t[Pe],nt=dt[Pe];rt===0&&(nt=.05*tt),Ye=o.length(Xe)/ot,Be=r.create(),o.copy(Be,Xe),Be[3]=nt;for(var ut=0;ut<8;ut++)Ut[ut]=[qe[0],qe[1],qe[2],ut];if(zt.length>0)for(ut=0;ut<8;ut++){var ct=(ut+1)%8;bt.push(zt[ut],Ut[ut],Ut[ct],Ut[ct],zt[ct],zt[ut]),Et.push(ke,Be,Be,Be,ke,ke),Pt.push(Ze,Ye,Ye,Ye,Ze,Ze);var Ct=bt.length;St.push([Ct-6,Ct-5,Ct-4],[Ct-3,Ct-2,Ct-1])}var Lt=zt;zt=Ut,Ut=Lt;var Mt=ke;ke=Be,Be=Mt;var mt=Ze;Ze=Ye,Ye=mt}return{positions:bt,cells:St,vectors:Et,vertexIntensity:Pt}}(Ve,xe,Ae,Se)}),me=[],Me=[],Re=[],Ce=[];for(Te=0;Te<ce.length;Te++){var ze=ce[Te],le=me.length;for(me=me.concat(ze.positions),Re=Re.concat(ze.vectors),Ce=Ce.concat(ze.vertexIntensity),oe=0;oe<ze.cells.length;oe++){var de=ze.cells[oe],be=[];Me.push(be);for(var Fe=0;Fe<de.length;Fe++)be.push(de[Fe]+le)}}return{positions:me,cells:Me,vectors:Re,vertexIntensity:Ce,colormap:Ie}}(E,b.colormap,j,B);return m?he.tubeScale=m:(j===0&&(j=1),he.tubeScale=.5*p*B/j),he};var h=t(9578),f=t(1140).createMesh;d.exports.createTubeMesh=function(b,v){return f(b,v,{shaders:h,traceType:"streamtube"})}},9054:function(d,s,t){var o=t(5158),r=t(6832),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color — in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),i=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(h){var f=o(h,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createPickShader=function(h){var f=o(h,n,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createContourShader=function(h){var f=o(h,i,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f},s.createPickContourShader=function(h){var f=o(h,i,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f}},3754:function(d,s,t){d.exports=function(ee){var re=ee.gl,ie=u(re),se=_(re),fe=S(re),ye=E(re),ge=r(re),he=n(re,[{buffer:ge,size:4,stride:40,offset:0},{buffer:ge,size:3,stride:40,offset:16},{buffer:ge,size:3,stride:40,offset:28}]),ve=r(re),Ie=n(re,[{buffer:ve,size:4,stride:20,offset:0},{buffer:ve,size:1,stride:20,offset:16}]),xe=r(re),Ae=n(re,[{buffer:xe,size:2,type:re.FLOAT}]),Se=a(re,1,256,re.RGBA,re.UNSIGNED_BYTE);Se.minFilter=re.LINEAR,Se.magFilter=re.LINEAR;var Te=new U(re,[0,0],[[0,0,0],[0,0,0]],ie,se,ge,he,Se,fe,ye,ve,Ie,xe,Ae,[0,0,0]),Q={levels:[[],[],[]]};for(var oe in ee)Q[oe]=ee[oe];return Q.colormap=Q.colormap||"jet",Te.update(Q),Te};var o=t(2288),r=t(5827),n=t(2944),a=t(8931),i=t(5306),c=t(9156),h=t(7498),f=t(7382),b=t(5050),v=t(4162),g=t(104),y=t(7437),p=t(5070),m=t(9144),w=t(9054),u=w.createShader,S=w.createContourShader,_=w.createPickShader,E=w.createPickContourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function I(ee,re,ie,se,fe){this.position=ee,this.index=re,this.uv=ie,this.level=se,this.dataCoordinate=fe}function U(ee,re,ie,se,fe,ye,ge,he,ve,Ie,xe,Ae,Se,Te,Q){this.gl=ee,this.shape=re,this.bounds=ie,this.objectOffset=Q,this.intensityBounds=[],this._shader=se,this._pickShader=fe,this._coordinateBuffer=ye,this._vao=ge,this._colorMap=he,this._contourShader=ve,this._contourPickShader=Ie,this._contourBuffer=xe,this._contourVAO=Ae,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new I([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=Se,this._dynamicVAO=Te,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[b(i.mallocFloat(1024),[0,0]),b(i.mallocFloat(1024),[0,0]),b(i.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}(function(){for(var ee=0;ee<3;++ee){var re=P[ee],ie=(ee+2)%3;re[(ee+1)%3+0]=1,re[ie+3]=1,re[ee+6]=1}})();var z=U.prototype;z.genColormap=function(ee,re){var ie=!1,se=f([c({colormap:ee,nshades:256,format:"rgba"}).map(function(fe,ye){var ge=re?function(he,ve){if(!ve||!ve.length)return 1;for(var Ie=0;Ie<ve.length;++Ie){if(ve.length<2)return 1;if(ve[Ie][0]===he)return ve[Ie][1];if(ve[Ie][0]>he&&Ie>0){var xe=(ve[Ie][0]-he)/(ve[Ie][0]-ve[Ie-1][0]);return ve[Ie][1]*(1-xe)+xe*ve[Ie-1][1]}}return 1}(ye/255,re):fe[3];return ge<1&&(ie=!0),[fe[0],fe[1],fe[2],255*ge]})]);return h.divseq(se,255),this.hasAlphaScale=ie,se},z.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},z.isOpaque=function(){return!this.isTransparent()},z.pickSlots=1,z.setPickBase=function(ee){this.pickId=ee};var H=[0,0,0],F={showSurface:!1,showContour:!1,projections:[L.slice(),L.slice(),L.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function N(ee,re){var ie,se,fe,ye=re.axes&&re.axes.lastCubeProps.axis||H,ge=re.showSurface,he=re.showContour;for(ie=0;ie<3;++ie)for(ge=ge||re.surfaceProject[ie],se=0;se<3;++se)he=he||re.contourProject[ie][se];for(ie=0;ie<3;++ie){var ve=F.projections[ie];for(se=0;se<16;++se)ve[se]=0;for(se=0;se<4;++se)ve[5*se]=1;ve[5*ie]=0,ve[12+ie]=re.axesBounds[+(ye[ie]>0)][ie],g(ve,ee.model,ve);var Ie=F.clipBounds[ie];for(fe=0;fe<2;++fe)for(se=0;se<3;++se)Ie[fe][se]=ee.clipBounds[fe][se];Ie[0][ie]=-1e8,Ie[1][ie]=1e8}return F.showSurface=ge,F.showContour=he,F}var B={model:L,view:L,projection:L,inverseModel:L.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},j=L.slice(),K=[1,0,0,0,1,0,0,0,1];function G(ee,re){ee=ee||{};var ie=this.gl;ie.disable(ie.CULL_FACE),this._colorMap.bind(0);var se=B;se.model=ee.model||L,se.view=ee.view||L,se.projection=ee.projection||L,se.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],se.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],se.objectOffset=this.objectOffset,se.contourColor=this.contourColor[0],se.inverseModel=y(se.inverseModel,se.model);for(var fe=0;fe<2;++fe)for(var ye=se.clipBounds[fe],ge=0;ge<3;++ge)ye[ge]=Math.min(Math.max(this.clipBounds[fe][ge],-1e8),1e8);se.kambient=this.ambientLight,se.kdiffuse=this.diffuseLight,se.kspecular=this.specularLight,se.roughness=this.roughness,se.fresnel=this.fresnel,se.opacity=this.opacity,se.height=0,se.permutation=K,se.vertexColor=this.vertexColor;var he=j;for(g(he,se.view,se.model),g(he,se.projection,he),y(he,he),fe=0;fe<3;++fe)se.eyePosition[fe]=he[12+fe]/he[15];var ve=he[15];for(fe=0;fe<3;++fe)ve+=this.lightPosition[fe]*he[4*fe+3];for(fe=0;fe<3;++fe){var Ie=he[12+fe];for(ge=0;ge<3;++ge)Ie+=he[4*ge+fe]*this.lightPosition[ge];se.lightPosition[fe]=Ie/ve}var xe=N(se,this);if(xe.showSurface){for(this._shader.bind(),this._shader.uniforms=se,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ie.TRIANGLES,this._vertexCount),fe=0;fe<3;++fe)this.surfaceProject[fe]&&this.vertexCount&&(this._shader.uniforms.model=xe.projections[fe],this._shader.uniforms.clipBounds=xe.clipBounds[fe],this._vao.draw(ie.TRIANGLES,this._vertexCount));this._vao.unbind()}if(xe.showContour){var Ae=this._contourShader;se.kambient=1,se.kdiffuse=0,se.kspecular=0,se.opacity=1,Ae.bind(),Ae.uniforms=se;var Se=this._contourVAO;for(Se.bind(),fe=0;fe<3;++fe)for(Ae.uniforms.permutation=P[fe],ie.lineWidth(this.contourWidth[fe]*this.pixelRatio),ge=0;ge<this.contourLevels[fe].length;++ge)ge===this.highlightLevel[fe]?(Ae.uniforms.contourColor=this.highlightColor[fe],Ae.uniforms.contourTint=this.highlightTint[fe]):ge!==0&&ge-1!==this.highlightLevel[fe]||(Ae.uniforms.contourColor=this.contourColor[fe],Ae.uniforms.contourTint=this.contourTint[fe]),this._contourCounts[fe][ge]&&(Ae.uniforms.height=this.contourLevels[fe][ge],Se.draw(ie.LINES,this._contourCounts[fe][ge],this._contourOffsets[fe][ge]));for(fe=0;fe<3;++fe)for(Ae.uniforms.model=xe.projections[fe],Ae.uniforms.clipBounds=xe.clipBounds[fe],ge=0;ge<3;++ge)if(this.contourProject[fe][ge]){Ae.uniforms.permutation=P[ge],ie.lineWidth(this.contourWidth[ge]*this.pixelRatio);for(var Te=0;Te<this.contourLevels[ge].length;++Te)Te===this.highlightLevel[ge]?(Ae.uniforms.contourColor=this.highlightColor[ge],Ae.uniforms.contourTint=this.highlightTint[ge]):Te!==0&&Te-1!==this.highlightLevel[ge]||(Ae.uniforms.contourColor=this.contourColor[ge],Ae.uniforms.contourTint=this.contourTint[ge]),this._contourCounts[ge][Te]&&(Ae.uniforms.height=this.contourLevels[ge][Te],Se.draw(ie.LINES,this._contourCounts[ge][Te],this._contourOffsets[ge][Te]))}for(Se.unbind(),(Se=this._dynamicVAO).bind(),fe=0;fe<3;++fe)if(this._dynamicCounts[fe]!==0)for(Ae.uniforms.model=se.model,Ae.uniforms.clipBounds=se.clipBounds,Ae.uniforms.permutation=P[fe],ie.lineWidth(this.dynamicWidth[fe]*this.pixelRatio),Ae.uniforms.contourColor=this.dynamicColor[fe],Ae.uniforms.contourTint=this.dynamicTint[fe],Ae.uniforms.height=this.dynamicLevel[fe],Se.draw(ie.LINES,this._dynamicCounts[fe],this._dynamicOffsets[fe]),ge=0;ge<3;++ge)this.contourProject[ge][fe]&&(Ae.uniforms.model=xe.projections[ge],Ae.uniforms.clipBounds=xe.clipBounds[ge],Se.draw(ie.LINES,this._dynamicCounts[fe],this._dynamicOffsets[fe]));Se.unbind()}}z.draw=function(ee){return G.call(this,ee,!1)},z.drawTransparent=function(ee){return G.call(this,ee,!0)};var V={model:L,view:L,projection:L,inverseModel:L,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function W(ee,re){return Array.isArray(ee)?[re(ee[0]),re(ee[1]),re(ee[2])]:[re(ee),re(ee),re(ee)]}function J(ee){return Array.isArray(ee)?ee.length===3?[ee[0],ee[1],ee[2],1]:[ee[0],ee[1],ee[2],ee[3]]:[0,0,0,1]}function X(ee){if(Array.isArray(ee)){if(Array.isArray(ee))return[J(ee[0]),J(ee[1]),J(ee[2])];var re=J(ee);return[re.slice(),re.slice(),re.slice()]}}z.drawPick=function(ee){ee=ee||{};var re=this.gl;re.disable(re.CULL_FACE);var ie=V;ie.model=ee.model||L,ie.view=ee.view||L,ie.projection=ee.projection||L,ie.shape=this._field[2].shape,ie.pickId=this.pickId/255,ie.lowerBound=this.bounds[0],ie.upperBound=this.bounds[1],ie.objectOffset=this.objectOffset,ie.permutation=K;for(var se=0;se<2;++se)for(var fe=ie.clipBounds[se],ye=0;ye<3;++ye)fe[ye]=Math.min(Math.max(this.clipBounds[se][ye],-1e8),1e8);var ge=N(ie,this);if(ge.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ie,this._vao.bind(),this._vao.draw(re.TRIANGLES,this._vertexCount),se=0;se<3;++se)this.surfaceProject[se]&&(this._pickShader.uniforms.model=ge.projections[se],this._pickShader.uniforms.clipBounds=ge.clipBounds[se],this._vao.draw(re.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ge.showContour){var he=this._contourPickShader;he.bind(),he.uniforms=ie;var ve=this._contourVAO;for(ve.bind(),ye=0;ye<3;++ye)for(re.lineWidth(this.contourWidth[ye]*this.pixelRatio),he.uniforms.permutation=P[ye],se=0;se<this.contourLevels[ye].length;++se)this._contourCounts[ye][se]&&(he.uniforms.height=this.contourLevels[ye][se],ve.draw(re.LINES,this._contourCounts[ye][se],this._contourOffsets[ye][se]));for(se=0;se<3;++se)for(he.uniforms.model=ge.projections[se],he.uniforms.clipBounds=ge.clipBounds[se],ye=0;ye<3;++ye)if(this.contourProject[se][ye]){he.uniforms.permutation=P[ye],re.lineWidth(this.contourWidth[ye]*this.pixelRatio);for(var Ie=0;Ie<this.contourLevels[ye].length;++Ie)this._contourCounts[ye][Ie]&&(he.uniforms.height=this.contourLevels[ye][Ie],ve.draw(re.LINES,this._contourCounts[ye][Ie],this._contourOffsets[ye][Ie]))}ve.unbind()}},z.pick=function(ee){if(!ee||ee.id!==this.pickId)return null;var re=this._field[2].shape,ie=this._pickResult,se=re[0]*(ee.value[0]+(ee.value[2]>>4)/16)/255,fe=Math.floor(se),ye=se-fe,ge=re[1]*(ee.value[1]+(15&ee.value[2])/16)/255,he=Math.floor(ge),ve=ge-he;fe+=1,he+=1;var Ie=ie.position;Ie[0]=Ie[1]=Ie[2]=0;for(var xe=0;xe<2;++xe)for(var Ae=xe?ye:1-ye,Se=0;Se<2;++Se)for(var Te=fe+xe,Q=he+Se,oe=Ae*(Se?ve:1-ve),ce=0;ce<3;++ce)Ie[ce]+=this._field[ce].get(Te,Q)*oe;for(var me=this._pickResult.level,Me=0;Me<3;++Me)if(me[Me]=p.le(this.contourLevels[Me],Ie[Me]),me[Me]<0)this.contourLevels[Me].length>0&&(me[Me]=0);else if(me[Me]<this.contourLevels[Me].length-1){var Re=this.contourLevels[Me][me[Me]],Ce=this.contourLevels[Me][me[Me]+1];Math.abs(Re-Ie[Me])>Math.abs(Ce-Ie[Me])&&(me[Me]+=1)}for(ie.index[0]=ye<.5?fe:fe+1,ie.index[1]=ve<.5?he:he+1,ie.uv[0]=se/re[0],ie.uv[1]=ge/re[1],ce=0;ce<3;++ce)ie.dataCoordinate[ce]=this._field[ce].get(ie.index[0],ie.index[1]);return ie},z.padField=function(ee,re){var ie=re.shape.slice(),se=ee.shape.slice();h.assign(ee.lo(1,1).hi(ie[0],ie[1]),re),h.assign(ee.lo(1).hi(ie[0],1),re.hi(ie[0],1)),h.assign(ee.lo(1,se[1]-1).hi(ie[0],1),re.lo(0,ie[1]-1).hi(ie[0],1)),h.assign(ee.lo(0,1).hi(1,ie[1]),re.hi(1)),h.assign(ee.lo(se[0]-1,1).hi(1,ie[1]),re.lo(ie[0]-1)),ee.set(0,0,re.get(0,0)),ee.set(0,se[1]-1,re.get(0,ie[1]-1)),ee.set(se[0]-1,0,re.get(ie[0]-1,0)),ee.set(se[0]-1,se[1]-1,re.get(ie[0]-1,ie[1]-1))},z.update=function(ee){ee=ee||{},this.objectOffset=ee.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ee&&(this.contourWidth=W(ee.contourWidth,Number)),"showContour"in ee&&(this.showContour=W(ee.showContour,Boolean)),"showSurface"in ee&&(this.showSurface=!!ee.showSurface),"contourTint"in ee&&(this.contourTint=W(ee.contourTint,Boolean)),"contourColor"in ee&&(this.contourColor=X(ee.contourColor)),"contourProject"in ee&&(this.contourProject=W(ee.contourProject,function(xn){return W(xn,Boolean)})),"surfaceProject"in ee&&(this.surfaceProject=ee.surfaceProject),"dynamicColor"in ee&&(this.dynamicColor=X(ee.dynamicColor)),"dynamicTint"in ee&&(this.dynamicTint=W(ee.dynamicTint,Number)),"dynamicWidth"in ee&&(this.dynamicWidth=W(ee.dynamicWidth,Number)),"opacity"in ee&&(this.opacity=ee.opacity),"opacityscale"in ee&&(this.opacityscale=ee.opacityscale),"colorBounds"in ee&&(this.colorBounds=ee.colorBounds),"vertexColor"in ee&&(this.vertexColor=ee.vertexColor?1:0),"colormap"in ee&&this._colorMap.setPixels(this.genColormap(ee.colormap,this.opacityscale));var re=ee.field||ee.coords&&ee.coords[2]||null,ie=!1;if(re||(re=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ee||"coords"in ee){var se=(re.shape[0]+2)*(re.shape[1]+2);se>this._field[2].data.length&&(i.freeFloat(this._field[2].data),this._field[2].data=i.mallocFloat(o.nextPow2(se))),this._field[2]=b(this._field[2].data,[re.shape[0]+2,re.shape[1]+2]),this.padField(this._field[2],re),this.shape=re.shape.slice();for(var fe=this.shape,ye=0;ye<2;++ye)this._field[2].size>this._field[ye].data.length&&(i.freeFloat(this._field[ye].data),this._field[ye].data=i.mallocFloat(this._field[2].size)),this._field[ye]=b(this._field[ye].data,[fe[0]+2,fe[1]+2]);if(ee.coords){var ge=ee.coords;if(!Array.isArray(ge)||ge.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(ye=0;ye<2;++ye){var he=ge[ye];for(Se=0;Se<2;++Se)if(he.shape[Se]!==fe[Se])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ye],he)}}else if(ee.ticks){var ve=ee.ticks;if(!Array.isArray(ve)||ve.length!==2)throw new Error("gl-surface: invalid ticks");for(ye=0;ye<2;++ye){var Ie=ve[ye];if((Array.isArray(Ie)||Ie.length)&&(Ie=b(Ie)),Ie.shape[0]!==fe[ye])throw new Error("gl-surface: invalid tick length");var xe=b(Ie.data,fe);xe.stride[ye]=Ie.stride[0],xe.stride[1^ye]=0,this.padField(this._field[ye],xe)}}else{for(ye=0;ye<2;++ye){var Ae=[0,0];Ae[ye]=1,this._field[ye]=b(this._field[ye].data,[fe[0]+2,fe[1]+2],Ae,0)}this._field[0].set(0,0,0);for(var Se=0;Se<fe[0];++Se)this._field[0].set(Se+1,0,Se);for(this._field[0].set(fe[0]+1,0,fe[0]-1),this._field[1].set(0,0,0),Se=0;Se<fe[1];++Se)this._field[1].set(0,Se+1,Se);this._field[1].set(0,fe[1]+1,fe[1]-1)}var Te=this._field,Q=b(i.mallocFloat(3*Te[2].size*2),[3,fe[0]+2,fe[1]+2,2]);for(ye=0;ye<3;++ye)m(Q.pick(ye),Te[ye],"mirror");var oe=b(i.mallocFloat(3*Te[2].size),[fe[0]+2,fe[1]+2,3]);for(ye=0;ye<fe[0]+2;++ye)for(Se=0;Se<fe[1]+2;++Se){var ce=Q.get(0,ye,Se,0),me=Q.get(0,ye,Se,1),Me=Q.get(1,ye,Se,0),Re=Q.get(1,ye,Se,1),Ce=Q.get(2,ye,Se,0),ze=Q.get(2,ye,Se,1),le=Me*ze-Re*Ce,de=Ce*me-ze*ce,be=ce*Re-me*Me,Fe=Math.sqrt(le*le+de*de+be*be);Fe<1e-8?(Fe=Math.max(Math.abs(le),Math.abs(de),Math.abs(be)))<1e-8?(be=1,de=le=0,Fe=1):Fe=1/Fe:Fe=1/Math.sqrt(Fe),oe.set(ye,Se,0,le*Fe),oe.set(ye,Se,1,de*Fe),oe.set(ye,Se,2,be*Fe)}i.free(Q.data);var Ve=[1/0,1/0,1/0],He=[-1/0,-1/0,-1/0],rt=1/0,tt=-1/0,ot=(fe[0]-1)*(fe[1]-1)*6,ht=i.mallocFloat(o.nextPow2(10*ot)),_t=0,dt=0;for(ye=0;ye<fe[0]-1;++ye)e:for(Se=0;Se<fe[1]-1;++Se){for(var bt=0;bt<2;++bt)for(var St=0;St<2;++St)for(var Et=0;Et<3;++Et){var zt=this._field[Et].get(1+ye+bt,1+Se+St);if(isNaN(zt)||!isFinite(zt))continue e}for(Et=0;Et<6;++Et){var Ut=ye+C[Et][0],Pt=Se+C[Et][1],Ze=this._field[0].get(Ut+1,Pt+1),Ye=this._field[1].get(Ut+1,Pt+1);zt=this._field[2].get(Ut+1,Pt+1),le=oe.get(Ut+1,Pt+1,0),de=oe.get(Ut+1,Pt+1,1),be=oe.get(Ut+1,Pt+1,2),ee.intensity&&(Be=ee.intensity.get(Ut,Pt));var Be=ee.intensity?ee.intensity.get(Ut,Pt):zt+this.objectOffset[2];ht[_t++]=Ut,ht[_t++]=Pt,ht[_t++]=Ze,ht[_t++]=Ye,ht[_t++]=zt,ht[_t++]=0,ht[_t++]=Be,ht[_t++]=le,ht[_t++]=de,ht[_t++]=be,Ve[0]=Math.min(Ve[0],Ze+this.objectOffset[0]),Ve[1]=Math.min(Ve[1],Ye+this.objectOffset[1]),Ve[2]=Math.min(Ve[2],zt+this.objectOffset[2]),rt=Math.min(rt,Be),He[0]=Math.max(He[0],Ze+this.objectOffset[0]),He[1]=Math.max(He[1],Ye+this.objectOffset[1]),He[2]=Math.max(He[2],zt+this.objectOffset[2]),tt=Math.max(tt,Be),dt+=1}}for(ee.intensityBounds&&(rt=+ee.intensityBounds[0],tt=+ee.intensityBounds[1]),ye=6;ye<_t;ye+=10)ht[ye]=(ht[ye]-rt)/(tt-rt);this._vertexCount=dt,this._coordinateBuffer.update(ht.subarray(0,_t)),i.freeFloat(ht),i.free(oe.data),this.bounds=[Ve,He],this.intensity=ee.intensity||this._field[2],this.intensityBounds[0]===rt&&this.intensityBounds[1]===tt||(ie=!0),this.intensityBounds=[rt,tt]}if("levels"in ee){var ke=ee.levels;for(ke=Array.isArray(ke[0])?ke.slice():[[],[],ke],ye=0;ye<3;++ye)ke[ye]=ke[ye].slice(),ke[ye].sort(function(xn,dn){return xn-dn});for(ye=0;ye<3;++ye)for(Se=0;Se<ke[ye].length;++Se)ke[ye][Se]-=this.objectOffset[ye];e:for(ye=0;ye<3;++ye){if(ke[ye].length!==this.contourLevels[ye].length){ie=!0;break}for(Se=0;Se<ke[ye].length;++Se)if(ke[ye][Se]!==this.contourLevels[ye][Se]){ie=!0;break e}}this.contourLevels=ke}if(ie){Te=this._field,fe=this.shape;for(var Pe=[],qe=0;qe<3;++qe){var Xe=this.contourLevels[qe],nt=[],ut=[],ct=[0,0,0];for(ye=0;ye<Xe.length;++ye){var Ct=v(this._field[qe],Xe[ye]);nt.push(Pe.length/5|0),dt=0;e:for(Se=0;Se<Ct.cells.length;++Se){var Lt=Ct.cells[Se];for(Et=0;Et<2;++Et){var Mt=Ct.positions[Lt[Et]],mt=Mt[0],kt=0|Math.floor(mt),wt=mt-kt,Ot=Mt[1],It=0|Math.floor(Ot),Nt=Ot-It,Dt=!1;t:for(var qt=0;qt<3;++qt){ct[qt]=0;var Xt=(qe+qt+1)%3;for(bt=0;bt<2;++bt){var cn=bt?wt:1-wt;for(Ut=0|Math.min(Math.max(kt+bt,0),fe[0]),St=0;St<2;++St){var yn=St?Nt:1-Nt;if(Pt=0|Math.min(Math.max(It+St,0),fe[1]),zt=qt<2?this._field[Xt].get(Ut,Pt):(this.intensity.get(Ut,Pt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(zt)||isNaN(zt)){Dt=!0;break t}var Kt=cn*yn;ct[qt]+=Kt*zt}}}if(Dt){if(Et>0){for(var Mn=0;Mn<5;++Mn)Pe.pop();dt-=1}continue e}Pe.push(ct[0],ct[1],Mt[0],Mt[1],ct[2]),dt+=1}}ut.push(dt)}this._contourOffsets[qe]=nt,this._contourCounts[qe]=ut}var Un=i.mallocFloat(Pe.length);for(ye=0;ye<Pe.length;++ye)Un[ye]=Pe[ye];this._contourBuffer.update(Un),i.freeFloat(Un)}},z.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ee=0;ee<3;++ee)i.freeFloat(this._field[ee].data)},z.highlight=function(ee){var re,ie;if(!ee)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(re=0;re<3;++re)this.enableHighlight[re]?this.highlightLevel[re]=ee.level[re]:this.highlightLevel[re]=-1;for(ie=this.snapToData?ee.dataCoordinate:ee.position,re=0;re<3;++re)ie[re]-=this.objectOffset[re];if(this.enableDynamic[0]&&ie[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ie[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ie[2]!==this.dynamicLevel[2]){for(var se=0,fe=this.shape,ye=i.mallocFloat(12*fe[0]*fe[1]),ge=0;ge<3;++ge)if(this.enableDynamic[ge]){this.dynamicLevel[ge]=ie[ge];var he=(ge+1)%3,ve=(ge+2)%3,Ie=this._field[ge],xe=this._field[he],Ae=this._field[ve],Se=v(Ie,ie[ge]),Te=Se.cells,Q=Se.positions;for(this._dynamicOffsets[ge]=se,re=0;re<Te.length;++re)for(var oe=Te[re],ce=0;ce<2;++ce){var me=Q[oe[ce]],Me=+me[0],Re=0|Me,Ce=0|Math.min(Re+1,fe[0]),ze=Me-Re,le=1-ze,de=+me[1],be=0|de,Fe=0|Math.min(be+1,fe[1]),Ve=de-be,He=1-Ve,rt=le*He,tt=le*Ve,ot=ze*He,ht=ze*Ve,_t=rt*xe.get(Re,be)+tt*xe.get(Re,Fe)+ot*xe.get(Ce,be)+ht*xe.get(Ce,Fe),dt=rt*Ae.get(Re,be)+tt*Ae.get(Re,Fe)+ot*Ae.get(Ce,be)+ht*Ae.get(Ce,Fe);if(isNaN(_t)||isNaN(dt)){ce&&(se-=1);break}ye[2*se+0]=_t,ye[2*se+1]=dt,se+=1}this._dynamicCounts[ge]=se-this._dynamicOffsets[ge]}else this.dynamicLevel[ge]=NaN,this._dynamicCounts[ge]=0;this._dynamicBuffer.update(ye.subarray(0,2*se)),i.freeFloat(ye)}}},8931:function(d,s,t){var o=t(5050),r=t(7498),n=t(5306);d.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||h(_),typeof arguments[1]=="number")return w(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return w(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var E=arguments[1],L=f(E)?E:E.raw;if(L)return u(_,L,0|E.width,0|E.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(E.shape&&E.data&&E.stride)return S(_,E)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,i=null,c=null;function h(_){a=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],i=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],c=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function f(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var b=function(_,E){r.muls(_,E,255)};function v(_,E,L){var C=_.gl,P=C.getParameter(C.MAX_TEXTURE_SIZE);if(E<0||E>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[E,L],_.bind(),C.texImage2D(C.TEXTURE_2D,0,_.format,E,L,0,_.format,_.type,null),_._mipLevels=[0],_}function g(_,E,L,C,P,I){this.gl=_,this.handle=E,this.format=P,this.type=I,this._shape=[L,C],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var U=this,z=[this._wrapS,this._wrapT];Object.defineProperties(z,[{get:function(){return U._wrapS},set:function(F){return U.wrapS=F}},{get:function(){return U._wrapT},set:function(F){return U.wrapT=F}}]),this._wrapVector=z;var H=[this._shape[0],this._shape[1]];Object.defineProperties(H,[{get:function(){return U._shape[0]},set:function(F){return U.width=F}},{get:function(){return U._shape[1]},set:function(F){return U.height=F}}]),this._shapeVector=H}var y=g.prototype;function p(_,E){return _.length===3?E[2]===1&&E[1]===_[0]*_[2]&&E[0]===_[2]:E[0]===1&&E[1]===_[0]}function m(_){var E=_.createTexture();return _.bindTexture(_.TEXTURE_2D,E),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),E}function w(_,E,L,C,P){var I=_.getParameter(_.MAX_TEXTURE_SIZE);if(E<0||E>I||L<0||L>I)throw new Error("gl-texture2d: Invalid texture shape");if(P===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var U=m(_);return _.texImage2D(_.TEXTURE_2D,0,C,E,L,0,C,P,null),new g(_,U,E,L,C,P)}function u(_,E,L,C,P,I){var U=m(_);return _.texImage2D(_.TEXTURE_2D,0,P,P,I,E),new g(_,U,L,C,P,I)}function S(_,E){var L=E.dtype,C=E.shape.slice(),P=_.getParameter(_.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>P||C[1]<0||C[1]>P)throw new Error("gl-texture2d: Invalid texture size");var I=p(C,E.stride.slice()),U=0;L==="float32"?U=_.FLOAT:L==="float64"?(U=_.FLOAT,I=!1,L="float32"):L==="uint8"?U=_.UNSIGNED_BYTE:(U=_.UNSIGNED_BYTE,I=!1,L="uint8");var z,H,F=0;if(C.length===2)F=_.LUMINANCE,C=[C[0],C[1],1],E=o(E.data,C,[E.stride[0],E.stride[1],1],E.offset);else{if(C.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(C[2]===1)F=_.ALPHA;else if(C[2]===2)F=_.LUMINANCE_ALPHA;else if(C[2]===3)F=_.RGB;else{if(C[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");F=_.RGBA}}U!==_.FLOAT||_.getExtension("OES_texture_float")||(U=_.UNSIGNED_BYTE,I=!1);var N=E.size;if(I)z=E.offset===0&&E.data.length===N?E.data:E.data.subarray(E.offset,E.offset+N);else{var B=[C[2],C[2]*C[0],1];H=n.malloc(N,L);var j=o(H,C,B,0);L!=="float32"&&L!=="float64"||U!==_.UNSIGNED_BYTE?r.assign(j,E):b(j,E),z=H.subarray(0,N)}var K=m(_);return _.texImage2D(_.TEXTURE_2D,0,F,C[0],C[1],0,F,U,z),I||n.free(H),new g(_,K,C[0],C[1],F,U)}Object.defineProperties(y,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var E=this.gl;if(this.type===E.FLOAT&&a.indexOf(_)>=0&&(E.getExtension("OES_texture_float_linear")||(_=E.NEAREST)),i.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var E=this.gl;if(this.type===E.FLOAT&&a.indexOf(_)>=0&&(E.getExtension("OES_texture_float_linear")||(_=E.NEAREST)),i.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var E=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),E!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var E=0;E<2;++E)if(c.indexOf(_[E])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return v(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return v(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,v(this,this._shape[0],_),_}}}),y.bind=function(_){var E=this.gl;return _!==void 0&&E.activeTexture(E.TEXTURE0+(0|_)),E.bindTexture(E.TEXTURE_2D,this.handle),_!==void 0?0|_:E.getParameter(E.ACTIVE_TEXTURE)-E.TEXTURE0},y.dispose=function(){this.gl.deleteTexture(this.handle)},y.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),E=0;_>0;++E,_>>>=1)this._mipLevels.indexOf(E)<0&&this._mipLevels.push(E)},y.setPixels=function(_,E,L,C){var P=this.gl;this.bind(),Array.isArray(E)?(C=L,L=0|E[1],E=0|E[0]):(E=E||0,L=L||0),C=C||0;var I=f(_)?_:_.raw;if(I)this._mipLevels.indexOf(C)<0?(P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,this.type,I),this._mipLevels.push(C)):P.texSubImage2D(P.TEXTURE_2D,C,E,L,this.format,this.type,I);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||E+_.shape[1]>this._shape[1]>>>C||L+_.shape[0]>this._shape[0]>>>C||E<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(U,z,H,F,N,B,j,K){var G=K.dtype,V=K.shape.slice();if(V.length<2||V.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var W=0,J=0,X=p(V,K.stride.slice());if(G==="float32"?W=U.FLOAT:G==="float64"?(W=U.FLOAT,X=!1,G="float32"):G==="uint8"?W=U.UNSIGNED_BYTE:(W=U.UNSIGNED_BYTE,X=!1,G="uint8"),V.length===2)J=U.LUMINANCE,V=[V[0],V[1],1],K=o(K.data,V,[K.stride[0],K.stride[1],1],K.offset);else{if(V.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(V[2]===1)J=U.ALPHA;else if(V[2]===2)J=U.LUMINANCE_ALPHA;else if(V[2]===3)J=U.RGB;else{if(V[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");J=U.RGBA}V[2]}if(J!==U.LUMINANCE&&J!==U.ALPHA||N!==U.LUMINANCE&&N!==U.ALPHA||(J=N),J!==N)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ee=K.size,re=j.indexOf(F)<0;if(re&&j.push(F),W===B&&X)K.offset===0&&K.data.length===ee?re?U.texImage2D(U.TEXTURE_2D,F,N,V[0],V[1],0,N,B,K.data):U.texSubImage2D(U.TEXTURE_2D,F,z,H,V[0],V[1],N,B,K.data):re?U.texImage2D(U.TEXTURE_2D,F,N,V[0],V[1],0,N,B,K.data.subarray(K.offset,K.offset+ee)):U.texSubImage2D(U.TEXTURE_2D,F,z,H,V[0],V[1],N,B,K.data.subarray(K.offset,K.offset+ee));else{var ie;ie=B===U.FLOAT?n.mallocFloat32(ee):n.mallocUint8(ee);var se=o(ie,V,[V[2],V[2]*V[0],1]);W===U.FLOAT&&B===U.UNSIGNED_BYTE?b(se,K):r.assign(se,K),re?U.texImage2D(U.TEXTURE_2D,F,N,V[0],V[1],0,N,B,ie.subarray(0,ee)):U.texSubImage2D(U.TEXTURE_2D,F,z,H,V[0],V[1],N,B,ie.subarray(0,ee)),B===U.FLOAT?n.freeFloat32(ie):n.freeUint8(ie)}})(P,E,L,C,this.format,this.type,this._mipLevels,_)}}},3056:function(d){d.exports=function(s,t,o){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(o){if(o.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<o.length;++n){var a=o[n];if(a.buffer){var i=a.buffer,c=a.size||4,h=a.type||s.FLOAT,f=!!a.normalized,b=a.stride||0,v=a.offset||0;i.bind(),s.enableVertexAttribArray(n),s.vertexAttribPointer(n,c,h,f,b,v)}else{if(typeof a=="number")s.vertexAttrib1f(n,a);else if(a.length===1)s.vertexAttrib1f(n,a[0]);else if(a.length===2)s.vertexAttrib2f(n,a[0],a[1]);else if(a.length===3)s.vertexAttrib3f(n,a[0],a[1],a[2]);else{if(a.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(n,a[0],a[1],a[2],a[3])}s.disableVertexAttribArray(n)}}for(;n<r;++n)s.disableVertexAttribArray(n)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),n=0;n<r;++n)s.disableVertexAttribArray(n)}},7220:function(d,s,t){var o=t(3056);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){o(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,i){this._elements=a,this._attributes=n,this._elementsType=i||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,i){i=i||0;var c=this.gl;this._elements?c.drawElements(n,a,this._elementsType,i):c.drawArrays(n,i,a)},d.exports=function(n){return new r(n)}},3778:function(d,s,t){var o=t(3056);function r(a,i,c,h,f,b){this.location=a,this.dimension=i,this.a=c,this.b=h,this.c=f,this.d=b}function n(a,i,c){this.gl=a,this._ext=i,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,i,c){if(this.bind(),o(this.gl,i,a),this.unbind(),this._attribs.length=0,a)for(var h=0;h<a.length;++h){var f=a[h];typeof f=="number"?this._attribs.push(new r(h,1,f)):Array.isArray(f)&&this._attribs.push(new r(h,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!i,this._elementsType=c||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,i,c){c=c||0;var h=this.gl;this._useElements?h.drawElements(a,i,this._elementsType,c):h.drawArrays(a,c,i)},d.exports=function(a,i){return new n(a,i,i.createVertexArrayOES())}},2944:function(d,s,t){var o=t(3778),r=t(7220);function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}d.exports=function(a,i,c,h){var f,b=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(f=b?o(a,b):r(a)).update(i,c,h),f}},2598:function(d){d.exports=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s}},5879:function(d,s,t){d.exports=function(a,i){var c=o(a[0],a[1],a[2]),h=o(i[0],i[1],i[2]);r(c,c),r(h,h);var f=n(c,h);return f>1?0:Math.acos(f)};var o=t(5415),r=t(899),n=t(9305)},8827:function(d){d.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},7622:function(d){d.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},8782:function(d){d.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},8501:function(d){d.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},903:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],c=o[1],h=o[2];return s[0]=n*h-a*c,s[1]=a*i-r*h,s[2]=r*c-n*i,s}},5981:function(d,s,t){d.exports=t(8288)},8288:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return Math.sqrt(o*o+r*r+n*n)}},8629:function(d,s,t){d.exports=t(7979)},7979:function(d){d.exports=function(s,t,o){return s[0]=t[0]/o[0],s[1]=t[1]/o[1],s[2]=t[2]/o[2],s}},9305:function(d){d.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},154:function(d){d.exports=1e-6},4932:function(d,s,t){d.exports=function(r,n){var a=r[0],i=r[1],c=r[2],h=n[0],f=n[1],b=n[2];return Math.abs(a-h)<=o*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-f)<=o*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(c-b)<=o*Math.max(1,Math.abs(c),Math.abs(b))};var o=t(154)},5777:function(d){d.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},3306:function(d){d.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},7447:function(d,s,t){d.exports=function(r,n,a,i,c,h){var f,b;for(n||(n=3),a||(a=0),b=i?Math.min(i*n+a,r.length):r.length,f=a;f<b;f+=n)o[0]=r[f],o[1]=r[f+1],o[2]=r[f+2],c(o,o,h),r[f]=o[0],r[f+1]=o[1],r[f+2]=o[2];return r};var o=t(8501)()},5415:function(d){d.exports=function(s,t,o){var r=new Float32Array(3);return r[0]=s,r[1]=t,r[2]=o,r}},2858:function(d,s,t){d.exports={EPSILON:t(154),create:t(8501),clone:t(7622),angle:t(5879),fromValues:t(5415),copy:t(8782),set:t(831),equals:t(4932),exactEquals:t(5777),add:t(2598),subtract:t(911),sub:t(8921),multiply:t(105),mul:t(5733),divide:t(7979),div:t(8629),min:t(3605),max:t(1716),floor:t(3306),ceil:t(8827),round:t(1624),scale:t(5685),scaleAndAdd:t(6722),distance:t(8288),dist:t(5981),squaredDistance:t(6403),sqrDist:t(5294),length:t(4693),len:t(1468),squaredLength:t(4337),sqrLen:t(3303),negate:t(435),inverse:t(2073),normalize:t(899),dot:t(9305),cross:t(903),lerp:t(1868),random:t(6660),transformMat4:t(3255),transformMat3:t(9908),transformQuat:t(6568),rotateX:t(392),rotateY:t(3222),rotateZ:t(3388),forEach:t(7447)}},2073:function(d){d.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},1468:function(d,s,t){d.exports=t(4693)},4693:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2];return Math.sqrt(t*t+o*o+r*r)}},1868:function(d){d.exports=function(s,t,o,r){var n=t[0],a=t[1],i=t[2];return s[0]=n+r*(o[0]-n),s[1]=a+r*(o[1]-a),s[2]=i+r*(o[2]-i),s}},1716:function(d){d.exports=function(s,t,o){return s[0]=Math.max(t[0],o[0]),s[1]=Math.max(t[1],o[1]),s[2]=Math.max(t[2],o[2]),s}},3605:function(d){d.exports=function(s,t,o){return s[0]=Math.min(t[0],o[0]),s[1]=Math.min(t[1],o[1]),s[2]=Math.min(t[2],o[2]),s}},5733:function(d,s,t){d.exports=t(105)},105:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s}},435:function(d){d.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},899:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=o*o+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a),s}},6660:function(d){d.exports=function(s,t){t=t||1;var o=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*t;return s[0]=Math.cos(o)*n,s[1]=Math.sin(o)*n,s[2]=r*t,s}},392:function(d){d.exports=function(s,t,o,r){var n=o[1],a=o[2],i=t[1]-n,c=t[2]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=t[0],s[1]=n+i*f-c*h,s[2]=a+i*h+c*f,s}},3222:function(d){d.exports=function(s,t,o,r){var n=o[0],a=o[2],i=t[0]-n,c=t[2]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=n+c*h+i*f,s[1]=t[1],s[2]=a+c*f-i*h,s}},3388:function(d){d.exports=function(s,t,o,r){var n=o[0],a=o[1],i=t[0]-n,c=t[1]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=n+i*f-c*h,s[1]=a+i*h+c*f,s[2]=t[2],s}},1624:function(d){d.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},5685:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s}},6722:function(d){d.exports=function(s,t,o,r){return s[0]=t[0]+o[0]*r,s[1]=t[1]+o[1]*r,s[2]=t[2]+o[2]*r,s}},831:function(d){d.exports=function(s,t,o,r){return s[0]=t,s[1]=o,s[2]=r,s}},5294:function(d,s,t){d.exports=t(6403)},3303:function(d,s,t){d.exports=t(4337)},6403:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return o*o+r*r+n*n}},4337:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2];return t*t+o*o+r*r}},8921:function(d,s,t){d.exports=t(911)},911:function(d){d.exports=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s}},9908:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2];return s[0]=r*o[0]+n*o[3]+a*o[6],s[1]=r*o[1]+n*o[4]+a*o[7],s[2]=r*o[2]+n*o[5]+a*o[8],s}},3255:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[3]*r+o[7]*n+o[11]*a+o[15];return i=i||1,s[0]=(o[0]*r+o[4]*n+o[8]*a+o[12])/i,s[1]=(o[1]*r+o[5]*n+o[9]*a+o[13])/i,s[2]=(o[2]*r+o[6]*n+o[10]*a+o[14])/i,s}},6568:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],c=o[1],h=o[2],f=o[3],b=f*r+c*a-h*n,v=f*n+h*r-i*a,g=f*a+i*n-c*r,y=-i*r-c*n-h*a;return s[0]=b*f+y*-i+v*-h-g*-c,s[1]=v*f+y*-c+g*-i-b*-h,s[2]=g*f+y*-h+b*-c-v*-i,s}},3433:function(d){d.exports=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s[3]=t[3]+o[3],s}},1413:function(d){d.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},3470:function(d){d.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},5313:function(d){d.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},5446:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],a=t[3]-s[3];return Math.sqrt(o*o+r*r+n*n+a*a)}},205:function(d){d.exports=function(s,t,o){return s[0]=t[0]/o[0],s[1]=t[1]/o[1],s[2]=t[2]/o[2],s[3]=t[3]/o[3],s}},4242:function(d){d.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},5680:function(d){d.exports=function(s,t,o,r){var n=new Float32Array(4);return n[0]=s,n[1]=t,n[2]=o,n[3]=r,n}},4020:function(d,s,t){d.exports={create:t(5313),clone:t(1413),fromValues:t(5680),copy:t(3470),set:t(6453),add:t(3433),subtract:t(2705),multiply:t(746),divide:t(205),min:t(2170),max:t(3030),scale:t(5510),scaleAndAdd:t(4224),distance:t(5446),squaredDistance:t(1542),length:t(8177),squaredLength:t(9037),negate:t(6459),inverse:t(8057),normalize:t(381),dot:t(4242),lerp:t(8746),random:t(3770),transformMat4:t(6342),transformQuat:t(5022)}},8057:function(d){d.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},8177:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3];return Math.sqrt(t*t+o*o+r*r+n*n)}},8746:function(d){d.exports=function(s,t,o,r){var n=t[0],a=t[1],i=t[2],c=t[3];return s[0]=n+r*(o[0]-n),s[1]=a+r*(o[1]-a),s[2]=i+r*(o[2]-i),s[3]=c+r*(o[3]-c),s}},3030:function(d){d.exports=function(s,t,o){return s[0]=Math.max(t[0],o[0]),s[1]=Math.max(t[1],o[1]),s[2]=Math.max(t[2],o[2]),s[3]=Math.max(t[3],o[3]),s}},2170:function(d){d.exports=function(s,t,o){return s[0]=Math.min(t[0],o[0]),s[1]=Math.min(t[1],o[1]),s[2]=Math.min(t[2],o[2]),s[3]=Math.min(t[3],o[3]),s}},746:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s[3]=t[3]*o[3],s}},6459:function(d){d.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},381:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=o*o+r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),s[0]=o*i,s[1]=r*i,s[2]=n*i,s[3]=a*i),s}},3770:function(d,s,t){var o=t(381),r=t(5510);d.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),o(n,n),r(n,n,a),n}},5510:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s[3]=t[3]*o,s}},4224:function(d){d.exports=function(s,t,o,r){return s[0]=t[0]+o[0]*r,s[1]=t[1]+o[1]*r,s[2]=t[2]+o[2]*r,s[3]=t[3]+o[3]*r,s}},6453:function(d){d.exports=function(s,t,o,r,n){return s[0]=t,s[1]=o,s[2]=r,s[3]=n,s}},1542:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],a=t[3]-s[3];return o*o+r*r+n*n+a*a}},9037:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3];return t*t+o*o+r*r+n*n}},2705:function(d){d.exports=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s[3]=t[3]-o[3],s}},6342:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3];return s[0]=o[0]*r+o[4]*n+o[8]*a+o[12]*i,s[1]=o[1]*r+o[5]*n+o[9]*a+o[13]*i,s[2]=o[2]*r+o[6]*n+o[10]*a+o[14]*i,s[3]=o[3]*r+o[7]*n+o[11]*a+o[15]*i,s}},5022:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],c=o[1],h=o[2],f=o[3],b=f*r+c*a-h*n,v=f*n+h*r-i*a,g=f*a+i*n-c*r,y=-i*r-c*n-h*a;return s[0]=b*f+y*-i+v*-h-g*-c,s[1]=v*f+y*-c+g*-i-b*-h,s[2]=g*f+y*-h+b*-c-v*-i,s[3]=t[3],s}},9365:function(d,s,t){var o=t(8096),r=t(7896);d.exports=function(n){for(var a=Array.isArray(n)?n:o(n),i=0;i<a.length;i++){var c=a[i];if(c.type==="preprocessor"){var h=c.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var f=h[1],b=h[2];return(f?r(b):b).trim()}}}}},3193:function(d,s,t){d.exports=function(b){var v,g,y,p=0,m=0,w=c,u=[],S=[],_=1,E=0,L=0,C=!1,P=!1,I="",U=n,z=o;(b=b||{}).version==="300 es"&&(U=i,z=a);var H={},F={};for(p=0;p<U.length;p++)H[U[p]]=!0;for(p=0;p<z.length;p++)F[z[p]]=!0;return function(ie){return S=[],ie!==null?function(se){var fe;for(p=0,se.toString&&(se=se.toString()),I+=se.replace(/\r\n/g,`
`),y=I.length;v=I[p],p<y;){switch(fe=p,w){case 0:p=G();break;case 1:case 2:p=K();break;case 3:p=V();break;case 4:p=X();break;case 11:p=J();break;case 5:p=ee();break;case h:p=re();break;case 9:p=j();break;case c:p=B()}fe!==p&&(I[fe]===`
`?(E=0,++_):++E)}return m+=p,I=I.slice(p),S}(ie):(u.length&&N(u.join("")),w=10,N("(eof)"),S)};function N(ie){ie.length&&S.push({type:f[w],data:ie,position:L,line:_,column:E})}function B(){return u=u.length?[]:u,g==="/"&&v==="*"?(L=m+p-1,w=0,g=v,p+1):g==="/"&&v==="/"?(L=m+p-1,w=1,g=v,p+1):v==="#"?(w=2,L=m+p,p):/\s/.test(v)?(w=9,L=m+p,p):(C=/\d/.test(v),P=/[^\w_]/.test(v),L=m+p,w=C?4:P?3:h,p)}function j(){return/[^\s]/g.test(v)?(N(u.join("")),w=c,p):(u.push(v),g=v,p+1)}function K(){return v!=="\r"&&v!==`
`||g==="\\"?(u.push(v),g=v,p+1):(N(u.join("")),w=c,p)}function G(){return v==="/"&&g==="*"?(u.push(v),N(u.join("")),w=c,p+1):(u.push(v),g=v,p+1)}function V(){if(g==="."&&/\d/.test(v))return w=5,p;if(g==="/"&&v==="*")return w=0,p;if(g==="/"&&v==="/")return w=1,p;if(v==="."&&u.length){for(;W(u););return w=5,p}if(v===";"||v===")"||v==="("){if(u.length)for(;W(u););return N(v),w=c,p+1}var ie=u.length===2&&v!=="=";if(/[\w_\d\s]/.test(v)||ie){for(;W(u););return w=c,p}return u.push(v),g=v,p+1}function W(ie){for(var se,fe,ye=0;;){if(se=r.indexOf(ie.slice(0,ie.length+ye).join("")),fe=r[se],se===-1){if(ye--+ie.length>0)continue;fe=ie.slice(0,1).join("")}return N(fe),L+=fe.length,(u=u.slice(fe.length)).length}}function J(){return/[^a-fA-F0-9]/.test(v)?(N(u.join("")),w=c,p):(u.push(v),g=v,p+1)}function X(){return v==="."||/[eE]/.test(v)?(u.push(v),w=5,g=v,p+1):v==="x"&&u.length===1&&u[0]==="0"?(w=11,u.push(v),g=v,p+1):/[^\d]/.test(v)?(N(u.join("")),w=c,p):(u.push(v),g=v,p+1)}function ee(){return v==="f"&&(u.push(v),g=v,p+=1),/[eE]/.test(v)?(u.push(v),g=v,p+1):(v!=="-"&&v!=="+"||!/[eE]/.test(g))&&/[^\d]/.test(v)?(N(u.join("")),w=c,p):(u.push(v),g=v,p+1)}function re(){if(/[^\d\w_]/.test(v)){var ie=u.join("");return w=F[ie]?8:H[ie]?7:6,N(u.join("")),w=c,p}return u.push(v),g=v,p+1}};var o=t(399),r=t(9746),n=t(9525),a=t(9458),i=t(3585),c=999,h=9999,f=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(d,s,t){var o=t(9525);o=o.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),d.exports=o.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(d){d.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(d,s,t){var o=t(399);d.exports=o.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(d){d.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(d){d.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(d,s,t){var o=t(3193);d.exports=function(r,n){var a=o(n),i=[];return(i=i.concat(a(r))).concat(a(null))}},6832:function(d){d.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),o=[],r=0;r<s.length-1;r++)o.push(s[r],t[r]||"");return o.push(s[r]),o.join("")}},5233:function(d,s,t){var o=t(4846);d.exports=o&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},2183:function(d,s,t){d.exports=function(b,v){var g=b.length;if(g===0)throw new Error("Must have at least d+1 points");var y=b[0].length;if(g<=y)throw new Error("Must input at least d+1 points");var p=b.slice(0,y+1),m=o.apply(void 0,p);if(m===0)throw new Error("Input not in general position");for(var w=new Array(y+1),u=0;u<=y;++u)w[u]=u;m<0&&(w[0]=1,w[1]=0);var S=new n(w,new Array(y+1),!1),_=S.adjacent,E=new Array(y+2);for(u=0;u<=y;++u){for(var L=w.slice(),C=0;C<=y;++C)C===u&&(L[C]=-1);var P=L[0];L[0]=L[1],L[1]=P;var I=new n(L,new Array(y+1),!0);_[u]=I,E[u]=I}for(E[y+1]=S,u=0;u<=y;++u){L=_[u].vertices;var U=_[u].adjacent;for(C=0;C<=y;++C){var z=L[C];if(z<0)U[C]=S;else for(var H=0;H<=y;++H)_[H].vertices.indexOf(z)<0&&(U[C]=_[H])}}var F=new h(y,p,E),N=!!v;for(u=y+1;u<g;++u)F.insert(b[u],N);return F.boundary()};var o=t(417),r=t(8211).H;function n(b,v,g){this.vertices=b,this.adjacent=v,this.boundary=g,this.lastVisited=-1}function a(b,v,g){this.vertices=b,this.cell=v,this.index=g}function i(b,v){return r(b.vertices,v.vertices)}n.prototype.flip=function(){var b=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=b;var v=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=v};var c=[];function h(b,v,g){this.dimension=b,this.vertices=v,this.simplices=g,this.interior=g.filter(function(w){return!w.boundary}),this.tuple=new Array(b+1);for(var y=0;y<=b;++y)this.tuple[y]=this.vertices[y];var p,m=c[b];m||(m=c[b]=((p=o[b+1])||(p=o),function(w){return function(){var u=this.tuple;return w.apply(this,u)}}(p))),this.orient=m}var f=h.prototype;f.handleBoundaryDegeneracy=function(b,v){var g=this.dimension,y=this.vertices.length-1,p=this.tuple,m=this.vertices,w=[b];for(b.lastVisited=-y;w.length>0;)for(var u=(b=w.pop()).adjacent,S=0;S<=g;++S){var _=u[S];if(_.boundary&&!(_.lastVisited<=-y)){for(var E=_.vertices,L=0;L<=g;++L){var C=E[L];p[L]=C<0?v:m[C]}var P=this.orient();if(P>0)return _;_.lastVisited=-y,P===0&&w.push(_)}}return null},f.walk=function(b,v){var g=this.vertices.length-1,y=this.dimension,p=this.vertices,m=this.tuple,w=v?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[w];e:for(;!u.boundary;){for(var S=u.vertices,_=u.adjacent,E=0;E<=y;++E)m[E]=p[S[E]];for(u.lastVisited=g,E=0;E<=y;++E){var L=_[E];if(!(L.lastVisited>=g)){var C=m[E];m[E]=b;var P=this.orient();if(m[E]=C,P<0){u=L;continue e}L.boundary?L.lastVisited=-g:L.lastVisited=g}}return}return u},f.addPeaks=function(b,v){var g=this.vertices.length-1,y=this.dimension,p=this.vertices,m=this.tuple,w=this.interior,u=this.simplices,S=[v];v.lastVisited=g,v.vertices[v.vertices.indexOf(-1)]=g,v.boundary=!1,w.push(v);for(var _=[];S.length>0;){var E=(v=S.pop()).vertices,L=v.adjacent,C=E.indexOf(g);if(!(C<0)){for(var P=0;P<=y;++P)if(P!==C){var I=L[P];if(I.boundary&&!(I.lastVisited>=g)){var U=I.vertices;if(I.lastVisited!==-g){for(var z=0,H=0;H<=y;++H)U[H]<0?(z=H,m[H]=b):m[H]=p[U[H]];if(this.orient()>0){U[z]=g,I.boundary=!1,w.push(I),S.push(I),I.lastVisited=g;continue}I.lastVisited=-g}var F=I.adjacent,N=E.slice(),B=L.slice(),j=new n(N,B,!0);u.push(j);var K=F.indexOf(v);if(!(K<0))for(F[K]=j,B[C]=I,N[P]=-1,B[P]=v,L[P]=j,j.flip(),H=0;H<=y;++H){var G=N[H];if(!(G<0||G===g)){for(var V=new Array(y-1),W=0,J=0;J<=y;++J){var X=N[J];X<0||J===H||(V[W++]=X)}_.push(new a(V,j,H))}}}}}}for(_.sort(i),P=0;P+1<_.length;P+=2){var ee=_[P],re=_[P+1],ie=ee.index,se=re.index;ie<0||se<0||(ee.cell.adjacent[ee.index]=re.cell,re.cell.adjacent[re.index]=ee.cell)}},f.insert=function(b,v){var g=this.vertices;g.push(b);var y=this.walk(b,v);if(y){for(var p=this.dimension,m=this.tuple,w=0;w<=p;++w){var u=y.vertices[w];m[w]=u<0?b:g[u]}var S=this.orient(m);S<0||(S!==0||(y=this.handleBoundaryDegeneracy(y,b)))&&this.addPeaks(b,y)}},f.boundary=function(){for(var b=this.dimension,v=[],g=this.simplices,y=g.length,p=0;p<y;++p){var m=g[p];if(m.boundary){for(var w=new Array(b),u=m.vertices,S=0,_=0,E=0;E<=b;++E)u[E]>=0?w[S++]=u[E]:_=1&E;if(_===(1&b)){var L=w[0];w[0]=w[1],w[1]=L}v.push(w)}}return v}},9014:function(d,s,t){var o=t(5070);function r(S,_,E,L,C){this.mid=S,this.left=_,this.right=E,this.leftPoints=L,this.rightPoints=C,this.count=(_?_.count:0)+(E?E.count:0)+L.length}d.exports=function(S){return S&&S.length!==0?new w(m(S)):new w(null)};var n=r.prototype;function a(S,_){S.mid=_.mid,S.left=_.left,S.right=_.right,S.leftPoints=_.leftPoints,S.rightPoints=_.rightPoints,S.count=_.count}function i(S,_){var E=m(_);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function c(S,_){var E=S.intervals([]);E.push(_),i(S,E)}function h(S,_){var E=S.intervals([]),L=E.indexOf(_);return L<0?0:(E.splice(L,1),i(S,E),1)}function f(S,_,E){for(var L=0;L<S.length&&S[L][0]<=_;++L){var C=E(S[L]);if(C)return C}}function b(S,_,E){for(var L=S.length-1;L>=0&&S[L][1]>=_;--L){var C=E(S[L]);if(C)return C}}function v(S,_){for(var E=0;E<S.length;++E){var L=_(S[E]);if(L)return L}}function g(S,_){return S-_}function y(S,_){return S[0]-_[0]||S[1]-_[1]}function p(S,_){return S[1]-_[1]||S[0]-_[0]}function m(S){if(S.length===0)return null;for(var _=[],E=0;E<S.length;++E)_.push(S[E][0],S[E][1]);_.sort(g);var L=_[_.length>>1],C=[],P=[],I=[];for(E=0;E<S.length;++E){var U=S[E];U[1]<L?C.push(U):L<U[0]?P.push(U):I.push(U)}var z=I,H=I.slice();return z.sort(y),H.sort(p),new r(L,m(C),m(P),z,H)}function w(S){this.root=S}n.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},n.insert=function(S){var _=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(_+1)?c(this,S):this.left.insert(S):this.left=m([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(_+1)?c(this,S):this.right.insert(S):this.right=m([S]);else{var E=o.ge(this.leftPoints,S,y),L=o.ge(this.rightPoints,S,p);this.leftPoints.splice(E,0,S),this.rightPoints.splice(L,0,S)}},n.remove=function(S){var _=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(_-1)?h(this,S):(P=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(_-1)?h(this,S):(P=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,L=this.left;L.right;)E=L,L=L.right;if(E===this)L.right=this.right;else{var C=this.left,P=this.right;E.count-=L.count,E.right=L.left,L.left=C,L.right=P}a(this,L),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(C=o.ge(this.leftPoints,S,y);C<this.leftPoints.length&&this.leftPoints[C][0]===S[0];++C)if(this.leftPoints[C]===S){for(this.count-=1,this.leftPoints.splice(C,1),P=o.ge(this.rightPoints,S,p);P<this.rightPoints.length&&this.rightPoints[P][1]===S[1];++P)if(this.rightPoints[P]===S)return this.rightPoints.splice(P,1),1}return 0},n.queryPoint=function(S,_){return S<this.mid?this.left&&(E=this.left.queryPoint(S,_))?E:f(this.leftPoints,S,_):S>this.mid?this.right&&(E=this.right.queryPoint(S,_))?E:b(this.rightPoints,S,_):v(this.leftPoints,_);var E},n.queryInterval=function(S,_,E){var L;return S<this.mid&&this.left&&(L=this.left.queryInterval(S,_,E))||_>this.mid&&this.right&&(L=this.right.queryInterval(S,_,E))?L:_<this.mid?f(this.leftPoints,_,E):S>this.mid?b(this.rightPoints,S,E):v(this.leftPoints,E)};var u=w.prototype;u.insert=function(S){this.root?this.root.insert(S):this.root=new r(S[0],null,null,[S],[S])},u.remove=function(S){if(this.root){var _=this.root.remove(S);return _===2&&(this.root=null),_!==0}return!1},u.queryPoint=function(S,_){if(this.root)return this.root.queryPoint(S,_)},u.queryInterval=function(S,_,E){if(S<=_&&this.root)return this.root.queryInterval(S,_,E)},Object.defineProperty(u,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(u,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(d){d.exports=function(s){for(var t=new Array(s),o=0;o<s;++o)t[o]=o;return t}},4846:function(d){d.exports=!0},4780:function(d){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}d.exports=function(t){return t!=null&&(s(t)||function(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&s(o.slice(0,0))}(t)||!!t._isBuffer)}},2861:function(d){d.exports=o,d.exports.isMobile=o,d.exports.default=o;var s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function o(r){r||(r={});var n=r.ua;if(n||typeof navigator>"u"||(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),typeof n!="string")return!1;var a=r.tablet?t.test(n):s.test(n);return!a&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&n.indexOf("Macintosh")!==-1&&n.indexOf("Safari")!==-1&&(a=!0),a}},3596:function(d){d.exports=function(s){for(var t,o=s.length,r=0;r<o;r++)if(((t=s.charCodeAt(r))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},3578:function(d){d.exports=function(s,t,o){return s*(1-o)+t*o}},7191:function(d,s,t){var o=t(4690),r=t(9823),n=t(7332),a=t(7787),i=t(7437),c=t(2142),h={length:t(4693),normalize:t(899),dot:t(9305),cross:t(903)},f=r(),b=r(),v=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],y=[0,0,0];function p(m,w,u,S,_){m[0]=w[0]*S+u[0]*_,m[1]=w[1]*S+u[1]*_,m[2]=w[2]*S+u[2]*_}d.exports=function(m,w,u,S,_,E){if(w||(w=[0,0,0]),u||(u=[0,0,0]),S||(S=[0,0,0]),_||(_=[0,0,0,1]),E||(E=[0,0,0,1]),!o(f,m)||(n(b,f),b[3]=0,b[7]=0,b[11]=0,b[15]=1,Math.abs(a(b)<1e-8)))return!1;var L,C,P,I,U,z,H,F=f[3],N=f[7],B=f[11],j=f[12],K=f[13],G=f[14],V=f[15];if(F!==0||N!==0||B!==0){if(v[0]=F,v[1]=N,v[2]=B,v[3]=V,!i(b,b))return!1;c(b,b),L=_,P=b,I=(C=v)[0],U=C[1],z=C[2],H=C[3],L[0]=P[0]*I+P[4]*U+P[8]*z+P[12]*H,L[1]=P[1]*I+P[5]*U+P[9]*z+P[13]*H,L[2]=P[2]*I+P[6]*U+P[10]*z+P[14]*H,L[3]=P[3]*I+P[7]*U+P[11]*z+P[15]*H}else _[0]=_[1]=_[2]=0,_[3]=1;if(w[0]=j,w[1]=K,w[2]=G,function(J,X){J[0][0]=X[0],J[0][1]=X[1],J[0][2]=X[2],J[1][0]=X[4],J[1][1]=X[5],J[1][2]=X[6],J[2][0]=X[8],J[2][1]=X[9],J[2][2]=X[10]}(g,f),u[0]=h.length(g[0]),h.normalize(g[0],g[0]),S[0]=h.dot(g[0],g[1]),p(g[1],g[1],g[0],1,-S[0]),u[1]=h.length(g[1]),h.normalize(g[1],g[1]),S[0]/=u[1],S[1]=h.dot(g[0],g[2]),p(g[2],g[2],g[0],1,-S[1]),S[2]=h.dot(g[1],g[2]),p(g[2],g[2],g[1],1,-S[2]),u[2]=h.length(g[2]),h.normalize(g[2],g[2]),S[1]/=u[2],S[2]/=u[2],h.cross(y,g[1],g[2]),h.dot(g[0],y)<0)for(var W=0;W<3;W++)u[W]*=-1,g[W][0]*=-1,g[W][1]*=-1,g[W][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(E[0]=-E[0]),g[0][2]>g[2][0]&&(E[1]=-E[1]),g[1][0]>g[0][1]&&(E[2]=-E[2]),!0}},4690:function(d){d.exports=function(s,t){var o=t[15];if(o===0)return!1;for(var r=1/o,n=0;n<16;n++)s[n]=t[n]*r;return!0}},7649:function(d,s,t){var o=t(1868),r=t(1102),n=t(7191),a=t(7787),i=t(1116),c=b(),h=b(),f=b();function b(){return{translate:v(),scale:v(1),skew:v(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function v(g){return[g||0,g||0,g||0]}d.exports=function(g,y,p,m){if(a(y)===0||a(p)===0)return!1;var w=n(y,c.translate,c.scale,c.skew,c.perspective,c.quaternion),u=n(p,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!w||!u||(o(f.translate,c.translate,h.translate,m),o(f.skew,c.skew,h.skew,m),o(f.scale,c.scale,h.scale,m),o(f.perspective,c.perspective,h.perspective,m),i(f.quaternion,c.quaternion,h.quaternion,m),r(g,f.translate,f.scale,f.skew,f.perspective,f.quaternion),0))}},1102:function(d,s,t){var o={identity:t(9947),translate:t(998),multiply:t(104),create:t(9823),scale:t(3668),fromRotationTranslation:t(7280)},r=(o.create(),o.create());d.exports=function(n,a,i,c,h,f){return o.identity(n),o.fromRotationTranslation(n,f,a),n[3]=h[0],n[7]=h[1],n[11]=h[2],n[15]=h[3],o.identity(r),c[2]!==0&&(r[9]=c[2],o.multiply(n,n,r)),c[1]!==0&&(r[9]=0,r[8]=c[1],o.multiply(n,n,r)),c[0]!==0&&(r[8]=0,r[4]=c[0],o.multiply(n,n,r)),o.scale(n,n,i),n}},9298:function(d,s,t){var o=t(5070),r=t(7649),n=t(7437),a=t(6109),i=t(7115),c=t(5240),h=t(3012),f=t(998),b=(t(3668),t(899)),v=[0,0,0];function g(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}d.exports=function(m){return new g((m=m||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var y=g.prototype;y.recalcMatrix=function(m){var w=this._time,u=o.le(w,m),S=this.computedMatrix;if(!(u<0)){var _=this._components;if(u===w.length-1)for(var E=16*u,L=0;L<16;++L)S[L]=_[E++];else{var C=w[u+1]-w[u],P=(E=16*u,this.prevMatrix),I=!0;for(L=0;L<16;++L)P[L]=_[E++];var U=this.nextMatrix;for(L=0;L<16;++L)U[L]=_[E++],I=I&&P[L]===U[L];if(C<1e-6||I)for(L=0;L<16;++L)S[L]=P[L];else r(S,P,U,(m-w[u])/C)}var z=this.computedUp;z[0]=S[1],z[1]=S[5],z[2]=S[9],b(z,z);var H=this.computedInverse;n(H,S);var F=this.computedEye,N=H[15];F[0]=H[12]/N,F[1]=H[13]/N,F[2]=H[14]/N;var B=this.computedCenter,j=Math.exp(this.computedRadius[0]);for(L=0;L<3;++L)B[L]=F[L]-S[2+4*L]*j}},y.idle=function(m){if(!(m<this.lastT())){for(var w=this._components,u=w.length-16,S=0;S<16;++S)w.push(w[u++]);this._time.push(m)}},y.flush=function(m){var w=o.gt(this._time,m)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},y.lastT=function(){return this._time[this._time.length-1]},y.lookAt=function(m,w,u,S){this.recalcMatrix(m),w=w||this.computedEye,u=u||v,S=S||this.computedUp,this.setMatrix(m,h(this.computedMatrix,w,u,S));for(var _=0,E=0;E<3;++E)_+=Math.pow(u[E]-w[E],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},y.rotate=function(m,w,u,S){this.recalcMatrix(m);var _=this.computedInverse;w&&i(_,_,w),u&&a(_,_,u),S&&c(_,_,S),this.setMatrix(m,n(this.computedMatrix,_))};var p=[0,0,0];y.pan=function(m,w,u,S){p[0]=-(w||0),p[1]=-(u||0),p[2]=-(S||0),this.recalcMatrix(m);var _=this.computedInverse;f(_,_,p),this.setMatrix(m,n(_,_))},y.translate=function(m,w,u,S){p[0]=w||0,p[1]=u||0,p[2]=S||0,this.recalcMatrix(m);var _=this.computedMatrix;f(_,_,p),this.setMatrix(m,_)},y.setMatrix=function(m,w){if(!(m<this.lastT())){this._time.push(m);for(var u=0;u<16;++u)this._components.push(w[u])}},y.setDistance=function(m,w){this.computedRadius[0]=w},y.setDistanceLimits=function(m,w){var u=this._limits;u[0]=m,u[1]=w},y.getDistanceLimits=function(m){var w=this._limits;return m?(m[0]=w[0],m[1]=w[1],m):w}},3266:function(d,s,t){d.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),i=0;i<n;++i)a[i]=i;return n===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var c=new Array(n);for(i=0;i<n;++i)c[i]=i;c.sort(function(w,u){return r[w][0]-r[u][0]||r[w][1]-r[u][1]});var h=[c[0],c[1]],f=[c[0],c[1]];for(i=2;i<n;++i){for(var b=c[i],v=r[b],g=h.length;g>1&&o(r[h[g-2]],r[h[g-1]],v)<=0;)g-=1,h.pop();for(h.push(b),g=f.length;g>1&&o(r[f[g-2]],r[f[g-1]],v)>=0;)g-=1,f.pop();f.push(b)}a=new Array(f.length+h.length-2);for(var y=0,p=(i=0,h.length);i<p;++i)a[y++]=h[i];for(var m=f.length-2;m>0;--m)a[y++]=f[m];return a};var o=t(417)[3]},6145:function(d,s,t){d.exports=function(r,n){n||(n=r,r=window);var a=0,i=0,c=0,h={shift:!1,alt:!1,control:!1,meta:!1},f=!1;function b(E){var L=!1;return"altKey"in E&&(L=L||E.altKey!==h.alt,h.alt=!!E.altKey),"shiftKey"in E&&(L=L||E.shiftKey!==h.shift,h.shift=!!E.shiftKey),"ctrlKey"in E&&(L=L||E.ctrlKey!==h.control,h.control=!!E.ctrlKey),"metaKey"in E&&(L=L||E.metaKey!==h.meta,h.meta=!!E.metaKey),L}function v(E,L){var C=o.x(L),P=o.y(L);"buttons"in L&&(E=0|L.buttons),(E!==a||C!==i||P!==c||b(L))&&(a=0|E,i=C||0,c=P||0,n&&n(a,i,c,h))}function g(E){v(0,E)}function y(){(a||i||c||h.shift||h.alt||h.meta||h.control)&&(i=c=0,a=0,h.shift=h.alt=h.control=h.meta=!1,n&&n(0,0,0,h))}function p(E){b(E)&&n&&n(a,i,c,h)}function m(E){o.buttons(E)===0?v(0,E):v(a,E)}function w(E){v(a|o.buttons(E),E)}function u(E){v(a&~o.buttons(E),E)}function S(){f||(f=!0,r.addEventListener("mousemove",m),r.addEventListener("mousedown",w),r.addEventListener("mouseup",u),r.addEventListener("mouseleave",g),r.addEventListener("mouseenter",g),r.addEventListener("mouseout",g),r.addEventListener("mouseover",g),r.addEventListener("blur",y),r.addEventListener("keyup",p),r.addEventListener("keydown",p),r.addEventListener("keypress",p),r!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}S();var _={element:r};return Object.defineProperties(_,{enabled:{get:function(){return f},set:function(E){E?S():f&&(f=!1,r.removeEventListener("mousemove",m),r.removeEventListener("mousedown",w),r.removeEventListener("mouseup",u),r.removeEventListener("mouseleave",g),r.removeEventListener("mouseenter",g),r.removeEventListener("mouseout",g),r.removeEventListener("mouseover",g),r.removeEventListener("blur",y),r.removeEventListener("keyup",p),r.removeEventListener("keydown",p),r.removeEventListener("keypress",p),r!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return c},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),_};var o=t(4110)},2565:function(d){var s={left:0,top:0};d.exports=function(t,o,r){o=o||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,a=t.clientX||0,i=t.clientY||0,c=(n=o)===window||n===document||n===document.body?s:n.getBoundingClientRect();return r[0]=a-c.left,r[1]=i-c.top,r}},4110:function(d,s){function t(o){return o.target||o.srcElement||window}s.buttons=function(o){if(typeof o=="object"){if("buttons"in o)return o.buttons;if("which"in o){if((r=o.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in o){var r;if((r=o.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},s.element=t,s.x=function(o){if(typeof o=="object"){if("offsetX"in o)return o.offsetX;var r=t(o).getBoundingClientRect();return o.clientX-r.left}return 0},s.y=function(o){if(typeof o=="object"){if("offsetY"in o)return o.offsetY;var r=t(o).getBoundingClientRect();return o.clientY-r.top}return 0}},6475:function(d,s,t){var o=t(14);d.exports=function(r,n,a){typeof r=="function"&&(a=!!n,n=r,r=window);var i=o("ex",r),c=function(h){a&&h.preventDefault();var f=h.deltaX||0,b=h.deltaY||0,v=h.deltaZ||0,g=1;switch(h.deltaMode){case 1:g=i;break;case 2:g=window.innerHeight}if(b*=g,v*=g,(f*=g)||b||v)return n(f,b,v,h)};return r.addEventListener("wheel",c),c}},9284:function(d,s,t){var o=t(5306);d.exports=function(n){function a(v){throw new Error("ndarray-extract-contour: "+v)}typeof n!="object"&&a("Must specify arguments");var i=n.order;Array.isArray(i)||a("Must specify order");var c=n.arrayArguments||1;c<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),typeof n.vertex!="function"&&a("Must specify vertex creation function"),typeof n.cell!="function"&&a("Must specify cell creation function"),typeof n.phase!="function"&&a("Must specify phase function");for(var h=n.getters||[],f=new Array(c),b=0;b<c;++b)h.indexOf(b)>=0?f[b]=!0:f[b]=!1;return function(v,g,y,p,m,w){var u=[w,m].join(",");return(0,r[u])(v,g,y,o.mallocUint32,o.freeUint32)}(n.vertex,n.cell,n.phase,0,i,f)};var r={"false,0,1":function(n,a,i,c,h){return function(f,b,v,g){var y,p=0|f.shape[0],m=0|f.shape[1],w=f.data,u=0|f.offset,S=0|f.stride[0],_=0|f.stride[1],E=u,L=0|-S,C=0,P=0|-_,I=0,U=-S-_|0,z=0,H=0|S,F=_-S*p|0,N=0,B=0,j=0,K=2*p|0,G=c(K),V=c(K),W=0,J=0,X=-1,ee=-1,re=0,ie=0|-p,se=0|p,fe=0,ye=-p-1|0,ge=p-1|0,he=0,ve=0,Ie=0;for(N=0;N<p;++N)G[W++]=i(w[E],b,v,g),E+=H;if(E+=F,m>0){if(B=1,G[W++]=i(w[E],b,v,g),E+=H,p>0)for(N=1,y=w[E],J=G[W]=i(y,b,v,g),re=G[W+X],fe=G[W+ie],he=G[W+ye],J===re&&J===fe&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,re,fe,he,b,v,g),ve=V[W]=j++),W+=1,E+=H,N=2;N<p;++N)y=w[E],J=G[W]=i(y,b,v,g),re=G[W+X],fe=G[W+ie],he=G[W+ye],J===re&&J===fe&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,re,fe,he,b,v,g),ve=V[W]=j++,he!==re&&a(V[W+X],ve,z,C,he,re,b,v,g)),W+=1,E+=H;for(E+=F,W=0,Ie=X,X=ee,ee=Ie,Ie=ie,ie=se,se=Ie,Ie=ye,ye=ge,ge=Ie,B=2;B<m;++B){if(G[W++]=i(w[E],b,v,g),E+=H,p>0)for(N=1,y=w[E],J=G[W]=i(y,b,v,g),re=G[W+X],fe=G[W+ie],he=G[W+ye],J===re&&J===fe&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,re,fe,he,b,v,g),ve=V[W]=j++,he!==fe&&a(V[W+ie],ve,I,z,fe,he,b,v,g)),W+=1,E+=H,N=2;N<p;++N)y=w[E],J=G[W]=i(y,b,v,g),re=G[W+X],fe=G[W+ie],he=G[W+ye],J===re&&J===fe&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,re,fe,he,b,v,g),ve=V[W]=j++,he!==fe&&a(V[W+ie],ve,I,z,fe,he,b,v,g),he!==re&&a(V[W+X],ve,z,C,he,re,b,v,g)),W+=1,E+=H;1&B&&(W=0),Ie=X,X=ee,ee=Ie,Ie=ie,ie=se,se=Ie,Ie=ye,ye=ge,ge=Ie,E+=F}}h(V),h(G)}},"false,1,0":function(n,a,i,c,h){return function(f,b,v,g){var y,p=0|f.shape[0],m=0|f.shape[1],w=f.data,u=0|f.offset,S=0|f.stride[0],_=0|f.stride[1],E=u,L=0|-S,C=0,P=0|-_,I=0,U=-S-_|0,z=0,H=0|_,F=S-_*m|0,N=0,B=0,j=0,K=2*m|0,G=c(K),V=c(K),W=0,J=0,X=-1,ee=-1,re=0,ie=0|-m,se=0|m,fe=0,ye=-m-1|0,ge=m-1|0,he=0,ve=0,Ie=0;for(B=0;B<m;++B)G[W++]=i(w[E],b,v,g),E+=H;if(E+=F,p>0){if(N=1,G[W++]=i(w[E],b,v,g),E+=H,m>0)for(B=1,y=w[E],J=G[W]=i(y,b,v,g),fe=G[W+ie],re=G[W+X],he=G[W+ye],J===fe&&J===re&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,fe,re,he,b,v,g),ve=V[W]=j++),W+=1,E+=H,B=2;B<m;++B)y=w[E],J=G[W]=i(y,b,v,g),fe=G[W+ie],re=G[W+X],he=G[W+ye],J===fe&&J===re&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,fe,re,he,b,v,g),ve=V[W]=j++,he!==re&&a(V[W+X],ve,I,z,re,he,b,v,g)),W+=1,E+=H;for(E+=F,W=0,Ie=ie,ie=se,se=Ie,Ie=X,X=ee,ee=Ie,Ie=ye,ye=ge,ge=Ie,N=2;N<p;++N){if(G[W++]=i(w[E],b,v,g),E+=H,m>0)for(B=1,y=w[E],J=G[W]=i(y,b,v,g),fe=G[W+ie],re=G[W+X],he=G[W+ye],J===fe&&J===re&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,fe,re,he,b,v,g),ve=V[W]=j++,he!==fe&&a(V[W+ie],ve,z,C,he,fe,b,v,g)),W+=1,E+=H,B=2;B<m;++B)y=w[E],J=G[W]=i(y,b,v,g),fe=G[W+ie],re=G[W+X],he=G[W+ye],J===fe&&J===re&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,fe,re,he,b,v,g),ve=V[W]=j++,he!==re&&a(V[W+X],ve,I,z,re,he,b,v,g),he!==fe&&a(V[W+ie],ve,z,C,he,fe,b,v,g)),W+=1,E+=H;1&N&&(W=0),Ie=ie,ie=se,se=Ie,Ie=X,X=ee,ee=Ie,Ie=ye,ye=ge,ge=Ie,E+=F}}h(V),h(G)}}}},9144:function(d,s,t){var o=t(3094),r={zero:function(p,m,w,u){var S=p[0];u|=0;var _=0,E=w[0];for(_=0;_<S;++_)m[u]=0,u+=E},fdTemplate1:function(p,m,w,u,S,_,E){var L=p[0],C=w[0],P=-1*C,I=C;u|=0,E|=0;var U=0,z=C,H=_[0];for(U=0;U<L;++U)S[E]=.5*(m[u+P]-m[u+I]),u+=z,E+=H},fdTemplate2:function(p,m,w,u,S,_,E,L,C,P){var I=p[0],U=p[1],z=w[0],H=w[1],F=_[0],N=_[1],B=C[0],j=C[1],K=-1*z,G=z,V=-1*H,W=H;u|=0,E|=0,P|=0;var J=0,X=0,ee=H,re=z-U*H,ie=N,se=F-U*N,fe=j,ye=B-U*j;for(X=0;X<I;++X){for(J=0;J<U;++J)S[E]=.5*(m[u+K]-m[u+G]),L[P]=.5*(m[u+V]-m[u+W]),u+=ee,E+=ie,P+=fe;u+=re,E+=se,P+=ye}}},n={cdiff:function(p){var m={};return function(w,u,S){var _=w.dtype,E=w.order,L=u.dtype,C=u.order,P=S.dtype,I=S.order,U=[_,E.join(),L,C.join(),P,I.join()].join(),z=m[U];return z||(m[U]=z=p([_,E,L,C,P,I])),z(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset,S.data,S.stride,0|S.offset)}},zero:function(p){var m={};return function(w){var u=w.dtype,S=w.order,_=[u,S.join()].join(),E=m[_];return E||(m[_]=E=p([u,S])),E(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(p){var m={};return function(w,u){var S=w.dtype,_=w.order,E=u.dtype,L=u.order,C=[S,_.join(),E,L.join()].join(),P=m[C];return P||(m[C]=P=p([S,_,E,L])),P(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset)}},fdTemplate2:function(p){var m={};return function(w,u,S){var _=w.dtype,E=w.order,L=u.dtype,C=u.order,P=S.dtype,I=S.order,U=[_,E.join(),L,C.join(),P,I.join()].join(),z=m[U];return z||(m[U]=z=p([_,E,L,C,P,I])),z(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset,S.data,S.stride,0|S.offset)}}};function a(p){return(0,n[p.funcName])(i.bind(void 0,p))}function i(p){return r[p.funcName]}function c(p){return a({funcName:p.funcName})}var h={},f={},b=c({funcName:"cdiff"}),v=c({funcName:"zero"});function g(p){return p in h?h[p]:h[p]=c({funcName:"fdTemplate"+p})}function y(p,m,w,u){return function(S,_){var E=_.shape.slice();return E[0]>2&&E[1]>2&&u(_.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(w(_.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),m(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(w(_.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),m(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(w(_.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),m(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(w(_.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),m(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}d.exports=function(p,m,w){return Array.isArray(w)||(w=o(m.dimension,typeof w=="string"?w:"clamp")),m.size===0?p:m.dimension===0?(p.set(0),p):function(u){var S=u.join();if(C=f[S])return C;for(var _=u.length,E=[b,v],L=1;L<=_;++L)E.push(g(L));var C=y.apply(void 0,E);return f[S]=C,C}(w)(p,m)}},3581:function(d){function s(n,a){var i=Math.floor(a),c=a-i,h=0<=i&&i<n.shape[0],f=0<=i+1&&i+1<n.shape[0];return(1-c)*(h?+n.get(i):0)+c*(f?+n.get(i+1):0)}function t(n,a,i){var c=Math.floor(a),h=a-c,f=0<=c&&c<n.shape[0],b=0<=c+1&&c+1<n.shape[0],v=Math.floor(i),g=i-v,y=0<=v&&v<n.shape[1],p=0<=v+1&&v+1<n.shape[1],m=f&&y?n.get(c,v):0,w=f&&p?n.get(c,v+1):0;return(1-g)*((1-h)*m+h*(b&&y?n.get(c+1,v):0))+g*((1-h)*w+h*(b&&p?n.get(c+1,v+1):0))}function o(n,a,i,c){var h=Math.floor(a),f=a-h,b=0<=h&&h<n.shape[0],v=0<=h+1&&h+1<n.shape[0],g=Math.floor(i),y=i-g,p=0<=g&&g<n.shape[1],m=0<=g+1&&g+1<n.shape[1],w=Math.floor(c),u=c-w,S=0<=w&&w<n.shape[2],_=0<=w+1&&w+1<n.shape[2],E=b&&p&&S?n.get(h,g,w):0,L=b&&m&&S?n.get(h,g+1,w):0,C=v&&p&&S?n.get(h+1,g,w):0,P=v&&m&&S?n.get(h+1,g+1,w):0,I=b&&p&&_?n.get(h,g,w+1):0,U=b&&m&&_?n.get(h,g+1,w+1):0;return(1-u)*((1-y)*((1-f)*E+f*C)+y*((1-f)*L+f*P))+u*((1-y)*((1-f)*I+f*(v&&p&&_?n.get(h+1,g,w+1):0))+y*((1-f)*U+f*(v&&m&&_?n.get(h+1,g+1,w+1):0)))}function r(n){var a,i,c=0|n.shape.length,h=new Array(c),f=new Array(c),b=new Array(c),v=new Array(c);for(a=0;a<c;++a)i=+arguments[a+1],h[a]=Math.floor(i),f[a]=i-h[a],b[a]=0<=h[a]&&h[a]<n.shape[a],v[a]=0<=h[a]+1&&h[a]+1<n.shape[a];var g,y,p,m=0;e:for(a=0;a<1<<c;++a){for(y=1,p=n.offset,g=0;g<c;++g)if(a&1<<g){if(!v[g])continue e;y*=f[g],p+=n.stride[g]*(h[g]+1)}else{if(!b[g])continue e;y*=1-f[g],p+=n.stride[g]*h[g]}m+=y*n.data[p]}return m}d.exports=function(n,a,i,c){switch(n.shape.length){case 0:return 0;case 1:return s(n,a);case 2:return t(n,a,i);case 3:return o(n,a,i,c);default:return r.apply(void 0,arguments)}},d.exports.d1=s,d.exports.d2=t,d.exports.d3=o},7498:function(d,s){var t={"float64,2,1,0":function(){return function(i,c,h,f,b){var v=i[0],g=i[1],y=i[2],p=h[0],m=h[1],w=h[2];f|=0;var u=0,S=0,_=0,E=w,L=m-y*w,C=p-g*m;for(_=0;_<v;++_){for(S=0;S<g;++S){for(u=0;u<y;++u)c[f]/=b,f+=E;f+=L}f+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(i,c,h,f,b,v,g,y){for(var p=i[0],m=i[1],w=i[2],u=h[0],S=h[1],_=h[2],E=v[0],L=v[1],C=v[2],P=f|=0,I=g|=0,U=0|i[0];U>0;){U<64?(p=U,U=0):(p=64,U-=64);for(var z=0|i[1];z>0;){z<64?(m=z,z=0):(m=64,z-=64),f=P+U*u+z*S,g=I+U*E+z*L;var H=0,F=0,N=0,B=_,j=u-w*_,K=S-p*u,G=C,V=E-w*C,W=L-p*E;for(N=0;N<m;++N){for(F=0;F<p;++F){for(H=0;H<w;++H)c[f]=b[g]*y,f+=B,g+=G;f+=j,g+=V}f+=K,g+=W}}}}},"float32,1,0,float32,1,0":function(){return function(i,c,h,f,b,v,g){var y=i[0],p=i[1],m=h[0],w=h[1],u=v[0],S=v[1];f|=0,g|=0;var _=0,E=0,L=w,C=m-p*w,P=S,I=u-p*S;for(E=0;E<y;++E){for(_=0;_<p;++_)c[f]=b[g],f+=L,g+=P;f+=C,g+=I}}},"float32,1,0,float32,0,1":function(){return function(i,c,h,f,b,v,g){for(var y=i[0],p=i[1],m=h[0],w=h[1],u=v[0],S=v[1],_=f|=0,E=g|=0,L=0|i[1];L>0;){L<64?(p=L,L=0):(p=64,L-=64);for(var C=0|i[0];C>0;){C<64?(y=C,C=0):(y=64,C-=64),f=_+L*w+C*m,g=E+L*S+C*u;var P=0,I=0,U=w,z=m-p*w,H=S,F=u-p*S;for(I=0;I<y;++I){for(P=0;P<p;++P)c[f]=b[g],f+=U,g+=H;f+=z,g+=F}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(i,c,h,f,b,v,g){for(var y=i[0],p=i[1],m=i[2],w=h[0],u=h[1],S=h[2],_=v[0],E=v[1],L=v[2],C=f|=0,P=g|=0,I=0|i[2];I>0;){I<64?(m=I,I=0):(m=64,I-=64);for(var U=0|i[0];U>0;){U<64?(y=U,U=0):(y=64,U-=64);for(var z=0|i[1];z>0;){z<64?(p=z,z=0):(p=64,z-=64),f=C+I*S+U*w+z*u,g=P+I*L+U*_+z*E;var H=0,F=0,N=0,B=S,j=w-m*S,K=u-y*w,G=L,V=_-m*L,W=E-y*_;for(N=0;N<p;++N){for(F=0;F<y;++F){for(H=0;H<m;++H)c[f]=b[g],f+=B,g+=G;f+=j,g+=V}f+=K,g+=W}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(i,c,h,f,b,v,g){var y=i[0],p=i[1],m=i[2],w=h[0],u=h[1],S=h[2],_=v[0],E=v[1],L=v[2];f|=0,g|=0;var C=0,P=0,I=0,U=S,z=w-m*S,H=u-y*w,F=L,N=_-m*L,B=E-y*_;for(I=0;I<p;++I){for(P=0;P<y;++P){for(C=0;C<m;++C)c[f]=b[g],f+=U,g+=F;f+=z,g+=N}f+=H,g+=B}}}},o=function(i,c){var h=c.join(",");return(0,t[h])()},r={mul:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=b.dtype,w=b.order,u=[v,g.join(),y,p.join(),m,w.join()].join(),S=c[u];return S||(c[u]=S=i([v,g,y,p,m,w])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b.data,b.stride,0|b.offset)}},muls:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=[v,g.join(),y,p.join()].join(),w=c[m];return w||(c[m]=w=i([v,g,y,p])),w(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b)}},mulseq:function(i){var c={};return function(h,f){var b=h.dtype,v=h.order,g=[b,v.join()].join(),y=c[g];return y||(c[g]=y=i([b,v])),y(h.shape.slice(0),h.data,h.stride,0|h.offset,f)}},div:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=b.dtype,w=b.order,u=[v,g.join(),y,p.join(),m,w.join()].join(),S=c[u];return S||(c[u]=S=i([v,g,y,p,m,w])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b.data,b.stride,0|b.offset)}},divs:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=[v,g.join(),y,p.join()].join(),w=c[m];return w||(c[m]=w=i([v,g,y,p])),w(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b)}},divseq:function(i){var c={};return function(h,f){var b=h.dtype,v=h.order,g=[b,v.join()].join(),y=c[g];return y||(c[g]=y=i([b,v])),y(h.shape.slice(0),h.data,h.stride,0|h.offset,f)}},assign:function(i){var c={};return function(h,f){var b=h.dtype,v=h.order,g=f.dtype,y=f.order,p=[b,v.join(),g,y.join()].join(),m=c[p];return m||(c[p]=m=i([b,v,g,y])),m(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset)}}};function n(i){return c={funcName:i.funcName},(0,r[c.funcName])(o.bind(void 0,c));var c}var a={mul:"*",div:"/"};(function(){for(var i in a)s[i]=n({funcName:i}),s[i+"s"]=n({funcName:i+"s"}),s[i+"seq"]=n({funcName:i+"seq"})})(),s.assign=n({funcName:"assign"})},7382:function(d,s,t){var o=t(5050),r=t(9262);d.exports=function(n,a){for(var i=[],c=n,h=1;Array.isArray(c);)i.push(c.length),h*=c.length,c=c[0];return i.length===0?o():(a||(a=o(new Float64Array(h),i)),r(a,n),a)}},9262:function(d){d.exports=function(s){var t={};return function(o,r){var n=o.dtype,a=o.order,i=[n,a.join()].join(),c=t[i];return c||(t[i]=c=s([n,a])),c(o.shape.slice(0),o.data,o.stride,0|o.offset,r)}}(function(){return function(s,t,o,r,n){var a=s[0],i=s[1],c=s[2],h=o[0],f=o[1],b=o[2],v=[0,0,0];r|=0;var g=0,y=0,p=0,m=b,w=f-c*b,u=h-i*f;for(p=0;p<a;++p){for(y=0;y<i;++y){for(g=0;g<c;++g){var S,_=n;for(S=0;S<v.length-1;++S)_=_[v[S]];t[r]=_[v[v.length-1]],r+=m,++v[2]}r+=w,v[2]-=c,++v[1]}r+=u,v[1]-=i,++v[0]}}}.bind(void 0,{funcName:"convert"}))},8139:function(d,s,t){var o=t(5306);function r(c){return c==="uint32"?[o.mallocUint32,o.freeUint32]:null}var n={"uint32,1,0":function(c,h){return function(f,b,v,g,y,p,m,w,u,S,_){var E,L,C,P,I,U,z,H,F=f*y+g,N=c(w);for(E=f+1;E<=b;++E){for(L=E,C=F+=y,I=0,U=F,P=0;P<w;++P)N[I++]=v[U],U+=u;e:for(;L-- >f;){I=0,U=C-y;t:for(P=0;P<w;++P){if((z=v[U])<(H=N[I]))break e;if(z>H)break t;U+=S,I+=_}for(I=C,U=C-y,P=0;P<w;++P)v[I]=v[U],I+=u,U+=u;C-=y}for(I=C,U=0,P=0;P<w;++P)v[I]=N[U++],I+=u}h(N)}}},a={"uint32,1,0":function(c,h,f){return function b(v,g,y,p,m,w,u,S,_,E,L){var C,P,I,U,z,H,F,N,B,j,K,G,V,W,J,X,ee,re,ie,se,fe,ye,ge,he,ve,Ie=(g-v+1)/6|0,xe=v+Ie,Ae=g-Ie,Se=v+g>>1,Te=Se-Ie,Q=Se+Ie,oe=xe,ce=Te,me=Se,Me=Q,Re=Ae,Ce=v+1,ze=g-1,le=!0,de=0,be=0,Fe=0,Ve=S,He=h(Ve),rt=h(Ve);K=m*oe,G=m*ce,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=oe,oe=ce,ce=P;break e}if(Fe<0)break e;ve+=E}K=m*Me,G=m*Re,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=Me,Me=Re,Re=P;break e}if(Fe<0)break e;ve+=E}K=m*oe,G=m*me,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=oe,oe=me,me=P;break e}if(Fe<0)break e;ve+=E}K=m*ce,G=m*me,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=ce,ce=me,me=P;break e}if(Fe<0)break e;ve+=E}K=m*oe,G=m*Me,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=oe,oe=Me,Me=P;break e}if(Fe<0)break e;ve+=E}K=m*me,G=m*Me,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=me,me=Me,Me=P;break e}if(Fe<0)break e;ve+=E}K=m*ce,G=m*Re,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=ce,ce=Re,Re=P;break e}if(Fe<0)break e;ve+=E}K=m*ce,G=m*me,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=ce,ce=me,me=P;break e}if(Fe<0)break e;ve+=E}K=m*Me,G=m*Re,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=Me,Me=Re,Re=P;break e}if(Fe<0)break e;ve+=E}for(K=m*oe,G=m*ce,V=m*me,W=m*Me,J=m*Re,X=m*xe,ee=m*Se,re=m*Ae,he=0,ve=p,j=0;j<S;++j)F=K+ve,N=G+ve,B=V+ve,ie=W+ve,se=J+ve,fe=X+ve,ye=ee+ve,ge=re+ve,He[he]=y[N],rt[he]=y[ie],le=le&&He[he]===rt[he],I=y[F],U=y[B],z=y[se],y[fe]=I,y[ye]=U,y[ge]=z,++he,ve+=_;for(K=m*Te,G=m*v,ve=p,j=0;j<S;++j)N=G+ve,y[F=K+ve]=y[N],ve+=_;for(K=m*Q,G=m*g,ve=p,j=0;j<S;++j)N=G+ve,y[F=K+ve]=y[N],ve+=_;if(le)for(H=Ce;H<=ze;++H){for(F=p+H*m,he=0,j=0;j<S&&(Fe=y[F]-He[he])==0;++j)he+=L,F+=E;if(Fe!==0)if(Fe<0){if(H!==Ce)for(K=m*H,G=m*Ce,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;++Ce}else for(;;){for(F=p+ze*m,he=0,j=0;j<S&&(Fe=y[F]-He[he])==0;++j)he+=L,F+=E;if(!(Fe>0)){if(Fe<0){for(K=m*H,G=m*Ce,V=m*ze,ve=p,j=0;j<S;++j)N=G+ve,B=V+ve,C=y[F=K+ve],y[F]=y[N],y[N]=y[B],y[B]=C,ve+=_;++Ce,--ze;break}for(K=m*H,G=m*ze,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;--ze;break}ze--}}else for(H=Ce;H<=ze;++H){for(F=p+H*m,he=0,j=0;j<S&&(de=y[F]-He[he])==0;++j)he+=L,F+=E;if(de<0){if(H!==Ce)for(K=m*H,G=m*Ce,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;++Ce}else{for(F=p+H*m,he=0,j=0;j<S&&(be=y[F]-rt[he])==0;++j)he+=L,F+=E;if(be>0)for(;;){for(F=p+ze*m,he=0,j=0;j<S&&(Fe=y[F]-rt[he])==0;++j)he+=L,F+=E;if(!(Fe>0)){for(F=p+ze*m,he=0,j=0;j<S&&(Fe=y[F]-He[he])==0;++j)he+=L,F+=E;if(Fe<0){for(K=m*H,G=m*Ce,V=m*ze,ve=p,j=0;j<S;++j)N=G+ve,B=V+ve,C=y[F=K+ve],y[F]=y[N],y[N]=y[B],y[B]=C,ve+=_;++Ce,--ze}else{for(K=m*H,G=m*ze,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;--ze}break}if(--ze<H)break}}}for(K=m*v,G=m*(Ce-1),he=0,ve=p,j=0;j<S;++j)N=G+ve,y[F=K+ve]=y[N],y[N]=He[he],++he,ve+=_;for(K=m*g,G=m*(ze+1),he=0,ve=p,j=0;j<S;++j)N=G+ve,y[F=K+ve]=y[N],y[N]=rt[he],++he,ve+=_;if(Ce-2-v<=32?c(v,Ce-2,y,p,m,w,u,S,_,E,L):b(v,Ce-2,y,p,m,w,u,S,_,E,L),g-(ze+2)<=32?c(ze+2,g,y,p,m,w,u,S,_,E,L):b(ze+2,g,y,p,m,w,u,S,_,E,L),le)return f(He),void f(rt);if(Ce<xe&&ze>Ae){e:for(;;){for(F=p+Ce*m,he=0,ve=p,j=0;j<S;++j){if(y[F]!==He[he])break e;++he,F+=_}++Ce}e:for(;;){for(F=p+ze*m,he=0,ve=p,j=0;j<S;++j){if(y[F]!==rt[he])break e;++he,F+=_}--ze}for(H=Ce;H<=ze;++H){for(F=p+H*m,he=0,j=0;j<S&&(de=y[F]-He[he])==0;++j)he+=L,F+=E;if(de===0){if(H!==Ce)for(K=m*H,G=m*Ce,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;++Ce}else{for(F=p+H*m,he=0,j=0;j<S&&(be=y[F]-rt[he])==0;++j)he+=L,F+=E;if(be===0)for(;;){for(F=p+ze*m,he=0,j=0;j<S&&(Fe=y[F]-rt[he])==0;++j)he+=L,F+=E;if(Fe!==0){for(F=p+ze*m,he=0,j=0;j<S&&(Fe=y[F]-He[he])==0;++j)he+=L,F+=E;if(Fe<0){for(K=m*H,G=m*Ce,V=m*ze,ve=p,j=0;j<S;++j)N=G+ve,B=V+ve,C=y[F=K+ve],y[F]=y[N],y[N]=y[B],y[B]=C,ve+=_;++Ce,--ze}else{for(K=m*H,G=m*ze,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;--ze}break}if(--ze<H)break}}}}f(He),f(rt),ze-Ce<=32?c(Ce,ze,y,p,m,w,u,S,_,E,L):b(Ce,ze,y,p,m,w,u,S,_,E,L)}}},i={"uint32,1,0":function(c,h){return function(f){var b=f.data,v=0|f.offset,g=f.shape,y=f.stride,p=0|y[0],m=0|g[0],w=0|y[1],u=0|g[1],S=w,_=w;m<=32?c(0,m-1,b,v,p,w,m,u,S,_,1):h(0,m-1,b,v,p,w,m,u,S,_,1)}}};d.exports=function(c,h){var f=[h,c].join(","),b=i[f],v=function(y,p){var m=r(p),w=[p,y].join(","),u=n[w];return m?u(m[0],m[1]):u()}(c,h),g=function(y,p,m){var w=r(p),u=[p,y].join(","),S=a[u];return y.length>1&&w?S(m,w[0],w[1]):S(m)}(c,h,v);return b(v,g)}},8729:function(d,s,t){var o=t(8139),r={};d.exports=function(n){var a=n.order,i=n.dtype,c=[a,i].join(":"),h=r[c];return h||(r[c]=h=o(a,i)),h(n),n}},5050:function(d,s,t){var o=t(4780),r=typeof Float64Array<"u";function n(f,b){return f[0]-b[0]}function a(){var f,b=this.stride,v=new Array(b.length);for(f=0;f<v.length;++f)v[f]=[Math.abs(b[f]),f];v.sort(n);var g=new Array(v.length);for(f=0;f<g.length;++f)g[f]=v[f][1];return g}var i={T:function(f){function b(g){this.data=g}var v=b.prototype;return v.dtype=f,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new b(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(g){return new b(g)}},0:function(f,b){function v(y,p){this.data=y,this.offset=p}var g=v.prototype;return g.dtype=f,g.index=function(){return this.offset},g.dimension=0,g.size=1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new v(this.data,this.offset)},g.pick=function(){return b(this.data)},g.valueOf=g.get=function(){return f==="generic"?this.data.get(this.offset):this.data[this.offset]},g.set=function(y){return f==="generic"?this.data.set(this.offset,y):this.data[this.offset]=y},function(y,p,m,w){return new v(y,w)}},1:function(f,b,v){function g(p,m,w,u){this.data=p,this.shape=[m],this.stride=[w],this.offset=0|u}var y=g.prototype;return y.dtype=f,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(p,m){return f==="generic"?this.data.set(this.offset+this.stride[0]*p,m):this.data[this.offset+this.stride[0]*p]=m},y.get=function(p){return f==="generic"?this.data.get(this.offset+this.stride[0]*p):this.data[this.offset+this.stride[0]*p]},y.index=function(p){return this.offset+this.stride[0]*p},y.hi=function(p){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,this.stride[0],this.offset)},y.lo=function(p){var m=this.offset,w=0,u=this.shape[0],S=this.stride[0];return typeof p=="number"&&p>=0&&(m+=S*(w=0|p),u-=w),new g(this.data,u,S,m)},y.step=function(p){var m=this.shape[0],w=this.stride[0],u=this.offset,S=0,_=Math.ceil;return typeof p=="number"&&((S=0|p)<0?(u+=w*(m-1),m=_(-m/S)):m=_(m/S),w*=S),new g(this.data,m,w,u)},y.transpose=function(p){p=p===void 0?0:0|p;var m=this.shape,w=this.stride;return new g(this.data,m[p],w[p],this.offset)},y.pick=function(p){var m=[],w=[],u=this.offset;return typeof p=="number"&&p>=0?u=u+this.stride[0]*p|0:(m.push(this.shape[0]),w.push(this.stride[0])),(0,b[m.length+1])(this.data,m,w,u)},function(p,m,w,u){return new g(p,m[0],w[0],u)}},2:function(f,b,v){function g(p,m,w,u,S,_){this.data=p,this.shape=[m,w],this.stride=[u,S],this.offset=0|_}var y=g.prototype;return y.dtype=f,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(p,m,w){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m,w):this.data[this.offset+this.stride[0]*p+this.stride[1]*m]=w},y.get=function(p,m){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m):this.data[this.offset+this.stride[0]*p+this.stride[1]*m]},y.index=function(p,m){return this.offset+this.stride[0]*p+this.stride[1]*m},y.hi=function(p,m){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,this.stride[0],this.stride[1],this.offset)},y.lo=function(p,m){var w=this.offset,u=0,S=this.shape[0],_=this.shape[1],E=this.stride[0],L=this.stride[1];return typeof p=="number"&&p>=0&&(w+=E*(u=0|p),S-=u),typeof m=="number"&&m>=0&&(w+=L*(u=0|m),_-=u),new g(this.data,S,_,E,L,w)},y.step=function(p,m){var w=this.shape[0],u=this.shape[1],S=this.stride[0],_=this.stride[1],E=this.offset,L=0,C=Math.ceil;return typeof p=="number"&&((L=0|p)<0?(E+=S*(w-1),w=C(-w/L)):w=C(w/L),S*=L),typeof m=="number"&&((L=0|m)<0?(E+=_*(u-1),u=C(-u/L)):u=C(u/L),_*=L),new g(this.data,w,u,S,_,E)},y.transpose=function(p,m){p=p===void 0?0:0|p,m=m===void 0?1:0|m;var w=this.shape,u=this.stride;return new g(this.data,w[p],w[m],u[p],u[m],this.offset)},y.pick=function(p,m){var w=[],u=[],S=this.offset;return typeof p=="number"&&p>=0?S=S+this.stride[0]*p|0:(w.push(this.shape[0]),u.push(this.stride[0])),typeof m=="number"&&m>=0?S=S+this.stride[1]*m|0:(w.push(this.shape[1]),u.push(this.stride[1])),(0,b[w.length+1])(this.data,w,u,S)},function(p,m,w,u){return new g(p,m[0],m[1],w[0],w[1],u)}},3:function(f,b,v){function g(p,m,w,u,S,_,E,L){this.data=p,this.shape=[m,w,u],this.stride=[S,_,E],this.offset=0|L}var y=g.prototype;return y.dtype=f,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var p=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return p>m?m>w?[2,1,0]:p>w?[1,2,0]:[1,0,2]:p>w?[2,0,1]:w>m?[0,1,2]:[0,2,1]}}),y.set=function(p,m,w,u){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w,u):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w]=u},y.get=function(p,m,w){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w]},y.index=function(p,m,w){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w},y.hi=function(p,m,w){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,typeof w!="number"||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(p,m,w){var u=this.offset,S=0,_=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.stride[0],P=this.stride[1],I=this.stride[2];return typeof p=="number"&&p>=0&&(u+=C*(S=0|p),_-=S),typeof m=="number"&&m>=0&&(u+=P*(S=0|m),E-=S),typeof w=="number"&&w>=0&&(u+=I*(S=0|w),L-=S),new g(this.data,_,E,L,C,P,I,u)},y.step=function(p,m,w){var u=this.shape[0],S=this.shape[1],_=this.shape[2],E=this.stride[0],L=this.stride[1],C=this.stride[2],P=this.offset,I=0,U=Math.ceil;return typeof p=="number"&&((I=0|p)<0?(P+=E*(u-1),u=U(-u/I)):u=U(u/I),E*=I),typeof m=="number"&&((I=0|m)<0?(P+=L*(S-1),S=U(-S/I)):S=U(S/I),L*=I),typeof w=="number"&&((I=0|w)<0?(P+=C*(_-1),_=U(-_/I)):_=U(_/I),C*=I),new g(this.data,u,S,_,E,L,C,P)},y.transpose=function(p,m,w){p=p===void 0?0:0|p,m=m===void 0?1:0|m,w=w===void 0?2:0|w;var u=this.shape,S=this.stride;return new g(this.data,u[p],u[m],u[w],S[p],S[m],S[w],this.offset)},y.pick=function(p,m,w){var u=[],S=[],_=this.offset;return typeof p=="number"&&p>=0?_=_+this.stride[0]*p|0:(u.push(this.shape[0]),S.push(this.stride[0])),typeof m=="number"&&m>=0?_=_+this.stride[1]*m|0:(u.push(this.shape[1]),S.push(this.stride[1])),typeof w=="number"&&w>=0?_=_+this.stride[2]*w|0:(u.push(this.shape[2]),S.push(this.stride[2])),(0,b[u.length+1])(this.data,u,S,_)},function(p,m,w,u){return new g(p,m[0],m[1],m[2],w[0],w[1],w[2],u)}},4:function(f,b,v){function g(p,m,w,u,S,_,E,L,C,P){this.data=p,this.shape=[m,w,u,S],this.stride=[_,E,L,C],this.offset=0|P}var y=g.prototype;return y.dtype=f,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(p,m,w,u,S){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u,S):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u]=S},y.get=function(p,m,w,u){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u]},y.index=function(p,m,w,u){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u},y.hi=function(p,m,w,u){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,typeof w!="number"||w<0?this.shape[2]:0|w,typeof u!="number"||u<0?this.shape[3]:0|u,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(p,m,w,u){var S=this.offset,_=0,E=this.shape[0],L=this.shape[1],C=this.shape[2],P=this.shape[3],I=this.stride[0],U=this.stride[1],z=this.stride[2],H=this.stride[3];return typeof p=="number"&&p>=0&&(S+=I*(_=0|p),E-=_),typeof m=="number"&&m>=0&&(S+=U*(_=0|m),L-=_),typeof w=="number"&&w>=0&&(S+=z*(_=0|w),C-=_),typeof u=="number"&&u>=0&&(S+=H*(_=0|u),P-=_),new g(this.data,E,L,C,P,I,U,z,H,S)},y.step=function(p,m,w,u){var S=this.shape[0],_=this.shape[1],E=this.shape[2],L=this.shape[3],C=this.stride[0],P=this.stride[1],I=this.stride[2],U=this.stride[3],z=this.offset,H=0,F=Math.ceil;return typeof p=="number"&&((H=0|p)<0?(z+=C*(S-1),S=F(-S/H)):S=F(S/H),C*=H),typeof m=="number"&&((H=0|m)<0?(z+=P*(_-1),_=F(-_/H)):_=F(_/H),P*=H),typeof w=="number"&&((H=0|w)<0?(z+=I*(E-1),E=F(-E/H)):E=F(E/H),I*=H),typeof u=="number"&&((H=0|u)<0?(z+=U*(L-1),L=F(-L/H)):L=F(L/H),U*=H),new g(this.data,S,_,E,L,C,P,I,U,z)},y.transpose=function(p,m,w,u){p=p===void 0?0:0|p,m=m===void 0?1:0|m,w=w===void 0?2:0|w,u=u===void 0?3:0|u;var S=this.shape,_=this.stride;return new g(this.data,S[p],S[m],S[w],S[u],_[p],_[m],_[w],_[u],this.offset)},y.pick=function(p,m,w,u){var S=[],_=[],E=this.offset;return typeof p=="number"&&p>=0?E=E+this.stride[0]*p|0:(S.push(this.shape[0]),_.push(this.stride[0])),typeof m=="number"&&m>=0?E=E+this.stride[1]*m|0:(S.push(this.shape[1]),_.push(this.stride[1])),typeof w=="number"&&w>=0?E=E+this.stride[2]*w|0:(S.push(this.shape[2]),_.push(this.stride[2])),typeof u=="number"&&u>=0?E=E+this.stride[3]*u|0:(S.push(this.shape[3]),_.push(this.stride[3])),(0,b[S.length+1])(this.data,S,_,E)},function(p,m,w,u){return new g(p,m[0],m[1],m[2],m[3],w[0],w[1],w[2],w[3],u)}},5:function(f,b,v){function g(p,m,w,u,S,_,E,L,C,P,I,U){this.data=p,this.shape=[m,w,u,S,_],this.stride=[E,L,C,P,I],this.offset=0|U}var y=g.prototype;return y.dtype=f,y.dimension=5,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(p,m,w,u,S,_){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S,_):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S]=_},y.get=function(p,m,w,u,S){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S]},y.index=function(p,m,w,u,S){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S},y.hi=function(p,m,w,u,S){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,typeof w!="number"||w<0?this.shape[2]:0|w,typeof u!="number"||u<0?this.shape[3]:0|u,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},y.lo=function(p,m,w,u,S){var _=this.offset,E=0,L=this.shape[0],C=this.shape[1],P=this.shape[2],I=this.shape[3],U=this.shape[4],z=this.stride[0],H=this.stride[1],F=this.stride[2],N=this.stride[3],B=this.stride[4];return typeof p=="number"&&p>=0&&(_+=z*(E=0|p),L-=E),typeof m=="number"&&m>=0&&(_+=H*(E=0|m),C-=E),typeof w=="number"&&w>=0&&(_+=F*(E=0|w),P-=E),typeof u=="number"&&u>=0&&(_+=N*(E=0|u),I-=E),typeof S=="number"&&S>=0&&(_+=B*(E=0|S),U-=E),new g(this.data,L,C,P,I,U,z,H,F,N,B,_)},y.step=function(p,m,w,u,S){var _=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.shape[3],P=this.shape[4],I=this.stride[0],U=this.stride[1],z=this.stride[2],H=this.stride[3],F=this.stride[4],N=this.offset,B=0,j=Math.ceil;return typeof p=="number"&&((B=0|p)<0?(N+=I*(_-1),_=j(-_/B)):_=j(_/B),I*=B),typeof m=="number"&&((B=0|m)<0?(N+=U*(E-1),E=j(-E/B)):E=j(E/B),U*=B),typeof w=="number"&&((B=0|w)<0?(N+=z*(L-1),L=j(-L/B)):L=j(L/B),z*=B),typeof u=="number"&&((B=0|u)<0?(N+=H*(C-1),C=j(-C/B)):C=j(C/B),H*=B),typeof S=="number"&&((B=0|S)<0?(N+=F*(P-1),P=j(-P/B)):P=j(P/B),F*=B),new g(this.data,_,E,L,C,P,I,U,z,H,F,N)},y.transpose=function(p,m,w,u,S){p=p===void 0?0:0|p,m=m===void 0?1:0|m,w=w===void 0?2:0|w,u=u===void 0?3:0|u,S=S===void 0?4:0|S;var _=this.shape,E=this.stride;return new g(this.data,_[p],_[m],_[w],_[u],_[S],E[p],E[m],E[w],E[u],E[S],this.offset)},y.pick=function(p,m,w,u,S){var _=[],E=[],L=this.offset;return typeof p=="number"&&p>=0?L=L+this.stride[0]*p|0:(_.push(this.shape[0]),E.push(this.stride[0])),typeof m=="number"&&m>=0?L=L+this.stride[1]*m|0:(_.push(this.shape[1]),E.push(this.stride[1])),typeof w=="number"&&w>=0?L=L+this.stride[2]*w|0:(_.push(this.shape[2]),E.push(this.stride[2])),typeof u=="number"&&u>=0?L=L+this.stride[3]*u|0:(_.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?L=L+this.stride[4]*S|0:(_.push(this.shape[4]),E.push(this.stride[4])),(0,b[_.length+1])(this.data,_,E,L)},function(p,m,w,u){return new g(p,m[0],m[1],m[2],m[3],m[4],w[0],w[1],w[2],w[3],w[4],u)}}};function c(f,b){var v=b===-1?"T":String(b),g=i[v];return b===-1?g(f):b===0?g(f,h[f][0]):g(f,h[f],a)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};d.exports=function(f,b,v,g){if(f===void 0)return(0,h.array[0])([]);typeof f=="number"&&(f=[f]),b===void 0&&(b=[f.length]);var y=b.length;if(v===void 0){v=new Array(y);for(var p=y-1,m=1;p>=0;--p)v[p]=m,m*=b[p]}if(g===void 0)for(g=0,p=0;p<y;++p)v[p]<0&&(g-=(b[p]-1)*v[p]);for(var w=function(S){if(o(S))return"buffer";if(r)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(f),u=h[w];u.length<=y+1;)u.push(c(w,u.length-1));return(0,u[y+1])(f,b,v,g)}},8551:function(d,s,t){var o=t(8362),r=Math.pow(2,-1074),n=-1>>>0;d.exports=function(a,i){if(isNaN(a)||isNaN(i))return NaN;if(a===i)return a;if(a===0)return i<0?-r:r;var c=o.hi(a),h=o.lo(a);return i>a==a>0?h===n?(c+=1,h=0):h+=1:h===0?(h=n,c-=1):h-=1,o.pack(h,c)}},115:function(d,s){s.vertexNormals=function(t,o,r){for(var n=o.length,a=new Array(n),i=r===void 0?1e-6:r,c=0;c<n;++c)a[c]=[0,0,0];for(c=0;c<t.length;++c)for(var h=t[c],f=0,b=h[h.length-1],v=h[0],g=0;g<h.length;++g){f=b,b=v,v=h[(g+1)%h.length];for(var y=o[f],p=o[b],m=o[v],w=new Array(3),u=0,S=new Array(3),_=0,E=0;E<3;++E)w[E]=y[E]-p[E],u+=w[E]*w[E],S[E]=m[E]-p[E],_+=S[E]*S[E];if(u*_>i){var L=a[b],C=1/Math.sqrt(u*_);for(E=0;E<3;++E){var P=(E+1)%3,I=(E+2)%3;L[E]+=C*(S[P]*w[I]-S[I]*w[P])}}}for(c=0;c<n;++c){L=a[c];var U=0;for(E=0;E<3;++E)U+=L[E]*L[E];if(U>i)for(C=1/Math.sqrt(U),E=0;E<3;++E)L[E]*=C;else for(E=0;E<3;++E)L[E]=0}return a},s.faceNormals=function(t,o,r){for(var n=t.length,a=new Array(n),i=r===void 0?1e-6:r,c=0;c<n;++c){for(var h=t[c],f=new Array(3),b=0;b<3;++b)f[b]=o[h[b]];var v=new Array(3),g=new Array(3);for(b=0;b<3;++b)v[b]=f[1][b]-f[0][b],g[b]=f[2][b]-f[0][b];var y=new Array(3),p=0;for(b=0;b<3;++b){var m=(b+1)%3,w=(b+2)%3;y[b]=v[m]*g[w]-v[w]*g[m],p+=y[b]*y[b]}for(p=p>i?1/Math.sqrt(p):0,b=0;b<3;++b)y[b]*=p;a[c]=y}return a}},567:function(d){d.exports=function(s,t,o,r,n,a,i,c,h,f){var b=t+a+f;if(v>0){var v=Math.sqrt(b+1);s[0]=.5*(i-h)/v,s[1]=.5*(c-r)/v,s[2]=.5*(o-a)/v,s[3]=.5*v}else{var g=Math.max(t,a,f);v=Math.sqrt(2*g-b+1),t>=g?(s[0]=.5*v,s[1]=.5*(n+o)/v,s[2]=.5*(c+r)/v,s[3]=.5*(i-h)/v):a>=g?(s[0]=.5*(o+n)/v,s[1]=.5*v,s[2]=.5*(h+i)/v,s[3]=.5*(c-r)/v):(s[0]=.5*(r+c)/v,s[1]=.5*(i+h)/v,s[2]=.5*v,s[3]=.5*(o-n)/v)}return s}},7774:function(d,s,t){d.exports=function(g){var y=(g=g||{}).center||[0,0,0],p=g.rotation||[0,0,0,1],m=g.radius||1;y=[].slice.call(y,0,3),f(p=[].slice.call(p,0,4),p);var w=new b(p,y,Math.log(m));return w.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&w.lookAt(0,g.eye,g.center,g.up),w};var o=t(8444),r=t(3012),n=t(5950),a=t(7437),i=t(567);function c(g,y,p){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(p,2))}function h(g,y,p,m){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(p,2)+Math.pow(m,2))}function f(g,y){var p=y[0],m=y[1],w=y[2],u=y[3],S=h(p,m,w,u);S>1e-6?(g[0]=p/S,g[1]=m/S,g[2]=w/S,g[3]=u/S):(g[0]=g[1]=g[2]=0,g[3]=1)}function b(g,y,p){this.radius=o([p]),this.center=o(y),this.rotation=o(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var v=b.prototype;v.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},v.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var y=this.computedRotation;f(y,y);var p=this.computedMatrix;n(p,y);var m=this.computedCenter,w=this.computedEye,u=this.computedUp,S=Math.exp(this.computedRadius[0]);w[0]=m[0]+S*p[2],w[1]=m[1]+S*p[6],w[2]=m[2]+S*p[10],u[0]=p[1],u[1]=p[5],u[2]=p[9];for(var _=0;_<3;++_){for(var E=0,L=0;L<3;++L)E+=p[_+4*L]*w[L];p[12+_]=-E}},v.getMatrix=function(g,y){this.recalcMatrix(g);var p=this.computedMatrix;if(y){for(var m=0;m<16;++m)y[m]=p[m];return y}return p},v.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},v.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},v.pan=function(g,y,p,m){y=y||0,p=p||0,m=m||0,this.recalcMatrix(g);var w=this.computedMatrix,u=w[1],S=w[5],_=w[9],E=c(u,S,_);u/=E,S/=E,_/=E;var L=w[0],C=w[4],P=w[8],I=L*u+C*S+P*_,U=c(L-=u*I,C-=S*I,P-=_*I);L/=U,C/=U,P/=U,w[2],w[6],w[10];var z=L*y+u*p,H=C*y+S*p,F=P*y+_*p;this.center.move(g,z,H,F);var N=Math.exp(this.computedRadius[0]);N=Math.max(1e-4,N+m),this.radius.set(g,Math.log(N))},v.rotate=function(g,y,p,m){this.recalcMatrix(g),y=y||0,p=p||0;var w=this.computedMatrix,u=w[0],S=w[4],_=w[8],E=w[1],L=w[5],C=w[9],P=w[2],I=w[6],U=w[10],z=y*u+p*E,H=y*S+p*L,F=y*_+p*C,N=-(I*F-U*H),B=-(U*z-P*F),j=-(P*H-I*z),K=Math.sqrt(Math.max(0,1-Math.pow(N,2)-Math.pow(B,2)-Math.pow(j,2))),G=h(N,B,j,K);G>1e-6?(N/=G,B/=G,j/=G,K/=G):(N=B=j=0,K=1);var V=this.computedRotation,W=V[0],J=V[1],X=V[2],ee=V[3],re=W*K+ee*N+J*j-X*B,ie=J*K+ee*B+X*N-W*j,se=X*K+ee*j+W*B-J*N,fe=ee*K-W*N-J*B-X*j;if(m){N=P,B=I,j=U;var ye=Math.sin(m)/c(N,B,j);N*=ye,B*=ye,j*=ye,fe=fe*(K=Math.cos(y))-(re=re*K+fe*N+ie*j-se*B)*N-(ie=ie*K+fe*B+se*N-re*j)*B-(se=se*K+fe*j+re*B-ie*N)*j}var ge=h(re,ie,se,fe);ge>1e-6?(re/=ge,ie/=ge,se/=ge,fe/=ge):(re=ie=se=0,fe=1),this.rotation.set(g,re,ie,se,fe)},v.lookAt=function(g,y,p,m){this.recalcMatrix(g),p=p||this.computedCenter,y=y||this.computedEye,m=m||this.computedUp;var w=this.computedMatrix;r(w,y,p,m);var u=this.computedRotation;i(u,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),f(u,u),this.rotation.set(g,u[0],u[1],u[2],u[3]);for(var S=0,_=0;_<3;++_)S+=Math.pow(p[_]-y[_],2);this.radius.set(g,.5*Math.log(Math.max(S,1e-6))),this.center.set(g,p[0],p[1],p[2])},v.translate=function(g,y,p,m){this.center.move(g,y||0,p||0,m||0)},v.setMatrix=function(g,y){var p=this.computedRotation;i(p,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),f(p,p),this.rotation.set(g,p[0],p[1],p[2],p[3]);var m=this.computedMatrix;a(m,y);var w=m[15];if(Math.abs(w)>1e-6){var u=m[12]/w,S=m[13]/w,_=m[14]/w;this.recalcMatrix(g);var E=Math.exp(this.computedRadius[0]);this.center.set(g,u-m[2]*E,S-m[6]*E,_-m[10]*E),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},v.setDistance=function(g,y){y>0&&this.radius.set(g,Math.log(y))},v.setDistanceLimits=function(g,y){g=g>0?Math.log(g):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=y},v.getDistanceLimits=function(g){var y=this.radius.bounds;return g?(g[0]=Math.exp(y[0][0]),g[1]=Math.exp(y[1][0]),g):[Math.exp(y[0][0]),Math.exp(y[1][0])]},v.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},v.fromJSON=function(g){var y=this.lastT(),p=g.center;p&&this.center.set(y,p[0],p[1],p[2]);var m=g.rotation;m&&this.rotation.set(y,m[0],m[1],m[2],m[3]);var w=g.distance;w&&w>0&&this.radius.set(y,Math.log(w)),this.setDistanceLimits(g.zoomMin,g.zoomMax)}},4930:function(d,s,t){var o=t(6184);d.exports=function(r,n,a){return o(a=a!==void 0?a+"":" ",n)+r}},4405:function(d){d.exports=function(s,t){t||(t=[0,""]),s=String(s);var o=parseFloat(s,10);return t[0]=o,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},4166:function(d,s,t){d.exports=function(r,n){for(var a=0|n.length,i=r.length,c=[new Array(a),new Array(a)],h=0;h<a;++h)c[0][h]=[],c[1][h]=[];for(h=0;h<i;++h){var f=r[h];c[0][f[0]].push(f),c[1][f[1]].push(f)}var b=[];for(h=0;h<a;++h)c[0][h].length+c[1][h].length===0&&b.push([h]);function v(S,_){var E=c[_][S[_]];E.splice(E.indexOf(S),1)}function g(S,_,E){for(var L,C,P,I=0;I<2;++I)if(c[I][_].length>0){L=c[I][_][0],P=I;break}C=L[1^P];for(var U=0;U<2;++U)for(var z=c[U][_],H=0;H<z.length;++H){var F=z[H],N=F[1^U];o(n[S],n[_],n[C],n[N])>0&&(L=F,C=N,P=U)}return E||L&&v(L,P),C}function y(S,_){var E=c[_][S][0],L=[S];v(E,_);for(var C=E[1^_];;){for(;C!==S;)L.push(C),C=g(L[L.length-2],C,!1);if(c[0][S].length+c[1][S].length===0)break;var P=L[L.length-1],I=S,U=L[1],z=g(P,I,!0);if(o(n[P],n[I],n[U],n[z])<0)break;L.push(S),C=g(P,I)}return L}function p(S,_){return _[1]===_[_.length-1]}for(h=0;h<a;++h)for(var m=0;m<2;++m){for(var w=[];c[m][h].length>0;){c[0][h].length;var u=y(h,m);p(0,u)?w.push.apply(w,u):(w.length>0&&b.push(w),w=u)}w.length>0&&b.push(w)}return b};var o=t(9398)},3959:function(d,s,t){d.exports=function(r,n){for(var a=o(r,n.length),i=new Array(n.length),c=new Array(n.length),h=[],f=0;f<n.length;++f){var b=a[f].length;c[f]=b,i[f]=!0,b<=1&&h.push(f)}for(;h.length>0;){var v=h.pop();i[v]=!1;var g=a[v];for(f=0;f<g.length;++f){var y=g[f];--c[y]==0&&h.push(y)}}var p=new Array(n.length),m=[];for(f=0;f<n.length;++f)i[f]?(v=m.length,p[f]=v,m.push(n[f])):p[f]=-1;var w=[];for(f=0;f<r.length;++f){var u=r[f];i[u[0]]&&i[u[1]]&&w.push([p[u[0]],p[u[1]]])}return[w,m]};var o=t(8348)},8040:function(d,s,t){d.exports=function(b,v){var g=h(b,v);b=g[0];for(var y=(v=g[1]).length,p=(b.length,o(b,v.length)),m=0;m<y;++m)if(p[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=r(b,v),u=(w=w.filter(function(Ie){for(var xe=Ie.length,Ae=[0],Se=0;Se<xe;++Se){var Te=v[Ie[Se]],Q=v[Ie[(Se+1)%xe]],oe=a(-Te[0],Te[1]),ce=a(-Te[0],Q[1]),me=a(Q[0],Te[1]),Me=a(Q[0],Q[1]);Ae=i(Ae,i(i(oe,ce),i(me,Me)))}return Ae[Ae.length-1]>0})).length,S=new Array(u),_=new Array(u);for(m=0;m<u;++m){S[m]=m;var E=new Array(u),L=w[m].map(function(Ie){return v[Ie]}),C=n([L]),P=0;e:for(var I=0;I<u;++I)if(E[I]=0,m!==I){for(var U=(he=w[I]).length,z=0;z<U;++z){var H=C(v[he[z]]);if(H!==0){H<0&&(E[I]=1,P+=1);continue e}}E[I]=1,P+=1}_[m]=[P,m,E]}for(_.sort(function(Ie,xe){return xe[0]-Ie[0]}),m=0;m<u;++m){var F=(E=_[m])[1],N=E[2];for(I=0;I<u;++I)N[I]&&(S[I]=F)}var B=function(Ie){for(var xe=new Array(Ie),Ae=0;Ae<Ie;++Ae)xe[Ae]=[];return xe}(u);for(m=0;m<u;++m)B[m].push(S[m]),B[S[m]].push(m);var j={},K=f(y,!1);for(m=0;m<u;++m)for(U=(he=w[m]).length,I=0;I<U;++I){var G=he[I],V=he[(I+1)%U],W=Math.min(G,V)+":"+Math.max(G,V);if(W in j){var J=j[W];B[J].push(m),B[m].push(J),K[G]=K[V]=!0}else j[W]=m}function X(Ie){for(var xe=Ie.length,Ae=0;Ae<xe;++Ae)if(!K[Ie[Ae]])return!1;return!0}var ee=[],re=f(u,-1);for(m=0;m<u;++m)S[m]!==m||X(w[m])?re[m]=-1:(ee.push(m),re[m]=0);for(g=[];ee.length>0;){var ie=ee.pop(),se=B[ie];c(se,function(Ie,xe){return Ie-xe});var fe,ye=se.length,ge=re[ie];if(ge===0){var he=w[ie];fe=[he]}for(m=0;m<ye;++m){var ve=se[m];re[ve]>=0||(re[ve]=1^ge,ee.push(ve),ge===0&&(X(he=w[ve])||(he.reverse(),fe.push(he))))}ge===0&&g.push(fe)}return g};var o=t(8348),r=t(4166),n=t(211),a=t(9660),i=t(9662),c=t(1215),h=t(3959);function f(b,v){for(var g=new Array(b),y=0;y<b;++y)g[y]=v;return g}},211:function(d,s,t){d.exports=function(f){for(var b=f.length,v=[],g=[],y=0;y<b;++y)for(var p=f[y],m=p.length,w=m-1,u=0;u<m;w=u++){var S=p[w],_=p[u];S[0]===_[0]?g.push([S,_]):v.push([S,_])}if(v.length===0)return g.length===0?h:(E=c(g),function(P){return E(P[0],P[1])?0:1});var E,L=r(v),C=function(P,I){return function(U){var z=a.le(I,U[0]);if(z<0)return 1;var H=P[z];if(!H){if(!(z>0&&I[z]===U[0]))return 1;H=P[z-1]}for(var F=1;H;){var N=H.key,B=o(U,N[0],N[1]);if(N[0][0]<N[1][0])if(B<0)H=H.left;else{if(!(B>0))return 0;F=-1,H=H.right}else if(B>0)H=H.left;else{if(!(B<0))return 0;F=1,H=H.right}}return F}}(L.slabs,L.coordinates);return g.length===0?C:function(P,I){return function(U){return P(U[0],U[1])?0:I(U)}}(c(g),C)};var o=t(417)[3],r=t(4385),n=t(9014),a=t(5070);function i(){return!0}function c(f){for(var b={},v=0;v<f.length;++v){var g=f[v],y=g[0][0],p=g[0][1],m=g[1][1],w=[Math.min(p,m),Math.max(p,m)];y in b?b[y].push(w):b[y]=[w]}var u={},S=Object.keys(b);for(v=0;v<S.length;++v){var _=b[S[v]];u[S[v]]=n(_)}return function(E){return function(L,C){var P=E[L];return!!P&&!!P.queryPoint(C,i)}}(u)}function h(f){return 1}},7309:function(d){var s=new Float64Array(4),t=new Float64Array(4),o=new Float64Array(4);d.exports=function(r,n,a,i,c){s.length<i.length&&(s=new Float64Array(i.length),t=new Float64Array(i.length),o=new Float64Array(i.length));for(var h=0;h<i.length;++h)s[h]=r[h]-i[h],t[h]=n[h]-r[h],o[h]=a[h]-r[h];var f=0,b=0,v=0,g=0,y=0,p=0;for(h=0;h<i.length;++h){var m=t[h],w=o[h],u=s[h];f+=m*m,b+=m*w,v+=w*w,g+=u*m,y+=u*w,p+=u*u}var S,_,E,L,C,P=Math.abs(f*v-b*b),I=b*y-v*g,U=b*g-f*y;if(I+U<=P)if(I<0)U<0&&g<0?(U=0,-g>=f?(I=1,S=f+2*g+p):S=g*(I=-g/f)+p):(I=0,y>=0?(U=0,S=p):-y>=v?(U=1,S=v+2*y+p):S=y*(U=-y/v)+p);else if(U<0)U=0,g>=0?(I=0,S=p):-g>=f?(I=1,S=f+2*g+p):S=g*(I=-g/f)+p;else{var z=1/P;S=(I*=z)*(f*I+b*(U*=z)+2*g)+U*(b*I+v*U+2*y)+p}else I<0?(E=v+y)>(_=b+g)?(L=E-_)>=(C=f-2*b+v)?(I=1,U=0,S=f+2*g+p):S=(I=L/C)*(f*I+b*(U=1-I)+2*g)+U*(b*I+v*U+2*y)+p:(I=0,E<=0?(U=1,S=v+2*y+p):y>=0?(U=0,S=p):S=y*(U=-y/v)+p):U<0?(E=f+g)>(_=b+y)?(L=E-_)>=(C=f-2*b+v)?(U=1,I=0,S=v+2*y+p):S=(I=1-(U=L/C))*(f*I+b*U+2*g)+U*(b*I+v*U+2*y)+p:(U=0,E<=0?(I=1,S=f+2*g+p):g>=0?(I=0,S=p):S=g*(I=-g/f)+p):(L=v+y-b-g)<=0?(I=0,U=1,S=v+2*y+p):L>=(C=f-2*b+v)?(I=1,U=0,S=f+2*g+p):S=(I=L/C)*(f*I+b*(U=1-I)+2*g)+U*(b*I+v*U+2*y)+p;var H=1-I-U;for(h=0;h<i.length;++h)c[h]=H*r[h]+I*n[h]+U*a[h];return S<0?0:S}},1116:function(d,s,t){d.exports=t(6093)},7584:function(d,s,t){var o=t(1539);d.exports=function(r,n){for(var a=r.length,i=new Array(a),c=0;c<a;++c)i[c]=o(r[c],n[c]);return i}},2826:function(d,s,t){d.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=o(r[a]);return n};var o=t(5125)},4469:function(d,s,t){var o=t(5125),r=t(3962);d.exports=function(n,a){for(var i=o(a),c=n.length,h=new Array(c),f=0;f<c;++f)h[f]=r(n[f],i);return h}},6695:function(d,s,t){var o=t(4354);d.exports=function(r,n){for(var a=r.length,i=new Array(a),c=0;c<a;++c)i[c]=o(r[c],n[c]);return i}},7037:function(d,s,t){var o=t(9209),r=t(1284),n=t(9887);d.exports=function(a){a.sort(r);for(var i=a.length,c=0,h=0;h<i;++h){var f=a[h],b=n(f);if(b!==0){if(c>0){var v=a[c-1];if(o(f,v)===0&&n(v)!==b){c-=1;continue}}a[c++]=f}}return a.length=c,a}},6184:function(d){var s,t="";d.exports=function(o,r){if(typeof o!="string")throw new TypeError("expected a string");if(r===1)return o;if(r===2)return o+o;var n=o.length*r;if(s!==o||s===void 0)s=o,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&r>1;)1&r&&(t+=o),r>>=1,o+=o;return t=(t+=o).substr(0,n)}},8161:function(d,s,t){d.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(d){d.exports=function(s){for(var t=s.length,o=s[s.length-1],r=t,n=t-2;n>=0;--n){var a=o,i=s[n];(h=i-((o=a+i)-a))&&(s[--r]=o,o=h)}var c=0;for(n=r;n<t;++n){var h;(h=(i=o)-((o=(a=s[n])+i)-a))&&(s[c++]=h)}return s[c++]=o,s.length=c,s}},8167:function(d,s,t){var o=t(9660),r=t(9662),n=t(8289),a=t(402);function i(y,p,m,w){return function(u){return w(y(m(u[0][0],u[1][1]),m(-u[0][1],u[1][0])))}}function c(y,p,m,w){return function(u){return w(y(p(y(m(u[1][1],u[2][2]),m(-u[1][2],u[2][1])),u[0][0]),y(p(y(m(u[1][0],u[2][2]),m(-u[1][2],u[2][0])),-u[0][1]),p(y(m(u[1][0],u[2][1]),m(-u[1][1],u[2][0])),u[0][2]))))}}function h(y,p,m,w){return function(u){return w(y(y(p(y(p(y(m(u[2][2],u[3][3]),m(-u[2][3],u[3][2])),u[1][1]),y(p(y(m(u[2][1],u[3][3]),m(-u[2][3],u[3][1])),-u[1][2]),p(y(m(u[2][1],u[3][2]),m(-u[2][2],u[3][1])),u[1][3]))),u[0][0]),p(y(p(y(m(u[2][2],u[3][3]),m(-u[2][3],u[3][2])),u[1][0]),y(p(y(m(u[2][0],u[3][3]),m(-u[2][3],u[3][0])),-u[1][2]),p(y(m(u[2][0],u[3][2]),m(-u[2][2],u[3][0])),u[1][3]))),-u[0][1])),y(p(y(p(y(m(u[2][1],u[3][3]),m(-u[2][3],u[3][1])),u[1][0]),y(p(y(m(u[2][0],u[3][3]),m(-u[2][3],u[3][0])),-u[1][1]),p(y(m(u[2][0],u[3][1]),m(-u[2][1],u[3][0])),u[1][3]))),u[0][2]),p(y(p(y(m(u[2][1],u[3][2]),m(-u[2][2],u[3][1])),u[1][0]),y(p(y(m(u[2][0],u[3][2]),m(-u[2][2],u[3][0])),-u[1][1]),p(y(m(u[2][0],u[3][1]),m(-u[2][1],u[3][0])),u[1][2]))),-u[0][3]))))}}function f(y,p,m,w){return function(u){return w(y(y(p(y(y(p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][2]),y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),-u[2][3]),p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][4]))),u[1][1]),p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][3]),p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][4]))),-u[1][2])),y(p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][4]))),u[1][3]),p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][3]))),-u[1][4]))),u[0][0]),p(y(y(p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][2]),y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),-u[2][3]),p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][4]))),u[1][0]),p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][3]),p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),u[2][4]))),-u[1][2])),y(p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][4]))),u[1][3]),p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][3]))),-u[1][4]))),-u[0][1])),y(p(y(y(p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][3]),p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][4]))),u[1][0]),p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][3]),p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),u[2][4]))),-u[1][1])),y(p(y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][4]))),u[1][3]),p(y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][3]))),-u[1][4]))),u[0][2]),y(p(y(y(p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][4]))),u[1][0]),p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][4]))),-u[1][1])),y(p(y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][4]))),u[1][2]),p(y(p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][2]))),-u[1][4]))),-u[0][3]),p(y(y(p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][3]))),u[1][0]),p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][3]))),-u[1][1])),y(p(y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][3]))),u[1][2]),p(y(p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][2]))),-u[1][3]))),u[0][4])))))}}function b(y){return(y===2?i:y===3?c:y===4?h:y===5?f:void 0)(r,n,o,a)}var v=[function(){return[0]},function(y){return[y[0][0]]}];function g(y,p,m,w,u,S,_,E){return function(L){switch(L.length){case 0:return y(L);case 1:return p(L);case 2:return m(L);case 3:return w(L);case 4:return u(L);case 5:return S(L)}var C=_[L.length];return C||(C=_[L.length]=E(L.length)),C(L)}}(function(){for(;v.length<6;)v.push(b(v.length));d.exports=g.apply(void 0,v.concat([v,b]));for(var y=0;y<v.length;++y)d.exports[y]=v[y]})()},9130:function(d,s,t){var o=t(9660),r=t(9662);d.exports=function(n,a){for(var i=o(n[0],a[0]),c=1;c<n.length;++c)i=r(i,o(n[c],a[c]));return i}},2227:function(d,s,t){var o=t(9660),r=t(9662),n=t(4078),a=t(8289);function i(p){return(p===3?c:p===4?h:p===5?f:b)(r,n,o,a)}function c(p,m,w,u){return function(S,_,E){var L=w(S[0],S[0]),C=u(L,_[0]),P=u(L,E[0]),I=w(_[0],_[0]),U=u(I,S[0]),z=u(I,E[0]),H=w(E[0],E[0]),F=u(H,S[0]),N=u(H,_[0]),B=p(m(N,z),m(U,C)),j=m(F,P),K=m(B,j);return K[K.length-1]}}function h(p,m,w,u){return function(S,_,E,L){var C=p(w(S[0],S[0]),w(S[1],S[1])),P=u(C,_[0]),I=u(C,E[0]),U=u(C,L[0]),z=p(w(_[0],_[0]),w(_[1],_[1])),H=u(z,S[0]),F=u(z,E[0]),N=u(z,L[0]),B=p(w(E[0],E[0]),w(E[1],E[1])),j=u(B,S[0]),K=u(B,_[0]),G=u(B,L[0]),V=p(w(L[0],L[0]),w(L[1],L[1])),W=u(V,S[0]),J=u(V,_[0]),X=u(V,E[0]),ee=p(p(u(m(X,G),_[1]),p(u(m(J,N),-E[1]),u(m(K,F),L[1]))),p(u(m(J,N),S[1]),p(u(m(W,U),-_[1]),u(m(H,P),L[1])))),re=p(p(u(m(X,G),S[1]),p(u(m(W,U),-E[1]),u(m(j,I),L[1]))),p(u(m(K,F),S[1]),p(u(m(j,I),-_[1]),u(m(H,P),E[1])))),ie=m(ee,re);return ie[ie.length-1]}}function f(p,m,w,u){return function(S,_,E,L,C){var P=p(w(S[0],S[0]),p(w(S[1],S[1]),w(S[2],S[2]))),I=u(P,_[0]),U=u(P,E[0]),z=u(P,L[0]),H=u(P,C[0]),F=p(w(_[0],_[0]),p(w(_[1],_[1]),w(_[2],_[2]))),N=u(F,S[0]),B=u(F,E[0]),j=u(F,L[0]),K=u(F,C[0]),G=p(w(E[0],E[0]),p(w(E[1],E[1]),w(E[2],E[2]))),V=u(G,S[0]),W=u(G,_[0]),J=u(G,L[0]),X=u(G,C[0]),ee=p(w(L[0],L[0]),p(w(L[1],L[1]),w(L[2],L[2]))),re=u(ee,S[0]),ie=u(ee,_[0]),se=u(ee,E[0]),fe=u(ee,C[0]),ye=p(w(C[0],C[0]),p(w(C[1],C[1]),w(C[2],C[2]))),ge=u(ye,S[0]),he=u(ye,_[0]),ve=u(ye,E[0]),Ie=u(ye,L[0]),xe=p(p(p(u(p(u(m(Ie,fe),E[1]),p(u(m(ve,X),-L[1]),u(m(se,J),C[1]))),_[2]),p(u(p(u(m(Ie,fe),_[1]),p(u(m(he,K),-L[1]),u(m(ie,j),C[1]))),-E[2]),u(p(u(m(ve,X),_[1]),p(u(m(he,K),-E[1]),u(m(W,B),C[1]))),L[2]))),p(u(p(u(m(se,J),_[1]),p(u(m(ie,j),-E[1]),u(m(W,B),L[1]))),-C[2]),p(u(p(u(m(Ie,fe),_[1]),p(u(m(he,K),-L[1]),u(m(ie,j),C[1]))),S[2]),u(p(u(m(Ie,fe),S[1]),p(u(m(ge,H),-L[1]),u(m(re,z),C[1]))),-_[2])))),p(p(u(p(u(m(he,K),S[1]),p(u(m(ge,H),-_[1]),u(m(N,I),C[1]))),L[2]),p(u(p(u(m(ie,j),S[1]),p(u(m(re,z),-_[1]),u(m(N,I),L[1]))),-C[2]),u(p(u(m(se,J),_[1]),p(u(m(ie,j),-E[1]),u(m(W,B),L[1]))),S[2]))),p(u(p(u(m(se,J),S[1]),p(u(m(re,z),-E[1]),u(m(V,U),L[1]))),-_[2]),p(u(p(u(m(ie,j),S[1]),p(u(m(re,z),-_[1]),u(m(N,I),L[1]))),E[2]),u(p(u(m(W,B),S[1]),p(u(m(V,U),-_[1]),u(m(N,I),E[1]))),-L[2]))))),Ae=p(p(p(u(p(u(m(Ie,fe),E[1]),p(u(m(ve,X),-L[1]),u(m(se,J),C[1]))),S[2]),u(p(u(m(Ie,fe),S[1]),p(u(m(ge,H),-L[1]),u(m(re,z),C[1]))),-E[2])),p(u(p(u(m(ve,X),S[1]),p(u(m(ge,H),-E[1]),u(m(V,U),C[1]))),L[2]),u(p(u(m(se,J),S[1]),p(u(m(re,z),-E[1]),u(m(V,U),L[1]))),-C[2]))),p(p(u(p(u(m(ve,X),_[1]),p(u(m(he,K),-E[1]),u(m(W,B),C[1]))),S[2]),u(p(u(m(ve,X),S[1]),p(u(m(ge,H),-E[1]),u(m(V,U),C[1]))),-_[2])),p(u(p(u(m(he,K),S[1]),p(u(m(ge,H),-_[1]),u(m(N,I),C[1]))),E[2]),u(p(u(m(W,B),S[1]),p(u(m(V,U),-_[1]),u(m(N,I),E[1]))),-C[2])))),Se=m(xe,Ae);return Se[Se.length-1]}}function b(p,m,w,u){return function(S,_,E,L,C,P){var I=p(p(w(S[0],S[0]),w(S[1],S[1])),p(w(S[2],S[2]),w(S[3],S[3]))),U=u(I,_[0]),z=u(I,E[0]),H=u(I,L[0]),F=u(I,C[0]),N=u(I,P[0]),B=p(p(w(_[0],_[0]),w(_[1],_[1])),p(w(_[2],_[2]),w(_[3],_[3]))),j=u(B,S[0]),K=u(B,E[0]),G=u(B,L[0]),V=u(B,C[0]),W=u(B,P[0]),J=p(p(w(E[0],E[0]),w(E[1],E[1])),p(w(E[2],E[2]),w(E[3],E[3]))),X=u(J,S[0]),ee=u(J,_[0]),re=u(J,L[0]),ie=u(J,C[0]),se=u(J,P[0]),fe=p(p(w(L[0],L[0]),w(L[1],L[1])),p(w(L[2],L[2]),w(L[3],L[3]))),ye=u(fe,S[0]),ge=u(fe,_[0]),he=u(fe,E[0]),ve=u(fe,C[0]),Ie=u(fe,P[0]),xe=p(p(w(C[0],C[0]),w(C[1],C[1])),p(w(C[2],C[2]),w(C[3],C[3]))),Ae=u(xe,S[0]),Se=u(xe,_[0]),Te=u(xe,E[0]),Q=u(xe,L[0]),oe=u(xe,P[0]),ce=p(p(w(P[0],P[0]),w(P[1],P[1])),p(w(P[2],P[2]),w(P[3],P[3]))),me=u(ce,S[0]),Me=u(ce,_[0]),Re=u(ce,E[0]),Ce=u(ce,L[0]),ze=u(ce,C[0]),le=p(p(p(u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Ce,Ie),-C[1]),u(m(Q,ve),P[1]))),E[2]),u(p(u(m(ze,oe),E[1]),p(u(m(Re,se),-C[1]),u(m(Te,ie),P[1]))),-L[2])),p(u(p(u(m(Ce,Ie),E[1]),p(u(m(Re,se),-L[1]),u(m(he,re),P[1]))),C[2]),u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),-P[2]))),_[3]),p(u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Ce,Ie),-C[1]),u(m(Q,ve),P[1]))),_[2]),u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(Se,V),P[1]))),-L[2])),p(u(p(u(m(Ce,Ie),_[1]),p(u(m(Me,W),-L[1]),u(m(ge,G),P[1]))),C[2]),u(p(u(m(Q,ve),_[1]),p(u(m(Se,V),-L[1]),u(m(ge,G),C[1]))),-P[2]))),-E[3]),u(p(p(u(p(u(m(ze,oe),E[1]),p(u(m(Re,se),-C[1]),u(m(Te,ie),P[1]))),_[2]),u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(Se,V),P[1]))),-E[2])),p(u(p(u(m(Re,se),_[1]),p(u(m(Me,W),-E[1]),u(m(ee,K),P[1]))),C[2]),u(p(u(m(Te,ie),_[1]),p(u(m(Se,V),-E[1]),u(m(ee,K),C[1]))),-P[2]))),L[3]))),p(p(u(p(p(u(p(u(m(Ce,Ie),E[1]),p(u(m(Re,se),-L[1]),u(m(he,re),P[1]))),_[2]),u(p(u(m(Ce,Ie),_[1]),p(u(m(Me,W),-L[1]),u(m(ge,G),P[1]))),-E[2])),p(u(p(u(m(Re,se),_[1]),p(u(m(Me,W),-E[1]),u(m(ee,K),P[1]))),L[2]),u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),-P[2]))),-C[3]),u(p(p(u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),_[2]),u(p(u(m(Q,ve),_[1]),p(u(m(Se,V),-L[1]),u(m(ge,G),C[1]))),-E[2])),p(u(p(u(m(Te,ie),_[1]),p(u(m(Se,V),-E[1]),u(m(ee,K),C[1]))),L[2]),u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),-C[2]))),P[3])),p(u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Ce,Ie),-C[1]),u(m(Q,ve),P[1]))),_[2]),u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(Se,V),P[1]))),-L[2])),p(u(p(u(m(Ce,Ie),_[1]),p(u(m(Me,W),-L[1]),u(m(ge,G),P[1]))),C[2]),u(p(u(m(Q,ve),_[1]),p(u(m(Se,V),-L[1]),u(m(ge,G),C[1]))),-P[2]))),S[3]),u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Ce,Ie),-C[1]),u(m(Q,ve),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,N),-C[1]),u(m(Ae,F),P[1]))),-L[2])),p(u(p(u(m(Ce,Ie),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),C[2]),u(p(u(m(Q,ve),S[1]),p(u(m(Ae,F),-L[1]),u(m(ye,H),C[1]))),-P[2]))),-_[3])))),p(p(p(u(p(p(u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(Se,V),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,N),-C[1]),u(m(Ae,F),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),C[2]),u(p(u(m(Se,V),S[1]),p(u(m(Ae,F),-_[1]),u(m(j,U),C[1]))),-P[2]))),L[3]),u(p(p(u(p(u(m(Ce,Ie),_[1]),p(u(m(Me,W),-L[1]),u(m(ge,G),P[1]))),S[2]),u(p(u(m(Ce,Ie),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),L[2]),u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),-P[2]))),-C[3])),p(u(p(p(u(p(u(m(Q,ve),_[1]),p(u(m(Se,V),-L[1]),u(m(ge,G),C[1]))),S[2]),u(p(u(m(Q,ve),S[1]),p(u(m(Ae,F),-L[1]),u(m(ye,H),C[1]))),-_[2])),p(u(p(u(m(Se,V),S[1]),p(u(m(Ae,F),-_[1]),u(m(j,U),C[1]))),L[2]),u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),-C[2]))),P[3]),u(p(p(u(p(u(m(Ce,Ie),E[1]),p(u(m(Re,se),-L[1]),u(m(he,re),P[1]))),_[2]),u(p(u(m(Ce,Ie),_[1]),p(u(m(Me,W),-L[1]),u(m(ge,G),P[1]))),-E[2])),p(u(p(u(m(Re,se),_[1]),p(u(m(Me,W),-E[1]),u(m(ee,K),P[1]))),L[2]),u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),-P[2]))),S[3]))),p(p(u(p(p(u(p(u(m(Ce,Ie),E[1]),p(u(m(Re,se),-L[1]),u(m(he,re),P[1]))),S[2]),u(p(u(m(Ce,Ie),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),-E[2])),p(u(p(u(m(Re,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),L[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-P[2]))),-_[3]),u(p(p(u(p(u(m(Ce,Ie),_[1]),p(u(m(Me,W),-L[1]),u(m(ge,G),P[1]))),S[2]),u(p(u(m(Ce,Ie),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),L[2]),u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),-P[2]))),E[3])),p(u(p(p(u(p(u(m(Re,se),_[1]),p(u(m(Me,W),-E[1]),u(m(ee,K),P[1]))),S[2]),u(p(u(m(Re,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-P[2]))),-L[3]),u(p(p(u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),S[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-_[2])),p(u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-L[2]))),P[3]))))),de=p(p(p(u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Ce,Ie),-C[1]),u(m(Q,ve),P[1]))),E[2]),u(p(u(m(ze,oe),E[1]),p(u(m(Re,se),-C[1]),u(m(Te,ie),P[1]))),-L[2])),p(u(p(u(m(Ce,Ie),E[1]),p(u(m(Re,se),-L[1]),u(m(he,re),P[1]))),C[2]),u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),-P[2]))),S[3]),p(u(p(p(u(p(u(m(ze,oe),L[1]),p(u(m(Ce,Ie),-C[1]),u(m(Q,ve),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,N),-C[1]),u(m(Ae,F),P[1]))),-L[2])),p(u(p(u(m(Ce,Ie),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),C[2]),u(p(u(m(Q,ve),S[1]),p(u(m(Ae,F),-L[1]),u(m(ye,H),C[1]))),-P[2]))),-E[3]),u(p(p(u(p(u(m(ze,oe),E[1]),p(u(m(Re,se),-C[1]),u(m(Te,ie),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,N),-C[1]),u(m(Ae,F),P[1]))),-E[2])),p(u(p(u(m(Re,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),C[2]),u(p(u(m(Te,ie),S[1]),p(u(m(Ae,F),-E[1]),u(m(X,z),C[1]))),-P[2]))),L[3]))),p(p(u(p(p(u(p(u(m(Ce,Ie),E[1]),p(u(m(Re,se),-L[1]),u(m(he,re),P[1]))),S[2]),u(p(u(m(Ce,Ie),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),-E[2])),p(u(p(u(m(Re,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),L[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-P[2]))),-C[3]),u(p(p(u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),S[2]),u(p(u(m(Q,ve),S[1]),p(u(m(Ae,F),-L[1]),u(m(ye,H),C[1]))),-E[2])),p(u(p(u(m(Te,ie),S[1]),p(u(m(Ae,F),-E[1]),u(m(X,z),C[1]))),L[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-C[2]))),P[3])),p(u(p(p(u(p(u(m(ze,oe),E[1]),p(u(m(Re,se),-C[1]),u(m(Te,ie),P[1]))),_[2]),u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(Se,V),P[1]))),-E[2])),p(u(p(u(m(Re,se),_[1]),p(u(m(Me,W),-E[1]),u(m(ee,K),P[1]))),C[2]),u(p(u(m(Te,ie),_[1]),p(u(m(Se,V),-E[1]),u(m(ee,K),C[1]))),-P[2]))),S[3]),u(p(p(u(p(u(m(ze,oe),E[1]),p(u(m(Re,se),-C[1]),u(m(Te,ie),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,N),-C[1]),u(m(Ae,F),P[1]))),-E[2])),p(u(p(u(m(Re,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),C[2]),u(p(u(m(Te,ie),S[1]),p(u(m(Ae,F),-E[1]),u(m(X,z),C[1]))),-P[2]))),-_[3])))),p(p(p(u(p(p(u(p(u(m(ze,oe),_[1]),p(u(m(Me,W),-C[1]),u(m(Se,V),P[1]))),S[2]),u(p(u(m(ze,oe),S[1]),p(u(m(me,N),-C[1]),u(m(Ae,F),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),C[2]),u(p(u(m(Se,V),S[1]),p(u(m(Ae,F),-_[1]),u(m(j,U),C[1]))),-P[2]))),E[3]),u(p(p(u(p(u(m(Re,se),_[1]),p(u(m(Me,W),-E[1]),u(m(ee,K),P[1]))),S[2]),u(p(u(m(Re,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),-_[2])),p(u(p(u(m(Me,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-P[2]))),-C[3])),p(u(p(p(u(p(u(m(Te,ie),_[1]),p(u(m(Se,V),-E[1]),u(m(ee,K),C[1]))),S[2]),u(p(u(m(Te,ie),S[1]),p(u(m(Ae,F),-E[1]),u(m(X,z),C[1]))),-_[2])),p(u(p(u(m(Se,V),S[1]),p(u(m(Ae,F),-_[1]),u(m(j,U),C[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-C[2]))),P[3]),u(p(p(u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),_[2]),u(p(u(m(Q,ve),_[1]),p(u(m(Se,V),-L[1]),u(m(ge,G),C[1]))),-E[2])),p(u(p(u(m(Te,ie),_[1]),p(u(m(Se,V),-E[1]),u(m(ee,K),C[1]))),L[2]),u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),-C[2]))),S[3]))),p(p(u(p(p(u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),S[2]),u(p(u(m(Q,ve),S[1]),p(u(m(Ae,F),-L[1]),u(m(ye,H),C[1]))),-E[2])),p(u(p(u(m(Te,ie),S[1]),p(u(m(Ae,F),-E[1]),u(m(X,z),C[1]))),L[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-C[2]))),-_[3]),u(p(p(u(p(u(m(Q,ve),_[1]),p(u(m(Se,V),-L[1]),u(m(ge,G),C[1]))),S[2]),u(p(u(m(Q,ve),S[1]),p(u(m(Ae,F),-L[1]),u(m(ye,H),C[1]))),-_[2])),p(u(p(u(m(Se,V),S[1]),p(u(m(Ae,F),-_[1]),u(m(j,U),C[1]))),L[2]),u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),-C[2]))),E[3])),p(u(p(p(u(p(u(m(Te,ie),_[1]),p(u(m(Se,V),-E[1]),u(m(ee,K),C[1]))),S[2]),u(p(u(m(Te,ie),S[1]),p(u(m(Ae,F),-E[1]),u(m(X,z),C[1]))),-_[2])),p(u(p(u(m(Se,V),S[1]),p(u(m(Ae,F),-_[1]),u(m(j,U),C[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-C[2]))),-L[3]),u(p(p(u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),S[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-_[2])),p(u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-L[2]))),C[3]))))),be=m(le,de);return be[be.length-1]}}var v=[function(){return 0},function(){return 0},function(){return 0}];function g(p){var m=v[p.length];return m||(m=v[p.length]=i(p.length)),m.apply(void 0,p)}function y(p,m,w,u,S,_,E,L){return function(C,P,I,U,z,H){switch(arguments.length){case 0:case 1:return 0;case 2:return u(C,P);case 3:return S(C,P,I);case 4:return _(C,P,I,U);case 5:return E(C,P,I,U,z);case 6:return L(C,P,I,U,z,H)}for(var F=new Array(arguments.length),N=0;N<arguments.length;++N)F[N]=arguments[N];return p(F)}}(function(){for(;v.length<=6;)v.push(i(v.length));d.exports=y.apply(void 0,[g].concat(v));for(var p=0;p<=6;++p)d.exports[p]=v[p]})()},6606:function(d,s,t){var o=t(8167);function r(v){return(v===2?n:v===3?a:v===4?i:v===5?c:h)(v<6?o[v]:o)}function n(v){return function(g,y){return[v([[+y[0],+g[0][1]],[+y[1],+g[1][1]]]),v([[+g[0][0],+y[0]],[+g[1][0],+y[1]]]),v(g)]}}function a(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2]],[+y[1],+g[1][1],+g[1][2]],[+y[2],+g[2][1],+g[2][2]]]),v([[+g[0][0],+y[0],+g[0][2]],[+g[1][0],+y[1],+g[1][2]],[+g[2][0],+y[2],+g[2][2]]]),v([[+g[0][0],+g[0][1],+y[0]],[+g[1][0],+g[1][1],+y[1]],[+g[2][0],+g[2][1],+y[2]]]),v(g)]}}function i(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3]],[+y[1],+g[1][1],+g[1][2],+g[1][3]],[+y[2],+g[2][1],+g[2][2],+g[2][3]],[+y[3],+g[3][1],+g[3][2],+g[3][3]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3]],[+g[1][0],+y[1],+g[1][2],+g[1][3]],[+g[2][0],+y[2],+g[2][2],+g[2][3]],[+g[3][0],+y[3],+g[3][2],+g[3][3]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3]],[+g[1][0],+g[1][1],+y[1],+g[1][3]],[+g[2][0],+g[2][1],+y[2],+g[2][3]],[+g[3][0],+g[3][1],+y[3],+g[3][3]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+y[3]]]),v(g)]}}function c(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4]],[+y[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4]],[+y[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4]],[+y[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4]],[+y[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3],+g[0][4]],[+g[1][0],+y[1],+g[1][2],+g[1][3],+g[1][4]],[+g[2][0],+y[2],+g[2][2],+g[2][3],+g[2][4]],[+g[3][0],+y[3],+g[3][2],+g[3][3],+g[3][4]],[+g[4][0],+y[4],+g[4][2],+g[4][3],+g[4][4]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3],+g[0][4]],[+g[1][0],+g[1][1],+y[1],+g[1][3],+g[1][4]],[+g[2][0],+g[2][1],+y[2],+g[2][3],+g[2][4]],[+g[3][0],+g[3][1],+y[3],+g[3][3],+g[3][4]],[+g[4][0],+g[4][1],+y[4],+g[4][3],+g[4][4]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0],+g[0][4]],[+g[1][0],+g[1][1],+g[1][2],+y[1],+g[1][4]],[+g[2][0],+g[2][1],+g[2][2],+y[2],+g[2][4]],[+g[3][0],+g[3][1],+g[3][2],+y[3],+g[3][4]],[+g[4][0],+g[4][1],+g[4][2],+y[4],+g[4][4]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+y[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+y[4]]]),v(g)]}}function h(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+y[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+y[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+y[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+y[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+y[5],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+y[1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+y[2],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+y[3],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+y[4],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+y[5],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+y[1],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+y[2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+y[3],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+y[4],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+y[5],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+y[1],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+y[2],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+y[3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+y[4],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+y[5],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+y[0],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+y[1],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+y[2],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+y[3],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+y[4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+y[5],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+y[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+y[4]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+y[5]]]),v(g)]}}var f=[function(){return[[0]]},function(v,g){return[[g[0]],[v[0][0]]]}];function b(v,g,y,p,m,w,u,S){return function(_,E){switch(_.length){case 0:return v(_,E);case 1:return g(_,E);case 2:return y(_,E);case 3:return p(_,E);case 4:return m(_,E);case 5:return w(_,E)}var L=u[_.length];return L||(L=u[_.length]=S(_.length)),L(_,E)}}(function(){for(;f.length<6;)f.push(r(f.length));d.exports=b.apply(void 0,f.concat([f,r]));for(var v=0;v<6;++v)d.exports[v]=f[v]})()},417:function(d,s,t){var o=t(9660),r=t(9662),n=t(8289),a=t(4078);function i(m,w,u,S){return function(_,E,L){var C=m(m(w(E[1],L[0]),w(-L[1],E[0])),m(w(_[1],E[0]),w(-E[1],_[0]))),P=m(w(_[1],L[0]),w(-L[1],_[0])),I=S(C,P);return I[I.length-1]}}function c(m,w,u,S){return function(_,E,L,C){var P=m(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2])))),I=m(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2])))),U=S(P,I);return U[U.length-1]}}function h(m,w,u,S){return function(_,E,L,C,P){var I=m(m(m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),L[2]),m(u(m(w(L[1],P[0]),w(-P[1],L[0])),-C[2]),u(m(w(L[1],C[0]),w(-C[1],L[0])),P[2]))),E[3]),m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-C[2]),u(m(w(E[1],C[0]),w(-C[1],E[0])),P[2]))),-L[3]),u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),P[2]))),C[3]))),m(u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),-P[3]),m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-C[2]),u(m(w(E[1],C[0]),w(-C[1],E[0])),P[2]))),_[3]),u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-C[2]),u(m(w(_[1],C[0]),w(-C[1],_[0])),P[2]))),-E[3])))),m(m(u(m(u(m(w(E[1],P[0]),w(-P[1],E[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),P[2]))),C[3]),m(u(m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2]))),-P[3]),u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),_[3]))),m(u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),-E[3]),m(u(m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2]))),L[3]),u(m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2]))),-C[3]))))),U=m(m(m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),L[2]),m(u(m(w(L[1],P[0]),w(-P[1],L[0])),-C[2]),u(m(w(L[1],C[0]),w(-C[1],L[0])),P[2]))),_[3]),u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-C[2]),u(m(w(_[1],C[0]),w(-C[1],_[0])),P[2]))),-L[3])),m(u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),P[2]))),C[3]),u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),-P[3]))),m(m(u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),P[2]))),_[3]),u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),P[2]))),-E[3])),m(u(m(u(m(w(E[1],P[0]),w(-P[1],E[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),P[2]))),L[3]),u(m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2]))),-P[3])))),z=S(I,U);return z[z.length-1]}}function f(m){return(m===3?i:m===4?c:h)(r,o,n,a)}var b=f(3),v=f(4),g=[function(){return 0},function(){return 0},function(m,w){return w[0]-m[0]},function(m,w,u){var S,_=(m[1]-u[1])*(w[0]-u[0]),E=(m[0]-u[0])*(w[1]-u[1]),L=_-E;if(_>0){if(E<=0)return L;S=_+E}else{if(!(_<0)||E>=0)return L;S=-(_+E)}var C=33306690738754716e-32*S;return L>=C||L<=-C?L:b(m,w,u)},function(m,w,u,S){var _=m[0]-S[0],E=w[0]-S[0],L=u[0]-S[0],C=m[1]-S[1],P=w[1]-S[1],I=u[1]-S[1],U=m[2]-S[2],z=w[2]-S[2],H=u[2]-S[2],F=E*I,N=L*P,B=L*C,j=_*I,K=_*P,G=E*C,V=U*(F-N)+z*(B-j)+H*(K-G),W=7771561172376103e-31*((Math.abs(F)+Math.abs(N))*Math.abs(U)+(Math.abs(B)+Math.abs(j))*Math.abs(z)+(Math.abs(K)+Math.abs(G))*Math.abs(H));return V>W||-V>W?V:v(m,w,u,S)}];function y(m){var w=g[m.length];return w||(w=g[m.length]=f(m.length)),w.apply(void 0,m)}function p(m,w,u,S,_,E,L){return function(C,P,I,U,z){switch(arguments.length){case 0:case 1:return 0;case 2:return S(C,P);case 3:return _(C,P,I);case 4:return E(C,P,I,U);case 5:return L(C,P,I,U,z)}for(var H=new Array(arguments.length),F=0;F<arguments.length;++F)H[F]=arguments[F];return m(H)}}(function(){for(;g.length<=5;)g.push(f(g.length));d.exports=p.apply(void 0,[y].concat(g));for(var m=0;m<=5;++m)d.exports[m]=g[m]})()},2019:function(d,s,t){var o=t(9662),r=t(8289);d.exports=function(n,a){if(n.length===1)return r(a,n[0]);if(a.length===1)return r(n,a[0]);if(n.length===0||a.length===0)return[0];var i=[0];if(n.length<a.length)for(var c=0;c<n.length;++c)i=o(i,r(a,n[c]));else for(c=0;c<a.length;++c)i=o(i,r(n,a[c]));return i}},8289:function(d,s,t){var o=t(9660),r=t(87);d.exports=function(n,a){var i=n.length;if(i===1){var c=o(n[0],a);return c[0]?c:[c[1]]}var h=new Array(2*i),f=[.1,.1],b=[.1,.1],v=0;o(n[0],a,f),f[0]&&(h[v++]=f[0]);for(var g=1;g<i;++g){o(n[g],a,b);var y=f[1];r(y,b[0],f),f[0]&&(h[v++]=f[0]);var p=b[1],m=f[1],w=p+m,u=m-(w-p);f[1]=w,u&&(h[v++]=u)}return f[1]&&(h[v++]=f[1]),v===0&&(h[v++]=0),h.length=v,h}},4434:function(d,s,t){d.exports=function(r,n,a,i){var c=o(r,a,i),h=o(n,a,i);if(c>0&&h>0||c<0&&h<0)return!1;var f=o(a,r,n),b=o(i,r,n);return!(f>0&&b>0||f<0&&b<0)&&(c!==0||h!==0||f!==0||b!==0||function(v,g,y,p){for(var m=0;m<2;++m){var w=v[m],u=g[m],S=Math.min(w,u),_=Math.max(w,u),E=y[m],L=p[m],C=Math.min(E,L);if(Math.max(E,L)<S||_<C)return!1}return!0}(r,n,a,i))};var o=t(417)[3]},4078:function(d){d.exports=function(s,t){var o=0|s.length,r=0|t.length;if(o===1&&r===1)return function(C,P){var I=C+P,U=I-C,z=C-(I-U)+(P-U);return z?[z,I]:[I]}(s[0],-t[0]);var n,a,i=new Array(o+r),c=0,h=0,f=0,b=Math.abs,v=s[h],g=b(v),y=-t[f],p=b(y);g<p?(a=v,(h+=1)<o&&(g=b(v=s[h]))):(a=y,(f+=1)<r&&(p=b(y=-t[f]))),h<o&&g<p||f>=r?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(p=b(y=-t[f])));for(var m,w,u=n+a,S=u-n,_=a-S,E=_,L=u;h<o&&f<r;)g<p?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(p=b(y=-t[f]))),(_=(a=E)-(S=(u=n+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m;for(;h<o;)(_=(a=E)-(S=(u=(n=v)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(h+=1)<o&&(v=s[h]);for(;f<r;)(_=(a=E)-(S=(u=(n=y)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(f+=1)<r&&(y=-t[f]);return E&&(i[c++]=E),L&&(i[c++]=L),c||(i[c++]=0),i.length=c,i}},9662:function(d){d.exports=function(s,t){var o=0|s.length,r=0|t.length;if(o===1&&r===1)return function(C,P){var I=C+P,U=I-C,z=C-(I-U)+(P-U);return z?[z,I]:[I]}(s[0],t[0]);var n,a,i=new Array(o+r),c=0,h=0,f=0,b=Math.abs,v=s[h],g=b(v),y=t[f],p=b(y);g<p?(a=v,(h+=1)<o&&(g=b(v=s[h]))):(a=y,(f+=1)<r&&(p=b(y=t[f]))),h<o&&g<p||f>=r?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(p=b(y=t[f])));for(var m,w,u=n+a,S=u-n,_=a-S,E=_,L=u;h<o&&f<r;)g<p?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(p=b(y=t[f]))),(_=(a=E)-(S=(u=n+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m;for(;h<o;)(_=(a=E)-(S=(u=(n=v)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(h+=1)<o&&(v=s[h]);for(;f<r;)(_=(a=E)-(S=(u=(n=y)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(f+=1)<r&&(y=t[f]);return E&&(i[c++]=E),L&&(i[c++]=L),c||(i[c++]=0),i.length=c,i}},8691:function(d,s,t){d.exports=function(n){return r(o(n))};var o=t(2692),r=t(7037)},7212:function(d,s,t){d.exports=function(i,c,h,f){if(h=h||0,f===void 0&&(f=function(u){for(var S=u.length,_=0,E=0;E<S;++E)_=0|Math.max(_,u[E].length);return _-1}(i)),i.length===0||f<1)return{cells:[],vertexIds:[],vertexWeights:[]};var b=function(u,S){for(var _=u.length,E=r.mallocUint8(_),L=0;L<_;++L)E[L]=u[L]<S|0;return E}(c,+h),v=function(u,S){for(var _=u.length,E=S*(S+1)/2*_|0,L=r.mallocUint32(2*E),C=0,P=0;P<_;++P)for(var I=u[P],U=(S=I.length,0);U<S;++U)for(var z=0;z<U;++z){var H=I[z],F=I[U];L[C++]=0|Math.min(H,F),L[C++]=0|Math.max(H,F)}n(o(L,[C/2|0,2]));var N=2;for(P=2;P<C;P+=2)L[P-2]===L[P]&&L[P-1]===L[P+1]||(L[N++]=L[P],L[N++]=L[P+1]);return o(L,[N/2|0,2])}(i,f),g=function(u,S,_,E){for(var L=u.data,C=u.shape[0],P=r.mallocDouble(C),I=0,U=0;U<C;++U){var z=L[2*U],H=L[2*U+1];if(_[z]!==_[H]){var F=S[z],N=S[H];L[2*I]=z,L[2*I+1]=H,P[I++]=(N-E)/(N-F)}}return u.shape[0]=I,o(P,[I])}(v,c,b,+h),y=function(u,S){var _=r.mallocInt32(2*S),E=u.shape[0],L=u.data;_[0]=0;for(var C=0,P=0;P<E;++P){var I=L[2*P];if(I!==C){for(_[2*C+1]=P;++C<I;)_[2*C]=P,_[2*C+1]=P;_[2*C]=P}}for(_[2*C+1]=E;++C<S;)_[2*C]=_[2*C+1]=E;return _}(v,0|c.length),p=a(f)(i,v.data,y,b),m=function(u){for(var S=0|u.shape[0],_=u.data,E=new Array(S),L=0;L<S;++L)E[L]=[_[2*L],_[2*L+1]];return E}(v),w=[].slice.call(g.data,0,g.shape[0]);return r.free(b),r.free(v.data),r.free(g.data),r.free(y),{cells:p,vertexIds:m,vertexWeights:w}};var o=t(5050),r=t(5306),n=t(8729),a=t(1168)},1168:function(d){d.exports=function(t){return s[t]()};var s=[function(){return function(t,o,r,n){for(var a=t.length,i=0;i<a;++i)t[i].length;return[]}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var b=h+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:h=b+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h];if(f.length===2){var b=(a[f[0]]<<0)+(a[f[1]]<<1);if(b===0||b===3)continue;switch(b){case 0:case 3:break;case 1:c.push([t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0])])}}}return c}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var b=h+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:h=b+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h],b=f.length;if(b===3){if((v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2))==0||v===7)continue;switch(v){case 0:case 7:break;case 1:c.push([t(n,r,f[0],f[2]),t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0]),t(n,r,f[1],f[2])]);break;case 3:c.push([t(n,r,f[0],f[2]),t(n,r,f[1],f[2])]);break;case 4:c.push([t(n,r,f[2],f[1]),t(n,r,f[2],f[0])]);break;case 5:c.push([t(n,r,f[2],f[1]),t(n,r,f[0],f[1])]);break;case 6:c.push([t(n,r,f[1],f[0]),t(n,r,f[2],f[0])])}}else if(b===2){var v;if((v=(a[f[0]]<<0)+(a[f[1]]<<1))==0||v===3)continue;switch(v){case 0:case 3:break;case 1:c.push([t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0])])}}}return c}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var b=h+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:h=b+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h],b=f.length;if(b===4){if((v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2)+(a[f[3]]<<3))==0||v===15)continue;switch(v){case 0:case 15:break;case 1:c.push([t(n,r,f[0],f[1]),t(n,r,f[0],f[2]),t(n,r,f[0],f[3])]);break;case 2:c.push([t(n,r,f[1],f[2]),t(n,r,f[1],f[0]),t(n,r,f[1],f[3])]);break;case 3:c.push([t(n,r,f[1],f[2]),t(n,r,f[0],f[2]),t(n,r,f[0],f[3])],[t(n,r,f[1],f[3]),t(n,r,f[1],f[2]),t(n,r,f[0],f[3])]);break;case 4:c.push([t(n,r,f[2],f[0]),t(n,r,f[2],f[1]),t(n,r,f[2],f[3])]);break;case 5:c.push([t(n,r,f[0],f[1]),t(n,r,f[2],f[1]),t(n,r,f[0],f[3])],[t(n,r,f[2],f[1]),t(n,r,f[2],f[3]),t(n,r,f[0],f[3])]);break;case 6:c.push([t(n,r,f[2],f[0]),t(n,r,f[1],f[0]),t(n,r,f[1],f[3])],[t(n,r,f[2],f[3]),t(n,r,f[2],f[0]),t(n,r,f[1],f[3])]);break;case 7:c.push([t(n,r,f[0],f[3]),t(n,r,f[1],f[3]),t(n,r,f[2],f[3])]);break;case 8:c.push([t(n,r,f[3],f[1]),t(n,r,f[3],f[0]),t(n,r,f[3],f[2])]);break;case 9:c.push([t(n,r,f[3],f[1]),t(n,r,f[0],f[1]),t(n,r,f[0],f[2])],[t(n,r,f[3],f[2]),t(n,r,f[3],f[1]),t(n,r,f[0],f[2])]);break;case 10:c.push([t(n,r,f[1],f[0]),t(n,r,f[3],f[0]),t(n,r,f[1],f[2])],[t(n,r,f[3],f[0]),t(n,r,f[3],f[2]),t(n,r,f[1],f[2])]);break;case 11:c.push([t(n,r,f[1],f[2]),t(n,r,f[0],f[2]),t(n,r,f[3],f[2])]);break;case 12:c.push([t(n,r,f[3],f[0]),t(n,r,f[2],f[0]),t(n,r,f[2],f[1])],[t(n,r,f[3],f[1]),t(n,r,f[3],f[0]),t(n,r,f[2],f[1])]);break;case 13:c.push([t(n,r,f[0],f[1]),t(n,r,f[2],f[1]),t(n,r,f[3],f[1])]);break;case 14:c.push([t(n,r,f[2],f[0]),t(n,r,f[1],f[0]),t(n,r,f[3],f[0])])}}else if(b===3){if((v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2))==0||v===7)continue;switch(v){case 0:case 7:break;case 1:c.push([t(n,r,f[0],f[2]),t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0]),t(n,r,f[1],f[2])]);break;case 3:c.push([t(n,r,f[0],f[2]),t(n,r,f[1],f[2])]);break;case 4:c.push([t(n,r,f[2],f[1]),t(n,r,f[2],f[0])]);break;case 5:c.push([t(n,r,f[2],f[1]),t(n,r,f[0],f[1])]);break;case 6:c.push([t(n,r,f[1],f[0]),t(n,r,f[2],f[0])])}}else if(b===2){var v;if((v=(a[f[0]]<<0)+(a[f[1]]<<1))==0||v===3)continue;switch(v){case 0:case 3:break;case 1:c.push([t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0])])}}}return c}}]},8211:function(d,s,t){t(2288),t(1731),s.H=function(o,r){var n=o.length,a=o.length-r.length,i=Math.min;if(a)return a;switch(n){case 0:return 0;case 1:return o[0]-r[0];case 2:return(f=o[0]+o[1]-r[0]-r[1])||i(o[0],o[1])-i(r[0],r[1]);case 3:var c=o[0]+o[1],h=r[0]+r[1];if(f=c+o[2]-(h+r[2]))return f;var f,b=i(o[0],o[1]),v=i(r[0],r[1]);return(f=i(b,o[2])-i(v,r[2]))||i(b+o[2],c)-i(v+r[2],h);default:var g=o.slice(0);g.sort();var y=r.slice(0);y.sort();for(var p=0;p<n;++p)if(a=g[p]-y[p])return a;return 0}}},9392:function(d,s){function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,i=n,c=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=1&a,--c;r[n]=i<<c&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},6656:function(d,s,t){var o=t(9392),r=t(9521);function n(v,g){var y=v.length,p=v.length-g.length,m=Math.min;if(p)return p;switch(y){case 0:return 0;case 1:return v[0]-g[0];case 2:return(S=v[0]+v[1]-g[0]-g[1])||m(v[0],v[1])-m(g[0],g[1]);case 3:var w=v[0]+v[1],u=g[0]+g[1];if(S=w+v[2]-(u+g[2]))return S;var S,_=m(v[0],v[1]),E=m(g[0],g[1]);return(S=m(_,v[2])-m(E,g[2]))||m(_+v[2],w)-m(E+g[2],u);default:var L=v.slice(0);L.sort();var C=g.slice(0);C.sort();for(var P=0;P<y;++P)if(p=L[P]-C[P])return p;return 0}}function a(v,g){return n(v[0],g[0])}function i(v,g){if(g){for(var y=v.length,p=new Array(y),m=0;m<y;++m)p[m]=[v[m],g[m]];for(p.sort(a),m=0;m<y;++m)v[m]=p[m][0],g[m]=p[m][1];return v}return v.sort(n),v}function c(v){if(v.length===0)return[];for(var g=1,y=v.length,p=1;p<y;++p){var m=v[p];if(n(m,v[p-1])){if(p===g){g++;continue}v[g++]=m}}return v.length=g,v}function h(v,g){for(var y=0,p=v.length-1,m=-1;y<=p;){var w=y+p>>1,u=n(v[w],g);u<=0?(u===0&&(m=w),y=w+1):u>0&&(p=w-1)}return m}function f(v,g){for(var y=new Array(v.length),p=0,m=y.length;p<m;++p)y[p]=[];for(var w=[],u=(p=0,g.length);p<u;++p)for(var S=g[p],_=S.length,E=1,L=1<<_;E<L;++E){w.length=o.popCount(E);for(var C=0,P=0;P<_;++P)E&1<<P&&(w[C++]=S[P]);var I=h(v,w);if(!(I<0))for(;y[I++].push(p),!(I>=v.length||n(v[I],w)!==0););}return y}function b(v,g){if(g<0)return[];for(var y=[],p=(1<<g+1)-1,m=0;m<v.length;++m)for(var w=v[m],u=p;u<1<<w.length;u=o.nextCombination(u)){for(var S=new Array(g+1),_=0,E=0;E<w.length;++E)u&1<<E&&(S[_++]=w[E]);y.push(S)}return i(y)}s.dimension=function(v){for(var g=0,y=Math.max,p=0,m=v.length;p<m;++p)g=y(g,v[p].length);return g-1},s.countVertices=function(v){for(var g=-1,y=Math.max,p=0,m=v.length;p<m;++p)for(var w=v[p],u=0,S=w.length;u<S;++u)g=y(g,w[u]);return g+1},s.cloneCells=function(v){for(var g=new Array(v.length),y=0,p=v.length;y<p;++y)g[y]=v[y].slice(0);return g},s.compareCells=n,s.normalize=i,s.unique=c,s.findCell=h,s.incidence=f,s.dual=function(v,g){if(!g)return f(c(b(v,0)),v);for(var y=new Array(g),p=0;p<g;++p)y[p]=[];p=0;for(var m=v.length;p<m;++p)for(var w=v[p],u=0,S=w.length;u<S;++u)y[w[u]].push(p);return y},s.explode=function(v){for(var g=[],y=0,p=v.length;y<p;++y)for(var m=v[y],w=0|m.length,u=1,S=1<<w;u<S;++u){for(var _=[],E=0;E<w;++E)u>>>E&1&&_.push(m[E]);g.push(_)}return i(g)},s.skeleton=b,s.boundary=function(v){for(var g=[],y=0,p=v.length;y<p;++y)for(var m=v[y],w=0,u=m.length;w<u;++w){for(var S=new Array(m.length-1),_=0,E=0;_<u;++_)_!==w&&(S[E++]=m[_]);g.push(S)}return i(g)},s.connectedComponents=function(v,g){return g?function(y,p){for(var m=new r(p),w=0;w<y.length;++w)for(var u=y[w],S=0;S<u.length;++S)for(var _=S+1;_<u.length;++_)m.link(u[S],u[_]);var E=[],L=m.ranks;for(w=0;w<L.length;++w)L[w]=-1;for(w=0;w<y.length;++w){var C=m.find(y[w][0]);L[C]<0?(L[C]=E.length,E.push([y[w].slice(0)])):E[L[C]].push(y[w].slice(0))}return E}(v,g):function(y){for(var p=c(i(b(y,0))),m=new r(p.length),w=0;w<y.length;++w)for(var u=y[w],S=0;S<u.length;++S)for(var _=h(p,[u[S]]),E=S+1;E<u.length;++E)m.link(_,h(p,[u[E]]));var L=[],C=m.ranks;for(w=0;w<C.length;++w)C[w]=-1;for(w=0;w<y.length;++w){var P=m.find(h(p,[y[w][0]]));C[P]<0?(C[P]=L.length,L.push([y[w].slice(0)])):L[C[P]].push(y[w].slice(0))}return L}(v)}},9521:function(d){function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var o=0;o<t;++o)this.roots[o]=o,this.ranks[o]=0}d.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var o=this.roots;o[t]!==t;){var r=o[t];o[t]=o[r],t=r}return t},s.prototype.link=function(t,o){var r=this.find(t),n=this.find(o);if(r!==n){var a=this.ranks,i=this.roots,c=a[r],h=a[n];c<h?i[r]=n:h<c?i[n]=r:(i[n]=r,++a[r])}}},8243:function(d,s,t){d.exports=function(n,a,i){for(var c=a.length,h=n.length,f=new Array(c),b=new Array(c),v=new Array(c),g=new Array(c),y=0;y<c;++y)f[y]=b[y]=-1,v[y]=1/0,g[y]=!1;for(y=0;y<h;++y){var p=n[y];if(p.length!==2)throw new Error("Input must be a graph");var m=p[1],w=p[0];b[w]!==-1?b[w]=-2:b[w]=m,f[m]!==-1?f[m]=-2:f[m]=w}function u(G){if(g[G])return 1/0;var V,W,J,X=f[G],ee=b[G];return X<0||ee<0?1/0:(V=a[G],W=a[X],J=a[ee],Math.abs(o(V,W,J))/Math.sqrt(Math.pow(W[0]-J[0],2)+Math.pow(W[1]-J[1],2)))}function S(G,V){var W=z[G],J=z[V];z[G]=J,z[V]=W,H[W]=V,H[J]=G}function _(G){return v[z[G]]}function E(G){return 1&G?G-1>>1:(G>>1)-1}function L(G){for(var V=_(G);;){var W=V,J=2*G+1,X=2*(G+1),ee=G;if(J<F){var re=_(J);re<W&&(ee=J,W=re)}if(X<F&&_(X)<W&&(ee=X),ee===G)return G;S(G,ee),G=ee}}function C(G){for(var V=_(G);G>0;){var W=E(G);if(!(W>=0&&V<_(W)))return G;S(G,W),G=W}}function P(){if(F>0){var G=z[0];return S(0,F-1),F-=1,L(0),G}return-1}function I(G,V){var W=z[G];return v[W]===V?G:(v[W]=-1/0,C(G),P(),v[W]=V,C((F+=1)-1))}function U(G){if(!g[G]){g[G]=!0;var V=f[G],W=b[G];f[W]>=0&&(f[W]=V),b[V]>=0&&(b[V]=W),H[V]>=0&&I(H[V],u(V)),H[W]>=0&&I(H[W],u(W))}}var z=[],H=new Array(c);for(y=0;y<c;++y)(v[y]=u(y))<1/0?(H[y]=z.length,z.push(y)):H[y]=-1;var F=z.length;for(y=F>>1;y>=0;--y)L(y);for(;;){var N=P();if(N<0||v[N]>i)break;U(N)}var B=[];for(y=0;y<c;++y)g[y]||(H[y]=B.length,B.push(a[y].slice()));function j(G,V){if(G[V]<0)return V;var W=V,J=V;do{var X=G[J];if(!g[J]||X<0||X===J||(X=G[J=X],!g[J]||X<0||X===J))break;J=X,W=G[W]}while(W!==J);for(var ee=V;ee!==J;ee=G[ee])G[ee]=J;return J}B.length;var K=[];return n.forEach(function(G){var V=j(f,G[0]),W=j(b,G[1]);if(V>=0&&W>=0&&V!==W){var J=H[V],X=H[W];J!==X&&K.push([J,X])}}),r.unique(r.normalize(K)),{positions:B,edges:K}};var o=t(417),r=t(6656)},6638:function(d,s,t){d.exports=function(n,a){var i,c,h,f;if(a[0][0]<a[1][0])i=a[0],c=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);i=a[1],c=a[0]}if(n[0][0]<n[1][0])h=n[0],f=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);h=n[1],f=n[0]}var b=o(i,c,f),v=o(i,c,h);if(b<0){if(v<=0)return b}else if(b>0){if(v>=0)return b}else if(v)return v;if(b=o(f,h,c),v=o(f,h,i),b<0){if(v<=0)return b}else if(b>0){if(v>=0)return b}else if(v)return v;return c[0]-f[0]};var o=t(417);function r(n,a){var i,c,h,f;if(a[0][0]<a[1][0])i=a[0],c=a[1];else{if(!(a[0][0]>a[1][0])){var b=Math.min(n[0][1],n[1][1]),v=Math.max(n[0][1],n[1][1]),g=Math.min(a[0][1],a[1][1]),y=Math.max(a[0][1],a[1][1]);return v<g?v-g:b>y?b-y:v-y}i=a[1],c=a[0]}n[0][1]<n[1][1]?(h=n[0],f=n[1]):(h=n[1],f=n[0]);var p=o(c,i,h);return p||(p=o(c,i,f))||f-c}},4385:function(d,s,t){d.exports=function(v){for(var g=v.length,y=2*g,p=new Array(y),m=0;m<g;++m){var w=v[m],u=w[0][0]<w[1][0];p[2*m]=new b(w[0][0],w,u,m),p[2*m+1]=new b(w[1][0],w,!u,m)}p.sort(function(U,z){var H=U.x-z.x;return H||(H=U.create-z.create)||Math.min(U.segment[0][1],U.segment[1][1])-Math.min(z.segment[0][1],z.segment[1][1])});var S=r(a),_=[],E=[],L=[];for(m=0;m<y;){for(var C=p[m].x,P=[];m<y;){var I=p[m];if(I.x!==C)break;m+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(P.push(new f(I.segment[0][1],I.index,!0,!0)),P.push(new f(I.segment[1][1],I.index,!1,!1))):(P.push(new f(I.segment[1][1],I.index,!0,!1)),P.push(new f(I.segment[0][1],I.index,!1,!0)))):S=I.create?S.insert(I.segment,I.index):S.remove(I.segment)}_.push(S.root),E.push(C),L.push(P)}return new i(_,E,L)};var o=t(5070),r=t(7080),n=t(417),a=t(6638);function i(v,g,y){this.slabs=v,this.coordinates=g,this.horizontal=y}function c(v,g){return v.y-g}function h(v,g){for(var y=null;v;){var p,m,w=v.key;w[0][0]<w[1][0]?(p=w[0],m=w[1]):(p=w[1],m=w[0]);var u=n(p,m,g);if(u<0)v=v.left;else if(u>0)if(g[0]!==w[1][0])y=v,v=v.right;else{if(S=h(v.right,g))return S;v=v.left}else{if(g[0]!==w[1][0])return v;var S;if(S=h(v.right,g))return S;v=v.left}}return y}function f(v,g,y,p){this.y=v,this.index=g,this.start=y,this.closed=p}function b(v,g,y,p){this.x=v,this.segment=g,this.create=y,this.index=p}i.prototype.castUp=function(v){var g=o.le(this.coordinates,v[0]);if(g<0)return-1;this.slabs[g];var y=h(this.slabs[g],v),p=-1;if(y&&(p=y.value),this.coordinates[g]===v[0]){var m=null;if(y&&(m=y.key),g>0){var w=h(this.slabs[g-1],v);w&&(m?a(w.key,m)>0&&(m=w.key,p=w.value):(p=w.value,m=w.key))}var u=this.horizontal[g];if(u.length>0){var S=o.ge(u,v[1],c);if(S<u.length){var _=u[S];if(v[1]===_.y){if(_.closed)return _.index;for(;S<u.length-1&&u[S+1].y===v[1];)if((_=u[S+=1]).closed)return _.index;if(_.y===v[1]&&!_.start){if((S+=1)>=u.length)return p;_=u[S]}}if(_.start)if(m){var E=n(m[0],m[1],[v[0],_.y]);m[0][0]>m[1][0]&&(E=-E),E>0&&(p=_.index)}else p=_.index;else _.y!==v[1]&&(p=_.index)}}}return p}},4670:function(d,s,t){var o=t(9130),r=t(9662);function n(i,c){var h=r(o(i,c),[c[c.length-1]]);return h[h.length-1]}function a(i,c,h,f){var b=-c/(f-c);b<0?b=0:b>1&&(b=1);for(var v=1-b,g=i.length,y=new Array(g),p=0;p<g;++p)y[p]=b*i[p]+v*h[p];return y}d.exports=function(i,c){for(var h=[],f=[],b=n(i[i.length-1],c),v=i[i.length-1],g=i[0],y=0;y<i.length;++y,v=g){var p=n(g=i[y],c);if(b<0&&p>0||b>0&&p<0){var m=a(v,p,g,b);h.push(m),f.push(m.slice())}p<0?f.push(g.slice()):p>0?h.push(g.slice()):(h.push(g.slice()),f.push(g.slice())),b=p}return{positive:h,negative:f}},d.exports.positive=function(i,c){for(var h=[],f=n(i[i.length-1],c),b=i[i.length-1],v=i[0],g=0;g<i.length;++g,b=v){var y=n(v=i[g],c);(f<0&&y>0||f>0&&y<0)&&h.push(a(b,y,v,f)),y>=0&&h.push(v.slice()),f=y}return h},d.exports.negative=function(i,c){for(var h=[],f=n(i[i.length-1],c),b=i[i.length-1],v=i[0],g=0;g<i.length;++g,b=v){var y=n(v=i[g],c);(f<0&&y>0||f>0&&y<0)&&h.push(a(b,y,v,f)),y<=0&&h.push(v.slice()),f=y}return h}},8974:function(d,s,t){var o;(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(f){return i(h(f),arguments)}function a(f,b){return n.apply(null,[f].concat(b||[]))}function i(f,b){var v,g,y,p,m,w,u,S,_,E=1,L=f.length,C="";for(g=0;g<L;g++)if(typeof f[g]=="string")C+=f[g];else if(typeof f[g]=="object"){if((p=f[g]).keys)for(v=b[E],y=0;y<p.keys.length;y++){if(v==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',p.keys[y],p.keys[y-1]));v=v[p.keys[y]]}else v=p.param_no?b[p.param_no]:b[E++];if(r.not_type.test(p.type)&&r.not_primitive.test(p.type)&&v instanceof Function&&(v=v()),r.numeric_arg.test(p.type)&&typeof v!="number"&&isNaN(v))throw new TypeError(n("[sprintf] expecting number but found %T",v));switch(r.number.test(p.type)&&(S=v>=0),p.type){case"b":v=parseInt(v,10).toString(2);break;case"c":v=String.fromCharCode(parseInt(v,10));break;case"d":case"i":v=parseInt(v,10);break;case"j":v=JSON.stringify(v,null,p.width?parseInt(p.width):0);break;case"e":v=p.precision?parseFloat(v).toExponential(p.precision):parseFloat(v).toExponential();break;case"f":v=p.precision?parseFloat(v).toFixed(p.precision):parseFloat(v);break;case"g":v=p.precision?String(Number(v.toPrecision(p.precision))):parseFloat(v);break;case"o":v=(parseInt(v,10)>>>0).toString(8);break;case"s":v=String(v),v=p.precision?v.substring(0,p.precision):v;break;case"t":v=String(!!v),v=p.precision?v.substring(0,p.precision):v;break;case"T":v=Object.prototype.toString.call(v).slice(8,-1).toLowerCase(),v=p.precision?v.substring(0,p.precision):v;break;case"u":v=parseInt(v,10)>>>0;break;case"v":v=v.valueOf(),v=p.precision?v.substring(0,p.precision):v;break;case"x":v=(parseInt(v,10)>>>0).toString(16);break;case"X":v=(parseInt(v,10)>>>0).toString(16).toUpperCase()}r.json.test(p.type)?C+=v:(!r.number.test(p.type)||S&&!p.sign?_="":(_=S?"+":"-",v=v.toString().replace(r.sign,"")),w=p.pad_char?p.pad_char==="0"?"0":p.pad_char.charAt(1):" ",u=p.width-(_+v).length,m=p.width&&u>0?w.repeat(u):"",C+=p.align?_+v+m:w==="0"?_+m+v:m+_+v)}return C}var c=Object.create(null);function h(f){if(c[f])return c[f];for(var b,v=f,g=[],y=0;v;){if((b=r.text.exec(v))!==null)g.push(b[0]);else if((b=r.modulo.exec(v))!==null)g.push("%");else{if((b=r.placeholder.exec(v))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(b[2]){y|=1;var p=[],m=b[2],w=[];if((w=r.key.exec(m))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(p.push(w[1]);(m=m.substring(w[0].length))!=="";)if((w=r.key_access.exec(m))!==null)p.push(w[1]);else{if((w=r.index_access.exec(m))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");p.push(w[1])}b[2]=p}else y|=2;if(y===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:b[0],param_no:b[1],keys:b[2],sign:b[3],pad_char:b[4],align:b[5],width:b[6],precision:b[7],type:b[8]})}v=v.substring(b[0].length)}return c[f]=g}s.sprintf=n,s.vsprintf=a,typeof window<"u"&&(window.sprintf=n,window.vsprintf=a,(o=function(){return{sprintf:n,vsprintf:a}}.call(s,t,s,d))===void 0||(d.exports=o))})()},4162:function(d,s,t){d.exports=function(i,c){if(i.dimension<=0)return{positions:[],cells:[]};if(i.dimension===1)return function(b,v){for(var g=r(b,v),y=g.length,p=new Array(y),m=new Array(y),w=0;w<y;++w)p[w]=[g[w]],m[w]=[w];return{positions:p,cells:m}}(i,c);var h=i.order.join()+"-"+i.dtype,f=a[h];return c=+c||0,f||(f=a[h]=function(b,v){var g=b.length+"d",y=n[g];if(y)return y(o,b,v)}(i.order,i.dtype)),f(i,c)};var o=t(9284),r=t(9584),n={"2d":function(i,c,h){var f=i({order:c,scalarArguments:3,getters:h==="generic"?[0]:void 0,phase:function(b,v,g,y){return b>y|0},vertex:function(b,v,g,y,p,m,w,u,S,_,E,L,C){var P=(w<<0)+(u<<1)+(S<<2)+(_<<3)|0;if(P!==0&&P!==15)switch(P){case 0:case 15:E.push([b-.5,v-.5]);break;case 1:E.push([b-.25-.25*(y+g-2*C)/(g-y),v-.25-.25*(p+g-2*C)/(g-p)]);break;case 2:E.push([b-.75-.25*(-y-g+2*C)/(y-g),v-.25-.25*(m+y-2*C)/(y-m)]);break;case 3:E.push([b-.5,v-.5-.5*(p+g+m+y-4*C)/(g-p+y-m)]);break;case 4:E.push([b-.25-.25*(m+p-2*C)/(p-m),v-.75-.25*(-p-g+2*C)/(p-g)]);break;case 5:E.push([b-.5-.5*(y+g+m+p-4*C)/(g-y+p-m),v-.5]);break;case 6:E.push([b-.5-.25*(-y-g+m+p)/(y-g+p-m),v-.5-.25*(-p-g+m+y)/(p-g+y-m)]);break;case 7:E.push([b-.75-.25*(m+p-2*C)/(p-m),v-.75-.25*(m+y-2*C)/(y-m)]);break;case 8:E.push([b-.75-.25*(-m-p+2*C)/(m-p),v-.75-.25*(-m-y+2*C)/(m-y)]);break;case 9:E.push([b-.5-.25*(y+g+-m-p)/(g-y+m-p),v-.5-.25*(p+g+-m-y)/(g-p+m-y)]);break;case 10:E.push([b-.5-.5*(-y-g-m-p+4*C)/(y-g+m-p),v-.5]);break;case 11:E.push([b-.25-.25*(-m-p+2*C)/(m-p),v-.75-.25*(p+g-2*C)/(g-p)]);break;case 12:E.push([b-.5,v-.5-.5*(-p-g-m-y+4*C)/(p-g+m-y)]);break;case 13:E.push([b-.75-.25*(y+g-2*C)/(g-y),v-.25-.25*(-m-y+2*C)/(m-y)]);break;case 14:E.push([b-.25-.25*(-y-g+2*C)/(y-g),v-.25-.25*(-p-g+2*C)/(p-g)])}},cell:function(b,v,g,y,p,m,w,u,S){p?u.push([b,v]):u.push([v,b])}});return function(b,v){var g=[],y=[];return f(b,g,y,v),{positions:g,cells:y}}}},a={}},6946:function(d,s,t){d.exports=function a(i,c,h){h=h||{};var f=n[i];f||(f=n[i]={" ":{data:new Float32Array(0),shape:.2}});var b=f[c];if(!b)if(c.length<=1||!/\d/.test(c))b=f[c]=function(L){for(var C=L.cells,P=L.positions,I=new Float32Array(6*C.length),U=0,z=0,H=0;H<C.length;++H)for(var F=C[H],N=0;N<3;++N){var B=P[F[N]];I[U++]=B[0],I[U++]=B[1]+1.4,z=Math.max(B[0],z)}return{data:I,shape:z}}(o(c,{triangles:!0,font:i,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=c.split(/(\d|\s)/),g=new Array(v.length),y=0,p=0,m=0;m<v.length;++m)g[m]=a(i,v[m]),y+=g[m].data.length,p+=g[m].shape,m>0&&(p+=.02);var w=new Float32Array(y),u=0,S=-.5*p;for(m=0;m<g.length;++m){for(var _=g[m].data,E=0;E<_.length;E+=2)w[u++]=_[E]+S,w[u++]=_[E+1];S+=g[m].shape+.02}b=f[c]={data:w,shape:p}}return b};var o=t(875),r=window||k.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},14:function(d,s,t){var o=t(4405);function r(a,i){var c=o(getComputedStyle(a).getPropertyValue(i));return c[0]*n(c[1],a)}function n(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),i!==window&&i!==document||(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return function(c,h){var f=document.createElement("div");f.style["font-size"]="128"+c,h.appendChild(f);var b=r(f,"font-size")/128;return h.removeChild(f),b}(a,i);case"em":return r(i,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 37.79527559055118;case"mm":return 3.7795275590551185;case"pt":return 1.3333333333333333;case"pc":return 16}return 1}d.exports=n},3440:function(d,s,t){d.exports=function(p){var m=(p=p||{}).center||[0,0,0],w=p.up||[0,1,0],u=p.right||b(w),S=p.radius||1,_=p.theta||0,E=p.phi||0;if(m=[].slice.call(m,0,3),w=[].slice.call(w,0,3),i(w,w),u=[].slice.call(u,0,3),i(u,u),"eye"in p){var L=p.eye,C=[L[0]-m[0],L[1]-m[1],L[2]-m[2]];a(u,C,w),h(u[0],u[1],u[2])<1e-6?u=b(w):i(u,u),S=h(C[0],C[1],C[2]);var P=c(w,C)/S,I=c(u,C)/S;E=Math.acos(P),_=Math.acos(I)}return S=Math.log(S),new v(p.zoomMin,p.zoomMax,m,w,u,S,_,E)};var o=t(8444),r=t(7437),n=t(4422),a=t(903),i=t(899),c=t(9305);function h(p,m,w){return Math.sqrt(Math.pow(p,2)+Math.pow(m,2)+Math.pow(w,2))}function f(p){return Math.min(1,Math.max(-1,p))}function b(p){var m=Math.abs(p[0]),w=Math.abs(p[1]),u=Math.abs(p[2]),S=[0,0,0];m>Math.max(w,u)?S[2]=1:w>Math.max(m,u)?S[0]=1:S[1]=1;for(var _=0,E=0,L=0;L<3;++L)_+=p[L]*p[L],E+=S[L]*p[L];for(L=0;L<3;++L)S[L]-=E/_*p[L];return i(S,S),S}function v(p,m,w,u,S,_,E,L){this.center=o(w),this.up=o(u),this.right=o(S),this.radius=o([_]),this.angle=o([E,L]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(p,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var g=v.prototype;g.setDistanceLimits=function(p,m){p=p>0?Math.log(p):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=m},g.getDistanceLimits=function(p){var m=this.radius.bounds[0];return p?(p[0]=Math.exp(m[0][0]),p[1]=Math.exp(m[1][0]),p):[Math.exp(m[0][0]),Math.exp(m[1][0])]},g.recalcMatrix=function(p){this.center.curve(p),this.up.curve(p),this.right.curve(p),this.radius.curve(p),this.angle.curve(p);for(var m=this.computedUp,w=this.computedRight,u=0,S=0,_=0;_<3;++_)S+=m[_]*w[_],u+=m[_]*m[_];var E=Math.sqrt(u),L=0;for(_=0;_<3;++_)w[_]-=m[_]*S/u,L+=w[_]*w[_],m[_]/=E;var C=Math.sqrt(L);for(_=0;_<3;++_)w[_]/=C;var P=this.computedToward;a(P,m,w),i(P,P);var I=Math.exp(this.computedRadius[0]),U=this.computedAngle[0],z=this.computedAngle[1],H=Math.cos(U),F=Math.sin(U),N=Math.cos(z),B=Math.sin(z),j=this.computedCenter,K=H*N,G=F*N,V=B,W=-H*B,J=-F*B,X=N,ee=this.computedEye,re=this.computedMatrix;for(_=0;_<3;++_){var ie=K*w[_]+G*P[_]+V*m[_];re[4*_+1]=W*w[_]+J*P[_]+X*m[_],re[4*_+2]=ie,re[4*_+3]=0}var se=re[1],fe=re[5],ye=re[9],ge=re[2],he=re[6],ve=re[10],Ie=fe*ve-ye*he,xe=ye*ge-se*ve,Ae=se*he-fe*ge,Se=h(Ie,xe,Ae);for(Ie/=Se,xe/=Se,Ae/=Se,re[0]=Ie,re[4]=xe,re[8]=Ae,_=0;_<3;++_)ee[_]=j[_]+re[2+4*_]*I;for(_=0;_<3;++_){L=0;for(var Te=0;Te<3;++Te)L+=re[_+4*Te]*ee[Te];re[12+_]=-L}re[15]=1},g.getMatrix=function(p,m){this.recalcMatrix(p);var w=this.computedMatrix;if(m){for(var u=0;u<16;++u)m[u]=w[u];return m}return w};var y=[0,0,0];g.rotate=function(p,m,w,u){if(this.angle.move(p,m,w),u){this.recalcMatrix(p);var S=this.computedMatrix;y[0]=S[2],y[1]=S[6],y[2]=S[10];for(var _=this.computedUp,E=this.computedRight,L=this.computedToward,C=0;C<3;++C)S[4*C]=_[C],S[4*C+1]=E[C],S[4*C+2]=L[C];for(n(S,S,u,y),C=0;C<3;++C)_[C]=S[4*C],E[C]=S[4*C+1];this.up.set(p,_[0],_[1],_[2]),this.right.set(p,E[0],E[1],E[2])}},g.pan=function(p,m,w,u){m=m||0,w=w||0,u=u||0,this.recalcMatrix(p);var S=this.computedMatrix,_=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],L=S[9],C=h(_,E,L);_/=C,E/=C,L/=C;var P=S[0],I=S[4],U=S[8],z=P*_+I*E+U*L,H=h(P-=_*z,I-=E*z,U-=L*z),F=(P/=H)*m+_*w,N=(I/=H)*m+E*w,B=(U/=H)*m+L*w;this.center.move(p,F,N,B);var j=Math.exp(this.computedRadius[0]);j=Math.max(1e-4,j+u),this.radius.set(p,Math.log(j))},g.translate=function(p,m,w,u){this.center.move(p,m||0,w||0,u||0)},g.setMatrix=function(p,m,w,u){var S=1;typeof w=="number"&&(S=0|w),(S<0||S>3)&&(S=1);var _=(S+2)%3;m||(this.recalcMatrix(p),m=this.computedMatrix);var E=m[S],L=m[S+4],C=m[S+8];if(u){var P=Math.abs(E),I=Math.abs(L),U=Math.abs(C),z=Math.max(P,I,U);P===z?(E=E<0?-1:1,L=C=0):U===z?(C=C<0?-1:1,E=L=0):(L=L<0?-1:1,E=C=0)}else{var H=h(E,L,C);E/=H,L/=H,C/=H}var F,N,B=m[_],j=m[_+4],K=m[_+8],G=B*E+j*L+K*C,V=h(B-=E*G,j-=L*G,K-=C*G),W=L*(K/=V)-C*(j/=V),J=C*(B/=V)-E*K,X=E*j-L*B,ee=h(W,J,X);if(W/=ee,J/=ee,X/=ee,this.center.jump(p,me,Me,Re),this.radius.idle(p),this.up.jump(p,E,L,C),this.right.jump(p,B,j,K),S===2){var re=m[1],ie=m[5],se=m[9],fe=re*B+ie*j+se*K,ye=re*W+ie*J+se*X;F=Ie<0?-Math.PI/2:Math.PI/2,N=Math.atan2(ye,fe)}else{var ge=m[2],he=m[6],ve=m[10],Ie=ge*E+he*L+ve*C,xe=ge*B+he*j+ve*K,Ae=ge*W+he*J+ve*X;F=Math.asin(f(Ie)),N=Math.atan2(Ae,xe)}this.angle.jump(p,N,F),this.recalcMatrix(p);var Se=m[2],Te=m[6],Q=m[10],oe=this.computedMatrix;r(oe,m);var ce=oe[15],me=oe[12]/ce,Me=oe[13]/ce,Re=oe[14]/ce,Ce=Math.exp(this.computedRadius[0]);this.center.jump(p,me-Se*Ce,Me-Te*Ce,Re-Q*Ce)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(p){this.center.idle(p),this.up.idle(p),this.right.idle(p),this.radius.idle(p),this.angle.idle(p)},g.flush=function(p){this.center.flush(p),this.up.flush(p),this.right.flush(p),this.radius.flush(p),this.angle.flush(p)},g.setDistance=function(p,m){m>0&&this.radius.set(p,Math.log(m))},g.lookAt=function(p,m,w,u){this.recalcMatrix(p),m=m||this.computedEye,w=w||this.computedCenter;var S=(u=u||this.computedUp)[0],_=u[1],E=u[2],L=h(S,_,E);if(!(L<1e-6)){S/=L,_/=L,E/=L;var C=m[0]-w[0],P=m[1]-w[1],I=m[2]-w[2],U=h(C,P,I);if(!(U<1e-6)){C/=U,P/=U,I/=U;var z=this.computedRight,H=z[0],F=z[1],N=z[2],B=S*H+_*F+E*N,j=h(H-=B*S,F-=B*_,N-=B*E);if(!(j<.01&&(j=h(H=_*I-E*P,F=E*C-S*I,N=S*P-_*C))<1e-6)){H/=j,F/=j,N/=j,this.up.set(p,S,_,E),this.right.set(p,H,F,N),this.center.set(p,w[0],w[1],w[2]),this.radius.set(p,Math.log(U));var K=_*N-E*F,G=E*H-S*N,V=S*F-_*H,W=h(K,G,V),J=S*C+_*P+E*I,X=H*C+F*P+N*I,ee=(K/=W)*C+(G/=W)*P+(V/=W)*I,re=Math.asin(f(J)),ie=Math.atan2(ee,X),se=this.angle._state,fe=se[se.length-1],ye=se[se.length-2];fe%=2*Math.PI;var ge=Math.abs(fe+2*Math.PI-ie),he=Math.abs(fe-ie),ve=Math.abs(fe-2*Math.PI-ie);ge<he&&(fe+=2*Math.PI),ve<he&&(fe-=2*Math.PI),this.angle.jump(this.angle.lastT(),fe,ye),this.angle.set(p,ie,re)}}}}},9660:function(d){d.exports=function(t,o,r){var n=t*o,a=s*t,i=a-(a-t),c=t-i,h=s*o,f=h-(h-o),b=o-f,v=c*b-(n-i*f-c*f-i*b);return r?(r[0]=v,r[1]=n,r):[v,n]};var s=+(Math.pow(2,27)+1)},87:function(d){d.exports=function(s,t,o){var r=s+t,n=r-s,a=t-n,i=s-(r-n);return o?(o[0]=i+a,o[1]=r,o):[i+a,r]}},5306:function(d,s,t){var o=t(2288),r=t(3094),n=t(2146).lW;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var a=typeof Uint8ClampedArray<"u",i=typeof BigUint64Array<"u",c=typeof BigInt64Array<"u",h=t.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=r([32,0])),h.BIGUINT64||(h.BIGUINT64=r([32,0])),h.BIGINT64||(h.BIGINT64=r([32,0])),h.BUFFER||(h.BUFFER=r([32,0]));var f=h.DATA,b=h.BUFFER;function v(z){if(z){var H=z.length||z.byteLength,F=o.log2(H);f[F].push(z)}}function g(z){z=o.nextPow2(z);var H=o.log2(z),F=f[H];return F.length>0?F.pop():new ArrayBuffer(z)}function y(z){return new Uint8Array(g(z),0,z)}function p(z){return new Uint16Array(g(2*z),0,z)}function m(z){return new Uint32Array(g(4*z),0,z)}function w(z){return new Int8Array(g(z),0,z)}function u(z){return new Int16Array(g(2*z),0,z)}function S(z){return new Int32Array(g(4*z),0,z)}function _(z){return new Float32Array(g(4*z),0,z)}function E(z){return new Float64Array(g(8*z),0,z)}function L(z){return a?new Uint8ClampedArray(g(z),0,z):y(z)}function C(z){return i?new BigUint64Array(g(8*z),0,z):null}function P(z){return c?new BigInt64Array(g(8*z),0,z):null}function I(z){return new DataView(g(z),0,z)}function U(z){z=o.nextPow2(z);var H=o.log2(z),F=b[H];return F.length>0?F.pop():new n(z)}s.free=function(z){if(n.isBuffer(z))b[o.log2(z.length)].push(z);else{if(Object.prototype.toString.call(z)!=="[object ArrayBuffer]"&&(z=z.buffer),!z)return;var H=z.length||z.byteLength,F=0|o.log2(H);f[F].push(z)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(z){v(z.buffer)},s.freeArrayBuffer=v,s.freeBuffer=function(z){b[o.log2(z.length)].push(z)},s.malloc=function(z,H){if(H===void 0||H==="arraybuffer")return g(z);switch(H){case"uint8":return y(z);case"uint16":return p(z);case"uint32":return m(z);case"int8":return w(z);case"int16":return u(z);case"int32":return S(z);case"float":case"float32":return _(z);case"double":case"float64":return E(z);case"uint8_clamped":return L(z);case"bigint64":return P(z);case"biguint64":return C(z);case"buffer":return U(z);case"data":case"dataview":return I(z);default:return null}return null},s.mallocArrayBuffer=g,s.mallocUint8=y,s.mallocUint16=p,s.mallocUint32=m,s.mallocInt8=w,s.mallocInt16=u,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=_,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=L,s.mallocBigUint64=C,s.mallocBigInt64=P,s.mallocDataView=I,s.mallocBuffer=U,s.clearCache=function(){for(var z=0;z<32;++z)h.UINT8[z].length=0,h.UINT16[z].length=0,h.UINT32[z].length=0,h.INT8[z].length=0,h.INT16[z].length=0,h.INT32[z].length=0,h.FLOAT[z].length=0,h.DOUBLE[z].length=0,h.BIGUINT64[z].length=0,h.BIGINT64[z].length=0,h.UINT8C[z].length=0,f[z].length=0,b[z].length=0}},1731:function(d){function s(o){this.roots=new Array(o),this.ranks=new Array(o);for(var r=0;r<o;++r)this.roots[r]=r,this.ranks[r]=0}d.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},t.find=function(o){for(var r=o,n=this.roots;n[o]!==o;)o=n[o];for(;n[r]!==o;){var a=n[r];n[r]=o,r=a}return o},t.link=function(o,r){var n=this.find(o),a=this.find(r);if(n!==a){var i=this.ranks,c=this.roots,h=i[n],f=i[a];h<f?c[n]=a:f<h?c[a]=n:(c[a]=n,++i[n])}}},1215:function(d){d.exports=function(s,t,o){return s.length===0?s:t?(o||s.sort(t),function(r,n){for(var a=1,i=r.length,c=r[0],h=r[0],f=1;f<i;++f)if(h=c,n(c=r[f],h)){if(f===a){a++;continue}r[a++]=c}return r.length=a,r}(s,t)):(o||s.sort(),function(r){for(var n=1,a=r.length,i=r[0],c=r[0],h=1;h<a;++h,c=i)if(c=i,(i=r[h])!==c){if(h===n){n++;continue}r[n++]=i}return r.length=n,r}(s))}},875:function(d,s,t){d.exports=function(a,i){return typeof i=="object"&&i!==null||(i={}),o(a,i.canvas||r,i.context||n,i)};var o=t(712),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},712:function(d,s,t){d.exports=function(p,m,w,u){var S=64,_=1.25,E={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return u&&(u.size&&u.size>0&&(S=u.size),u.lineSpacing&&u.lineSpacing>0&&(_=u.lineSpacing),u.styletags&&u.styletags.breaklines&&(E.breaklines=!!u.styletags.breaklines),u.styletags&&u.styletags.bolds&&(E.bolds=!!u.styletags.bolds),u.styletags&&u.styletags.italics&&(E.italics=!!u.styletags.italics),u.styletags&&u.styletags.subscripts&&(E.subscripts=!!u.styletags.subscripts),u.styletags&&u.styletags.superscripts&&(E.superscripts=!!u.styletags.superscripts)),w.font=[u.fontStyle,u.fontVariant,u.fontWeight,S+"px",u.font].filter(function(L){return L}).join(" "),w.textAlign="start",w.textBaseline="alphabetic",w.direction="ltr",y(function(L,C,P,I,U,z){P=P.replace(/\n/g,""),P=z.breaklines===!0?P.replace(/\<br\>/g,`
`):P.replace(/\<br\>/g," ");var H="",F=[];for(K=0;K<P.length;++K)F[K]=H;z.bolds===!0&&(F=b("b",h,P,F)),z.italics===!0&&(F=b("i",f,P,F)),z.superscripts===!0&&(F=b("sup","+1",P,F)),z.subscripts===!0&&(F=b("sub","-1",P,F));var N=[],B="";for(K=0;K<P.length;++K)F[K]!==null&&(B+=P[K],N.push(F[K]));var j,K,G,V,W,J=B.split(`
`),X=J.length,ee=Math.round(U*I),re=I,ie=2*I,se=0,fe=X*ee+ie;L.height<fe&&(L.height=fe),C.fillStyle="#000",C.fillRect(0,0,L.width,L.height),C.fillStyle="#fff";var ye=0,ge="";function he(){if(ge!==""){var oe=C.measureText(ge).width;C.fillText(ge,re+G,ie+V),G+=oe}}function ve(){return Math.round(W)+"px "}function Ie(oe,ce){var me=""+C.font;if(z.subscripts===!0){var Me=oe.indexOf("-"),Re=ce.indexOf("-"),Ce=Me>-1?parseInt(oe[1+Me]):0,ze=Re>-1?parseInt(ce[1+Re]):0;Ce!==ze&&(me=me.replace(ve(),"?px "),W*=Math.pow(.75,ze-Ce),me=me.replace("?px ",ve())),V+=.25*ee*(ze-Ce)}if(z.superscripts===!0){var le=oe.indexOf("+"),de=ce.indexOf("+"),be=le>-1?parseInt(oe[1+le]):0,Fe=de>-1?parseInt(ce[1+de]):0;be!==Fe&&(me=me.replace(ve(),"?px "),W*=Math.pow(.75,Fe-be),me=me.replace("?px ",ve())),V-=.25*ee*(Fe-be)}if(z.bolds===!0){var Ve=oe.indexOf(h)>-1,He=ce.indexOf(h)>-1;!Ve&&He&&(me=rt?me.replace("italic ","italic bold "):"bold "+me),Ve&&!He&&(me=me.replace("bold ",""))}if(z.italics===!0){var rt=oe.indexOf(f)>-1,tt=ce.indexOf(f)>-1;!rt&&tt&&(me="italic "+me),rt&&!tt&&(me=me.replace("italic ",""))}C.font=me}for(j=0;j<X;++j){var xe=J[j]+`
`;for(G=0,V=j*ee,W=I,ge="",K=0;K<xe.length;++K){var Ae=K+ye<N.length?N[K+ye]:N[N.length-1];H===Ae?ge+=xe[K]:(he(),ge=xe[K],Ae!==void 0&&(Ie(H,Ae),H=Ae))}he(),ye+=xe.length;var Se=0|Math.round(G+2*re);se<Se&&(se=Se)}var Te=se,Q=ie+ee*X;return r(C.getImageData(0,0,Te,Q).data,[Q,Te,4]).pick(-1,-1,0).transpose(1,0)}(m,w,p,S,_,E),u,S)},d.exports.processPixels=y;var o=t(4162),r=t(5050),n=t(8243),a=t(197),i=t(7761),c=t(8040),h="b|",f="i|";function b(p,m,w,u){for(var S="<"+p+">",_="</"+p+">",E=S.length,L=_.length,C=m[0]==="+"||m[0]==="-",P=0,I=-L;P>-1&&(P=w.indexOf(S,P))!==-1&&(I=w.indexOf(_,P+E))!==-1&&!(I<=P);){for(var U=P;U<I+L;++U)if(U<P+E||U>=I)u[U]=null,w=w.substr(0,U)+" "+w.substr(U+1);else if(u[U]!==null){var z=u[U].indexOf(m[0]);z===-1?u[U]+=m:C&&(u[U]=u[U].substr(0,z+1)+(1+parseInt(u[U][z+1]))+u[U].substr(z+2))}var H=P+E,F=w.substr(H,I-H).indexOf(S);P=F!==-1?F:I+L}return u}function v(p,m){var w=o(p,128);return m?n(w.cells,w.positions,.25):{edges:w.cells,positions:w.positions}}function g(p,m,w,u){var S=v(p,u),_=function(j,K,G){for(var V=K.textAlign||"start",W=K.textBaseline||"alphabetic",J=[1<<30,1<<30],X=[0,0],ee=j.length,re=0;re<ee;++re)for(var ie=j[re],se=0;se<2;++se)J[se]=0|Math.min(J[se],ie[se]),X[se]=0|Math.max(X[se],ie[se]);var fe=0;switch(V){case"center":fe=-.5*(J[0]+X[0]);break;case"right":case"end":fe=-X[0];break;case"left":case"start":fe=-J[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+V+"'")}var ye=0;switch(W){case"hanging":case"top":ye=-J[1];break;case"middle":ye=-.5*(J[1]+X[1]);break;case"alphabetic":case"ideographic":ye=-3*G;break;case"bottom":ye=-X[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+W+"'")}var ge=1/G;return"lineHeight"in K?ge*=+K.lineHeight:"width"in K?ge=K.width/(X[0]-J[0]):"height"in K&&(ge=K.height/(X[1]-J[1])),j.map(function(he){return[ge*(he[0]+fe),ge*(he[1]+ye)]})}(S.positions,m,w),E=S.edges,L=m.orientation==="ccw";if(a(_,E),m.polygons||m.polygon||m.polyline){for(var C=c(E,_),P=new Array(C.length),I=0;I<C.length;++I){for(var U=C[I],z=new Array(U.length),H=0;H<U.length;++H){for(var F=U[H],N=new Array(F.length),B=0;B<F.length;++B)N[B]=_[F[B]].slice();L&&N.reverse(),z[H]=N}P[I]=z}return P}return m.triangles||m.triangulate||m.triangle?{cells:i(_,E,{delaunay:!1,exterior:!1,interior:!0}),positions:_}:{edges:E,positions:_}}function y(p,m,w){try{return g(p,m,w,!0)}catch{}try{return g(p,m,w,!1)}catch{}return m.polygons||m.polyline||m.polygon?[]:m.triangles||m.triangulate||m.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(d){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=m);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var o=new t,r=Object.freeze({});if(o.set(r,1),o.get(r)===1)return void(d.exports=WeakMap);s=!0}}var n=Object.getOwnPropertyNames,a=Object.defineProperty,i=Object.isExtensible,c="weakmap:",h="weakmap:ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var f=new ArrayBuffer(25),b=new Uint8Array(f);crypto.getRandomValues(b),h="weakmap:rand:"+Array.prototype.map.call(b,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(w)}}),"getPropertyNames"in Object){var v=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return v(E).filter(w)}})}(function(){var E=Object.freeze;a(Object,"freeze",{value:function(P){return u(P),E(P)}});var L=Object.seal;a(Object,"seal",{value:function(P){return u(P),L(P)}});var C=Object.preventExtensions;a(Object,"preventExtensions",{value:function(P){return u(P),C(P)}})})();var g=!1,y=0,p=function(){this instanceof p||_();var E=[],L=[],C=y++;return Object.create(p.prototype,{get___:{value:S(function(P,I){var U,z=u(P);return z?C in z?z[C]:I:(U=E.indexOf(P))>=0?L[U]:I})},has___:{value:S(function(P){var I=u(P);return I?C in I:E.indexOf(P)>=0})},set___:{value:S(function(P,I){var U,z=u(P);return z?z[C]=I:(U=E.indexOf(P))>=0?L[U]=I:(U=E.length,L[U]=I,E[U]=P),this})},delete___:{value:S(function(P){var I,U,z=u(P);return z?C in z&&delete z[C]:!((I=E.indexOf(P))<0||(U=E.length-1,E[I]=void 0,L[I]=L[U],E[I]=E[U],E.length=U,L.length=U,0))})}})};p.prototype=Object.create(Object.prototype,{get:{value:function(E,L){return this.get___(E,L)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,L){return this.set___(E,L)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof p||_();var L,C=new t,P=void 0,I=!1;return L=s?function(U,z){return C.set(U,z),C.has(U)||(P||(P=new p),P.set(U,z)),this}:function(U,z){if(I)try{C.set(U,z)}catch{P||(P=new p),P.set___(U,z)}else C.set(U,z);return this},Object.create(p.prototype,{get___:{value:S(function(U,z){return P?C.has(U)?C.get(U):P.get___(U,z):C.get(U,z)})},has___:{value:S(function(U){return C.has(U)||!!P&&P.has___(U)})},set___:{value:S(L)},delete___:{value:S(function(U){var z=!!C.delete(U);return P&&P.delete___(U)||z})},permitHostObjects___:{value:S(function(U){if(U!==m)throw new Error("bogus call to permitHostObjects___");I=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=p.prototype,d.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),d.exports=p)}function m(E){E.permitHostObjects___&&E.permitHostObjects___(m)}function w(E){return!(E.substr(0,c.length)==c&&E.substr(E.length-3)==="___")}function u(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var L=E[h];if(L&&L.key===E)return L;if(i(E)){L={key:E};try{return a(E,h,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function _(){g||typeof console>"u"||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(d,s,t){var o=t(7178);d.exports=function(){var r={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:o(n,r)}}},7178:function(d){d.exports=function(s,t){var o={identity:t},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(n){return n!==t?r.apply(this,arguments):o},writable:!0}),o}},4037:function(d,s,t){var o=t(9222);d.exports=function(){var r=o();return{get:function(n,a){var i=r(n);return i.hasOwnProperty("value")?i.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},6183:function(d){d.exports=function(s){var t={};return function(o,r,n){var a=o.dtype,i=o.order,c=[a,i.join()].join(),h=t[c];return h||(t[c]=h=s([a,i])),h(o.shape.slice(0),o.data,o.stride,0|o.offset,r,n)}}(function(){return function(s,t,o,r,n,a){var i=s[0],c=o[0],h=[0],f=c;r|=0;var b=0,v=c;for(b=0;b<i;++b){var g=t[r]-a,y=t[r+f]-a;g>=0!=y>=0&&n.push(h[0]+.5+.5*(g+y)/(g-y)),r+=v,++h[0]}}}.bind(void 0,{funcName:"zeroCrossings"}))},9584:function(d,s,t){d.exports=function(r,n){var a=[];return n=+n||0,o(r.hi(r.shape[0]-1),a,n),a};var o=t(6183)},6601:function(){}},T={};function x(d){var s=T[d];if(s!==void 0)return s.exports;var t=T[d]={id:d,loaded:!1,exports:{}};return l[d].call(t.exports,t,t.exports,x),t.loaded=!0,t.exports}return x.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),x.nmd=function(d){return d.paths=[],d.children||(d.children=[]),d},x(7386)}()},$.exports=A()},12856:function($,R,e){function A(Q,oe){if(!(Q instanceof oe))throw new TypeError("Cannot call a class as a function")}function k(Q,oe){for(var ce=0;ce<oe.length;ce++){var me=oe[ce];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(Q,me.key,me)}}function l(Q,oe){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ce,me){return ce.__proto__=me,ce},l(Q,oe)}function T(Q,oe){if(oe&&(s(oe)==="object"||typeof oe=="function"))return oe;if(oe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(Q)}function x(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function d(Q){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},d(Q)}function s(Q){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},s(Q)}var t=e(95341),o=e(95280),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;R.Buffer=i,R.SlowBuffer=function(Q){return+Q!=Q&&(Q=0),i.alloc(+Q)},R.INSPECT_MAX_BYTES=50;var n=2147483647;function a(Q){if(Q>n)throw new RangeError('The value "'+Q+'" is invalid for option "size"');var oe=new Uint8Array(Q);return Object.setPrototypeOf(oe,i.prototype),oe}function i(Q,oe,ce){if(typeof Q=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(Q)}return c(Q,oe,ce)}function c(Q,oe,ce){if(typeof Q=="string")return function(Re,Ce){if(typeof Ce=="string"&&Ce!==""||(Ce="utf8"),!i.isEncoding(Ce))throw new TypeError("Unknown encoding: "+Ce);var ze=0|y(Re,Ce),le=a(ze),de=le.write(Re,Ce);return de!==ze&&(le=le.slice(0,de)),le}(Q,oe);if(ArrayBuffer.isView(Q))return function(Re){if(Ie(Re,Uint8Array)){var Ce=new Uint8Array(Re);return v(Ce.buffer,Ce.byteOffset,Ce.byteLength)}return b(Re)}(Q);if(Q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s(Q));if(Ie(Q,ArrayBuffer)||Q&&Ie(Q.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ie(Q,SharedArrayBuffer)||Q&&Ie(Q.buffer,SharedArrayBuffer)))return v(Q,oe,ce);if(typeof Q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=Q.valueOf&&Q.valueOf();if(me!=null&&me!==Q)return i.from(me,oe,ce);var Me=function(Re){if(i.isBuffer(Re)){var Ce=0|g(Re.length),ze=a(Ce);return ze.length===0||Re.copy(ze,0,0,Ce),ze}return Re.length!==void 0?typeof Re.length!="number"||xe(Re.length)?a(0):b(Re):Re.type==="Buffer"&&Array.isArray(Re.data)?b(Re.data):void 0}(Q);if(Me)return Me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Q[Symbol.toPrimitive]=="function")return i.from(Q[Symbol.toPrimitive]("string"),oe,ce);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s(Q))}function h(Q){if(typeof Q!="number")throw new TypeError('"size" argument must be of type number');if(Q<0)throw new RangeError('The value "'+Q+'" is invalid for option "size"')}function f(Q){return h(Q),a(Q<0?0:0|g(Q))}function b(Q){for(var oe=Q.length<0?0:0|g(Q.length),ce=a(oe),me=0;me<oe;me+=1)ce[me]=255&Q[me];return ce}function v(Q,oe,ce){if(oe<0||Q.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(Q.byteLength<oe+(ce||0))throw new RangeError('"length" is outside of buffer bounds');var me;return me=oe===void 0&&ce===void 0?new Uint8Array(Q):ce===void 0?new Uint8Array(Q,oe):new Uint8Array(Q,oe,ce),Object.setPrototypeOf(me,i.prototype),me}function g(Q){if(Q>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|Q}function y(Q,oe){if(i.isBuffer(Q))return Q.length;if(ArrayBuffer.isView(Q)||Ie(Q,ArrayBuffer))return Q.byteLength;if(typeof Q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+s(Q));var ce=Q.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&ce===0)return 0;for(var Me=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return ce;case"utf8":case"utf-8":return ge(Q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ce;case"hex":return ce>>>1;case"base64":return he(Q).length;default:if(Me)return me?-1:ge(Q).length;oe=(""+oe).toLowerCase(),Me=!0}}function p(Q,oe,ce){var me=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((ce===void 0||ce>this.length)&&(ce=this.length),ce<=0)||(ce>>>=0)<=(oe>>>=0))return"";for(Q||(Q="utf8");;)switch(Q){case"hex":return F(this,oe,ce);case"utf8":case"utf-8":return I(this,oe,ce);case"ascii":return z(this,oe,ce);case"latin1":case"binary":return H(this,oe,ce);case"base64":return P(this,oe,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,oe,ce);default:if(me)throw new TypeError("Unknown encoding: "+Q);Q=(Q+"").toLowerCase(),me=!0}}function m(Q,oe,ce){var me=Q[oe];Q[oe]=Q[ce],Q[ce]=me}function w(Q,oe,ce,me,Me){if(Q.length===0)return-1;if(typeof ce=="string"?(me=ce,ce=0):ce>2147483647?ce=2147483647:ce<-2147483648&&(ce=-2147483648),xe(ce=+ce)&&(ce=Me?0:Q.length-1),ce<0&&(ce=Q.length+ce),ce>=Q.length){if(Me)return-1;ce=Q.length-1}else if(ce<0){if(!Me)return-1;ce=0}if(typeof oe=="string"&&(oe=i.from(oe,me)),i.isBuffer(oe))return oe.length===0?-1:u(Q,oe,ce,me,Me);if(typeof oe=="number")return oe&=255,typeof Uint8Array.prototype.indexOf=="function"?Me?Uint8Array.prototype.indexOf.call(Q,oe,ce):Uint8Array.prototype.lastIndexOf.call(Q,oe,ce):u(Q,[oe],ce,me,Me);throw new TypeError("val must be string, number or Buffer")}function u(Q,oe,ce,me,Me){var Re,Ce=1,ze=Q.length,le=oe.length;if(me!==void 0&&((me=String(me).toLowerCase())==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(Q.length<2||oe.length<2)return-1;Ce=2,ze/=2,le/=2,ce/=2}function de(He,rt){return Ce===1?He[rt]:He.readUInt16BE(rt*Ce)}if(Me){var be=-1;for(Re=ce;Re<ze;Re++)if(de(Q,Re)===de(oe,be===-1?0:Re-be)){if(be===-1&&(be=Re),Re-be+1===le)return be*Ce}else be!==-1&&(Re-=Re-be),be=-1}else for(ce+le>ze&&(ce=ze-le),Re=ce;Re>=0;Re--){for(var Fe=!0,Ve=0;Ve<le;Ve++)if(de(Q,Re+Ve)!==de(oe,Ve)){Fe=!1;break}if(Fe)return Re}return-1}function S(Q,oe,ce,me){ce=Number(ce)||0;var Me=Q.length-ce;me?(me=Number(me))>Me&&(me=Me):me=Me;var Re,Ce=oe.length;for(me>Ce/2&&(me=Ce/2),Re=0;Re<me;++Re){var ze=parseInt(oe.substr(2*Re,2),16);if(xe(ze))return Re;Q[ce+Re]=ze}return Re}function _(Q,oe,ce,me){return ve(ge(oe,Q.length-ce),Q,ce,me)}function E(Q,oe,ce,me){return ve(function(Me){for(var Re=[],Ce=0;Ce<Me.length;++Ce)Re.push(255&Me.charCodeAt(Ce));return Re}(oe),Q,ce,me)}function L(Q,oe,ce,me){return ve(he(oe),Q,ce,me)}function C(Q,oe,ce,me){return ve(function(Me,Re){for(var Ce,ze,le,de=[],be=0;be<Me.length&&!((Re-=2)<0);++be)ze=(Ce=Me.charCodeAt(be))>>8,le=Ce%256,de.push(le),de.push(ze);return de}(oe,Q.length-ce),Q,ce,me)}function P(Q,oe,ce){return oe===0&&ce===Q.length?t.fromByteArray(Q):t.fromByteArray(Q.slice(oe,ce))}function I(Q,oe,ce){ce=Math.min(Q.length,ce);for(var me=[],Me=oe;Me<ce;){var Re=Q[Me],Ce=null,ze=Re>239?4:Re>223?3:Re>191?2:1;if(Me+ze<=ce){var le=void 0,de=void 0,be=void 0,Fe=void 0;switch(ze){case 1:Re<128&&(Ce=Re);break;case 2:(192&(le=Q[Me+1]))==128&&(Fe=(31&Re)<<6|63&le)>127&&(Ce=Fe);break;case 3:le=Q[Me+1],de=Q[Me+2],(192&le)==128&&(192&de)==128&&(Fe=(15&Re)<<12|(63&le)<<6|63&de)>2047&&(Fe<55296||Fe>57343)&&(Ce=Fe);break;case 4:le=Q[Me+1],de=Q[Me+2],be=Q[Me+3],(192&le)==128&&(192&de)==128&&(192&be)==128&&(Fe=(15&Re)<<18|(63&le)<<12|(63&de)<<6|63&be)>65535&&Fe<1114112&&(Ce=Fe)}}Ce===null?(Ce=65533,ze=1):Ce>65535&&(Ce-=65536,me.push(Ce>>>10&1023|55296),Ce=56320|1023&Ce),me.push(Ce),Me+=ze}return function(Ve){var He=Ve.length;if(He<=U)return String.fromCharCode.apply(String,Ve);for(var rt="",tt=0;tt<He;)rt+=String.fromCharCode.apply(String,Ve.slice(tt,tt+=U));return rt}(me)}R.kMaxLength=n,i.TYPED_ARRAY_SUPPORT=function(){try{var Q=new Uint8Array(1),oe={foo:function(){return 42}};return Object.setPrototypeOf(oe,Uint8Array.prototype),Object.setPrototypeOf(Q,oe),Q.foo()===42}catch{return!1}}(),i.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(Q,oe,ce){return c(Q,oe,ce)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(Q,oe,ce){return function(me,Me,Re){return h(me),me<=0?a(me):Me!==void 0?typeof Re=="string"?a(me).fill(Me,Re):a(me).fill(Me):a(me)}(Q,oe,ce)},i.allocUnsafe=function(Q){return f(Q)},i.allocUnsafeSlow=function(Q){return f(Q)},i.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==i.prototype},i.compare=function(Q,oe){if(Ie(Q,Uint8Array)&&(Q=i.from(Q,Q.offset,Q.byteLength)),Ie(oe,Uint8Array)&&(oe=i.from(oe,oe.offset,oe.byteLength)),!i.isBuffer(Q)||!i.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===oe)return 0;for(var ce=Q.length,me=oe.length,Me=0,Re=Math.min(ce,me);Me<Re;++Me)if(Q[Me]!==oe[Me]){ce=Q[Me],me=oe[Me];break}return ce<me?-1:me<ce?1:0},i.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(Q,oe){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return i.alloc(0);var ce;if(oe===void 0)for(oe=0,ce=0;ce<Q.length;++ce)oe+=Q[ce].length;var me=i.allocUnsafe(oe),Me=0;for(ce=0;ce<Q.length;++ce){var Re=Q[ce];if(Ie(Re,Uint8Array))Me+Re.length>me.length?(i.isBuffer(Re)||(Re=i.from(Re)),Re.copy(me,Me)):Uint8Array.prototype.set.call(me,Re,Me);else{if(!i.isBuffer(Re))throw new TypeError('"list" argument must be an Array of Buffers');Re.copy(me,Me)}Me+=Re.length}return me},i.byteLength=y,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var Q=this.length;if(Q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<Q;oe+=2)m(this,oe,oe+1);return this},i.prototype.swap32=function(){var Q=this.length;if(Q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<Q;oe+=4)m(this,oe,oe+3),m(this,oe+1,oe+2);return this},i.prototype.swap64=function(){var Q=this.length;if(Q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<Q;oe+=8)m(this,oe,oe+7),m(this,oe+1,oe+6),m(this,oe+2,oe+5),m(this,oe+3,oe+4);return this},i.prototype.toString=function(){var Q=this.length;return Q===0?"":arguments.length===0?I(this,0,Q):p.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(Q){if(!i.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q||i.compare(this,Q)===0},i.prototype.inspect=function(){var Q="",oe=R.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&(Q+=" ... "),"<Buffer "+Q+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(Q,oe,ce,me,Me){if(Ie(Q,Uint8Array)&&(Q=i.from(Q,Q.offset,Q.byteLength)),!i.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+s(Q));if(oe===void 0&&(oe=0),ce===void 0&&(ce=Q?Q.length:0),me===void 0&&(me=0),Me===void 0&&(Me=this.length),oe<0||ce>Q.length||me<0||Me>this.length)throw new RangeError("out of range index");if(me>=Me&&oe>=ce)return 0;if(me>=Me)return-1;if(oe>=ce)return 1;if(this===Q)return 0;for(var Re=(Me>>>=0)-(me>>>=0),Ce=(ce>>>=0)-(oe>>>=0),ze=Math.min(Re,Ce),le=this.slice(me,Me),de=Q.slice(oe,ce),be=0;be<ze;++be)if(le[be]!==de[be]){Re=le[be],Ce=de[be];break}return Re<Ce?-1:Ce<Re?1:0},i.prototype.includes=function(Q,oe,ce){return this.indexOf(Q,oe,ce)!==-1},i.prototype.indexOf=function(Q,oe,ce){return w(this,Q,oe,ce,!0)},i.prototype.lastIndexOf=function(Q,oe,ce){return w(this,Q,oe,ce,!1)},i.prototype.write=function(Q,oe,ce,me){if(oe===void 0)me="utf8",ce=this.length,oe=0;else if(ce===void 0&&typeof oe=="string")me=oe,ce=this.length,oe=0;else{if(!isFinite(oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");oe>>>=0,isFinite(ce)?(ce>>>=0,me===void 0&&(me="utf8")):(me=ce,ce=void 0)}var Me=this.length-oe;if((ce===void 0||ce>Me)&&(ce=Me),Q.length>0&&(ce<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");for(var Re=!1;;)switch(me){case"hex":return S(this,Q,oe,ce);case"utf8":case"utf-8":return _(this,Q,oe,ce);case"ascii":case"latin1":case"binary":return E(this,Q,oe,ce);case"base64":return L(this,Q,oe,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,Q,oe,ce);default:if(Re)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),Re=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function z(Q,oe,ce){var me="";ce=Math.min(Q.length,ce);for(var Me=oe;Me<ce;++Me)me+=String.fromCharCode(127&Q[Me]);return me}function H(Q,oe,ce){var me="";ce=Math.min(Q.length,ce);for(var Me=oe;Me<ce;++Me)me+=String.fromCharCode(Q[Me]);return me}function F(Q,oe,ce){var me=Q.length;(!oe||oe<0)&&(oe=0),(!ce||ce<0||ce>me)&&(ce=me);for(var Me="",Re=oe;Re<ce;++Re)Me+=Ae[Q[Re]];return Me}function N(Q,oe,ce){for(var me=Q.slice(oe,ce),Me="",Re=0;Re<me.length-1;Re+=2)Me+=String.fromCharCode(me[Re]+256*me[Re+1]);return Me}function B(Q,oe,ce){if(Q%1!=0||Q<0)throw new RangeError("offset is not uint");if(Q+oe>ce)throw new RangeError("Trying to access beyond buffer length")}function j(Q,oe,ce,me,Me,Re){if(!i.isBuffer(Q))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>Me||oe<Re)throw new RangeError('"value" argument is out of bounds');if(ce+me>Q.length)throw new RangeError("Index out of range")}function K(Q,oe,ce,me,Me){ie(oe,me,Me,Q,ce,7);var Re=Number(oe&BigInt(4294967295));Q[ce++]=Re,Re>>=8,Q[ce++]=Re,Re>>=8,Q[ce++]=Re,Re>>=8,Q[ce++]=Re;var Ce=Number(oe>>BigInt(32)&BigInt(4294967295));return Q[ce++]=Ce,Ce>>=8,Q[ce++]=Ce,Ce>>=8,Q[ce++]=Ce,Ce>>=8,Q[ce++]=Ce,ce}function G(Q,oe,ce,me,Me){ie(oe,me,Me,Q,ce,7);var Re=Number(oe&BigInt(4294967295));Q[ce+7]=Re,Re>>=8,Q[ce+6]=Re,Re>>=8,Q[ce+5]=Re,Re>>=8,Q[ce+4]=Re;var Ce=Number(oe>>BigInt(32)&BigInt(4294967295));return Q[ce+3]=Ce,Ce>>=8,Q[ce+2]=Ce,Ce>>=8,Q[ce+1]=Ce,Ce>>=8,Q[ce]=Ce,ce+8}function V(Q,oe,ce,me,Me,Re){if(ce+me>Q.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("Index out of range")}function W(Q,oe,ce,me,Me){return oe=+oe,ce>>>=0,Me||V(Q,0,ce,4),o.write(Q,oe,ce,me,23,4),ce+4}function J(Q,oe,ce,me,Me){return oe=+oe,ce>>>=0,Me||V(Q,0,ce,8),o.write(Q,oe,ce,me,52,8),ce+8}i.prototype.slice=function(Q,oe){var ce=this.length;(Q=~~Q)<0?(Q+=ce)<0&&(Q=0):Q>ce&&(Q=ce),(oe=oe===void 0?ce:~~oe)<0?(oe+=ce)<0&&(oe=0):oe>ce&&(oe=ce),oe<Q&&(oe=Q);var me=this.subarray(Q,oe);return Object.setPrototypeOf(me,i.prototype),me},i.prototype.readUintLE=i.prototype.readUIntLE=function(Q,oe,ce){Q>>>=0,oe>>>=0,ce||B(Q,oe,this.length);for(var me=this[Q],Me=1,Re=0;++Re<oe&&(Me*=256);)me+=this[Q+Re]*Me;return me},i.prototype.readUintBE=i.prototype.readUIntBE=function(Q,oe,ce){Q>>>=0,oe>>>=0,ce||B(Q,oe,this.length);for(var me=this[Q+--oe],Me=1;oe>0&&(Me*=256);)me+=this[Q+--oe]*Me;return me},i.prototype.readUint8=i.prototype.readUInt8=function(Q,oe){return Q>>>=0,oe||B(Q,1,this.length),this[Q]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(Q,oe){return Q>>>=0,oe||B(Q,2,this.length),this[Q]|this[Q+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(Q,oe){return Q>>>=0,oe||B(Q,2,this.length),this[Q]<<8|this[Q+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+16777216*this[Q+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),16777216*this[Q]+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},i.prototype.readBigUInt64LE=Se(function(Q){se(Q>>>=0,"offset");var oe=this[Q],ce=this[Q+7];oe!==void 0&&ce!==void 0||fe(Q,this.length-8);var me=oe+this[++Q]*Math.pow(2,8)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,24),Me=this[++Q]+this[++Q]*Math.pow(2,8)+this[++Q]*Math.pow(2,16)+ce*Math.pow(2,24);return BigInt(me)+(BigInt(Me)<<BigInt(32))}),i.prototype.readBigUInt64BE=Se(function(Q){se(Q>>>=0,"offset");var oe=this[Q],ce=this[Q+7];oe!==void 0&&ce!==void 0||fe(Q,this.length-8);var me=oe*Math.pow(2,24)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,8)+this[++Q],Me=this[++Q]*Math.pow(2,24)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,8)+ce;return(BigInt(me)<<BigInt(32))+BigInt(Me)}),i.prototype.readIntLE=function(Q,oe,ce){Q>>>=0,oe>>>=0,ce||B(Q,oe,this.length);for(var me=this[Q],Me=1,Re=0;++Re<oe&&(Me*=256);)me+=this[Q+Re]*Me;return me>=(Me*=128)&&(me-=Math.pow(2,8*oe)),me},i.prototype.readIntBE=function(Q,oe,ce){Q>>>=0,oe>>>=0,ce||B(Q,oe,this.length);for(var me=oe,Me=1,Re=this[Q+--me];me>0&&(Me*=256);)Re+=this[Q+--me]*Me;return Re>=(Me*=128)&&(Re-=Math.pow(2,8*oe)),Re},i.prototype.readInt8=function(Q,oe){return Q>>>=0,oe||B(Q,1,this.length),128&this[Q]?-1*(255-this[Q]+1):this[Q]},i.prototype.readInt16LE=function(Q,oe){Q>>>=0,oe||B(Q,2,this.length);var ce=this[Q]|this[Q+1]<<8;return 32768&ce?4294901760|ce:ce},i.prototype.readInt16BE=function(Q,oe){Q>>>=0,oe||B(Q,2,this.length);var ce=this[Q+1]|this[Q]<<8;return 32768&ce?4294901760|ce:ce},i.prototype.readInt32LE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},i.prototype.readInt32BE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},i.prototype.readBigInt64LE=Se(function(Q){se(Q>>>=0,"offset");var oe=this[Q],ce=this[Q+7];oe!==void 0&&ce!==void 0||fe(Q,this.length-8);var me=this[Q+4]+this[Q+5]*Math.pow(2,8)+this[Q+6]*Math.pow(2,16)+(ce<<24);return(BigInt(me)<<BigInt(32))+BigInt(oe+this[++Q]*Math.pow(2,8)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,24))}),i.prototype.readBigInt64BE=Se(function(Q){se(Q>>>=0,"offset");var oe=this[Q],ce=this[Q+7];oe!==void 0&&ce!==void 0||fe(Q,this.length-8);var me=(oe<<24)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,8)+this[++Q];return(BigInt(me)<<BigInt(32))+BigInt(this[++Q]*Math.pow(2,24)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,8)+ce)}),i.prototype.readFloatLE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),o.read(this,Q,!0,23,4)},i.prototype.readFloatBE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),o.read(this,Q,!1,23,4)},i.prototype.readDoubleLE=function(Q,oe){return Q>>>=0,oe||B(Q,8,this.length),o.read(this,Q,!0,52,8)},i.prototype.readDoubleBE=function(Q,oe){return Q>>>=0,oe||B(Q,8,this.length),o.read(this,Q,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(Q,oe,ce,me){Q=+Q,oe>>>=0,ce>>>=0,me||j(this,Q,oe,ce,Math.pow(2,8*ce)-1,0);var Me=1,Re=0;for(this[oe]=255&Q;++Re<ce&&(Me*=256);)this[oe+Re]=Q/Me&255;return oe+ce},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(Q,oe,ce,me){Q=+Q,oe>>>=0,ce>>>=0,me||j(this,Q,oe,ce,Math.pow(2,8*ce)-1,0);var Me=ce-1,Re=1;for(this[oe+Me]=255&Q;--Me>=0&&(Re*=256);)this[oe+Me]=Q/Re&255;return oe+ce},i.prototype.writeUint8=i.prototype.writeUInt8=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,1,255,0),this[oe]=255&Q,oe+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,2,65535,0),this[oe]=255&Q,this[oe+1]=Q>>>8,oe+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,2,65535,0),this[oe]=Q>>>8,this[oe+1]=255&Q,oe+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,4,4294967295,0),this[oe+3]=Q>>>24,this[oe+2]=Q>>>16,this[oe+1]=Q>>>8,this[oe]=255&Q,oe+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,4,4294967295,0),this[oe]=Q>>>24,this[oe+1]=Q>>>16,this[oe+2]=Q>>>8,this[oe+3]=255&Q,oe+4},i.prototype.writeBigUInt64LE=Se(function(Q){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return K(this,Q,oe,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=Se(function(Q){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return G(this,Q,oe,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(Q,oe,ce,me){if(Q=+Q,oe>>>=0,!me){var Me=Math.pow(2,8*ce-1);j(this,Q,oe,ce,Me-1,-Me)}var Re=0,Ce=1,ze=0;for(this[oe]=255&Q;++Re<ce&&(Ce*=256);)Q<0&&ze===0&&this[oe+Re-1]!==0&&(ze=1),this[oe+Re]=(Q/Ce>>0)-ze&255;return oe+ce},i.prototype.writeIntBE=function(Q,oe,ce,me){if(Q=+Q,oe>>>=0,!me){var Me=Math.pow(2,8*ce-1);j(this,Q,oe,ce,Me-1,-Me)}var Re=ce-1,Ce=1,ze=0;for(this[oe+Re]=255&Q;--Re>=0&&(Ce*=256);)Q<0&&ze===0&&this[oe+Re+1]!==0&&(ze=1),this[oe+Re]=(Q/Ce>>0)-ze&255;return oe+ce},i.prototype.writeInt8=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,1,127,-128),Q<0&&(Q=255+Q+1),this[oe]=255&Q,oe+1},i.prototype.writeInt16LE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,2,32767,-32768),this[oe]=255&Q,this[oe+1]=Q>>>8,oe+2},i.prototype.writeInt16BE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,2,32767,-32768),this[oe]=Q>>>8,this[oe+1]=255&Q,oe+2},i.prototype.writeInt32LE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,4,2147483647,-2147483648),this[oe]=255&Q,this[oe+1]=Q>>>8,this[oe+2]=Q>>>16,this[oe+3]=Q>>>24,oe+4},i.prototype.writeInt32BE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[oe]=Q>>>24,this[oe+1]=Q>>>16,this[oe+2]=Q>>>8,this[oe+3]=255&Q,oe+4},i.prototype.writeBigInt64LE=Se(function(Q){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return K(this,Q,oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=Se(function(Q){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return G(this,Q,oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function(Q,oe,ce){return W(this,Q,oe,!0,ce)},i.prototype.writeFloatBE=function(Q,oe,ce){return W(this,Q,oe,!1,ce)},i.prototype.writeDoubleLE=function(Q,oe,ce){return J(this,Q,oe,!0,ce)},i.prototype.writeDoubleBE=function(Q,oe,ce){return J(this,Q,oe,!1,ce)},i.prototype.copy=function(Q,oe,ce,me){if(!i.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),me||me===0||(me=this.length),oe>=Q.length&&(oe=Q.length),oe||(oe=0),me>0&&me<ce&&(me=ce),me===ce||Q.length===0||this.length===0)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),Q.length-oe<me-ce&&(me=Q.length-oe+ce);var Me=me-ce;return this===Q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(oe,ce,me):Uint8Array.prototype.set.call(Q,this.subarray(ce,me),oe),Me},i.prototype.fill=function(Q,oe,ce,me){if(typeof Q=="string"){if(typeof oe=="string"?(me=oe,oe=0,ce=this.length):typeof ce=="string"&&(me=ce,ce=this.length),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!i.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(Q.length===1){var Me=Q.charCodeAt(0);(me==="utf8"&&Me<128||me==="latin1")&&(Q=Me)}}else typeof Q=="number"?Q&=255:typeof Q=="boolean"&&(Q=Number(Q));if(oe<0||this.length<oe||this.length<ce)throw new RangeError("Out of range index");if(ce<=oe)return this;var Re;if(oe>>>=0,ce=ce===void 0?this.length:ce>>>0,Q||(Q=0),typeof Q=="number")for(Re=oe;Re<ce;++Re)this[Re]=Q;else{var Ce=i.isBuffer(Q)?Q:i.from(Q,me),ze=Ce.length;if(ze===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Re=0;Re<ce-oe;++Re)this[Re+oe]=Ce[Re%ze]}return this};var X={};function ee(Q,oe,ce){X[Q]=function(me){(function(be,Fe){if(typeof Fe!="function"&&Fe!==null)throw new TypeError("Super expression must either be null or a function");be.prototype=Object.create(Fe&&Fe.prototype,{constructor:{value:be,writable:!0,configurable:!0}}),Object.defineProperty(be,"prototype",{writable:!1}),Fe&&l(be,Fe)})(de,me);var Me,Re,Ce,ze,le=(Ce=de,ze=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var be,Fe=d(Ce);if(ze){var Ve=d(this).constructor;be=Reflect.construct(Fe,arguments,Ve)}else be=Fe.apply(this,arguments);return T(this,be)});function de(){var be;return A(this,de),be=le.call(this),Object.defineProperty(x(be),"message",{value:oe.apply(x(be),arguments),writable:!0,configurable:!0}),be.name="".concat(be.name," [").concat(Q,"]"),be.stack,delete be.name,be}return Me=de,(Re=[{key:"code",get:function(){return Q},set:function(be){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:be,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(Q,"]: ").concat(this.message)}}])&&k(Me.prototype,Re),Object.defineProperty(Me,"prototype",{writable:!1}),de}(ce)}function re(Q){for(var oe="",ce=Q.length,me=Q[0]==="-"?1:0;ce>=me+4;ce-=3)oe="_".concat(Q.slice(ce-3,ce)).concat(oe);return"".concat(Q.slice(0,ce)).concat(oe)}function ie(Q,oe,ce,me,Me,Re){if(Q>ce||Q<oe){var Ce,ze=typeof oe=="bigint"?"n":"";throw Ce=Re>3?oe===0||oe===BigInt(0)?">= 0".concat(ze," and < 2").concat(ze," ** ").concat(8*(Re+1)).concat(ze):">= -(2".concat(ze," ** ").concat(8*(Re+1)-1).concat(ze,") and < 2 ** ")+"".concat(8*(Re+1)-1).concat(ze):">= ".concat(oe).concat(ze," and <= ").concat(ce).concat(ze),new X.ERR_OUT_OF_RANGE("value",Ce,Q)}(function(le,de,be){se(de,"offset"),le[de]!==void 0&&le[de+be]!==void 0||fe(de,le.length-(be+1))})(me,Me,Re)}function se(Q,oe){if(typeof Q!="number")throw new X.ERR_INVALID_ARG_TYPE(oe,"number",Q)}function fe(Q,oe,ce){throw Math.floor(Q)!==Q?(se(Q,ce),new X.ERR_OUT_OF_RANGE(ce||"offset","an integer",Q)):oe<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE(ce||"offset",">= ".concat(ce?1:0," and <= ").concat(oe),Q)}ee("ERR_BUFFER_OUT_OF_BOUNDS",function(Q){return Q?"".concat(Q," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ee("ERR_INVALID_ARG_TYPE",function(Q,oe){return'The "'.concat(Q,'" argument must be of type number. Received type ').concat(s(oe))},TypeError),ee("ERR_OUT_OF_RANGE",function(Q,oe,ce){var me='The value of "'.concat(Q,'" is out of range.'),Me=ce;return Number.isInteger(ce)&&Math.abs(ce)>Math.pow(2,32)?Me=re(String(ce)):typeof ce=="bigint"&&(Me=String(ce),(ce>Math.pow(BigInt(2),BigInt(32))||ce<-Math.pow(BigInt(2),BigInt(32)))&&(Me=re(Me)),Me+="n"),me+" It must be ".concat(oe,". Received ").concat(Me)},RangeError);var ye=/[^+/0-9A-Za-z-_]/g;function ge(Q,oe){var ce;oe=oe||1/0;for(var me=Q.length,Me=null,Re=[],Ce=0;Ce<me;++Ce){if((ce=Q.charCodeAt(Ce))>55295&&ce<57344){if(!Me){if(ce>56319){(oe-=3)>-1&&Re.push(239,191,189);continue}if(Ce+1===me){(oe-=3)>-1&&Re.push(239,191,189);continue}Me=ce;continue}if(ce<56320){(oe-=3)>-1&&Re.push(239,191,189),Me=ce;continue}ce=65536+(Me-55296<<10|ce-56320)}else Me&&(oe-=3)>-1&&Re.push(239,191,189);if(Me=null,ce<128){if((oe-=1)<0)break;Re.push(ce)}else if(ce<2048){if((oe-=2)<0)break;Re.push(ce>>6|192,63&ce|128)}else if(ce<65536){if((oe-=3)<0)break;Re.push(ce>>12|224,ce>>6&63|128,63&ce|128)}else{if(!(ce<1114112))throw new Error("Invalid code point");if((oe-=4)<0)break;Re.push(ce>>18|240,ce>>12&63|128,ce>>6&63|128,63&ce|128)}}return Re}function he(Q){return t.toByteArray(function(oe){if((oe=(oe=oe.split("=")[0]).trim().replace(ye,"")).length<2)return"";for(;oe.length%4!=0;)oe+="=";return oe}(Q))}function ve(Q,oe,ce,me){var Me;for(Me=0;Me<me&&!(Me+ce>=oe.length||Me>=Q.length);++Me)oe[Me+ce]=Q[Me];return Me}function Ie(Q,oe){return Q instanceof oe||Q!=null&&Q.constructor!=null&&Q.constructor.name!=null&&Q.constructor.name===oe.name}function xe(Q){return Q!=Q}var Ae=function(){for(var Q="0123456789abcdef",oe=new Array(256),ce=0;ce<16;++ce)for(var me=16*ce,Me=0;Me<16;++Me)oe[me+Me]=Q[ce]+Q[Me];return oe}();function Se(Q){return typeof BigInt>"u"?Te:Q}function Te(){throw new Error("BigInt not supported")}},86781:function($,R,e){e.r(R),e.d(R,{sankeyCenter:function(){return r},sankeyCircular:function(){return E},sankeyJustify:function(){return o},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var A=e(33064),k=e(15140),l=e(45879),T=e(2502),x=e.n(T);function d(he){return he.target.depth}function s(he){return he.depth}function t(he,ve){return ve-1-he.height}function o(he,ve){return he.sourceLinks.length?he.depth:ve-1}function r(he){return he.targetLinks.length?he.depth:he.sourceLinks.length?(0,A.VV)(he.sourceLinks,d)-1:0}function n(he){return function(){return he}}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he};function i(he,ve){return h(he.source,ve.source)||he.index-ve.index}function c(he,ve){return h(he.target,ve.target)||he.index-ve.index}function h(he,ve){return he.partOfCycle===ve.partOfCycle?he.y0-ve.y0:he.circularLinkType==="top"||ve.circularLinkType==="bottom"?-1:1}function f(he){return he.value}function b(he){return(he.y0+he.y1)/2}function v(he){return b(he.source)}function g(he){return b(he.target)}function y(he){return he.index}function p(he){return he.nodes}function m(he){return he.links}function w(he,ve){var Ie=he.get(ve);if(!Ie)throw new Error("missing: "+ve);return Ie}function u(he,ve){return ve(he)}var S=25,_=10;function E(){var he,ve,Ie=0,xe=0,Ae=1,Se=1,Te=24,Q=y,oe=o,ce=p,me=m,Me=32,Re=2,Ce=null;function ze(){var He={nodes:ce.apply(null,arguments),links:me.apply(null,arguments)};le(He),L(He,0,Ce),de(He),be(He),C(He,Q),Fe(He,Me,Q),Ve(He);for(var rt=4,tt=0;tt<rt;tt++)re(He,Se,Q),ie(He,0,Q),X(He,xe,Se,Q),re(He,Se,Q),ie(He,0,Q);return ge(He,xe,Se),H(He,Re,Se,Q),He}function le(He){He.nodes.forEach(function(tt,ot){tt.index=ot,tt.sourceLinks=[],tt.targetLinks=[]});var rt=(0,k.UI)(He.nodes,Q);return He.links.forEach(function(tt,ot){tt.index=ot;var ht=tt.source,_t=tt.target;(ht===void 0?"undefined":a(ht))!=="object"&&(ht=tt.source=w(rt,ht)),(_t===void 0?"undefined":a(_t))!=="object"&&(_t=tt.target=w(rt,_t)),ht.sourceLinks.push(tt),_t.targetLinks.push(tt)}),He}function de(He){He.nodes.forEach(function(rt){rt.partOfCycle=!1,rt.value=Math.max((0,A.Sm)(rt.sourceLinks,f),(0,A.Sm)(rt.targetLinks,f)),rt.sourceLinks.forEach(function(tt){tt.circular&&(rt.partOfCycle=!0,rt.circularLinkType=tt.circularLinkType)}),rt.targetLinks.forEach(function(tt){tt.circular&&(rt.partOfCycle=!0,rt.circularLinkType=tt.circularLinkType)})})}function be(He){var rt,tt,ot;for(rt=He.nodes,tt=[],ot=0;rt.length;++ot,rt=tt,tt=[])rt.forEach(function(ht){ht.depth=ot,ht.sourceLinks.forEach(function(_t){tt.indexOf(_t.target)<0&&!_t.circular&&tt.push(_t.target)})});for(rt=He.nodes,tt=[],ot=0;rt.length;++ot,rt=tt,tt=[])rt.forEach(function(ht){ht.height=ot,ht.targetLinks.forEach(function(_t){tt.indexOf(_t.source)<0&&!_t.circular&&tt.push(_t.source)})});He.nodes.forEach(function(ht){ht.column=Math.floor(oe.call(null,ht,ot))})}function Fe(He,rt,tt){var ot=(0,k.b1)().key(function(St){return St.column}).sortKeys(A.j2).entries(He.nodes).map(function(St){return St.values});(function(St){if(ve){var Et=1/0;ot.forEach(function(Ze){var Ye=Se*ve/(Ze.length+1);Et=Ye<Et?Ye:Et}),he=Et}var zt=(0,A.VV)(ot,function(Ze){return(Se-xe-(Ze.length-1)*he)/(0,A.Sm)(Ze,f)});zt*=.3,He.links.forEach(function(Ze){Ze.width=Ze.value*zt});var Ut=function(Ze){var Ye=0,Be=0,ke=0,Pe=0,qe=(0,A.Fp)(Ze.nodes,function(Xe){return Xe.column});return Ze.links.forEach(function(Xe){Xe.circular&&(Xe.circularLinkType=="top"?Ye+=Xe.width:Be+=Xe.width,Xe.target.column==0&&(Pe+=Xe.width),Xe.source.column==qe&&(ke+=Xe.width))}),{top:Ye=Ye>0?Ye+S+_:Ye,bottom:Be=Be>0?Be+S+_:Be,left:Pe=Pe>0?Pe+S+_:Pe,right:ke=ke>0?ke+S+_:ke}}(He),Pt=function(Ze,Ye){var Be=(0,A.Fp)(Ze.nodes,function(nt){return nt.column}),ke=Ae-Ie,Pe=Se-xe,qe=ke/(ke+Ye.right+Ye.left),Xe=Pe/(Pe+Ye.top+Ye.bottom);return Ie=Ie*qe+Ye.left,Ae=Ye.right==0?Ae:Ae*qe,xe=xe*Xe+Ye.top,Se*=Xe,Ze.nodes.forEach(function(nt){nt.x0=Ie+nt.column*((Ae-Ie-Te)/Be),nt.x1=nt.x0+Te}),Xe}(He,Ut);zt*=Pt,He.links.forEach(function(Ze){Ze.width=Ze.value*zt}),ot.forEach(function(Ze){var Ye=Ze.length;Ze.forEach(function(Be,ke){Be.depth==ot.length-1&&Ye==1||Be.depth==0&&Ye==1?(Be.y0=Se/2-Be.value*zt,Be.y1=Be.y0+Be.value*zt):Be.partOfCycle?I(Be,St)==0?(Be.y0=Se/2+ke,Be.y1=Be.y0+Be.value*zt):Be.circularLinkType=="top"?(Be.y0=xe+ke,Be.y1=Be.y0+Be.value*zt):(Be.y0=Se-Be.value*zt-ke,Be.y1=Be.y0+Be.value*zt):Ut.top==0||Ut.bottom==0?(Be.y0=(Se-xe)/Ye*ke,Be.y1=Be.y0+Be.value*zt):(Be.y0=(Se-xe)/2-Ye/2+ke,Be.y1=Be.y0+Be.value*zt)})})})(tt),bt();for(var ht=1,_t=rt;_t>0;--_t)dt(ht*=.99,tt),bt();function dt(St,Et){var zt=ot.length;ot.forEach(function(Ut){var Pt=Ut.length,Ze=Ut[0].depth;Ut.forEach(function(Ye){var Be;if((Ye.sourceLinks.length||Ye.targetLinks.length)&&!(Ye.partOfCycle&&I(Ye,Et)>0))if(Ze==0&&Pt==1)Be=Ye.y1-Ye.y0,Ye.y0=Se/2-Be/2,Ye.y1=Se/2+Be/2;else if(Ze==zt-1&&Pt==1)Be=Ye.y1-Ye.y0,Ye.y0=Se/2-Be/2,Ye.y1=Se/2+Be/2;else{var ke=(0,A.J6)(Ye.sourceLinks,g),Pe=(0,A.J6)(Ye.targetLinks,v),qe=((ke&&Pe?(ke+Pe)/2:ke||Pe)-b(Ye))*St;Ye.y0+=qe,Ye.y1+=qe}})})}function bt(){ot.forEach(function(St){var Et,zt,Ut,Pt=xe,Ze=St.length;for(St.sort(h),Ut=0;Ut<Ze;++Ut)(zt=Pt-(Et=St[Ut]).y0)>0&&(Et.y0+=zt,Et.y1+=zt),Pt=Et.y1+he;if((zt=Pt-he-Se)>0)for(Pt=Et.y0-=zt,Et.y1-=zt,Ut=Ze-2;Ut>=0;--Ut)(zt=(Et=St[Ut]).y1+he-Pt)>0&&(Et.y0-=zt,Et.y1-=zt),Pt=Et.y0})}}function Ve(He){He.nodes.forEach(function(rt){rt.sourceLinks.sort(c),rt.targetLinks.sort(i)}),He.nodes.forEach(function(rt){var tt=rt.y0,ot=tt,ht=rt.y1,_t=ht;rt.sourceLinks.forEach(function(dt){dt.circular?(dt.y0=ht-dt.width/2,ht-=dt.width):(dt.y0=tt+dt.width/2,tt+=dt.width)}),rt.targetLinks.forEach(function(dt){dt.circular?(dt.y1=_t-dt.width/2,_t-=dt.width):(dt.y1=ot+dt.width/2,ot+=dt.width)})})}return ze.nodeId=function(He){return arguments.length?(Q=typeof He=="function"?He:n(He),ze):Q},ze.nodeAlign=function(He){return arguments.length?(oe=typeof He=="function"?He:n(He),ze):oe},ze.nodeWidth=function(He){return arguments.length?(Te=+He,ze):Te},ze.nodePadding=function(He){return arguments.length?(he=+He,ze):he},ze.nodes=function(He){return arguments.length?(ce=typeof He=="function"?He:n(He),ze):ce},ze.links=function(He){return arguments.length?(me=typeof He=="function"?He:n(He),ze):me},ze.size=function(He){return arguments.length?(Ie=xe=0,Ae=+He[0],Se=+He[1],ze):[Ae-Ie,Se-xe]},ze.extent=function(He){return arguments.length?(Ie=+He[0][0],Ae=+He[1][0],xe=+He[0][1],Se=+He[1][1],ze):[[Ie,xe],[Ae,Se]]},ze.iterations=function(He){return arguments.length?(Me=+He,ze):Me},ze.circularLinkGap=function(He){return arguments.length?(Re=+He,ze):Re},ze.nodePaddingRatio=function(He){return arguments.length?(ve=+He,ze):ve},ze.sortNodes=function(He){return arguments.length?(Ce=He,ze):Ce},ze.update=function(He){return C(He,Q),Ve(He),He.links.forEach(function(rt){rt.circular&&(rt.circularLinkType=rt.y0+rt.y1<Se?"top":"bottom",rt.source.circularLinkType=rt.circularLinkType,rt.target.circularLinkType=rt.circularLinkType)}),re(He,Se,Q,!1),ie(He,0,Q),H(He,Re,Se,Q),He},ze}function L(he,ve,Ie){var xe=0;if(Ie===null){for(var Ae=[],Se=0;Se<he.links.length;Se++){var Te=he.links[Se],Q=Te.source.index,oe=Te.target.index;Ae[Q]||(Ae[Q]=[]),Ae[oe]||(Ae[oe]=[]),Ae[Q].indexOf(oe)===-1&&Ae[Q].push(oe)}var ce=x()(Ae);ce.sort(function(Re,Ce){return Re.length-Ce.length});var me={};for(Se=0;Se<ce.length;Se++){var Me=ce[Se].slice(-2);me[Me[0]]||(me[Me[0]]={}),me[Me[0]][Me[1]]=!0}he.links.forEach(function(Re){var Ce=Re.target.index,ze=Re.source.index;Ce===ze||me[ze]&&me[ze][Ce]?(Re.circular=!0,Re.circularLinkID=xe,xe+=1):Re.circular=!1})}else he.links.forEach(function(Re){Re.source[Ie]<Re.target[Ie]?Re.circular=!1:(Re.circular=!0,Re.circularLinkID=xe,xe+=1)})}function C(he,ve){var Ie=0,xe=0;he.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType||Ae.target.circularLinkType?Ae.circularLinkType=Ae.source.circularLinkType?Ae.source.circularLinkType:Ae.target.circularLinkType:Ae.circularLinkType=Ie<xe?"top":"bottom",Ae.circularLinkType=="top"?Ie+=1:xe+=1,he.nodes.forEach(function(Se){u(Se,ve)!=u(Ae.source,ve)&&u(Se,ve)!=u(Ae.target,ve)||(Se.circularLinkType=Ae.circularLinkType)}))}),he.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType==Ae.target.circularLinkType&&(Ae.circularLinkType=Ae.source.circularLinkType),ye(Ae,ve)&&(Ae.circularLinkType=Ae.source.circularLinkType))})}function P(he){var ve=Math.abs(he.y1-he.y0),Ie=Math.abs(he.target.x0-he.source.x1);return Math.atan(Ie/ve)}function I(he,ve){var Ie=0;he.sourceLinks.forEach(function(Ae){Ie=Ae.circular&&!ye(Ae,ve)?Ie+1:Ie});var xe=0;return he.targetLinks.forEach(function(Ae){xe=Ae.circular&&!ye(Ae,ve)?xe+1:xe}),Ie+xe}function U(he){var ve=he.source.sourceLinks,Ie=0;ve.forEach(function(Se){Ie=Se.circular?Ie+1:Ie});var xe=he.target.targetLinks,Ae=0;return xe.forEach(function(Se){Ae=Se.circular?Ae+1:Ae}),!(Ie>1||Ae>1)}function z(he,ve,Ie){return he.sort(F),he.forEach(function(xe,Ae){var Se,Te,Q=0;if(ye(xe,Ie)&&U(xe))xe.circularPathData.verticalBuffer=Q+xe.width/2;else{for(var oe=0;oe<Ae;oe++)if(Se=he[Ae],Te=he[oe],!(Se.source.column<Te.target.column||Se.target.column>Te.source.column)){var ce=he[oe].circularPathData.verticalBuffer+he[oe].width/2+ve;Q=ce>Q?ce:Q}xe.circularPathData.verticalBuffer=Q+xe.width/2}}),he}function H(he,ve,Ie,xe){var Ae=(0,A.VV)(he.links,function(Se){return Se.source.y0});he.links.forEach(function(Se){Se.circular&&(Se.circularPathData={})}),z(he.links.filter(function(Se){return Se.circularLinkType=="top"}),ve,xe),z(he.links.filter(function(Se){return Se.circularLinkType=="bottom"}),ve,xe),he.links.forEach(function(Se){if(Se.circular){if(Se.circularPathData.arcRadius=Se.width+_,Se.circularPathData.leftNodeBuffer=5,Se.circularPathData.rightNodeBuffer=5,Se.circularPathData.sourceWidth=Se.source.x1-Se.source.x0,Se.circularPathData.sourceX=Se.source.x0+Se.circularPathData.sourceWidth,Se.circularPathData.targetX=Se.target.x0,Se.circularPathData.sourceY=Se.y0,Se.circularPathData.targetY=Se.y1,ye(Se,xe)&&U(Se))Se.circularPathData.leftSmallArcRadius=_+Se.width/2,Se.circularPathData.leftLargeArcRadius=_+Se.width/2,Se.circularPathData.rightSmallArcRadius=_+Se.width/2,Se.circularPathData.rightLargeArcRadius=_+Se.width/2,Se.circularLinkType=="bottom"?(Se.circularPathData.verticalFullExtent=Se.source.y1+S+Se.circularPathData.verticalBuffer,Se.circularPathData.verticalLeftInnerExtent=Se.circularPathData.verticalFullExtent-Se.circularPathData.leftLargeArcRadius,Se.circularPathData.verticalRightInnerExtent=Se.circularPathData.verticalFullExtent-Se.circularPathData.rightLargeArcRadius):(Se.circularPathData.verticalFullExtent=Se.source.y0-S-Se.circularPathData.verticalBuffer,Se.circularPathData.verticalLeftInnerExtent=Se.circularPathData.verticalFullExtent+Se.circularPathData.leftLargeArcRadius,Se.circularPathData.verticalRightInnerExtent=Se.circularPathData.verticalFullExtent+Se.circularPathData.rightLargeArcRadius);else{var Te=Se.source.column,Q=Se.circularLinkType,oe=he.links.filter(function(Me){return Me.source.column==Te&&Me.circularLinkType==Q});Se.circularLinkType=="bottom"?oe.sort(B):oe.sort(N);var ce=0;oe.forEach(function(Me,Re){Me.circularLinkID==Se.circularLinkID&&(Se.circularPathData.leftSmallArcRadius=_+Se.width/2+ce,Se.circularPathData.leftLargeArcRadius=_+Se.width/2+Re*ve+ce),ce+=Me.width}),Te=Se.target.column,oe=he.links.filter(function(Me){return Me.target.column==Te&&Me.circularLinkType==Q}),Se.circularLinkType=="bottom"?oe.sort(K):oe.sort(j),ce=0,oe.forEach(function(Me,Re){Me.circularLinkID==Se.circularLinkID&&(Se.circularPathData.rightSmallArcRadius=_+Se.width/2+ce,Se.circularPathData.rightLargeArcRadius=_+Se.width/2+Re*ve+ce),ce+=Me.width}),Se.circularLinkType=="bottom"?(Se.circularPathData.verticalFullExtent=Math.max(Ie,Se.source.y1,Se.target.y1)+S+Se.circularPathData.verticalBuffer,Se.circularPathData.verticalLeftInnerExtent=Se.circularPathData.verticalFullExtent-Se.circularPathData.leftLargeArcRadius,Se.circularPathData.verticalRightInnerExtent=Se.circularPathData.verticalFullExtent-Se.circularPathData.rightLargeArcRadius):(Se.circularPathData.verticalFullExtent=Ae-S-Se.circularPathData.verticalBuffer,Se.circularPathData.verticalLeftInnerExtent=Se.circularPathData.verticalFullExtent+Se.circularPathData.leftLargeArcRadius,Se.circularPathData.verticalRightInnerExtent=Se.circularPathData.verticalFullExtent+Se.circularPathData.rightLargeArcRadius)}Se.circularPathData.leftInnerExtent=Se.circularPathData.sourceX+Se.circularPathData.leftNodeBuffer,Se.circularPathData.rightInnerExtent=Se.circularPathData.targetX-Se.circularPathData.rightNodeBuffer,Se.circularPathData.leftFullExtent=Se.circularPathData.sourceX+Se.circularPathData.leftLargeArcRadius+Se.circularPathData.leftNodeBuffer,Se.circularPathData.rightFullExtent=Se.circularPathData.targetX-Se.circularPathData.rightLargeArcRadius-Se.circularPathData.rightNodeBuffer}if(Se.circular)Se.path=function(Me){return Me.circularLinkType=="top"?"M"+Me.circularPathData.sourceX+" "+Me.circularPathData.sourceY+" L"+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.sourceY+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftSmallArcRadius+" 0 0 0 "+Me.circularPathData.leftFullExtent+" "+(Me.circularPathData.sourceY-Me.circularPathData.leftSmallArcRadius)+" L"+Me.circularPathData.leftFullExtent+" "+Me.circularPathData.verticalLeftInnerExtent+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftLargeArcRadius+" 0 0 0 "+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.verticalFullExtent+" L"+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.verticalFullExtent+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightLargeArcRadius+" 0 0 0 "+Me.circularPathData.rightFullExtent+" "+Me.circularPathData.verticalRightInnerExtent+" L"+Me.circularPathData.rightFullExtent+" "+(Me.circularPathData.targetY-Me.circularPathData.rightSmallArcRadius)+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightSmallArcRadius+" 0 0 0 "+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.targetY+" L"+Me.circularPathData.targetX+" "+Me.circularPathData.targetY:"M"+Me.circularPathData.sourceX+" "+Me.circularPathData.sourceY+" L"+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.sourceY+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftSmallArcRadius+" 0 0 1 "+Me.circularPathData.leftFullExtent+" "+(Me.circularPathData.sourceY+Me.circularPathData.leftSmallArcRadius)+" L"+Me.circularPathData.leftFullExtent+" "+Me.circularPathData.verticalLeftInnerExtent+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftLargeArcRadius+" 0 0 1 "+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.verticalFullExtent+" L"+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.verticalFullExtent+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightLargeArcRadius+" 0 0 1 "+Me.circularPathData.rightFullExtent+" "+Me.circularPathData.verticalRightInnerExtent+" L"+Me.circularPathData.rightFullExtent+" "+(Me.circularPathData.targetY+Me.circularPathData.rightSmallArcRadius)+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightSmallArcRadius+" 0 0 1 "+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.targetY+" L"+Me.circularPathData.targetX+" "+Me.circularPathData.targetY}(Se);else{var me=(0,l.h5)().source(function(Me){return[Me.source.x0+(Me.source.x1-Me.source.x0),Me.y0]}).target(function(Me){return[Me.target.x0,Me.y1]});Se.path=me(Se)}})}function F(he,ve){return G(he)==G(ve)?he.circularLinkType=="bottom"?B(he,ve):N(he,ve):G(ve)-G(he)}function N(he,ve){return he.y0-ve.y0}function B(he,ve){return ve.y0-he.y0}function j(he,ve){return he.y1-ve.y1}function K(he,ve){return ve.y1-he.y1}function G(he){return he.target.column-he.source.column}function V(he){return he.target.x0-he.source.x1}function W(he,ve){var Ie=P(he),xe=V(ve)/Math.tan(Ie);return fe(he)=="up"?he.y1+xe:he.y1-xe}function J(he,ve){var Ie=P(he),xe=V(ve)/Math.tan(Ie);return fe(he)=="up"?he.y1-xe:he.y1+xe}function X(he,ve,Ie,xe){he.links.forEach(function(Ae){if(!Ae.circular&&Ae.target.column-Ae.source.column>1){var Se=Ae.source.column+1,Te=Ae.target.column-1,Q=1,oe=Te-Se+1;for(Q=1;Se<=Te;Se++,Q++)he.nodes.forEach(function(ce){if(ce.column==Se){var me,Me=Q/(oe+1),Re=Math.pow(1-Me,3),Ce=3*Me*Math.pow(1-Me,2),ze=3*Math.pow(Me,2)*(1-Me),le=Math.pow(Me,3),de=Re*Ae.y0+Ce*Ae.y0+ze*Ae.y1+le*Ae.y1,be=de-Ae.width/2,Fe=de+Ae.width/2;be>ce.y0&&be<ce.y1?(me=ce.y1-be+10,me=ce.circularLinkType=="bottom"?me:-me,ce=ee(ce,me,ve,Ie),he.nodes.forEach(function(Ve){var He,rt;u(Ve,xe)!=u(ce,xe)&&Ve.column==ce.column&&(rt=Ve,(He=ce).y0>rt.y0&&He.y0<rt.y1||He.y1>rt.y0&&He.y1<rt.y1||He.y0<rt.y0&&He.y1>rt.y1)&&ee(Ve,me,ve,Ie)})):(Fe>ce.y0&&Fe<ce.y1||be<ce.y0&&Fe>ce.y1)&&(me=Fe-ce.y0+10,ce=ee(ce,me,ve,Ie),he.nodes.forEach(function(Ve){u(Ve,xe)!=u(ce,xe)&&Ve.column==ce.column&&Ve.y0<ce.y1&&Ve.y1>ce.y1&&ee(Ve,me,ve,Ie)}))}})}})}function ee(he,ve,Ie,xe){return he.y0+ve>=Ie&&he.y1+ve<=xe&&(he.y0=he.y0+ve,he.y1=he.y1+ve,he.targetLinks.forEach(function(Ae){Ae.y1=Ae.y1+ve}),he.sourceLinks.forEach(function(Ae){Ae.y0=Ae.y0+ve})),he}function re(he,ve,Ie,xe){he.nodes.forEach(function(Ae){xe&&Ae.y+(Ae.y1-Ae.y0)>ve&&(Ae.y=Ae.y-(Ae.y+(Ae.y1-Ae.y0)-ve));var Se=he.links.filter(function(oe){return u(oe.source,Ie)==u(Ae,Ie)}),Te=Se.length;Te>1&&Se.sort(function(oe,ce){if(!oe.circular&&!ce.circular){if(oe.target.column==ce.target.column||!se(oe,ce))return oe.y1-ce.y1;if(oe.target.column>ce.target.column){var me=J(ce,oe);return oe.y1-me}if(ce.target.column>oe.target.column)return J(oe,ce)-ce.y1}return oe.circular&&!ce.circular?oe.circularLinkType=="top"?-1:1:ce.circular&&!oe.circular?ce.circularLinkType=="top"?1:-1:oe.circular&&ce.circular?oe.circularLinkType===ce.circularLinkType&&oe.circularLinkType=="top"?oe.target.column===ce.target.column?oe.target.y1-ce.target.y1:ce.target.column-oe.target.column:oe.circularLinkType===ce.circularLinkType&&oe.circularLinkType=="bottom"?oe.target.column===ce.target.column?ce.target.y1-oe.target.y1:oe.target.column-ce.target.column:oe.circularLinkType=="top"?-1:1:void 0});var Q=Ae.y0;Se.forEach(function(oe){oe.y0=Q+oe.width/2,Q+=oe.width}),Se.forEach(function(oe,ce){if(oe.circularLinkType=="bottom"){for(var me=ce+1,Me=0;me<Te;me++)Me+=Se[me].width;oe.y0=Ae.y1-Me-oe.width/2}})})}function ie(he,ve,Ie){he.nodes.forEach(function(xe){var Ae=he.links.filter(function(Q){return u(Q.target,Ie)==u(xe,Ie)}),Se=Ae.length;Se>1&&Ae.sort(function(Q,oe){if(!Q.circular&&!oe.circular){if(Q.source.column==oe.source.column||!se(Q,oe))return Q.y0-oe.y0;if(oe.source.column<Q.source.column){var ce=W(oe,Q);return Q.y0-ce}if(Q.source.column<oe.source.column)return W(Q,oe)-oe.y0}return Q.circular&&!oe.circular?Q.circularLinkType=="top"?-1:1:oe.circular&&!Q.circular?oe.circularLinkType=="top"?1:-1:Q.circular&&oe.circular?Q.circularLinkType===oe.circularLinkType&&Q.circularLinkType=="top"?Q.source.column===oe.source.column?Q.source.y1-oe.source.y1:Q.source.column-oe.source.column:Q.circularLinkType===oe.circularLinkType&&Q.circularLinkType=="bottom"?Q.source.column===oe.source.column?Q.source.y1-oe.source.y1:oe.source.column-Q.source.column:Q.circularLinkType=="top"?-1:1:void 0});var Te=xe.y0;Ae.forEach(function(Q){Q.y1=Te+Q.width/2,Te+=Q.width}),Ae.forEach(function(Q,oe){if(Q.circularLinkType=="bottom"){for(var ce=oe+1,me=0;ce<Se;ce++)me+=Ae[ce].width;Q.y1=xe.y1-me-Q.width/2}})})}function se(he,ve){return fe(he)==fe(ve)}function fe(he){return he.y0-he.y1>0?"up":"down"}function ye(he,ve){return u(he.source,ve)==u(he.target,ve)}function ge(he,ve,Ie){var xe=he.nodes,Ae=he.links,Se=!1,Te=!1;if(Ae.forEach(function(ce){ce.circularLinkType=="top"?Se=!0:ce.circularLinkType=="bottom"&&(Te=!0)}),Se==0||Te==0){var Q=(0,A.VV)(xe,function(ce){return ce.y0}),oe=(Ie-ve)/((0,A.Fp)(xe,function(ce){return ce.y1})-Q);xe.forEach(function(ce){var me=(ce.y1-ce.y0)*oe;ce.y0=(ce.y0-Q)*oe,ce.y1=ce.y0+me}),Ae.forEach(function(ce){ce.y0=(ce.y0-Q)*oe,ce.y1=(ce.y1-Q)*oe,ce.width=ce.width*oe})}}},30838:function($,R,e){e.r(R),e.d(R,{sankey:function(){return y},sankeyCenter:function(){return s},sankeyJustify:function(){return d},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return u},sankeyRight:function(){return x}});var A=e(33064),k=e(15140);function l(S){return S.target.depth}function T(S){return S.depth}function x(S,_){return _-1-S.height}function d(S,_){return S.sourceLinks.length?S.depth:_-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,A.VV)(S.sourceLinks,l)-1:0}function t(S){return function(){return S}}function o(S,_){return n(S.source,_.source)||S.index-_.index}function r(S,_){return n(S.target,_.target)||S.index-_.index}function n(S,_){return S.y0-_.y0}function a(S){return S.value}function i(S){return(S.y0+S.y1)/2}function c(S){return i(S.source)*S.value}function h(S){return i(S.target)*S.value}function f(S){return S.index}function b(S){return S.nodes}function v(S){return S.links}function g(S,_){var E=S.get(_);if(!E)throw new Error("missing: "+_);return E}function y(){var S=0,_=0,E=1,L=1,C=24,P=8,I=f,U=d,z=b,H=v,F=32;function N(){var W={nodes:z.apply(null,arguments),links:H.apply(null,arguments)};return B(W),j(W),K(W),G(W),V(W),W}function B(W){W.nodes.forEach(function(X,ee){X.index=ee,X.sourceLinks=[],X.targetLinks=[]});var J=(0,k.UI)(W.nodes,I);W.links.forEach(function(X,ee){X.index=ee;var re=X.source,ie=X.target;typeof re!="object"&&(re=X.source=g(J,re)),typeof ie!="object"&&(ie=X.target=g(J,ie)),re.sourceLinks.push(X),ie.targetLinks.push(X)})}function j(W){W.nodes.forEach(function(J){J.value=Math.max((0,A.Sm)(J.sourceLinks,a),(0,A.Sm)(J.targetLinks,a))})}function K(W){var J,X,ee;for(J=W.nodes,X=[],ee=0;J.length;++ee,J=X,X=[])J.forEach(function(ie){ie.depth=ee,ie.sourceLinks.forEach(function(se){X.indexOf(se.target)<0&&X.push(se.target)})});for(J=W.nodes,X=[],ee=0;J.length;++ee,J=X,X=[])J.forEach(function(ie){ie.height=ee,ie.targetLinks.forEach(function(se){X.indexOf(se.source)<0&&X.push(se.source)})});var re=(E-S-C)/(ee-1);W.nodes.forEach(function(ie){ie.x1=(ie.x0=S+Math.max(0,Math.min(ee-1,Math.floor(U.call(null,ie,ee))))*re)+C})}function G(W){var J=(0,k.b1)().key(function(fe){return fe.x0}).sortKeys(A.j2).entries(W.nodes).map(function(fe){return fe.values});(function(){var fe=(0,A.Fp)(J,function(he){return he.length}),ye=.6666666666666666*(L-_)/(fe-1);P>ye&&(P=ye);var ge=(0,A.VV)(J,function(he){return(L-_-(he.length-1)*P)/(0,A.Sm)(he,a)});J.forEach(function(he){he.forEach(function(ve,Ie){ve.y1=(ve.y0=Ie)+ve.value*ge})}),W.links.forEach(function(he){he.width=he.value*ge})})(),se();for(var X=1,ee=F;ee>0;--ee)ie(X*=.99),se(),re(X),se();function re(fe){J.forEach(function(ye){ye.forEach(function(ge){if(ge.targetLinks.length){var he=((0,A.Sm)(ge.targetLinks,c)/(0,A.Sm)(ge.targetLinks,a)-i(ge))*fe;ge.y0+=he,ge.y1+=he}})})}function ie(fe){J.slice().reverse().forEach(function(ye){ye.forEach(function(ge){if(ge.sourceLinks.length){var he=((0,A.Sm)(ge.sourceLinks,h)/(0,A.Sm)(ge.sourceLinks,a)-i(ge))*fe;ge.y0+=he,ge.y1+=he}})})}function se(){J.forEach(function(fe){var ye,ge,he,ve=_,Ie=fe.length;for(fe.sort(n),he=0;he<Ie;++he)(ge=ve-(ye=fe[he]).y0)>0&&(ye.y0+=ge,ye.y1+=ge),ve=ye.y1+P;if((ge=ve-P-L)>0)for(ve=ye.y0-=ge,ye.y1-=ge,he=Ie-2;he>=0;--he)(ge=(ye=fe[he]).y1+P-ve)>0&&(ye.y0-=ge,ye.y1-=ge),ve=ye.y0})}}function V(W){W.nodes.forEach(function(J){J.sourceLinks.sort(r),J.targetLinks.sort(o)}),W.nodes.forEach(function(J){var X=J.y0,ee=X;J.sourceLinks.forEach(function(re){re.y0=X+re.width/2,X+=re.width}),J.targetLinks.forEach(function(re){re.y1=ee+re.width/2,ee+=re.width})})}return N.update=function(W){return V(W),W},N.nodeId=function(W){return arguments.length?(I=typeof W=="function"?W:t(W),N):I},N.nodeAlign=function(W){return arguments.length?(U=typeof W=="function"?W:t(W),N):U},N.nodeWidth=function(W){return arguments.length?(C=+W,N):C},N.nodePadding=function(W){return arguments.length?(P=+W,N):P},N.nodes=function(W){return arguments.length?(z=typeof W=="function"?W:t(W),N):z},N.links=function(W){return arguments.length?(H=typeof W=="function"?W:t(W),N):H},N.size=function(W){return arguments.length?(S=_=0,E=+W[0],L=+W[1],N):[E-S,L-_]},N.extent=function(W){return arguments.length?(S=+W[0][0],E=+W[1][0],_=+W[0][1],L=+W[1][1],N):[[S,_],[E,L]]},N.iterations=function(W){return arguments.length?(F=+W,N):F},N}var p=e(45879);function m(S){return[S.source.x1,S.y0]}function w(S){return[S.target.x0,S.y1]}function u(){return(0,p.h5)().source(m).target(w)}},39898:function($,R,e){var A,k;(function(){var l={version:"3.8.0"},T=[].slice,x=function(te){return T.call(te)},d=self.document;function s(te){return te&&(te.ownerDocument||te.document||te).documentElement}function t(te){return te&&(te.ownerDocument&&te.ownerDocument.defaultView||te.document&&te||te.defaultView)}if(d)try{x(d.documentElement.childNodes)[0].nodeType}catch{x=function(ue){for(var we=ue.length,Oe=new Array(we);we--;)Oe[we]=ue[we];return Oe}}if(Date.now||(Date.now=function(){return+new Date}),d)try{d.createElement("DIV").style.setProperty("opacity",0,"")}catch{var o=this.Element.prototype,r=o.setAttribute,n=o.setAttributeNS,a=this.CSSStyleDeclaration.prototype,i=a.setProperty;o.setAttribute=function(ue,we){r.call(this,ue,we+"")},o.setAttributeNS=function(ue,we,Oe){n.call(this,ue,we,Oe+"")},a.setProperty=function(ue,we,Oe){i.call(this,ue,we+"",Oe)}}function c(te,ue){return te<ue?-1:te>ue?1:te>=ue?0:NaN}function h(te){return te===null?NaN:+te}function f(te){return!isNaN(te)}function b(te){return{left:function(ue,we,Oe,De){for(arguments.length<3&&(Oe=0),arguments.length<4&&(De=ue.length);Oe<De;){var Ue=Oe+De>>>1;te(ue[Ue],we)<0?Oe=Ue+1:De=Ue}return Oe},right:function(ue,we,Oe,De){for(arguments.length<3&&(Oe=0),arguments.length<4&&(De=ue.length);Oe<De;){var Ue=Oe+De>>>1;te(ue[Ue],we)>0?De=Ue:Oe=Ue+1}return Oe}}}l.ascending=c,l.descending=function(te,ue){return ue<te?-1:ue>te?1:ue>=te?0:NaN},l.min=function(te,ue){var we,Oe,De=-1,Ue=te.length;if(arguments.length===1){for(;++De<Ue;)if((Oe=te[De])!=null&&Oe>=Oe){we=Oe;break}for(;++De<Ue;)(Oe=te[De])!=null&&we>Oe&&(we=Oe)}else{for(;++De<Ue;)if((Oe=ue.call(te,te[De],De))!=null&&Oe>=Oe){we=Oe;break}for(;++De<Ue;)(Oe=ue.call(te,te[De],De))!=null&&we>Oe&&(we=Oe)}return we},l.max=function(te,ue){var we,Oe,De=-1,Ue=te.length;if(arguments.length===1){for(;++De<Ue;)if((Oe=te[De])!=null&&Oe>=Oe){we=Oe;break}for(;++De<Ue;)(Oe=te[De])!=null&&Oe>we&&(we=Oe)}else{for(;++De<Ue;)if((Oe=ue.call(te,te[De],De))!=null&&Oe>=Oe){we=Oe;break}for(;++De<Ue;)(Oe=ue.call(te,te[De],De))!=null&&Oe>we&&(we=Oe)}return we},l.extent=function(te,ue){var we,Oe,De,Ue=-1,We=te.length;if(arguments.length===1){for(;++Ue<We;)if((Oe=te[Ue])!=null&&Oe>=Oe){we=De=Oe;break}for(;++Ue<We;)(Oe=te[Ue])!=null&&(we>Oe&&(we=Oe),De<Oe&&(De=Oe))}else{for(;++Ue<We;)if((Oe=ue.call(te,te[Ue],Ue))!=null&&Oe>=Oe){we=De=Oe;break}for(;++Ue<We;)(Oe=ue.call(te,te[Ue],Ue))!=null&&(we>Oe&&(we=Oe),De<Oe&&(De=Oe))}return[we,De]},l.sum=function(te,ue){var we,Oe=0,De=te.length,Ue=-1;if(arguments.length===1)for(;++Ue<De;)f(we=+te[Ue])&&(Oe+=we);else for(;++Ue<De;)f(we=+ue.call(te,te[Ue],Ue))&&(Oe+=we);return Oe},l.mean=function(te,ue){var we,Oe=0,De=te.length,Ue=-1,We=De;if(arguments.length===1)for(;++Ue<De;)f(we=h(te[Ue]))?Oe+=we:--We;else for(;++Ue<De;)f(we=h(ue.call(te,te[Ue],Ue)))?Oe+=we:--We;if(We)return Oe/We},l.quantile=function(te,ue){var we=(te.length-1)*ue+1,Oe=Math.floor(we),De=+te[Oe-1],Ue=we-Oe;return Ue?De+Ue*(te[Oe]-De):De},l.median=function(te,ue){var we,Oe=[],De=te.length,Ue=-1;if(arguments.length===1)for(;++Ue<De;)f(we=h(te[Ue]))&&Oe.push(we);else for(;++Ue<De;)f(we=h(ue.call(te,te[Ue],Ue)))&&Oe.push(we);if(Oe.length)return l.quantile(Oe.sort(c),.5)},l.variance=function(te,ue){var we,Oe,De=te.length,Ue=0,We=0,Ke=-1,it=0;if(arguments.length===1)for(;++Ke<De;)f(we=h(te[Ke]))&&(We+=(Oe=we-Ue)*(we-(Ue+=Oe/++it)));else for(;++Ke<De;)f(we=h(ue.call(te,te[Ke],Ke)))&&(We+=(Oe=we-Ue)*(we-(Ue+=Oe/++it)));if(it>1)return We/(it-1)},l.deviation=function(){var te=l.variance.apply(this,arguments);return te&&Math.sqrt(te)};var v=b(c);function g(te){return te.length}l.bisectLeft=v.left,l.bisect=l.bisectRight=v.right,l.bisector=function(te){return b(te.length===1?function(ue,we){return c(te(ue),we)}:te)},l.shuffle=function(te,ue,we){(Ue=arguments.length)<3&&(we=te.length,Ue<2&&(ue=0));for(var Oe,De,Ue=we-ue;Ue;)De=Math.random()*Ue--|0,Oe=te[Ue+ue],te[Ue+ue]=te[De+ue],te[De+ue]=Oe;return te},l.permute=function(te,ue){for(var we=ue.length,Oe=new Array(we);we--;)Oe[we]=te[ue[we]];return Oe},l.pairs=function(te){for(var ue=0,we=te.length-1,Oe=te[0],De=new Array(we<0?0:we);ue<we;)De[ue]=[Oe,Oe=te[++ue]];return De},l.transpose=function(te){if(!(De=te.length))return[];for(var ue=-1,we=l.min(te,g),Oe=new Array(we);++ue<we;)for(var De,Ue=-1,We=Oe[ue]=new Array(De);++Ue<De;)We[Ue]=te[Ue][ue];return Oe},l.zip=function(){return l.transpose(arguments)},l.keys=function(te){var ue=[];for(var we in te)ue.push(we);return ue},l.values=function(te){var ue=[];for(var we in te)ue.push(te[we]);return ue},l.entries=function(te){var ue=[];for(var we in te)ue.push({key:we,value:te[we]});return ue},l.merge=function(te){for(var ue,we,Oe,De=te.length,Ue=-1,We=0;++Ue<De;)We+=te[Ue].length;for(we=new Array(We);--De>=0;)for(ue=(Oe=te[De]).length;--ue>=0;)we[--We]=Oe[ue];return we};var y=Math.abs;function p(te){for(var ue=1;te*ue%1;)ue*=10;return ue}function m(te,ue){for(var we in ue)Object.defineProperty(te.prototype,we,{value:ue[we],enumerable:!1})}function w(){this._=Object.create(null)}function u(te){return(te+="")=="__proto__"||te[0]==="\0"?"\0"+te:te}function S(te){return(te+="")[0]==="\0"?te.slice(1):te}function _(te){return u(te)in this._}function E(te){return(te=u(te))in this._&&delete this._[te]}function L(){var te=[];for(var ue in this._)te.push(S(ue));return te}function C(){var te=0;for(var ue in this._)++te;return te}function P(){for(var te in this._)return!1;return!0}function I(){this._=Object.create(null)}function U(te){return te}function z(te,ue,we){return function(){var Oe=we.apply(ue,arguments);return Oe===ue?te:Oe}}function H(te,ue){if(ue in te)return ue;ue=ue.charAt(0).toUpperCase()+ue.slice(1);for(var we=0,Oe=F.length;we<Oe;++we){var De=F[we]+ue;if(De in te)return De}}l.range=function(te,ue,we){if(arguments.length<3&&(we=1,arguments.length<2&&(ue=te,te=0)),(ue-te)/we==1/0)throw new Error("infinite range");var Oe,De=[],Ue=p(y(we)),We=-1;if(te*=Ue,ue*=Ue,(we*=Ue)<0)for(;(Oe=te+we*++We)>ue;)De.push(Oe/Ue);else for(;(Oe=te+we*++We)<ue;)De.push(Oe/Ue);return De},l.map=function(te,ue){var we=new w;if(te instanceof w)te.forEach(function(Ke,it){we.set(Ke,it)});else if(Array.isArray(te)){var Oe,De=-1,Ue=te.length;if(arguments.length===1)for(;++De<Ue;)we.set(De,te[De]);else for(;++De<Ue;)we.set(ue.call(te,Oe=te[De],De),Oe)}else for(var We in te)we.set(We,te[We]);return we},m(w,{has:_,get:function(te){return this._[u(te)]},set:function(te,ue){return this._[u(te)]=ue},remove:E,keys:L,values:function(){var te=[];for(var ue in this._)te.push(this._[ue]);return te},entries:function(){var te=[];for(var ue in this._)te.push({key:S(ue),value:this._[ue]});return te},size:C,empty:P,forEach:function(te){for(var ue in this._)te.call(this,S(ue),this._[ue])}}),l.nest=function(){var te,ue,we={},Oe=[],De=[];function Ue(Ke,it,lt){if(lt>=Oe.length)return ue?ue.call(we,it):te?it.sort(te):it;for(var At,Ft,Bt,Zt,un=-1,Wt=it.length,en=Oe[lt++],Jt=new w;++un<Wt;)(Zt=Jt.get(At=en(Ft=it[un])))?Zt.push(Ft):Jt.set(At,[Ft]);return Ke?(Ft=Ke(),Bt=function(wn,pn){Ft.set(wn,Ue(Ke,pn,lt))}):(Ft={},Bt=function(wn,pn){Ft[wn]=Ue(Ke,pn,lt)}),Jt.forEach(Bt),Ft}function We(Ke,it){if(it>=Oe.length)return Ke;var lt=[],At=De[it++];return Ke.forEach(function(Ft,Bt){lt.push({key:Ft,values:We(Bt,it)})}),At?lt.sort(function(Ft,Bt){return At(Ft.key,Bt.key)}):lt}return we.map=function(Ke,it){return Ue(it,Ke,0)},we.entries=function(Ke){return We(Ue(l.map,Ke,0),0)},we.key=function(Ke){return Oe.push(Ke),we},we.sortKeys=function(Ke){return De[Oe.length-1]=Ke,we},we.sortValues=function(Ke){return te=Ke,we},we.rollup=function(Ke){return ue=Ke,we},we},l.set=function(te){var ue=new I;if(te)for(var we=0,Oe=te.length;we<Oe;++we)ue.add(te[we]);return ue},m(I,{has:_,add:function(te){return this._[u(te+="")]=!0,te},remove:E,values:L,size:C,empty:P,forEach:function(te){for(var ue in this._)te.call(this,S(ue))}}),l.behavior={},l.rebind=function(te,ue){for(var we,Oe=1,De=arguments.length;++Oe<De;)te[we=arguments[Oe]]=z(te,ue,ue[we]);return te};var F=["webkit","ms","moz","Moz","o","O"];function N(){}function B(){}function j(te){var ue=[],we=new w;function Oe(){for(var De,Ue=ue,We=-1,Ke=Ue.length;++We<Ke;)(De=Ue[We].on)&&De.apply(this,arguments);return te}return Oe.on=function(De,Ue){var We,Ke=we.get(De);return arguments.length<2?Ke&&Ke.on:(Ke&&(Ke.on=null,ue=ue.slice(0,We=ue.indexOf(Ke)).concat(ue.slice(We+1)),we.remove(De)),Ue&&ue.push(we.set(De,{on:Ue})),te)},Oe}function K(){l.event.preventDefault()}function G(){for(var te,ue=l.event;te=ue.sourceEvent;)ue=te;return ue}function V(te){for(var ue=new B,we=0,Oe=arguments.length;++we<Oe;)ue[arguments[we]]=j(ue);return ue.of=function(De,Ue){return function(We){try{var Ke=We.sourceEvent=l.event;We.target=te,l.event=We,ue[We.type].apply(De,Ue)}finally{l.event=Ke}}},ue}l.dispatch=function(){for(var te=new B,ue=-1,we=arguments.length;++ue<we;)te[arguments[ue]]=j(te);return te},B.prototype.on=function(te,ue){var we=te.indexOf("."),Oe="";if(we>=0&&(Oe=te.slice(we+1),te=te.slice(0,we)),te)return arguments.length<2?this[te].on(Oe):this[te].on(Oe,ue);if(arguments.length===2){if(ue==null)for(te in this)this.hasOwnProperty(te)&&this[te].on(Oe,null);return this}},l.event=null,l.requote=function(te){return te.replace(W,"\\$&")};var W=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,J={}.__proto__?function(te,ue){te.__proto__=ue}:function(te,ue){for(var we in ue)te[we]=ue[we]};function X(te){return J(te,se),te}var ee=function(te,ue){return ue.querySelector(te)},re=function(te,ue){return ue.querySelectorAll(te)},ie=function(te,ue){var we=te.matches||te[H(te,"matchesSelector")];return ie=function(Oe,De){return we.call(Oe,De)},ie(te,ue)};typeof Sizzle=="function"&&(ee=function(te,ue){return Sizzle(te,ue)[0]||null},re=Sizzle,ie=Sizzle.matchesSelector),l.selection=function(){return l.select(d.documentElement)};var se=l.selection.prototype=[];function fe(te){return typeof te=="function"?te:function(){return ee(te,this)}}function ye(te){return typeof te=="function"?te:function(){return re(te,this)}}se.select=function(te){var ue,we,Oe,De,Ue=[];te=fe(te);for(var We=-1,Ke=this.length;++We<Ke;){Ue.push(ue=[]),ue.parentNode=(Oe=this[We]).parentNode;for(var it=-1,lt=Oe.length;++it<lt;)(De=Oe[it])?(ue.push(we=te.call(De,De.__data__,it,We)),we&&"__data__"in De&&(we.__data__=De.__data__)):ue.push(null)}return X(Ue)},se.selectAll=function(te){var ue,we,Oe=[];te=ye(te);for(var De=-1,Ue=this.length;++De<Ue;)for(var We=this[De],Ke=-1,it=We.length;++Ke<it;)(we=We[Ke])&&(Oe.push(ue=x(te.call(we,we.__data__,Ke,De))),ue.parentNode=we);return X(Oe)};var ge="http://www.w3.org/1999/xhtml",he={svg:"http://www.w3.org/2000/svg",xhtml:ge,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ve(te,ue){return te=l.ns.qualify(te),ue==null?te.local?function(){this.removeAttributeNS(te.space,te.local)}:function(){this.removeAttribute(te)}:typeof ue=="function"?te.local?function(){var we=ue.apply(this,arguments);we==null?this.removeAttributeNS(te.space,te.local):this.setAttributeNS(te.space,te.local,we)}:function(){var we=ue.apply(this,arguments);we==null?this.removeAttribute(te):this.setAttribute(te,we)}:te.local?function(){this.setAttributeNS(te.space,te.local,ue)}:function(){this.setAttribute(te,ue)}}function Ie(te){return te.trim().replace(/\s+/g," ")}function xe(te){return new RegExp("(?:^|\\s+)"+l.requote(te)+"(?:\\s+|$)","g")}function Ae(te){return(te+"").trim().split(/^|\s+/)}function Se(te,ue){var we=(te=Ae(te).map(Te)).length;return typeof ue=="function"?function(){for(var Oe=-1,De=ue.apply(this,arguments);++Oe<we;)te[Oe](this,De)}:function(){for(var Oe=-1;++Oe<we;)te[Oe](this,ue)}}function Te(te){var ue=xe(te);return function(we,Oe){if(De=we.classList)return Oe?De.add(te):De.remove(te);var De=we.getAttribute("class")||"";Oe?(ue.lastIndex=0,ue.test(De)||we.setAttribute("class",Ie(De+" "+te))):we.setAttribute("class",Ie(De.replace(ue," ")))}}function Q(te,ue,we){return ue==null?function(){this.style.removeProperty(te)}:typeof ue=="function"?function(){var Oe=ue.apply(this,arguments);Oe==null?this.style.removeProperty(te):this.style.setProperty(te,Oe,we)}:function(){this.style.setProperty(te,ue,we)}}function oe(te,ue){return ue==null?function(){delete this[te]}:typeof ue=="function"?function(){var we=ue.apply(this,arguments);we==null?delete this[te]:this[te]=we}:function(){this[te]=ue}}function ce(te){return typeof te=="function"?te:(te=l.ns.qualify(te)).local?function(){return this.ownerDocument.createElementNS(te.space,te.local)}:function(){var ue=this.ownerDocument,we=this.namespaceURI;return we===ge&&ue.documentElement.namespaceURI===ge?ue.createElement(te):ue.createElementNS(we,te)}}function me(){var te=this.parentNode;te&&te.removeChild(this)}function Me(te){return{__data__:te}}function Re(te){return function(){return ie(this,te)}}function Ce(te){return arguments.length||(te=c),function(ue,we){return ue&&we?te(ue.__data__,we.__data__):!ue-!we}}function ze(te,ue){for(var we=0,Oe=te.length;we<Oe;we++)for(var De,Ue=te[we],We=0,Ke=Ue.length;We<Ke;We++)(De=Ue[We])&&ue(De,We,we);return te}function le(te){return J(te,de),te}l.ns={prefix:he,qualify:function(te){var ue=te.indexOf(":"),we=te;return ue>=0&&(we=te.slice(0,ue))!=="xmlns"&&(te=te.slice(ue+1)),he.hasOwnProperty(we)?{space:he[we],local:te}:te}},se.attr=function(te,ue){if(arguments.length<2){if(typeof te=="string"){var we=this.node();return(te=l.ns.qualify(te)).local?we.getAttributeNS(te.space,te.local):we.getAttribute(te)}for(ue in te)this.each(ve(ue,te[ue]));return this}return this.each(ve(te,ue))},se.classed=function(te,ue){if(arguments.length<2){if(typeof te=="string"){var we=this.node(),Oe=(te=Ae(te)).length,De=-1;if(ue=we.classList){for(;++De<Oe;)if(!ue.contains(te[De]))return!1}else for(ue=we.getAttribute("class");++De<Oe;)if(!xe(te[De]).test(ue))return!1;return!0}for(ue in te)this.each(Se(ue,te[ue]));return this}return this.each(Se(te,ue))},se.style=function(te,ue,we){var Oe=arguments.length;if(Oe<3){if(typeof te!="string"){for(we in Oe<2&&(ue=""),te)this.each(Q(we,te[we],ue));return this}if(Oe<2){var De=this.node();return t(De).getComputedStyle(De,null).getPropertyValue(te)}we=""}return this.each(Q(te,ue,we))},se.property=function(te,ue){if(arguments.length<2){if(typeof te=="string")return this.node()[te];for(ue in te)this.each(oe(ue,te[ue]));return this}return this.each(oe(te,ue))},se.text=function(te){return arguments.length?this.each(typeof te=="function"?function(){var ue=te.apply(this,arguments);this.textContent=ue??""}:te==null?function(){this.textContent=""}:function(){this.textContent=te}):this.node().textContent},se.html=function(te){return arguments.length?this.each(typeof te=="function"?function(){var ue=te.apply(this,arguments);this.innerHTML=ue??""}:te==null?function(){this.innerHTML=""}:function(){this.innerHTML=te}):this.node().innerHTML},se.append=function(te){return te=ce(te),this.select(function(){return this.appendChild(te.apply(this,arguments))})},se.insert=function(te,ue){return te=ce(te),ue=fe(ue),this.select(function(){return this.insertBefore(te.apply(this,arguments),ue.apply(this,arguments)||null)})},se.remove=function(){return this.each(me)},se.data=function(te,ue){var we,Oe,De=-1,Ue=this.length;if(!arguments.length){for(te=new Array(Ue=(we=this[0]).length);++De<Ue;)(Oe=we[De])&&(te[De]=Oe.__data__);return te}function We(At,Ft){var Bt,Zt,un,Wt=At.length,en=Ft.length,Jt=Math.min(Wt,en),wn=new Array(en),pn=new Array(en),Qt=new Array(Wt);if(ue){var Ln,Rn=new w,Xn=new Array(Wt);for(Bt=-1;++Bt<Wt;)(Zt=At[Bt])&&(Rn.has(Ln=ue.call(Zt,Zt.__data__,Bt))?Qt[Bt]=Zt:Rn.set(Ln,Zt),Xn[Bt]=Ln);for(Bt=-1;++Bt<en;)(Zt=Rn.get(Ln=ue.call(Ft,un=Ft[Bt],Bt)))?Zt!==!0&&(wn[Bt]=Zt,Zt.__data__=un):pn[Bt]=Me(un),Rn.set(Ln,!0);for(Bt=-1;++Bt<Wt;)Bt in Xn&&Rn.get(Xn[Bt])!==!0&&(Qt[Bt]=At[Bt])}else{for(Bt=-1;++Bt<Jt;)Zt=At[Bt],un=Ft[Bt],Zt?(Zt.__data__=un,wn[Bt]=Zt):pn[Bt]=Me(un);for(;Bt<en;++Bt)pn[Bt]=Me(Ft[Bt]);for(;Bt<Wt;++Bt)Qt[Bt]=At[Bt]}pn.update=wn,pn.parentNode=wn.parentNode=Qt.parentNode=At.parentNode,Ke.push(pn),it.push(wn),lt.push(Qt)}var Ke=le([]),it=X([]),lt=X([]);if(typeof te=="function")for(;++De<Ue;)We(we=this[De],te.call(we,we.parentNode.__data__,De));else for(;++De<Ue;)We(we=this[De],te);return it.enter=function(){return Ke},it.exit=function(){return lt},it},se.datum=function(te){return arguments.length?this.property("__data__",te):this.property("__data__")},se.filter=function(te){var ue,we,Oe,De=[];typeof te!="function"&&(te=Re(te));for(var Ue=0,We=this.length;Ue<We;Ue++){De.push(ue=[]),ue.parentNode=(we=this[Ue]).parentNode;for(var Ke=0,it=we.length;Ke<it;Ke++)(Oe=we[Ke])&&te.call(Oe,Oe.__data__,Ke,Ue)&&ue.push(Oe)}return X(De)},se.order=function(){for(var te=-1,ue=this.length;++te<ue;)for(var we,Oe=this[te],De=Oe.length-1,Ue=Oe[De];--De>=0;)(we=Oe[De])&&(Ue&&Ue!==we.nextSibling&&Ue.parentNode.insertBefore(we,Ue),Ue=we);return this},se.sort=function(te){te=Ce.apply(this,arguments);for(var ue=-1,we=this.length;++ue<we;)this[ue].sort(te);return this.order()},se.each=function(te){return ze(this,function(ue,we,Oe){te.call(ue,ue.__data__,we,Oe)})},se.call=function(te){var ue=x(arguments);return te.apply(ue[0]=this,ue),this},se.empty=function(){return!this.node()},se.node=function(){for(var te=0,ue=this.length;te<ue;te++)for(var we=this[te],Oe=0,De=we.length;Oe<De;Oe++){var Ue=we[Oe];if(Ue)return Ue}return null},se.size=function(){var te=0;return ze(this,function(){++te}),te};var de=[];function be(te){var ue,we;return function(Oe,De,Ue){var We,Ke=te[Ue].update,it=Ke.length;for(Ue!=we&&(we=Ue,ue=0),De>=ue&&(ue=De+1);!(We=Ke[ue])&&++ue<it;);return We}}function Fe(te,ue,we){var Oe="__on"+te,De=te.indexOf("."),Ue=He;De>0&&(te=te.slice(0,De));var We=Ve.get(te);function Ke(){var it=this[Oe];it&&(this.removeEventListener(te,it,it.$),delete this[Oe])}return We&&(te=We,Ue=rt),De?ue?function(){var it=Ue(ue,x(arguments));Ke.call(this),this.addEventListener(te,this[Oe]=it,it.$=we),it._=ue}:Ke:ue?N:function(){var it,lt=new RegExp("^__on([^.]+)"+l.requote(te)+"$");for(var At in this)if(it=At.match(lt)){var Ft=this[At];this.removeEventListener(it[1],Ft,Ft.$),delete this[At]}}}l.selection.enter=le,l.selection.enter.prototype=de,de.append=se.append,de.empty=se.empty,de.node=se.node,de.call=se.call,de.size=se.size,de.select=function(te){for(var ue,we,Oe,De,Ue,We=[],Ke=-1,it=this.length;++Ke<it;){Oe=(De=this[Ke]).update,We.push(ue=[]),ue.parentNode=De.parentNode;for(var lt=-1,At=De.length;++lt<At;)(Ue=De[lt])?(ue.push(Oe[lt]=we=te.call(De.parentNode,Ue.__data__,lt,Ke)),we.__data__=Ue.__data__):ue.push(null)}return X(We)},de.insert=function(te,ue){return arguments.length<2&&(ue=be(this)),se.insert.call(this,te,ue)},l.select=function(te){var ue;return typeof te=="string"?(ue=[ee(te,d)]).parentNode=d.documentElement:(ue=[te]).parentNode=s(te),X([ue])},l.selectAll=function(te){var ue;return typeof te=="string"?(ue=x(re(te,d))).parentNode=d.documentElement:(ue=x(te)).parentNode=null,X([ue])},se.on=function(te,ue,we){var Oe=arguments.length;if(Oe<3){if(typeof te!="string"){for(we in Oe<2&&(ue=!1),te)this.each(Fe(we,te[we],ue));return this}if(Oe<2)return(Oe=this.node()["__on"+te])&&Oe._;we=!1}return this.each(Fe(te,ue,we))};var Ve=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});function He(te,ue){return function(we){var Oe=l.event;l.event=we,ue[0]=this.__data__;try{te.apply(this,ue)}finally{l.event=Oe}}}function rt(te,ue){var we=He(te,ue);return function(Oe){var De=this,Ue=Oe.relatedTarget;Ue&&(Ue===De||8&Ue.compareDocumentPosition(De))||we.call(De,Oe)}}d&&Ve.forEach(function(te){"on"+te in d&&Ve.remove(te)});var tt,ot=0;function ht(te){var ue=".dragsuppress-"+ ++ot,we="click"+ue,Oe=l.select(t(te)).on("touchmove"+ue,K).on("dragstart"+ue,K).on("selectstart"+ue,K);if(tt==null&&(tt=!("onselectstart"in te)&&H(te.style,"userSelect")),tt){var De=s(te).style,Ue=De[tt];De[tt]="none"}return function(We){if(Oe.on(ue,null),tt&&(De[tt]=Ue),We){var Ke=function(){Oe.on(we,null)};Oe.on(we,function(){K(),Ke()},!0),setTimeout(Ke,0)}}}l.mouse=function(te){return dt(te,G())};var _t=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function dt(te,ue){ue.changedTouches&&(ue=ue.changedTouches[0]);var we=te.ownerSVGElement||te;if(we.createSVGPoint){var Oe=we.createSVGPoint();if(_t<0){var De=t(te);if(De.scrollX||De.scrollY){var Ue=(we=l.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();_t=!(Ue.f||Ue.e),we.remove()}}return _t?(Oe.x=ue.pageX,Oe.y=ue.pageY):(Oe.x=ue.clientX,Oe.y=ue.clientY),[(Oe=Oe.matrixTransform(te.getScreenCTM().inverse())).x,Oe.y]}var We=te.getBoundingClientRect();return[ue.clientX-We.left-te.clientLeft,ue.clientY-We.top-te.clientTop]}function bt(){return l.event.changedTouches[0].identifier}l.touch=function(te,ue,we){if(arguments.length<3&&(we=ue,ue=G().changedTouches),ue){for(var Oe,De=0,Ue=ue.length;De<Ue;++De)if((Oe=ue[De]).identifier===we)return dt(te,Oe)}},l.behavior.drag=function(){var te=V(De,"drag","dragstart","dragend"),ue=null,we=Ue(N,l.mouse,t,"mousemove","mouseup"),Oe=Ue(bt,l.touch,U,"touchmove","touchend");function De(){this.on("mousedown.drag",we).on("touchstart.drag",Oe)}function Ue(We,Ke,it,lt,At){return function(){var Ft,Bt=this,Zt=l.event.target.correspondingElement||l.event.target,un=Bt.parentNode,Wt=te.of(Bt,arguments),en=0,Jt=We(),wn=".drag"+(Jt==null?"":"-"+Jt),pn=l.select(it(Zt)).on(lt+wn,Rn).on(At+wn,Xn),Qt=ht(Zt),Ln=Ke(un,Jt);function Rn(){var Jn,vr,yr=Ke(un,Jt);yr&&(Jn=yr[0]-Ln[0],vr=yr[1]-Ln[1],en|=Jn|vr,Ln=yr,Wt({type:"drag",x:yr[0]+Ft[0],y:yr[1]+Ft[1],dx:Jn,dy:vr}))}function Xn(){Ke(un,Jt)&&(pn.on(lt+wn,null).on(At+wn,null),Qt(en),Wt({type:"dragend"}))}Ft=ue?[(Ft=ue.apply(Bt,arguments)).x-Ln[0],Ft.y-Ln[1]]:[0,0],Wt({type:"dragstart"})}}return De.origin=function(We){return arguments.length?(ue=We,De):ue},l.rebind(De,te,"on")},l.touches=function(te,ue){return arguments.length<2&&(ue=G().touches),ue?x(ue).map(function(we){var Oe=dt(te,we);return Oe.identifier=we.identifier,Oe}):[]};var St=1e-6,Et=Math.PI,zt=2*Et,Ut=zt-St,Pt=Et/2,Ze=Et/180,Ye=180/Et;function Be(te){return te>1?Pt:te<-1?-Pt:Math.asin(te)}function ke(te){return((te=Math.exp(te))+1/te)/2}var Pe=Math.SQRT2;l.interpolateZoom=function(te,ue){var we,Oe,De=te[0],Ue=te[1],We=te[2],Ke=ue[0],it=ue[1],lt=ue[2],At=Ke-De,Ft=it-Ue,Bt=At*At+Ft*Ft;if(Bt<1e-12)Oe=Math.log(lt/We)/Pe,we=function(wn){return[De+wn*At,Ue+wn*Ft,We*Math.exp(Pe*wn*Oe)]};else{var Zt=Math.sqrt(Bt),un=(lt*lt-We*We+4*Bt)/(2*We*2*Zt),Wt=(lt*lt-We*We-4*Bt)/(2*lt*2*Zt),en=Math.log(Math.sqrt(un*un+1)-un),Jt=Math.log(Math.sqrt(Wt*Wt+1)-Wt);Oe=(Jt-en)/Pe,we=function(wn){var pn,Qt=wn*Oe,Ln=ke(en),Rn=We/(2*Zt)*(Ln*(pn=Pe*Qt+en,((pn=Math.exp(2*pn))-1)/(pn+1))-function(Xn){return((Xn=Math.exp(Xn))-1/Xn)/2}(en));return[De+Rn*At,Ue+Rn*Ft,We*Ln/ke(Pe*Qt+en)]}}return we.duration=1e3*Oe,we},l.behavior.zoom=function(){var te,ue,we,Oe,De,Ue,We,Ke,it,lt={x:0,y:0,k:1},At=[960,500],Ft=nt,Bt=250,Zt=0,un="mousedown.zoom",Wt="mousemove.zoom",en="mouseup.zoom",Jt="touchstart.zoom",wn=V(pn,"zoomstart","zoom","zoomend");function pn(fr){fr.on(un,pr).on(Xe+".zoom",Vr).on("dblclick.zoom",Hr).on(Jt,kr)}function Qt(fr){return[(fr[0]-lt.x)/lt.k,(fr[1]-lt.y)/lt.k]}function Ln(fr){lt.k=Math.max(Ft[0],Math.min(Ft[1],fr))}function Rn(fr,Ar){Ar=function(Dr){return[Dr[0]*lt.k+lt.x,Dr[1]*lt.k+lt.y]}(Ar),lt.x+=fr[0]-Ar[0],lt.y+=fr[1]-Ar[1]}function Xn(fr,Ar,Dr,zr){fr.__chart__={x:lt.x,y:lt.y,k:lt.k},Ln(Math.pow(2,zr)),Rn(ue=Ar,Dr),fr=l.select(fr),Bt>0&&(fr=fr.transition().duration(Bt)),fr.call(pn.event)}function Jn(){We&&We.domain(Ue.range().map(function(fr){return(fr-lt.x)/lt.k}).map(Ue.invert)),it&&it.domain(Ke.range().map(function(fr){return(fr-lt.y)/lt.k}).map(Ke.invert))}function vr(fr){Zt++||fr({type:"zoomstart"})}function yr(fr){Jn(),fr({type:"zoom",scale:lt.k,translate:[lt.x,lt.y]})}function sr(fr){--Zt||(fr({type:"zoomend"}),ue=null)}function pr(){var fr=this,Ar=wn.of(fr,arguments),Dr=0,zr=l.select(t(fr)).on(Wt,$r).on(en,ui),Wr=Qt(l.mouse(fr)),Zr=ht(fr);function $r(){Dr=1,Rn(l.mouse(fr),Wr),yr(Ar)}function ui(){zr.on(Wt,null).on(en,null),Zr(Dr),sr(Ar)}fi.call(fr),vr(Ar)}function kr(){var fr,Ar=this,Dr=wn.of(Ar,arguments),zr={},Wr=0,Zr=".zoom-"+l.event.changedTouches[0].identifier,$r="touchmove"+Zr,ui="touchend"+Zr,yi=[],hi=l.select(Ar),si=ht(Ar);function ci(){var Fi=l.touches(Ar);return fr=lt.k,Fi.forEach(function(Br){Br.identifier in zr&&(zr[Br.identifier]=Qt(Br))}),Fi}function pi(){var Fi=l.event.target;l.select(Fi).on($r,Si).on(ui,So),yi.push(Fi);for(var Br=l.event.changedTouches,Gi=0,Qi=Br.length;Gi<Qi;++Gi)zr[Br[Gi].identifier]=null;var ki=ci(),Ga=Date.now();if(ki.length===1){if(Ga-De<500){var Yr=ki[0];Xn(Ar,Yr,zr[Yr.identifier],Math.floor(Math.log(lt.k)/Math.LN2)+1),K()}De=Ga}else if(ki.length>1){Yr=ki[0];var Bi=ki[1],ha=Yr[0]-Bi[0],Bs=Yr[1]-Bi[1];Wr=ha*ha+Bs*Bs}}function Si(){var Fi,Br,Gi,Qi,ki=l.touches(Ar);fi.call(Ar);for(var Ga=0,Yr=ki.length;Ga<Yr;++Ga,Qi=null)if(Gi=ki[Ga],Qi=zr[Gi.identifier]){if(Br)break;Fi=Gi,Br=Qi}if(Qi){var Bi=(Bi=Gi[0]-Fi[0])*Bi+(Bi=Gi[1]-Fi[1])*Bi,ha=Wr&&Math.sqrt(Bi/Wr);Fi=[(Fi[0]+Gi[0])/2,(Fi[1]+Gi[1])/2],Br=[(Br[0]+Qi[0])/2,(Br[1]+Qi[1])/2],Ln(ha*fr)}De=null,Rn(Fi,Br),yr(Dr)}function So(){if(l.event.touches.length){for(var Fi=l.event.changedTouches,Br=0,Gi=Fi.length;Br<Gi;++Br)delete zr[Fi[Br].identifier];for(var Qi in zr)return void ci()}l.selectAll(yi).on(Zr,null),hi.on(un,pr).on(Jt,kr),si(),sr(Dr)}pi(),vr(Dr),hi.on(un,null).on(Jt,pi)}function Vr(){var fr=wn.of(this,arguments);Oe?clearTimeout(Oe):(fi.call(this),te=Qt(ue=we||l.mouse(this)),vr(fr)),Oe=setTimeout(function(){Oe=null,sr(fr)},50),K(),Ln(Math.pow(2,.002*qe())*lt.k),Rn(ue,te),yr(fr)}function Hr(){var fr=l.mouse(this),Ar=Math.log(lt.k)/Math.LN2;Xn(this,fr,Qt(fr),l.event.shiftKey?Math.ceil(Ar)-1:Math.floor(Ar)+1)}return Xe||(Xe="onwheel"in d?(qe=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d?(qe=function(){return l.event.wheelDelta},"mousewheel"):(qe=function(){return-l.event.detail},"MozMousePixelScroll")),pn.event=function(fr){fr.each(function(){var Ar=wn.of(this,arguments),Dr=lt;$e?l.select(this).transition().each("start.zoom",function(){lt=this.__chart__||{x:0,y:0,k:1},vr(Ar)}).tween("zoom:zoom",function(){var zr=At[0],Wr=At[1],Zr=ue?ue[0]:zr/2,$r=ue?ue[1]:Wr/2,ui=l.interpolateZoom([(Zr-lt.x)/lt.k,($r-lt.y)/lt.k,zr/lt.k],[(Zr-Dr.x)/Dr.k,($r-Dr.y)/Dr.k,zr/Dr.k]);return function(yi){var hi=ui(yi),si=zr/hi[2];this.__chart__=lt={x:Zr-hi[0]*si,y:$r-hi[1]*si,k:si},yr(Ar)}}).each("interrupt.zoom",function(){sr(Ar)}).each("end.zoom",function(){sr(Ar)}):(this.__chart__=lt,vr(Ar),yr(Ar),sr(Ar))})},pn.translate=function(fr){return arguments.length?(lt={x:+fr[0],y:+fr[1],k:lt.k},Jn(),pn):[lt.x,lt.y]},pn.scale=function(fr){return arguments.length?(lt={x:lt.x,y:lt.y,k:null},Ln(+fr),Jn(),pn):lt.k},pn.scaleExtent=function(fr){return arguments.length?(Ft=fr==null?nt:[+fr[0],+fr[1]],pn):Ft},pn.center=function(fr){return arguments.length?(we=fr&&[+fr[0],+fr[1]],pn):we},pn.size=function(fr){return arguments.length?(At=fr&&[+fr[0],+fr[1]],pn):At},pn.duration=function(fr){return arguments.length?(Bt=+fr,pn):Bt},pn.x=function(fr){return arguments.length?(We=fr,Ue=fr.copy(),lt={x:0,y:0,k:1},pn):We},pn.y=function(fr){return arguments.length?(it=fr,Ke=fr.copy(),lt={x:0,y:0,k:1},pn):it},l.rebind(pn,wn,"on")};var qe,Xe,nt=[0,1/0];function ut(){}function ct(te,ue,we){return this instanceof ct?(this.h=+te,this.s=+ue,void(this.l=+we)):arguments.length<2?te instanceof ct?new ct(te.h,te.s,te.l):an(""+te,sn,ct):new ct(te,ue,we)}l.color=ut,ut.prototype.toString=function(){return this.rgb()+""},l.hsl=ct;var Ct=ct.prototype=new ut;function Lt(te,ue,we){var Oe,De;function Ue(We){return Math.round(255*function(Ke){return Ke>360?Ke-=360:Ke<0&&(Ke+=360),Ke<60?Oe+(De-Oe)*Ke/60:Ke<180?De:Ke<240?Oe+(De-Oe)*(240-Ke)/60:Oe}(We))}return te=isNaN(te)?0:(te%=360)<0?te+360:te,ue=isNaN(ue)||ue<0?0:ue>1?1:ue,Oe=2*(we=we<0?0:we>1?1:we)-(De=we<=.5?we*(1+ue):we+ue-we*ue),new Mn(Ue(te+120),Ue(te),Ue(te-120))}function Mt(te,ue,we){return this instanceof Mt?(this.h=+te,this.c=+ue,void(this.l=+we)):arguments.length<2?te instanceof Mt?new Mt(te.h,te.c,te.l):Xt(te instanceof wt?te.l:(te=On((te=l.rgb(te)).r,te.g,te.b)).l,te.a,te.b):new Mt(te,ue,we)}Ct.brighter=function(te){return te=Math.pow(.7,arguments.length?te:1),new ct(this.h,this.s,this.l/te)},Ct.darker=function(te){return te=Math.pow(.7,arguments.length?te:1),new ct(this.h,this.s,te*this.l)},Ct.rgb=function(){return Lt(this.h,this.s,this.l)},l.hcl=Mt;var mt=Mt.prototype=new ut;function kt(te,ue,we){return isNaN(te)&&(te=0),isNaN(ue)&&(ue=0),new wt(we,Math.cos(te*=Ze)*ue,Math.sin(te)*ue)}function wt(te,ue,we){return this instanceof wt?(this.l=+te,this.a=+ue,void(this.b=+we)):arguments.length<2?te instanceof wt?new wt(te.l,te.a,te.b):te instanceof Mt?kt(te.h,te.c,te.l):On((te=Mn(te)).r,te.g,te.b):new wt(te,ue,we)}mt.brighter=function(te){return new Mt(this.h,this.c,Math.min(100,this.l+Ot*(arguments.length?te:1)))},mt.darker=function(te){return new Mt(this.h,this.c,Math.max(0,this.l-Ot*(arguments.length?te:1)))},mt.rgb=function(){return kt(this.h,this.c,this.l).rgb()},l.lab=wt;var Ot=18,It=.95047,Nt=1.08883,Dt=wt.prototype=new ut;function qt(te,ue,we){var Oe=(te+16)/116,De=Oe+ue/500,Ue=Oe-we/200;return new Mn(Kt(3.2404542*(De=cn(De)*It)-1.5371385*(Oe=1*cn(Oe))-.4985314*(Ue=cn(Ue)*Nt)),Kt(-.969266*De+1.8760108*Oe+.041556*Ue),Kt(.0556434*De-.2040259*Oe+1.0572252*Ue))}function Xt(te,ue,we){return te>0?new Mt(Math.atan2(we,ue)*Ye,Math.sqrt(ue*ue+we*we),te):new Mt(NaN,NaN,te)}function cn(te){return te>.206893034?te*te*te:(te-.13793103448275862)/7.787037}function yn(te){return te>.008856?Math.pow(te,.3333333333333333):7.787037*te+.13793103448275862}function Kt(te){return Math.round(255*(te<=.00304?12.92*te:1.055*Math.pow(te,.4166666666666667)-.055))}function Mn(te,ue,we){return this instanceof Mn?(this.r=~~te,this.g=~~ue,void(this.b=~~we)):arguments.length<2?te instanceof Mn?new Mn(te.r,te.g,te.b):an(""+te,Mn,Lt):new Mn(te,ue,we)}function Un(te){return new Mn(te>>16,te>>8&255,255&te)}function xn(te){return Un(te)+""}Dt.brighter=function(te){return new wt(Math.min(100,this.l+Ot*(arguments.length?te:1)),this.a,this.b)},Dt.darker=function(te){return new wt(Math.max(0,this.l-Ot*(arguments.length?te:1)),this.a,this.b)},Dt.rgb=function(){return qt(this.l,this.a,this.b)},l.rgb=Mn;var dn=Mn.prototype=new ut;function gn(te){return te<16?"0"+Math.max(0,te).toString(16):Math.min(255,te).toString(16)}function an(te,ue,we){var Oe,De,Ue,We=0,Ke=0,it=0;if(Oe=/([a-z]+)\((.*)\)/.exec(te=te.toLowerCase()))switch(De=Oe[2].split(","),Oe[1]){case"hsl":return we(parseFloat(De[0]),parseFloat(De[1])/100,parseFloat(De[2])/100);case"rgb":return ue(Dn(De[0]),Dn(De[1]),Dn(De[2]))}return(Ue=Zn.get(te))?ue(Ue.r,Ue.g,Ue.b):(te==null||te.charAt(0)!=="#"||isNaN(Ue=parseInt(te.slice(1),16))||(te.length===4?(We=(3840&Ue)>>4,We|=We>>4,Ke=240&Ue,Ke|=Ke>>4,it=15&Ue,it|=it<<4):te.length===7&&(We=(16711680&Ue)>>16,Ke=(65280&Ue)>>8,it=255&Ue)),ue(We,Ke,it))}function sn(te,ue,we){var Oe,De,Ue=Math.min(te/=255,ue/=255,we/=255),We=Math.max(te,ue,we),Ke=We-Ue,it=(We+Ue)/2;return Ke?(De=it<.5?Ke/(We+Ue):Ke/(2-We-Ue),Oe=te==We?(ue-we)/Ke+(ue<we?6:0):ue==We?(we-te)/Ke+2:(te-ue)/Ke+4,Oe*=60):(Oe=NaN,De=it>0&&it<1?0:Oe),new ct(Oe,De,it)}function On(te,ue,we){var Oe=yn((.4124564*(te=En(te))+.3575761*(ue=En(ue))+.1804375*(we=En(we)))/It),De=yn((.2126729*te+.7151522*ue+.072175*we)/1);return wt(116*De-16,500*(Oe-De),200*(De-yn((.0193339*te+.119192*ue+.9503041*we)/Nt)))}function En(te){return(te/=255)<=.04045?te/12.92:Math.pow((te+.055)/1.055,2.4)}function Dn(te){var ue=parseFloat(te);return te.charAt(te.length-1)==="%"?Math.round(2.55*ue):ue}dn.brighter=function(te){te=Math.pow(.7,arguments.length?te:1);var ue=this.r,we=this.g,Oe=this.b,De=30;return ue||we||Oe?(ue&&ue<De&&(ue=De),we&&we<De&&(we=De),Oe&&Oe<De&&(Oe=De),new Mn(Math.min(255,ue/te),Math.min(255,we/te),Math.min(255,Oe/te))):new Mn(De,De,De)},dn.darker=function(te){return new Mn((te=Math.pow(.7,arguments.length?te:1))*this.r,te*this.g,te*this.b)},dn.hsl=function(){return sn(this.r,this.g,this.b)},dn.toString=function(){return"#"+gn(this.r)+gn(this.g)+gn(this.b)};var Zn=l.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Fn(te){return typeof te=="function"?te:function(){return te}}function nr(te){return function(ue,we,Oe){return arguments.length===2&&typeof we=="function"&&(Oe=we,we=null),$n(ue,we,te,Oe)}}function $n(te,ue,we,Oe){var De={},Ue=l.dispatch("beforesend","progress","load","error"),We={},Ke=new XMLHttpRequest,it=null;function lt(){var At,Ft=Ke.status;if(!Ft&&function(Bt){var Zt=Bt.responseType;return Zt&&Zt!=="text"?Bt.response:Bt.responseText}(Ke)||Ft>=200&&Ft<300||Ft===304){try{At=we.call(De,Ke)}catch(Bt){return void Ue.error.call(De,Bt)}Ue.load.call(De,At)}else Ue.error.call(De,Ke)}return self.XDomainRequest&&!("withCredentials"in Ke)&&/^(http(s)?:)?\/\//.test(te)&&(Ke=new XDomainRequest),"onload"in Ke?Ke.onload=Ke.onerror=lt:Ke.onreadystatechange=function(){Ke.readyState>3&&lt()},Ke.onprogress=function(At){var Ft=l.event;l.event=At;try{Ue.progress.call(De,Ke)}finally{l.event=Ft}},De.header=function(At,Ft){return At=(At+"").toLowerCase(),arguments.length<2?We[At]:(Ft==null?delete We[At]:We[At]=Ft+"",De)},De.mimeType=function(At){return arguments.length?(ue=At==null?null:At+"",De):ue},De.responseType=function(At){return arguments.length?(it=At,De):it},De.response=function(At){return we=At,De},["get","post"].forEach(function(At){De[At]=function(){return De.send.apply(De,[At].concat(x(arguments)))}}),De.send=function(At,Ft,Bt){if(arguments.length===2&&typeof Ft=="function"&&(Bt=Ft,Ft=null),Ke.open(At,te,!0),ue==null||"accept"in We||(We.accept=ue+",*/*"),Ke.setRequestHeader)for(var Zt in We)Ke.setRequestHeader(Zt,We[Zt]);return ue!=null&&Ke.overrideMimeType&&Ke.overrideMimeType(ue),it!=null&&(Ke.responseType=it),Bt!=null&&De.on("error",Bt).on("load",function(un){Bt(null,un)}),Ue.beforesend.call(De,Ke),Ke.send(Ft??null),De},De.abort=function(){return Ke.abort(),De},l.rebind(De,Ue,"on"),Oe==null?De:De.get(function(At){return At.length===1?function(Ft,Bt){At(Ft==null?Bt:null)}:At}(Oe))}Zn.forEach(function(te,ue){Zn.set(te,Un(ue))}),l.functor=Fn,l.xhr=nr(U),l.dsv=function(te,ue){var we=new RegExp('["'+te+`
]`),Oe=te.charCodeAt(0);function De(lt,At,Ft){arguments.length<3&&(Ft=At,At=null);var Bt=$n(lt,ue,At==null?Ue:We(At),Ft);return Bt.row=function(Zt){return arguments.length?Bt.response((At=Zt)==null?Ue:We(Zt)):At},Bt}function Ue(lt){return De.parse(lt.responseText)}function We(lt){return function(At){return De.parse(At.responseText,lt)}}function Ke(lt){return lt.map(it).join(te)}function it(lt){return we.test(lt)?'"'+lt.replace(/\"/g,'""')+'"':lt}return De.parse=function(lt,At){var Ft;return De.parseRows(lt,function(Bt,Zt){if(Ft)return Ft(Bt,Zt-1);var un=function(Wt){for(var en={},Jt=Bt.length,wn=0;wn<Jt;++wn)en[Bt[wn]]=Wt[wn];return en};Ft=At?function(Wt,en){return At(un(Wt),en)}:un})},De.parseRows=function(lt,At){var Ft,Bt,Zt={},un={},Wt=[],en=lt.length,Jt=0,wn=0;function pn(){if(Jt>=en)return un;if(Bt)return Bt=!1,Zt;var Ln=Jt;if(lt.charCodeAt(Ln)===34){for(var Rn=Ln;Rn++<en;)if(lt.charCodeAt(Rn)===34){if(lt.charCodeAt(Rn+1)!==34)break;++Rn}return Jt=Rn+2,(Xn=lt.charCodeAt(Rn+1))===13?(Bt=!0,lt.charCodeAt(Rn+2)===10&&++Jt):Xn===10&&(Bt=!0),lt.slice(Ln+1,Rn).replace(/""/g,'"')}for(;Jt<en;){var Xn,Jn=1;if((Xn=lt.charCodeAt(Jt++))===10)Bt=!0;else if(Xn===13)Bt=!0,lt.charCodeAt(Jt)===10&&(++Jt,++Jn);else if(Xn!==Oe)continue;return lt.slice(Ln,Jt-Jn)}return lt.slice(Ln)}for(;(Ft=pn())!==un;){for(var Qt=[];Ft!==Zt&&Ft!==un;)Qt.push(Ft),Ft=pn();At&&(Qt=At(Qt,wn++))==null||Wt.push(Qt)}return Wt},De.format=function(lt){if(Array.isArray(lt[0]))return De.formatRows(lt);var At=new I,Ft=[];return lt.forEach(function(Bt){for(var Zt in Bt)At.has(Zt)||Ft.push(At.add(Zt))}),[Ft.map(it).join(te)].concat(lt.map(function(Bt){return Ft.map(function(Zt){return it(Bt[Zt])}).join(te)})).join(`
`)},De.formatRows=function(lt){return lt.map(Ke).join(`
`)},De},l.csv=l.dsv(",","text/csv"),l.tsv=l.dsv("	","text/tab-separated-values");var mr,dr,Yn,Vn,ur=this[H(this,"requestAnimationFrame")]||function(te){setTimeout(te,17)};function Gt(te,ue,we){var Oe=arguments.length;Oe<2&&(ue=0),Oe<3&&(we=Date.now());var De=we+ue,Ue={c:te,t:De,n:null};return dr?dr.n=Ue:mr=Ue,dr=Ue,Yn||(Vn=clearTimeout(Vn),Yn=1,ur(tn)),Ue}function tn(){var te=In(),ue=_n()-te;ue>24?(isFinite(ue)&&(clearTimeout(Vn),Vn=setTimeout(tn,ue)),Yn=0):(Yn=1,ur(tn))}function In(){for(var te=Date.now(),ue=mr;ue;)te>=ue.t&&ue.c(te-ue.t)&&(ue.c=null),ue=ue.n;return te}function _n(){for(var te,ue=mr,we=1/0;ue;)ue.c?(ue.t<we&&(we=ue.t),ue=(te=ue).n):ue=te?te.n=ue.n:mr=ue.n;return dr=te,we}function Sn(te){return te[0]}function jn(te){return te[1]}function qn(te){for(var ue,we,Oe,De=te.length,Ue=[0,1],We=2,Ke=2;Ke<De;Ke++){for(;We>1&&(ue=te[Ue[We-2]],we=te[Ue[We-1]],Oe=te[Ke],(we[0]-ue[0])*(Oe[1]-ue[1])-(we[1]-ue[1])*(Oe[0]-ue[0])<=0);)--We;Ue[We++]=Ke}return Ue.slice(0,We)}function ar(te,ue){return te[0]-ue[0]||te[1]-ue[1]}l.timer=function(){Gt.apply(this,arguments)},l.timer.flush=function(){In(),_n()},l.round=function(te,ue){return ue?Math.round(te*(ue=Math.pow(10,ue)))/ue:Math.round(te)},l.geom={},l.geom.hull=function(te){var ue=Sn,we=jn;if(arguments.length)return Oe(te);function Oe(De){if(De.length<3)return[];var Ue,We=Fn(ue),Ke=Fn(we),it=De.length,lt=[],At=[];for(Ue=0;Ue<it;Ue++)lt.push([+We.call(this,De[Ue],Ue),+Ke.call(this,De[Ue],Ue),Ue]);for(lt.sort(ar),Ue=0;Ue<it;Ue++)At.push([lt[Ue][0],-lt[Ue][1]]);var Ft=qn(lt),Bt=qn(At),Zt=Bt[0]===Ft[0],un=Bt[Bt.length-1]===Ft[Ft.length-1],Wt=[];for(Ue=Ft.length-1;Ue>=0;--Ue)Wt.push(De[lt[Ft[Ue]][2]]);for(Ue=+Zt;Ue<Bt.length-un;++Ue)Wt.push(De[lt[Bt[Ue]][2]]);return Wt}return Oe.x=function(De){return arguments.length?(ue=De,Oe):ue},Oe.y=function(De){return arguments.length?(we=De,Oe):we},Oe},l.geom.polygon=function(te){return J(te,cr),te};var cr=l.geom.polygon.prototype=[];function $t(te,ue,we){return(we[0]-ue[0])*(te[1]-ue[1])<(we[1]-ue[1])*(te[0]-ue[0])}function An(te,ue,we,Oe){var De=te[0],Ue=we[0],We=ue[0]-De,Ke=Oe[0]-Ue,it=te[1],lt=we[1],At=ue[1]-it,Ft=Oe[1]-lt,Bt=(Ke*(it-lt)-Ft*(De-Ue))/(Ft*We-Ke*At);return[De+Bt*We,it+Bt*At]}function Rt(te){var ue=te[0],we=te[te.length-1];return!(ue[0]-we[0]||ue[1]-we[1])}cr.area=function(){for(var te,ue=-1,we=this.length,Oe=this[we-1],De=0;++ue<we;)te=Oe,Oe=this[ue],De+=te[1]*Oe[0]-te[0]*Oe[1];return .5*De},cr.centroid=function(te){var ue,we,Oe=-1,De=this.length,Ue=0,We=0,Ke=this[De-1];for(arguments.length||(te=-1/(6*this.area()));++Oe<De;)ue=Ke,Ke=this[Oe],we=ue[0]*Ke[1]-Ke[0]*ue[1],Ue+=(ue[0]+Ke[0])*we,We+=(ue[1]+Ke[1])*we;return[Ue*te,We*te]},cr.clip=function(te){for(var ue,we,Oe,De,Ue,We,Ke=Rt(te),it=-1,lt=this.length-Rt(this),At=this[lt-1];++it<lt;){for(ue=te.slice(),te.length=0,De=this[it],Ue=ue[(Oe=ue.length-Ke)-1],we=-1;++we<Oe;)$t(We=ue[we],At,De)?($t(Ue,At,De)||te.push(An(Ue,We,At,De)),te.push(We)):$t(Ue,At,De)&&te.push(An(Ue,We,At,De)),Ue=We;Ke&&te.push(te[0]),At=De}return te};var Yt,rn,bn,ln,kn,Tn=[],hn=[];function nn(){li(this),this.edge=this.site=this.circle=null}function fn(te){var ue=Tn.pop()||new nn;return ue.site=te,ue}function mn(te){gr(te),bn.remove(te),Tn.push(te),li(te)}function zn(te){var ue=te.circle,we=ue.x,Oe=ue.cy,De={x:we,y:Oe},Ue=te.P,We=te.N,Ke=[te];mn(te);for(var it=Ue;it.circle&&y(we-it.circle.x)<St&&y(Oe-it.circle.cy)<St;)Ue=it.P,Ke.unshift(it),mn(it),it=Ue;Ke.unshift(it),gr(it);for(var lt=We;lt.circle&&y(we-lt.circle.x)<St&&y(Oe-lt.circle.cy)<St;)We=lt.N,Ke.push(lt),mn(lt),lt=We;Ke.push(lt),gr(lt);var At,Ft=Ke.length;for(At=1;At<Ft;++At)lt=Ke[At],it=Ke[At-1],lr(lt.edge,it.site,lt.site,De);it=Ke[0],(lt=Ke[Ft-1]).edge=Sr(it.site,lt.site,null,De),ir(it),ir(lt)}function Gn(te){for(var ue,we,Oe,De,Ue=te.x,We=te.y,Ke=bn._;Ke;)if((Oe=Hn(Ke,We)-Ue)>St)Ke=Ke.L;else{if(!((De=Ue-Qn(Ke,We))>St)){Oe>-St?(ue=Ke.P,we=Ke):De>-St?(ue=Ke,we=Ke.N):ue=we=Ke;break}if(!Ke.R){ue=Ke;break}Ke=Ke.R}var it=fn(te);if(bn.insert(ue,it),ue||we){if(ue===we)return gr(ue),we=fn(ue.site),bn.insert(it,we),it.edge=we.edge=Sr(ue.site,it.site),ir(ue),void ir(we);if(we){gr(ue),gr(we);var lt=ue.site,At=lt.x,Ft=lt.y,Bt=te.x-At,Zt=te.y-Ft,un=we.site,Wt=un.x-At,en=un.y-Ft,Jt=2*(Bt*en-Zt*Wt),wn=Bt*Bt+Zt*Zt,pn=Wt*Wt+en*en,Qt={x:(en*wn-Zt*pn)/Jt+At,y:(Bt*pn-Wt*wn)/Jt+Ft};lr(we.edge,lt,un,Qt),it.edge=Sr(lt,te,null,Qt),we.edge=Sr(te,un,null,Qt),ir(ue),ir(we)}else it.edge=Sr(ue.site,it.site)}}function Hn(te,ue){var we=te.site,Oe=we.x,De=we.y,Ue=De-ue;if(!Ue)return Oe;var We=te.P;if(!We)return-1/0;var Ke=(we=We.site).x,it=we.y,lt=it-ue;if(!lt)return Ke;var At=Ke-Oe,Ft=1/Ue-1/lt,Bt=At/lt;return Ft?(-Bt+Math.sqrt(Bt*Bt-2*Ft*(At*At/(-2*lt)-it+lt/2+De-Ue/2)))/Ft+Oe:(Oe+Ke)/2}function Qn(te,ue){var we=te.N;if(we)return Hn(we,ue);var Oe=te.site;return Oe.y===ue?Oe.x:1/0}function rr(te){this.site=te,this.edges=[]}function er(te,ue){return ue.angle-te.angle}function or(){li(this),this.x=this.y=this.arc=this.site=this.cy=null}function ir(te){var ue=te.P,we=te.N;if(ue&&we){var Oe=ue.site,De=te.site,Ue=we.site;if(Oe!==Ue){var We=De.x,Ke=De.y,it=Oe.x-We,lt=Oe.y-Ke,At=Ue.x-We,Ft=2*(it*(en=Ue.y-Ke)-lt*At);if(!(Ft>=-1e-12)){var Bt=it*it+lt*lt,Zt=At*At+en*en,un=(en*Bt-lt*Zt)/Ft,Wt=(it*Zt-At*Bt)/Ft,en=Wt+Ke,Jt=hn.pop()||new or;Jt.arc=te,Jt.site=De,Jt.x=un+We,Jt.y=en+Math.sqrt(un*un+Wt*Wt),Jt.cy=en,te.circle=Jt;for(var wn=null,pn=kn._;pn;)if(Jt.y<pn.y||Jt.y===pn.y&&Jt.x<=pn.x){if(!pn.L){wn=pn.P;break}pn=pn.L}else{if(!pn.R){wn=pn;break}pn=pn.R}kn.insert(wn,Jt),wn||(ln=Jt)}}}}function gr(te){var ue=te.circle;ue&&(ue.P||(ln=ue.N),kn.remove(ue),hn.push(ue),li(ue),te.circle=null)}function Tr(te,ue){var we=te.b;if(we)return!0;var Oe,De,Ue=te.a,We=ue[0][0],Ke=ue[1][0],it=ue[0][1],lt=ue[1][1],At=te.l,Ft=te.r,Bt=At.x,Zt=At.y,un=Ft.x,Wt=Ft.y,en=(Bt+un)/2,Jt=(Zt+Wt)/2;if(Wt===Zt){if(en<We||en>=Ke)return;if(Bt>un){if(Ue){if(Ue.y>=lt)return}else Ue={x:en,y:it};we={x:en,y:lt}}else{if(Ue){if(Ue.y<it)return}else Ue={x:en,y:lt};we={x:en,y:it}}}else if(De=Jt-(Oe=(Bt-un)/(Wt-Zt))*en,Oe<-1||Oe>1)if(Bt>un){if(Ue){if(Ue.y>=lt)return}else Ue={x:(it-De)/Oe,y:it};we={x:(lt-De)/Oe,y:lt}}else{if(Ue){if(Ue.y<it)return}else Ue={x:(lt-De)/Oe,y:lt};we={x:(it-De)/Oe,y:it}}else if(Zt<Wt){if(Ue){if(Ue.x>=Ke)return}else Ue={x:We,y:Oe*We+De};we={x:Ke,y:Oe*Ke+De}}else{if(Ue){if(Ue.x<We)return}else Ue={x:Ke,y:Oe*Ke+De};we={x:We,y:Oe*We+De}}return te.a=Ue,te.b=we,!0}function Ur(te,ue){this.l=te,this.r=ue,this.a=this.b=null}function Sr(te,ue,we,Oe){var De=new Ur(te,ue);return Yt.push(De),we&&lr(De,te,ue,we),Oe&&lr(De,ue,te,Oe),rn[te.i].edges.push(new Lr(De,te,ue)),rn[ue.i].edges.push(new Lr(De,ue,te)),De}function lr(te,ue,we,Oe){te.a||te.b?te.l===we?te.b=Oe:te.a=Oe:(te.a=Oe,te.l=ue,te.r=we)}function Lr(te,ue,we){var Oe=te.a,De=te.b;this.edge=te,this.site=ue,this.angle=we?Math.atan2(we.y-ue.y,we.x-ue.x):te.l===ue?Math.atan2(De.x-Oe.x,Oe.y-De.y):Math.atan2(Oe.x-De.x,De.y-Oe.y)}function Rr(){this._=null}function li(te){te.U=te.C=te.L=te.R=te.P=te.N=null}function Mi(te,ue){var we=ue,Oe=ue.R,De=we.U;De?De.L===we?De.L=Oe:De.R=Oe:te._=Oe,Oe.U=De,we.U=Oe,we.R=Oe.L,we.R&&(we.R.U=we),Oe.L=we}function Pi(te,ue){var we=ue,Oe=ue.L,De=we.U;De?De.L===we?De.L=Oe:De.R=Oe:te._=Oe,Oe.U=De,we.U=Oe,we.L=Oe.R,we.L&&(we.L.U=we),Oe.R=we}function Ea(te){for(;te.L;)te=te.L;return te}function Ui(te,ue){var we,Oe,De,Ue=te.sort(vi).pop();for(Yt=[],rn=new Array(te.length),bn=new Rr,kn=new Rr;;)if(De=ln,Ue&&(!De||Ue.y<De.y||Ue.y===De.y&&Ue.x<De.x))Ue.x===we&&Ue.y===Oe||(rn[Ue.i]=new rr(Ue),Gn(Ue),we=Ue.x,Oe=Ue.y),Ue=te.pop();else{if(!De)break;zn(De.arc)}ue&&(function(Ke){for(var it,lt,At,Ft,Bt,Zt=Yt,un=(lt=Ke[0][0],At=Ke[0][1],Ft=Ke[1][0],Bt=Ke[1][1],function(en){var Jt,wn=en.a,pn=en.b,Qt=wn.x,Ln=wn.y,Rn=0,Xn=1,Jn=pn.x-Qt,vr=pn.y-Ln;if(Jt=lt-Qt,Jn||!(Jt>0)){if(Jt/=Jn,Jn<0){if(Jt<Rn)return;Jt<Xn&&(Xn=Jt)}else if(Jn>0){if(Jt>Xn)return;Jt>Rn&&(Rn=Jt)}if(Jt=Ft-Qt,Jn||!(Jt<0)){if(Jt/=Jn,Jn<0){if(Jt>Xn)return;Jt>Rn&&(Rn=Jt)}else if(Jn>0){if(Jt<Rn)return;Jt<Xn&&(Xn=Jt)}if(Jt=At-Ln,vr||!(Jt>0)){if(Jt/=vr,vr<0){if(Jt<Rn)return;Jt<Xn&&(Xn=Jt)}else if(vr>0){if(Jt>Xn)return;Jt>Rn&&(Rn=Jt)}if(Jt=Bt-Ln,vr||!(Jt<0)){if(Jt/=vr,vr<0){if(Jt>Xn)return;Jt>Rn&&(Rn=Jt)}else if(vr>0){if(Jt<Rn)return;Jt<Xn&&(Xn=Jt)}return Rn>0&&(en.a={x:Qt+Rn*Jn,y:Ln+Rn*vr}),Xn<1&&(en.b={x:Qt+Xn*Jn,y:Ln+Xn*vr}),en}}}}}),Wt=Zt.length;Wt--;)(!Tr(it=Zt[Wt],Ke)||!un(it)||y(it.a.x-it.b.x)<St&&y(it.a.y-it.b.y)<St)&&(it.a=it.b=null,Zt.splice(Wt,1))}(ue),function(Ke){for(var it,lt,At,Ft,Bt,Zt,un,Wt,en,Jt,wn=Ke[0][0],pn=Ke[1][0],Qt=Ke[0][1],Ln=Ke[1][1],Rn=rn,Xn=Rn.length;Xn--;)if((Bt=Rn[Xn])&&Bt.prepare())for(Wt=(un=Bt.edges).length,Zt=0;Zt<Wt;)At=(Jt=un[Zt].end()).x,Ft=Jt.y,it=(en=un[++Zt%Wt].start()).x,lt=en.y,(y(At-it)>St||y(Ft-lt)>St)&&(un.splice(Zt,0,new Lr((Jn=Bt.site,vr=Jt,yr=y(At-wn)<St&&Ln-Ft>St?{x:wn,y:y(it-wn)<St?lt:Ln}:y(Ft-Ln)<St&&pn-At>St?{x:y(lt-Ln)<St?it:pn,y:Ln}:y(At-pn)<St&&Ft-Qt>St?{x:pn,y:y(it-pn)<St?lt:Qt}:y(Ft-Qt)<St&&At-wn>St?{x:y(lt-Qt)<St?it:wn,y:Qt}:null,sr=void 0,(sr=new Ur(Jn,null)).a=vr,sr.b=yr,Yt.push(sr),sr),Bt.site,null)),++Wt);var Jn,vr,yr,sr}(ue));var We={cells:rn,edges:Yt};return bn=kn=Yt=rn=null,We}function vi(te,ue){return ue.y-te.y||ue.x-te.x}rr.prototype.prepare=function(){for(var te,ue=this.edges,we=ue.length;we--;)(te=ue[we].edge).b&&te.a||ue.splice(we,1);return ue.sort(er),ue.length},Lr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Rr.prototype={insert:function(te,ue){var we,Oe,De;if(te){if(ue.P=te,ue.N=te.N,te.N&&(te.N.P=ue),te.N=ue,te.R){for(te=te.R;te.L;)te=te.L;te.L=ue}else te.R=ue;we=te}else this._?(te=Ea(this._),ue.P=null,ue.N=te,te.P=te.L=ue,we=te):(ue.P=ue.N=null,this._=ue,we=null);for(ue.L=ue.R=null,ue.U=we,ue.C=!0,te=ue;we&&we.C;)we===(Oe=we.U).L?(De=Oe.R)&&De.C?(we.C=De.C=!1,Oe.C=!0,te=Oe):(te===we.R&&(Mi(this,we),we=(te=we).U),we.C=!1,Oe.C=!0,Pi(this,Oe)):(De=Oe.L)&&De.C?(we.C=De.C=!1,Oe.C=!0,te=Oe):(te===we.L&&(Pi(this,we),we=(te=we).U),we.C=!1,Oe.C=!0,Mi(this,Oe)),we=te.U;this._.C=!1},remove:function(te){te.N&&(te.N.P=te.P),te.P&&(te.P.N=te.N),te.N=te.P=null;var ue,we,Oe,De=te.U,Ue=te.L,We=te.R;if(we=Ue?We?Ea(We):Ue:We,De?De.L===te?De.L=we:De.R=we:this._=we,Ue&&We?(Oe=we.C,we.C=te.C,we.L=Ue,Ue.U=we,we!==We?(De=we.U,we.U=te.U,te=we.R,De.L=te,we.R=We,We.U=we):(we.U=De,De=we,te=we.R)):(Oe=te.C,te=we),te&&(te.U=De),!Oe)if(te&&te.C)te.C=!1;else{do{if(te===this._)break;if(te===De.L){if((ue=De.R).C&&(ue.C=!1,De.C=!0,Mi(this,De),ue=De.R),ue.L&&ue.L.C||ue.R&&ue.R.C){ue.R&&ue.R.C||(ue.L.C=!1,ue.C=!0,Pi(this,ue),ue=De.R),ue.C=De.C,De.C=ue.R.C=!1,Mi(this,De),te=this._;break}}else if((ue=De.L).C&&(ue.C=!1,De.C=!0,Pi(this,De),ue=De.L),ue.L&&ue.L.C||ue.R&&ue.R.C){ue.L&&ue.L.C||(ue.R.C=!1,ue.C=!0,Mi(this,ue),ue=De.L),ue.C=De.C,De.C=ue.L.C=!1,Pi(this,De),te=this._;break}ue.C=!0,te=De,De=De.U}while(!te.C);te&&(te.C=!1)}}},l.geom.voronoi=function(te){var ue=Sn,we=jn,Oe=ue,De=we,Ue=La;if(te)return We(te);function We(it){var lt=new Array(it.length),At=Ue[0][0],Ft=Ue[0][1],Bt=Ue[1][0],Zt=Ue[1][1];return Ui(Ke(it),Ue).cells.forEach(function(un,Wt){var en=un.edges,Jt=un.site;(lt[Wt]=en.length?en.map(function(wn){var pn=wn.start();return[pn.x,pn.y]}):Jt.x>=At&&Jt.x<=Bt&&Jt.y>=Ft&&Jt.y<=Zt?[[At,Zt],[Bt,Zt],[Bt,Ft],[At,Ft]]:[]).point=it[Wt]}),lt}function Ke(it){return it.map(function(lt,At){return{x:Math.round(Oe(lt,At)/St)*St,y:Math.round(De(lt,At)/St)*St,i:At}})}return We.links=function(it){return Ui(Ke(it)).edges.filter(function(lt){return lt.l&&lt.r}).map(function(lt){return{source:it[lt.l.i],target:it[lt.r.i]}})},We.triangles=function(it){var lt=[];return Ui(Ke(it)).cells.forEach(function(At,Ft){for(var Bt,Zt,un,Wt,en=At.site,Jt=At.edges.sort(er),wn=-1,pn=Jt.length,Qt=Jt[pn-1].edge,Ln=Qt.l===en?Qt.r:Qt.l;++wn<pn;)Bt=Ln,Ln=(Qt=Jt[wn].edge).l===en?Qt.r:Qt.l,Ft<Bt.i&&Ft<Ln.i&&(un=Bt,Wt=Ln,((Zt=en).x-Wt.x)*(un.y-Zt.y)-(Zt.x-un.x)*(Wt.y-Zt.y)<0)&&lt.push([it[Ft],it[Bt.i],it[Ln.i]])}),lt},We.x=function(it){return arguments.length?(Oe=Fn(ue=it),We):ue},We.y=function(it){return arguments.length?(De=Fn(we=it),We):we},We.clipExtent=function(it){return arguments.length?(Ue=it??La,We):Ue===La?null:Ue},We.size=function(it){return arguments.length?We.clipExtent(it&&[[0,0],it]):Ue===La?null:Ue&&Ue[1]},We};var La=[[-1e6,-1e6],[1e6,1e6]];function no(te){return te.x}function Zo(te){return te.y}function Wo(te,ue,we,Oe,De,Ue){if(!te(ue,we,Oe,De,Ue)){var We=.5*(we+De),Ke=.5*(Oe+Ue),it=ue.nodes;it[0]&&Wo(te,it[0],we,Oe,We,Ke),it[1]&&Wo(te,it[1],We,Oe,De,Ke),it[2]&&Wo(te,it[2],we,Ke,We,Ue),it[3]&&Wo(te,it[3],We,Ke,De,Ue)}}function ol(te,ue,we,Oe,De,Ue,We){var Ke,it=1/0;return function lt(At,Ft,Bt,Zt,un){if(!(Ft>Ue||Bt>We||Zt<Oe||un<De)){if(Wt=At.point){var Wt,en=ue-At.x,Jt=we-At.y,wn=en*en+Jt*Jt;if(wn<it){var pn=Math.sqrt(it=wn);Oe=ue-pn,De=we-pn,Ue=ue+pn,We=we+pn,Ke=Wt}}for(var Qt=At.nodes,Ln=.5*(Ft+Zt),Rn=.5*(Bt+un),Xn=(we>=Rn)<<1|ue>=Ln,Jn=Xn+4;Xn<Jn;++Xn)if(At=Qt[3&Xn])switch(3&Xn){case 0:lt(At,Ft,Bt,Ln,Rn);break;case 1:lt(At,Ln,Bt,Zt,Rn);break;case 2:lt(At,Ft,Rn,Ln,un);break;case 3:lt(At,Ln,Rn,Zt,un)}}}(te,Oe,De,Ue,We),Ke}function Hs(te,ue){te=l.rgb(te),ue=l.rgb(ue);var we=te.r,Oe=te.g,De=te.b,Ue=ue.r-we,We=ue.g-Oe,Ke=ue.b-De;return function(it){return"#"+gn(Math.round(we+Ue*it))+gn(Math.round(Oe+We*it))+gn(Math.round(De+Ke*it))}}function Yo(te,ue){var we,Oe={},De={};for(we in te)we in ue?Oe[we]=ma(te[we],ue[we]):De[we]=te[we];for(we in ue)we in te||(De[we]=ue[we]);return function(Ue){for(we in Oe)De[we]=Oe[we](Ue);return De}}function Ta(te,ue){return te=+te,ue=+ue,function(we){return te*(1-we)+ue*we}}function qs(te,ue){var we,Oe,De,Ue=zi.lastIndex=us.lastIndex=0,We=-1,Ke=[],it=[];for(te+="",ue+="";(we=zi.exec(te))&&(Oe=us.exec(ue));)(De=Oe.index)>Ue&&(De=ue.slice(Ue,De),Ke[We]?Ke[We]+=De:Ke[++We]=De),(we=we[0])===(Oe=Oe[0])?Ke[We]?Ke[We]+=Oe:Ke[++We]=Oe:(Ke[++We]=null,it.push({i:We,x:Ta(we,Oe)})),Ue=us.lastIndex;return Ue<ue.length&&(De=ue.slice(Ue),Ke[We]?Ke[We]+=De:Ke[++We]=De),Ke.length<2?it[0]?(ue=it[0].x,function(lt){return ue(lt)+""}):function(){return ue}:(ue=it.length,function(lt){for(var At,Ft=0;Ft<ue;++Ft)Ke[(At=it[Ft]).i]=At.x(lt);return Ke.join("")})}l.geom.delaunay=function(te){return l.geom.voronoi().triangles(te)},l.geom.quadtree=function(te,ue,we,Oe,De){var Ue,We=Sn,Ke=jn;if(Ue=arguments.length)return We=no,Ke=Zo,Ue===3&&(De=we,Oe=ue,we=ue=0),it(te);function it(lt){var At,Ft,Bt,Zt,un,Wt,en,Jt,wn,pn=Fn(We),Qt=Fn(Ke);if(ue!=null)Wt=ue,en=we,Jt=Oe,wn=De;else if(Jt=wn=-(Wt=en=1/0),Ft=[],Bt=[],un=lt.length,Ue)for(Zt=0;Zt<un;++Zt)(At=lt[Zt]).x<Wt&&(Wt=At.x),At.y<en&&(en=At.y),At.x>Jt&&(Jt=At.x),At.y>wn&&(wn=At.y),Ft.push(At.x),Bt.push(At.y);else for(Zt=0;Zt<un;++Zt){var Ln=+pn(At=lt[Zt],Zt),Rn=+Qt(At,Zt);Ln<Wt&&(Wt=Ln),Rn<en&&(en=Rn),Ln>Jt&&(Jt=Ln),Rn>wn&&(wn=Rn),Ft.push(Ln),Bt.push(Rn)}var Xn=Jt-Wt,Jn=wn-en;function vr(pr,kr,Vr,Hr,fr,Ar,Dr,zr){if(!isNaN(Vr)&&!isNaN(Hr))if(pr.leaf){var Wr=pr.x,Zr=pr.y;if(Wr!=null)if(y(Wr-Vr)+y(Zr-Hr)<.01)yr(pr,kr,Vr,Hr,fr,Ar,Dr,zr);else{var $r=pr.point;pr.x=pr.y=pr.point=null,yr(pr,$r,Wr,Zr,fr,Ar,Dr,zr),yr(pr,kr,Vr,Hr,fr,Ar,Dr,zr)}else pr.x=Vr,pr.y=Hr,pr.point=kr}else yr(pr,kr,Vr,Hr,fr,Ar,Dr,zr)}function yr(pr,kr,Vr,Hr,fr,Ar,Dr,zr){var Wr=.5*(fr+Dr),Zr=.5*(Ar+zr),$r=Vr>=Wr,ui=Hr>=Zr,yi=ui<<1|$r;pr.leaf=!1,$r?fr=Wr:Dr=Wr,ui?Ar=Zr:zr=Zr,vr(pr=pr.nodes[yi]||(pr.nodes[yi]={leaf:!0,nodes:[],point:null,x:null,y:null}),kr,Vr,Hr,fr,Ar,Dr,zr)}Xn>Jn?wn=en+Xn:Jt=Wt+Jn;var sr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(pr){vr(sr,pr,+pn(pr,++Zt),+Qt(pr,Zt),Wt,en,Jt,wn)},visit:function(pr){Wo(pr,sr,Wt,en,Jt,wn)},find:function(pr){return ol(sr,pr[0],pr[1],Wt,en,Jt,wn)}};if(Zt=-1,ue==null){for(;++Zt<un;)vr(sr,lt[Zt],Ft[Zt],Bt[Zt],Wt,en,Jt,wn);--Zt}else lt.forEach(sr.add);return Ft=Bt=lt=At=null,sr}return it.x=function(lt){return arguments.length?(We=lt,it):We},it.y=function(lt){return arguments.length?(Ke=lt,it):Ke},it.extent=function(lt){return arguments.length?(lt==null?ue=we=Oe=De=null:(ue=+lt[0][0],we=+lt[0][1],Oe=+lt[1][0],De=+lt[1][1]),it):ue==null?null:[[ue,we],[Oe,De]]},it.size=function(lt){return arguments.length?(lt==null?ue=we=Oe=De=null:(ue=we=0,Oe=+lt[0],De=+lt[1]),it):ue==null?null:[Oe-ue,De-we]},it},l.interpolateRgb=Hs,l.interpolateObject=Yo,l.interpolateNumber=Ta,l.interpolateString=qs;var zi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,us=new RegExp(zi.source,"g");function ma(te,ue){for(var we,Oe=l.interpolators.length;--Oe>=0&&!(we=l.interpolators[Oe](te,ue)););return we}function ka(te,ue){var we,Oe=[],De=[],Ue=te.length,We=ue.length,Ke=Math.min(te.length,ue.length);for(we=0;we<Ke;++we)Oe.push(ma(te[we],ue[we]));for(;we<Ue;++we)De[we]=te[we];for(;we<We;++we)De[we]=ue[we];return function(it){for(we=0;we<Ke;++we)De[we]=Oe[we](it);return De}}l.interpolate=ma,l.interpolators=[function(te,ue){var we=typeof ue;return(we==="string"?Zn.has(ue.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ue)?Hs:qs:ue instanceof ut?Hs:Array.isArray(ue)?ka:we==="object"&&isNaN(ue)?Yo:Ta)(te,ue)}],l.interpolateArray=ka;var mo=function(){return U},Qr=l.map({linear:mo,poly:function(te){return function(ue){return Math.pow(ue,te)}},quad:function(){return cs},cubic:function(){return sl},sin:function(){return ll},exp:function(){return ul},circle:function(){return yl},elastic:function(te,ue){var we;return arguments.length<2&&(ue=.45),arguments.length?we=ue/zt*Math.asin(1/te):(te=1,we=ue/4),function(Oe){return 1+te*Math.pow(2,-10*Oe)*Math.sin((Oe-we)*zt/ue)}},back:function(te){return te||(te=1.70158),function(ue){return ue*ue*((te+1)*ue-te)}},bounce:function(){return Gs}}),yo=l.map({in:U,out:Ua,"in-out":Xa,"out-in":function(te){return Xa(Ua(te))}});function Ca(te){return function(ue){return ue<=0?0:ue>=1?1:te(ue)}}function Ua(te){return function(ue){return 1-te(1-ue)}}function Xa(te){return function(ue){return .5*(ue<.5?te(2*ue):2-te(2-2*ue))}}function cs(te){return te*te}function sl(te){return te*te*te}function ro(te){if(te<=0)return 0;if(te>=1)return 1;var ue=te*te,we=ue*te;return 4*(te<.5?we:3*(te-ue)+we-.75)}function ll(te){return 1-Math.cos(te*Pt)}function ul(te){return Math.pow(2,10*(te-1))}function yl(te){return 1-Math.sqrt(1-te*te)}function Gs(te){return te<.36363636363636365?7.5625*te*te:te<.7272727272727273?7.5625*(te-=.5454545454545454)*te+.75:te<.9090909090909091?7.5625*(te-=.8181818181818182)*te+.9375:7.5625*(te-=.9545454545454546)*te+.984375}function cl(te,ue){return ue-=te,function(we){return Math.round(te+ue*we)}}function Zs(te){var ue,we,Oe,De=[te.a,te.b],Ue=[te.c,te.d],We=ao(De),Ke=io(De,Ue),it=ao(((ue=Ue)[0]+=(Oe=-Ke)*(we=De)[0],ue[1]+=Oe*we[1],ue))||0;De[0]*Ue[1]<Ue[0]*De[1]&&(De[0]*=-1,De[1]*=-1,We*=-1,Ke*=-1),this.rotate=(We?Math.atan2(De[1],De[0]):Math.atan2(-Ue[0],Ue[1]))*Ye,this.translate=[te.e,te.f],this.scale=[We,it],this.skew=it?Math.atan2(Ke,it)*Ye:0}function io(te,ue){return te[0]*ue[0]+te[1]*ue[1]}function ao(te){var ue=Math.sqrt(io(te,te));return ue&&(te[0]/=ue,te[1]/=ue),ue}l.ease=function(te){var ue=te.indexOf("-"),we=ue>=0?te.slice(0,ue):te,Oe=ue>=0?te.slice(ue+1):"in";return we=Qr.get(we)||mo,Ca((Oe=yo.get(Oe)||U)(we.apply(null,T.call(arguments,1))))},l.interpolateHcl=function(te,ue){te=l.hcl(te),ue=l.hcl(ue);var we=te.h,Oe=te.c,De=te.l,Ue=ue.h-we,We=ue.c-Oe,Ke=ue.l-De;return isNaN(We)&&(We=0,Oe=isNaN(Oe)?ue.c:Oe),isNaN(Ue)?(Ue=0,we=isNaN(we)?ue.h:we):Ue>180?Ue-=360:Ue<-180&&(Ue+=360),function(it){return kt(we+Ue*it,Oe+We*it,De+Ke*it)+""}},l.interpolateHsl=function(te,ue){te=l.hsl(te),ue=l.hsl(ue);var we=te.h,Oe=te.s,De=te.l,Ue=ue.h-we,We=ue.s-Oe,Ke=ue.l-De;return isNaN(We)&&(We=0,Oe=isNaN(Oe)?ue.s:Oe),isNaN(Ue)?(Ue=0,we=isNaN(we)?ue.h:we):Ue>180?Ue-=360:Ue<-180&&(Ue+=360),function(it){return Lt(we+Ue*it,Oe+We*it,De+Ke*it)+""}},l.interpolateLab=function(te,ue){te=l.lab(te),ue=l.lab(ue);var we=te.l,Oe=te.a,De=te.b,Ue=ue.l-we,We=ue.a-Oe,Ke=ue.b-De;return function(it){return qt(we+Ue*it,Oe+We*it,De+Ke*it)+""}},l.interpolateRound=cl,l.transform=function(te){var ue=d.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(we){if(we!=null){ue.setAttribute("transform",we);var Oe=ue.transform.baseVal.consolidate()}return new Zs(Oe?Oe.matrix:Xo)})(te)},Zs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Xo={a:1,b:0,c:0,d:1,e:0,f:0};function oo(te){return te.length?te.pop()+",":""}function Ws(te,ue){var we=[],Oe=[];return te=l.transform(te),ue=l.transform(ue),function(De,Ue,We,Ke){if(De[0]!==Ue[0]||De[1]!==Ue[1]){var it=We.push("translate(",null,",",null,")");Ke.push({i:it-4,x:Ta(De[0],Ue[0])},{i:it-2,x:Ta(De[1],Ue[1])})}else(Ue[0]||Ue[1])&&We.push("translate("+Ue+")")}(te.translate,ue.translate,we,Oe),function(De,Ue,We,Ke){De!==Ue?(De-Ue>180?Ue+=360:Ue-De>180&&(De+=360),Ke.push({i:We.push(oo(We)+"rotate(",null,")")-2,x:Ta(De,Ue)})):Ue&&We.push(oo(We)+"rotate("+Ue+")")}(te.rotate,ue.rotate,we,Oe),function(De,Ue,We,Ke){De!==Ue?Ke.push({i:We.push(oo(We)+"skewX(",null,")")-2,x:Ta(De,Ue)}):Ue&&We.push(oo(We)+"skewX("+Ue+")")}(te.skew,ue.skew,we,Oe),function(De,Ue,We,Ke){if(De[0]!==Ue[0]||De[1]!==Ue[1]){var it=We.push(oo(We)+"scale(",null,",",null,")");Ke.push({i:it-4,x:Ta(De[0],Ue[0])},{i:it-2,x:Ta(De[1],Ue[1])})}else Ue[0]===1&&Ue[1]===1||We.push(oo(We)+"scale("+Ue+")")}(te.scale,ue.scale,we,Oe),te=ue=null,function(De){for(var Ue,We=-1,Ke=Oe.length;++We<Ke;)we[(Ue=Oe[We]).i]=Ue.x(De);return we.join("")}}function Ys(te,ue){return ue=(ue-=te=+te)||1/ue,function(we){return(we-te)/ue}}function Oo(te,ue){return ue=(ue-=te=+te)||1/ue,function(we){return Math.max(0,Math.min(1,(we-te)/ue))}}function Es(te){for(var ue=te.source,we=te.target,Oe=function(We,Ke){if(We===Ke)return We;for(var it=xo(We),lt=xo(Ke),At=it.pop(),Ft=lt.pop(),Bt=null;At===Ft;)Bt=At,At=it.pop(),Ft=lt.pop();return Bt}(ue,we),De=[ue];ue!==Oe;)ue=ue.parent,De.push(ue);for(var Ue=De.length;we!==Oe;)De.splice(Ue,0,we),we=we.parent;return De}function xo(te){for(var ue=[],we=te.parent;we!=null;)ue.push(te),te=we,we=we.parent;return ue.push(te),ue}function Jo(te){te.fixed|=2}function Io(te){te.fixed&=-7}function so(te){te.fixed|=4,te.px=te.x,te.py=te.y}function ei(te){te.fixed&=-5}function bo(te,ue,we){var Oe=0,De=0;if(te.charge=0,!te.leaf)for(var Ue,We=te.nodes,Ke=We.length,it=-1;++it<Ke;)(Ue=We[it])!=null&&(bo(Ue,ue,we),te.charge+=Ue.charge,Oe+=Ue.charge*Ue.cx,De+=Ue.charge*Ue.cy);if(te.point){te.leaf||(te.point.x+=Math.random()-.5,te.point.y+=Math.random()-.5);var lt=ue*we[te.point.index];te.charge+=te.pointCharge=lt,Oe+=lt*te.point.x,De+=lt*te.point.y}te.cx=Oe/te.charge,te.cy=De/te.charge}l.interpolateTransform=Ws,l.layout={},l.layout.bundle=function(){return function(te){for(var ue=[],we=-1,Oe=te.length;++we<Oe;)ue.push(Es(te[we]));return ue}},l.layout.chord=function(){var te,ue,we,Oe,De,Ue,We,Ke={},it=0;function lt(){var Ft,Bt,Zt,un,Wt,en={},Jt=[],wn=l.range(Oe),pn=[];for(te=[],ue=[],Ft=0,un=-1;++un<Oe;){for(Bt=0,Wt=-1;++Wt<Oe;)Bt+=we[un][Wt];Jt.push(Bt),pn.push(l.range(Oe)),Ft+=Bt}for(De&&wn.sort(function(sr,pr){return De(Jt[sr],Jt[pr])}),Ue&&pn.forEach(function(sr,pr){sr.sort(function(kr,Vr){return Ue(we[pr][kr],we[pr][Vr])})}),Ft=(zt-it*Oe)/Ft,Bt=0,un=-1;++un<Oe;){for(Zt=Bt,Wt=-1;++Wt<Oe;){var Qt=wn[un],Ln=pn[Qt][Wt],Rn=we[Qt][Ln],Xn=Bt,Jn=Bt+=Rn*Ft;en[Qt+"-"+Ln]={index:Qt,subindex:Ln,startAngle:Xn,endAngle:Jn,value:Rn}}ue[Qt]={index:Qt,startAngle:Zt,endAngle:Bt,value:Jt[Qt]},Bt+=it}for(un=-1;++un<Oe;)for(Wt=un-1;++Wt<Oe;){var vr=en[un+"-"+Wt],yr=en[Wt+"-"+un];(vr.value||yr.value)&&te.push(vr.value<yr.value?{source:yr,target:vr}:{source:vr,target:yr})}We&&At()}function At(){te.sort(function(Ft,Bt){return We((Ft.source.value+Ft.target.value)/2,(Bt.source.value+Bt.target.value)/2)})}return Ke.matrix=function(Ft){return arguments.length?(Oe=(we=Ft)&&we.length,te=ue=null,Ke):we},Ke.padding=function(Ft){return arguments.length?(it=Ft,te=ue=null,Ke):it},Ke.sortGroups=function(Ft){return arguments.length?(De=Ft,te=ue=null,Ke):De},Ke.sortSubgroups=function(Ft){return arguments.length?(Ue=Ft,te=null,Ke):Ue},Ke.sortChords=function(Ft){return arguments.length?(We=Ft,te&&At(),Ke):We},Ke.chords=function(){return te||lt(),te},Ke.groups=function(){return ue||lt(),ue},Ke},l.layout.force=function(){var te,ue,we,Oe,De,Ue,We={},Ke=l.dispatch("start","tick","end"),it=[1,1],lt=.9,At=xl,Ft=Ls,Bt=-30,Zt=fs,un=.1,Wt=.64,en=[],Jt=[];function wn(Qt){return function(Ln,Rn,Xn,Jn){if(Ln.point!==Qt){var vr=Ln.cx-Qt.x,yr=Ln.cy-Qt.y,sr=Jn-Rn,pr=vr*vr+yr*yr;if(sr*sr/Wt<pr){if(pr<Zt){var kr=Ln.charge/pr;Qt.px-=vr*kr,Qt.py-=yr*kr}return!0}Ln.point&&pr&&pr<Zt&&(kr=Ln.pointCharge/pr,Qt.px-=vr*kr,Qt.py-=yr*kr)}return!Ln.charge}}function pn(Qt){Qt.px=l.event.x,Qt.py=l.event.y,We.resume()}return We.tick=function(){if((we*=.99)<.005)return te=null,Ke.end({type:"end",alpha:we=0}),!0;var Qt,Ln,Rn,Xn,Jn,vr,yr,sr,pr,kr=en.length,Vr=Jt.length;for(Ln=0;Ln<Vr;++Ln)Xn=(Rn=Jt[Ln]).source,(vr=(sr=(Jn=Rn.target).x-Xn.x)*sr+(pr=Jn.y-Xn.y)*pr)&&(sr*=vr=we*De[Ln]*((vr=Math.sqrt(vr))-Oe[Ln])/vr,pr*=vr,Jn.x-=sr*(yr=Xn.weight+Jn.weight?Xn.weight/(Xn.weight+Jn.weight):.5),Jn.y-=pr*yr,Xn.x+=sr*(yr=1-yr),Xn.y+=pr*yr);if((yr=we*un)&&(sr=it[0]/2,pr=it[1]/2,Ln=-1,yr))for(;++Ln<kr;)(Rn=en[Ln]).x+=(sr-Rn.x)*yr,Rn.y+=(pr-Rn.y)*yr;if(Bt)for(bo(Qt=l.geom.quadtree(en),we,Ue),Ln=-1;++Ln<kr;)(Rn=en[Ln]).fixed||Qt.visit(wn(Rn));for(Ln=-1;++Ln<kr;)(Rn=en[Ln]).fixed?(Rn.x=Rn.px,Rn.y=Rn.py):(Rn.x-=(Rn.px-(Rn.px=Rn.x))*lt,Rn.y-=(Rn.py-(Rn.py=Rn.y))*lt);Ke.tick({type:"tick",alpha:we})},We.nodes=function(Qt){return arguments.length?(en=Qt,We):en},We.links=function(Qt){return arguments.length?(Jt=Qt,We):Jt},We.size=function(Qt){return arguments.length?(it=Qt,We):it},We.linkDistance=function(Qt){return arguments.length?(At=typeof Qt=="function"?Qt:+Qt,We):At},We.distance=We.linkDistance,We.linkStrength=function(Qt){return arguments.length?(Ft=typeof Qt=="function"?Qt:+Qt,We):Ft},We.friction=function(Qt){return arguments.length?(lt=+Qt,We):lt},We.charge=function(Qt){return arguments.length?(Bt=typeof Qt=="function"?Qt:+Qt,We):Bt},We.chargeDistance=function(Qt){return arguments.length?(Zt=Qt*Qt,We):Math.sqrt(Zt)},We.gravity=function(Qt){return arguments.length?(un=+Qt,We):un},We.theta=function(Qt){return arguments.length?(Wt=Qt*Qt,We):Math.sqrt(Wt)},We.alpha=function(Qt){return arguments.length?(Qt=+Qt,we?Qt>0?we=Qt:(te.c=null,te.t=NaN,te=null,Ke.end({type:"end",alpha:we=0})):Qt>0&&(Ke.start({type:"start",alpha:we=Qt}),te=Gt(We.tick)),We):we},We.start=function(){var Qt,Ln,Rn,Xn=en.length,Jn=Jt.length,vr=it[0],yr=it[1];for(Qt=0;Qt<Xn;++Qt)(Rn=en[Qt]).index=Qt,Rn.weight=0;for(Qt=0;Qt<Jn;++Qt)typeof(Rn=Jt[Qt]).source=="number"&&(Rn.source=en[Rn.source]),typeof Rn.target=="number"&&(Rn.target=en[Rn.target]),++Rn.source.weight,++Rn.target.weight;for(Qt=0;Qt<Xn;++Qt)Rn=en[Qt],isNaN(Rn.x)&&(Rn.x=sr("x",vr)),isNaN(Rn.y)&&(Rn.y=sr("y",yr)),isNaN(Rn.px)&&(Rn.px=Rn.x),isNaN(Rn.py)&&(Rn.py=Rn.y);if(Oe=[],typeof At=="function")for(Qt=0;Qt<Jn;++Qt)Oe[Qt]=+At.call(this,Jt[Qt],Qt);else for(Qt=0;Qt<Jn;++Qt)Oe[Qt]=At;if(De=[],typeof Ft=="function")for(Qt=0;Qt<Jn;++Qt)De[Qt]=+Ft.call(this,Jt[Qt],Qt);else for(Qt=0;Qt<Jn;++Qt)De[Qt]=Ft;if(Ue=[],typeof Bt=="function")for(Qt=0;Qt<Xn;++Qt)Ue[Qt]=+Bt.call(this,en[Qt],Qt);else for(Qt=0;Qt<Xn;++Qt)Ue[Qt]=Bt;function sr(pr,kr){if(!Ln){for(Ln=new Array(Xn),Ar=0;Ar<Xn;++Ar)Ln[Ar]=[];for(Ar=0;Ar<Jn;++Ar){var Vr=Jt[Ar];Ln[Vr.source.index].push(Vr.target),Ln[Vr.target.index].push(Vr.source)}}for(var Hr,fr=Ln[Qt],Ar=-1,Dr=fr.length;++Ar<Dr;)if(!isNaN(Hr=fr[Ar][pr]))return Hr;return Math.random()*kr}return We.resume()},We.resume=function(){return We.alpha(.1)},We.stop=function(){return We.alpha(0)},We.drag=function(){if(ue||(ue=l.behavior.drag().origin(U).on("dragstart.force",Jo).on("drag.force",pn).on("dragend.force",Io)),!arguments.length)return ue;this.on("mouseover.force",so).on("mouseout.force",ei).call(ue)},l.rebind(We,Ke,"on")};var xl=20,Ls=1,fs=1/0;function Ro(te,ue){return l.rebind(te,ue,"sort","children","value"),te.nodes=te,te.links=ps,te}function Ko(te,ue){for(var we=[te];(te=we.pop())!=null;)if(ue(te),(De=te.children)&&(Oe=De.length))for(var Oe,De;--Oe>=0;)we.push(De[Oe])}function Pa(te,ue){for(var we=[te],Oe=[];(te=we.pop())!=null;)if(Oe.push(te),(Ue=te.children)&&(De=Ue.length))for(var De,Ue,We=-1;++We<De;)we.push(Ue[We]);for(;(te=Oe.pop())!=null;)ue(te)}function Xs(te){return te.children}function hs(te){return te.value}function $o(te,ue){return ue.value-te.value}function ps(te){return l.merge(te.map(function(ue){return(ue.children||[]).map(function(we){return{source:ue,target:we}})}))}l.layout.hierarchy=function(){var te=$o,ue=Xs,we=hs;function Oe(De){var Ue,We=[De],Ke=[];for(De.depth=0;(Ue=We.pop())!=null;)if(Ke.push(Ue),(lt=ue.call(Oe,Ue,Ue.depth))&&(it=lt.length)){for(var it,lt,At;--it>=0;)We.push(At=lt[it]),At.parent=Ue,At.depth=Ue.depth+1;we&&(Ue.value=0),Ue.children=lt}else we&&(Ue.value=+we.call(Oe,Ue,Ue.depth)||0),delete Ue.children;return Pa(De,function(Ft){var Bt,Zt;te&&(Bt=Ft.children)&&Bt.sort(te),we&&(Zt=Ft.parent)&&(Zt.value+=Ft.value)}),Ke}return Oe.sort=function(De){return arguments.length?(te=De,Oe):te},Oe.children=function(De){return arguments.length?(ue=De,Oe):ue},Oe.value=function(De){return arguments.length?(we=De,Oe):we},Oe.revalue=function(De){return we&&(Ko(De,function(Ue){Ue.children&&(Ue.value=0)}),Pa(De,function(Ue){var We;Ue.children||(Ue.value=+we.call(Oe,Ue,Ue.depth)||0),(We=Ue.parent)&&(We.value+=Ue.value)})),De},Oe},l.layout.partition=function(){var te=l.layout.hierarchy(),ue=[1,1];function we(Ue,We,Ke,it){var lt=Ue.children;if(Ue.x=We,Ue.y=Ue.depth*it,Ue.dx=Ke,Ue.dy=it,lt&&(At=lt.length)){var At,Ft,Bt,Zt=-1;for(Ke=Ue.value?Ke/Ue.value:0;++Zt<At;)we(Ft=lt[Zt],We,Bt=Ft.value*Ke,it),We+=Bt}}function Oe(Ue){var We=Ue.children,Ke=0;if(We&&(it=We.length))for(var it,lt=-1;++lt<it;)Ke=Math.max(Ke,Oe(We[lt]));return 1+Ke}function De(Ue,We){var Ke=te.call(this,Ue,We);return we(Ke[0],0,ue[0],ue[1]/Oe(Ke[0])),Ke}return De.size=function(Ue){return arguments.length?(ue=Ue,De):ue},Ro(De,te)},l.layout.pie=function(){var te=Number,ue=zo,we=0,Oe=zt,De=0;function Ue(We){var Ke,it=We.length,lt=We.map(function(wn,pn){return+te.call(Ue,wn,pn)}),At=+(typeof we=="function"?we.apply(this,arguments):we),Ft=(typeof Oe=="function"?Oe.apply(this,arguments):Oe)-At,Bt=Math.min(Math.abs(Ft)/it,+(typeof De=="function"?De.apply(this,arguments):De)),Zt=Bt*(Ft<0?-1:1),un=l.sum(lt),Wt=un?(Ft-it*Zt)/un:0,en=l.range(it),Jt=[];return ue!=null&&en.sort(ue===zo?function(wn,pn){return lt[pn]-lt[wn]}:function(wn,pn){return ue(We[wn],We[pn])}),en.forEach(function(wn){Jt[wn]={data:We[wn],value:Ke=lt[wn],startAngle:At,endAngle:At+=Ke*Wt+Zt,padAngle:Bt}}),Jt}return Ue.value=function(We){return arguments.length?(te=We,Ue):te},Ue.sort=function(We){return arguments.length?(ue=We,Ue):ue},Ue.startAngle=function(We){return arguments.length?(we=We,Ue):we},Ue.endAngle=function(We){return arguments.length?(Oe=We,Ue):Oe},Ue.padAngle=function(We){return arguments.length?(De=We,Ue):De},Ue};var zo={};function Do(te){return te.x}function Qo(te){return te.y}function ds(te,ue,we){te.y0=ue,te.y=we}l.layout.stack=function(){var te=U,ue=vs,we=ms,Oe=ds,De=Do,Ue=Qo;function We(Ke,it){if(!(Bt=Ke.length))return Ke;var lt=Ke.map(function(wn,pn){return te.call(We,wn,pn)}),At=lt.map(function(wn){return wn.map(function(pn,Qt){return[De.call(We,pn,Qt),Ue.call(We,pn,Qt)]})}),Ft=ue.call(We,At,it);lt=l.permute(lt,Ft),At=l.permute(At,Ft);var Bt,Zt,un,Wt,en=we.call(We,At,it),Jt=lt[0].length;for(un=0;un<Jt;++un)for(Oe.call(We,lt[0][un],Wt=en[un],At[0][un][1]),Zt=1;Zt<Bt;++Zt)Oe.call(We,lt[Zt][un],Wt+=At[Zt-1][un][1],At[Zt][un][1]);return Ke}return We.values=function(Ke){return arguments.length?(te=Ke,We):te},We.order=function(Ke){return arguments.length?(ue=typeof Ke=="function"?Ke:gs.get(Ke)||vs,We):ue},We.offset=function(Ke){return arguments.length?(we=typeof Ke=="function"?Ke:Oa.get(Ke)||ms,We):we},We.x=function(Ke){return arguments.length?(De=Ke,We):De},We.y=function(Ke){return arguments.length?(Ue=Ke,We):Ue},We.out=function(Ke){return arguments.length?(Oe=Ke,We):Oe},We};var gs=l.map({"inside-out":function(te){var ue,we,Oe=te.length,De=te.map(Js),Ue=te.map(_o),We=l.range(Oe).sort(function(Ft,Bt){return De[Ft]-De[Bt]}),Ke=0,it=0,lt=[],At=[];for(ue=0;ue<Oe;++ue)we=We[ue],Ke<it?(Ke+=Ue[we],lt.push(we)):(it+=Ue[we],At.push(we));return At.reverse().concat(lt)},reverse:function(te){return l.range(te.length).reverse()},default:vs}),Oa=l.map({silhouette:function(te){var ue,we,Oe,De=te.length,Ue=te[0].length,We=[],Ke=0,it=[];for(we=0;we<Ue;++we){for(ue=0,Oe=0;ue<De;ue++)Oe+=te[ue][we][1];Oe>Ke&&(Ke=Oe),We.push(Oe)}for(we=0;we<Ue;++we)it[we]=(Ke-We[we])/2;return it},wiggle:function(te){var ue,we,Oe,De,Ue,We,Ke,it,lt,At=te.length,Ft=te[0],Bt=Ft.length,Zt=[];for(Zt[0]=it=lt=0,we=1;we<Bt;++we){for(ue=0,De=0;ue<At;++ue)De+=te[ue][we][1];for(ue=0,Ue=0,Ke=Ft[we][0]-Ft[we-1][0];ue<At;++ue){for(Oe=0,We=(te[ue][we][1]-te[ue][we-1][1])/(2*Ke);Oe<ue;++Oe)We+=(te[Oe][we][1]-te[Oe][we-1][1])/Ke;Ue+=We*te[ue][we][1]}Zt[we]=it-=De?Ue/De*Ke:0,it<lt&&(lt=it)}for(we=0;we<Bt;++we)Zt[we]-=lt;return Zt},expand:function(te){var ue,we,Oe,De=te.length,Ue=te[0].length,We=1/De,Ke=[];for(we=0;we<Ue;++we){for(ue=0,Oe=0;ue<De;ue++)Oe+=te[ue][we][1];if(Oe)for(ue=0;ue<De;ue++)te[ue][we][1]/=Oe;else for(ue=0;ue<De;ue++)te[ue][we][1]=We}for(we=0;we<Ue;++we)Ke[we]=0;return Ke},zero:ms});function vs(te){return l.range(te.length)}function ms(te){for(var ue=-1,we=te[0].length,Oe=[];++ue<we;)Oe[ue]=0;return Oe}function Js(te){for(var ue,we=1,Oe=0,De=te[0][1],Ue=te.length;we<Ue;++we)(ue=te[we][1])>De&&(Oe=we,De=ue);return Oe}function _o(te){return te.reduce(Cs,0)}function Cs(te,ue){return te+ue[1]}function ys(te,ue){return Ks(te,Math.ceil(Math.log(ue.length)/Math.LN2+1))}function Ks(te,ue){for(var we=-1,Oe=+te[0],De=(te[1]-Oe)/ue,Ue=[];++we<=ue;)Ue[we]=De*we+Oe;return Ue}function xs(te){return[l.min(te),l.max(te)]}function es(te,ue){return te.value-ue.value}function Fo(te,ue){var we=te._pack_next;te._pack_next=ue,ue._pack_prev=te,ue._pack_next=we,we._pack_prev=ue}function Bo(te,ue){te._pack_next=ue,ue._pack_prev=te}function ai(te,ue){var we=ue.x-te.x,Oe=ue.y-te.y,De=te.r+ue.r;return .999*De*De>we*we+Oe*Oe}function wo(te){if((ue=te.children)&&(it=ue.length)){var ue,we,Oe,De,Ue,We,Ke,it,lt=1/0,At=-1/0,Ft=1/0,Bt=-1/0;if(ue.forEach(To),(we=ue[0]).x=-we.r,we.y=0,pn(we),it>1&&((Oe=ue[1]).x=Oe.r,Oe.y=0,pn(Oe),it>2))for(Kr(we,Oe,De=ue[2]),pn(De),Fo(we,De),we._pack_prev=De,Fo(De,Oe),Oe=we._pack_next,Ue=3;Ue<it;Ue++){Kr(we,Oe,De=ue[Ue]);var Zt=0,un=1,Wt=1;for(We=Oe._pack_next;We!==Oe;We=We._pack_next,un++)if(ai(We,De)){Zt=1;break}if(Zt==1)for(Ke=we._pack_prev;Ke!==We._pack_prev&&!ai(Ke,De);Ke=Ke._pack_prev,Wt++);Zt?(un<Wt||un==Wt&&Oe.r<we.r?Bo(we,Oe=We):Bo(we=Ke,Oe),Ue--):(Fo(we,De),Oe=De,pn(De))}var en=(lt+At)/2,Jt=(Ft+Bt)/2,wn=0;for(Ue=0;Ue<it;Ue++)(De=ue[Ue]).x-=en,De.y-=Jt,wn=Math.max(wn,De.r+Math.sqrt(De.x*De.x+De.y*De.y));te.r=wn,ue.forEach(Zi)}function pn(Qt){lt=Math.min(Qt.x-Qt.r,lt),At=Math.max(Qt.x+Qt.r,At),Ft=Math.min(Qt.y-Qt.r,Ft),Bt=Math.max(Qt.y+Qt.r,Bt)}}function To(te){te._pack_next=te._pack_prev=te}function Zi(te){delete te._pack_next,delete te._pack_prev}function Xr(te,ue,we,Oe){var De=te.children;if(te.x=ue+=Oe*te.x,te.y=we+=Oe*te.y,te.r*=Oe,De)for(var Ue=-1,We=De.length;++Ue<We;)Xr(De[Ue],ue,we,Oe)}function Kr(te,ue,we){var Oe=te.r+we.r,De=ue.x-te.x,Ue=ue.y-te.y;if(Oe&&(De||Ue)){var We=ue.r+we.r,Ke=De*De+Ue*Ue,it=.5+((Oe*=Oe)-(We*=We))/(2*Ke),lt=Math.sqrt(Math.max(0,2*We*(Oe+Ke)-(Oe-=Ke)*Oe-We*We))/(2*Ke);we.x=te.x+it*De+lt*Ue,we.y=te.y+it*Ue-lt*De}else we.x=te.x+Oe,we.y=te.y}function lo(te,ue){return te.parent==ue.parent?1:2}function Ja(te){var ue=te.children;return ue.length?ue[0]:te.t}function Ps(te){var ue,we=te.children;return(ue=we.length)?we[ue-1]:te.t}function $s(te,ue,we){var Oe=we/(ue.i-te.i);ue.c-=Oe,ue.s+=we,te.c+=Oe,ue.z+=we,ue.m+=we}function No(te,ue,we){return te.a.parent===ue.parent?te.a:we}function Qs(te){var ue=te.children;return ue&&ue.length?Qs(ue[0]):te}function jo(te){var ue,we=te.children;return we&&(ue=we.length)?jo(we[ue-1]):te}function uo(te){return{x:te.x,y:te.y,dx:te.dx,dy:te.dy}}function Uo(te,ue){var we=te.x+ue[3],Oe=te.y+ue[0],De=te.dx-ue[1]-ue[3],Ue=te.dy-ue[0]-ue[2];return De<0&&(we+=De/2,De=0),Ue<0&&(Oe+=Ue/2,Ue=0),{x:we,y:Oe,dx:De,dy:Ue}}function mi(te){var ue=te[0],we=te[te.length-1];return ue<we?[ue,we]:[we,ue]}function Ka(te){return te.rangeExtent?te.rangeExtent():mi(te.range())}function Vo(te,ue,we,Oe){var De=we(te[0],te[1]),Ue=Oe(ue[0],ue[1]);return function(We){return Ue(De(We))}}function Ii(te,ue){var we,Oe=0,De=te.length-1,Ue=te[Oe],We=te[De];return We<Ue&&(we=Oe,Oe=De,De=we,we=Ue,Ue=We,We=we),te[Oe]=ue.floor(Ue),te[De]=ue.ceil(We),te}function Wi(te){return te?{floor:function(ue){return Math.floor(ue/te)*te},ceil:function(ue){return Math.ceil(ue/te)*te}}:Yi}l.layout.histogram=function(){var te=!0,ue=Number,we=xs,Oe=ys;function De(Ue,We){for(var Ke,it,lt=[],At=Ue.map(ue,this),Ft=we.call(this,At,We),Bt=Oe.call(this,Ft,At,We),Zt=(We=-1,At.length),un=Bt.length-1,Wt=te?1:1/Zt;++We<un;)(Ke=lt[We]=[]).dx=Bt[We+1]-(Ke.x=Bt[We]),Ke.y=0;if(un>0)for(We=-1;++We<Zt;)(it=At[We])>=Ft[0]&&it<=Ft[1]&&((Ke=lt[l.bisect(Bt,it,1,un)-1]).y+=Wt,Ke.push(Ue[We]));return lt}return De.value=function(Ue){return arguments.length?(ue=Ue,De):ue},De.range=function(Ue){return arguments.length?(we=Fn(Ue),De):we},De.bins=function(Ue){return arguments.length?(Oe=typeof Ue=="number"?function(We){return Ks(We,Ue)}:Fn(Ue),De):Oe},De.frequency=function(Ue){return arguments.length?(te=!!Ue,De):te},De},l.layout.pack=function(){var te,ue=l.layout.hierarchy().sort(es),we=0,Oe=[1,1];function De(Ue,We){var Ke=ue.call(this,Ue,We),it=Ke[0],lt=Oe[0],At=Oe[1],Ft=te==null?Math.sqrt:typeof te=="function"?te:function(){return te};if(it.x=it.y=0,Pa(it,function(Zt){Zt.r=+Ft(Zt.value)}),Pa(it,wo),we){var Bt=we*(te?1:Math.max(2*it.r/lt,2*it.r/At))/2;Pa(it,function(Zt){Zt.r+=Bt}),Pa(it,wo),Pa(it,function(Zt){Zt.r-=Bt})}return Xr(it,lt/2,At/2,te?1:1/Math.max(2*it.r/lt,2*it.r/At)),Ke}return De.size=function(Ue){return arguments.length?(Oe=Ue,De):Oe},De.radius=function(Ue){return arguments.length?(te=Ue==null||typeof Ue=="function"?Ue:+Ue,De):te},De.padding=function(Ue){return arguments.length?(we=+Ue,De):we},Ro(De,ue)},l.layout.tree=function(){var te=l.layout.hierarchy().sort(null).value(null),ue=lo,we=[1,1],Oe=null;function De(it,lt){var At=te.call(this,it,lt),Ft=At[0],Bt=function(pn){for(var Qt,Ln={A:null,children:[pn]},Rn=[Ln];(Qt=Rn.pop())!=null;)for(var Xn,Jn=Qt.children,vr=0,yr=Jn.length;vr<yr;++vr)Rn.push((Jn[vr]=Xn={_:Jn[vr],parent:Qt,children:(Xn=Jn[vr].children)&&Xn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:vr}).a=Xn);return Ln.children[0]}(Ft);if(Pa(Bt,Ue),Bt.parent.m=-Bt.z,Ko(Bt,We),Oe)Ko(Ft,Ke);else{var Zt=Ft,un=Ft,Wt=Ft;Ko(Ft,function(pn){pn.x<Zt.x&&(Zt=pn),pn.x>un.x&&(un=pn),pn.depth>Wt.depth&&(Wt=pn)});var en=ue(Zt,un)/2-Zt.x,Jt=we[0]/(un.x+ue(un,Zt)/2+en),wn=we[1]/(Wt.depth||1);Ko(Ft,function(pn){pn.x=(pn.x+en)*Jt,pn.y=pn.depth*wn})}return At}function Ue(it){var lt=it.children,At=it.parent.children,Ft=it.i?At[it.i-1]:null;if(lt.length){(function(Zt){for(var un,Wt=0,en=0,Jt=Zt.children,wn=Jt.length;--wn>=0;)(un=Jt[wn]).z+=Wt,un.m+=Wt,Wt+=un.s+(en+=un.c)})(it);var Bt=(lt[0].z+lt[lt.length-1].z)/2;Ft?(it.z=Ft.z+ue(it._,Ft._),it.m=it.z-Bt):it.z=Bt}else Ft&&(it.z=Ft.z+ue(it._,Ft._));it.parent.A=function(Zt,un,Wt){if(un){for(var en,Jt=Zt,wn=Zt,pn=un,Qt=Jt.parent.children[0],Ln=Jt.m,Rn=wn.m,Xn=pn.m,Jn=Qt.m;pn=Ps(pn),Jt=Ja(Jt),pn&&Jt;)Qt=Ja(Qt),(wn=Ps(wn)).a=Zt,(en=pn.z+Xn-Jt.z-Ln+ue(pn._,Jt._))>0&&($s(No(pn,Zt,Wt),Zt,en),Ln+=en,Rn+=en),Xn+=pn.m,Ln+=Jt.m,Jn+=Qt.m,Rn+=wn.m;pn&&!Ps(wn)&&(wn.t=pn,wn.m+=Xn-Rn),Jt&&!Ja(Qt)&&(Qt.t=Jt,Qt.m+=Ln-Jn,Wt=Zt)}return Wt}(it,Ft,it.parent.A||At[0])}function We(it){it._.x=it.z+it.parent.m,it.m+=it.parent.m}function Ke(it){it.x*=we[0],it.y=it.depth*we[1]}return De.separation=function(it){return arguments.length?(ue=it,De):ue},De.size=function(it){return arguments.length?(Oe=(we=it)==null?Ke:null,De):Oe?null:we},De.nodeSize=function(it){return arguments.length?(Oe=(we=it)==null?null:Ke,De):Oe?we:null},Ro(De,te)},l.layout.cluster=function(){var te=l.layout.hierarchy().sort(null).value(null),ue=lo,we=[1,1],Oe=!1;function De(Ue,We){var Ke,it=te.call(this,Ue,We),lt=it[0],At=0;Pa(lt,function(Wt){var en=Wt.children;en&&en.length?(Wt.x=function(Jt){return Jt.reduce(function(wn,pn){return wn+pn.x},0)/Jt.length}(en),Wt.y=function(Jt){return 1+l.max(Jt,function(wn){return wn.y})}(en)):(Wt.x=Ke?At+=ue(Wt,Ke):0,Wt.y=0,Ke=Wt)});var Ft=Qs(lt),Bt=jo(lt),Zt=Ft.x-ue(Ft,Bt)/2,un=Bt.x+ue(Bt,Ft)/2;return Pa(lt,Oe?function(Wt){Wt.x=(Wt.x-lt.x)*we[0],Wt.y=(lt.y-Wt.y)*we[1]}:function(Wt){Wt.x=(Wt.x-Zt)/(un-Zt)*we[0],Wt.y=(1-(lt.y?Wt.y/lt.y:1))*we[1]}),it}return De.separation=function(Ue){return arguments.length?(ue=Ue,De):ue},De.size=function(Ue){return arguments.length?(Oe=(we=Ue)==null,De):Oe?null:we},De.nodeSize=function(Ue){return arguments.length?(Oe=(we=Ue)!=null,De):Oe?we:null},Ro(De,te)},l.layout.treemap=function(){var te,ue=l.layout.hierarchy(),we=Math.round,Oe=[1,1],De=null,Ue=uo,We=!1,Ke="squarify",it=.5*(1+Math.sqrt(5));function lt(Wt,en){for(var Jt,wn,pn=-1,Qt=Wt.length;++pn<Qt;)wn=(Jt=Wt[pn]).value*(en<0?0:en),Jt.area=isNaN(wn)||wn<=0?0:wn}function At(Wt){var en=Wt.children;if(en&&en.length){var Jt,wn,pn,Qt=Ue(Wt),Ln=[],Rn=en.slice(),Xn=1/0,Jn=Ke==="slice"?Qt.dx:Ke==="dice"?Qt.dy:Ke==="slice-dice"?1&Wt.depth?Qt.dy:Qt.dx:Math.min(Qt.dx,Qt.dy);for(lt(Rn,Qt.dx*Qt.dy/Wt.value),Ln.area=0;(pn=Rn.length)>0;)Ln.push(Jt=Rn[pn-1]),Ln.area+=Jt.area,Ke!=="squarify"||(wn=Bt(Ln,Jn))<=Xn?(Rn.pop(),Xn=wn):(Ln.area-=Ln.pop().area,Zt(Ln,Jn,Qt,!1),Jn=Math.min(Qt.dx,Qt.dy),Ln.length=Ln.area=0,Xn=1/0);Ln.length&&(Zt(Ln,Jn,Qt,!0),Ln.length=Ln.area=0),en.forEach(At)}}function Ft(Wt){var en=Wt.children;if(en&&en.length){var Jt,wn=Ue(Wt),pn=en.slice(),Qt=[];for(lt(pn,wn.dx*wn.dy/Wt.value),Qt.area=0;Jt=pn.pop();)Qt.push(Jt),Qt.area+=Jt.area,Jt.z!=null&&(Zt(Qt,Jt.z?wn.dx:wn.dy,wn,!pn.length),Qt.length=Qt.area=0);en.forEach(Ft)}}function Bt(Wt,en){for(var Jt,wn=Wt.area,pn=0,Qt=1/0,Ln=-1,Rn=Wt.length;++Ln<Rn;)(Jt=Wt[Ln].area)&&(Jt<Qt&&(Qt=Jt),Jt>pn&&(pn=Jt));return en*=en,(wn*=wn)?Math.max(en*pn*it/wn,wn/(en*Qt*it)):1/0}function Zt(Wt,en,Jt,wn){var pn,Qt=-1,Ln=Wt.length,Rn=Jt.x,Xn=Jt.y,Jn=en?we(Wt.area/en):0;if(en==Jt.dx){for((wn||Jn>Jt.dy)&&(Jn=Jt.dy);++Qt<Ln;)(pn=Wt[Qt]).x=Rn,pn.y=Xn,pn.dy=Jn,Rn+=pn.dx=Math.min(Jt.x+Jt.dx-Rn,Jn?we(pn.area/Jn):0);pn.z=!0,pn.dx+=Jt.x+Jt.dx-Rn,Jt.y+=Jn,Jt.dy-=Jn}else{for((wn||Jn>Jt.dx)&&(Jn=Jt.dx);++Qt<Ln;)(pn=Wt[Qt]).x=Rn,pn.y=Xn,pn.dx=Jn,Xn+=pn.dy=Math.min(Jt.y+Jt.dy-Xn,Jn?we(pn.area/Jn):0);pn.z=!1,pn.dy+=Jt.y+Jt.dy-Xn,Jt.x+=Jn,Jt.dx-=Jn}}function un(Wt){var en=te||ue(Wt),Jt=en[0];return Jt.x=Jt.y=0,Jt.value?(Jt.dx=Oe[0],Jt.dy=Oe[1]):Jt.dx=Jt.dy=0,te&&ue.revalue(Jt),lt([Jt],Jt.dx*Jt.dy/Jt.value),(te?Ft:At)(Jt),We&&(te=en),en}return un.size=function(Wt){return arguments.length?(Oe=Wt,un):Oe},un.padding=function(Wt){if(!arguments.length)return De;function en(pn){var Qt=Wt.call(un,pn,pn.depth);return Qt==null?uo(pn):Uo(pn,typeof Qt=="number"?[Qt,Qt,Qt,Qt]:Qt)}function Jt(pn){return Uo(pn,Wt)}var wn;return Ue=(De=Wt)==null?uo:(wn=typeof Wt)=="function"?en:(wn==="number"&&(Wt=[Wt,Wt,Wt,Wt]),Jt),un},un.round=function(Wt){return arguments.length?(we=Wt?Math.round:Number,un):we!=Number},un.sticky=function(Wt){return arguments.length?(We=Wt,te=null,un):We},un.ratio=function(Wt){return arguments.length?(it=Wt,un):it},un.mode=function(Wt){return arguments.length?(Ke=Wt+"",un):Ke},Ro(un,ue)},l.random={normal:function(te,ue){var we=arguments.length;return we<2&&(ue=1),we<1&&(te=0),function(){var Oe,De,Ue;do Ue=(Oe=2*Math.random()-1)*Oe+(De=2*Math.random()-1)*De;while(!Ue||Ue>1);return te+ue*Oe*Math.sqrt(-2*Math.log(Ue)/Ue)}},logNormal:function(){var te=l.random.normal.apply(l,arguments);return function(){return Math.exp(te())}},bates:function(te){var ue=l.random.irwinHall(te);return function(){return ue()/te}},irwinHall:function(te){return function(){for(var ue=0,we=0;we<te;we++)ue+=Math.random();return ue}}},l.scale={};var Yi={floor:U,ceil:U};function qi(te,ue,we,Oe){var De=[],Ue=[],We=0,Ke=Math.min(te.length,ue.length)-1;for(te[Ke]<te[0]&&(te=te.slice().reverse(),ue=ue.slice().reverse());++We<=Ke;)De.push(we(te[We-1],te[We])),Ue.push(Oe(ue[We-1],ue[We]));return function(it){var lt=l.bisect(te,it,1,Ke)-1;return Ue[lt](De[lt](it))}}function sa(te,ue,we,Oe){var De,Ue;function We(){var it=Math.min(te.length,ue.length)>2?qi:Vo,lt=Oe?Oo:Ys;return De=it(te,ue,lt,we),Ue=it(ue,te,lt,ma),Ke}function Ke(it){return De(it)}return Ke.invert=function(it){return Ue(it)},Ke.domain=function(it){return arguments.length?(te=it.map(Number),We()):te},Ke.range=function(it){return arguments.length?(ue=it,We()):ue},Ke.rangeRound=function(it){return Ke.range(it).interpolate(cl)},Ke.clamp=function(it){return arguments.length?(Oe=it,We()):Oe},Ke.interpolate=function(it){return arguments.length?(we=it,We()):we},Ke.ticks=function(it){return ya(te,it)},Ke.tickFormat=function(it,lt){return d3_scale_linearTickFormat(te,it,lt)},Ke.nice=function(it){return Ia(te,it),We()},Ke.copy=function(){return sa(te,ue,we,Oe)},We()}function ko(te,ue){return l.rebind(te,ue,"range","rangeRound","interpolate","clamp")}function Ia(te,ue){return Ii(te,Wi(Di(te,ue)[2])),Ii(te,Wi(Di(te,ue)[2])),te}function Di(te,ue){ue==null&&(ue=10);var we=mi(te),Oe=we[1]-we[0],De=Math.pow(10,Math.floor(Math.log(Oe/ue)/Math.LN10)),Ue=ue/Oe*De;return Ue<=.15?De*=10:Ue<=.35?De*=5:Ue<=.75&&(De*=2),we[0]=Math.ceil(we[0]/De)*De,we[1]=Math.floor(we[1]/De)*De+.5*De,we[2]=De,we}function ya(te,ue){return l.range.apply(l,Di(te,ue))}function Os(te,ue,we,Oe){function De(Ke){return(we?Math.log(Ke<0?0:Ke):-Math.log(Ke>0?0:-Ke))/Math.log(ue)}function Ue(Ke){return we?Math.pow(ue,Ke):-Math.pow(ue,-Ke)}function We(Ke){return te(De(Ke))}return We.invert=function(Ke){return Ue(te.invert(Ke))},We.domain=function(Ke){return arguments.length?(we=Ke[0]>=0,te.domain((Oe=Ke.map(Number)).map(De)),We):Oe},We.base=function(Ke){return arguments.length?(ue=+Ke,te.domain(Oe.map(De)),We):ue},We.nice=function(){var Ke=Ii(Oe.map(De),we?Math:Is);return te.domain(Ke),Oe=Ke.map(Ue),We},We.ticks=function(){var Ke=mi(Oe),it=[],lt=Ke[0],At=Ke[1],Ft=Math.floor(De(lt)),Bt=Math.ceil(De(At)),Zt=ue%1?2:ue;if(isFinite(Bt-Ft)){if(we){for(;Ft<Bt;Ft++)for(var un=1;un<Zt;un++)it.push(Ue(Ft)*un);it.push(Ue(Ft))}else for(it.push(Ue(Ft));Ft++<Bt;)for(un=Zt-1;un>0;un--)it.push(Ue(Ft)*un);for(Ft=0;it[Ft]<lt;Ft++);for(Bt=it.length;it[Bt-1]>At;Bt--);it=it.slice(Ft,Bt)}return it},We.copy=function(){return Os(te.copy(),ue,we,Oe)},ko(We,te)}l.scale.linear=function(){return sa([0,1],[0,1],ma,!1)},l.scale.log=function(){return Os(l.scale.linear().domain([0,1]),10,!0,[1,10])};var Is={floor:function(te){return-Math.ceil(-te)},ceil:function(te){return-Math.floor(-te)}};function ia(te,ue,we){var Oe=br(ue),De=br(1/ue);function Ue(We){return te(Oe(We))}return Ue.invert=function(We){return De(te.invert(We))},Ue.domain=function(We){return arguments.length?(te.domain((we=We.map(Number)).map(Oe)),Ue):we},Ue.ticks=function(We){return ya(we,We)},Ue.tickFormat=function(We,Ke){return d3_scale_linearTickFormat(we,We,Ke)},Ue.nice=function(We){return Ue.domain(Ia(we,We))},Ue.exponent=function(We){return arguments.length?(Oe=br(ue=We),De=br(1/ue),te.domain(we.map(Oe)),Ue):ue},Ue.copy=function(){return ia(te.copy(),ue,we)},ko(Ue,te)}function br(te){return function(ue){return ue<0?-Math.pow(-ue,te):Math.pow(ue,te)}}function Ho(te,ue){var we,Oe,De;function Ue(Ke){return Oe[((we.get(Ke)||(ue.t==="range"?we.set(Ke,te.push(Ke)):NaN))-1)%Oe.length]}function We(Ke,it){return l.range(te.length).map(function(lt){return Ke+it*lt})}return Ue.domain=function(Ke){if(!arguments.length)return te;te=[],we=new w;for(var it,lt=-1,At=Ke.length;++lt<At;)we.has(it=Ke[lt])||we.set(it,te.push(it));return Ue[ue.t].apply(Ue,ue.a)},Ue.range=function(Ke){return arguments.length?(Oe=Ke,De=0,ue={t:"range",a:arguments},Ue):Oe},Ue.rangePoints=function(Ke,it){arguments.length<2&&(it=0);var lt=Ke[0],At=Ke[1],Ft=te.length<2?(lt=(lt+At)/2,0):(At-lt)/(te.length-1+it);return Oe=We(lt+Ft*it/2,Ft),De=0,ue={t:"rangePoints",a:arguments},Ue},Ue.rangeRoundPoints=function(Ke,it){arguments.length<2&&(it=0);var lt=Ke[0],At=Ke[1],Ft=te.length<2?(lt=At=Math.round((lt+At)/2),0):(At-lt)/(te.length-1+it)|0;return Oe=We(lt+Math.round(Ft*it/2+(At-lt-(te.length-1+it)*Ft)/2),Ft),De=0,ue={t:"rangeRoundPoints",a:arguments},Ue},Ue.rangeBands=function(Ke,it,lt){arguments.length<2&&(it=0),arguments.length<3&&(lt=it);var At=Ke[1]<Ke[0],Ft=Ke[At-0],Bt=Ke[1-At],Zt=(Bt-Ft)/(te.length-it+2*lt);return Oe=We(Ft+Zt*lt,Zt),At&&Oe.reverse(),De=Zt*(1-it),ue={t:"rangeBands",a:arguments},Ue},Ue.rangeRoundBands=function(Ke,it,lt){arguments.length<2&&(it=0),arguments.length<3&&(lt=it);var At=Ke[1]<Ke[0],Ft=Ke[At-0],Bt=Ke[1-At],Zt=Math.floor((Bt-Ft)/(te.length-it+2*lt));return Oe=We(Ft+Math.round((Bt-Ft-(te.length-it)*Zt)/2),Zt),At&&Oe.reverse(),De=Math.round(Zt*(1-it)),ue={t:"rangeRoundBands",a:arguments},Ue},Ue.rangeBand=function(){return De},Ue.rangeExtent=function(){return mi(ue.a[0])},Ue.copy=function(){return Ho(te,ue)},Ue.domain(te)}l.scale.pow=function(){return ia(l.scale.linear(),1,[0,1])},l.scale.sqrt=function(){return l.scale.pow().exponent(.5)},l.scale.ordinal=function(){return Ho([],{t:"range",a:[[]]})},l.scale.category10=function(){return l.scale.ordinal().range(la)},l.scale.category20=function(){return l.scale.ordinal().range(Rs)},l.scale.category20b=function(){return l.scale.ordinal().range(ts)},l.scale.category20c=function(){return l.scale.ordinal().range(ns)};var la=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xn),Rs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xn),ts=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xn),ns=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xn);function rs(te,ue){var we;function Oe(){var Ue=0,We=ue.length;for(we=[];++Ue<We;)we[Ue-1]=l.quantile(te,Ue/We);return De}function De(Ue){if(!isNaN(Ue=+Ue))return ue[l.bisect(we,Ue)]}return De.domain=function(Ue){return arguments.length?(te=Ue.map(h).filter(f).sort(c),Oe()):te},De.range=function(Ue){return arguments.length?(ue=Ue,Oe()):ue},De.quantiles=function(){return we},De.invertExtent=function(Ue){return(Ue=ue.indexOf(Ue))<0?[NaN,NaN]:[Ue>0?we[Ue-1]:te[0],Ue<we.length?we[Ue]:te[te.length-1]]},De.copy=function(){return rs(te,ue)},Oe()}function _r(te,ue,we){var Oe,De;function Ue(Ke){return we[Math.max(0,Math.min(De,Math.floor(Oe*(Ke-te))))]}function We(){return Oe=we.length/(ue-te),De=we.length-1,Ue}return Ue.domain=function(Ke){return arguments.length?(te=+Ke[0],ue=+Ke[Ke.length-1],We()):[te,ue]},Ue.range=function(Ke){return arguments.length?(we=Ke,We()):we},Ue.invertExtent=function(Ke){return[Ke=(Ke=we.indexOf(Ke))<0?NaN:Ke/Oe+te,Ke+1/Oe]},Ue.copy=function(){return _r(te,ue,we)},We()}function is(te,ue){function we(Oe){if(Oe<=Oe)return ue[l.bisect(te,Oe)]}return we.domain=function(Oe){return arguments.length?(te=Oe,we):te},we.range=function(Oe){return arguments.length?(ue=Oe,we):ue},we.invertExtent=function(Oe){return Oe=ue.indexOf(Oe),[te[Oe-1],te[Oe]]},we.copy=function(){return is(te,ue)},we}function Ra(te){function ue(we){return+we}return ue.invert=ue,ue.domain=ue.range=function(we){return arguments.length?(te=we.map(ue),ue):te},ue.ticks=function(we){return ya(te,we)},ue.tickFormat=function(we,Oe){return d3_scale_linearTickFormat(te,we,Oe)},ue.copy=function(){return Ra(te)},ue}function zs(){return 0}l.scale.quantile=function(){return rs([],[])},l.scale.quantize=function(){return _r(0,1,[0,1])},l.scale.threshold=function(){return is([.5],[0,1])},l.scale.identity=function(){return Ra([0,1])},l.svg={},l.svg.arc=function(){var te=Xi,ue=qo,we=zs,Oe=bs,De=co,Ue=xa,We=Ao;function Ke(){var lt=Math.max(0,+te.apply(this,arguments)),At=Math.max(0,+ue.apply(this,arguments)),Ft=De.apply(this,arguments)-Pt,Bt=Ue.apply(this,arguments)-Pt,Zt=Math.abs(Bt-Ft),un=Ft>Bt?0:1;if(At<lt&&(Wt=At,At=lt,lt=Wt),Zt>=Ut)return it(At,un)+(lt?it(lt,1-un):"")+"Z";var Wt,en,Jt,wn,pn,Qt,Ln,Rn,Xn,Jn,vr,yr,sr=0,pr=0,kr=[];if((wn=(+We.apply(this,arguments)||0)/2)&&(Jt=Oe===bs?Math.sqrt(lt*lt+At*At):+Oe.apply(this,arguments),un||(pr*=-1),At&&(pr=Be(Jt/At*Math.sin(wn))),lt&&(sr=Be(Jt/lt*Math.sin(wn)))),At){pn=At*Math.cos(Ft+pr),Qt=At*Math.sin(Ft+pr),Ln=At*Math.cos(Bt-pr),Rn=At*Math.sin(Bt-pr);var Vr=Math.abs(Bt-Ft-2*pr)<=Et?0:1;if(pr&&Va(pn,Qt,Ln,Rn)===un^Vr){var Hr=(Ft+Bt)/2;pn=At*Math.cos(Hr),Qt=At*Math.sin(Hr),Ln=Rn=null}}else pn=Qt=0;if(lt){Xn=lt*Math.cos(Bt-sr),Jn=lt*Math.sin(Bt-sr),vr=lt*Math.cos(Ft+sr),yr=lt*Math.sin(Ft+sr);var fr=Math.abs(Ft-Bt+2*sr)<=Et?0:1;if(sr&&Va(Xn,Jn,vr,yr)===1-un^fr){var Ar=(Ft+Bt)/2;Xn=lt*Math.cos(Ar),Jn=lt*Math.sin(Ar),vr=yr=null}}else Xn=Jn=0;if(Zt>St&&(Wt=Math.min(Math.abs(At-lt)/2,+we.apply(this,arguments)))>.001){en=lt<At^un?0:1;var Dr=Wt,zr=Wt;if(Zt<Et){var Wr=vr==null?[Xn,Jn]:Ln==null?[pn,Qt]:An([pn,Qt],[vr,yr],[Ln,Rn],[Xn,Jn]),Zr=pn-Wr[0],$r=Qt-Wr[1],ui=Ln-Wr[0],yi=Rn-Wr[1],hi=1/Math.sin(Math.acos((Zr*ui+$r*yi)/(Math.sqrt(Zr*Zr+$r*$r)*Math.sqrt(ui*ui+yi*yi)))/2),si=Math.sqrt(Wr[0]*Wr[0]+Wr[1]*Wr[1]);zr=Math.min(Wt,(lt-si)/(hi-1)),Dr=Math.min(Wt,(At-si)/(hi+1))}if(Ln!=null){var ci=za(vr==null?[Xn,Jn]:[vr,yr],[pn,Qt],At,Dr,un),pi=za([Ln,Rn],[Xn,Jn],At,Dr,un);Wt===Dr?kr.push("M",ci[0],"A",Dr,",",Dr," 0 0,",en," ",ci[1],"A",At,",",At," 0 ",1-un^Va(ci[1][0],ci[1][1],pi[1][0],pi[1][1]),",",un," ",pi[1],"A",Dr,",",Dr," 0 0,",en," ",pi[0]):kr.push("M",ci[0],"A",Dr,",",Dr," 0 1,",en," ",pi[0])}else kr.push("M",pn,",",Qt);if(vr!=null){var Si=za([pn,Qt],[vr,yr],lt,-zr,un),So=za([Xn,Jn],Ln==null?[pn,Qt]:[Ln,Rn],lt,-zr,un);Wt===zr?kr.push("L",So[0],"A",zr,",",zr," 0 0,",en," ",So[1],"A",lt,",",lt," 0 ",un^Va(So[1][0],So[1][1],Si[1][0],Si[1][1]),",",1-un," ",Si[1],"A",zr,",",zr," 0 0,",en," ",Si[0]):kr.push("L",So[0],"A",zr,",",zr," 0 0,",en," ",Si[0])}else kr.push("L",Xn,",",Jn)}else kr.push("M",pn,",",Qt),Ln!=null&&kr.push("A",At,",",At," 0 ",Vr,",",un," ",Ln,",",Rn),kr.push("L",Xn,",",Jn),vr!=null&&kr.push("A",lt,",",lt," 0 ",fr,",",1-un," ",vr,",",yr);return kr.push("Z"),kr.join("")}function it(lt,At){return"M0,"+lt+"A"+lt+","+lt+" 0 1,"+At+" 0,"+-lt+"A"+lt+","+lt+" 0 1,"+At+" 0,"+lt}return Ke.innerRadius=function(lt){return arguments.length?(te=Fn(lt),Ke):te},Ke.outerRadius=function(lt){return arguments.length?(ue=Fn(lt),Ke):ue},Ke.cornerRadius=function(lt){return arguments.length?(we=Fn(lt),Ke):we},Ke.padRadius=function(lt){return arguments.length?(Oe=lt==bs?bs:Fn(lt),Ke):Oe},Ke.startAngle=function(lt){return arguments.length?(De=Fn(lt),Ke):De},Ke.endAngle=function(lt){return arguments.length?(Ue=Fn(lt),Ke):Ue},Ke.padAngle=function(lt){return arguments.length?(We=Fn(lt),Ke):We},Ke.centroid=function(){var lt=(+te.apply(this,arguments)+ +ue.apply(this,arguments))/2,At=(+De.apply(this,arguments)+ +Ue.apply(this,arguments))/2-Pt;return[Math.cos(At)*lt,Math.sin(At)*lt]},Ke};var bs="auto";function Xi(te){return te.innerRadius}function qo(te){return te.outerRadius}function co(te){return te.startAngle}function xa(te){return te.endAngle}function Ao(te){return te&&te.padAngle}function Va(te,ue,we,Oe){return(te-we)*ue-(ue-Oe)*te>0?0:1}function za(te,ue,we,Oe,De){var Ue=te[0]-ue[0],We=te[1]-ue[1],Ke=(De?Oe:-Oe)/Math.sqrt(Ue*Ue+We*We),it=Ke*We,lt=-Ke*Ue,At=te[0]+it,Ft=te[1]+lt,Bt=ue[0]+it,Zt=ue[1]+lt,un=(At+Bt)/2,Wt=(Ft+Zt)/2,en=Bt-At,Jt=Zt-Ft,wn=en*en+Jt*Jt,pn=we-Oe,Qt=At*Zt-Bt*Ft,Ln=(Jt<0?-1:1)*Math.sqrt(Math.max(0,pn*pn*wn-Qt*Qt)),Rn=(Qt*Jt-en*Ln)/wn,Xn=(-Qt*en-Jt*Ln)/wn,Jn=(Qt*Jt+en*Ln)/wn,vr=(-Qt*en+Jt*Ln)/wn,yr=Rn-un,sr=Xn-Wt,pr=Jn-un,kr=vr-Wt;return yr*yr+sr*sr>pr*pr+kr*kr&&(Rn=Jn,Xn=vr),[[Rn-it,Xn-lt],[Rn*we/pn,Xn*we/pn]]}function Go(){return!0}function Ji(te){var ue=Sn,we=jn,Oe=Go,De=ri,Ue=De.key,We=.7;function Ke(it){var lt,At=[],Ft=[],Bt=-1,Zt=it.length,un=Fn(ue),Wt=Fn(we);function en(){At.push("M",De(te(Ft),We))}for(;++Bt<Zt;)Oe.call(this,lt=it[Bt],Bt)?Ft.push([+un.call(this,lt,Bt),+Wt.call(this,lt,Bt)]):Ft.length&&(en(),Ft=[]);return Ft.length&&en(),At.length?At.join(""):null}return Ke.x=function(it){return arguments.length?(ue=it,Ke):ue},Ke.y=function(it){return arguments.length?(we=it,Ke):we},Ke.defined=function(it){return arguments.length?(Oe=it,Ke):Oe},Ke.interpolate=function(it){return arguments.length?(Ue=typeof it=="function"?De=it:(De=Da.get(it)||ri).key,Ke):Ue},Ke.tension=function(it){return arguments.length?(We=it,Ke):We},Ke}l.svg.line=function(){return Ji(U)};var Da=l.map({linear:ri,"linear-closed":_s,step:function(te){for(var ue=0,we=te.length,Oe=te[0],De=[Oe[0],",",Oe[1]];++ue<we;)De.push("H",(Oe[0]+(Oe=te[ue])[0])/2,"V",Oe[1]);return we>1&&De.push("H",Oe[0]),De.join("")},"step-before":Aa,"step-after":Fa,basis:ni,"basis-open":function(te){if(te.length<4)return ri(te);for(var ue,we=[],Oe=-1,De=te.length,Ue=[0],We=[0];++Oe<3;)ue=te[Oe],Ue.push(ue[0]),We.push(ue[1]);for(we.push(Vi(Qa,Ue)+","+Vi(Qa,We)),--Oe;++Oe<De;)ue=te[Oe],Ue.shift(),Ue.push(ue[0]),We.shift(),We.push(ue[1]),Mo(we,Ue,We);return we.join("")},"basis-closed":function(te){for(var ue,we,Oe=-1,De=te.length,Ue=De+4,We=[],Ke=[];++Oe<4;)we=te[Oe%De],We.push(we[0]),Ke.push(we[1]);for(ue=[Vi(Qa,We),",",Vi(Qa,Ke)],--Oe;++Oe<Ue;)we=te[Oe%De],We.shift(),We.push(we[0]),Ke.shift(),Ke.push(we[1]),Mo(ue,We,Ke);return ue.join("")},bundle:function(te,ue){var we=te.length-1;if(we)for(var Oe,De,Ue=te[0][0],We=te[0][1],Ke=te[we][0]-Ue,it=te[we][1]-We,lt=-1;++lt<=we;)De=lt/we,(Oe=te[lt])[0]=ue*Oe[0]+(1-ue)*(Ue+De*Ke),Oe[1]=ue*Oe[1]+(1-ue)*(We+De*it);return ni(te)},cardinal:function(te,ue){return te.length<3?ri(te):te[0]+$a(te,ua(te,ue))},"cardinal-open":function(te,ue){return te.length<4?ri(te):te[1]+$a(te.slice(1,-1),ua(te,ue))},"cardinal-closed":function(te,ue){return te.length<3?_s(te):te[0]+$a((te.push(te[0]),te),ua([te[te.length-2]].concat(te,[te[1]]),ue))},monotone:function(te){return te.length<3?ri(te):te[0]+$a(te,function(ue){for(var we,Oe,De,Ue,We=[],Ke=function(At){for(var Ft=0,Bt=At.length-1,Zt=[],un=At[0],Wt=At[1],en=Zt[0]=fo(un,Wt);++Ft<Bt;)Zt[Ft]=(en+(en=fo(un=Wt,Wt=At[Ft+1])))/2;return Zt[Ft]=en,Zt}(ue),it=-1,lt=ue.length-1;++it<lt;)we=fo(ue[it],ue[it+1]),y(we)<St?Ke[it]=Ke[it+1]=0:(Ue=(Oe=Ke[it]/we)*Oe+(De=Ke[it+1]/we)*De)>9&&(Ue=3*we/Math.sqrt(Ue),Ke[it]=Ue*Oe,Ke[it+1]=Ue*De);for(it=-1;++it<=lt;)Ue=(ue[Math.min(lt,it+1)][0]-ue[Math.max(0,it-1)][0])/(6*(1+Ke[it]*Ke[it])),We.push([Ue||0,Ke[it]*Ue||0]);return We}(te))}});function ri(te){return te.length>1?te.join("L"):te+"Z"}function _s(te){return te.join("L")+"Z"}function Aa(te){for(var ue=0,we=te.length,Oe=te[0],De=[Oe[0],",",Oe[1]];++ue<we;)De.push("V",(Oe=te[ue])[1],"H",Oe[0]);return De.join("")}function Fa(te){for(var ue=0,we=te.length,Oe=te[0],De=[Oe[0],",",Oe[1]];++ue<we;)De.push("H",(Oe=te[ue])[0],"V",Oe[1]);return De.join("")}function $a(te,ue){if(ue.length<1||te.length!=ue.length&&te.length!=ue.length+2)return ri(te);var we=te.length!=ue.length,Oe="",De=te[0],Ue=te[1],We=ue[0],Ke=We,it=1;if(we&&(Oe+="Q"+(Ue[0]-2*We[0]/3)+","+(Ue[1]-2*We[1]/3)+","+Ue[0]+","+Ue[1],De=te[1],it=2),ue.length>1){Ke=ue[1],Ue=te[it],it++,Oe+="C"+(De[0]+We[0])+","+(De[1]+We[1])+","+(Ue[0]-Ke[0])+","+(Ue[1]-Ke[1])+","+Ue[0]+","+Ue[1];for(var lt=2;lt<ue.length;lt++,it++)Ue=te[it],Ke=ue[lt],Oe+="S"+(Ue[0]-Ke[0])+","+(Ue[1]-Ke[1])+","+Ue[0]+","+Ue[1]}if(we){var At=te[it];Oe+="Q"+(Ue[0]+2*Ke[0]/3)+","+(Ue[1]+2*Ke[1]/3)+","+At[0]+","+At[1]}return Oe}function ua(te,ue){for(var we,Oe=[],De=(1-ue)/2,Ue=te[0],We=te[1],Ke=1,it=te.length;++Ke<it;)we=Ue,Ue=We,We=te[Ke],Oe.push([De*(We[0]-we[0]),De*(We[1]-we[1])]);return Oe}function ni(te){if(te.length<3)return ri(te);var ue=1,we=te.length,Oe=te[0],De=Oe[0],Ue=Oe[1],We=[De,De,De,(Oe=te[1])[0]],Ke=[Ue,Ue,Ue,Oe[1]],it=[De,",",Ue,"L",Vi(Qa,We),",",Vi(Qa,Ke)];for(te.push(te[we-1]);++ue<=we;)Oe=te[ue],We.shift(),We.push(Oe[0]),Ke.shift(),Ke.push(Oe[1]),Mo(it,We,Ke);return te.pop(),it.push("L",Oe),it.join("")}function Vi(te,ue){return te[0]*ue[0]+te[1]*ue[1]+te[2]*ue[2]+te[3]*ue[3]}Da.forEach(function(te,ue){ue.key=te,ue.closed=/-closed$/.test(te)});var Ha=[0,2/3,1/3,0],ca=[0,1/3,2/3,0],Qa=[0,1/6,2/3,1/6];function Mo(te,ue,we){te.push("C",Vi(Ha,ue),",",Vi(Ha,we),",",Vi(ca,ue),",",Vi(ca,we),",",Vi(Qa,ue),",",Vi(Qa,we))}function fo(te,ue){return(ue[1]-te[1])/(ue[0]-te[0])}function Ki(te){for(var ue,we,Oe,De=-1,Ue=te.length;++De<Ue;)we=(ue=te[De])[0],Oe=ue[1]-Pt,ue[0]=we*Math.cos(Oe),ue[1]=we*Math.sin(Oe);return te}function Ba(te){var ue=Sn,we=Sn,Oe=0,De=jn,Ue=Go,We=ri,Ke=We.key,it=We,lt="L",At=.7;function Ft(Bt){var Zt,un,Wt,en=[],Jt=[],wn=[],pn=-1,Qt=Bt.length,Ln=Fn(ue),Rn=Fn(Oe),Xn=ue===we?function(){return un}:Fn(we),Jn=Oe===De?function(){return Wt}:Fn(De);function vr(){en.push("M",We(te(wn),At),lt,it(te(Jt.reverse()),At),"Z")}for(;++pn<Qt;)Ue.call(this,Zt=Bt[pn],pn)?(Jt.push([un=+Ln.call(this,Zt,pn),Wt=+Rn.call(this,Zt,pn)]),wn.push([+Xn.call(this,Zt,pn),+Jn.call(this,Zt,pn)])):Jt.length&&(vr(),Jt=[],wn=[]);return Jt.length&&vr(),en.length?en.join(""):null}return Ft.x=function(Bt){return arguments.length?(ue=we=Bt,Ft):we},Ft.x0=function(Bt){return arguments.length?(ue=Bt,Ft):ue},Ft.x1=function(Bt){return arguments.length?(we=Bt,Ft):we},Ft.y=function(Bt){return arguments.length?(Oe=De=Bt,Ft):De},Ft.y0=function(Bt){return arguments.length?(Oe=Bt,Ft):Oe},Ft.y1=function(Bt){return arguments.length?(De=Bt,Ft):De},Ft.defined=function(Bt){return arguments.length?(Ue=Bt,Ft):Ue},Ft.interpolate=function(Bt){return arguments.length?(Ke=typeof Bt=="function"?We=Bt:(We=Da.get(Bt)||ri).key,it=We.reverse||We,lt=We.closed?"M":"L",Ft):Ke},Ft.tension=function(Bt){return arguments.length?(At=Bt,Ft):At},Ft}function Mr(te){return te.source}function Or(te){return te.target}function as(te){return te.radius}function ho(te){return[te.x,te.y]}function qa(te){return function(){var ue=te.apply(this,arguments),we=ue[0],Oe=ue[1]-Pt;return[we*Math.cos(Oe),we*Math.sin(Oe)]}}function $i(){return 64}function Ds(){return"circle"}function fa(te){var ue=Math.sqrt(te/Et);return"M0,"+ue+"A"+ue+","+ue+" 0 1,1 0,"+-ue+"A"+ue+","+ue+" 0 1,1 0,"+ue+"Z"}l.svg.line.radial=function(){var te=Ji(Ki);return te.radius=te.x,delete te.x,te.angle=te.y,delete te.y,te},Aa.reverse=Fa,Fa.reverse=Aa,l.svg.area=function(){return Ba(U)},l.svg.area.radial=function(){var te=Ba(Ki);return te.radius=te.x,delete te.x,te.innerRadius=te.x0,delete te.x0,te.outerRadius=te.x1,delete te.x1,te.angle=te.y,delete te.y,te.startAngle=te.y0,delete te.y0,te.endAngle=te.y1,delete te.y1,te},l.svg.chord=function(){var te=Mr,ue=Or,we=as,Oe=co,De=xa;function Ue(lt,At){var Ft,Bt,Zt=We(this,te,lt,At),un=We(this,ue,lt,At);return"M"+Zt.p0+Ke(Zt.r,Zt.p1,Zt.a1-Zt.a0)+(Bt=un,((Ft=Zt).a0==Bt.a0&&Ft.a1==Bt.a1?it(Zt.r,Zt.p1,Zt.r,Zt.p0):it(Zt.r,Zt.p1,un.r,un.p0)+Ke(un.r,un.p1,un.a1-un.a0)+it(un.r,un.p1,Zt.r,Zt.p0))+"Z")}function We(lt,At,Ft,Bt){var Zt=At.call(lt,Ft,Bt),un=we.call(lt,Zt,Bt),Wt=Oe.call(lt,Zt,Bt)-Pt,en=De.call(lt,Zt,Bt)-Pt;return{r:un,a0:Wt,a1:en,p0:[un*Math.cos(Wt),un*Math.sin(Wt)],p1:[un*Math.cos(en),un*Math.sin(en)]}}function Ke(lt,At,Ft){return"A"+lt+","+lt+" 0 "+ +(Ft>Et)+",1 "+At}function it(lt,At,Ft,Bt){return"Q 0,0 "+Bt}return Ue.radius=function(lt){return arguments.length?(we=Fn(lt),Ue):we},Ue.source=function(lt){return arguments.length?(te=Fn(lt),Ue):te},Ue.target=function(lt){return arguments.length?(ue=Fn(lt),Ue):ue},Ue.startAngle=function(lt){return arguments.length?(Oe=Fn(lt),Ue):Oe},Ue.endAngle=function(lt){return arguments.length?(De=Fn(lt),Ue):De},Ue},l.svg.diagonal=function(){var te=Mr,ue=Or,we=ho;function Oe(De,Ue){var We=te.call(this,De,Ue),Ke=ue.call(this,De,Ue),it=(We.y+Ke.y)/2,lt=[We,{x:We.x,y:it},{x:Ke.x,y:it},Ke];return"M"+(lt=lt.map(we))[0]+"C"+lt[1]+" "+lt[2]+" "+lt[3]}return Oe.source=function(De){return arguments.length?(te=Fn(De),Oe):te},Oe.target=function(De){return arguments.length?(ue=Fn(De),Oe):ue},Oe.projection=function(De){return arguments.length?(we=De,Oe):we},Oe},l.svg.diagonal.radial=function(){var te=l.svg.diagonal(),ue=ho,we=te.projection;return te.projection=function(Oe){return arguments.length?we(qa(ue=Oe)):ue},te},l.svg.symbol=function(){var te=Ds,ue=$i;function we(Oe,De){return(os.get(te.call(this,Oe,De))||fa)(ue.call(this,Oe,De))}return we.type=function(Oe){return arguments.length?(te=Fn(Oe),we):te},we.size=function(Oe){return arguments.length?(ue=Fn(Oe),we):ue},we};var os=l.map({circle:fa,cross:function(te){var ue=Math.sqrt(te/5)/2;return"M"+-3*ue+","+-ue+"H"+-ue+"V"+-3*ue+"H"+ue+"V"+-ue+"H"+3*ue+"V"+ue+"H"+ue+"V"+3*ue+"H"+-ue+"V"+ue+"H"+-3*ue+"Z"},diamond:function(te){var ue=Math.sqrt(te/(2*oi)),we=ue*oi;return"M0,"+-ue+"L"+we+",0 0,"+ue+" "+-we+",0Z"},square:function(te){var ue=Math.sqrt(te)/2;return"M"+-ue+","+-ue+"L"+ue+","+-ue+" "+ue+","+ue+" "+-ue+","+ue+"Z"},"triangle-down":function(te){var ue=Math.sqrt(te/po),we=ue*po/2;return"M0,"+we+"L"+ue+","+-we+" "+-ue+","+-we+"Z"},"triangle-up":function(te){var ue=Math.sqrt(te/po),we=ue*po/2;return"M0,"+-we+"L"+ue+","+we+" "+-ue+","+we+"Z"}});l.svg.symbolTypes=os.keys();var po=Math.sqrt(3),oi=Math.tan(30*Ze);se.transition=function(te){for(var ue,we,Oe=$e||++yt,De=Y(te),Ue=[],We=at||{time:Date.now(),ease:ro,delay:0,duration:250},Ke=-1,it=this.length;++Ke<it;){Ue.push(ue=[]);for(var lt=this[Ke],At=-1,Ft=lt.length;++At<Ft;)(we=lt[At])&&q(we,At,De,Oe,We),ue.push(we)}return Je(Ue,De,Oe)},se.interrupt=function(te){return this.each(te==null?fi:Fs(Y(te)))};var fi=Fs(Y());function Fs(te){return function(){var ue,we,Oe;(ue=this[te])&&(Oe=ue[we=ue.active])&&(Oe.timer.c=null,Oe.timer.t=NaN,--ue.count?delete ue[we]:delete this[te],ue.active+=.5,Oe.event&&Oe.event.interrupt.call(this,this.__data__,Oe.index))}}function Je(te,ue,we){return J(te,ft),te.namespace=ue,te.id=we,te}var $e,at,ft=[],yt=0;function gt(te,ue,we,Oe){var De=te.id,Ue=te.namespace;return ze(te,typeof we=="function"?function(We,Ke,it){We[Ue][De].tween.set(ue,Oe(we.call(We,We.__data__,Ke,it)))}:(we=Oe(we),function(We){We[Ue][De].tween.set(ue,we)}))}function D(te){return te==null&&(te=""),function(){this.textContent=te}}function Y(te){return te==null?"__transition__":"__transition_"+te+"__"}function q(te,ue,we,Oe,De){var Ue,We,Ke,it,lt,At=te[we]||(te[we]={active:0,count:0}),Ft=At[Oe];function Bt(un){var Wt=At.active,en=At[Wt];for(var Jt in en&&(en.timer.c=null,en.timer.t=NaN,--At.count,delete At[Wt],en.event&&en.event.interrupt.call(te,te.__data__,en.index)),At)if(+Jt<Oe){var wn=At[Jt];wn.timer.c=null,wn.timer.t=NaN,--At.count,delete At[Jt]}We.c=Zt,Gt(function(){return We.c&&Zt(un||1)&&(We.c=null,We.t=NaN),1},0,Ue),At.active=Oe,Ft.event&&Ft.event.start.call(te,te.__data__,ue),lt=[],Ft.tween.forEach(function(pn,Qt){(Qt=Qt.call(te,te.__data__,ue))&&lt.push(Qt)}),it=Ft.ease,Ke=Ft.duration}function Zt(un){for(var Wt=un/Ke,en=it(Wt),Jt=lt.length;Jt>0;)lt[--Jt].call(te,en);if(Wt>=1)return Ft.event&&Ft.event.end.call(te,te.__data__,ue),--At.count?delete At[Oe]:delete te[we],1}Ft||(Ue=De.time,We=Gt(function(un){var Wt=Ft.delay;if(We.t=Wt+Ue,Wt<=un)return Bt(un-Wt);We.c=Bt},0,Ue),Ft=At[Oe]={tween:new w,time:Ue,timer:We,delay:De.delay,duration:De.duration,ease:De.ease,index:ue},De=null,++At.count)}ft.call=se.call,ft.empty=se.empty,ft.node=se.node,ft.size=se.size,l.transition=function(te,ue){return te&&te.transition?$e?te.transition(ue):te:l.selection().transition(te)},l.transition.prototype=ft,ft.select=function(te){var ue,we,Oe,De=this.id,Ue=this.namespace,We=[];te=fe(te);for(var Ke=-1,it=this.length;++Ke<it;){We.push(ue=[]);for(var lt=this[Ke],At=-1,Ft=lt.length;++At<Ft;)(Oe=lt[At])&&(we=te.call(Oe,Oe.__data__,At,Ke))?("__data__"in Oe&&(we.__data__=Oe.__data__),q(we,At,Ue,De,Oe[Ue][De]),ue.push(we)):ue.push(null)}return Je(We,Ue,De)},ft.selectAll=function(te){var ue,we,Oe,De,Ue,We=this.id,Ke=this.namespace,it=[];te=ye(te);for(var lt=-1,At=this.length;++lt<At;)for(var Ft=this[lt],Bt=-1,Zt=Ft.length;++Bt<Zt;)if(Oe=Ft[Bt]){Ue=Oe[Ke][We],we=te.call(Oe,Oe.__data__,Bt,lt),it.push(ue=[]);for(var un=-1,Wt=we.length;++un<Wt;)(De=we[un])&&q(De,un,Ke,We,Ue),ue.push(De)}return Je(it,Ke,We)},ft.filter=function(te){var ue,we,Oe=[];typeof te!="function"&&(te=Re(te));for(var De=0,Ue=this.length;De<Ue;De++){Oe.push(ue=[]);for(var We,Ke=0,it=(We=this[De]).length;Ke<it;Ke++)(we=We[Ke])&&te.call(we,we.__data__,Ke,De)&&ue.push(we)}return Je(Oe,this.namespace,this.id)},ft.tween=function(te,ue){var we=this.id,Oe=this.namespace;return arguments.length<2?this.node()[Oe][we].tween.get(te):ze(this,ue==null?function(De){De[Oe][we].tween.remove(te)}:function(De){De[Oe][we].tween.set(te,ue)})},ft.attr=function(te,ue){if(arguments.length<2){for(ue in te)this.attr(ue,te[ue]);return this}var we=te=="transform"?Ws:ma,Oe=l.ns.qualify(te);function De(){this.removeAttribute(Oe)}function Ue(){this.removeAttributeNS(Oe.space,Oe.local)}function We(it){return it==null?De:(it+="",function(){var lt,At=this.getAttribute(Oe);return At!==it&&(lt=we(At,it),function(Ft){this.setAttribute(Oe,lt(Ft))})})}function Ke(it){return it==null?Ue:(it+="",function(){var lt,At=this.getAttributeNS(Oe.space,Oe.local);return At!==it&&(lt=we(At,it),function(Ft){this.setAttributeNS(Oe.space,Oe.local,lt(Ft))})})}return gt(this,"attr."+te,ue,Oe.local?Ke:We)},ft.attrTween=function(te,ue){var we=l.ns.qualify(te);return this.tween("attr."+te,we.local?function(Oe,De){var Ue=ue.call(this,Oe,De,this.getAttributeNS(we.space,we.local));return Ue&&function(We){this.setAttributeNS(we.space,we.local,Ue(We))}}:function(Oe,De){var Ue=ue.call(this,Oe,De,this.getAttribute(we));return Ue&&function(We){this.setAttribute(we,Ue(We))}})},ft.style=function(te,ue,we){var Oe=arguments.length;if(Oe<3){if(typeof te!="string"){for(we in Oe<2&&(ue=""),te)this.style(we,te[we],ue);return this}we=""}function De(){this.style.removeProperty(te)}function Ue(We){return We==null?De:(We+="",function(){var Ke,it=t(this).getComputedStyle(this,null).getPropertyValue(te);return it!==We&&(Ke=ma(it,We),function(lt){this.style.setProperty(te,Ke(lt),we)})})}return gt(this,"style."+te,ue,Ue)},ft.styleTween=function(te,ue,we){function Oe(De,Ue){var We=ue.call(this,De,Ue,t(this).getComputedStyle(this,null).getPropertyValue(te));return We&&function(Ke){this.style.setProperty(te,We(Ke),we)}}return arguments.length<3&&(we=""),this.tween("style."+te,Oe)},ft.text=function(te){return gt(this,"text",te,D)},ft.remove=function(){var te=this.namespace;return this.each("end.transition",function(){var ue;this[te].count<2&&(ue=this.parentNode)&&ue.removeChild(this)})},ft.ease=function(te){var ue=this.id,we=this.namespace;return arguments.length<1?this.node()[we][ue].ease:(typeof te!="function"&&(te=l.ease.apply(l,arguments)),ze(this,function(Oe){Oe[we][ue].ease=te}))},ft.delay=function(te){var ue=this.id,we=this.namespace;return arguments.length<1?this.node()[we][ue].delay:ze(this,typeof te=="function"?function(Oe,De,Ue){Oe[we][ue].delay=+te.call(Oe,Oe.__data__,De,Ue)}:(te=+te,function(Oe){Oe[we][ue].delay=te}))},ft.duration=function(te){var ue=this.id,we=this.namespace;return arguments.length<1?this.node()[we][ue].duration:ze(this,typeof te=="function"?function(Oe,De,Ue){Oe[we][ue].duration=Math.max(1,te.call(Oe,Oe.__data__,De,Ue))}:(te=Math.max(1,te),function(Oe){Oe[we][ue].duration=te}))},ft.each=function(te,ue){var we=this.id,Oe=this.namespace;if(arguments.length<2){var De=at,Ue=$e;try{$e=we,ze(this,function(We,Ke,it){at=We[Oe][we],te.call(We,We.__data__,Ke,it)})}finally{at=De,$e=Ue}}else ze(this,function(We){var Ke=We[Oe][we];(Ke.event||(Ke.event=l.dispatch("start","end","interrupt"))).on(te,ue)});return this},ft.transition=function(){for(var te,ue,we,Oe=this.id,De=++yt,Ue=this.namespace,We=[],Ke=0,it=this.length;Ke<it;Ke++){We.push(te=[]);for(var lt,At=0,Ft=(lt=this[Ke]).length;At<Ft;At++)(ue=lt[At])&&q(ue,At,Ue,De,{time:(we=ue[Ue][Oe]).time,ease:we.ease,delay:we.delay+we.duration,duration:we.duration}),te.push(ue)}return Je(We,Ue,De)},l.svg.axis=function(){var te,ue=l.scale.linear(),we=ne,Oe=6,De=6,Ue=3,We=[10],Ke=null;function it(lt){lt.each(function(){var At,Ft=l.select(this),Bt=this.__chart__||ue,Zt=this.__chart__=ue.copy(),un=Ke??(Zt.ticks?Zt.ticks.apply(Zt,We):Zt.domain()),Wt=te??(Zt.tickFormat?Zt.tickFormat.apply(Zt,We):U),en=Ft.selectAll(".tick").data(un,Zt),Jt=en.enter().insert("g",".domain").attr("class","tick").style("opacity",St),wn=l.transition(en.exit()).style("opacity",St).remove(),pn=l.transition(en.order()).style("opacity",1),Qt=Math.max(Oe,0)+Ue,Ln=Ka(Zt),Rn=Ft.selectAll(".domain").data([0]),Xn=(Rn.enter().append("path").attr("class","domain"),l.transition(Rn));Jt.append("line"),Jt.append("text");var Jn,vr,yr,sr,pr=Jt.select("line"),kr=pn.select("line"),Vr=en.select("text").text(Wt),Hr=Jt.select("text"),fr=pn.select("text"),Ar=we==="top"||we==="left"?-1:1;if(we==="bottom"||we==="top"?(At=Le,Jn="x",yr="y",vr="x2",sr="y2",Vr.attr("dy",Ar<0?"0em":".71em").style("text-anchor","middle"),Xn.attr("d","M"+Ln[0]+","+Ar*De+"V0H"+Ln[1]+"V"+Ar*De)):(At=Ne,Jn="y",yr="x",vr="y2",sr="x2",Vr.attr("dy",".32em").style("text-anchor",Ar<0?"end":"start"),Xn.attr("d","M"+Ar*De+","+Ln[0]+"H0V"+Ln[1]+"H"+Ar*De)),pr.attr(sr,Ar*Oe),Hr.attr(yr,Ar*Qt),kr.attr(vr,0).attr(sr,Ar*Oe),fr.attr(Jn,0).attr(yr,Ar*Qt),Zt.rangeBand){var Dr=Zt,zr=Dr.rangeBand()/2;Bt=Zt=function(Wr){return Dr(Wr)+zr}}else Bt.rangeBand?Bt=Zt:wn.call(At,Zt,Bt);Jt.call(At,Bt,Zt),pn.call(At,Zt,Zt)})}return it.scale=function(lt){return arguments.length?(ue=lt,it):ue},it.orient=function(lt){return arguments.length?(we=lt in pe?lt+"":ne,it):we},it.ticks=function(){return arguments.length?(We=x(arguments),it):We},it.tickValues=function(lt){return arguments.length?(Ke=lt,it):Ke},it.tickFormat=function(lt){return arguments.length?(te=lt,it):te},it.tickSize=function(lt){var At=arguments.length;return At?(Oe=+lt,De=+arguments[At-1],it):Oe},it.innerTickSize=function(lt){return arguments.length?(Oe=+lt,it):Oe},it.outerTickSize=function(lt){return arguments.length?(De=+lt,it):De},it.tickPadding=function(lt){return arguments.length?(Ue=+lt,it):Ue},it.tickSubdivide=function(){return arguments.length&&it},it};var ne="bottom",pe={top:1,right:1,bottom:1,left:1};function Le(te,ue,we){te.attr("transform",function(Oe){var De=ue(Oe);return"translate("+(isFinite(De)?De:we(Oe))+",0)"})}function Ne(te,ue,we){te.attr("transform",function(Oe){var De=ue(Oe);return"translate(0,"+(isFinite(De)?De:we(Oe))+")"})}l.svg.brush=function(){var te,ue,we=V(At,"brushstart","brush","brushend"),Oe=null,De=null,Ue=[0,0],We=[0,0],Ke=!0,it=!0,lt=et[0];function At(Wt){Wt.each(function(){var en=l.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",un).on("touchstart.brush",un),Jt=en.selectAll(".background").data([0]);Jt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),en.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var wn=en.selectAll(".resize").data(lt,U);wn.exit().remove(),wn.enter().append("g").attr("class",function(Rn){return"resize "+Rn}).style("cursor",function(Rn){return Ge[Rn]}).append("rect").attr("x",function(Rn){return/[ew]$/.test(Rn)?-3:null}).attr("y",function(Rn){return/^[ns]/.test(Rn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),wn.style("display",At.empty()?"none":null);var pn,Qt=l.transition(en),Ln=l.transition(Jt);Oe&&(pn=Ka(Oe),Ln.attr("x",pn[0]).attr("width",pn[1]-pn[0]),Bt(Qt)),De&&(pn=Ka(De),Ln.attr("y",pn[0]).attr("height",pn[1]-pn[0]),Zt(Qt)),Ft(Qt)})}function Ft(Wt){Wt.selectAll(".resize").attr("transform",function(en){return"translate("+Ue[+/e$/.test(en)]+","+We[+/^s/.test(en)]+")"})}function Bt(Wt){Wt.select(".extent").attr("x",Ue[0]),Wt.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function Zt(Wt){Wt.select(".extent").attr("y",We[0]),Wt.selectAll(".extent,.e>rect,.w>rect").attr("height",We[1]-We[0])}function un(){var Wt,en,Jt=this,wn=l.select(l.event.target),pn=we.of(Jt,arguments),Qt=l.select(Jt),Ln=wn.datum(),Rn=!/^(n|s)$/.test(Ln)&&Oe,Xn=!/^(e|w)$/.test(Ln)&&De,Jn=wn.classed("extent"),vr=ht(Jt),yr=l.mouse(Jt),sr=l.select(t(Jt)).on("keydown.brush",Vr).on("keyup.brush",Hr);if(l.event.changedTouches?sr.on("touchmove.brush",fr).on("touchend.brush",Dr):sr.on("mousemove.brush",fr).on("mouseup.brush",Dr),Qt.interrupt().selectAll("*").interrupt(),Jn)yr[0]=Ue[0]-yr[0],yr[1]=We[0]-yr[1];else if(Ln){var pr=+/w$/.test(Ln),kr=+/^n/.test(Ln);en=[Ue[1-pr]-yr[0],We[1-kr]-yr[1]],yr[0]=Ue[pr],yr[1]=We[kr]}else l.event.altKey&&(Wt=yr.slice());function Vr(){l.event.keyCode==32&&(Jn||(Wt=null,yr[0]-=Ue[1],yr[1]-=We[1],Jn=2),K())}function Hr(){l.event.keyCode==32&&Jn==2&&(yr[0]+=Ue[1],yr[1]+=We[1],Jn=0,K())}function fr(){var zr=l.mouse(Jt),Wr=!1;en&&(zr[0]+=en[0],zr[1]+=en[1]),Jn||(l.event.altKey?(Wt||(Wt=[(Ue[0]+Ue[1])/2,(We[0]+We[1])/2]),yr[0]=Ue[+(zr[0]<Wt[0])],yr[1]=We[+(zr[1]<Wt[1])]):Wt=null),Rn&&Ar(zr,Oe,0)&&(Bt(Qt),Wr=!0),Xn&&Ar(zr,De,1)&&(Zt(Qt),Wr=!0),Wr&&(Ft(Qt),pn({type:"brush",mode:Jn?"move":"resize"}))}function Ar(zr,Wr,Zr){var $r,ui,yi=Ka(Wr),hi=yi[0],si=yi[1],ci=yr[Zr],pi=Zr?We:Ue,Si=pi[1]-pi[0];if(Jn&&(hi-=ci,si-=Si+ci),$r=(Zr?it:Ke)?Math.max(hi,Math.min(si,zr[Zr])):zr[Zr],Jn?ui=($r+=ci)+Si:(Wt&&(ci=Math.max(hi,Math.min(si,2*Wt[Zr]-$r))),ci<$r?(ui=$r,$r=ci):ui=ci),pi[0]!=$r||pi[1]!=ui)return Zr?ue=null:te=null,pi[0]=$r,pi[1]=ui,!0}function Dr(){fr(),Qt.style("pointer-events","all").selectAll(".resize").style("display",At.empty()?"none":null),l.select("body").style("cursor",null),sr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),vr(),pn({type:"brushend"})}Qt.style("pointer-events","none").selectAll(".resize").style("display",null),l.select("body").style("cursor",wn.style("cursor")),pn({type:"brushstart"}),fr()}return At.event=function(Wt){Wt.each(function(){var en=we.of(this,arguments),Jt={x:Ue,y:We,i:te,j:ue},wn=this.__chart__||Jt;this.__chart__=Jt,$e?l.select(this).transition().each("start.brush",function(){te=wn.i,ue=wn.j,Ue=wn.x,We=wn.y,en({type:"brushstart"})}).tween("brush:brush",function(){var pn=ka(Ue,Jt.x),Qt=ka(We,Jt.y);return te=ue=null,function(Ln){Ue=Jt.x=pn(Ln),We=Jt.y=Qt(Ln),en({type:"brush",mode:"resize"})}}).each("end.brush",function(){te=Jt.i,ue=Jt.j,en({type:"brush",mode:"resize"}),en({type:"brushend"})}):(en({type:"brushstart"}),en({type:"brush",mode:"resize"}),en({type:"brushend"}))})},At.x=function(Wt){return arguments.length?(lt=et[!(Oe=Wt)<<1|!De],At):Oe},At.y=function(Wt){return arguments.length?(lt=et[!Oe<<1|!(De=Wt)],At):De},At.clamp=function(Wt){return arguments.length?(Oe&&De?(Ke=!!Wt[0],it=!!Wt[1]):Oe?Ke=!!Wt:De&&(it=!!Wt),At):Oe&&De?[Ke,it]:Oe?Ke:De?it:null},At.extent=function(Wt){var en,Jt,wn,pn,Qt;return arguments.length?(Oe&&(en=Wt[0],Jt=Wt[1],De&&(en=en[0],Jt=Jt[0]),te=[en,Jt],Oe.invert&&(en=Oe(en),Jt=Oe(Jt)),Jt<en&&(Qt=en,en=Jt,Jt=Qt),en==Ue[0]&&Jt==Ue[1]||(Ue=[en,Jt])),De&&(wn=Wt[0],pn=Wt[1],Oe&&(wn=wn[1],pn=pn[1]),ue=[wn,pn],De.invert&&(wn=De(wn),pn=De(pn)),pn<wn&&(Qt=wn,wn=pn,pn=Qt),wn==We[0]&&pn==We[1]||(We=[wn,pn])),At):(Oe&&(te?(en=te[0],Jt=te[1]):(en=Ue[0],Jt=Ue[1],Oe.invert&&(en=Oe.invert(en),Jt=Oe.invert(Jt)),Jt<en&&(Qt=en,en=Jt,Jt=Qt))),De&&(ue?(wn=ue[0],pn=ue[1]):(wn=We[0],pn=We[1],De.invert&&(wn=De.invert(wn),pn=De.invert(pn)),pn<wn&&(Qt=wn,wn=pn,pn=Qt))),Oe&&De?[[en,wn],[Jt,pn]]:Oe?[en,Jt]:De&&[wn,pn])},At.clear=function(){return At.empty()||(Ue=[0,0],We=[0,0],te=ue=null),At},At.empty=function(){return!!Oe&&Ue[0]==Ue[1]||!!De&&We[0]==We[1]},l.rebind(At,we,"on")};var Ge={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},et=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function pt(te){return JSON.parse(te.responseText)}function vt(te){var ue=d.createRange();return ue.selectNode(d.body),ue.createContextualFragment(te.responseText)}l.text=nr(function(te){return te.responseText}),l.json=function(te,ue){return $n(te,"application/json",pt,ue)},l.html=function(te,ue){return $n(te,"text/html",vt,ue)},l.xml=nr(function(te){return te.responseXML}),this.d3=l,(k=typeof(A=l)=="function"?A.call(R,e,R,$):A)===void 0||($.exports=k)}).apply(self)},88294:function($,R,e){$.exports=e(62849)},62849:function($,R,e){var A=e(91358),k=e(53435),l=e(18863),T=e(21527),x=e(71299),d=e(46775),s=e(30120),t=e(64941),o=e(90660),r=e(27084);function n(a,i){for(var c=i[0],h=i[1],f=1/(i[2]-c),b=1/(i[3]-h),v=new Array(a.length),g=0,y=a.length/2;g<y;g++)v[2*g]=k((a[2*g]-c)*f,0,1),v[2*g+1]=k((a[2*g+1]-h)*b,0,1);return v}$.exports=function(a,i){i||(i={}),a=s(a,"float64"),i=x(i,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=d(i.maxDepth,255),h=d(i.bounds,T(a,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var f,b=n(a,h),v=a.length>>>1;i.dtype||(i.dtype="array"),typeof i.dtype=="string"?f=new(o(i.dtype))(v):i.dtype&&(f=i.dtype,Array.isArray(f)&&(f.length=v));for(var g=0;g<v;++g)f[g]=g;var y=[],p=[],m=[],w=[];(function U(z,H,F,N,B,j){if(!N.length)return null;var K=y[B]||(y[B]=[]),G=m[B]||(m[B]=[]),V=p[B]||(p[B]=[]),W=K.length;if(++B>c||j>1073741824){for(var J=0;J<N.length;J++)K.push(N[J]),G.push(j),V.push(null,null,null,null);return W}if(K.push(N[0]),G.push(j),N.length<=1)return V.push(null,null,null,null),W;for(var X=.5*F,ee=z+X,re=H+X,ie=[],se=[],fe=[],ye=[],ge=1,he=N.length;ge<he;ge++){var ve=N[ge],Ie=b[2*ve],xe=b[2*ve+1];Ie<ee?xe<re?ie.push(ve):se.push(ve):xe<re?fe.push(ve):ye.push(ve)}return j<<=2,V.push(U(z,H,X,ie,B,j),U(z,re,X,se,B,j+1),U(ee,H,X,fe,B,j+2),U(ee,re,X,ye,B,j+3)),W})(0,0,1,f,0,1);for(var u=0,S=0;S<y.length;S++){var _=y[S];if(f.set)f.set(_,u);else for(var E=0,L=_.length;E<L;E++)f[E+u]=_[E];var C=u+y[S].length;w[S]=[u,C],u=C}return f.range=function(){for(var U,z=[],H=arguments.length;H--;)z[H]=arguments[H];if(t(z[z.length-1])){var F=z.pop();z.length||F.x==null&&F.l==null&&F.left==null||(z=[F],U={}),U=x(F,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else U={};z.length||(z=h);var N,B=l.apply(void 0,z),j=[Math.min(B.x,B.x+B.width),Math.min(B.y,B.y+B.height),Math.max(B.x,B.x+B.width),Math.max(B.y,B.y+B.height)],K=j[0],G=j[1],V=j[2],W=j[3],J=n([K,G,V,W],h),X=J[0],ee=J[1],re=J[2],ie=J[3],se=d(U.level,y.length);if(U.d!=null&&(typeof U.d=="number"?N=[U.d,U.d]:U.d.length&&(N=U.d),se=Math.min(Math.max(Math.ceil(-r(Math.abs(N[0])/(h[2]-h[0]))),Math.ceil(-r(Math.abs(N[1])/(h[3]-h[1])))),se)),se=Math.min(se,y.length),U.lod)return P(X,ee,re,ie,se);var fe=[];function ye(he,ve,Ie,xe,Ae,Se){if(Ae!==null&&Se!==null&&!(X>he+Ie||ee>ve+Ie||re<he||ie<ve||xe>=se||Ae===Se)){var Te=y[xe];Se===void 0&&(Se=Te.length);for(var Q=Ae;Q<Se;Q++){var oe=Te[Q],ce=a[2*oe],me=a[2*oe+1];ce>=K&&ce<=V&&me>=G&&me<=W&&fe.push(oe)}var Me=p[xe],Re=Me[4*Ae+0],Ce=Me[4*Ae+1],ze=Me[4*Ae+2],le=Me[4*Ae+3],de=ge(Me,Ae+1),be=.5*Ie,Fe=xe+1;ye(he,ve,be,Fe,Re,Ce||ze||le||de),ye(he,ve+be,be,Fe,Ce,ze||le||de),ye(he+be,ve,be,Fe,ze,le||de),ye(he+be,ve+be,be,Fe,le,de)}}function ge(he,ve){for(var Ie=null,xe=0;Ie===null;)if(Ie=he[4*ve+xe],++xe>he.length)return null;return Ie}return ye(0,0,1,0,0,1),fe},f;function P(U,z,H,F,N){for(var B=[],j=0;j<N;j++){var K=m[j],G=w[j][0],V=I(U,z,j),W=I(H,F,j),J=A.ge(K,V),X=A.gt(K,W,J,K.length-1);B[j]=[J+G,X+G]}return B}function I(U,z,H){for(var F=1,N=.5,B=.5,j=.5,K=0;K<H;K++)F<<=2,F+=U<N?z<B?0:1:z<B?2:3,j*=.5,N+=U<N?-j:j,B+=z<B?-j:j;return F}}},30774:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var A=e(60302),k=6378137;function l(d){var s=0;if(d&&d.length>0){s+=Math.abs(T(d[0]));for(var t=1;t<d.length;t++)s-=Math.abs(T(d[t]))}return s}function T(d){var s,t,o,r,n,a,i=0,c=d.length;if(c>2){for(a=0;a<c;a++)a===c-2?(o=c-2,r=c-1,n=0):a===c-1?(o=c-1,r=0,n=1):(o=a,r=a+1,n=a+2),s=d[o],t=d[r],i+=(x(d[n][0])-x(s[0]))*Math.sin(x(t[1]));i=i*k*k/2}return i}function x(d){return d*Math.PI/180}R.default=function(d){return A.geomReduce(d,function(s,t){return s+function(o){var r,n=0;switch(o.type){case"Polygon":return l(o.coordinates);case"MultiPolygon":for(r=0;r<o.coordinates.length;r++)n+=l(o.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},23132:function($,R){function e(a,i,c){c===void 0&&(c={});var h={type:"Feature"};return(c.id===0||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function A(a,i,c){if(c===void 0&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},i,c)}function k(a,i,c){c===void 0&&(c={});for(var h=0,f=a;h<f.length;h++){var b=f[h];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(c===void 0&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,c)}function T(a,i){i===void 0&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function x(a,i,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:a},i,c)}function d(a,i,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:a},i,c)}function t(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:1.0936*R.earthRadius},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:1.0936133},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,i,c){switch(a){case"Point":return A(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return k(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return x(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},R.point=A,R.points=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return A(h,i)}),c)},R.polygon=k,R.polygons=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return k(h,i)}),c)},R.lineString=l,R.lineStrings=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return l(h,i)}),c)},R.featureCollection=T,R.multiLineString=x,R.multiPoint=d,R.multiPolygon=s,R.geometryCollection=function(a,i,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:a},i,c)},R.round=function(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},R.radiansToLength=t,R.lengthToRadians=o,R.lengthToDegrees=function(a,i){return r(o(a,i))},R.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},R.radiansToDegrees=r,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,i,c){if(i===void 0&&(i="kilometers"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),c)},R.convertArea=function(a,i,c){if(i===void 0&&(i="meters"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[i];if(!h)throw new Error("invalid original units");var f=R.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},R.isNumber=n,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},60302:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var A=e(23132);function k(o,r,n){if(o!==null)for(var a,i,c,h,f,b,v,g,y=0,p=0,m=o.type,w=m==="FeatureCollection",u=m==="Feature",S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if((h=g?v.geometries[E]:v)!==null){b=h.coordinates;var P=h.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(b,p,_,L,C)===!1)return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(r(b[a],p,_,L,C)===!1)return!1;p++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(i=0;i<b[a].length-y;i++){if(r(b[a][i],p,_,L,C)===!1)return!1;p++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(C=0,i=0;i<b[a].length;i++){for(c=0;c<b[a][i].length-y;c++){if(r(b[a][i][c],p,_,L,C)===!1)return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&r(o.features[n].properties,n)!==!1;n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var n=0;n<o.features.length&&r(o.features[n],n)!==!1;n++);}function x(o,r){var n,a,i,c,h,f,b,v,g,y,p=0,m=o.type==="FeatureCollection",w=o.type==="Feature",u=m?o.features.length:1;for(n=0;n<u;n++){for(f=m?o.features[n].geometry:w?o.geometry:o,v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(b=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,i=0;i<h;i++)if((c=b?f.geometries[i]:f)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,p,v,g,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(r(c.geometries[a],p,v,g,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,p,v,g,y)===!1)return!1;p++}}function d(o,r){x(o,function(n,a,i,c,h){var f,b=n===null?null:n.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(A.feature(n,i,{bbox:c,id:h}),a,0)!==!1&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++){var g={type:f,coordinates:n.coordinates[v]};if(r(A.feature(g,i),a,v)===!1)return!1}})}function s(o,r){d(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var f,b=0,v=0,g=0;return k(n,function(y,p,m,w,u){if(f===void 0||a>b||w>v||u>g)return f=y,b=a,v=w,g=u,void(c=0);var S=A.lineString([f,y],n.properties);if(r(S,a,i,u,c)===!1)return!1;c++,f=y})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(n.geometry!==null){var c=n.geometry.type,h=n.geometry.coordinates;switch(c){case"LineString":if(r(n,a,i,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(r(A.lineString(h[f],n.properties),a,i,f)===!1)return!1}}})}R.coordEach=k,R.coordReduce=function(o,r,n,a){var i=n;return k(o,function(c,h,f,b,v){i=h===0&&n===void 0?c:r(i,c,h,f,b,v)},a),i},R.propEach=l,R.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.featureEach=T,R.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.coordAll=function(o){var r=[];return k(o,function(n){r.push(n)}),r},R.geomEach=x,R.geomReduce=function(o,r,n){var a=n;return x(o,function(i,c,h,f,b){a=c===0&&n===void 0?i:r(a,i,c,h,f,b)}),a},R.flattenEach=d,R.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,c,h){a=c===0&&h===0&&n===void 0?i:r(a,i,c,h)}),a},R.segmentEach=s,R.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,b,v){a=i===!1&&n===void 0?c:r(a,c,h,f,b,v),i=!0}),a},R.lineEach=t,R.lineReduce=function(o,r,n){var a=n;return t(o,function(i,c,h,f){a=c===0&&n===void 0?i:r(a,i,c,h,f)}),a},R.findSegment=function(o,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=b.length+h-1),A.lineString([b[h],b[h+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h-1),A.lineString([b[c][h],b[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h-1),A.lineString([b[i][h],b[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h-1),A.lineString([b[i][c][h],b[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},R.findPoint=function(o,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":return A.point(b,f,r);case"MultiPoint":return i<0&&(i=b.length+i),A.point(b[i],f,r);case"LineString":return h<0&&(h=b.length+h),A.point(b[h],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h),A.point(b[c][h],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h),A.point(b[i][h],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h),A.point(b[i][c][h],f,r)}throw new Error("geojson is invalid")}},85268:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var A=e(27138);function k(l){var T=[1/0,1/0,-1/0,-1/0];return A.coordEach(l,function(x){T[0]>x[0]&&(T[0]=x[0]),T[1]>x[1]&&(T[1]=x[1]),T[2]<x[0]&&(T[2]=x[0]),T[3]<x[1]&&(T[3]=x[1])}),T}k.default=k,R.default=k},94228:function($,R){function e(a,i,c){c===void 0&&(c={});var h={type:"Feature"};return(c.id===0||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function A(a,i,c){if(c===void 0&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},i,c)}function k(a,i,c){c===void 0&&(c={});for(var h=0,f=a;h<f.length;h++){var b=f[h];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(c===void 0&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,c)}function T(a,i){i===void 0&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function x(a,i,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:a},i,c)}function d(a,i,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:a},i,c)}function t(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:1.0936*R.earthRadius},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:1.0936133},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,i,c){switch(a){case"Point":return A(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return k(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return x(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},R.point=A,R.points=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return A(h,i)}),c)},R.polygon=k,R.polygons=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return k(h,i)}),c)},R.lineString=l,R.lineStrings=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return l(h,i)}),c)},R.featureCollection=T,R.multiLineString=x,R.multiPoint=d,R.multiPolygon=s,R.geometryCollection=function(a,i,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:a},i,c)},R.round=function(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},R.radiansToLength=t,R.lengthToRadians=o,R.lengthToDegrees=function(a,i){return r(o(a,i))},R.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},R.radiansToDegrees=r,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,i,c){if(i===void 0&&(i="kilometers"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),c)},R.convertArea=function(a,i,c){if(i===void 0&&(i="meters"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[i];if(!h)throw new Error("invalid original units");var f=R.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},R.isNumber=n,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},27138:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var A=e(94228);function k(o,r,n){if(o!==null)for(var a,i,c,h,f,b,v,g,y=0,p=0,m=o.type,w=m==="FeatureCollection",u=m==="Feature",S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if((h=g?v.geometries[E]:v)!==null){b=h.coordinates;var P=h.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(b,p,_,L,C)===!1)return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(r(b[a],p,_,L,C)===!1)return!1;p++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(i=0;i<b[a].length-y;i++){if(r(b[a][i],p,_,L,C)===!1)return!1;p++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(C=0,i=0;i<b[a].length;i++){for(c=0;c<b[a][i].length-y;c++){if(r(b[a][i][c],p,_,L,C)===!1)return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&r(o.features[n].properties,n)!==!1;n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var n=0;n<o.features.length&&r(o.features[n],n)!==!1;n++);}function x(o,r){var n,a,i,c,h,f,b,v,g,y,p=0,m=o.type==="FeatureCollection",w=o.type==="Feature",u=m?o.features.length:1;for(n=0;n<u;n++){for(f=m?o.features[n].geometry:w?o.geometry:o,v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(b=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,i=0;i<h;i++)if((c=b?f.geometries[i]:f)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,p,v,g,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(r(c.geometries[a],p,v,g,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,p,v,g,y)===!1)return!1;p++}}function d(o,r){x(o,function(n,a,i,c,h){var f,b=n===null?null:n.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(A.feature(n,i,{bbox:c,id:h}),a,0)!==!1&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++){var g={type:f,coordinates:n.coordinates[v]};if(r(A.feature(g,i),a,v)===!1)return!1}})}function s(o,r){d(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var f,b=0,v=0,g=0;return k(n,function(y,p,m,w,u){if(f===void 0||a>b||w>v||u>g)return f=y,b=a,v=w,g=u,void(c=0);var S=A.lineString([f,y],n.properties);if(r(S,a,i,u,c)===!1)return!1;c++,f=y})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(n.geometry!==null){var c=n.geometry.type,h=n.geometry.coordinates;switch(c){case"LineString":if(r(n,a,i,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(r(A.lineString(h[f],n.properties),a,i,f)===!1)return!1}}})}R.coordEach=k,R.coordReduce=function(o,r,n,a){var i=n;return k(o,function(c,h,f,b,v){i=h===0&&n===void 0?c:r(i,c,h,f,b,v)},a),i},R.propEach=l,R.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.featureEach=T,R.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.coordAll=function(o){var r=[];return k(o,function(n){r.push(n)}),r},R.geomEach=x,R.geomReduce=function(o,r,n){var a=n;return x(o,function(i,c,h,f,b){a=c===0&&n===void 0?i:r(a,i,c,h,f,b)}),a},R.flattenEach=d,R.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,c,h){a=c===0&&h===0&&n===void 0?i:r(a,i,c,h)}),a},R.segmentEach=s,R.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,b,v){a=i===!1&&n===void 0?c:r(a,c,h,f,b,v),i=!0}),a},R.lineEach=t,R.lineReduce=function(o,r,n){var a=n;return t(o,function(i,c,h,f){a=c===0&&n===void 0?i:r(a,i,c,h,f)}),a},R.findSegment=function(o,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=b.length+h-1),A.lineString([b[h],b[h+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h-1),A.lineString([b[c][h],b[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h-1),A.lineString([b[i][h],b[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h-1),A.lineString([b[i][c][h],b[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},R.findPoint=function(o,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":return A.point(b,f,r);case"MultiPoint":return i<0&&(i=b.length+i),A.point(b[i],f,r);case"LineString":return h<0&&(h=b.length+h),A.point(b[h],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h),A.point(b[c][h],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h),A.point(b[i][h],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h),A.point(b[i][c][h],f,r)}throw new Error("geojson is invalid")}},29261:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var A=e(88553),k=e(64182);R.default=function(l,T){T===void 0&&(T={});var x=0,d=0,s=0;return A.coordEach(l,function(t){x+=t[0],d+=t[1],s++}),k.point([x/s,d/s],T.properties)}},64182:function($,R){function e(a,i,c){c===void 0&&(c={});var h={type:"Feature"};return(c.id===0||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function A(a,i,c){return c===void 0&&(c={}),e({type:"Point",coordinates:a},i,c)}function k(a,i,c){c===void 0&&(c={});for(var h=0,f=a;h<f.length;h++){var b=f[h];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(c===void 0&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,c)}function T(a,i){i===void 0&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function x(a,i,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:a},i,c)}function d(a,i,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:a},i,c)}function t(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:R.earthRadius/1.0936},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:.91441111923921},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,i,c){switch(a){case"Point":return A(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return k(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return x(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},R.point=A,R.points=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return A(h,i)}),c)},R.polygon=k,R.polygons=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return k(h,i)}),c)},R.lineString=l,R.lineStrings=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return l(h,i)}),c)},R.featureCollection=T,R.multiLineString=x,R.multiPoint=d,R.multiPolygon=s,R.geometryCollection=function(a,i,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:a},i,c)},R.round=function(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},R.radiansToLength=t,R.lengthToRadians=o,R.lengthToDegrees=function(a,i){return r(o(a,i))},R.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},R.radiansToDegrees=r,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,i,c){if(i===void 0&&(i="kilometers"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),c)},R.convertArea=function(a,i,c){if(i===void 0&&(i="meters"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[i];if(!h)throw new Error("invalid original units");var f=R.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},R.isNumber=n,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")},R.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},R.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},R.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},R.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},R.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},R.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},R.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var A=e(64182);function k(o,r,n){if(o!==null)for(var a,i,c,h,f,b,v,g,y=0,p=0,m=o.type,w=m==="FeatureCollection",u=m==="Feature",S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if((h=g?v.geometries[E]:v)!==null){b=h.coordinates;var P=h.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(b,p,_,L,C)===!1)return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(r(b[a],p,_,L,C)===!1)return!1;p++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(i=0;i<b[a].length-y;i++){if(r(b[a][i],p,_,L,C)===!1)return!1;p++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(C=0,i=0;i<b[a].length;i++){for(c=0;c<b[a][i].length-y;c++){if(r(b[a][i][c],p,_,L,C)===!1)return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&r(o.features[n].properties,n)!==!1;n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var n=0;n<o.features.length&&r(o.features[n],n)!==!1;n++);}function x(o,r){var n,a,i,c,h,f,b,v,g,y,p=0,m=o.type==="FeatureCollection",w=o.type==="Feature",u=m?o.features.length:1;for(n=0;n<u;n++){for(f=m?o.features[n].geometry:w?o.geometry:o,v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(b=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,i=0;i<h;i++)if((c=b?f.geometries[i]:f)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,p,v,g,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(r(c.geometries[a],p,v,g,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,p,v,g,y)===!1)return!1;p++}}function d(o,r){x(o,function(n,a,i,c,h){var f,b=n===null?null:n.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(A.feature(n,i,{bbox:c,id:h}),a,0)!==!1&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++){var g={type:f,coordinates:n.coordinates[v]};if(r(A.feature(g,i),a,v)===!1)return!1}})}function s(o,r){d(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var f,b=0,v=0,g=0;return k(n,function(y,p,m,w,u){if(f===void 0||a>b||w>v||u>g)return f=y,b=a,v=w,g=u,void(c=0);var S=A.lineString([f,y],n.properties);if(r(S,a,i,u,c)===!1)return!1;c++,f=y})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(n.geometry!==null){var c=n.geometry.type,h=n.geometry.coordinates;switch(c){case"LineString":if(r(n,a,i,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(r(A.lineString(h[f],n.properties),a,i,f)===!1)return!1}}})}R.coordEach=k,R.coordReduce=function(o,r,n,a){var i=n;return k(o,function(c,h,f,b,v){i=h===0&&n===void 0?c:r(i,c,h,f,b,v)},a),i},R.propEach=l,R.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.featureEach=T,R.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.coordAll=function(o){var r=[];return k(o,function(n){r.push(n)}),r},R.geomEach=x,R.geomReduce=function(o,r,n){var a=n;return x(o,function(i,c,h,f,b){a=c===0&&n===void 0?i:r(a,i,c,h,f,b)}),a},R.flattenEach=d,R.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,c,h){a=c===0&&h===0&&n===void 0?i:r(a,i,c,h)}),a},R.segmentEach=s,R.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,b,v){a=i===!1&&n===void 0?c:r(a,c,h,f,b,v),i=!0}),a},R.lineEach=t,R.lineReduce=function(o,r,n){var a=n;return t(o,function(i,c,h,f){a=c===0&&n===void 0?i:r(a,i,c,h,f)}),a},R.findSegment=function(o,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=b.length+h-1),A.lineString([b[h],b[h+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h-1),A.lineString([b[c][h],b[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h-1),A.lineString([b[i][h],b[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h-1),A.lineString([b[i][c][h],b[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},R.findPoint=function(o,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":return A.point(b,f,r);case"MultiPoint":return i<0&&(i=b.length+i),A.point(b[i],f,r);case"LineString":return h<0&&(h=b.length+h),A.point(b[h],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h),A.point(b[c][h],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h),A.point(b[i][h],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h),A.point(b[i][c][h],f,r)}throw new Error("geojson is invalid")}},65185:function($){$.exports=function(R){var e=0,A=0,k=0,l=0;return R.map(function(T){var x=(T=T.slice())[0],d=x.toUpperCase();if(x!=d)switch(T[0]=d,x){case"a":T[6]+=k,T[7]+=l;break;case"v":T[1]+=l;break;case"h":T[1]+=k;break;default:for(var s=1;s<T.length;)T[s++]+=k,T[s++]+=l}switch(d){case"Z":k=e,l=A;break;case"H":k=T[1];break;case"V":l=T[1];break;case"M":k=e=T[1],l=A=T[2];break;default:k=T[T.length-2],l=T[T.length-1]}return T})}},21527:function($){$.exports=function(R,e){if(!R||R.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var A=Array(2*e),k=0;k<e;k++){for(var l=-1/0,T=1/0,x=k,d=R.length;x<d;x+=e)R[x]>l&&(l=R[x]),R[x]<T&&(T=R[x]);A[k]=T,A[e+k]=l}return A}},24696:function($){$.exports=function(e,A,k){if(e.filter)return e.filter(A,k);if(e==null)throw new TypeError;if(typeof A!="function")throw new TypeError;for(var l=[],T=0;T<e.length;T++)if(R.call(e,T)){var x=e[T];A.call(k,x,T,e)&&l.push(x)}return l};var R=Object.prototype.hasOwnProperty},6851:function($){$.exports=function(R,e,A){if(typeof Array.prototype.findIndex=="function")return R.findIndex(e,A);if(typeof e!="function")throw new TypeError("predicate must be a function");var k=Object(R),l=k.length;if(l===0)return-1;for(var T=0;T<l;T++)if(e.call(A,k[T],T,k))return T;return-1}},54:function($,R,e){var A=e(21527);$.exports=function(k,l,T){if(!k||k.length==null)throw Error("Argument should be an array");l==null&&(l=1),T==null&&(T=A(k,l));for(var x=0;x<l;x++){var d=T[l+x],s=T[x],t=x,o=k.length;if(d===1/0&&s===-1/0)for(t=x;t<o;t+=l)k[t]=k[t]===d?1:k[t]===s?0:.5;else if(d===1/0)for(t=x;t<o;t+=l)k[t]=k[t]===d?1:0;else if(s===-1/0)for(t=x;t<o;t+=l)k[t]=k[t]===s?0:1;else{var r=d-s;for(t=x;t<o;t+=l)isNaN(k[t])||(k[t]=r===0?.5:(k[t]-s)/r)}}return k}},57471:function($){$.exports=function(R,e){var A=typeof R=="number",k=typeof e=="number";A&&!k?(e=R,R=0):A||k||(R=0,e=0);var l=(e|=0)-(R|=0);if(l<0)throw new Error("array length must be positive");for(var T=new Array(l),x=0,d=R;x<l;x++,d++)T[x]=d;return T}},32791:function($,R,e){var A=e(90386);function k(H){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},k(H)}var l,T,x=e(79616).codes,d=x.ERR_AMBIGUOUS_ARGUMENT,s=x.ERR_INVALID_ARG_TYPE,t=x.ERR_INVALID_ARG_VALUE,o=x.ERR_INVALID_RETURN_VALUE,r=x.ERR_MISSING_ARGS,n=e(73894),a=e(43827).inspect,i=e(43827).types,c=i.isPromise,h=i.isRegExp,f=Object.assign?Object.assign:e(73523).assign,b=Object.is?Object.is:e(64003);function v(){var H=e(74061);l=H.isDeepEqual,T=H.isDeepStrictEqual}var g=!1,y=$.exports=u,p={};function m(H){throw H.message instanceof Error?H.message:new n(H)}function w(H,F,N,B){if(!N){var j=!1;if(F===0)j=!0,B="No value argument passed to `assert.ok()`";else if(B instanceof Error)throw B;var K=new n({actual:N,expected:!0,message:B,operator:"==",stackStartFn:H});throw K.generatedMessage=j,K}}function u(){for(var H=arguments.length,F=new Array(H),N=0;N<H;N++)F[N]=arguments[N];w.apply(void 0,[u,F.length].concat(F))}y.fail=function H(F,N,B,j,K){var G,V=arguments.length;if(V===0)G="Failed";else if(V===1)B=F,F=void 0;else{if(g===!1){g=!0;var W=A.emitWarning?A.emitWarning:console.warn.bind(console);W("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}V===2&&(j="!=")}if(B instanceof Error)throw B;var J={actual:F,expected:N,operator:j===void 0?"fail":j,stackStartFn:K||H};B!==void 0&&(J.message=B);var X=new n(J);throw G&&(X.message=G,X.generatedMessage=!0),X},y.AssertionError=n,y.ok=u,y.equal=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");F!=N&&m({actual:F,expected:N,message:B,operator:"==",stackStartFn:H})},y.notEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");F==N&&m({actual:F,expected:N,message:B,operator:"!=",stackStartFn:H})},y.deepEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),l(F,N)||m({actual:F,expected:N,message:B,operator:"deepEqual",stackStartFn:H})},y.notDeepEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),l(F,N)&&m({actual:F,expected:N,message:B,operator:"notDeepEqual",stackStartFn:H})},y.deepStrictEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),T(F,N)||m({actual:F,expected:N,message:B,operator:"deepStrictEqual",stackStartFn:H})},y.notDeepStrictEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),T(F,N)&&m({actual:F,expected:N,message:B,operator:"notDeepStrictEqual",stackStartFn:H})},y.strictEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");b(F,N)||m({actual:F,expected:N,message:B,operator:"strictEqual",stackStartFn:H})},y.notStrictEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");b(F,N)&&m({actual:F,expected:N,message:B,operator:"notStrictEqual",stackStartFn:H})};var S=function H(F,N,B){var j=this;(function(K,G){if(!(K instanceof G))throw new TypeError("Cannot call a class as a function")})(this,H),N.forEach(function(K){K in F&&(B!==void 0&&typeof B[K]=="string"&&h(F[K])&&F[K].test(B[K])?j[K]=B[K]:j[K]=F[K])})};function _(H,F,N,B,j,K){if(!(N in H)||!T(H[N],F[N])){if(!B){var G=new S(H,j),V=new S(F,j,H),W=new n({actual:G,expected:V,operator:"deepStrictEqual",stackStartFn:K});throw W.actual=H,W.expected=F,W.operator=K.name,W}m({actual:H,expected:F,message:B,operator:K.name,stackStartFn:K})}}function E(H,F,N,B){if(typeof F!="function"){if(h(F))return F.test(H);if(arguments.length===2)throw new s("expected",["Function","RegExp"],F);if(k(H)!=="object"||H===null){var j=new n({actual:H,expected:F,message:N,operator:"deepStrictEqual",stackStartFn:B});throw j.operator=B.name,j}var K=Object.keys(F);if(F instanceof Error)K.push("name","message");else if(K.length===0)throw new t("error",F,"may not be an empty object");return l===void 0&&v(),K.forEach(function(G){typeof H[G]=="string"&&h(F[G])&&F[G].test(H[G])||_(H,F,G,N,K,B)}),!0}return F.prototype!==void 0&&H instanceof F||!Error.isPrototypeOf(F)&&F.call({},H)===!0}function L(H){if(typeof H!="function")throw new s("fn","Function",H);try{H()}catch(F){return F}return p}function C(H){return c(H)||H!==null&&k(H)==="object"&&typeof H.then=="function"&&typeof H.catch=="function"}function P(H){return Promise.resolve().then(function(){var F;if(typeof H=="function"){if(!C(F=H()))throw new o("instance of Promise","promiseFn",F)}else{if(!C(H))throw new s("promiseFn",["Function","Promise"],H);F=H}return Promise.resolve().then(function(){return F}).then(function(){return p}).catch(function(N){return N})})}function I(H,F,N,B){if(typeof N=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],N);if(k(F)==="object"&&F!==null){if(F.message===N)throw new d("error/message",'The error message "'.concat(F.message,'" is identical to the message.'))}else if(F===N)throw new d("error/message",'The error "'.concat(F,'" is identical to the message.'));B=N,N=void 0}else if(N!=null&&k(N)!=="object"&&typeof N!="function")throw new s("error",["Object","Error","Function","RegExp"],N);if(F===p){var j="";N&&N.name&&(j+=" (".concat(N.name,")")),j+=B?": ".concat(B):".";var K=H.name==="rejects"?"rejection":"exception";m({actual:void 0,expected:N,operator:H.name,message:"Missing expected ".concat(K).concat(j),stackStartFn:H})}if(N&&!E(F,N,B,H))throw F}function U(H,F,N,B){if(F!==p){if(typeof N=="string"&&(B=N,N=void 0),!N||E(F,N)){var j=B?": ".concat(B):".",K=H.name==="doesNotReject"?"rejection":"exception";m({actual:F,expected:N,operator:H.name,message:"Got unwanted ".concat(K).concat(j,`
`)+'Actual message: "'.concat(F&&F.message,'"'),stackStartFn:H})}throw F}}function z(){for(var H=arguments.length,F=new Array(H),N=0;N<H;N++)F[N]=arguments[N];w.apply(void 0,[z,F.length].concat(F))}y.throws=function H(F){for(var N=arguments.length,B=new Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];I.apply(void 0,[H,L(F)].concat(B))},y.rejects=function H(F){for(var N=arguments.length,B=new Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];return P(F).then(function(K){return I.apply(void 0,[H,K].concat(B))})},y.doesNotThrow=function H(F){for(var N=arguments.length,B=new Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];U.apply(void 0,[H,L(F)].concat(B))},y.doesNotReject=function H(F){for(var N=arguments.length,B=new Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];return P(F).then(function(K){return U.apply(void 0,[H,K].concat(B))})},y.ifError=function H(F){if(F!=null){var N="ifError got unwanted exception: ";k(F)==="object"&&typeof F.message=="string"?F.message.length===0&&F.constructor?N+=F.constructor.name:N+=F.message:N+=a(F);var B=new n({actual:F,expected:null,operator:"ifError",message:N,stackStartFn:H}),j=F.stack;if(typeof j=="string"){var K=j.split(`
`);K.shift();for(var G=B.stack.split(`
`),V=0;V<K.length;V++){var W=G.indexOf(K[V]);if(W!==-1){G=G.slice(0,W);break}}B.stack="".concat(G.join(`
`),`
`).concat(K.join(`
`))}throw B}},y.strict=f(z,y,{equal:y.strictEqual,deepEqual:y.deepStrictEqual,notEqual:y.notStrictEqual,notDeepEqual:y.notDeepStrictEqual}),y.strict.strict=y.strict},73894:function($,R,e){var A=e(90386);function k(w,u,S){return u in w?Object.defineProperty(w,u,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[u]=S,w}function l(w,u){for(var S=0;S<u.length;S++){var _=u[S];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}function T(w,u){return!u||n(u)!=="object"&&typeof u!="function"?x(w):u}function x(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function d(w){var u=typeof Map=="function"?new Map:void 0;return d=function(S){if(S===null||(_=S,Function.toString.call(_).indexOf("[native code]")===-1))return S;var _;if(typeof S!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(S))return u.get(S);u.set(S,E)}function E(){return t(S,arguments,r(this).constructor)}return E.prototype=Object.create(S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),o(E,S)},d(w)}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function t(w,u,S){return t=s()?Reflect.construct:function(_,E,L){var C=[null];C.push.apply(C,E);var P=new(Function.bind.apply(_,C));return L&&o(P,L.prototype),P},t.apply(null,arguments)}function o(w,u){return o=Object.setPrototypeOf||function(S,_){return S.__proto__=_,S},o(w,u)}function r(w){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},r(w)}function n(w){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},n(w)}var a=e(43827).inspect,i=e(79616).codes.ERR_INVALID_ARG_TYPE;function c(w,u,S){return(S===void 0||S>w.length)&&(S=w.length),w.substring(S-u.length,S)===u}var h="",f="",b="",v="",g={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function y(w){var u=Object.keys(w),S=Object.create(Object.getPrototypeOf(w));return u.forEach(function(_){S[_]=w[_]}),Object.defineProperty(S,"message",{value:w.message}),S}function p(w){return a(w,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var m=function(w){function u(E){var L;if(function(G,V){if(!(G instanceof V))throw new TypeError("Cannot call a class as a function")}(this,u),n(E)!=="object"||E===null)throw new i("options","Object",E);var C=E.message,P=E.operator,I=E.stackStartFn,U=E.actual,z=E.expected,H=Error.stackTraceLimit;if(Error.stackTraceLimit=0,C!=null)L=T(this,r(u).call(this,String(C)));else if(A.stderr&&A.stderr.isTTY&&(A.stderr&&A.stderr.getColorDepth&&A.stderr.getColorDepth()!==1?(h="\x1B[34m",f="\x1B[32m",v="\x1B[39m",b="\x1B[31m"):(h="",f="",v="",b="")),n(U)==="object"&&U!==null&&n(z)==="object"&&z!==null&&"stack"in U&&U instanceof Error&&"stack"in z&&z instanceof Error&&(U=y(U),z=y(z)),P==="deepStrictEqual"||P==="strictEqual")L=T(this,r(u).call(this,function(G,V,W){var J="",X="",ee=0,re="",ie=!1,se=p(G),fe=se.split(`
`),ye=p(V).split(`
`),ge=0,he="";if(W==="strictEqual"&&n(G)==="object"&&n(V)==="object"&&G!==null&&V!==null&&(W="strictEqualObject"),fe.length===1&&ye.length===1&&fe[0]!==ye[0]){var ve=fe[0].length+ye[0].length;if(ve<=10){if(!(n(G)==="object"&&G!==null||n(V)==="object"&&V!==null||G===0&&V===0))return"".concat(g[W],`

`)+"".concat(fe[0]," !== ").concat(ye[0],`
`)}else if(W!=="strictEqualObject"&&ve<(A.stderr&&A.stderr.isTTY?A.stderr.columns:80)){for(;fe[0][ge]===ye[0][ge];)ge++;ge>2&&(he=`
  `.concat(function(Ce,ze){if(ze=Math.floor(ze),Ce.length==0||ze==0)return"";var le=Ce.length*ze;for(ze=Math.floor(Math.log(ze)/Math.log(2));ze;)Ce+=Ce,ze--;return Ce+Ce.substring(0,le-Ce.length)}(" ",ge),"^"),ge=0)}}for(var Ie=fe[fe.length-1],xe=ye[ye.length-1];Ie===xe&&(ge++<2?re=`
  `.concat(Ie).concat(re):J=Ie,fe.pop(),ye.pop(),fe.length!==0&&ye.length!==0);)Ie=fe[fe.length-1],xe=ye[ye.length-1];var Ae=Math.max(fe.length,ye.length);if(Ae===0){var Se=se.split(`
`);if(Se.length>30)for(Se[26]="".concat(h,"...").concat(v);Se.length>27;)Se.pop();return"".concat(g.notIdentical,`

`).concat(Se.join(`
`),`
`)}ge>3&&(re=`
`.concat(h,"...").concat(v).concat(re),ie=!0),J!==""&&(re=`
  `.concat(J).concat(re),J="");var Te=0,Q=g[W]+`
`.concat(f,"+ actual").concat(v," ").concat(b,"- expected").concat(v),oe=" ".concat(h,"...").concat(v," Lines skipped");for(ge=0;ge<Ae;ge++){var ce=ge-ee;if(fe.length<ge+1)ce>1&&ge>2&&(ce>4?(X+=`
`.concat(h,"...").concat(v),ie=!0):ce>3&&(X+=`
  `.concat(ye[ge-2]),Te++),X+=`
  `.concat(ye[ge-1]),Te++),ee=ge,J+=`
`.concat(b,"-").concat(v," ").concat(ye[ge]),Te++;else if(ye.length<ge+1)ce>1&&ge>2&&(ce>4?(X+=`
`.concat(h,"...").concat(v),ie=!0):ce>3&&(X+=`
  `.concat(fe[ge-2]),Te++),X+=`
  `.concat(fe[ge-1]),Te++),ee=ge,X+=`
`.concat(f,"+").concat(v," ").concat(fe[ge]),Te++;else{var me=ye[ge],Me=fe[ge],Re=Me!==me&&(!c(Me,",")||Me.slice(0,-1)!==me);Re&&c(me,",")&&me.slice(0,-1)===Me&&(Re=!1,Me+=","),Re?(ce>1&&ge>2&&(ce>4?(X+=`
`.concat(h,"...").concat(v),ie=!0):ce>3&&(X+=`
  `.concat(fe[ge-2]),Te++),X+=`
  `.concat(fe[ge-1]),Te++),ee=ge,X+=`
`.concat(f,"+").concat(v," ").concat(Me),J+=`
`.concat(b,"-").concat(v," ").concat(me),Te+=2):(X+=J,J="",ce!==1&&ge!==0||(X+=`
  `.concat(Me),Te++))}if(Te>20&&ge<Ae-2)return"".concat(Q).concat(oe,`
`).concat(X,`
`).concat(h,"...").concat(v).concat(J,`
`)+"".concat(h,"...").concat(v)}return"".concat(Q).concat(ie?oe:"",`
`).concat(X).concat(J).concat(re).concat(he)}(U,z,P)));else if(P==="notDeepStrictEqual"||P==="notStrictEqual"){var F=g[P],N=p(U).split(`
`);if(P==="notStrictEqual"&&n(U)==="object"&&U!==null&&(F=g.notStrictEqualObject),N.length>30)for(N[26]="".concat(h,"...").concat(v);N.length>27;)N.pop();L=N.length===1?T(this,r(u).call(this,"".concat(F," ").concat(N[0]))):T(this,r(u).call(this,"".concat(F,`

`).concat(N.join(`
`),`
`)))}else{var B=p(U),j="",K=g[P];P==="notDeepEqual"||P==="notEqual"?(B="".concat(g[P],`

`).concat(B)).length>1024&&(B="".concat(B.slice(0,1021),"...")):(j="".concat(p(z)),B.length>512&&(B="".concat(B.slice(0,509),"...")),j.length>512&&(j="".concat(j.slice(0,509),"...")),P==="deepEqual"||P==="equal"?B="".concat(K,`

`).concat(B,`

should equal

`):j=" ".concat(P," ").concat(j)),L=T(this,r(u).call(this,"".concat(B).concat(j)))}return Error.stackTraceLimit=H,L.generatedMessage=!C,Object.defineProperty(x(L),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),L.code="ERR_ASSERTION",L.actual=U,L.expected=z,L.operator=P,Error.captureStackTrace&&Error.captureStackTrace(x(L),I),L.stack,L.name="AssertionError",T(L)}var S,_;return function(E,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(L&&L.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),L&&o(E,L)}(u,w),S=u,_=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:a.custom,value:function(E,L){return a(this,function(C){for(var P=1;P<arguments.length;P++){var I=arguments[P]!=null?arguments[P]:{},U=Object.keys(I);typeof Object.getOwnPropertySymbols=="function"&&(U=U.concat(Object.getOwnPropertySymbols(I).filter(function(z){return Object.getOwnPropertyDescriptor(I,z).enumerable}))),U.forEach(function(z){k(C,z,I[z])})}return C}({},L,{customInspect:!1,depth:0}))}}],_&&l(S.prototype,_),u}(d(Error));$.exports=m},79616:function($,R,e){function A(o){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},A(o)}function k(o){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},k(o)}function l(o,r){return l=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},l(o,r)}var T,x,d={};function s(o,r,n){n||(n=Error);var a=function(i){function c(h,f,b){var v;return function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}(this,c),v=function(g,y){return!y||A(y)!=="object"&&typeof y!="function"?function(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}(g):y}(this,k(c).call(this,function(g,y,p){return typeof r=="string"?r:r(g,y,p)}(h,f,b))),v.code=o,v}return function(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),f&&l(h,f)}(c,i),c}(n);d[o]=a}function t(o,r){if(Array.isArray(o)){var n=o.length;return o=o.map(function(a){return String(a)}),n>2?"one of ".concat(r," ").concat(o.slice(0,n-1).join(", "),", or ")+o[n-1]:n===2?"one of ".concat(r," ").concat(o[0]," or ").concat(o[1]):"of ".concat(r," ").concat(o[0])}return"of ".concat(r," ").concat(String(o))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(o,r,n){var a,i,c,h,f;if(T===void 0&&(T=e(32791)),T(typeof o=="string","'name' must be a string"),typeof r=="string"&&(i="not ",r.substr(0,i.length)===i)?(a="must not be",r=r.replace(/^not /,"")):a="must be",function(v,g,y){return(y===void 0||y>v.length)&&(y=v.length),v.substring(y-g.length,y)===g}(o," argument"))c="The ".concat(o," ").concat(a," ").concat(t(r,"type"));else{var b=(typeof f!="number"&&(f=0),f+1>(h=o).length||h.indexOf(".",f)===-1?"argument":"property");c='The "'.concat(o,'" ').concat(b," ").concat(a," ").concat(t(r,"type"))}return c+". Received type ".concat(A(n))},TypeError),s("ERR_INVALID_ARG_VALUE",function(o,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";x===void 0&&(x=e(43827));var a=x.inspect(r);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(o,"' ").concat(n,". Received ").concat(a)},TypeError),s("ERR_INVALID_RETURN_VALUE",function(o,r,n){var a;return a=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(A(n)),"Expected ".concat(o,' to be returned from the "').concat(r,'"')+" function but got ".concat(a,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];T===void 0&&(T=e(32791)),T(r.length>0,"At least one arg needs to be specified");var a="The ",i=r.length;switch(r=r.map(function(c){return'"'.concat(c,'"')}),i){case 1:a+="".concat(r[0]," argument");break;case 2:a+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:a+=r.slice(0,i-1).join(", "),a+=", and ".concat(r[i-1]," arguments")}return"".concat(a," must be specified")},TypeError),$.exports.codes=d},74061:function($,R,e){function A(V,W){return function(J){if(Array.isArray(J))return J}(V)||function(J,X){var ee=[],re=!0,ie=!1,se=void 0;try{for(var fe,ye=J[Symbol.iterator]();!(re=(fe=ye.next()).done)&&(ee.push(fe.value),!X||ee.length!==X);re=!0);}catch(ge){ie=!0,se=ge}finally{try{re||ye.return==null||ye.return()}finally{if(ie)throw se}}return ee}(V,W)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(V){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},k(V)}var l=/a/g.flags!==void 0,T=function(V){var W=[];return V.forEach(function(J){return W.push(J)}),W},x=function(V){var W=[];return V.forEach(function(J,X){return W.push([X,J])}),W},d=Object.is?Object.is:e(64003),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(15567);function o(V){return V.call.bind(V)}var r=o(Object.prototype.hasOwnProperty),n=o(Object.prototype.propertyIsEnumerable),a=o(Object.prototype.toString),i=e(43827).types,c=i.isAnyArrayBuffer,h=i.isArrayBufferView,f=i.isDate,b=i.isMap,v=i.isRegExp,g=i.isSet,y=i.isNativeError,p=i.isBoxedPrimitive,m=i.isNumberObject,w=i.isStringObject,u=i.isBooleanObject,S=i.isBigIntObject,_=i.isSymbolObject,E=i.isFloat32Array,L=i.isFloat64Array;function C(V){if(V.length===0||V.length>10)return!0;for(var W=0;W<V.length;W++){var J=V.charCodeAt(W);if(J<48||J>57)return!0}return V.length===10&&V>=Math.pow(2,32)}function P(V){return Object.keys(V).filter(C).concat(s(V).filter(Object.prototype.propertyIsEnumerable.bind(V)))}function I(V,W){if(V===W)return 0;for(var J=V.length,X=W.length,ee=0,re=Math.min(J,X);ee<re;++ee)if(V[ee]!==W[ee]){J=V[ee],X=W[ee];break}return J<X?-1:X<J?1:0}function U(V,W,J,X){if(V===W)return V!==0||!J||d(V,W);if(J){if(k(V)!=="object")return typeof V=="number"&&t(V)&&t(W);if(k(W)!=="object"||V===null||W===null||Object.getPrototypeOf(V)!==Object.getPrototypeOf(W))return!1}else{if(V===null||k(V)!=="object")return(W===null||k(W)!=="object")&&V==W;if(W===null||k(W)!=="object")return!1}var ee,re,ie,se,fe=a(V);if(fe!==a(W))return!1;if(Array.isArray(V)){if(V.length!==W.length)return!1;var ye=P(V),ge=P(W);return ye.length===ge.length&&H(V,W,J,X,1,ye)}if(fe==="[object Object]"&&(!b(V)&&b(W)||!g(V)&&g(W)))return!1;if(f(V)){if(!f(W)||Date.prototype.getTime.call(V)!==Date.prototype.getTime.call(W))return!1}else if(v(V)){if(!v(W)||(ie=V,se=W,!(l?ie.source===se.source&&ie.flags===se.flags:RegExp.prototype.toString.call(ie)===RegExp.prototype.toString.call(se))))return!1}else if(y(V)||V instanceof Error){if(V.message!==W.message||V.name!==W.name)return!1}else{if(h(V)){if(J||!E(V)&&!L(V)){if(!function(Ie,xe){return Ie.byteLength===xe.byteLength&&I(new Uint8Array(Ie.buffer,Ie.byteOffset,Ie.byteLength),new Uint8Array(xe.buffer,xe.byteOffset,xe.byteLength))===0}(V,W))return!1}else if(!function(Ie,xe){if(Ie.byteLength!==xe.byteLength)return!1;for(var Ae=0;Ae<Ie.byteLength;Ae++)if(Ie[Ae]!==xe[Ae])return!1;return!0}(V,W))return!1;var he=P(V),ve=P(W);return he.length===ve.length&&H(V,W,J,X,0,he)}if(g(V))return!(!g(W)||V.size!==W.size)&&H(V,W,J,X,2);if(b(V))return!(!b(W)||V.size!==W.size)&&H(V,W,J,X,3);if(c(V)){if(re=W,(ee=V).byteLength!==re.byteLength||I(new Uint8Array(ee),new Uint8Array(re))!==0)return!1}else if(p(V)&&!function(Ie,xe){return m(Ie)?m(xe)&&d(Number.prototype.valueOf.call(Ie),Number.prototype.valueOf.call(xe)):w(Ie)?w(xe)&&String.prototype.valueOf.call(Ie)===String.prototype.valueOf.call(xe):u(Ie)?u(xe)&&Boolean.prototype.valueOf.call(Ie)===Boolean.prototype.valueOf.call(xe):S(Ie)?S(xe)&&BigInt.prototype.valueOf.call(Ie)===BigInt.prototype.valueOf.call(xe):_(xe)&&Symbol.prototype.valueOf.call(Ie)===Symbol.prototype.valueOf.call(xe)}(V,W))return!1}return H(V,W,J,X,0)}function z(V,W){return W.filter(function(J){return n(V,J)})}function H(V,W,J,X,ee,re){if(arguments.length===5){re=Object.keys(V);var ie=Object.keys(W);if(re.length!==ie.length)return!1}for(var se=0;se<re.length;se++)if(!r(W,re[se]))return!1;if(J&&arguments.length===5){var fe=s(V);if(fe.length!==0){var ye=0;for(se=0;se<fe.length;se++){var ge=fe[se];if(n(V,ge)){if(!n(W,ge))return!1;re.push(ge),ye++}else if(n(W,ge))return!1}var he=s(W);if(fe.length!==he.length&&z(W,he).length!==ye)return!1}else{var ve=s(W);if(ve.length!==0&&z(W,ve).length!==0)return!1}}if(re.length===0&&(ee===0||ee===1&&V.length===0||V.size===0))return!0;if(X===void 0)X={val1:new Map,val2:new Map,position:0};else{var Ie=X.val1.get(V);if(Ie!==void 0){var xe=X.val2.get(W);if(xe!==void 0)return Ie===xe}X.position++}X.val1.set(V,X.position),X.val2.set(W,X.position);var Ae=G(V,W,J,re,X,ee);return X.val1.delete(V),X.val2.delete(W),Ae}function F(V,W,J,X){for(var ee=T(V),re=0;re<ee.length;re++){var ie=ee[re];if(U(W,ie,J,X))return V.delete(ie),!0}return!1}function N(V){switch(k(V)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":V=+V;case"number":if(t(V))return!1}return!0}function B(V,W,J){var X=N(J);return X??(W.has(X)&&!V.has(X))}function j(V,W,J,X,ee){var re=N(J);if(re!=null)return re;var ie=W.get(re);return!(ie===void 0&&!W.has(re)||!U(X,ie,!1,ee))&&!V.has(re)&&U(X,ie,!1,ee)}function K(V,W,J,X,ee,re){for(var ie=T(V),se=0;se<ie.length;se++){var fe=ie[se];if(U(J,fe,ee,re)&&U(X,W.get(fe),ee,re))return V.delete(fe),!0}return!1}function G(V,W,J,X,ee,re){var ie=0;if(re===2){if(!function(ge,he,ve,Ie){for(var xe=null,Ae=T(ge),Se=0;Se<Ae.length;Se++){var Te=Ae[Se];if(k(Te)==="object"&&Te!==null)xe===null&&(xe=new Set),xe.add(Te);else if(!he.has(Te)){if(ve||!B(ge,he,Te))return!1;xe===null&&(xe=new Set),xe.add(Te)}}if(xe!==null){for(var Q=T(he),oe=0;oe<Q.length;oe++){var ce=Q[oe];if(k(ce)==="object"&&ce!==null){if(!F(xe,ce,ve,Ie))return!1}else if(!ve&&!ge.has(ce)&&!F(xe,ce,ve,Ie))return!1}return xe.size===0}return!0}(V,W,J,ee))return!1}else if(re===3){if(!function(ge,he,ve,Ie){for(var xe=null,Ae=x(ge),Se=0;Se<Ae.length;Se++){var Te=A(Ae[Se],2),Q=Te[0],oe=Te[1];if(k(Q)==="object"&&Q!==null)xe===null&&(xe=new Set),xe.add(Q);else{var ce=he.get(Q);if(ce===void 0&&!he.has(Q)||!U(oe,ce,ve,Ie)){if(ve||!j(ge,he,Q,oe,Ie))return!1;xe===null&&(xe=new Set),xe.add(Q)}}}if(xe!==null){for(var me=x(he),Me=0;Me<me.length;Me++){var Re=A(me[Me],2),Ce=(Q=Re[0],Re[1]);if(k(Q)==="object"&&Q!==null){if(!K(xe,ge,Q,Ce,ve,Ie))return!1}else if(!(ve||ge.has(Q)&&U(ge.get(Q),Ce,!1,Ie)||K(xe,ge,Q,Ce,!1,Ie)))return!1}return xe.size===0}return!0}(V,W,J,ee))return!1}else if(re===1)for(;ie<V.length;ie++){if(!r(V,ie)){if(r(W,ie))return!1;for(var se=Object.keys(V);ie<se.length;ie++){var fe=se[ie];if(!r(W,fe)||!U(V[fe],W[fe],J,ee))return!1}return se.length===Object.keys(W).length}if(!r(W,ie)||!U(V[ie],W[ie],J,ee))return!1}for(ie=0;ie<X.length;ie++){var ye=X[ie];if(!U(V[ye],W[ye],J,ee))return!1}return!0}$.exports={isDeepEqual:function(V,W){return U(V,W,!1)},isDeepStrictEqual:function(V,W){return U(V,W,!0)}}},95341:function($,R){R.byteLength=function(t){var o=d(t),r=o[0],n=o[1];return 3*(r+n)/4-n},R.toByteArray=function(t){var o,r,n=d(t),a=n[0],i=n[1],c=new k(function(b,v,g){return 3*(v+g)/4-g}(0,a,i)),h=0,f=i>0?a-4:a;for(r=0;r<f;r+=4)o=A[t.charCodeAt(r)]<<18|A[t.charCodeAt(r+1)]<<12|A[t.charCodeAt(r+2)]<<6|A[t.charCodeAt(r+3)],c[h++]=o>>16&255,c[h++]=o>>8&255,c[h++]=255&o;return i===2&&(o=A[t.charCodeAt(r)]<<2|A[t.charCodeAt(r+1)]>>4,c[h++]=255&o),i===1&&(o=A[t.charCodeAt(r)]<<10|A[t.charCodeAt(r+1)]<<4|A[t.charCodeAt(r+2)]>>2,c[h++]=o>>8&255,c[h++]=255&o),c},R.fromByteArray=function(t){for(var o,r=t.length,n=r%3,a=[],i=16383,c=0,h=r-n;c<h;c+=i)a.push(s(t,c,c+i>h?h:c+i));return n===1?(o=t[r-1],a.push(e[o>>2]+e[o<<4&63]+"==")):n===2&&(o=(t[r-2]<<8)+t[r-1],a.push(e[o>>10]+e[o>>4&63]+e[o<<2&63]+"=")),a.join("")};for(var e=[],A=[],k=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0,x=l.length;T<x;++T)e[T]=l[T],A[l.charCodeAt(T)]=T;function d(t){var o=t.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return r===-1&&(r=o),[r,r===o?0:4-r%4]}function s(t,o,r){for(var n,a,i=[],c=o;c<r;c+=3)n=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(255&t[c+2]),i.push(e[(a=n)>>18&63]+e[a>>12&63]+e[a>>6&63]+e[63&a]);return i.join("")}A["-".charCodeAt(0)]=62,A["_".charCodeAt(0)]=63},91358:function($){function R(x,d,s,t,o){for(var r=o+1;t<=o;){var n=t+o>>>1,a=x[n];(s!==void 0?s(a,d):a-d)>=0?(r=n,o=n-1):t=n+1}return r}function e(x,d,s,t,o){for(var r=o+1;t<=o;){var n=t+o>>>1,a=x[n];(s!==void 0?s(a,d):a-d)>0?(r=n,o=n-1):t=n+1}return r}function A(x,d,s,t,o){for(var r=t-1;t<=o;){var n=t+o>>>1,a=x[n];(s!==void 0?s(a,d):a-d)<0?(r=n,t=n+1):o=n-1}return r}function k(x,d,s,t,o){for(var r=t-1;t<=o;){var n=t+o>>>1,a=x[n];(s!==void 0?s(a,d):a-d)<=0?(r=n,t=n+1):o=n-1}return r}function l(x,d,s,t,o){for(;t<=o;){var r=t+o>>>1,n=x[r],a=s!==void 0?s(n,d):n-d;if(a===0)return r;a<=0?t=r+1:o=r-1}return-1}function T(x,d,s,t,o,r){return typeof s=="function"?r(x,d,s,t===void 0?0:0|t,o===void 0?x.length-1:0|o):r(x,d,void 0,s===void 0?0:0|s,t===void 0?x.length-1:0|t)}$.exports={ge:function(x,d,s,t,o){return T(x,d,s,t,o,R)},gt:function(x,d,s,t,o){return T(x,d,s,t,o,e)},lt:function(x,d,s,t,o){return T(x,d,s,t,o,A)},le:function(x,d,s,t,o){return T(x,d,s,t,o,k)},eq:function(x,d,s,t,o){return T(x,d,s,t,o,l)}}},13547:function($,R){function e(k){var l=32;return(k&=-k)&&l--,65535&k&&(l-=16),16711935&k&&(l-=8),252645135&k&&(l-=4),858993459&k&&(l-=2),1431655765&k&&(l-=1),l}R.INT_BITS=32,R.INT_MAX=2147483647,R.INT_MIN=-2147483648,R.sign=function(k){return(k>0)-(k<0)},R.abs=function(k){var l=k>>31;return(k^l)-l},R.min=function(k,l){return l^(k^l)&-(k<l)},R.max=function(k,l){return k^(k^l)&-(k<l)},R.isPow2=function(k){return!(k&k-1||!k)},R.log2=function(k){var l,T;return l=(k>65535)<<4,l|=T=((k>>>=l)>255)<<3,l|=T=((k>>>=T)>15)<<2,(l|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},R.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},R.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},R.countTrailingZeros=e,R.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},R.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},R.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var A=new Array(256);(function(k){for(var l=0;l<256;++l){var T=l,x=l,d=7;for(T>>>=1;T;T>>>=1)x<<=1,x|=1&T,--d;k[l]=x<<d&255}})(A),R.reverse=function(k){return A[255&k]<<24|A[k>>>8&255]<<16|A[k>>>16&255]<<8|A[k>>>24&255]},R.interleave2=function(k,l){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},R.deinterleave2=function(k,l){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>l&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},R.interleave3=function(k,l,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},R.deinterleave3=function(k,l){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>l&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},R.nextCombination=function(k){var l=k|k-1;return l+1|(~l&-~l)-1>>>e(k)+1}},44781:function($,R,e){var A=e(53435);$.exports=function(x,d){d||(d={});var s,t,o,r,n,a,i,c,h,f,b,v=d.cutoff==null?.25:d.cutoff,g=d.radius==null?8:d.radius,y=d.channel||0;if(ArrayBuffer.isView(x)||Array.isArray(x)){if(!d.width||!d.height)throw Error("For raw data width and height should be provided by options");s=d.width,t=d.height,r=x,a=d.stride?d.stride:Math.floor(x.length/s/t)}else window.HTMLCanvasElement&&x instanceof window.HTMLCanvasElement?(i=(c=x).getContext("2d"),s=c.width,t=c.height,r=(h=i.getImageData(0,0,s,t)).data,a=4):window.CanvasRenderingContext2D&&x instanceof window.CanvasRenderingContext2D?(i=x,s=(c=x.canvas).width,t=c.height,r=(h=i.getImageData(0,0,s,t)).data,a=4):window.ImageData&&x instanceof window.ImageData&&(h=x,s=x.width,t=x.height,r=h.data,a=4);if(o=Math.max(s,t),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(s*t),f=0,b=n.length;f<b;f++)r[f]=n[f*a+y]/255;else if(a!==1)throw Error("Raw data can have only 1 value per pixel");var p=Array(s*t),m=Array(s*t),w=Array(o),u=Array(o),S=Array(o+1),_=Array(o);for(f=0,b=s*t;f<b;f++){var E=r[f];p[f]=E===1?0:E===0?k:Math.pow(Math.max(0,.5-E),2),m[f]=E===1?k:E===0?0:Math.pow(Math.max(0,E-.5),2)}l(p,s,t,w,u,_,S),l(m,s,t,w,u,_,S);var L=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(f=0,b=s*t;f<b;f++)L[f]=A(1-((p[f]-m[f])/g+v),0,1);return L};var k=1e20;function l(x,d,s,t,o,r,n){for(var a=0;a<d;a++){for(var i=0;i<s;i++)t[i]=x[i*d+a];for(T(t,o,r,n,s),i=0;i<s;i++)x[i*d+a]=o[i]}for(i=0;i<s;i++){for(a=0;a<d;a++)t[a]=x[i*d+a];for(T(t,o,r,n,d),a=0;a<d;a++)x[i*d+a]=Math.sqrt(o[a])}}function T(x,d,s,t,o){s[0]=0,t[0]=-k,t[1]=+k;for(var r=1,n=0;r<o;r++){for(var a=(x[r]+r*r-(x[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);a<=t[n];)n--,a=(x[r]+r*r-(x[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);s[++n]=r,t[n]=a,t[n+1]=+k}for(r=0,n=0;r<o;r++){for(;t[n+1]<r;)n++;d[r]=(r-s[n])*(r-s[n])+x[s[n]]}}},68222:function($,R,e){var A=e(77575),k=e(68318),l=k("%Function.prototype.apply%"),T=k("%Function.prototype.call%"),x=k("%Reflect.apply%",!0)||A.call(T,l),d=k("%Object.defineProperty%",!0);if(d)try{d({},"a",{value:1})}catch{d=null}$.exports=function(){return x(A,T,arguments)};var s=function(){return x(A,l,arguments)};d?d($.exports,"apply",{value:s}):$.exports.apply=s},53435:function($){$.exports=function(R,e,A){return e<A?R<e?e:R>A?A:R:R<A?A:R>e?e:R}},6475:function($,R,e){var A=e(53435);function k(l,T){T==null&&(T=!0);var x=l[0],d=l[1],s=l[2],t=l[3];return t==null&&(t=T?1:255),T&&(x*=255,d*=255,s*=255,t*=255),16777216*(x=255&A(x,0,255))+((d=255&A(d,0,255))<<16)+((s=255&A(s,0,255))<<8)+(255&A(t,0,255))}$.exports=k,$.exports.to=k,$.exports.from=function(l,T){var x=(l=+l)>>>24,d=(16711680&l)>>>16,s=(65280&l)>>>8,t=255&l;return T===!1?[x,d,s,t]:[x/255,d/255,s/255,t/255]}},76857:function($){$.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function($,R,e){var A=e(36652),k=e(53435),l=e(90660);$.exports=function(T,x){x!=="float"&&x||(x="array"),x==="uint"&&(x="uint8"),x==="uint_clamped"&&(x="uint8_clamped");var d=new(l(x))(4),s=x!=="uint8"&&x!=="uint8_clamped";return T.length&&typeof T!="string"||((T=A(T))[0]/=255,T[1]/=255,T[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(T)?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=T[3]!=null?T[3]:255,s&&(d[0]/=255,d[1]/=255,d[2]/=255,d[3]/=255),d):(s?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=T[3]!=null?T[3]:1):(d[0]=k(Math.floor(255*T[0]),0,255),d[1]=k(Math.floor(255*T[1]),0,255),d[2]=k(Math.floor(255*T[2]),0,255),d[3]=T[3]==null?255:k(Math.floor(255*T[3]),0,255)),d)}},90736:function($,R,e){var A=e(76857),k=e(10973),l=e(46775);$.exports=function(x){var d,s,t=[],o=1;if(typeof x=="string")if(A[x])t=A[x].slice(),s="rgb";else if(x==="transparent")o=0,s="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(x)){var r=(i=x.slice(1)).length;o=1,r<=4?(t=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],r===4&&(o=parseInt(i[3]+i[3],16)/255)):(t=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],r===8&&(o=parseInt(i[6]+i[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(d=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(x)){var n=d[1],a=n==="rgb",i=n.replace(/a$/,"");s=i,r=i==="cmyk"?4:i==="gray"?1:3,t=d[2].trim().split(/\s*,\s*/).map(function(h,f){if(/%$/.test(h))return f===r?parseFloat(h)/100:i==="rgb"?255*parseFloat(h)/100:parseFloat(h);if(i[f]==="h"){if(/deg$/.test(h))return parseFloat(h);if(T[h]!==void 0)return T[h]}return parseFloat(h)}),n===i&&t.push(1),o=a||t[r]===void 0?1:t[r],t=t.slice(0,r)}else x.length>10&&/[0-9](?:\s|\/)/.test(x)&&(t=x.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),s=x.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(x))if(k(x)){var c=l(x.r,x.red,x.R,null);c!==null?(s="rgb",t=[c,l(x.g,x.green,x.G),l(x.b,x.blue,x.B)]):(s="hsl",t=[l(x.h,x.hue,x.H),l(x.s,x.saturation,x.S),l(x.l,x.lightness,x.L,x.b,x.brightness)]),o=l(x.a,x.alpha,x.opacity,1),x.opacity!=null&&(o/=100)}else(Array.isArray(x)||e.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(x))&&(t=[x[0],x[1],x[2]],s="rgb",o=x.length===4?x[3]:1);else s="rgb",t=[x>>>16,(65280&x)>>>8,255&x];return{space:s,values:t,alpha:o}};var T={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function($,R,e){var A=e(90736),k=e(80009),l=e(53435);$.exports=function(T){var x,d=A(T);return d.space?((x=Array(3))[0]=l(d.values[0],0,255),x[1]=l(d.values[1],0,255),x[2]=l(d.values[2],0,255),d.space[0]==="h"&&(x=k.rgb(x)),x.push(l(d.alpha,0,1)),x):[]}},80009:function($,R,e){var A=e(6866);$.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var l,T,x,d,s,t=k[0]/360,o=k[1]/100,r=k[2]/100;if(o===0)return[s=255*r,s,s];l=2*r-(T=r<.5?r*(1+o):r+o-r*o),d=[0,0,0];for(var n=0;n<3;n++)(x=t+.3333333333333333*-(n-1))<0?x++:x>1&&x--,s=6*x<1?l+6*(T-l)*x:2*x<1?T:3*x<2?l+(T-l)*(.6666666666666666-x)*6:l,d[n]=255*s;return d}},A.hsl=function(k){var l,T,x=k[0]/255,d=k[1]/255,s=k[2]/255,t=Math.min(x,d,s),o=Math.max(x,d,s),r=o-t;return o===t?l=0:x===o?l=(d-s)/r:d===o?l=2+(s-x)/r:s===o&&(l=4+(x-d)/r),(l=Math.min(60*l,360))<0&&(l+=360),T=(t+o)/2,[l,100*(o===t?0:T<=.5?r/(o+t):r/(2-o-t)),100*T]}},6866:function($){$.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function($){$.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function($,R,e){$.exports={parse:e(41004),stringify:e(53313)}},63625:function($,R,e){var A=e(40402);$.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||A.indexOf(k)!==-1}}},41004:function($,R,e){var A=e(90448),k=e(38732),l=e(41901),T=e(15659),x=e(96209),d=e(83794),s=e(99011),t=e(63625).isSize;$.exports=r;var o=r.cache={};function r(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(o[a])return o[a];if(a==="")throw new Error("Cannot parse an empty string.");if(l.indexOf(a)!==-1)return o[a]={system:a};for(var i,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=s(a,/\s+/);i=h.shift();){if(k.indexOf(i)!==-1)return["style","variant","weight","stretch"].forEach(function(b){c[b]=i}),o[a]=c;if(x.indexOf(i)===-1)if(i!=="normal"&&i!=="small-caps")if(d.indexOf(i)===-1){if(T.indexOf(i)===-1){if(t(i)){var f=s(i,"/");if(c.size=f[0],f[1]!=null?c.lineHeight=n(f[1]):h[0]==="/"&&(h.shift(),c.lineHeight=n(h.shift())),!h.length)throw new Error("Missing required font-family.");return c.family=s(h.join(" "),/\s*,\s*/).map(A),o[a]=c}throw new Error("Unknown or unsupported font token: "+i)}c.weight=i}else c.stretch=i;else c.variant=i;else c.style=i}throw new Error("Missing required font-size.")}function n(a){var i=parseFloat(a);return i.toString()===a?i:a}},53313:function($,R,e){var A=e(71299),k=e(63625).isSize,l=a(e(38732)),T=a(e(41901)),x=a(e(15659)),d=a(e(96209)),s=a(e(83794)),t={normal:1,"small-caps":1},o={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(i,c){if(i&&!c[i]&&!l[i])throw Error("Unknown keyword `"+i+"`");return i}function a(i){for(var c={},h=0;h<i.length;h++)c[i[h]]=1;return c}$.exports=function(i){if((i=A(i,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return i.system&&n(i.system,T),i.system;if(n(i.style,d),n(i.variant,t),n(i.weight,x),n(i.stretch,s),i.size==null&&(i.size="1rem"),typeof i.size=="number"&&(i.size+="px"),!k)throw Error("Bad size value `"+i.size+"`");i.family||(i.family=r),Array.isArray(i.family)&&(i.family.length||(i.family=[r]),i.family=i.family.map(function(h){return o[h]?h:'"'+h+'"'}).join(", "));var c=[];return c.push(i.style),i.variant!==i.style&&c.push(i.variant),i.weight!==i.variant&&i.weight!==i.style&&c.push(i.weight),i.stretch!==i.weight&&i.stretch!==i.variant&&i.stretch!==i.style&&c.push(i.stretch),c.push(i.size+(i.lineHeight==null||i.lineHeight==="normal"||i.lineHeight+""=="1"?"":"/"+i.lineHeight)),c.push(i.family),c.filter(Boolean).join(" ")}},55174:function($,R,e){var A,k=e(24582),l=e(10424),T=e(82527),x=e(19012),d=e(21780),s=e(16906),t=Function.prototype.bind,o=Object.defineProperty,r=Object.prototype.hasOwnProperty;A=function(n,a,i){var c,h=l(a)&&T(a.value);return delete(c=x(a)).writable,delete c.value,c.get=function(){return!i.overwriteDefinition&&r.call(this,n)?h:(a.value=t.call(h,i.resolveContext?i.resolveContext(this):this),o(this,n,a),this[n])},c},$.exports=function(n){var a=d(arguments[1]);return k(a.resolveContext)&&T(a.resolveContext),s(n,function(i,c){return A(c,i,a)})}},62072:function($,R,e){var A=e(24582),k=e(84985),l=e(95879),T=e(21780),x=e(66741),d=$.exports=function(s,t){var o,r,n,a,i;return arguments.length<2||typeof s!="string"?(a=t,t=s,s=null):a=arguments[2],A(s)?(o=x.call(s,"c"),r=x.call(s,"e"),n=x.call(s,"w")):(o=n=!0,r=!1),i={value:t,configurable:o,enumerable:r,writable:n},a?l(T(a),i):i};d.gs=function(s,t,o){var r,n,a,i;return typeof s!="string"?(a=o,o=t,t=s,s=null):a=arguments[3],A(t)?k(t)?A(o)?k(o)||(a=o,o=void 0):o=void 0:(a=t,t=o=void 0):t=void 0,A(s)?(r=x.call(s,"c"),n=x.call(s,"e")):(r=!0,n=!1),i={get:t,set:o,configurable:r,enumerable:n},a?l(T(a),i):i}},33064:function($,R,e){function A(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}e.d(R,{j2:function(){return A},Fp:function(){return T},J6:function(){return d},TS:function(){return s},VV:function(){return t},w6:function(){return o},Sm:function(){return r}}),(k=A).length===1&&(l=k,k=function(n,a){return A(l(n),a)});var k,l;function T(n,a){var i,c,h=n.length,f=-1;if(a==null){for(;++f<h;)if((i=n[f])!=null&&i>=i)for(c=i;++f<h;)(i=n[f])!=null&&i>c&&(c=i)}else for(;++f<h;)if((i=a(n[f],f,n))!=null&&i>=i)for(c=i;++f<h;)(i=a(n[f],f,n))!=null&&i>c&&(c=i);return c}function x(n){return n===null?NaN:+n}function d(n,a){var i,c=n.length,h=c,f=-1,b=0;if(a==null)for(;++f<c;)isNaN(i=x(n[f]))?--h:b+=i;else for(;++f<c;)isNaN(i=x(a(n[f],f,n)))?--h:b+=i;if(h)return b/h}function s(n){for(var a,i,c,h=n.length,f=-1,b=0;++f<h;)b+=n[f].length;for(i=new Array(b);--h>=0;)for(a=(c=n[h]).length;--a>=0;)i[--b]=c[a];return i}function t(n,a){var i,c,h=n.length,f=-1;if(a==null){for(;++f<h;)if((i=n[f])!=null&&i>=i)for(c=i;++f<h;)(i=n[f])!=null&&c>i&&(c=i)}else for(;++f<h;)if((i=a(n[f],f,n))!=null&&i>=i)for(c=i;++f<h;)(i=a(n[f],f,n))!=null&&c>i&&(c=i);return c}function o(n,a,i){n=+n,a=+a,i=(h=arguments.length)<2?(a=n,n=0,1):h<3?1:+i;for(var c=-1,h=0|Math.max(0,Math.ceil((a-n)/i)),f=new Array(h);++c<h;)f[c]=n+c*i;return f}function r(n,a){var i,c=n.length,h=-1,f=0;if(a==null)for(;++h<c;)(i=+n[h])&&(f+=i);else for(;++h<c;)(i=+a(n[h],h,n))&&(f+=i);return f}},15140:function($,R,e){e.d(R,{UI:function(){return T},b1:function(){return x}});var A="$";function k(){}function l(a,i){var c=new k;if(a instanceof k)a.each(function(g,y){c.set(y,g)});else if(Array.isArray(a)){var h,f=-1,b=a.length;if(i==null)for(;++f<b;)c.set(f,a[f]);else for(;++f<b;)c.set(i(h=a[f],f,a),h)}else if(a)for(var v in a)c.set(v,a[v]);return c}k.prototype=l.prototype={constructor:k,has:function(a){return A+a in this},get:function(a){return this[A+a]},set:function(a,i){return this[A+a]=i,this},remove:function(a){var i=A+a;return i in this&&delete this[i]},clear:function(){for(var a in this)a[0]===A&&delete this[a]},keys:function(){var a=[];for(var i in this)i[0]===A&&a.push(i.slice(1));return a},values:function(){var a=[];for(var i in this)i[0]===A&&a.push(this[i]);return a},entries:function(){var a=[];for(var i in this)i[0]===A&&a.push({key:i.slice(1),value:this[i]});return a},size:function(){var a=0;for(var i in this)i[0]===A&&++a;return a},empty:function(){for(var a in this)if(a[0]===A)return!1;return!0},each:function(a){for(var i in this)i[0]===A&&a(this[i],i.slice(1),this)}};var T=l;function x(){var a,i,c,h=[],f=[];function b(g,y,p,m){if(y>=h.length)return a!=null&&g.sort(a),i!=null?i(g):g;for(var w,u,S,_=-1,E=g.length,L=h[y++],C=T(),P=p();++_<E;)(S=C.get(w=L(u=g[_])+""))?S.push(u):C.set(w,[u]);return C.each(function(I,U){m(P,U,b(I,y,p,m))}),P}function v(g,y){if(++y>h.length)return g;var p,m=f[y-1];return i!=null&&y>=h.length?p=g.entries():(p=[],g.each(function(w,u){p.push({key:u,values:v(w,y)})})),m!=null?p.sort(function(w,u){return m(w.key,u.key)}):p}return c={object:function(g){return b(g,0,d,s)},map:function(g){return b(g,0,t,o)},entries:function(g){return v(b(g,0,t,o),0)},key:function(g){return h.push(g),c},sortKeys:function(g){return f[h.length-1]=g,c},sortValues:function(g){return a=g,c},rollup:function(g){return i=g,c}}}function d(){return{}}function s(a,i,c){a[i]=c}function t(){return T()}function o(a,i,c){a.set(i,c)}function r(){}var n=T.prototype;r.prototype={constructor:r,has:n.has,add:function(a){return this[A+(a+="")]=a,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49887:function($,R,e){function A(ge,he){var ve;function Ie(){var xe,Ae,Se=ve.length,Te=0,Q=0;for(xe=0;xe<Se;++xe)Te+=(Ae=ve[xe]).x,Q+=Ae.y;for(Te=Te/Se-ge,Q=Q/Se-he,xe=0;xe<Se;++xe)(Ae=ve[xe]).x-=Te,Ae.y-=Q}return ge==null&&(ge=0),he==null&&(he=0),Ie.initialize=function(xe){ve=xe},Ie.x=function(xe){return arguments.length?(ge=+xe,Ie):ge},Ie.y=function(xe){return arguments.length?(he=+xe,Ie):he},Ie}function k(ge){return function(){return ge}}function l(){return 1e-6*(Math.random()-.5)}function T(ge,he,ve,Ie){if(isNaN(he)||isNaN(ve))return ge;var xe,Ae,Se,Te,Q,oe,ce,me,Me,Re=ge._root,Ce={data:Ie},ze=ge._x0,le=ge._y0,de=ge._x1,be=ge._y1;if(!Re)return ge._root=Ce,ge;for(;Re.length;)if((oe=he>=(Ae=(ze+de)/2))?ze=Ae:de=Ae,(ce=ve>=(Se=(le+be)/2))?le=Se:be=Se,xe=Re,!(Re=Re[me=ce<<1|oe]))return xe[me]=Ce,ge;if(Te=+ge._x.call(null,Re.data),Q=+ge._y.call(null,Re.data),he===Te&&ve===Q)return Ce.next=Re,xe?xe[me]=Ce:ge._root=Ce,ge;do xe=xe?xe[me]=new Array(4):ge._root=new Array(4),(oe=he>=(Ae=(ze+de)/2))?ze=Ae:de=Ae,(ce=ve>=(Se=(le+be)/2))?le=Se:be=Se;while((me=ce<<1|oe)==(Me=(Q>=Se)<<1|Te>=Ae));return xe[Me]=Re,xe[me]=Ce,ge}function x(ge,he,ve,Ie,xe){this.node=ge,this.x0=he,this.y0=ve,this.x1=Ie,this.y1=xe}function d(ge){return ge[0]}function s(ge){return ge[1]}function t(ge,he,ve){var Ie=new o(he??d,ve??s,NaN,NaN,NaN,NaN);return ge==null?Ie:Ie.addAll(ge)}function o(ge,he,ve,Ie,xe,Ae){this._x=ge,this._y=he,this._x0=ve,this._y0=Ie,this._x1=xe,this._y1=Ae,this._root=void 0}function r(ge){for(var he={data:ge.data},ve=he;ge=ge.next;)ve=ve.next={data:ge.data};return he}e.r(R),e.d(R,{forceCenter:function(){return A},forceCollide:function(){return c},forceLink:function(){return v},forceManyBody:function(){return ie},forceRadial:function(){return se},forceSimulation:function(){return re},forceX:function(){return fe},forceY:function(){return ye}});var n=t.prototype=o.prototype;function a(ge){return ge.x+ge.vx}function i(ge){return ge.y+ge.vy}function c(ge){var he,ve,Ie=1,xe=1;function Ae(){for(var Q,oe,ce,me,Me,Re,Ce,ze=he.length,le=0;le<xe;++le)for(oe=t(he,a,i).visitAfter(Se),Q=0;Q<ze;++Q)ce=he[Q],Re=ve[ce.index],Ce=Re*Re,me=ce.x+ce.vx,Me=ce.y+ce.vy,oe.visit(de);function de(be,Fe,Ve,He,rt){var tt=be.data,ot=be.r,ht=Re+ot;if(!tt)return Fe>me+ht||He<me-ht||Ve>Me+ht||rt<Me-ht;if(tt.index>ce.index){var _t=me-tt.x-tt.vx,dt=Me-tt.y-tt.vy,bt=_t*_t+dt*dt;bt<ht*ht&&(_t===0&&(bt+=(_t=l())*_t),dt===0&&(bt+=(dt=l())*dt),bt=(ht-(bt=Math.sqrt(bt)))/bt*Ie,ce.vx+=(_t*=bt)*(ht=(ot*=ot)/(Ce+ot)),ce.vy+=(dt*=bt)*ht,tt.vx-=_t*(ht=1-ht),tt.vy-=dt*ht)}}}function Se(Q){if(Q.data)return Q.r=ve[Q.data.index];for(var oe=Q.r=0;oe<4;++oe)Q[oe]&&Q[oe].r>Q.r&&(Q.r=Q[oe].r)}function Te(){if(he){var Q,oe,ce=he.length;for(ve=new Array(ce),Q=0;Q<ce;++Q)oe=he[Q],ve[oe.index]=+ge(oe,Q,he)}}return typeof ge!="function"&&(ge=k(ge==null?1:+ge)),Ae.initialize=function(Q){he=Q,Te()},Ae.iterations=function(Q){return arguments.length?(xe=+Q,Ae):xe},Ae.strength=function(Q){return arguments.length?(Ie=+Q,Ae):Ie},Ae.radius=function(Q){return arguments.length?(ge=typeof Q=="function"?Q:k(+Q),Te(),Ae):ge},Ae}n.copy=function(){var ge,he,ve=new o(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ie=this._root;if(!Ie)return ve;if(!Ie.length)return ve._root=r(Ie),ve;for(ge=[{source:Ie,target:ve._root=new Array(4)}];Ie=ge.pop();)for(var xe=0;xe<4;++xe)(he=Ie.source[xe])&&(he.length?ge.push({source:he,target:Ie.target[xe]=new Array(4)}):Ie.target[xe]=r(he));return ve},n.add=function(ge){var he=+this._x.call(null,ge),ve=+this._y.call(null,ge);return T(this.cover(he,ve),he,ve,ge)},n.addAll=function(ge){var he,ve,Ie,xe,Ae=ge.length,Se=new Array(Ae),Te=new Array(Ae),Q=1/0,oe=1/0,ce=-1/0,me=-1/0;for(ve=0;ve<Ae;++ve)isNaN(Ie=+this._x.call(null,he=ge[ve]))||isNaN(xe=+this._y.call(null,he))||(Se[ve]=Ie,Te[ve]=xe,Ie<Q&&(Q=Ie),Ie>ce&&(ce=Ie),xe<oe&&(oe=xe),xe>me&&(me=xe));if(Q>ce||oe>me)return this;for(this.cover(Q,oe).cover(ce,me),ve=0;ve<Ae;++ve)T(this,Se[ve],Te[ve],ge[ve]);return this},n.cover=function(ge,he){if(isNaN(ge=+ge)||isNaN(he=+he))return this;var ve=this._x0,Ie=this._y0,xe=this._x1,Ae=this._y1;if(isNaN(ve))xe=(ve=Math.floor(ge))+1,Ae=(Ie=Math.floor(he))+1;else{for(var Se,Te,Q=xe-ve,oe=this._root;ve>ge||ge>=xe||Ie>he||he>=Ae;)switch(Te=(he<Ie)<<1|ge<ve,(Se=new Array(4))[Te]=oe,oe=Se,Q*=2,Te){case 0:xe=ve+Q,Ae=Ie+Q;break;case 1:ve=xe-Q,Ae=Ie+Q;break;case 2:xe=ve+Q,Ie=Ae-Q;break;case 3:ve=xe-Q,Ie=Ae-Q}this._root&&this._root.length&&(this._root=oe)}return this._x0=ve,this._y0=Ie,this._x1=xe,this._y1=Ae,this},n.data=function(){var ge=[];return this.visit(function(he){if(!he.length)do ge.push(he.data);while(he=he.next)}),ge},n.extent=function(ge){return arguments.length?this.cover(+ge[0][0],+ge[0][1]).cover(+ge[1][0],+ge[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(ge,he,ve){var Ie,xe,Ae,Se,Te,Q,oe,ce=this._x0,me=this._y0,Me=this._x1,Re=this._y1,Ce=[],ze=this._root;for(ze&&Ce.push(new x(ze,ce,me,Me,Re)),ve==null?ve=1/0:(ce=ge-ve,me=he-ve,Me=ge+ve,Re=he+ve,ve*=ve);Q=Ce.pop();)if(!(!(ze=Q.node)||(xe=Q.x0)>Me||(Ae=Q.y0)>Re||(Se=Q.x1)<ce||(Te=Q.y1)<me))if(ze.length){var le=(xe+Se)/2,de=(Ae+Te)/2;Ce.push(new x(ze[3],le,de,Se,Te),new x(ze[2],xe,de,le,Te),new x(ze[1],le,Ae,Se,de),new x(ze[0],xe,Ae,le,de)),(oe=(he>=de)<<1|ge>=le)&&(Q=Ce[Ce.length-1],Ce[Ce.length-1]=Ce[Ce.length-1-oe],Ce[Ce.length-1-oe]=Q)}else{var be=ge-+this._x.call(null,ze.data),Fe=he-+this._y.call(null,ze.data),Ve=be*be+Fe*Fe;if(Ve<ve){var He=Math.sqrt(ve=Ve);ce=ge-He,me=he-He,Me=ge+He,Re=he+He,Ie=ze.data}}return Ie},n.remove=function(ge){if(isNaN(Ae=+this._x.call(null,ge))||isNaN(Se=+this._y.call(null,ge)))return this;var he,ve,Ie,xe,Ae,Se,Te,Q,oe,ce,me,Me,Re=this._root,Ce=this._x0,ze=this._y0,le=this._x1,de=this._y1;if(!Re)return this;if(Re.length)for(;;){if((oe=Ae>=(Te=(Ce+le)/2))?Ce=Te:le=Te,(ce=Se>=(Q=(ze+de)/2))?ze=Q:de=Q,he=Re,!(Re=Re[me=ce<<1|oe]))return this;if(!Re.length)break;(he[me+1&3]||he[me+2&3]||he[me+3&3])&&(ve=he,Me=me)}for(;Re.data!==ge;)if(Ie=Re,!(Re=Re.next))return this;return(xe=Re.next)&&delete Re.next,Ie?(xe?Ie.next=xe:delete Ie.next,this):he?(xe?he[me]=xe:delete he[me],(Re=he[0]||he[1]||he[2]||he[3])&&Re===(he[3]||he[2]||he[1]||he[0])&&!Re.length&&(ve?ve[Me]=Re:this._root=Re),this):(this._root=xe,this)},n.removeAll=function(ge){for(var he=0,ve=ge.length;he<ve;++he)this.remove(ge[he]);return this},n.root=function(){return this._root},n.size=function(){var ge=0;return this.visit(function(he){if(!he.length)do++ge;while(he=he.next)}),ge},n.visit=function(ge){var he,ve,Ie,xe,Ae,Se,Te=[],Q=this._root;for(Q&&Te.push(new x(Q,this._x0,this._y0,this._x1,this._y1));he=Te.pop();)if(!ge(Q=he.node,Ie=he.x0,xe=he.y0,Ae=he.x1,Se=he.y1)&&Q.length){var oe=(Ie+Ae)/2,ce=(xe+Se)/2;(ve=Q[3])&&Te.push(new x(ve,oe,ce,Ae,Se)),(ve=Q[2])&&Te.push(new x(ve,Ie,ce,oe,Se)),(ve=Q[1])&&Te.push(new x(ve,oe,xe,Ae,ce)),(ve=Q[0])&&Te.push(new x(ve,Ie,xe,oe,ce))}return this},n.visitAfter=function(ge){var he,ve=[],Ie=[];for(this._root&&ve.push(new x(this._root,this._x0,this._y0,this._x1,this._y1));he=ve.pop();){var xe=he.node;if(xe.length){var Ae,Se=he.x0,Te=he.y0,Q=he.x1,oe=he.y1,ce=(Se+Q)/2,me=(Te+oe)/2;(Ae=xe[0])&&ve.push(new x(Ae,Se,Te,ce,me)),(Ae=xe[1])&&ve.push(new x(Ae,ce,Te,Q,me)),(Ae=xe[2])&&ve.push(new x(Ae,Se,me,ce,oe)),(Ae=xe[3])&&ve.push(new x(Ae,ce,me,Q,oe))}Ie.push(he)}for(;he=Ie.pop();)ge(he.node,he.x0,he.y0,he.x1,he.y1);return this},n.x=function(ge){return arguments.length?(this._x=ge,this):this._x},n.y=function(ge){return arguments.length?(this._y=ge,this):this._y};var h=e(15140);function f(ge){return ge.index}function b(ge,he){var ve=ge.get(he);if(!ve)throw new Error("missing: "+he);return ve}function v(ge){var he,ve,Ie,xe,Ae,Se=f,Te=function(Ce){return 1/Math.min(xe[Ce.source.index],xe[Ce.target.index])},Q=k(30),oe=1;function ce(Ce){for(var ze=0,le=ge.length;ze<oe;++ze)for(var de,be,Fe,Ve,He,rt,tt,ot=0;ot<le;++ot)be=(de=ge[ot]).source,Ve=(Fe=de.target).x+Fe.vx-be.x-be.vx||l(),He=Fe.y+Fe.vy-be.y-be.vy||l(),Ve*=rt=((rt=Math.sqrt(Ve*Ve+He*He))-ve[ot])/rt*Ce*he[ot],He*=rt,Fe.vx-=Ve*(tt=Ae[ot]),Fe.vy-=He*tt,be.vx+=Ve*(tt=1-tt),be.vy+=He*tt}function me(){if(Ie){var Ce,ze,le=Ie.length,de=ge.length,be=(0,h.UI)(Ie,Se);for(Ce=0,xe=new Array(le);Ce<de;++Ce)(ze=ge[Ce]).index=Ce,typeof ze.source!="object"&&(ze.source=b(be,ze.source)),typeof ze.target!="object"&&(ze.target=b(be,ze.target)),xe[ze.source.index]=(xe[ze.source.index]||0)+1,xe[ze.target.index]=(xe[ze.target.index]||0)+1;for(Ce=0,Ae=new Array(de);Ce<de;++Ce)ze=ge[Ce],Ae[Ce]=xe[ze.source.index]/(xe[ze.source.index]+xe[ze.target.index]);he=new Array(de),Me(),ve=new Array(de),Re()}}function Me(){if(Ie)for(var Ce=0,ze=ge.length;Ce<ze;++Ce)he[Ce]=+Te(ge[Ce],Ce,ge)}function Re(){if(Ie)for(var Ce=0,ze=ge.length;Ce<ze;++Ce)ve[Ce]=+Q(ge[Ce],Ce,ge)}return ge==null&&(ge=[]),ce.initialize=function(Ce){Ie=Ce,me()},ce.links=function(Ce){return arguments.length?(ge=Ce,me(),ce):ge},ce.id=function(Ce){return arguments.length?(Se=Ce,ce):Se},ce.iterations=function(Ce){return arguments.length?(oe=+Ce,ce):oe},ce.strength=function(Ce){return arguments.length?(Te=typeof Ce=="function"?Ce:k(+Ce),Me(),ce):Te},ce.distance=function(Ce){return arguments.length?(Q=typeof Ce=="function"?Ce:k(+Ce),Re(),ce):Q},ce}var g={value:function(){}};function y(){for(var ge,he=0,ve=arguments.length,Ie={};he<ve;++he){if(!(ge=arguments[he]+"")||ge in Ie||/[\s.]/.test(ge))throw new Error("illegal type: "+ge);Ie[ge]=[]}return new p(Ie)}function p(ge){this._=ge}function m(ge,he){return ge.trim().split(/^|\s+/).map(function(ve){var Ie="",xe=ve.indexOf(".");if(xe>=0&&(Ie=ve.slice(xe+1),ve=ve.slice(0,xe)),ve&&!he.hasOwnProperty(ve))throw new Error("unknown type: "+ve);return{type:ve,name:Ie}})}function w(ge,he){for(var ve,Ie=0,xe=ge.length;Ie<xe;++Ie)if((ve=ge[Ie]).name===he)return ve.value}function u(ge,he,ve){for(var Ie=0,xe=ge.length;Ie<xe;++Ie)if(ge[Ie].name===he){ge[Ie]=g,ge=ge.slice(0,Ie).concat(ge.slice(Ie+1));break}return ve!=null&&ge.push({name:he,value:ve}),ge}p.prototype=y.prototype={constructor:p,on:function(ge,he){var ve,Ie=this._,xe=m(ge+"",Ie),Ae=-1,Se=xe.length;if(!(arguments.length<2)){if(he!=null&&typeof he!="function")throw new Error("invalid callback: "+he);for(;++Ae<Se;)if(ve=(ge=xe[Ae]).type)Ie[ve]=u(Ie[ve],ge.name,he);else if(he==null)for(ve in Ie)Ie[ve]=u(Ie[ve],ge.name,null);return this}for(;++Ae<Se;)if((ve=(ge=xe[Ae]).type)&&(ve=w(Ie[ve],ge.name)))return ve},copy:function(){var ge={},he=this._;for(var ve in he)ge[ve]=he[ve].slice();return new p(ge)},call:function(ge,he){if((ve=arguments.length-2)>0)for(var ve,Ie,xe=new Array(ve),Ae=0;Ae<ve;++Ae)xe[Ae]=arguments[Ae+2];if(!this._.hasOwnProperty(ge))throw new Error("unknown type: "+ge);for(Ae=0,ve=(Ie=this._[ge]).length;Ae<ve;++Ae)Ie[Ae].value.apply(he,xe)},apply:function(ge,he,ve){if(!this._.hasOwnProperty(ge))throw new Error("unknown type: "+ge);for(var Ie=this._[ge],xe=0,Ae=Ie.length;xe<Ae;++xe)Ie[xe].value.apply(he,ve)}};var S,_,E=y,L=0,C=0,P=0,I=0,U=0,z=0,H=typeof performance=="object"&&performance.now?performance:Date,F=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ge){setTimeout(ge,17)};function N(){return U||(F(B),U=H.now()+z)}function B(){U=0}function j(){this._call=this._time=this._next=null}function K(ge,he,ve){var Ie=new j;return Ie.restart(ge,he,ve),Ie}function G(){U=(I=H.now())+z,L=C=0;try{(function(){N(),++L;for(var ge,he=S;he;)(ge=U-he._time)>=0&&he._call.call(null,ge),he=he._next;--L})()}finally{L=0,function(){for(var ge,he,ve=S,Ie=1/0;ve;)ve._call?(Ie>ve._time&&(Ie=ve._time),ge=ve,ve=ve._next):(he=ve._next,ve._next=null,ve=ge?ge._next=he:S=he);_=ge,W(Ie)}(),U=0}}function V(){var ge=H.now(),he=ge-I;he>1e3&&(z-=he,I=ge)}function W(ge){L||(C&&(C=clearTimeout(C)),ge-U>24?(ge<1/0&&(C=setTimeout(G,ge-H.now()-z)),P&&(P=clearInterval(P))):(P||(I=H.now(),P=setInterval(V,1e3)),L=1,F(G)))}function J(ge){return ge.x}function X(ge){return ge.y}j.prototype=K.prototype={constructor:j,restart:function(ge,he,ve){if(typeof ge!="function")throw new TypeError("callback is not a function");ve=(ve==null?N():+ve)+(he==null?0:+he),this._next||_===this||(_?_._next=this:S=this,_=this),this._call=ge,this._time=ve,W()},stop:function(){this._call&&(this._call=null,this._time=1/0,W())}};var ee=Math.PI*(3-Math.sqrt(5));function re(ge){var he,ve=1,Ie=.001,xe=1-Math.pow(Ie,1/300),Ae=0,Se=.6,Te=(0,h.UI)(),Q=K(ce),oe=E("tick","end");function ce(){me(),oe.call("tick",he),ve<Ie&&(Q.stop(),oe.call("end",he))}function me(Ce){var ze,le,de=ge.length;Ce===void 0&&(Ce=1);for(var be=0;be<Ce;++be)for(ve+=(Ae-ve)*xe,Te.each(function(Fe){Fe(ve)}),ze=0;ze<de;++ze)(le=ge[ze]).fx==null?le.x+=le.vx*=Se:(le.x=le.fx,le.vx=0),le.fy==null?le.y+=le.vy*=Se:(le.y=le.fy,le.vy=0);return he}function Me(){for(var Ce,ze=0,le=ge.length;ze<le;++ze){if((Ce=ge[ze]).index=ze,Ce.fx!=null&&(Ce.x=Ce.fx),Ce.fy!=null&&(Ce.y=Ce.fy),isNaN(Ce.x)||isNaN(Ce.y)){var de=10*Math.sqrt(ze),be=ze*ee;Ce.x=de*Math.cos(be),Ce.y=de*Math.sin(be)}(isNaN(Ce.vx)||isNaN(Ce.vy))&&(Ce.vx=Ce.vy=0)}}function Re(Ce){return Ce.initialize&&Ce.initialize(ge),Ce}return ge==null&&(ge=[]),Me(),he={tick:me,restart:function(){return Q.restart(ce),he},stop:function(){return Q.stop(),he},nodes:function(Ce){return arguments.length?(ge=Ce,Me(),Te.each(Re),he):ge},alpha:function(Ce){return arguments.length?(ve=+Ce,he):ve},alphaMin:function(Ce){return arguments.length?(Ie=+Ce,he):Ie},alphaDecay:function(Ce){return arguments.length?(xe=+Ce,he):+xe},alphaTarget:function(Ce){return arguments.length?(Ae=+Ce,he):Ae},velocityDecay:function(Ce){return arguments.length?(Se=1-Ce,he):1-Se},force:function(Ce,ze){return arguments.length>1?(ze==null?Te.remove(Ce):Te.set(Ce,Re(ze)),he):Te.get(Ce)},find:function(Ce,ze,le){var de,be,Fe,Ve,He,rt=0,tt=ge.length;for(le==null?le=1/0:le*=le,rt=0;rt<tt;++rt)(Fe=(de=Ce-(Ve=ge[rt]).x)*de+(be=ze-Ve.y)*be)<le&&(He=Ve,le=Fe);return He},on:function(Ce,ze){return arguments.length>1?(oe.on(Ce,ze),he):oe.on(Ce)}}}function ie(){var ge,he,ve,Ie,xe=k(-30),Ae=1,Se=1/0,Te=.81;function Q(Me){var Re,Ce=ge.length,ze=t(ge,J,X).visitAfter(ce);for(ve=Me,Re=0;Re<Ce;++Re)he=ge[Re],ze.visit(me)}function oe(){if(ge){var Me,Re,Ce=ge.length;for(Ie=new Array(Ce),Me=0;Me<Ce;++Me)Re=ge[Me],Ie[Re.index]=+xe(Re,Me,ge)}}function ce(Me){var Re,Ce,ze,le,de,be=0,Fe=0;if(Me.length){for(ze=le=de=0;de<4;++de)(Re=Me[de])&&(Ce=Math.abs(Re.value))&&(be+=Re.value,Fe+=Ce,ze+=Ce*Re.x,le+=Ce*Re.y);Me.x=ze/Fe,Me.y=le/Fe}else{(Re=Me).x=Re.data.x,Re.y=Re.data.y;do be+=Ie[Re.data.index];while(Re=Re.next)}Me.value=be}function me(Me,Re,Ce,ze){if(!Me.value)return!0;var le=Me.x-he.x,de=Me.y-he.y,be=ze-Re,Fe=le*le+de*de;if(be*be/Te<Fe)return Fe<Se&&(le===0&&(Fe+=(le=l())*le),de===0&&(Fe+=(de=l())*de),Fe<Ae&&(Fe=Math.sqrt(Ae*Fe)),he.vx+=le*Me.value*ve/Fe,he.vy+=de*Me.value*ve/Fe),!0;if(!(Me.length||Fe>=Se)){(Me.data!==he||Me.next)&&(le===0&&(Fe+=(le=l())*le),de===0&&(Fe+=(de=l())*de),Fe<Ae&&(Fe=Math.sqrt(Ae*Fe)));do Me.data!==he&&(be=Ie[Me.data.index]*ve/Fe,he.vx+=le*be,he.vy+=de*be);while(Me=Me.next)}}return Q.initialize=function(Me){ge=Me,oe()},Q.strength=function(Me){return arguments.length?(xe=typeof Me=="function"?Me:k(+Me),oe(),Q):xe},Q.distanceMin=function(Me){return arguments.length?(Ae=Me*Me,Q):Math.sqrt(Ae)},Q.distanceMax=function(Me){return arguments.length?(Se=Me*Me,Q):Math.sqrt(Se)},Q.theta=function(Me){return arguments.length?(Te=Me*Me,Q):Math.sqrt(Te)},Q}function se(ge,he,ve){var Ie,xe,Ae,Se=k(.1);function Te(oe){for(var ce=0,me=Ie.length;ce<me;++ce){var Me=Ie[ce],Re=Me.x-he||1e-6,Ce=Me.y-ve||1e-6,ze=Math.sqrt(Re*Re+Ce*Ce),le=(Ae[ce]-ze)*xe[ce]*oe/ze;Me.vx+=Re*le,Me.vy+=Ce*le}}function Q(){if(Ie){var oe,ce=Ie.length;for(xe=new Array(ce),Ae=new Array(ce),oe=0;oe<ce;++oe)Ae[oe]=+ge(Ie[oe],oe,Ie),xe[oe]=isNaN(Ae[oe])?0:+Se(Ie[oe],oe,Ie)}}return typeof ge!="function"&&(ge=k(+ge)),he==null&&(he=0),ve==null&&(ve=0),Te.initialize=function(oe){Ie=oe,Q()},Te.strength=function(oe){return arguments.length?(Se=typeof oe=="function"?oe:k(+oe),Q(),Te):Se},Te.radius=function(oe){return arguments.length?(ge=typeof oe=="function"?oe:k(+oe),Q(),Te):ge},Te.x=function(oe){return arguments.length?(he=+oe,Te):he},Te.y=function(oe){return arguments.length?(ve=+oe,Te):ve},Te}function fe(ge){var he,ve,Ie,xe=k(.1);function Ae(Te){for(var Q,oe=0,ce=he.length;oe<ce;++oe)(Q=he[oe]).vx+=(Ie[oe]-Q.x)*ve[oe]*Te}function Se(){if(he){var Te,Q=he.length;for(ve=new Array(Q),Ie=new Array(Q),Te=0;Te<Q;++Te)ve[Te]=isNaN(Ie[Te]=+ge(he[Te],Te,he))?0:+xe(he[Te],Te,he)}}return typeof ge!="function"&&(ge=k(ge==null?0:+ge)),Ae.initialize=function(Te){he=Te,Se()},Ae.strength=function(Te){return arguments.length?(xe=typeof Te=="function"?Te:k(+Te),Se(),Ae):xe},Ae.x=function(Te){return arguments.length?(ge=typeof Te=="function"?Te:k(+Te),Se(),Ae):ge},Ae}function ye(ge){var he,ve,Ie,xe=k(.1);function Ae(Te){for(var Q,oe=0,ce=he.length;oe<ce;++oe)(Q=he[oe]).vy+=(Ie[oe]-Q.y)*ve[oe]*Te}function Se(){if(he){var Te,Q=he.length;for(ve=new Array(Q),Ie=new Array(Q),Te=0;Te<Q;++Te)ve[Te]=isNaN(Ie[Te]=+ge(he[Te],Te,he))?0:+xe(he[Te],Te,he)}}return typeof ge!="function"&&(ge=k(ge==null?0:+ge)),Ae.initialize=function(Te){he=Te,Se()},Ae.strength=function(Te){return arguments.length?(xe=typeof Te=="function"?Te:k(+Te),Se(),Ae):xe},Ae.y=function(Te){return arguments.length?(ge=typeof Te=="function"?Te:k(+Te),Se(),Ae):ge},Ae}},60721:function($,R,e){function A(c,h){if((f=(c=h?c.toExponential(h-1):c.toExponential()).indexOf("e"))<0)return null;var f,b=c.slice(0,f);return[b.length>1?b[0]+b.slice(2):b,+c.slice(f+1)]}e.d(R,{WU:function(){return r},FF:function(){return i}});var k,l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(c){if(!(h=l.exec(c)))throw new Error("invalid format: "+c);var h;return new x({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function x(c){this.fill=c.fill===void 0?" ":c.fill+"",this.align=c.align===void 0?">":c.align+"",this.sign=c.sign===void 0?"-":c.sign+"",this.symbol=c.symbol===void 0?"":c.symbol+"",this.zero=!!c.zero,this.width=c.width===void 0?void 0:+c.width,this.comma=!!c.comma,this.precision=c.precision===void 0?void 0:+c.precision,this.trim=!!c.trim,this.type=c.type===void 0?"":c.type+""}function d(c,h){var f=A(c,h);if(!f)return c+"";var b=f[0],v=f[1];return v<0?"0."+new Array(-v).join("0")+b:b.length>v+1?b.slice(0,v+1)+"."+b.slice(v+1):b+new Array(v-b.length+2).join("0")}T.prototype=x.prototype,x.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(c,h){return(100*c).toFixed(h)},b:function(c){return Math.round(c).toString(2)},c:function(c){return c+""},d:function(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)},e:function(c,h){return c.toExponential(h)},f:function(c,h){return c.toFixed(h)},g:function(c,h){return c.toPrecision(h)},o:function(c){return Math.round(c).toString(8)},p:function(c,h){return d(100*c,h)},r:d,s:function(c,h){var f=A(c,h);if(!f)return c+"";var b=f[0],v=f[1],g=v-(k=3*Math.max(-8,Math.min(8,Math.floor(v/3))))+1,y=b.length;return g===y?b:g>y?b+new Array(g-y+1).join("0"):g>0?b.slice(0,g)+"."+b.slice(g):"0."+new Array(1-g).join("0")+A(c,Math.max(0,h+g-1))[0]},X:function(c){return Math.round(c).toString(16).toUpperCase()},x:function(c){return Math.round(c).toString(16)}};function t(c){return c}var o,r,n=Array.prototype.map,a=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function i(c){var h,f,b=c.grouping===void 0||c.thousands===void 0?t:(h=n.call(c.grouping,Number),f=c.thousands+"",function(_,E){for(var L=_.length,C=[],P=0,I=h[0],U=0;L>0&&I>0&&(U+I+1>E&&(I=Math.max(1,E-U)),C.push(_.substring(L-=I,L+I)),!((U+=I+1)>E));)I=h[P=(P+1)%h.length];return C.reverse().join(f)}),v=c.currency===void 0?"":c.currency[0]+"",g=c.currency===void 0?"":c.currency[1]+"",y=c.decimal===void 0?".":c.decimal+"",p=c.numerals===void 0?t:function(_){return function(E){return E.replace(/[0-9]/g,function(L){return _[+L]})}}(n.call(c.numerals,String)),m=c.percent===void 0?"%":c.percent+"",w=c.minus===void 0?"-":c.minus+"",u=c.nan===void 0?"NaN":c.nan+"";function S(_){var E=(_=T(_)).fill,L=_.align,C=_.sign,P=_.symbol,I=_.zero,U=_.width,z=_.comma,H=_.precision,F=_.trim,N=_.type;N==="n"?(z=!0,N="g"):s[N]||(H===void 0&&(H=12),F=!0,N="g"),(I||E==="0"&&L==="=")&&(I=!0,E="0",L="=");var B=P==="$"?v:P==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",j=P==="$"?g:/[%p]/.test(N)?m:"",K=s[N],G=/[defgprs%]/.test(N);function V(W){var J,X,ee,re=B,ie=j;if(N==="c")ie=K(W)+ie,W="";else{var se=(W=+W)<0||1/W<0;if(W=isNaN(W)?u:K(Math.abs(W),H),F&&(W=function(ge){e:for(var he,ve=ge.length,Ie=1,xe=-1;Ie<ve;++Ie)switch(ge[Ie]){case".":xe=he=Ie;break;case"0":xe===0&&(xe=Ie),he=Ie;break;default:if(!+ge[Ie])break e;xe>0&&(xe=0)}return xe>0?ge.slice(0,xe)+ge.slice(he+1):ge}(W)),se&&+W==0&&C!=="+"&&(se=!1),re=(se?C==="("?C:w:C==="-"||C==="("?"":C)+re,ie=(N==="s"?a[8+k/3]:"")+ie+(se&&C==="("?")":""),G){for(J=-1,X=W.length;++J<X;)if(48>(ee=W.charCodeAt(J))||ee>57){ie=(ee===46?y+W.slice(J+1):W.slice(J))+ie,W=W.slice(0,J);break}}}z&&!I&&(W=b(W,1/0));var fe=re.length+W.length+ie.length,ye=fe<U?new Array(U-fe+1).join(E):"";switch(z&&I&&(W=b(ye+W,ye.length?U-ie.length:1/0),ye=""),L){case"<":W=re+W+ie+ye;break;case"=":W=re+ye+W+ie;break;case"^":W=ye.slice(0,fe=ye.length>>1)+re+W+ie+ye.slice(fe);break;default:W=ye+re+W+ie}return p(W)}return H=H===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H)),V.toString=function(){return _+""},V}return{format:S,formatPrefix:function(_,E){var L,C=S(((_=T(_)).type="f",_)),P=3*Math.max(-8,Math.min(8,Math.floor((L=E,((L=A(Math.abs(L)))?L[1]:NaN)/3)))),I=Math.pow(10,-P),U=a[8+P/3];return function(z){return C(I*z)+U}}}}o=i({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=o.format,o.formatPrefix},65704:function($,R,e){e.r(R),e.d(R,{geoAiry:function(){return z},geoAiryRaw:function(){return U},geoAitoff:function(){return F},geoAitoffRaw:function(){return H},geoArmadillo:function(){return B},geoArmadilloRaw:function(){return N},geoAugust:function(){return K},geoAugustRaw:function(){return j},geoBaker:function(){return J},geoBakerRaw:function(){return W},geoBerghaus:function(){return re},geoBerghausRaw:function(){return ee},geoBertin1953:function(){return Ie},geoBertin1953Raw:function(){return ve},geoBoggs:function(){return me},geoBoggsRaw:function(){return ce},geoBonne:function(){return le},geoBonneRaw:function(){return ze},geoBottomley:function(){return be},geoBottomleyRaw:function(){return de},geoBromley:function(){return Ve},geoBromleyRaw:function(){return Fe},geoChamberlin:function(){return St},geoChamberlinAfrica:function(){return bt},geoChamberlinRaw:function(){return _t},geoCollignon:function(){return zt},geoCollignonRaw:function(){return Et},geoCraig:function(){return Pt},geoCraigRaw:function(){return Ut},geoCraster:function(){return Be},geoCrasterRaw:function(){return Ye},geoCylindricalEqualArea:function(){return Pe},geoCylindricalEqualAreaRaw:function(){return ke},geoCylindricalStereographic:function(){return Xe},geoCylindricalStereographicRaw:function(){return qe},geoEckert1:function(){return ut},geoEckert1Raw:function(){return nt},geoEckert2:function(){return Ct},geoEckert2Raw:function(){return ct},geoEckert3:function(){return Mt},geoEckert3Raw:function(){return Lt},geoEckert4:function(){return kt},geoEckert4Raw:function(){return mt},geoEckert5:function(){return Ot},geoEckert5Raw:function(){return wt},geoEckert6:function(){return Nt},geoEckert6Raw:function(){return It},geoEisenlohr:function(){return Xt},geoEisenlohrRaw:function(){return qt},geoFahey:function(){return Kt},geoFaheyRaw:function(){return yn},geoFoucaut:function(){return Un},geoFoucautRaw:function(){return Mn},geoFoucautSinusoidal:function(){return dn},geoFoucautSinusoidalRaw:function(){return xn},geoGilbert:function(){return En},geoGingery:function(){return nr},geoGingeryRaw:function(){return Dn},geoGinzburg4:function(){return dr},geoGinzburg4Raw:function(){return mr},geoGinzburg5:function(){return Vn},geoGinzburg5Raw:function(){return Yn},geoGinzburg6:function(){return Gt},geoGinzburg6Raw:function(){return ur},geoGinzburg8:function(){return In},geoGinzburg8Raw:function(){return tn},geoGinzburg9:function(){return Sn},geoGinzburg9Raw:function(){return _n},geoGringorten:function(){return ar},geoGringortenQuincuncial:function(){return Os},geoGringortenRaw:function(){return qn},geoGuyou:function(){return Rt},geoGuyouRaw:function(){return An},geoHammer:function(){return ye},geoHammerRaw:function(){return se},geoHammerRetroazimuthal:function(){return ln},geoHammerRetroazimuthalRaw:function(){return rn},geoHealpix:function(){return Hn},geoHealpixRaw:function(){return fn},geoHill:function(){return rr},geoHillRaw:function(){return Qn},geoHomolosine:function(){return Ur},geoHomolosineRaw:function(){return Tr},geoHufnagel:function(){return lr},geoHufnagelRaw:function(){return Sr},geoHyperelliptical:function(){return Mi},geoHyperellipticalRaw:function(){return li},geoInterrupt:function(){return vi},geoInterruptedBoggs:function(){return no},geoInterruptedHomolosine:function(){return Wo},geoInterruptedMollweide:function(){return Hs},geoInterruptedMollweideHemispheres:function(){return Ta},geoInterruptedQuarticAuthalic:function(){return Do},geoInterruptedSinuMollweide:function(){return zi},geoInterruptedSinusoidal:function(){return ma},geoKavrayskiy7:function(){return mo},geoKavrayskiy7Raw:function(){return ka},geoLagrange:function(){return yo},geoLagrangeRaw:function(){return Qr},geoLarrivee:function(){return Xa},geoLarriveeRaw:function(){return Ua},geoLaskowski:function(){return sl},geoLaskowskiRaw:function(){return cs},geoLittrow:function(){return ll},geoLittrowRaw:function(){return ro},geoLoximuthal:function(){return yl},geoLoximuthalRaw:function(){return ul},geoMiller:function(){return cl},geoMillerRaw:function(){return Gs},geoModifiedStereographic:function(){return Io},geoModifiedStereographicAlaska:function(){return Ys},geoModifiedStereographicGs48:function(){return Oo},geoModifiedStereographicGs50:function(){return Es},geoModifiedStereographicLee:function(){return Jo},geoModifiedStereographicMiller:function(){return xo},geoModifiedStereographicRaw:function(){return Zs},geoMollweide:function(){return Te},geoMollweideRaw:function(){return Se},geoMtFlatPolarParabolic:function(){return xl},geoMtFlatPolarParabolicRaw:function(){return bo},geoMtFlatPolarQuartic:function(){return fs},geoMtFlatPolarQuarticRaw:function(){return Ls},geoMtFlatPolarSinusoidal:function(){return Ko},geoMtFlatPolarSinusoidalRaw:function(){return Ro},geoNaturalEarth:function(){return Pa.Z},geoNaturalEarth2:function(){return hs},geoNaturalEarth2Raw:function(){return Xs},geoNaturalEarthRaw:function(){return Pa.K},geoNellHammer:function(){return ps},geoNellHammerRaw:function(){return $o},geoNicolosi:function(){return ds},geoNicolosiRaw:function(){return Qo},geoPatterson:function(){return Cs},geoPattersonRaw:function(){return _o},geoPeirceQuincuncial:function(){return Is},geoPierceQuincuncial:function(){return Is},geoPolyconic:function(){return Ks},geoPolyconicRaw:function(){return ys},geoPolyhedral:function(){return wo},geoPolyhedralButterfly:function(){return Ps},geoPolyhedralCollignon:function(){return Qs},geoPolyhedralWaterman:function(){return jo},geoProject:function(){return Vo},geoQuantize:function(){return ia},geoQuincuncial:function(){return ya},geoRectangularPolyconic:function(){return Ho},geoRectangularPolyconicRaw:function(){return br},geoRobinson:function(){return ts},geoRobinsonRaw:function(){return Rs},geoSatellite:function(){return rs},geoSatelliteRaw:function(){return ns},geoSinuMollweide:function(){return gr},geoSinuMollweideRaw:function(){return ir},geoSinusoidal:function(){return Ce},geoSinusoidalRaw:function(){return Re},geoStitch:function(){return Go},geoTimes:function(){return Da},geoTimesRaw:function(){return Ji},geoTwoPointAzimuthal:function(){return Fa},geoTwoPointAzimuthalRaw:function(){return _s},geoTwoPointAzimuthalUsa:function(){return Aa},geoTwoPointEquidistant:function(){return ni},geoTwoPointEquidistantRaw:function(){return $a},geoTwoPointEquidistantUsa:function(){return ua},geoVanDerGrinten:function(){return Ha},geoVanDerGrinten2:function(){return Qa},geoVanDerGrinten2Raw:function(){return ca},geoVanDerGrinten3:function(){return fo},geoVanDerGrinten3Raw:function(){return Mo},geoVanDerGrinten4:function(){return Ba},geoVanDerGrinten4Raw:function(){return Ki},geoVanDerGrintenRaw:function(){return Vi},geoWagner:function(){return Or},geoWagner4:function(){return Ds},geoWagner4Raw:function(){return $i},geoWagner6:function(){return os},geoWagner6Raw:function(){return fa},geoWagner7:function(){return as},geoWagnerRaw:function(){return Mr},geoWiechel:function(){return oi},geoWiechelRaw:function(){return po},geoWinkel3:function(){return Fs},geoWinkel3Raw:function(){return fi}});var A=e(15002),k=Math.abs,l=Math.atan,T=Math.atan2,x=Math.cos,d=Math.exp,s=Math.floor,t=Math.log,o=Math.max,r=Math.min,n=Math.pow,a=Math.round,i=Math.sign||function(Je){return Je>0?1:Je<0?-1:0},c=Math.sin,h=Math.tan,f=1e-6,b=1e-12,v=Math.PI,g=v/2,y=v/4,p=Math.SQRT1_2,m=C(2),w=C(v),u=2*v,S=180/v,_=v/180;function E(Je){return Je>1?g:Je<-1?-g:Math.asin(Je)}function L(Je){return Je>1?0:Je<-1?v:Math.acos(Je)}function C(Je){return Je>0?Math.sqrt(Je):0}function P(Je){return(d(Je)-d(-Je))/2}function I(Je){return(d(Je)+d(-Je))/2}function U(Je){var $e=h(Je/2),at=2*t(x(Je/2))/($e*$e);function ft(yt,gt){var D=x(yt),Y=x(gt),q=c(gt),ne=Y*D,pe=-((1-ne?t((1+ne)/2)/(1-ne):-.5)+at/(1+ne));return[pe*Y*c(yt),pe*q]}return ft.invert=function(yt,gt){var D,Y=C(yt*yt+gt*gt),q=-Je/2,ne=50;if(!Y)return[0,0];do{var pe=q/2,Le=x(pe),Ne=c(pe),Ge=Ne/Le,et=-t(k(Le));q-=D=(2/Ge*et-at*Ge-Y)/(-et/(Ne*Ne)+1-at/(2*Le*Le))*(Le<0?.7:1)}while(k(D)>f&&--ne>0);var pt=c(q);return[T(yt*pt,Y*x(q)),E(gt*pt/Y)]},ft}function z(){var Je=g,$e=(0,A.r)(U),at=$e(Je);return at.radius=function(ft){return arguments.length?$e(Je=ft*_):Je*S},at.scale(179.976).clipAngle(147)}function H(Je,$e){var at=x($e),ft=function(yt){return yt?yt/Math.sin(yt):1}(L(at*x(Je/=2)));return[2*at*c(Je)*ft,c($e)*ft]}function F(){return(0,A.Z)(H).scale(152.63)}function N(Je){var $e=c(Je),at=x(Je),ft=Je>=0?1:-1,yt=h(ft*Je),gt=(1+$e-at)/2;function D(Y,q){var ne=x(q),pe=x(Y/=2);return[(1+ne)*c(Y),(ft*q>-T(pe,yt)-.001?0:10*-ft)+gt+c(q)*at-(1+ne)*$e*pe]}return D.invert=function(Y,q){var ne=0,pe=0,Le=50;do{var Ne=x(ne),Ge=c(ne),et=x(pe),pt=c(pe),vt=1+et,te=vt*Ge-Y,ue=gt+pt*at-vt*$e*Ne-q,we=vt*Ne/2,Oe=-Ge*pt,De=$e*vt*Ge/2,Ue=at*et+$e*Ne*pt,We=Oe*De-Ue*we,Ke=(ue*Oe-te*Ue)/We/2,it=(te*De-ue*we)/We;k(it)>2&&(it/=2),ne-=Ke,pe-=it}while((k(Ke)>f||k(it)>f)&&--Le>0);return ft*pe>-T(x(ne),yt)-.001?[2*ne,pe]:null},D}function B(){var Je=20*_,$e=Je>=0?1:-1,at=h($e*Je),ft=(0,A.r)(N),yt=ft(Je),gt=yt.stream;return yt.parallel=function(D){return arguments.length?(at=h(($e=(Je=D*_)>=0?1:-1)*Je),ft(Je)):Je*S},yt.stream=function(D){var Y=yt.rotate(),q=gt(D),ne=(yt.rotate([0,0]),gt(D)),pe=yt.precision();return yt.rotate(Y),q.sphere=function(){ne.polygonStart(),ne.lineStart();for(var Le=-180*$e;$e*Le<180;Le+=90*$e)ne.point(Le,90*$e);if(Je)for(;$e*(Le-=3*$e*pe)>=-180;)ne.point(Le,$e*-T(x(Le*_/2),at)*S);ne.lineEnd(),ne.polygonEnd()},q},yt.scale(218.695).center([0,28.0974])}function j(Je,$e){var at=h($e/2),ft=C(1-at*at),yt=1+ft*x(Je/=2),gt=c(Je)*ft/yt,D=at/yt,Y=gt*gt,q=D*D;return[1.3333333333333333*gt*(3+Y-3*q),1.3333333333333333*D*(3+3*Y-q)]}function K(){return(0,A.Z)(j).scale(66.1603)}H.invert=function(Je,$e){if(!(Je*Je+4*$e*$e>v*v+f)){var at=Je,ft=$e,yt=25;do{var gt,D=c(at),Y=c(at/2),q=x(at/2),ne=c(ft),pe=x(ft),Le=c(2*ft),Ne=ne*ne,Ge=pe*pe,et=Y*Y,pt=1-Ge*q*q,vt=pt?L(pe*q)*C(gt=1/pt):gt=0,te=2*vt*pe*Y-Je,ue=vt*ne-$e,we=gt*(Ge*et+vt*pe*q*Ne),Oe=gt*(.5*D*Le-2*vt*ne*Y),De=.25*gt*(Le*Y-vt*ne*Ge*D),Ue=gt*(Ne*q+vt*et*pe),We=Oe*De-Ue*we;if(!We)break;var Ke=(ue*Oe-te*Ue)/We,it=(te*De-ue*we)/We;at-=Ke,ft-=it}while((k(Ke)>f||k(it)>f)&&--yt>0);return[at,ft]}},j.invert=function(Je,$e){if($e*=.375,!(Je*=.375)&&k($e)>1)return null;var at=1+Je*Je+$e*$e,ft=C((at-C(at*at-4*$e*$e))/2),yt=E(ft)/3,gt=ft?function(ne){return t(ne+C(ne*ne-1))}(k($e/ft))/3:function(ne){return t(ne+C(ne*ne+1))}(k(Je))/3,D=x(yt),Y=I(gt),q=Y*Y-D*D;return[2*i(Je)*T(P(gt)*D,.25-q),2*i($e)*T(Y*c(yt),.25+q)]};var G=C(8),V=t(1+m);function W(Je,$e){var at=k($e);return at<y?[Je,t(h(y+$e/2))]:[Je*x(at)*(2*m-1/c(at)),i($e)*(2*m*(at-y)-t(h(at/2)))]}function J(){return(0,A.Z)(W).scale(112.314)}W.invert=function(Je,$e){if((ft=k($e))<V)return[Je,2*l(d($e))-g];var at,ft,yt=y,gt=25;do{var D=x(yt/2),Y=h(yt/2);yt-=at=(G*(yt-y)-t(Y)-ft)/(G-D*D/(2*Y))}while(k(at)>b&&--gt>0);return[Je/(x(yt)*(G-1/c(yt))),i($e)*yt]};var X=e(17889);function ee(Je){var $e=2*v/Je;function at(ft,yt){var gt=(0,X.N)(ft,yt);if(k(ft)>g){var D=T(gt[1],gt[0]),Y=C(gt[0]*gt[0]+gt[1]*gt[1]),q=$e*a((D-g)/$e)+g,ne=T(c(D-=q),2-x(D));D=q+E(v/Y*c(ne))-ne,gt[0]=Y*x(D),gt[1]=Y*c(D)}return gt}return at.invert=function(ft,yt){var gt=C(ft*ft+yt*yt);if(gt>g){var D=T(yt,ft),Y=$e*a((D-g)/$e)+g,q=D>Y?-1:1,ne=gt*x(Y-D),pe=1/h(q*L((ne-v)/C(v*(v-2*ne)+gt*gt)));D=Y+2*l((pe+q*C(pe*pe-3))/3),ft=gt*x(D),yt=gt*c(D)}return X.N.invert(ft,yt)},at}function re(){var Je=5,$e=(0,A.r)(ee),at=$e(Je),ft=at.stream,yt=.01,gt=-x(yt*_),D=c(yt*_);return at.lobes=function(Y){return arguments.length?$e(Je=+Y):Je},at.stream=function(Y){var q=at.rotate(),ne=ft(Y),pe=(at.rotate([0,0]),ft(Y));return at.rotate(q),ne.sphere=function(){pe.polygonStart(),pe.lineStart();for(var Le=0,Ne=360/Je,Ge=2*v/Je,et=90-180/Je,pt=g;Le<Je;++Le,et-=Ne,pt-=Ge)pe.point(T(D*x(pt),gt)*S,E(D*c(pt))*S),et<-90?(pe.point(-90,-180-et-yt),pe.point(-90,-180-et+yt)):(pe.point(90,et+yt),pe.point(90,et-yt));pe.lineEnd(),pe.polygonEnd()},ne},at.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ie=e(12956);function se(Je,$e){if(arguments.length<2&&($e=Je),$e===1)return ie.l;if($e===1/0)return fe;function at(ft,yt){var gt=(0,ie.l)(ft/$e,yt);return gt[0]*=Je,gt}return at.invert=function(ft,yt){var gt=ie.l.invert(ft/Je,yt);return gt[0]*=$e,gt},at}function fe(Je,$e){return[Je*x($e)/x($e/=2),2*c($e)]}function ye(){var Je=2,$e=(0,A.r)(se),at=$e(Je);return at.coefficient=function(ft){return arguments.length?$e(Je=+ft):Je},at.scale(169.529)}function ge(Je,$e,at){var ft,yt,gt,D=100;at=at===void 0?0:+at,$e=+$e;do(yt=Je(at))===(gt=Je(at+f))&&(gt=yt+f),at-=ft=-1e-6*(yt-$e)/(yt-gt);while(D-- >0&&k(ft)>f);return D<0?NaN:at}function he(Je,$e,at){return $e===void 0&&($e=40),at===void 0&&(at=b),function(ft,yt,gt,D){var Y,q,ne;gt=gt===void 0?0:+gt,D=D===void 0?0:+D;for(var pe=0;pe<$e;pe++){var Le=Je(gt,D),Ne=Le[0]-ft,Ge=Le[1]-yt;if(k(Ne)<at&&k(Ge)<at)break;var et=Ne*Ne+Ge*Ge;if(et>Y)gt-=q/=2,D-=ne/=2;else{Y=et;var pt=(gt>0?-1:1)*at,vt=(D>0?-1:1)*at,te=Je(gt+pt,D),ue=Je(gt,D+vt),we=(te[0]-Le[0])/pt,Oe=(te[1]-Le[1])/pt,De=(ue[0]-Le[0])/vt,Ue=(ue[1]-Le[1])/vt,We=Ue*we-Oe*De,Ke=(k(We)<.5?.5:1)/We;if(gt+=q=(Ge*De-Ne*Ue)*Ke,D+=ne=(Ne*Oe-Ge*we)*Ke,k(q)<at&&k(ne)<at)break}}return[gt,D]}}function ve(){var Je=se(1.68,2);function $e(at,ft){if(at+ft<-1.4){var yt=(at-ft+1.6)*(at+ft+1.4)/8;at+=yt,ft-=.8*yt*c(ft+v/2)}var gt=Je(at,ft),D=(1-x(at*ft))/12;return gt[1]<0&&(gt[0]*=1+D),gt[1]>0&&(gt[1]*=1+D/1.5*gt[0]*gt[0]),gt}return $e.invert=he($e),$e}function Ie(){return(0,A.Z)(ve()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function xe(Je,$e){var at,ft=Je*c($e),yt=30;do $e-=at=($e+c($e)-ft)/(1+x($e));while(k(at)>f&&--yt>0);return $e/2}function Ae(Je,$e,at){function ft(yt,gt){return[Je*yt*x(gt=xe(at,gt)),$e*c(gt)]}return ft.invert=function(yt,gt){return gt=E(gt/$e),[yt/(Je*x(gt)),E((2*gt+c(2*gt))/at)]},ft}fe.invert=function(Je,$e){var at=2*E($e/2);return[Je*x(at/2)/x(at),at]};var Se=Ae(m/g,m,v);function Te(){return(0,A.Z)(Se).scale(169.529)}var Q=2.00276,oe=1.11072;function ce(Je,$e){var at=xe(v,$e);return[Q*Je/(1/x($e)+oe/x(at)),($e+m*c(at))/Q]}function me(){return(0,A.Z)(ce).scale(160.857)}function Me(Je){var $e=0,at=(0,A.r)(Je),ft=at($e);return ft.parallel=function(yt){return arguments.length?at($e=yt*_):$e*S},ft}function Re(Je,$e){return[Je*x($e),$e]}function Ce(){return(0,A.Z)(Re).scale(152.63)}function ze(Je){if(!Je)return Re;var $e=1/h(Je);function at(ft,yt){var gt=$e+Je-yt,D=gt&&ft*x(yt)/gt;return[gt*c(D),$e-gt*x(D)]}return at.invert=function(ft,yt){var gt=C(ft*ft+(yt=$e-yt)*yt),D=$e+Je-gt;return[gt/x(D)*T(ft,yt),D]},at}function le(){return Me(ze).scale(123.082).center([0,26.1441]).parallel(45)}function de(Je){function $e(at,ft){var yt=g-ft,gt=yt&&at*Je*c(yt)/yt;return[yt*c(gt)/Je,g-yt*x(gt)]}return $e.invert=function(at,ft){var yt=at*Je,gt=g-ft,D=C(yt*yt+gt*gt),Y=T(yt,gt);return[(D?D/c(D):1)*Y/Je,g-D]},$e}function be(){var Je=.5,$e=(0,A.r)(de),at=$e(Je);return at.fraction=function(ft){return arguments.length?$e(Je=+ft):Je},at.scale(158.837)}ce.invert=function(Je,$e){var at,ft,yt=Q*$e,gt=$e<0?-y:y,D=25;do ft=yt-m*c(gt),gt-=at=(c(2*gt)+2*gt-v*c(ft))/(2*x(2*gt)+2+v*x(ft)*m*x(gt));while(k(at)>f&&--D>0);return ft=yt-m*c(gt),[Je*(1/x(ft)+oe/x(gt))/Q,ft]},Re.invert=function(Je,$e){return[Je/x($e),$e]};var Fe=Ae(1,4/v,v);function Ve(){return(0,A.Z)(Fe).scale(152.63)}var He=e(66624),rt=e(49386);function tt(Je,$e,at,ft,yt,gt){var D,Y=x(gt);if(k(Je)>1||k(gt)>1)D=L(at*yt+$e*ft*Y);else{var q=c(Je/2),ne=c(gt/2);D=2*E(C(q*q+$e*ft*ne*ne))}return k(D)>f?[D,T(ft*c(gt),$e*yt-at*ft*Y)]:[0,0]}function ot(Je,$e,at){return L((Je*Je+$e*$e-at*at)/(2*Je*$e))}function ht(Je){return Je-2*v*s((Je+v)/(2*v))}function _t(Je,$e,at){for(var ft,yt=[[Je[0],Je[1],c(Je[1]),x(Je[1])],[$e[0],$e[1],c($e[1]),x($e[1])],[at[0],at[1],c(at[1]),x(at[1])]],gt=yt[2],D=0;D<3;++D,gt=ft)ft=yt[D],gt.v=tt(ft[1]-gt[1],gt[3],gt[2],ft[3],ft[2],ft[0]-gt[0]),gt.point=[0,0];var Y=ot(yt[0].v[0],yt[2].v[0],yt[1].v[0]),q=ot(yt[0].v[0],yt[1].v[0],yt[2].v[0]),ne=v-Y;yt[2].point[1]=0,yt[0].point[0]=-(yt[1].point[0]=yt[0].v[0]/2);var pe=[yt[2].point[0]=yt[0].point[0]+yt[2].v[0]*x(Y),2*(yt[0].point[1]=yt[1].point[1]=yt[2].v[0]*c(Y))];return function(Le,Ne){var Ge,et=c(Ne),pt=x(Ne),vt=new Array(3);for(Ge=0;Ge<3;++Ge){var te=yt[Ge];if(vt[Ge]=tt(Ne-te[1],te[3],te[2],pt,et,Le-te[0]),!vt[Ge][0])return te.point;vt[Ge][1]=ht(vt[Ge][1]-te.v[1])}var ue=pe.slice();for(Ge=0;Ge<3;++Ge){var we=Ge==2?0:Ge+1,Oe=ot(yt[Ge].v[0],vt[Ge][0],vt[we][0]);vt[Ge][1]<0&&(Oe=-Oe),Ge?Ge==1?(Oe=q-Oe,ue[0]-=vt[Ge][0]*x(Oe),ue[1]-=vt[Ge][0]*c(Oe)):(Oe=ne-Oe,ue[0]+=vt[Ge][0]*x(Oe),ue[1]+=vt[Ge][0]*c(Oe)):(ue[0]+=vt[Ge][0]*x(Oe),ue[1]-=vt[Ge][0]*c(Oe))}return ue[0]/=3,ue[1]/=3,ue}}function dt(Je){return Je[0]*=_,Je[1]*=_,Je}function bt(){return St([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function St(Je,$e,at){var ft=(0,He.Z)({type:"MultiPoint",coordinates:[Je,$e,at]}),yt=[-ft[0],-ft[1]],gt=(0,rt.Z)(yt),D=_t(dt(gt(Je)),dt(gt($e)),dt(gt(at)));D.invert=he(D);var Y=(0,A.Z)(D).rotate(yt),q=Y.center;return delete Y.rotate,Y.center=function(ne){return arguments.length?q(gt(ne)):gt.invert(q())},Y.clipAngle(90)}function Et(Je,$e){var at=C(1-c($e));return[2/w*Je*at,w*(1-at)]}function zt(){return(0,A.Z)(Et).scale(95.6464).center([0,30])}function Ut(Je){var $e=h(Je);function at(ft,yt){return[ft,(ft?ft/c(ft):1)*(c(yt)*x(ft)-$e*x(yt))]}return at.invert=$e?function(ft,yt){ft&&(yt*=c(ft)/ft);var gt=x(ft);return[ft,2*T(C(gt*gt+$e*$e-yt*yt)-gt,$e-yt)]}:function(ft,yt){return[ft,E(ft?yt*h(ft)/ft:yt)]},at}function Pt(){return Me(Ut).scale(249.828).clipAngle(90)}Et.invert=function(Je,$e){var at=(at=$e/w-1)*at;return[at>0?Je*C(v/at)/2:0,E(1-at)]};var Ze=C(3);function Ye(Je,$e){return[Ze*Je*(2*x(2*$e/3)-1)/w,Ze*w*c($e/3)]}function Be(){return(0,A.Z)(Ye).scale(156.19)}function ke(Je){var $e=x(Je);function at(ft,yt){return[ft*$e,c(yt)/$e]}return at.invert=function(ft,yt){return[ft/$e,E(yt*$e)]},at}function Pe(){return Me(ke).parallel(38.58).scale(195.044)}function qe(Je){var $e=x(Je);function at(ft,yt){return[ft*$e,(1+$e)*h(yt/2)]}return at.invert=function(ft,yt){return[ft/$e,2*l(yt/(1+$e))]},at}function Xe(){return Me(qe).scale(124.75)}function nt(Je,$e){var at=C(8/(3*v));return[at*Je*(1-k($e)/v),at*$e]}function ut(){return(0,A.Z)(nt).scale(165.664)}function ct(Je,$e){var at=C(4-3*c(k($e)));return[2/C(6*v)*Je*at,i($e)*C(2*v/3)*(2-at)]}function Ct(){return(0,A.Z)(ct).scale(165.664)}function Lt(Je,$e){var at=C(v*(4+v));return[2/at*Je*(1+C(1-4*$e*$e/(v*v))),4/at*$e]}function Mt(){return(0,A.Z)(Lt).scale(180.739)}function mt(Je,$e){var at=(2+g)*c($e);$e/=2;for(var ft=0,yt=1/0;ft<10&&k(yt)>f;ft++){var gt=x($e);$e-=yt=($e+c($e)*(gt+2)-at)/(2*gt*(1+gt))}return[2/C(v*(4+v))*Je*(1+x($e)),2*C(v/(4+v))*c($e)]}function kt(){return(0,A.Z)(mt).scale(180.739)}function wt(Je,$e){return[Je*(1+x($e))/C(2+v),2*$e/C(2+v)]}function Ot(){return(0,A.Z)(wt).scale(173.044)}function It(Je,$e){for(var at=(1+g)*c($e),ft=0,yt=1/0;ft<10&&k(yt)>f;ft++)$e-=yt=($e+c($e)-at)/(1+x($e));return at=C(2+v),[Je*(1+x($e))/at,2*$e/at]}function Nt(){return(0,A.Z)(It).scale(173.044)}Ye.invert=function(Je,$e){var at=3*E($e/(Ze*w));return[w*Je/(Ze*(2*x(2*at/3)-1)),at]},nt.invert=function(Je,$e){var at=C(8/(3*v)),ft=$e/at;return[Je/(at*(1-k(ft)/v)),ft]},ct.invert=function(Je,$e){var at=2-k($e)/C(2*v/3);return[Je*C(6*v)/(2*at),i($e)*E((4-at*at)/3)]},Lt.invert=function(Je,$e){var at=C(v*(4+v))/2;return[Je*at/(1+C(1-$e*$e*(4+v)/(4*v))),$e*at/2]},mt.invert=function(Je,$e){var at=$e*C((4+v)/v)/2,ft=E(at),yt=x(ft);return[Je/(2/C(v*(4+v))*(1+yt)),E((ft+at*(yt+2))/(2+g))]},wt.invert=function(Je,$e){var at=C(2+v),ft=$e*at/2;return[at*Je/(1+x(ft)),ft]},It.invert=function(Je,$e){var at=1+g,ft=C(at/2);return[2*Je*ft/(1+x($e*=ft)),E(($e+c($e))/at)]};var Dt=3+2*m;function qt(Je,$e){var at=c(Je/=2),ft=x(Je),yt=C(x($e)),gt=x($e/=2),D=c($e)/(gt+m*ft*yt),Y=C(2/(1+D*D)),q=C((m*gt+(ft+at)*yt)/(m*gt+(ft-at)*yt));return[Dt*(Y*(q-1/q)-2*t(q)),Dt*(Y*D*(q+1/q)-2*l(D))]}function Xt(){return(0,A.Z)(qt).scale(62.5271)}qt.invert=function(Je,$e){if(!(at=j.invert(Je/1.2,1.065*$e)))return null;var at,ft=at[0],yt=at[1],gt=20;Je/=Dt,$e/=Dt;do{var D=ft/2,Y=yt/2,q=c(D),ne=x(D),pe=c(Y),Le=x(Y),Ne=x(yt),Ge=C(Ne),et=pe/(Le+m*ne*Ge),pt=et*et,vt=C(2/(1+pt)),te=(m*Le+(ne+q)*Ge)/(m*Le+(ne-q)*Ge),ue=C(te),we=ue-1/ue,Oe=ue+1/ue,De=vt*we-2*t(ue)-Je,Ue=vt*et*Oe-2*l(et)-$e,We=pe&&p*Ge*q*pt/pe,Ke=(m*ne*Le+Ge)/(2*(Le+m*ne*Ge)*(Le+m*ne*Ge)*Ge),it=-.5*et*vt*vt*vt,lt=it*We,At=it*Ke,Ft=(Ft=2*Le+m*Ge*(ne-q))*Ft*ue,Bt=(m*ne*Le*Ge+Ne)/Ft,Zt=-m*q*pe/(Ge*Ft),un=we*lt-2*Bt/ue+vt*(Bt+Bt/te),Wt=we*At-2*Zt/ue+vt*(Zt+Zt/te),en=et*Oe*lt-2*We/(1+pt)+vt*Oe*We+vt*et*(Bt-Bt/te),Jt=et*Oe*At-2*Ke/(1+pt)+vt*Oe*Ke+vt*et*(Zt-Zt/te),wn=Wt*en-Jt*un;if(!wn)break;var pn=(Ue*Wt-De*Jt)/wn,Qt=(De*en-Ue*un)/wn;ft-=pn,yt=o(-g,r(g,yt-Qt))}while((k(pn)>f||k(Qt)>f)&&--gt>0);return k(k(yt)-g)<f?[0,yt]:gt&&[ft,yt]};var cn=x(35*_);function yn(Je,$e){var at=h($e/2);return[Je*cn*C(1-at*at),(1+cn)*at]}function Kt(){return(0,A.Z)(yn).scale(137.152)}function Mn(Je,$e){var at=$e/2,ft=x(at);return[2*Je/w*x($e)*ft*ft,w*h(at)]}function Un(){return(0,A.Z)(Mn).scale(135.264)}function xn(Je){var $e=1-Je,at=yt(v,0)[0]-yt(-v,0)[0],ft=C(2*(yt(0,g)[1]-yt(0,-g)[1])/at);function yt(Y,q){var ne=x(q),pe=c(q);return[ne/($e+Je*ne)*Y,$e*q+Je*pe]}function gt(Y,q){var ne=yt(Y,q);return[ne[0]*ft,ne[1]/ft]}function D(Y){return gt(0,Y)[1]}return gt.invert=function(Y,q){var ne=ge(D,q);return[Y/ft*(Je+$e/x(ne)),ne]},gt}function dn(){var Je=.5,$e=(0,A.r)(xn),at=$e(Je);return at.alpha=function(ft){return arguments.length?$e(Je=+ft):Je},at.scale(168.725)}yn.invert=function(Je,$e){var at=$e/(1+cn);return[Je&&Je/(cn*C(1-at*at)),2*l(at)]},Mn.invert=function(Je,$e){var at=l($e/w),ft=x(at),yt=2*at;return[Je*w/2/(x(yt)*ft*ft),yt]};var gn=e(57962),an=e(97492);function sn(Je){return[Je[0]/2,E(h(Je[1]/2*_))*S]}function On(Je){return[2*Je[0],2*l(c(Je[1]*_))*S]}function En(Je){Je==null&&(Je=gn.Z);var $e=Je(),at=(0,an.Z)().scale(S).precision(0).clipAngle(null).translate([0,0]);function ft(gt){return $e(sn(gt))}function yt(gt){ft[gt]=function(){return arguments.length?($e[gt].apply($e,arguments),ft):$e[gt]()}}return $e.invert&&(ft.invert=function(gt){return On($e.invert(gt))}),ft.stream=function(gt){var D=$e.stream(gt),Y=at.stream({point:function(q,ne){D.point(q/2,E(h(-ne/2*_))*S)},lineStart:function(){D.lineStart()},lineEnd:function(){D.lineEnd()},polygonStart:function(){D.polygonStart()},polygonEnd:function(){D.polygonEnd()}});return Y.sphere=D.sphere,Y},ft.rotate=function(gt){return arguments.length?(at.rotate(gt),ft):at.rotate()},ft.center=function(gt){return arguments.length?($e.center(sn(gt)),ft):On($e.center())},yt("angle"),yt("clipAngle"),yt("clipExtent"),yt("fitExtent"),yt("fitHeight"),yt("fitSize"),yt("fitWidth"),yt("scale"),yt("translate"),yt("precision"),ft.scale(249.5)}function Dn(Je,$e){var at=2*v/$e,ft=Je*Je;function yt(gt,D){var Y=(0,X.N)(gt,D),q=Y[0],ne=Y[1],pe=q*q+ne*ne;if(pe>ft){var Le=C(pe),Ne=T(ne,q),Ge=at*a(Ne/at),et=Ne-Ge,pt=Je*x(et),vt=(Je*c(et)-et*c(pt))/(g-pt),te=Zn(et,vt),ue=(v-Je)/Fn(te,pt,v);q=Le;var we,Oe=50;do q-=we=(Je+Fn(te,pt,q)*ue-Le)/(te(q)*ue);while(k(we)>f&&--Oe>0);ne=et*c(q),q<g&&(ne-=vt*(q-g));var De=c(Ge),Ue=x(Ge);Y[0]=q*Ue-ne*De,Y[1]=q*De+ne*Ue}return Y}return yt.invert=function(gt,D){var Y=gt*gt+D*D;if(Y>ft){var q=C(Y),ne=T(D,gt),pe=at*a(ne/at),Le=ne-pe;gt=q*x(Le),D=q*c(Le);for(var Ne=gt-g,Ge=c(gt),et=D/Ge,pt=gt<g?1/0:0,vt=10;;){var te=Je*c(et),ue=Je*x(et),we=c(ue),Oe=g-ue,De=(te-et*we)/Oe,Ue=Zn(et,De);if(k(pt)<b||!--vt)break;et-=pt=(et*Ge-De*Ne-D)/(Ge-2*Ne*(Oe*(ue+et*te*x(ue)-we)-te*(te-et*we))/(Oe*Oe))}gt=(q=Je+Fn(Ue,ue,gt)*(v-Je)/Fn(Ue,ue,v))*x(ne=pe+et),D=q*c(ne)}return X.N.invert(gt,D)},yt}function Zn(Je,$e){return function(at){var ft=Je*x(at);return at<g&&(ft-=$e),C(1+ft*ft)}}function Fn(Je,$e,at){for(var ft=(at-$e)/50,yt=Je($e)+Je(at),gt=1,D=$e;gt<50;++gt)yt+=2*Je(D+=ft);return .5*yt*ft}function nr(){var Je=6,$e=30*_,at=x($e),ft=c($e),yt=(0,A.r)(Dn),gt=yt($e,Je),D=gt.stream,Y=-x(.01*_),q=c(.01*_);return gt.radius=function(ne){return arguments.length?(at=x($e=ne*_),ft=c($e),yt($e,Je)):$e*S},gt.lobes=function(ne){return arguments.length?yt($e,Je=+ne):Je},gt.stream=function(ne){var pe=gt.rotate(),Le=D(ne),Ne=(gt.rotate([0,0]),D(ne));return gt.rotate(pe),Le.sphere=function(){Ne.polygonStart(),Ne.lineStart();for(var Ge=0,et=2*v/Je,pt=0;Ge<Je;++Ge,pt-=et)Ne.point(T(q*x(pt),Y)*S,E(q*c(pt))*S),Ne.point(T(ft*x(pt-et/2),at)*S,E(ft*c(pt-et/2))*S);Ne.lineEnd(),Ne.polygonEnd()},Le},gt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function $n(Je,$e,at,ft,yt,gt,D,Y){function q(ne,pe){if(!pe)return[Je*ne/v,0];var Le=pe*pe,Ne=Je+Le*($e+Le*(at+Le*ft)),Ge=pe*(yt-1+Le*(gt-Y+Le*D)),et=(Ne*Ne+Ge*Ge)/(2*Ge),pt=ne*E(Ne/et)/v;return[et*c(pt),pe*(1+Le*Y)+et*(1-x(pt))]}return arguments.length<8&&(Y=0),q.invert=function(ne,pe){var Le,Ne,Ge=v*ne/Je,et=pe,pt=50;do{var vt=et*et,te=Je+vt*($e+vt*(at+vt*ft)),ue=et*(yt-1+vt*(gt-Y+vt*D)),we=te*te+ue*ue,Oe=2*ue,De=we/Oe,Ue=De*De,We=E(te/De)/v,Ke=Ge*We,it=te*te,lt=(2*$e+vt*(4*at+6*vt*ft))*et,At=yt+vt*(3*gt+5*vt*D),Ft=(2*(te*lt+ue*(At-1))*Oe-we*(2*(At-1)))/(Oe*Oe),Bt=x(Ke),Zt=c(Ke),un=De*Bt,Wt=De*Zt,en=Ge/v*(1/C(1-it/Ue))*(lt*De-te*Ft)/Ue,Jt=Wt-ne,wn=et*(1+vt*Y)+De-un-pe,pn=Ft*Zt+un*en,Qt=un*We,Ln=1+Ft-(Ft*Bt-Wt*en),Rn=Wt*We,Xn=pn*Rn-Ln*Qt;if(!Xn)break;Ge-=Le=(wn*pn-Jt*Ln)/Xn,et-=Ne=(Jt*Rn-wn*Qt)/Xn}while((k(Le)>f||k(Ne)>f)&&--pt>0);return[Ge,et]},q}var mr=$n(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function dr(){return(0,A.Z)(mr).scale(149.995)}var Yn=$n(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Vn(){return(0,A.Z)(Yn).scale(153.93)}var ur=$n(5/6*v,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Gt(){return(0,A.Z)(ur).scale(130.945)}function tn(Je,$e){var at=Je*Je,ft=$e*$e;return[Je*(1-.162388*ft)*(.87-952426e-9*at*at),$e*(1+ft/12)]}function In(){return(0,A.Z)(tn).scale(131.747)}tn.invert=function(Je,$e){var at,ft=Je,yt=$e,gt=50;do{var D=yt*yt;yt-=at=(yt*(1+D/12)-$e)/(1+D/4)}while(k(at)>f&&--gt>0);gt=50,Je/=1-.162388*D;do{var Y=(Y=ft*ft)*Y;ft-=at=(ft*(.87-952426e-9*Y)-Je)/(.87-.00476213*Y)}while(k(at)>f&&--gt>0);return[ft,yt]};var _n=$n(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Sn(){return(0,A.Z)(_n).scale(131.087)}function jn(Je){var $e=Je(g,0)[0]-Je(-g,0)[0];function at(ft,yt){var gt=ft>0?-.5:.5,D=Je(ft+gt*v,yt);return D[0]-=gt*$e,D}return Je.invert&&(at.invert=function(ft,yt){var gt=ft>0?-.5:.5,D=Je.invert(ft+gt*$e,yt),Y=D[0]-gt*v;return Y<-v?Y+=2*v:Y>v&&(Y-=2*v),D[0]=Y,D}),at}function qn(Je,$e){var at=i(Je),ft=i($e),yt=x($e),gt=x(Je)*yt,D=c(Je)*yt,Y=c(ft*$e);Je=k(T(D,Y)),$e=E(gt),k(Je-g)>f&&(Je%=g);var q=function(ne,pe){if(pe===g)return[0,0];var Le,Ne,Ge=c(pe),et=Ge*Ge,pt=et*et,vt=1+pt,te=1+3*pt,ue=1-pt,we=E(1/C(vt)),Oe=ue+et*vt*we,De=(1-Ge)/Oe,Ue=C(De),We=De*vt,Ke=C(We),it=Ue*ue;if(ne===0)return[0,-(it+et*Ke)];var lt,At=x(pe),Ft=1/At,Bt=2*Ge*At,Zt=(-Oe*At-(-3*et+we*te)*Bt*(1-Ge))/(Oe*Oe),un=-Ft*Bt,Wt=-Ft*(et*vt*Zt+De*te*Bt),en=-2*Ft*(ue*(.5*Zt/Ue)-2*et*Ue*Bt),Jt=4*ne/v;if(ne>.222*v||pe<v/4&&ne>.175*v){if(Le=(it+et*C(We*(1+pt)-it*it))/(1+pt),ne>v/4)return[Le,Le];var wn=Le,pn=.5*Le;Le=.5*(pn+wn),Ne=50;do{var Qt=Le*(en+un*C(We-Le*Le))+Wt*E(Le/Ke)-Jt;if(!Qt)break;Qt<0?pn=Le:wn=Le,Le=.5*(pn+wn)}while(k(wn-pn)>f&&--Ne>0)}else{Le=f,Ne=25;do{var Ln=Le*Le,Rn=C(We-Ln),Xn=en+un*Rn,Jn=Le*Xn+Wt*E(Le/Ke)-Jt;Le-=lt=Rn?Jn/(Xn+(Wt-un*Ln)/Rn):0}while(k(lt)>f&&--Ne>0)}return[Le,-it-et*C(We-Le*Le)]}(Je>v/4?g-Je:Je,$e);return Je>v/4&&(Y=q[0],q[0]=-q[1],q[1]=-Y),q[0]*=at,q[1]*=-ft,q}function ar(){return(0,A.Z)(jn(qn)).scale(239.75)}function cr(Je,$e){var at,ft,yt,gt,D,Y;if($e<f)return[(gt=c(Je))-(at=$e*(Je-gt*(ft=x(Je)))/4)*ft,ft+at*gt,1-$e*gt*gt/2,Je-at];if($e>=.999999)return at=(1-$e)/4,yt=1/(ft=I(Je)),[(gt=((Y=d(2*(Y=Je)))-1)/(Y+1))+at*((D=ft*P(Je))-Je)/(ft*ft),yt-at*gt*yt*(D-Je),yt+at*gt*yt*(D+Je),2*l(d(Je))-g+at*(D-Je)/ft];var q=[1,0,0,0,0,0,0,0,0],ne=[C($e),0,0,0,0,0,0,0,0],pe=0;for(ft=C(1-$e),D=1;k(ne[pe]/q[pe])>f&&pe<8;)at=q[pe++],ne[pe]=(at-ft)/2,q[pe]=(at+ft)/2,ft=C(at*ft),D*=2;yt=D*q[pe]*Je;do yt=(E(gt=ne[pe]*c(ft=yt)/q[pe])+yt)/2;while(--pe);return[c(yt),gt=x(yt),gt/x(yt-ft),yt]}function $t(Je,$e){if(!$e)return Je;if($e===1)return t(h(Je/2+y));for(var at=1,ft=C(1-$e),yt=C($e),gt=0;k(yt)>f;gt++){if(Je%v){var D=l(ft*h(Je)/at);D<0&&(D+=v),Je+=D+~~(Je/v)*v}else Je+=Je;yt=(at+ft)/2,ft=C(at*ft),yt=((at=yt)-ft)/2}return Je/(n(2,gt)*at)}function An(Je,$e){var at=(m-1)/(m+1),ft=C(1-at*at),yt=$t(g,ft*ft),gt=t(h(v/4+k($e)/2)),D=d(-1*gt)/C(at),Y=function(ne,pe){var Le=ne*ne,Ne=pe+1,Ge=1-Le-pe*pe;return[.5*((ne>=0?g:-g)-T(Ge,2*ne)),-.25*t(Ge*Ge+4*Le)+.5*t(Ne*Ne+Le)]}(D*x(-1*Je),D*c(-1*Je)),q=function(ne,pe,Le){var Ne=k(ne),Ge=P(k(pe));if(Ne){var et=1/c(Ne),pt=1/(h(Ne)*h(Ne)),vt=-(pt+Le*(Ge*Ge*et*et)-1+Le),te=(-vt+C(vt*vt-(Le-1)*pt*4))/2;return[$t(l(1/C(te)),Le)*i(ne),$t(l(C((te/pt-1)/Le)),1-Le)*i(pe)]}return[0,$t(l(Ge),1-Le)*i(pe)]}(Y[0],Y[1],ft*ft);return[-q[1],($e>=0?1:-1)*(.5*yt-q[0])]}function Rt(){return(0,A.Z)(jn(An)).scale(151.496)}qn.invert=function(Je,$e){k(Je)>1&&(Je=2*i(Je)-Je),k($e)>1&&($e=2*i($e)-$e);var at=i(Je),ft=i($e),yt=-at*Je,gt=-ft*$e,D=gt/yt<1,Y=function(Le,Ne){for(var Ge=0,et=1,pt=.5,vt=50;;){var te=pt*pt,ue=C(pt),we=E(1/C(1+te)),Oe=1-te+pt*(1+te)*we,De=(1-ue)/Oe,Ue=C(De),We=De*(1+te),Ke=Ue*(1-te),it=C(We-Le*Le),lt=Ne+Ke+pt*it;if(k(et-Ge)<b||--vt==0||lt===0)break;lt>0?Ge=pt:et=pt,pt=.5*(Ge+et)}if(!vt)return null;var At=E(ue),Ft=x(At),Bt=1/Ft,Zt=2*ue*Ft,un=(-Oe*Ft-(-3*pt+we*(1+3*te))*Zt*(1-ue))/(Oe*Oe);return[v/4*(Le*(-2*Bt*(.5*un/Ue*(1-te)-2*pt*Ue*Zt)+-Bt*Zt*it)+-Bt*(pt*(1+te)*un+De*(1+3*te)*Zt)*E(Le/C(We))),At]}(D?gt:yt,D?yt:gt),q=Y[0],ne=Y[1],pe=x(ne);return D&&(q=-g-q),[at*(T(c(q)*pe,-c(ne))+v),ft*E(x(q)*pe)]},An.invert=function(Je,$e){var at,ft,yt,gt,D,Y,q=(m-1)/(m+1),ne=C(1-q*q),pe=(ft=-Je,yt=ne*ne,(at=.5*$t(g,ne*ne)-$e)?(gt=cr(at,yt),ft?(Y=(D=cr(ft,1-yt))[1]*D[1]+yt*gt[0]*gt[0]*D[0]*D[0],[[gt[0]*D[2]/Y,gt[1]*gt[2]*D[0]*D[1]/Y],[gt[1]*D[1]/Y,-gt[0]*gt[2]*D[0]*D[2]/Y],[gt[2]*D[1]*D[2]/Y,-yt*gt[0]*gt[1]*D[0]/Y]]):[[gt[0],0],[gt[1],0],[gt[2],0]]):[[0,(D=cr(ft,1-yt))[0]/D[1]],[1/D[1],0],[D[2]/D[1],0]]),Le=function(Ne,Ge){var et=Ge[0]*Ge[0]+Ge[1]*Ge[1];return[(Ne[0]*Ge[0]+Ne[1]*Ge[1])/et,(Ne[1]*Ge[0]-Ne[0]*Ge[1])/et]}(pe[0],pe[1]);return[T(Le[1],Le[0])/-1,2*l(d(-.5*t(q*Le[0]*Le[0]+q*Le[1]*Le[1])))-g]};var Yt=e(7613);function rn(Je){var $e=c(Je),at=x(Je),ft=bn(Je);function yt(gt,D){var Y=ft(gt,D);gt=Y[0],D=Y[1];var q=c(D),ne=x(D),pe=x(gt),Le=L($e*q+at*ne*pe),Ne=c(Le),Ge=k(Ne)>f?Le/Ne:1;return[Ge*at*c(gt),(k(gt)>g?Ge:-Ge)*($e*ne-at*q*pe)]}return ft.invert=bn(-Je),yt.invert=function(gt,D){var Y=C(gt*gt+D*D),q=-c(Y),ne=x(Y),pe=Y*ne,Le=-D*q,Ne=Y*$e,Ge=C(pe*pe+Le*Le-Ne*Ne),et=T(pe*Ne+Le*Ge,Le*Ne-pe*Ge),pt=(Y>g?-1:1)*T(gt*q,Y*x(et)*ne+D*c(et)*q);return ft.invert(pt,et)},yt}function bn(Je){var $e=c(Je),at=x(Je);return function(ft,yt){var gt=x(yt),D=x(ft)*gt,Y=c(ft)*gt,q=c(yt);return[T(Y,D*at-q*$e),E(q*at+D*$e)]}}function ln(){var Je=0,$e=(0,A.r)(rn),at=$e(Je),ft=at.rotate,yt=at.stream,gt=(0,Yt.Z)();return at.parallel=function(D){if(!arguments.length)return Je*S;var Y=at.rotate();return $e(Je=D*_).rotate(Y)},at.rotate=function(D){return arguments.length?(ft.call(at,[D[0],D[1]-Je*S]),gt.center([-D[0],-D[1]]),at):((D=ft.call(at))[1]+=Je*S,D)},at.stream=function(D){return(D=yt(D)).sphere=function(){D.polygonStart();var Y,q=gt.radius(89.99)().coordinates[0],ne=q.length-1,pe=-1;for(D.lineStart();++pe<ne;)D.point((Y=q[pe])[0],Y[1]);for(D.lineEnd(),ne=(q=gt.radius(90.01)().coordinates[0]).length-1,D.lineStart();--pe>=0;)D.point((Y=q[pe])[0],Y[1]);D.lineEnd(),D.polygonEnd()},D},at.scale(79.4187).parallel(45).clipAngle(179.999)}var kn=e(33064),Tn=e(72736),hn=E(1-1/3)*S,nn=ke(0);function fn(Je){var $e=hn*_,at=Et(v,$e)[0]-Et(-v,$e)[0],ft=nn(0,$e)[1],yt=Et(0,$e)[1],gt=w-yt,D=u/Je,Y=4/u,q=ft+gt*gt*4/u;function ne(pe,Le){var Ne,Ge=k(Le);if(Ge>$e){var et=r(Je-1,o(0,s((pe+v)/D)));(Ne=Et(pe+=v*(Je-1)/Je-et*D,Ge))[0]=Ne[0]*u/at-u*(Je-1)/(2*Je)+et*u/Je,Ne[1]=ft+4*(Ne[1]-yt)*gt/u,Le<0&&(Ne[1]=-Ne[1])}else Ne=nn(pe,Le);return Ne[0]*=Y,Ne[1]/=q,Ne}return ne.invert=function(pe,Le){pe/=Y;var Ne=k(Le*=q);if(Ne>ft){var Ge=r(Je-1,o(0,s((pe+v)/D)));pe=(pe+v*(Je-1)/Je-Ge*D)*at/u;var et=Et.invert(pe,.25*(Ne-ft)*u/gt+yt);return et[0]-=v*(Je-1)/Je-Ge*D,Le<0&&(et[1]=-et[1]),et}return nn.invert(pe,Le)},ne}function mn(Je,$e){return[Je,1&$e?89.999999:hn]}function zn(Je,$e){return[Je,1&$e?-89.999999:-hn]}function Gn(Je){return[.999999*Je[0],Je[1]]}function Hn(){var Je=4,$e=(0,A.r)(fn),at=$e(Je),ft=at.stream;return at.lobes=function(yt){return arguments.length?$e(Je=+yt):Je},at.stream=function(yt){var gt=at.rotate(),D=ft(yt),Y=(at.rotate([0,0]),ft(yt));return at.rotate(gt),D.sphere=function(){var q,ne;(0,Tn.Z)((q=180/Je,ne=[].concat((0,kn.w6)(-180,180+q/2,q).map(mn),(0,kn.w6)(180,-180-q/2,-q).map(zn)),{type:"Polygon",coordinates:[q===180?ne.map(Gn):ne]}),Y)},D},at.scale(239.75)}function Qn(Je){var $e,at=1+Je,ft=E(c(1/at)),yt=2*C(v/($e=v+4*ft*at)),gt=.5*yt*(at+C(Je*(2+Je))),D=Je*Je,Y=at*at;function q(ne,pe){var Le,Ne,Ge=1-c(pe);if(Ge&&Ge<2){var et,pt=g-pe,vt=25;do{var te=c(pt),ue=x(pt),we=ft+T(te,at-ue),Oe=1+Y-2*at*ue;pt-=et=(pt-D*ft-at*te+Oe*we-.5*Ge*$e)/(2*at*te*we)}while(k(et)>b&&--vt>0);Le=yt*C(Oe),Ne=ne*we/v}else Le=yt*(Je+Ge),Ne=ne*ft/v;return[Le*c(Ne),gt-Le*x(Ne)]}return q.invert=function(ne,pe){var Le=ne*ne+(pe-=gt)*pe,Ne=(1+Y-Le/(yt*yt))/(2*at),Ge=L(Ne),et=c(Ge),pt=ft+T(et,at-Ne);return[E(ne/C(Le))*v/pt,E(1-2*(Ge-D*ft-at*et+(1+Y-2*at*Ne)*pt)/$e)]},q}function rr(){var Je=1,$e=(0,A.r)(Qn),at=$e(Je);return at.ratio=function(ft){return arguments.length?$e(Je=+ft):Je},at.scale(167.774).center([0,18.67])}var er=.7109889596207567,or=.0528035274542;function ir(Je,$e){return $e>-er?((Je=Se(Je,$e))[1]+=or,Je):Re(Je,$e)}function gr(){return(0,A.Z)(ir).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Tr(Je,$e){return k($e)>er?((Je=Se(Je,$e))[1]-=$e>0?or:-or,Je):Re(Je,$e)}function Ur(){return(0,A.Z)(Tr).scale(152.63)}function Sr(Je,$e,at,ft){var yt=C(4*v/(2*at+(1+Je-$e/2)*c(2*at)+(Je+$e)/2*c(4*at)+$e/2*c(6*at))),gt=C(ft*c(at)*C((1+Je*x(2*at)+$e*x(4*at))/(1+Je+$e))),D=at*q(1);function Y(Le){return C(1+Je*x(2*Le)+$e*x(4*Le))}function q(Le){var Ne=Le*at;return(2*Ne+(1+Je-$e/2)*c(2*Ne)+(Je+$e)/2*c(4*Ne)+$e/2*c(6*Ne))/at}function ne(Le){return Y(Le)*c(Le)}var pe=function(Le,Ne){var Ge=at*ge(q,D*c(Ne)/at,Ne/v);isNaN(Ge)&&(Ge=at*i(Ne));var et=yt*Y(Ge);return[et*gt*Le/v*x(Ge),et/gt*c(Ge)]};return pe.invert=function(Le,Ne){var Ge=ge(ne,Ne*gt/yt);return[Le*v/(x(Ge)*yt*gt*Y(Ge)),E(at*q(Ge/at)/D)]},at===0&&(yt=C(ft/v),(pe=function(Le,Ne){return[Le*yt,c(Ne)/yt]}).invert=function(Le,Ne){return[Le/yt,E(Ne*yt)]}),pe}function lr(){var Je=1,$e=0,at=45*_,ft=2,yt=(0,A.r)(Sr),gt=yt(Je,$e,at,ft);return gt.a=function(D){return arguments.length?yt(Je=+D,$e,at,ft):Je},gt.b=function(D){return arguments.length?yt(Je,$e=+D,at,ft):$e},gt.psiMax=function(D){return arguments.length?yt(Je,$e,at=+D*_,ft):at*S},gt.ratio=function(D){return arguments.length?yt(Je,$e,at,ft=+D):ft},gt.scale(180.739)}function Lr(Je,$e,at,ft,yt,gt,D,Y,q,ne,pe){if(pe.nanEncountered)return NaN;var Le,Ne,Ge,et,pt,vt,te,ue,we,Oe;if(Ne=Je($e+.25*(Le=at-$e)),Ge=Je(at-.25*Le),isNaN(Ne))pe.nanEncountered=!0;else{if(!isNaN(Ge))return Oe=((vt=(et=Le*(ft+4*Ne+yt)/12)+(pt=Le*(yt+4*Ge+gt)/12))-D)/15,ne>q?(pe.maxDepthCount++,vt+Oe):Math.abs(Oe)<Y?vt+Oe:(ue=Lr(Je,$e,te=$e+.5*Le,ft,Ne,yt,et,.5*Y,q,ne+1,pe),isNaN(ue)?(pe.nanEncountered=!0,NaN):(we=Lr(Je,te,at,yt,Ge,gt,pt,.5*Y,q,ne+1,pe),isNaN(we)?(pe.nanEncountered=!0,NaN):ue+we));pe.nanEncountered=!0}}function Rr(Je,$e,at,ft,yt){ft===void 0&&(ft=1e-8),yt===void 0&&(yt=20);var gt=Je($e),D=Je(.5*($e+at)),Y=Je(at);return Lr(Je,$e,at,gt,D,Y,(gt+4*D+Y)*(at-$e)/6,ft,yt,1,{maxDepthCount:0,nanEncountered:!1})}function li(Je,$e,at){function ft(Ge){return Je+(1-Je)*n(1-n(Ge,$e),1/$e)}function yt(Ge){return Rr(ft,0,Ge,1e-4)}for(var gt=1/yt(1),D=1e3,Y=1.00000001*gt,q=[],ne=0;ne<=D;ne++)q.push(yt(ne/D)*Y);function pe(Ge){var et=0,pt=D,vt=500;do q[vt]>Ge?pt=vt:et=vt,vt=et+pt>>1;while(vt>et);var te=q[vt+1]-q[vt];return te&&(te=(Ge-q[vt+1])/te),(vt+1+te)/D}var Le=2*pe(1)/v*gt/at,Ne=function(Ge,et){var pt=pe(k(c(et))),vt=ft(pt)*Ge;return pt/=Le,[vt,et>=0?pt:-pt]};return Ne.invert=function(Ge,et){var pt;return k(et*=Le)<1&&(pt=i(et)*E(yt(k(et))*gt)),[Ge/ft(k(et)),pt]},Ne}function Mi(){var Je=0,$e=2.5,at=1.183136,ft=(0,A.r)(li),yt=ft(Je,$e,at);return yt.alpha=function(gt){return arguments.length?ft(Je=+gt,$e,at):Je},yt.k=function(gt){return arguments.length?ft(Je,$e=+gt,at):$e},yt.gamma=function(gt){return arguments.length?ft(Je,$e,at=+gt):at},yt.scale(152.63)}function Pi(Je,$e){return k(Je[0]-$e[0])<f&&k(Je[1]-$e[1])<f}function Ea(Je,$e){for(var at,ft,yt,gt=-1,D=Je.length,Y=Je[0],q=[];++gt<D;){ft=((at=Je[gt])[0]-Y[0])/$e,yt=(at[1]-Y[1])/$e;for(var ne=0;ne<$e;++ne)q.push([Y[0]+ne*ft,Y[1]+ne*yt]);Y=at}return q.push(at),q}function Ui(Je){var $e,at,ft,yt,gt,D,Y,q=[],ne=Je[0].length;for(Y=0;Y<ne;++Y)at=($e=Je[0][Y])[0][0],ft=$e[0][1],yt=$e[1][1],gt=$e[2][0],D=$e[2][1],q.push(Ea([[at+f,ft+f],[at+f,yt-f],[gt-f,yt-f],[gt-f,D+f]],30));for(Y=Je[1].length-1;Y>=0;--Y)at=($e=Je[1][Y])[0][0],ft=$e[0][1],yt=$e[1][1],gt=$e[2][0],D=$e[2][1],q.push(Ea([[gt-f,D-f],[gt-f,yt+f],[at+f,yt+f],[at+f,ft-f]],30));return{type:"Polygon",coordinates:[(0,kn.TS)(q)]}}function vi(Je,$e,at){var ft,yt;function gt(q,ne){for(var pe=ne<0?-1:1,Le=$e[+(ne<0)],Ne=0,Ge=Le.length-1;Ne<Ge&&q>Le[Ne][2][0];++Ne);var et=Je(q-Le[Ne][1][0],ne);return et[0]+=Je(Le[Ne][1][0],pe*ne>pe*Le[Ne][0][1]?Le[Ne][0][1]:ne)[0],et}at?gt.invert=at(gt):Je.invert&&(gt.invert=function(q,ne){for(var pe=yt[+(ne<0)],Le=$e[+(ne<0)],Ne=0,Ge=pe.length;Ne<Ge;++Ne){var et=pe[Ne];if(et[0][0]<=q&&q<et[1][0]&&et[0][1]<=ne&&ne<et[1][1]){var pt=Je.invert(q-Je(Le[Ne][1][0],0)[0],ne);return pt[0]+=Le[Ne][1][0],Pi(gt(pt[0],pt[1]),[q,ne])?pt:null}}});var D=(0,A.Z)(gt),Y=D.stream;return D.stream=function(q){var ne=D.rotate(),pe=Y(q),Le=(D.rotate([0,0]),Y(q));return D.rotate(ne),pe.sphere=function(){(0,Tn.Z)(ft,Le)},pe},D.lobes=function(q){return arguments.length?(ft=Ui(q),$e=q.map(function(ne){return ne.map(function(pe){return[[pe[0][0]*_,pe[0][1]*_],[pe[1][0]*_,pe[1][1]*_],[pe[2][0]*_,pe[2][1]*_]]})}),yt=$e.map(function(ne){return ne.map(function(pe){var Le,Ne=Je(pe[0][0],pe[0][1])[0],Ge=Je(pe[2][0],pe[2][1])[0],et=Je(pe[1][0],pe[0][1])[1],pt=Je(pe[1][0],pe[1][1])[1];return et>pt&&(Le=et,et=pt,pt=Le),[[Ne,et],[Ge,pt]]})}),D):$e.map(function(ne){return ne.map(function(pe){return[[pe[0][0]*S,pe[0][1]*S],[pe[1][0]*S,pe[1][1]*S],[pe[2][0]*S,pe[2][1]*S]]})})},$e!=null&&D.lobes($e),D}ir.invert=function(Je,$e){return $e>-er?Se.invert(Je,$e-or):Re.invert(Je,$e)},Tr.invert=function(Je,$e){return k($e)>er?Se.invert(Je,$e+($e>0?or:-or)):Re.invert(Je,$e)};var La=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function no(){return vi(ce,La).scale(160.857)}var Zo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Wo(){return vi(Tr,Zo).scale(152.63)}var ol=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Hs(){return vi(Se,ol).scale(169.529)}var Yo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ta(){return vi(Se,Yo).scale(169.529).rotate([20,0])}var qs=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function zi(){return vi(ir,qs,he).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var us=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function ma(){return vi(Re,us).scale(152.63).rotate([-20,0])}function ka(Je,$e){return[3/u*Je*C(v*v/3-$e*$e),$e]}function mo(){return(0,A.Z)(ka).scale(158.837)}function Qr(Je){function $e(at,ft){if(k(k(ft)-g)<f)return[0,ft<0?-2:2];var yt=c(ft),gt=n((1+yt)/(1-yt),Je/2),D=.5*(gt+1/gt)+x(at*=Je);return[2*c(at)/D,(gt-1/gt)/D]}return $e.invert=function(at,ft){var yt=k(ft);if(k(yt-2)<f)return at?null:[0,i(ft)*g];if(yt>2)return null;var gt=(at/=2)*at,D=(ft/=2)*ft,Y=2*ft/(1+gt+D);return Y=n((1+Y)/(1-Y),1/Je),[T(2*at,1-gt-D)/Je,E((Y-1)/(Y+1))]},$e}function yo(){var Je=.5,$e=(0,A.r)(Qr),at=$e(Je);return at.spacing=function(ft){return arguments.length?$e(Je=+ft):Je},at.scale(124.75)}ka.invert=function(Je,$e){return[u/3*Je/C(v*v/3-$e*$e),$e]};var Ca=v/m;function Ua(Je,$e){return[Je*(1+C(x($e)))/2,$e/(x($e/2)*x(Je/6))]}function Xa(){return(0,A.Z)(Ua).scale(97.2672)}function cs(Je,$e){var at=Je*Je,ft=$e*$e;return[Je*(.975534+ft*(-.0143059*at-.119161+-.0547009*ft)),$e*(1.00384+at*(.0802894+-.02855*ft+199025e-9*at)+ft*(.0998909+-.0491032*ft))]}function sl(){return(0,A.Z)(cs).scale(139.98)}function ro(Je,$e){return[c(Je)/x($e),h($e)*x(Je)]}function ll(){return(0,A.Z)(ro).scale(144.049).clipAngle(89.999)}function ul(Je){var $e=x(Je),at=h(y+Je/2);function ft(yt,gt){var D=gt-Je,Y=k(D)<f?yt*$e:k(Y=y+gt/2)<f||k(k(Y)-g)<f?0:yt*D/t(h(Y)/at);return[Y,D]}return ft.invert=function(yt,gt){var D,Y=gt+Je;return[k(gt)<f?yt/$e:k(D=y+Y/2)<f||k(k(D)-g)<f?0:yt*t(h(D)/at)/gt,Y]},ft}function yl(){return Me(ul).parallel(40).scale(158.837)}function Gs(Je,$e){return[Je,1.25*t(h(y+.4*$e))]}function cl(){return(0,A.Z)(Gs).scale(108.318)}function Zs(Je){var $e=Je.length-1;function at(ft,yt){for(var gt,D=x(yt),Y=2/(1+D*x(ft)),q=Y*D*c(ft),ne=Y*c(yt),pe=$e,Le=Je[pe],Ne=Le[0],Ge=Le[1];--pe>=0;)Ne=(Le=Je[pe])[0]+q*(gt=Ne)-ne*Ge,Ge=Le[1]+q*Ge+ne*gt;return[Ne=q*(gt=Ne)-ne*Ge,Ge=q*Ge+ne*gt]}return at.invert=function(ft,yt){var gt=20,D=ft,Y=yt;do{for(var q,ne=$e,pe=Je[ne],Le=pe[0],Ne=pe[1],Ge=0,et=0;--ne>=0;)Ge=Le+D*(q=Ge)-Y*et,et=Ne+D*et+Y*q,Le=(pe=Je[ne])[0]+D*(q=Le)-Y*Ne,Ne=pe[1]+D*Ne+Y*q;var pt,vt,te=(Ge=Le+D*(q=Ge)-Y*et)*Ge+(et=Ne+D*et+Y*q)*et;D-=pt=((Le=D*(q=Le)-Y*Ne-ft)*Ge+(Ne=D*Ne+Y*q-yt)*et)/te,Y-=vt=(Ne*Ge-Le*et)/te}while(k(pt)+k(vt)>1e-12&&--gt>0);if(gt){var ue=C(D*D+Y*Y),we=2*l(.5*ue),Oe=c(we);return[T(D*Oe,ue*x(we)),ue?E(Y*Oe/ue):0]}},at}Ua.invert=function(Je,$e){var at=k(Je),ft=k($e),yt=f,gt=g;ft<Ca?gt*=ft/Ca:yt+=6*L(Ca/ft);for(var D=0;D<25;D++){var Y=c(gt),q=C(x(gt)),ne=c(gt/2),pe=x(gt/2),Le=c(yt/6),Ne=x(yt/6),Ge=.5*yt*(1+q)-at,et=gt/(pe*Ne)-ft,pt=q?-.25*yt*Y/q:0,vt=.5*(1+q),te=(1+.5*gt*ne/pe)/(pe*Ne),ue=gt/pe*(Le/6)/(Ne*Ne),we=pt*ue-te*vt,Oe=(Ge*ue-et*vt)/we,De=(et*pt-Ge*te)/we;if(gt-=Oe,yt-=De,k(Oe)<f&&k(De)<f)break}return[Je<0?-yt:yt,$e<0?-gt:gt]},cs.invert=function(Je,$e){var at=i(Je)*v,ft=$e/2,yt=50;do{var gt=at*at,D=ft*ft,Y=at*ft,q=at*(.975534+D*(-.0143059*gt-.119161+-.0547009*D))-Je,ne=ft*(1.00384+gt*(.0802894+-.02855*D+199025e-9*gt)+D*(.0998909+-.0491032*D))-$e,pe=.975534-D*(.119161+3*gt*.0143059+.0547009*D),Le=-Y*(.238322+.2188036*D+.0286118*gt),Ne=Y*(.1605788+7961e-7*gt+-.0571*D),Ge=1.00384+gt*(.0802894+199025e-9*gt)+D*(3*(.0998909-.02855*gt)-.245516*D),et=Le*Ne-Ge*pe,pt=(ne*Le-q*Ge)/et,vt=(q*Ne-ne*pe)/et;at-=pt,ft-=vt}while((k(pt)>f||k(vt)>f)&&--yt>0);return yt&&[at,ft]},ro.invert=function(Je,$e){var at=Je*Je,ft=$e*$e+1,yt=at+ft,gt=Je?p*C((yt-C(yt*yt-4*at))/at):1/C(ft);return[E(Je*gt),i($e)*L(gt)]},Gs.invert=function(Je,$e){return[Je,2.5*l(d(.8*$e))-.625*v]};var io=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],ao=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Xo=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],oo=[[.9245,0],[0,0],[.01943,0]],Ws=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Ys(){return Io(io,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Oo(){return Io(ao,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Es(){return Io(Xo,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function xo(){return Io(oo,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Jo(){return Io(Ws,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Io(Je,$e){var at=(0,A.Z)(Zs(Je)).rotate($e).clipAngle(90),ft=(0,rt.Z)($e),yt=at.center;return delete at.rotate,at.center=function(gt){return arguments.length?yt(ft(gt)):ft.invert(yt())},at}var so=C(6),ei=C(7);function bo(Je,$e){var at=E(7*c($e)/(3*so));return[so*Je*(2*x(2*at/3)-1)/ei,9*c(at/3)/ei]}function xl(){return(0,A.Z)(bo).scale(164.859)}function Ls(Je,$e){for(var at,ft=(1+p)*c($e),yt=$e,gt=0;gt<25&&(yt-=at=(c(yt/2)+c(yt)-ft)/(.5*x(yt/2)+x(yt)),!(k(at)<f));gt++);return[Je*(1+2*x(yt)/x(yt/2))/(3*m),2*C(3)*c(yt/2)/C(2+m)]}function fs(){return(0,A.Z)(Ls).scale(188.209)}function Ro(Je,$e){for(var at,ft=C(6/(4+v)),yt=(1+v/4)*c($e),gt=$e/2,D=0;D<25&&(gt-=at=(gt/2+c(gt)-yt)/(.5+x(gt)),!(k(at)<f));D++);return[ft*(.5+x(gt))*Je/1.5,ft*gt]}function Ko(){return(0,A.Z)(Ro).scale(166.518)}bo.invert=function(Je,$e){var at=3*E($e*ei/9);return[Je*ei/(so*(2*x(2*at/3)-1)),E(3*c(at)*so/7)]},Ls.invert=function(Je,$e){var at=$e*C(2+m)/(2*C(3)),ft=2*E(at);return[3*m*Je/(1+2*x(ft)/x(ft/2)),E((at+c(ft))/(1+p))]},Ro.invert=function(Je,$e){var at=C(6/(4+v)),ft=$e/at;return k(k(ft)-g)<f&&(ft=ft<0?-g:g),[1.5*Je/(at*(.5+x(ft))),E((ft/2+c(ft))/(1+v/4))]};var Pa=e(26867);function Xs(Je,$e){var at=$e*$e,ft=at*at,yt=at*ft;return[Je*(.84719-.13063*at+yt*yt*(.05494*at-.04515-.02326*ft+.00331*yt)),$e*(1.01183+ft*ft*(.01926*at-.02625-.00396*ft))]}function hs(){return(0,A.Z)(Xs).scale(175.295)}function $o(Je,$e){return[Je*(1+x($e))/2,2*($e-h($e/2))]}function ps(){return(0,A.Z)($o).scale(152.63)}Xs.invert=function(Je,$e){var at,ft,yt,gt,D=$e,Y=25;do D-=at=(D*(1.01183+(yt=(ft=D*D)*ft)*yt*(.01926*ft-.02625-.00396*yt))-$e)/(1.01183+yt*yt*(.21186*ft-.23625+-.05148*yt));while(k(at)>b&&--Y>0);return[Je/(.84719-.13063*(ft=D*D)+(gt=ft*(yt=ft*ft))*gt*(.05494*ft-.04515-.02326*yt+.00331*gt)),D]},$o.invert=function(Je,$e){for(var at=$e/2,ft=0,yt=1/0;ft<10&&k(yt)>f;++ft){var gt=x($e/2);$e-=yt=($e-h($e/2)-at)/(1-.5/(gt*gt))}return[2*Je/(1+x($e)),$e]};var zo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Do(){return vi(se(1/0),zo).rotate([20,0]).scale(152.63)}function Qo(Je,$e){var at=c($e),ft=x($e),yt=i(Je);if(Je===0||k($e)===g)return[0,$e];if($e===0)return[Je,0];if(k(Je)===g)return[Je*ft,g*at];var gt=v/(2*Je)-2*Je/v,D=2*$e/v,Y=(1-D*D)/(at-D),q=gt*gt,ne=Y*Y,pe=1+q/ne,Le=1+ne/q,Ne=(gt*at/Y-gt/2)/pe,Ge=(ne*at/q+Y/2)/Le,et=Ge*Ge-(ne*at*at/q+Y*at-1)/Le;return[g*(Ne+C(Ne*Ne+ft*ft/pe)*yt),g*(Ge+C(et<0?0:et)*i(-$e*gt)*yt)]}function ds(){return(0,A.Z)(Qo).scale(127.267)}Qo.invert=function(Je,$e){var at=(Je/=g)*Je,ft=at+($e/=g)*$e,yt=v*v;return[Je?(ft-1+C((1-ft)*(1-ft)+4*at))/(2*Je)*g:0,ge(function(gt){return ft*(v*c(gt)-2*gt)*v+4*gt*gt*($e-c(gt))+2*v*gt-yt*$e},0)]};var gs=1.0148,Oa=.23185,vs=-.14499,ms=.02406,Js=1.790857183;function _o(Je,$e){var at=$e*$e;return[Je,$e*(gs+at*at*(Oa+at*(vs+ms*at)))]}function Cs(){return(0,A.Z)(_o).scale(139.319)}function ys(Je,$e){if(k($e)<f)return[Je,0];var at=h($e),ft=Je*c($e);return[c(ft)/at,$e+(1-x(ft))/at]}function Ks(){return(0,A.Z)(ys).scale(103.74)}_o.invert=function(Je,$e){$e>Js?$e=Js:$e<-1.790857183&&($e=-1.790857183);var at,ft=$e;do{var yt=ft*ft;ft-=at=(ft*(gs+yt*yt*(Oa+yt*(vs+ms*yt)))-$e)/(1.0148+yt*yt*(1.1592500000000001+yt*(.21654*yt-1.01493)))}while(k(at)>f);return[Je,ft]},ys.invert=function(Je,$e){if(k($e)<f)return[Je,0];var at,ft=Je*Je+$e*$e,yt=.5*$e,gt=10;do{var D=h(yt),Y=1/x(yt),q=ft-2*$e*yt+yt*yt;yt-=at=(D*q+2*(yt-$e))/(2+q*Y*Y+2*(yt-$e)*D)}while(k(at)>f&&--gt>0);return D=h(yt),[(k($e)<k(yt+1/D)?E(Je*D):i($e)*i(Je)*(L(k(Je*D))+g))/c(yt),yt]};var xs=e(77338),es=e(83074);function Fo(Je,$e){return[Je[0]*$e[0]+Je[1]*$e[3],Je[0]*$e[1]+Je[1]*$e[4],Je[0]*$e[2]+Je[1]*$e[5]+Je[2],Je[3]*$e[0]+Je[4]*$e[3],Je[3]*$e[1]+Je[4]*$e[4],Je[3]*$e[2]+Je[4]*$e[5]+Je[5]]}function Bo(Je,$e){return[Je[0]-$e[0],Je[1]-$e[1]]}function ai(Je){return C(Je[0]*Je[0]+Je[1]*Je[1])}function wo(Je,$e,at){function ft(Y,q){var ne,pe=$e(Y,q),Le=pe.project([Y*S,q*S]);return(ne=pe.transform)?[ne[0]*Le[0]+ne[1]*Le[1]+ne[2],-(ne[3]*Le[0]+ne[4]*Le[1]+ne[5])]:(Le[1]=-Le[1],Le)}function yt(Y,q){var ne=Y.project.invert,pe=Y.transform,Le=q;if(pe&&(pe=function(vt){var te=1/(vt[0]*vt[4]-vt[1]*vt[3]);return[te*vt[4],-te*vt[1],te*(vt[1]*vt[5]-vt[2]*vt[4]),-te*vt[3],te*vt[0],te*(vt[2]*vt[3]-vt[0]*vt[5])]}(pe),Le=[pe[0]*Le[0]+pe[1]*Le[1]+pe[2],pe[3]*Le[0]+pe[4]*Le[1]+pe[5]]),ne&&Y===function(vt){return $e(vt[0]*_,vt[1]*_)}(Ne=ne(Le)))return Ne;for(var Ne,Ge=Y.children,et=0,pt=Ge&&Ge.length;et<pt;++et)if(Ne=yt(Ge[et],q))return Ne}(function Y(q,ne){if(q.edges=function(De){for(var Ue=De.length,We=[],Ke=De[Ue-1],it=0;it<Ue;++it)We.push([Ke,Ke=De[it]]);return We}(q.face),ne.face){var pe=q.shared=function(De,Ue){for(var We,Ke,it=De.length,lt=null,At=0;At<it;++At){We=De[At];for(var Ft=Ue.length;--Ft>=0;)if(Ke=Ue[Ft],We[0]===Ke[0]&&We[1]===Ke[1]){if(lt)return[lt,We];lt=We}}}(q.face,ne.face),Le=(pt=pe.map(ne.project),vt=pe.map(q.project),te=Bo(pt[1],pt[0]),ue=Bo(vt[1],vt[0]),we=function(De,Ue){return T(De[0]*Ue[1]-De[1]*Ue[0],De[0]*Ue[0]+De[1]*Ue[1])}(te,ue),Oe=ai(te)/ai(ue),Fo([1,0,pt[0][0],0,1,pt[0][1]],Fo([Oe,0,0,0,Oe,0],Fo([x(we),c(we),0,-c(we),x(we),0],[1,0,-vt[0][0],0,1,-vt[0][1]]))));q.transform=ne.transform?Fo(ne.transform,Le):Le;for(var Ne=ne.edges,Ge=0,et=Ne.length;Ge<et;++Ge)Zi(pe[0],Ne[Ge][1])&&Zi(pe[1],Ne[Ge][0])&&(Ne[Ge]=q),Zi(pe[0],Ne[Ge][0])&&Zi(pe[1],Ne[Ge][1])&&(Ne[Ge]=q);for(Ge=0,et=(Ne=q.edges).length;Ge<et;++Ge)Zi(pe[0],Ne[Ge][0])&&Zi(pe[1],Ne[Ge][1])&&(Ne[Ge]=ne),Zi(pe[0],Ne[Ge][1])&&Zi(pe[1],Ne[Ge][0])&&(Ne[Ge]=ne)}else q.transform=ne.transform;var pt,vt,te,ue,we,Oe;return q.children&&q.children.forEach(function(De){Y(De,q)}),q})(Je,{transform:null}),Xr(Je)&&(ft.invert=function(Y,q){var ne=yt(Je,[Y,-q]);return ne&&(ne[0]*=_,ne[1]*=_,ne)});var gt=(0,A.Z)(ft),D=gt.stream;return gt.stream=function(Y){var q=gt.rotate(),ne=D(Y),pe=(gt.rotate([0,0]),D(Y));return gt.rotate(q),ne.sphere=function(){pe.polygonStart(),pe.lineStart(),To(pe,Je),pe.lineEnd(),pe.polygonEnd()},ne},gt.angle(at==null?-30:at*S)}function To(Je,$e,at){var ft,yt,gt=$e.edges,D=gt.length,Y={type:"MultiPoint",coordinates:$e.face},q=$e.face.filter(function(pt){return k(pt[1])!==90}),ne=(0,xs.Z)({type:"MultiPoint",coordinates:q}),pe=!1,Le=-1,Ne=ne[1][0]-ne[0][0],Ge=Ne===180||Ne===360?[(ne[0][0]+ne[1][0])/2,(ne[0][1]+ne[1][1])/2]:(0,He.Z)(Y);if(at)for(;++Le<D&&gt[Le]!==at;);++Le;for(var et=0;et<D;++et)yt=gt[(et+Le)%D],Array.isArray(yt)?(pe||(Je.point((ft=(0,es.Z)(yt[0],Ge)(f))[0],ft[1]),pe=!0),Je.point((ft=(0,es.Z)(yt[1],Ge)(f))[0],ft[1])):(pe=!1,yt!==at&&To(Je,yt,$e))}function Zi(Je,$e){return Je&&$e&&Je[0]===$e[0]&&Je[1]===$e[1]}function Xr(Je){return Je.project.invert||Je.children&&Je.children.some(Xr)}var Kr=e(98936),lo=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ja=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Je){return Je.map(function($e){return lo[$e]})});function Ps(Je){Je=Je||function(at){var ft=(0,He.Z)({type:"MultiPoint",coordinates:at});return(0,Kr.Z)().scale(1).translate([0,0]).rotate([-ft[0],-ft[1]])};var $e=Ja.map(function(at){return{face:at,project:Je(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,ft){var yt=$e[at];yt&&(yt.children||(yt.children=[])).push($e[ft])}),wo($e[0],function(at,ft){return $e[at<-v/2?ft<0?6:4:at<0?ft<0?2:0:at<v/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var $s=2/C(3);function No(Je,$e){var at=Et(Je,$e);return[at[0]*$s,at[1]]}function Qs(Je){Je=Je||function(at){var ft=(0,He.Z)({type:"MultiPoint",coordinates:at});return(0,A.Z)(No).translate([0,0]).scale(1).rotate(ft[1]>0?[-ft[0],0]:[180-ft[0],180])};var $e=Ja.map(function(at){return{face:at,project:Je(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,ft){var yt=$e[at];yt&&(yt.children||(yt.children=[])).push($e[ft])}),wo($e[0],function(at,ft){return $e[at<-v/2?ft<0?6:4:at<0?ft<0?2:0:at<v/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function jo(Je){Je=Je||function(gt){var D=gt.length===6?(0,He.Z)({type:"MultiPoint",coordinates:gt}):gt[0];return(0,Kr.Z)().scale(1).translate([0,0]).rotate([-D[0],-D[1]])};var $e=Ja.map(function(gt){for(var D,Y=gt.map(mi),q=Y.length,ne=Y[q-1],pe=[],Le=0;Le<q;++Le)D=Y[Le],pe.push(Uo([.9486832980505138*ne[0]+.31622776601683794*D[0],.9486832980505138*ne[1]+.31622776601683794*D[1],.9486832980505138*ne[2]+.31622776601683794*D[2]]),Uo([.9486832980505138*D[0]+.31622776601683794*ne[0],.9486832980505138*D[1]+.31622776601683794*ne[1],.9486832980505138*D[2]+.31622776601683794*ne[2]])),ne=D;return pe}),at=[],ft=[-1,0,0,1,0,1,4,5];$e.forEach(function(gt,D){for(var Y,q,ne=Ja[D],pe=ne.length,Le=at[D]=[],Ne=0;Ne<pe;++Ne)$e.push([ne[Ne],gt[(2*Ne+2)%(2*pe)],gt[(2*Ne+1)%(2*pe)]]),ft.push(D),Le.push((Y=mi(gt[(2*Ne+2)%(2*pe)]),q=mi(gt[(2*Ne+1)%(2*pe)]),[Y[1]*q[2]-Y[2]*q[1],Y[2]*q[0]-Y[0]*q[2],Y[0]*q[1]-Y[1]*q[0]]))});var yt=$e.map(function(gt){return{project:Je(gt),face:gt}});return ft.forEach(function(gt,D){var Y=yt[gt];Y&&(Y.children||(Y.children=[])).push(yt[D])}),wo(yt[0],function(gt,D){var Y=x(D),q=[Y*x(gt),Y*c(gt),c(D)],ne=gt<-v/2?D<0?6:4:gt<0?D<0?2:0:gt<v/2?D<0?3:1:D<0?7:5,pe=at[ne];return yt[uo(pe[0],q)<0?8+3*ne:uo(pe[1],q)<0?8+3*ne+1:uo(pe[2],q)<0?8+3*ne+2:ne]}).angle(-30).scale(110.625).center([0,45])}function uo(Je,$e){for(var at=0,ft=Je.length,yt=0;at<ft;++at)yt+=Je[at]*$e[at];return yt}function Uo(Je){return[T(Je[1],Je[0])*S,E(o(-1,r(1,Je[2])))*S]}function mi(Je){var $e=Je[0]*_,at=Je[1]*_,ft=x(at);return[ft*x($e),ft*c($e),c(at)]}function Ka(){}function Vo(Je,$e){var at,ft=$e.stream;if(!ft)throw new Error("invalid projection");switch(Je&&Je.type){case"Feature":at=Wi;break;case"FeatureCollection":at=Ii;break;default:at=Yi}return at(Je,ft)}function Ii(Je,$e){return{type:"FeatureCollection",features:Je.features.map(function(at){return Wi(at,$e)})}}function Wi(Je,$e){return{type:"Feature",id:Je.id,properties:Je.properties,geometry:Yi(Je.geometry,$e)}}function Yi(Je,$e){if(!Je)return null;if(Je.type==="GeometryCollection")return function(ft,yt){return{type:"GeometryCollection",geometries:ft.geometries.map(function(gt){return Yi(gt,yt)})}}(Je,$e);var at;switch(Je.type){case"Point":case"MultiPoint":at=ko;break;case"LineString":case"MultiLineString":at=Ia;break;case"Polygon":case"MultiPolygon":case"Sphere":at=Di;break;default:return null}return(0,Tn.Z)(Je,$e(at)),at.result()}No.invert=function(Je,$e){return Et.invert(Je/$s,$e)};var qi=[],sa=[],ko={point:function(Je,$e){qi.push([Je,$e])},result:function(){var Je=qi.length?qi.length<2?{type:"Point",coordinates:qi[0]}:{type:"MultiPoint",coordinates:qi}:null;return qi=[],Je}},Ia={lineStart:Ka,point:function(Je,$e){qi.push([Je,$e])},lineEnd:function(){qi.length&&(sa.push(qi),qi=[])},result:function(){var Je=sa.length?sa.length<2?{type:"LineString",coordinates:sa[0]}:{type:"MultiLineString",coordinates:sa}:null;return sa=[],Je}},Di={polygonStart:Ka,lineStart:Ka,point:function(Je,$e){qi.push([Je,$e])},lineEnd:function(){var Je=qi.length;if(Je){do qi.push(qi[0].slice());while(++Je<4);sa.push(qi),qi=[]}},polygonEnd:Ka,result:function(){if(!sa.length)return null;var Je=[],$e=[];return sa.forEach(function(at){(function(ft){if((yt=ft.length)<4)return!1;for(var yt,gt=0,D=ft[yt-1][1]*ft[0][0]-ft[yt-1][0]*ft[0][1];++gt<yt;)D+=ft[gt-1][1]*ft[gt][0]-ft[gt-1][0]*ft[gt][1];return D<=0})(at)?Je.push([at]):$e.push(at)}),$e.forEach(function(at){var ft=at[0];Je.some(function(yt){if(function(gt,D){for(var Y=D[0],q=D[1],ne=!1,pe=0,Le=gt.length,Ne=Le-1;pe<Le;Ne=pe++){var Ge=gt[pe],et=Ge[0],pt=Ge[1],vt=gt[Ne],te=vt[0],ue=vt[1];pt>q^ue>q&&Y<(te-et)*(q-pt)/(ue-pt)+et&&(ne=!ne)}return ne}(yt[0],ft))return yt.push(at),!0})||Je.push([at])}),sa=[],Je.length?Je.length>1?{type:"MultiPolygon",coordinates:Je}:{type:"Polygon",coordinates:Je[0]}:null}};function ya(Je){var $e=Je(g,0)[0]-Je(-g,0)[0];function at(ft,yt){var gt=k(ft)<g,D=Je(gt?ft:ft>0?ft-v:ft+v,yt),Y=(D[0]-D[1])*p,q=(D[0]+D[1])*p;if(gt)return[Y,q];var ne=$e*p,pe=Y>0^q>0?-1:1;return[pe*Y-i(q)*ne,pe*q-i(Y)*ne]}return Je.invert&&(at.invert=function(ft,yt){var gt=(ft+yt)*p,D=(yt-ft)*p,Y=k(gt)<.5*$e&&k(D)<.5*$e;if(!Y){var q=$e*p,ne=gt>0^D>0?-1:1,pe=-ne*ft+(D>0?1:-1)*q,Le=-ne*yt+(gt>0?1:-1)*q;gt=(-pe-Le)*p,D=(pe-Le)*p}var Ne=Je.invert(gt,D);return Y||(Ne[0]+=gt>0?v:-v),Ne}),(0,A.Z)(at).rotate([-90,-90,45]).clipAngle(179.999)}function Os(){return ya(qn).scale(176.423)}function Is(){return ya(An).scale(111.48)}function ia(Je,$e){if(!(0<=($e=+$e)&&$e<=20))throw new Error("invalid digits");function at(ne){var pe=ne.length,Le=2,Ne=new Array(pe);for(Ne[0]=+ne[0].toFixed($e),Ne[1]=+ne[1].toFixed($e);Le<pe;)Ne[Le]=ne[Le],++Le;return Ne}function ft(ne){return ne.map(at)}function yt(ne){for(var pe=at(ne[0]),Le=[pe],Ne=1;Ne<ne.length;Ne++){var Ge=at(ne[Ne]);(Ge.length>2||Ge[0]!=pe[0]||Ge[1]!=pe[1])&&(Le.push(Ge),pe=Ge)}return Le.length===1&&ne.length>1&&Le.push(at(ne[ne.length-1])),Le}function gt(ne){return ne.map(yt)}function D(ne){if(ne==null)return ne;var pe;switch(ne.type){case"GeometryCollection":pe={type:"GeometryCollection",geometries:ne.geometries.map(D)};break;case"Point":pe={type:"Point",coordinates:at(ne.coordinates)};break;case"MultiPoint":pe={type:ne.type,coordinates:ft(ne.coordinates)};break;case"LineString":pe={type:ne.type,coordinates:yt(ne.coordinates)};break;case"MultiLineString":case"Polygon":pe={type:ne.type,coordinates:gt(ne.coordinates)};break;case"MultiPolygon":pe={type:"MultiPolygon",coordinates:ne.coordinates.map(gt)};break;default:return ne}return ne.bbox!=null&&(pe.bbox=ne.bbox),pe}function Y(ne){var pe={type:"Feature",properties:ne.properties,geometry:D(ne.geometry)};return ne.id!=null&&(pe.id=ne.id),ne.bbox!=null&&(pe.bbox=ne.bbox),pe}if(Je!=null)switch(Je.type){case"Feature":return Y(Je);case"FeatureCollection":var q={type:"FeatureCollection",features:Je.features.map(Y)};return Je.bbox!=null&&(q.bbox=Je.bbox),q;default:return D(Je)}return Je}function br(Je){var $e=c(Je);function at(ft,yt){var gt=$e?h(ft*$e/2)/$e:ft/2;if(!yt)return[2*gt,-Je];var D=2*l(gt*c(yt)),Y=1/h(yt);return[c(D)*Y,yt+(1-x(D))*Y-Je]}return at.invert=function(ft,yt){if(k(yt+=Je)<f)return[$e?2*l($e*ft/2)/$e:ft,0];var gt,D=ft*ft+yt*yt,Y=0,q=10;do{var ne=h(Y),pe=1/x(Y),Le=D-2*yt*Y+Y*Y;Y-=gt=(ne*Le+2*(Y-yt))/(2+Le*pe*pe+2*(Y-yt)*ne)}while(k(gt)>f&&--q>0);var Ne=ft*(ne=h(Y)),Ge=h(k(yt)<k(Y+1/ne)?.5*E(Ne):.5*L(Ne)+v/4)/c(Y);return[$e?2*l($e*Ge)/$e:2*Ge,Y]},at}function Ho(){return Me(br).scale(131.215)}var la=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Rs(Je,$e){var at,ft=r(18,36*k($e)/v),yt=s(ft),gt=ft-yt,D=(at=la[yt])[0],Y=at[1],q=(at=la[++yt])[0],ne=at[1],pe=(at=la[r(19,++yt)])[0],Le=at[1];return[Je*(q+gt*(pe-D)/2+gt*gt*(pe-2*q+D)/2),($e>0?g:-g)*(ne+gt*(Le-Y)/2+gt*gt*(Le-2*ne+Y)/2)]}function ts(){return(0,A.Z)(Rs).scale(152.63)}function ns(Je,$e){var at=function(D){function Y(q,ne){var pe=x(ne),Le=(D-1)/(D-pe*x(q));return[Le*pe*c(q),Le*c(ne)]}return Y.invert=function(q,ne){var pe=q*q+ne*ne,Le=C(pe),Ne=(D-C(1-pe*(D+1)/(D-1)))/((D-1)/Le+Le/(D-1));return[T(q*Ne,Le*C(1-Ne*Ne)),Le?E(ne*Ne/Le):0]},Y}(Je);if(!$e)return at;var ft=x($e),yt=c($e);function gt(D,Y){var q=at(D,Y),ne=q[1],pe=ne*yt/(Je-1)+ft;return[q[0]*ft/pe,ne/pe]}return gt.invert=function(D,Y){var q=(Je-1)/(Je-1-Y*yt);return at.invert(q*D,q*Y*ft)},gt}function rs(){var Je=2,$e=0,at=(0,A.r)(ns),ft=at(Je,$e);return ft.distance=function(yt){return arguments.length?at(Je=+yt,$e):Je},ft.tilt=function(yt){return arguments.length?at(Je,$e=yt*_):$e*S},ft.scale(432.147).clipAngle(L(1/Je)*S-1e-6)}la.forEach(function(Je){Je[1]*=1.0144}),Rs.invert=function(Je,$e){var at=$e/g,ft=90*at,yt=r(18,k(ft/5)),gt=o(0,s(yt));do{var D=la[gt][1],Y=la[gt+1][1],q=la[r(19,gt+2)][1],ne=q-D,pe=q-2*Y+D,Le=2*(k(at)-Y)/ne,Ne=pe/ne,Ge=Le*(1-Ne*Le*(1-2*Ne*Le));if(Ge>=0||gt===1){ft=($e>=0?5:-5)*(Ge+yt);var et,pt=50;do Ge=(yt=r(18,k(ft)/5))-(gt=s(yt)),D=la[gt][1],Y=la[gt+1][1],q=la[r(19,gt+2)][1],ft-=(et=($e>=0?g:-g)*(Y+Ge*(q-D)/2+Ge*Ge*(q-2*Y+D)/2)-$e)*S;while(k(et)>b&&--pt>0);break}}while(--gt>=0);var vt=la[gt][0],te=la[gt+1][0],ue=la[r(19,gt+2)][0];return[Je/(te+Ge*(ue-vt)/2+Ge*Ge*(ue-2*te+vt)/2),ft*_]};var _r=-179.9999,is=179.9999,Ra=-89.9999,zs=89.9999;function bs(Je){return Je.length>0}function Xi(Je){return Je===-90||Je===90?[0,Je]:[-180,($e=Je,Math.floor(1e4*$e)/1e4)];var $e}function qo(Je){var $e=Je[0],at=Je[1],ft=!1;return $e<=_r?($e=-180,ft=!0):$e>=is&&($e=180,ft=!0),at<=Ra?(at=-90,ft=!0):at>=zs&&(at=90,ft=!0),ft?[$e,at]:Je}function co(Je){return Je.map(qo)}function xa(Je,$e,at){for(var ft=0,yt=Je.length;ft<yt;++ft){var gt=Je[ft].slice();at.push({index:-1,polygon:$e,ring:gt});for(var D=0,Y=gt.length;D<Y;++D){var q=gt[D],ne=q[0],pe=q[1];if(ne<=_r||ne>=is||pe<=Ra||pe>=zs){gt[D]=qo(q);for(var Le=D+1;Le<Y;++Le){var Ne=gt[Le],Ge=Ne[0],et=Ne[1];if(Ge>_r&&Ge<is&&et>Ra&&et<zs)break}if(Le===D+1)continue;if(D){var pt={index:-1,polygon:$e,ring:gt.slice(0,D+1)};pt.ring[pt.ring.length-1]=Xi(pe),at[at.length-1]=pt}else at.pop();if(Le>=Y)break;at.push({index:-1,polygon:$e,ring:gt=gt.slice(Le-1)}),gt[0]=Xi(gt[0][1]),D=-1,Y=gt.length}}}}function Ao(Je){var $e,at,ft,yt,gt,D,Y=Je.length,q={},ne={};for($e=0;$e<Y;++$e)ft=(at=Je[$e]).ring[0],gt=at.ring[at.ring.length-1],ft[0]!==gt[0]||ft[1]!==gt[1]?(at.index=$e,q[ft]=ne[gt]=at):(at.polygon.push(at.ring),Je[$e]=null);for($e=0;$e<Y;++$e)if(at=Je[$e]){if(ft=at.ring[0],gt=at.ring[at.ring.length-1],yt=ne[ft],D=q[gt],delete q[ft],delete ne[gt],ft[0]===gt[0]&&ft[1]===gt[1]){at.polygon.push(at.ring);continue}yt?(delete ne[ft],delete q[yt.ring[0]],yt.ring.pop(),Je[yt.index]=null,at={index:-1,polygon:yt.polygon,ring:yt.ring.concat(at.ring)},yt===D?at.polygon.push(at.ring):(at.index=Y++,Je.push(q[at.ring[0]]=ne[at.ring[at.ring.length-1]]=at))):D?(delete q[gt],delete ne[D.ring[D.ring.length-1]],at.ring.pop(),at={index:Y++,polygon:D.polygon,ring:at.ring.concat(D.ring)},Je[D.index]=null,Je.push(q[at.ring[0]]=ne[at.ring[at.ring.length-1]]=at)):(at.ring.push(at.ring[0]),at.polygon.push(at.ring))}}function Va(Je){var $e={type:"Feature",geometry:za(Je.geometry)};return Je.id!=null&&($e.id=Je.id),Je.bbox!=null&&($e.bbox=Je.bbox),Je.properties!=null&&($e.properties=Je.properties),$e}function za(Je){if(Je==null)return Je;var $e,at,ft,yt;switch(Je.type){case"GeometryCollection":$e={type:"GeometryCollection",geometries:Je.geometries.map(za)};break;case"Point":$e={type:"Point",coordinates:qo(Je.coordinates)};break;case"MultiPoint":case"LineString":$e={type:Je.type,coordinates:co(Je.coordinates)};break;case"MultiLineString":$e={type:"MultiLineString",coordinates:Je.coordinates.map(co)};break;case"Polygon":var gt=[];xa(Je.coordinates,gt,at=[]),Ao(at),$e={type:"Polygon",coordinates:gt};break;case"MultiPolygon":at=[],ft=-1,yt=Je.coordinates.length;for(var D=new Array(yt);++ft<yt;)xa(Je.coordinates[ft],D[ft]=[],at);Ao(at),$e={type:"MultiPolygon",coordinates:D.filter(bs)};break;default:return Je}return Je.bbox!=null&&($e.bbox=Je.bbox),$e}function Go(Je){if(Je==null)return Je;switch(Je.type){case"Feature":return Va(Je);case"FeatureCollection":var $e={type:"FeatureCollection",features:Je.features.map(Va)};return Je.bbox!=null&&($e.bbox=Je.bbox),$e;default:return za(Je)}}function Ji(Je,$e){var at=h($e/2),ft=c(y*at);return[Je*(.74482-.34588*ft*ft),1.70711*at]}function Da(){return(0,A.Z)(Ji).scale(146.153)}function ri(Je,$e,at){var ft=(0,es.Z)($e,at),yt=ft(.5),gt=(0,rt.Z)([-yt[0],-yt[1]])($e),D=ft.distance/2,Y=-E(c(gt[1]*_)/c(D)),q=[-yt[0],-yt[1],-(gt[0]>0?v-Y:Y)*S],ne=(0,A.Z)(Je(D)).rotate(q),pe=(0,rt.Z)(q),Le=ne.center;return delete ne.rotate,ne.center=function(Ne){return arguments.length?Le(pe(Ne)):pe.invert(Le())},ne.clipAngle(90)}function _s(Je){var $e=x(Je);function at(ft,yt){var gt=(0,Kr.M)(ft,yt);return gt[0]*=$e,gt}return at.invert=function(ft,yt){return Kr.M.invert(ft/$e,yt)},at}function Aa(){return Fa([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Fa(Je,$e){return ri(_s,Je,$e)}function $a(Je){if(!(Je*=2))return X.N;var $e=-Je/2,at=-$e,ft=Je*Je,yt=h(at),gt=.5/c(at);function D(Y,q){var ne=L(x(q)*x(Y-$e)),pe=L(x(q)*x(Y-at));return[((ne*=ne)-(pe*=pe))/(2*Je),(q<0?-1:1)*C(4*ft*pe-(ft-ne+pe)*(ft-ne+pe))/(2*Je)]}return D.invert=function(Y,q){var ne,pe,Le=q*q,Ne=x(C(Le+(ne=Y+$e)*ne)),Ge=x(C(Le+(ne=Y+at)*ne));return[T(pe=Ne-Ge,ne=(Ne+Ge)*yt),(q<0?-1:1)*L(C(ne*ne+pe*pe)*gt)]},D}function ua(){return ni([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ni(Je,$e){return ri($a,Je,$e)}function Vi(Je,$e){if(k($e)<f)return[Je,0];var at=k($e/g),ft=E(at);if(k(Je)<f||k(k($e)-g)<f)return[0,i($e)*v*h(ft/2)];var yt=x(ft),gt=k(v/Je-Je/v)/2,D=gt*gt,Y=yt/(at+yt-1),q=Y*(2/at-1),ne=q*q,pe=ne+D,Le=Y-ne,Ne=D+Y;return[i(Je)*v*(gt*Le+C(D*Le*Le-pe*(Y*Y-ne)))/pe,i($e)*v*(q*Ne-gt*C((D+1)*pe-Ne*Ne))/pe]}function Ha(){return(0,A.Z)(Vi).scale(79.4183)}function ca(Je,$e){if(k($e)<f)return[Je,0];var at=k($e/g),ft=E(at);if(k(Je)<f||k(k($e)-g)<f)return[0,i($e)*v*h(ft/2)];var yt=x(ft),gt=k(v/Je-Je/v)/2,D=gt*gt,Y=yt*(C(1+D)-gt*yt)/(1+D*at*at);return[i(Je)*v*Y,i($e)*v*C(1-Y*(2*gt+Y))]}function Qa(){return(0,A.Z)(ca).scale(79.4183)}function Mo(Je,$e){if(k($e)<f)return[Je,0];var at=$e/g,ft=E(at);if(k(Je)<f||k(k($e)-g)<f)return[0,v*h(ft/2)];var yt=(v/Je-Je/v)/2,gt=at/(1+x(ft));return[v*(i(Je)*C(yt*yt+1-gt*gt)-yt),v*gt]}function fo(){return(0,A.Z)(Mo).scale(79.4183)}function Ki(Je,$e){if(!$e)return[Je,0];var at=k($e);if(!Je||at===g)return[0,$e];var ft=at/g,yt=ft*ft,gt=(8*ft-yt*(yt+2)-5)/(2*yt*(ft-1)),D=gt*gt,Y=ft*gt,q=yt+D+2*Y,ne=ft+3*gt,pe=Je/g,Le=pe+1/pe,Ne=i(k(Je)-g)*C(Le*Le-4),Ge=Ne*Ne,et=(Ne*(q+D-1)+2*C(q*(yt+D*Ge-1)+(1-yt)*(yt*(ne*ne+4*D)+12*Y*D+4*D*D)))/(4*q+Ge);return[i(Je)*g*et,i($e)*g*C(1+Ne*k(et)-et*et)]}function Ba(){return(0,A.Z)(Ki).scale(127.16)}function Mr(Je,$e,at,ft){var yt=v/3;Je=o(Je,f),$e=o($e,f),Je=r(Je,g),$e=r($e,v-f),at=o(at,0),at=r(at,99.999999);var gt=(ft=o(ft,f))/100,D=L((at/100+1)*x(yt))/yt,Y=c(Je)/c(D*g),q=$e/v,ne=C(gt*c(Je/2)/c($e/2));return function(pe,Le,Ne,Ge,et){function pt(vt,te){var ue=Ne*c(Ge*te),we=C(1-ue*ue),Oe=C(2/(1+we*x(vt*=et)));return[pe*we*Oe*c(vt),Le*ue*Oe]}return pt.invert=function(vt,te){var ue=vt/pe,we=te/Le,Oe=C(ue*ue+we*we),De=2*E(Oe/2);return[T(vt*h(De),pe*Oe)/et,Oe&&E(te*c(De)/(Le*Ne*Oe))/Ge]},pt}(ne/C(q*Y*D),1/(ne*C(q*Y*D)),Y,D,q)}function Or(){var Je=65*_,$e=60*_,at=20,ft=200,yt=(0,A.r)(Mr),gt=yt(Je,$e,at,ft);return gt.poleline=function(D){return arguments.length?yt(Je=+D*_,$e,at,ft):Je*S},gt.parallels=function(D){return arguments.length?yt(Je,$e=+D*_,at,ft):$e*S},gt.inflation=function(D){return arguments.length?yt(Je,$e,at=+D,ft):at},gt.ratio=function(D){return arguments.length?yt(Je,$e,at,ft=+D):ft},gt.scale(163.775)}function as(){return Or().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}Ji.invert=function(Je,$e){var at=$e/1.70711,ft=c(y*at);return[Je/(.74482-.34588*ft*ft),2*l(at)]},Vi.invert=function(Je,$e){if(k($e)<f)return[Je,0];if(k(Je)<f)return[0,g*c(2*l($e/v))];var at=(Je/=v)*Je,ft=($e/=v)*$e,yt=at+ft,gt=yt*yt,D=-k($e)*(1+yt),Y=D-2*ft+at,q=-2*D+1+2*ft+gt,ne=ft/q+(2*Y*Y*Y/(q*q*q)-9*D*Y/(q*q))/27,pe=(D-Y*Y/(3*q))/q,Le=2*C(-pe/3),Ne=L(3*ne/(pe*Le))/3;return[v*(yt-1+C(1+2*(at-ft)+gt))/(2*Je),i($e)*v*(-Le*x(Ne+v/3)-Y/(3*q))]},ca.invert=function(Je,$e){if(!Je)return[0,g*c(2*l($e/v))];var at=k(Je/v),ft=(1-at*at-($e/=v)*$e)/(2*at),yt=C(ft*ft+1);return[i(Je)*v*(yt-ft),i($e)*g*c(2*T(C((1-2*ft*at)*(ft+yt)-at),C(yt+ft+at)))]},Mo.invert=function(Je,$e){if(!$e)return[Je,0];var at=$e/v,ft=(v*v*(1-at*at)-Je*Je)/(2*v*Je);return[Je?v*(i(Je)*C(ft*ft+1)-ft):0,g*c(2*l(at))]},Ki.invert=function(Je,$e){var at;if(!Je||!$e)return[Je,$e];$e/=v;var ft=i(Je)*Je/g,yt=(ft*ft-1+4*$e*$e)/k(ft),gt=yt*yt,D=2*$e,Y=50;do{var q=D*D,ne=(8*D-q*(q+2)-5)/(2*q*(D-1)),pe=(3*D-q*D-10)/(2*q*D),Le=ne*ne,Ne=D*ne,Ge=D+ne,et=Ge*Ge,pt=D+3*ne,vt=-2*Ge*(4*Ne*Le+(1-4*q+3*q*q)*(1+pe)+Le*(14*q-6-gt+(8*q-8-2*gt)*pe)+Ne*(12*q-8+(10*q-10-gt)*pe)),te=C(et*(q+Le*gt-1)+(1-q)*(q*(pt*pt+4*Le)+Le*(12*Ne+4*Le)));D-=at=(yt*(et+Le-1)+2*te-ft*(4*et+gt))/(yt*(2*ne*pe+2*Ge*(1+pe))+vt/te-8*Ge*(yt*(-1+Le+et)+2*te)*(1+pe)/(gt+4*et))}while(at>f&&--Y>0);return[i(Je)*(C(yt*yt+4)+yt)*v/4,g*D]};var ho=4*v+3*C(3),qa=2*C(2*v*C(3)/ho),$i=Ae(qa*C(3)/v,qa,ho/6);function Ds(){return(0,A.Z)($i).scale(176.84)}function fa(Je,$e){return[Je*C(1-3*$e*$e/(v*v)),$e]}function os(){return(0,A.Z)(fa).scale(152.63)}function po(Je,$e){var at=x($e),ft=x(Je)*at,yt=1-ft,gt=x(Je=T(c(Je)*at,-c($e))),D=c(Je);return[D*(at=C(1-ft*ft))-gt*yt,-gt*at-D*yt]}function oi(){return(0,A.Z)(po).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function fi(Je,$e){var at=H(Je,$e);return[(at[0]+Je/g)/2,(at[1]+$e)/2]}function Fs(){return(0,A.Z)(fi).scale(158.837)}fa.invert=function(Je,$e){return[Je/C(1-3*$e*$e/(v*v)),$e]},po.invert=function(Je,$e){var at=(Je*Je+$e*$e)/-2,ft=C(-at*(2+at)),yt=$e*at+Je*ft,gt=Je*at-$e*ft,D=C(gt*gt+yt*yt);return[T(ft*yt,D*(1+at)),D?-E(ft*gt/D):0]},fi.invert=function(Je,$e){var at=Je,ft=$e,yt=25;do{var gt,D=x(ft),Y=c(ft),q=c(2*ft),ne=Y*Y,pe=D*D,Le=c(at),Ne=x(at/2),Ge=c(at/2),et=Ge*Ge,pt=1-pe*Ne*Ne,vt=pt?L(D*Ne)*C(gt=1/pt):gt=0,te=.5*(2*vt*D*Ge+at/g)-Je,ue=.5*(vt*Y+ft)-$e,we=.5*gt*(pe*et+vt*D*Ne*ne)+.5/g,Oe=gt*(Le*q/4-vt*Y*Ge),De=.125*gt*(q*Ge-vt*Y*pe*Le),Ue=.5*gt*(ne*Ne+vt*et*D)+.5,We=Oe*De-Ue*we,Ke=(ue*Oe-te*Ue)/We,it=(te*De-ue*we)/We;at-=Ke,ft-=it}while((k(Ke)>f||k(it)>f)&&--yt>0);return[at,ft]}},33940:function($,R,e){function A(){return new k}function k(){this.reset()}e.d(R,{Z:function(){return A}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(x){T(l,x,this.t),T(this,l.s,this.s),this.s?this.t+=l.t:this.s=l.t},valueOf:function(){return this.s}};var l=new k;function T(x,d,s){var t=x.s=d+s,o=t-d,r=t-o;x.t=d-r+(s-o)}},97860:function($,R,e){e.d(R,{L9:function(){return r},ZP:function(){return b},gL:function(){return a}});var A,k,l,T,x,d=e(33940),s=e(39695),t=e(73182),o=e(72736),r=(0,d.Z)(),n=(0,d.Z)(),a={point:t.Z,lineStart:t.Z,lineEnd:t.Z,polygonStart:function(){r.reset(),a.lineStart=i,a.lineEnd=c},polygonEnd:function(){var v=+r;n.add(v<0?s.BZ+v:v),this.lineStart=this.lineEnd=this.point=t.Z},sphere:function(){n.add(s.BZ)}};function i(){a.point=h}function c(){f(A,k)}function h(v,g){a.point=f,A=v,k=g,v*=s.uR,g*=s.uR,l=v,T=(0,s.mC)(g=g/2+s.pu),x=(0,s.O$)(g)}function f(v,g){v*=s.uR,g=(g*=s.uR)/2+s.pu;var y=v-l,p=y>=0?1:-1,m=p*y,w=(0,s.mC)(g),u=(0,s.O$)(g),S=x*u,_=T*w+S*(0,s.mC)(m),E=S*p*(0,s.O$)(m);r.add((0,s.fv)(E,_)),l=v,T=w,x=u}function b(v){return n.reset(),(0,o.Z)(v,a),2*n}},77338:function($,R,e){e.d(R,{Z:function(){return L}});var A,k,l,T,x,d,s,t,o,r,n=e(33940),a=e(97860),i=e(7620),c=e(39695),h=e(72736),f=(0,n.Z)(),b={point:v,lineStart:y,lineEnd:p,polygonStart:function(){b.point=m,b.lineStart=w,b.lineEnd=u,f.reset(),a.gL.polygonStart()},polygonEnd:function(){a.gL.polygonEnd(),b.point=v,b.lineStart=y,b.lineEnd=p,a.L9<0?(A=-(l=180),k=-(T=90)):f>c.Ho?T=90:f<-c.Ho&&(k=-90),r[0]=A,r[1]=l},sphere:function(){A=-(l=180),k=-(T=90)}};function v(C,P){o.push(r=[A=C,l=C]),P<k&&(k=P),P>T&&(T=P)}function g(C,P){var I=(0,i.Og)([C*c.uR,P*c.uR]);if(t){var U=(0,i.T5)(t,I),z=[U[1],-U[0],0],H=(0,i.T5)(z,U);(0,i.iJ)(H),H=(0,i.Y1)(H);var F,N=C-x,B=N>0?1:-1,j=H[0]*c.RW*B,K=(0,c.Wn)(N)>180;K^(B*x<j&&j<B*C)?(F=H[1]*c.RW)>T&&(T=F):K^(B*x<(j=(j+360)%360-180)&&j<B*C)?(F=-H[1]*c.RW)<k&&(k=F):(P<k&&(k=P),P>T&&(T=P)),K?C<x?S(A,C)>S(A,l)&&(l=C):S(C,l)>S(A,l)&&(A=C):l>=A?(C<A&&(A=C),C>l&&(l=C)):C>x?S(A,C)>S(A,l)&&(l=C):S(C,l)>S(A,l)&&(A=C)}else o.push(r=[A=C,l=C]);P<k&&(k=P),P>T&&(T=P),t=I,x=C}function y(){b.point=g}function p(){r[0]=A,r[1]=l,b.point=v,t=null}function m(C,P){if(t){var I=C-x;f.add((0,c.Wn)(I)>180?I+(I>0?360:-360):I)}else d=C,s=P;a.gL.point(C,P),g(C,P)}function w(){a.gL.lineStart()}function u(){m(d,s),a.gL.lineEnd(),(0,c.Wn)(f)>c.Ho&&(A=-(l=180)),r[0]=A,r[1]=l,t=null}function S(C,P){return(P-=C)<0?P+360:P}function _(C,P){return C[0]-P[0]}function E(C,P){return C[0]<=C[1]?C[0]<=P&&P<=C[1]:P<C[0]||C[1]<P}function L(C){var P,I,U,z,H,F,N;if(T=l=-(A=k=1/0),o=[],(0,h.Z)(C,b),I=o.length){for(o.sort(_),P=1,H=[U=o[0]];P<I;++P)E(U,(z=o[P])[0])||E(U,z[1])?(S(U[0],z[1])>S(U[0],U[1])&&(U[1]=z[1]),S(z[0],U[1])>S(U[0],U[1])&&(U[0]=z[0])):H.push(U=z);for(F=-1/0,P=0,U=H[I=H.length-1];P<=I;U=z,++P)z=H[P],(N=S(U[1],z[0]))>F&&(F=N,A=z[0],l=U[1])}return o=r=null,A===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[A,k],[l,T]]}},7620:function($,R,e){e.d(R,{Og:function(){return l},T:function(){return s},T5:function(){return x},Y1:function(){return k},iJ:function(){return t},j9:function(){return T},s0:function(){return d}});var A=e(39695);function k(o){return[(0,A.fv)(o[1],o[0]),(0,A.ZR)(o[2])]}function l(o){var r=o[0],n=o[1],a=(0,A.mC)(n);return[a*(0,A.mC)(r),a*(0,A.O$)(r),(0,A.O$)(n)]}function T(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]}function x(o,r){return[o[1]*r[2]-o[2]*r[1],o[2]*r[0]-o[0]*r[2],o[0]*r[1]-o[1]*r[0]]}function d(o,r){o[0]+=r[0],o[1]+=r[1],o[2]+=r[2]}function s(o,r){return[o[0]*r,o[1]*r,o[2]*r]}function t(o){var r=(0,A._b)(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);o[0]/=r,o[1]/=r,o[2]/=r}},66624:function($,R,e){e.d(R,{Z:function(){return I}});var A,k,l,T,x,d,s,t,o,r,n,a,i,c,h,f,b=e(39695),v=e(73182),g=e(72736),y={sphere:v.Z,point:p,lineStart:w,lineEnd:_,polygonStart:function(){y.lineStart=E,y.lineEnd=L},polygonEnd:function(){y.lineStart=w,y.lineEnd=_}};function p(U,z){U*=b.uR,z*=b.uR;var H=(0,b.mC)(z);m(H*(0,b.mC)(U),H*(0,b.O$)(U),(0,b.O$)(z))}function m(U,z,H){++A,l+=(U-l)/A,T+=(z-T)/A,x+=(H-x)/A}function w(){y.point=u}function u(U,z){U*=b.uR,z*=b.uR;var H=(0,b.mC)(z);c=H*(0,b.mC)(U),h=H*(0,b.O$)(U),f=(0,b.O$)(z),y.point=S,m(c,h,f)}function S(U,z){U*=b.uR,z*=b.uR;var H=(0,b.mC)(z),F=H*(0,b.mC)(U),N=H*(0,b.O$)(U),B=(0,b.O$)(z),j=(0,b.fv)((0,b._b)((j=h*B-f*N)*j+(j=f*F-c*B)*j+(j=c*N-h*F)*j),c*F+h*N+f*B);k+=j,d+=j*(c+(c=F)),s+=j*(h+(h=N)),t+=j*(f+(f=B)),m(c,h,f)}function _(){y.point=p}function E(){y.point=C}function L(){P(a,i),y.point=p}function C(U,z){a=U,i=z,U*=b.uR,z*=b.uR,y.point=P;var H=(0,b.mC)(z);c=H*(0,b.mC)(U),h=H*(0,b.O$)(U),f=(0,b.O$)(z),m(c,h,f)}function P(U,z){U*=b.uR,z*=b.uR;var H=(0,b.mC)(z),F=H*(0,b.mC)(U),N=H*(0,b.O$)(U),B=(0,b.O$)(z),j=h*B-f*N,K=f*F-c*B,G=c*N-h*F,V=(0,b._b)(j*j+K*K+G*G),W=(0,b.ZR)(V),J=V&&-W/V;o+=J*j,r+=J*K,n+=J*G,k+=W,d+=W*(c+(c=F)),s+=W*(h+(h=N)),t+=W*(f+(f=B)),m(c,h,f)}function I(U){A=k=l=T=x=d=s=t=o=r=n=0,(0,g.Z)(U,y);var z=o,H=r,F=n,N=z*z+H*H+F*F;return N<b.aW&&(z=d,H=s,F=t,k<b.Ho&&(z=l,H=T,F=x),(N=z*z+H*H+F*F)<b.aW)?[NaN,NaN]:[(0,b.fv)(H,z)*b.RW,(0,b.ZR)(F/(0,b._b)(N))*b.RW]}},7613:function($,R,e){e.d(R,{m:function(){return x},Z:function(){return s}});var A=e(7620);function k(t){return function(){return t}}var l=e(39695),T=e(49386);function x(t,o,r,n,a,i){if(r){var c=(0,l.mC)(o),h=(0,l.O$)(o),f=n*r;a==null?(a=o+n*l.BZ,i=o-f/2):(a=d(c,a),i=d(c,i),(n>0?a<i:a>i)&&(a+=n*l.BZ));for(var b,v=a;n>0?v>i:v<i;v-=f)b=(0,A.Y1)([c,-h*(0,l.mC)(v),-h*(0,l.O$)(v)]),t.point(b[0],b[1])}}function d(t,o){(o=(0,A.Og)(o))[0]-=t,(0,A.iJ)(o);var r=(0,l.Kh)(-o[1]);return((-o[2]<0?-r:r)+l.BZ-l.Ho)%l.BZ}function s(){var t,o,r=k([0,0]),n=k(90),a=k(6),i={point:function(h,f){t.push(h=o(h,f)),h[0]*=l.RW,h[1]*=l.RW}};function c(){var h=r.apply(this,arguments),f=n.apply(this,arguments)*l.uR,b=a.apply(this,arguments)*l.uR;return t=[],o=(0,T.I)(-h[0]*l.uR,-h[1]*l.uR,0).invert,x(i,f,b,1),h={type:"Polygon",coordinates:[t]},t=o=null,h}return c.center=function(h){return arguments.length?(r=typeof h=="function"?h:k([+h[0],+h[1]]),c):r},c.radius=function(h){return arguments.length?(n=typeof h=="function"?h:k(+h),c):n},c.precision=function(h){return arguments.length?(a=typeof h=="function"?h:k(+h),c):a},c}},87070:function($,R,e){var A=e(97023),k=e(39695);R.Z=(0,A.Z)(function(){return!0},function(l){var T,x=NaN,d=NaN,s=NaN;return{lineStart:function(){l.lineStart(),T=1},point:function(t,o){var r=t>0?k.pi:-k.pi,n=(0,k.Wn)(t-x);(0,k.Wn)(n-k.pi)<k.Ho?(l.point(x,d=(d+o)/2>0?k.ou:-k.ou),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),l.point(t,d),T=0):s!==r&&n>=k.pi&&((0,k.Wn)(x-s)<k.Ho&&(x-=s*k.Ho),(0,k.Wn)(t-r)<k.Ho&&(t-=r*k.Ho),d=function(a,i,c,h){var f,b,v=(0,k.O$)(a-c);return(0,k.Wn)(v)>k.Ho?(0,k.z4)(((0,k.O$)(i)*(b=(0,k.mC)(h))*(0,k.O$)(c)-(0,k.O$)(h)*(f=(0,k.mC)(i))*(0,k.O$)(a))/(f*b*v)):(i+h)/2}(x,d,t,o),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),T=0),l.point(x=t,d=o),s=r},lineEnd:function(){l.lineEnd(),x=d=NaN},clean:function(){return 2-T}}},function(l,T,x,d){var s;if(l==null)s=x*k.ou,d.point(-k.pi,s),d.point(0,s),d.point(k.pi,s),d.point(k.pi,0),d.point(k.pi,-s),d.point(0,-s),d.point(-k.pi,-s),d.point(-k.pi,0),d.point(-k.pi,s);else if((0,k.Wn)(l[0]-T[0])>k.Ho){var t=l[0]<T[0]?k.pi:-k.pi;s=x*t/2,d.point(-t,s),d.point(0,s),d.point(t,s)}else d.point(T[0],T[1])},[-k.pi,-k.ou])},85272:function($,R,e){e.d(R,{Z:function(){return k}});var A=e(73182);function k(){var l,T=[];return{point:function(x,d,s){l.push([x,d,s])},lineStart:function(){T.push(l=[])},lineEnd:A.Z,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var x=T;return T=[],l=null,x}}}},1457:function($,R,e){e.d(R,{Z:function(){return d}});var A=e(7620),k=e(7613),l=e(39695),T=e(67108),x=e(97023);function d(s){var t=(0,l.mC)(s),o=6*l.uR,r=t>0,n=(0,l.Wn)(t)>l.Ho;function a(h,f){return(0,l.mC)(h)*(0,l.mC)(f)>t}function i(h,f,b){var v=(0,A.Og)(h),g=(0,A.Og)(f),y=[1,0,0],p=(0,A.T5)(v,g),m=(0,A.j9)(p,p),w=p[0],u=m-w*w;if(!u)return!b&&h;var S=t*m/u,_=-t*w/u,E=(0,A.T5)(y,p),L=(0,A.T)(y,S),C=(0,A.T)(p,_);(0,A.s0)(L,C);var P=E,I=(0,A.j9)(L,P),U=(0,A.j9)(P,P),z=I*I-U*((0,A.j9)(L,L)-1);if(!(z<0)){var H=(0,l._b)(z),F=(0,A.T)(P,(-I-H)/U);if((0,A.s0)(F,L),F=(0,A.Y1)(F),!b)return F;var N,B=h[0],j=f[0],K=h[1],G=f[1];j<B&&(N=B,B=j,j=N);var V=j-B,W=(0,l.Wn)(V-l.pi)<l.Ho;if(!W&&G<K&&(N=K,K=G,G=N),W||V<l.Ho?W?K+G>0^F[1]<((0,l.Wn)(F[0]-B)<l.Ho?K:G):K<=F[1]&&F[1]<=G:V>l.pi^(B<=F[0]&&F[0]<=j)){var J=(0,A.T)(P,(-I+H)/U);return(0,A.s0)(J,L),[F,(0,A.Y1)(J)]}}}function c(h,f){var b=r?s:l.pi-s,v=0;return h<-b?v|=1:h>b&&(v|=2),f<-b?v|=4:f>b&&(v|=8),v}return(0,x.Z)(a,function(h){var f,b,v,g,y;return{lineStart:function(){g=v=!1,y=1},point:function(p,m){var w,u=[p,m],S=a(p,m),_=r?S?0:c(p,m):S?c(p+(p<0?l.pi:-l.pi),m):0;if(!f&&(g=v=S)&&h.lineStart(),S!==v&&(!(w=i(f,u))||(0,T.Z)(f,w)||(0,T.Z)(u,w))&&(u[2]=1),S!==v)y=0,S?(h.lineStart(),w=i(u,f),h.point(w[0],w[1])):(w=i(f,u),h.point(w[0],w[1],2),h.lineEnd()),f=w;else if(n&&f&&r^S){var E;_&b||!(E=i(u,f,!0))||(y=0,r?(h.lineStart(),h.point(E[0][0],E[0][1]),h.point(E[1][0],E[1][1]),h.lineEnd()):(h.point(E[1][0],E[1][1]),h.lineEnd(),h.lineStart(),h.point(E[0][0],E[0][1],3)))}!S||f&&(0,T.Z)(f,u)||h.point(u[0],u[1]),f=u,v=S,b=_},lineEnd:function(){v&&h.lineEnd(),f=null},clean:function(){return y|(g&&v)<<1}}},function(h,f,b,v){(0,k.m)(v,s,o,b,h,f)},r?[0,-s]:[-l.pi,s-l.pi])}},97023:function($,R,e){e.d(R,{Z:function(){return d}});var A=e(85272),k=e(46225),l=e(39695),T=e(23071),x=e(33064);function d(o,r,n,a){return function(i){var c,h,f,b=r(i),v=(0,A.Z)(),g=r(v),y=!1,p={point:m,lineStart:u,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=E,p.lineEnd=L,h=[],c=[]},polygonEnd:function(){p.point=m,p.lineStart=u,p.lineEnd=S,h=(0,x.TS)(h);var C=(0,T.Z)(c,a);h.length?(y||(i.polygonStart(),y=!0),(0,k.Z)(h,t,C,n,i)):C&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),h=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(C,P){o(C,P)&&i.point(C,P)}function w(C,P){b.point(C,P)}function u(){p.point=w,b.lineStart()}function S(){p.point=m,b.lineEnd()}function _(C,P){f.push([C,P]),g.point(C,P)}function E(){g.lineStart(),f=[]}function L(){_(f[0][0],f[0][1]),g.lineEnd();var C,P,I,U,z=g.clean(),H=v.result(),F=H.length;if(f.pop(),c.push(f),f=null,F)if(1&z){if((P=(I=H[0]).length-1)>0){for(y||(i.polygonStart(),y=!0),i.lineStart(),C=0;C<P;++C)i.point((U=I[C])[0],U[1]);i.lineEnd()}}else F>1&&2&z&&H.push(H.pop().concat(H.shift())),h.push(H.filter(s))}return p}}function s(o){return o.length>1}function t(o,r){return((o=o.x)[0]<0?o[1]-l.ou-l.Ho:l.ou-o[1])-((r=r.x)[0]<0?r[1]-l.ou-l.Ho:l.ou-r[1])}},87605:function($,R,e){e.d(R,{Z:function(){return s}});var A=e(39695),k=e(85272),l=e(46225),T=e(33064),x=1e9,d=-x;function s(t,o,r,n){function a(b,v){return t<=b&&b<=r&&o<=v&&v<=n}function i(b,v,g,y){var p=0,m=0;if(b==null||(p=c(b,g))!==(m=c(v,g))||f(b,v)<0^g>0)do y.point(p===0||p===3?t:r,p>1?n:o);while((p=(p+g+4)%4)!==m);else y.point(v[0],v[1])}function c(b,v){return(0,A.Wn)(b[0]-t)<A.Ho?v>0?0:3:(0,A.Wn)(b[0]-r)<A.Ho?v>0?2:1:(0,A.Wn)(b[1]-o)<A.Ho?v>0?1:0:v>0?3:2}function h(b,v){return f(b.x,v.x)}function f(b,v){var g=c(b,1),y=c(v,1);return g!==y?g-y:g===0?v[1]-b[1]:g===1?b[0]-v[0]:g===2?b[1]-v[1]:v[0]-b[0]}return function(b){var v,g,y,p,m,w,u,S,_,E,L,C=b,P=(0,k.Z)(),I={point:U,lineStart:function(){I.point=z,g&&g.push(y=[]),E=!0,_=!1,u=S=NaN},lineEnd:function(){v&&(z(p,m),w&&_&&P.rejoin(),v.push(P.result())),I.point=U,_&&C.lineEnd()},polygonStart:function(){C=P,v=[],g=[],L=!0},polygonEnd:function(){var H=function(){for(var B=0,j=0,K=g.length;j<K;++j)for(var G,V,W=g[j],J=1,X=W.length,ee=W[0],re=ee[0],ie=ee[1];J<X;++J)G=re,V=ie,re=(ee=W[J])[0],ie=ee[1],V<=n?ie>n&&(re-G)*(n-V)>(ie-V)*(t-G)&&++B:ie<=n&&(re-G)*(n-V)<(ie-V)*(t-G)&&--B;return B}(),F=L&&H,N=(v=(0,T.TS)(v)).length;(F||N)&&(b.polygonStart(),F&&(b.lineStart(),i(null,null,1,b),b.lineEnd()),N&&(0,l.Z)(v,h,H,i,b),b.polygonEnd()),C=b,v=g=y=null}};function U(H,F){a(H,F)&&C.point(H,F)}function z(H,F){var N=a(H,F);if(g&&y.push([H,F]),E)p=H,m=F,w=N,E=!1,N&&(C.lineStart(),C.point(H,F));else if(N&&_)C.point(H,F);else{var B=[u=Math.max(d,Math.min(x,u)),S=Math.max(d,Math.min(x,S))],j=[H=Math.max(d,Math.min(x,H)),F=Math.max(d,Math.min(x,F))];(function(K,G,V,W,J,X){var ee,re=K[0],ie=K[1],se=0,fe=1,ye=G[0]-re,ge=G[1]-ie;if(ee=V-re,ye||!(ee>0)){if(ee/=ye,ye<0){if(ee<se)return;ee<fe&&(fe=ee)}else if(ye>0){if(ee>fe)return;ee>se&&(se=ee)}if(ee=J-re,ye||!(ee<0)){if(ee/=ye,ye<0){if(ee>fe)return;ee>se&&(se=ee)}else if(ye>0){if(ee<se)return;ee<fe&&(fe=ee)}if(ee=W-ie,ge||!(ee>0)){if(ee/=ge,ge<0){if(ee<se)return;ee<fe&&(fe=ee)}else if(ge>0){if(ee>fe)return;ee>se&&(se=ee)}if(ee=X-ie,ge||!(ee<0)){if(ee/=ge,ge<0){if(ee>fe)return;ee>se&&(se=ee)}else if(ge>0){if(ee<se)return;ee<fe&&(fe=ee)}return se>0&&(K[0]=re+se*ye,K[1]=ie+se*ge),fe<1&&(G[0]=re+fe*ye,G[1]=ie+fe*ge),!0}}}}})(B,j,t,o,r,n)?(_||(C.lineStart(),C.point(B[0],B[1])),C.point(j[0],j[1]),N||C.lineEnd(),L=!1):N&&(C.lineStart(),C.point(H,F),L=!1)}u=H,S=F,_=N}return I}}},46225:function($,R,e){e.d(R,{Z:function(){return T}});var A=e(67108),k=e(39695);function l(d,s,t,o){this.x=d,this.z=s,this.o=t,this.e=o,this.v=!1,this.n=this.p=null}function T(d,s,t,o,r){var n,a,i=[],c=[];if(d.forEach(function(y){if(!((p=y.length-1)<=0)){var p,m,w=y[0],u=y[p];if((0,A.Z)(w,u)){if(!w[2]&&!u[2]){for(r.lineStart(),n=0;n<p;++n)r.point((w=y[n])[0],w[1]);return void r.lineEnd()}u[0]+=2*k.Ho}i.push(m=new l(w,y,null,!0)),c.push(m.o=new l(w,null,m,!1)),i.push(m=new l(u,y,null,!1)),c.push(m.o=new l(u,null,m,!0))}}),i.length){for(c.sort(s),x(i),x(c),n=0,a=c.length;n<a;++n)c[n].e=t=!t;for(var h,f,b=i[0];;){for(var v=b,g=!0;v.v;)if((v=v.n)===b)return;h=v.z,r.lineStart();do{if(v.v=v.o.v=!0,v.e){if(g)for(n=0,a=h.length;n<a;++n)r.point((f=h[n])[0],f[1]);else o(v.x,v.n.x,1,r);v=v.n}else{if(g)for(h=v.p.z,n=h.length-1;n>=0;--n)r.point((f=h[n])[0],f[1]);else o(v.x,v.p.x,-1,r);v=v.p}h=(v=v.o).z,g=!g}while(!v.v);r.lineEnd()}}}function x(d){if(s=d.length){for(var s,t,o=0,r=d[0];++o<s;)r.n=t=d[o],t.p=r,r=t;r.n=t=d[0],t.p=r}}},96059:function($,R,e){function A(k,l){function T(x,d){return x=k(x,d),l(x[0],x[1])}return k.invert&&l.invert&&(T.invert=function(x,d){return(x=l.invert(x,d))&&k.invert(x[0],x[1])}),T}e.d(R,{Z:function(){return A}})},8593:function($,R,e){function A(k){return k}e.d(R,{Z:function(){return A}})},27362:function($,R,e){e.r(R),e.d(R,{geoAlbers:function(){return Mt},geoAlbersUsa:function(){return kt},geoArea:function(){return A.ZP},geoAzimuthalEqualArea:function(){return wt.Z},geoAzimuthalEqualAreaRaw:function(){return wt.l},geoAzimuthalEquidistant:function(){return Ot.Z},geoAzimuthalEquidistantRaw:function(){return Ot.N},geoBounds:function(){return k.Z},geoCentroid:function(){return l.Z},geoCircle:function(){return T.Z},geoClipAntimeridian:function(){return x.Z},geoClipCircle:function(){return d.Z},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.Z},geoConicConformal:function(){return yn},geoConicConformalRaw:function(){return cn},geoConicEqualArea:function(){return Lt},geoConicEqualAreaRaw:function(){return Ct},geoConicEquidistant:function(){return Un},geoConicEquidistantRaw:function(){return Mn},geoContains:function(){return H},geoDistance:function(){return S},geoEqualEarth:function(){return En},geoEqualEarthRaw:function(){return On},geoEquirectangular:function(){return Kt.Z},geoEquirectangularRaw:function(){return Kt.k},geoGnomonic:function(){return Dn.Z},geoGnomonicRaw:function(){return Dn.M},geoGraticule:function(){return j},geoGraticule10:function(){return K},geoIdentity:function(){return Fn},geoInterpolate:function(){return X.Z},geoLength:function(){return m},geoMercator:function(){return Dt},geoMercatorRaw:function(){return Nt},geoNaturalEarth1:function(){return nr.Z},geoNaturalEarth1Raw:function(){return nr.K},geoOrthographic:function(){return $n.Z},geoOrthographicRaw:function(){return $n.I},geoPath:function(){return nt},geoProjection:function(){return ut.Z},geoProjectionMutator:function(){return ut.r},geoRotation:function(){return It.Z},geoStereographic:function(){return Yn},geoStereographicRaw:function(){return dr},geoStream:function(){return f.Z},geoTransform:function(){return Zn.Z},geoTransverseMercator:function(){return ur},geoTransverseMercatorRaw:function(){return Vn}});var A=e(97860),k=e(77338),l=e(66624),T=e(7613),x=e(87070),d=e(1457),s=e(87605);function t(){var Gt,tn,In,_n=0,Sn=0,jn=960,qn=500;return In={stream:function(ar){return Gt&&tn===ar?Gt:Gt=(0,s.Z)(_n,Sn,jn,qn)(tn=ar)},extent:function(ar){return arguments.length?(_n=+ar[0][0],Sn=+ar[0][1],jn=+ar[1][0],qn=+ar[1][1],Gt=tn=null,In):[[_n,Sn],[jn,qn]]}}}var o,r,n,a=e(23071),i=e(33940),c=e(39695),h=e(73182),f=e(72736),b=(0,i.Z)(),v={sphere:h.Z,point:h.Z,lineStart:function(){v.point=y,v.lineEnd=g},lineEnd:h.Z,polygonStart:h.Z,polygonEnd:h.Z};function g(){v.point=v.lineEnd=h.Z}function y(Gt,tn){Gt*=c.uR,tn*=c.uR,o=Gt,r=(0,c.O$)(tn),n=(0,c.mC)(tn),v.point=p}function p(Gt,tn){Gt*=c.uR,tn*=c.uR;var In=(0,c.O$)(tn),_n=(0,c.mC)(tn),Sn=(0,c.Wn)(Gt-o),jn=(0,c.mC)(Sn),qn=_n*(0,c.O$)(Sn),ar=n*In-r*_n*jn,cr=r*In+n*_n*jn;b.add((0,c.fv)((0,c._b)(qn*qn+ar*ar),cr)),o=Gt,r=In,n=_n}function m(Gt){return b.reset(),(0,f.Z)(Gt,v),+b}var w=[null,null],u={type:"LineString",coordinates:w};function S(Gt,tn){return w[0]=Gt,w[1]=tn,m(u)}var _={Feature:function(Gt,tn){return L(Gt.geometry,tn)},FeatureCollection:function(Gt,tn){for(var In=Gt.features,_n=-1,Sn=In.length;++_n<Sn;)if(L(In[_n].geometry,tn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Gt,tn){return C(Gt.coordinates,tn)},MultiPoint:function(Gt,tn){for(var In=Gt.coordinates,_n=-1,Sn=In.length;++_n<Sn;)if(C(In[_n],tn))return!0;return!1},LineString:function(Gt,tn){return P(Gt.coordinates,tn)},MultiLineString:function(Gt,tn){for(var In=Gt.coordinates,_n=-1,Sn=In.length;++_n<Sn;)if(P(In[_n],tn))return!0;return!1},Polygon:function(Gt,tn){return I(Gt.coordinates,tn)},MultiPolygon:function(Gt,tn){for(var In=Gt.coordinates,_n=-1,Sn=In.length;++_n<Sn;)if(I(In[_n],tn))return!0;return!1},GeometryCollection:function(Gt,tn){for(var In=Gt.geometries,_n=-1,Sn=In.length;++_n<Sn;)if(L(In[_n],tn))return!0;return!1}};function L(Gt,tn){return!(!Gt||!E.hasOwnProperty(Gt.type))&&E[Gt.type](Gt,tn)}function C(Gt,tn){return S(Gt,tn)===0}function P(Gt,tn){for(var In,_n,Sn,jn=0,qn=Gt.length;jn<qn;jn++){if((_n=S(Gt[jn],tn))===0||jn>0&&(Sn=S(Gt[jn],Gt[jn-1]))>0&&In<=Sn&&_n<=Sn&&(In+_n-Sn)*(1-Math.pow((In-_n)/Sn,2))<c.aW*Sn)return!0;In=_n}return!1}function I(Gt,tn){return!!(0,a.Z)(Gt.map(U),z(tn))}function U(Gt){return(Gt=Gt.map(z)).pop(),Gt}function z(Gt){return[Gt[0]*c.uR,Gt[1]*c.uR]}function H(Gt,tn){return(Gt&&_.hasOwnProperty(Gt.type)?_[Gt.type]:L)(Gt,tn)}var F=e(33064);function N(Gt,tn,In){var _n=(0,F.w6)(Gt,tn-c.Ho,In).concat(tn);return function(Sn){return _n.map(function(jn){return[Sn,jn]})}}function B(Gt,tn,In){var _n=(0,F.w6)(Gt,tn-c.Ho,In).concat(tn);return function(Sn){return _n.map(function(jn){return[jn,Sn]})}}function j(){var Gt,tn,In,_n,Sn,jn,qn,ar,cr,$t,An,Rt,Yt=10,rn=Yt,bn=90,ln=360,kn=2.5;function Tn(){return{type:"MultiLineString",coordinates:hn()}}function hn(){return(0,F.w6)((0,c.mD)(_n/bn)*bn,In,bn).map(An).concat((0,F.w6)((0,c.mD)(ar/ln)*ln,qn,ln).map(Rt)).concat((0,F.w6)((0,c.mD)(tn/Yt)*Yt,Gt,Yt).filter(function(nn){return(0,c.Wn)(nn%bn)>c.Ho}).map(cr)).concat((0,F.w6)((0,c.mD)(jn/rn)*rn,Sn,rn).filter(function(nn){return(0,c.Wn)(nn%ln)>c.Ho}).map($t))}return Tn.lines=function(){return hn().map(function(nn){return{type:"LineString",coordinates:nn}})},Tn.outline=function(){return{type:"Polygon",coordinates:[An(_n).concat(Rt(qn).slice(1),An(In).reverse().slice(1),Rt(ar).reverse().slice(1))]}},Tn.extent=function(nn){return arguments.length?Tn.extentMajor(nn).extentMinor(nn):Tn.extentMinor()},Tn.extentMajor=function(nn){return arguments.length?(_n=+nn[0][0],In=+nn[1][0],ar=+nn[0][1],qn=+nn[1][1],_n>In&&(nn=_n,_n=In,In=nn),ar>qn&&(nn=ar,ar=qn,qn=nn),Tn.precision(kn)):[[_n,ar],[In,qn]]},Tn.extentMinor=function(nn){return arguments.length?(tn=+nn[0][0],Gt=+nn[1][0],jn=+nn[0][1],Sn=+nn[1][1],tn>Gt&&(nn=tn,tn=Gt,Gt=nn),jn>Sn&&(nn=jn,jn=Sn,Sn=nn),Tn.precision(kn)):[[tn,jn],[Gt,Sn]]},Tn.step=function(nn){return arguments.length?Tn.stepMajor(nn).stepMinor(nn):Tn.stepMinor()},Tn.stepMajor=function(nn){return arguments.length?(bn=+nn[0],ln=+nn[1],Tn):[bn,ln]},Tn.stepMinor=function(nn){return arguments.length?(Yt=+nn[0],rn=+nn[1],Tn):[Yt,rn]},Tn.precision=function(nn){return arguments.length?(kn=+nn,cr=N(jn,Sn,90),$t=B(tn,Gt,kn),An=N(ar,qn,90),Rt=B(_n,In,kn),Tn):kn},Tn.extentMajor([[-180,-90+c.Ho],[180,90-c.Ho]]).extentMinor([[-180,-80-c.Ho],[180,80+c.Ho]])}function K(){return j()()}var G,V,W,J,X=e(83074),ee=e(8593),re=(0,i.Z)(),ie=(0,i.Z)(),se={point:h.Z,lineStart:h.Z,lineEnd:h.Z,polygonStart:function(){se.lineStart=fe,se.lineEnd=he},polygonEnd:function(){se.lineStart=se.lineEnd=se.point=h.Z,re.add((0,c.Wn)(ie)),ie.reset()},result:function(){var Gt=re/2;return re.reset(),Gt}};function fe(){se.point=ye}function ye(Gt,tn){se.point=ge,G=W=Gt,V=J=tn}function ge(Gt,tn){ie.add(J*Gt-W*tn),W=Gt,J=tn}function he(){ge(G,V)}var ve,Ie,xe,Ae,Se=se,Te=e(3559),Q=0,oe=0,ce=0,me=0,Me=0,Re=0,Ce=0,ze=0,le=0,de={point:be,lineStart:Fe,lineEnd:rt,polygonStart:function(){de.lineStart=tt,de.lineEnd=ot},polygonEnd:function(){de.point=be,de.lineStart=Fe,de.lineEnd=rt},result:function(){var Gt=le?[Ce/le,ze/le]:Re?[me/Re,Me/Re]:ce?[Q/ce,oe/ce]:[NaN,NaN];return Q=oe=ce=me=Me=Re=Ce=ze=le=0,Gt}};function be(Gt,tn){Q+=Gt,oe+=tn,++ce}function Fe(){de.point=Ve}function Ve(Gt,tn){de.point=He,be(xe=Gt,Ae=tn)}function He(Gt,tn){var In=Gt-xe,_n=tn-Ae,Sn=(0,c._b)(In*In+_n*_n);me+=Sn*(xe+Gt)/2,Me+=Sn*(Ae+tn)/2,Re+=Sn,be(xe=Gt,Ae=tn)}function rt(){de.point=be}function tt(){de.point=ht}function ot(){_t(ve,Ie)}function ht(Gt,tn){de.point=_t,be(ve=xe=Gt,Ie=Ae=tn)}function _t(Gt,tn){var In=Gt-xe,_n=tn-Ae,Sn=(0,c._b)(In*In+_n*_n);me+=Sn*(xe+Gt)/2,Me+=Sn*(Ae+tn)/2,Re+=Sn,Ce+=(Sn=Ae*Gt-xe*tn)*(xe+Gt),ze+=Sn*(Ae+tn),le+=3*Sn,be(xe=Gt,Ae=tn)}var dt=de;function bt(Gt){this._context=Gt}bt.prototype={_radius:4.5,pointRadius:function(Gt){return this._radius=Gt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Gt,tn){switch(this._point){case 0:this._context.moveTo(Gt,tn),this._point=1;break;case 1:this._context.lineTo(Gt,tn);break;default:this._context.moveTo(Gt+this._radius,tn),this._context.arc(Gt,tn,this._radius,0,c.BZ)}},result:h.Z};var St,Et,zt,Ut,Pt,Ze=(0,i.Z)(),Ye={point:h.Z,lineStart:function(){Ye.point=Be},lineEnd:function(){St&&ke(Et,zt),Ye.point=h.Z},polygonStart:function(){St=!0},polygonEnd:function(){St=null},result:function(){var Gt=+Ze;return Ze.reset(),Gt}};function Be(Gt,tn){Ye.point=ke,Et=Ut=Gt,zt=Pt=tn}function ke(Gt,tn){Ut-=Gt,Pt-=tn,Ze.add((0,c._b)(Ut*Ut+Pt*Pt)),Ut=Gt,Pt=tn}var Pe=Ye;function qe(){this._string=[]}function Xe(Gt){return"m0,"+Gt+"a"+Gt+","+Gt+" 0 1,1 0,"+-2*Gt+"a"+Gt+","+Gt+" 0 1,1 0,"+2*Gt+"z"}function nt(Gt,tn){var In,_n,Sn=4.5;function jn(qn){return qn&&(typeof Sn=="function"&&_n.pointRadius(+Sn.apply(this,arguments)),(0,f.Z)(qn,In(_n))),_n.result()}return jn.area=function(qn){return(0,f.Z)(qn,In(Se)),Se.result()},jn.measure=function(qn){return(0,f.Z)(qn,In(Pe)),Pe.result()},jn.bounds=function(qn){return(0,f.Z)(qn,In(Te.Z)),Te.Z.result()},jn.centroid=function(qn){return(0,f.Z)(qn,In(dt)),dt.result()},jn.projection=function(qn){return arguments.length?(In=qn==null?(Gt=null,ee.Z):(Gt=qn).stream,jn):Gt},jn.context=function(qn){return arguments.length?(_n=qn==null?(tn=null,new qe):new bt(tn=qn),typeof Sn!="function"&&_n.pointRadius(Sn),jn):tn},jn.pointRadius=function(qn){return arguments.length?(Sn=typeof qn=="function"?qn:(_n.pointRadius(+qn),+qn),jn):Sn},jn.projection(Gt).context(tn)}qe.prototype={_radius:4.5,_circle:Xe(4.5),pointRadius:function(Gt){return(Gt=+Gt)!==this._radius&&(this._radius=Gt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Gt,tn){switch(this._point){case 0:this._string.push("M",Gt,",",tn),this._point=1;break;case 1:this._string.push("L",Gt,",",tn);break;default:this._circle==null&&(this._circle=Xe(this._radius)),this._string.push("M",Gt,",",tn,this._circle)}},result:function(){if(this._string.length){var Gt=this._string.join("");return this._string=[],Gt}return null}};var ut=e(15002);function ct(Gt){var tn=0,In=c.pi/3,_n=(0,ut.r)(Gt),Sn=_n(tn,In);return Sn.parallels=function(jn){return arguments.length?_n(tn=jn[0]*c.uR,In=jn[1]*c.uR):[tn*c.RW,In*c.RW]},Sn}function Ct(Gt,tn){var In=(0,c.O$)(Gt),_n=(In+(0,c.O$)(tn))/2;if((0,c.Wn)(_n)<c.Ho)return function(ar){var cr=(0,c.mC)(ar);function $t(An,Rt){return[An*cr,(0,c.O$)(Rt)/cr]}return $t.invert=function(An,Rt){return[An/cr,(0,c.ZR)(Rt*cr)]},$t}(Gt);var Sn=1+In*(2*_n-In),jn=(0,c._b)(Sn)/_n;function qn(ar,cr){var $t=(0,c._b)(Sn-2*_n*(0,c.O$)(cr))/_n;return[$t*(0,c.O$)(ar*=_n),jn-$t*(0,c.mC)(ar)]}return qn.invert=function(ar,cr){var $t=jn-cr,An=(0,c.fv)(ar,(0,c.Wn)($t))*(0,c.Xx)($t);return $t*_n<0&&(An-=c.pi*(0,c.Xx)(ar)*(0,c.Xx)($t)),[An/_n,(0,c.ZR)((Sn-(ar*ar+$t*$t)*_n*_n)/(2*_n))]},qn}function Lt(){return ct(Ct).scale(155.424).center([0,33.6442])}function Mt(){return Lt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var mt=e(47589);function kt(){var Gt,tn,In,_n,Sn,jn,qn=Mt(),ar=Lt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),cr=Lt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),$t={point:function(Yt,rn){jn=[Yt,rn]}};function An(Yt){var rn=Yt[0],bn=Yt[1];return jn=null,In.point(rn,bn),jn||(_n.point(rn,bn),jn)||(Sn.point(rn,bn),jn)}function Rt(){return Gt=tn=null,An}return An.invert=function(Yt){var rn=qn.scale(),bn=qn.translate(),ln=(Yt[0]-bn[0])/rn,kn=(Yt[1]-bn[1])/rn;return(kn>=.12&&kn<.234&&ln>=-.425&&ln<-.214?ar:kn>=.166&&kn<.234&&ln>=-.214&&ln<-.115?cr:qn).invert(Yt)},An.stream=function(Yt){return Gt&&tn===Yt?Gt:(rn=[qn.stream(tn=Yt),ar.stream(Yt),cr.stream(Yt)],bn=rn.length,Gt={point:function(ln,kn){for(var Tn=-1;++Tn<bn;)rn[Tn].point(ln,kn)},sphere:function(){for(var ln=-1;++ln<bn;)rn[ln].sphere()},lineStart:function(){for(var ln=-1;++ln<bn;)rn[ln].lineStart()},lineEnd:function(){for(var ln=-1;++ln<bn;)rn[ln].lineEnd()},polygonStart:function(){for(var ln=-1;++ln<bn;)rn[ln].polygonStart()},polygonEnd:function(){for(var ln=-1;++ln<bn;)rn[ln].polygonEnd()}});var rn,bn},An.precision=function(Yt){return arguments.length?(qn.precision(Yt),ar.precision(Yt),cr.precision(Yt),Rt()):qn.precision()},An.scale=function(Yt){return arguments.length?(qn.scale(Yt),ar.scale(.35*Yt),cr.scale(Yt),An.translate(qn.translate())):qn.scale()},An.translate=function(Yt){if(!arguments.length)return qn.translate();var rn=qn.scale(),bn=+Yt[0],ln=+Yt[1];return In=qn.translate(Yt).clipExtent([[bn-.455*rn,ln-.238*rn],[bn+.455*rn,ln+.238*rn]]).stream($t),_n=ar.translate([bn-.307*rn,ln+.201*rn]).clipExtent([[bn-.425*rn+c.Ho,ln+.12*rn+c.Ho],[bn-.214*rn-c.Ho,ln+.234*rn-c.Ho]]).stream($t),Sn=cr.translate([bn-.205*rn,ln+.212*rn]).clipExtent([[bn-.214*rn+c.Ho,ln+.166*rn+c.Ho],[bn-.115*rn-c.Ho,ln+.234*rn-c.Ho]]).stream($t),Rt()},An.fitExtent=function(Yt,rn){return(0,mt.qg)(An,Yt,rn)},An.fitSize=function(Yt,rn){return(0,mt.mF)(An,Yt,rn)},An.fitWidth=function(Yt,rn){return(0,mt.V6)(An,Yt,rn)},An.fitHeight=function(Yt,rn){return(0,mt.rf)(An,Yt,rn)},An.scale(1070)}var wt=e(12956),Ot=e(17889),It=e(49386);function Nt(Gt,tn){return[Gt,(0,c.cM)((0,c.OR)((c.ou+tn)/2))]}function Dt(){return qt(Nt).scale(961/c.BZ)}function qt(Gt){var tn,In,_n,Sn=(0,ut.Z)(Gt),jn=Sn.center,qn=Sn.scale,ar=Sn.translate,cr=Sn.clipExtent,$t=null;function An(){var Rt=c.pi*qn(),Yt=Sn((0,It.Z)(Sn.rotate()).invert([0,0]));return cr($t==null?[[Yt[0]-Rt,Yt[1]-Rt],[Yt[0]+Rt,Yt[1]+Rt]]:Gt===Nt?[[Math.max(Yt[0]-Rt,$t),tn],[Math.min(Yt[0]+Rt,In),_n]]:[[$t,Math.max(Yt[1]-Rt,tn)],[In,Math.min(Yt[1]+Rt,_n)]])}return Sn.scale=function(Rt){return arguments.length?(qn(Rt),An()):qn()},Sn.translate=function(Rt){return arguments.length?(ar(Rt),An()):ar()},Sn.center=function(Rt){return arguments.length?(jn(Rt),An()):jn()},Sn.clipExtent=function(Rt){return arguments.length?(Rt==null?$t=tn=In=_n=null:($t=+Rt[0][0],tn=+Rt[0][1],In=+Rt[1][0],_n=+Rt[1][1]),An()):$t==null?null:[[$t,tn],[In,_n]]},An()}function Xt(Gt){return(0,c.OR)((c.ou+Gt)/2)}function cn(Gt,tn){var In=(0,c.mC)(Gt),_n=Gt===tn?(0,c.O$)(Gt):(0,c.cM)(In/(0,c.mC)(tn))/(0,c.cM)(Xt(tn)/Xt(Gt)),Sn=In*(0,c.sQ)(Xt(Gt),_n)/_n;if(!_n)return Nt;function jn(qn,ar){Sn>0?ar<-c.ou+c.Ho&&(ar=-c.ou+c.Ho):ar>c.ou-c.Ho&&(ar=c.ou-c.Ho);var cr=Sn/(0,c.sQ)(Xt(ar),_n);return[cr*(0,c.O$)(_n*qn),Sn-cr*(0,c.mC)(_n*qn)]}return jn.invert=function(qn,ar){var cr=Sn-ar,$t=(0,c.Xx)(_n)*(0,c._b)(qn*qn+cr*cr),An=(0,c.fv)(qn,(0,c.Wn)(cr))*(0,c.Xx)(cr);return cr*_n<0&&(An-=c.pi*(0,c.Xx)(qn)*(0,c.Xx)(cr)),[An/_n,2*(0,c.z4)((0,c.sQ)(Sn/$t,1/_n))-c.ou]},jn}function yn(){return ct(cn).scale(109.5).parallels([30,30])}Nt.invert=function(Gt,tn){return[Gt,2*(0,c.z4)((0,c.Qq)(tn))-c.ou]};var Kt=e(97492);function Mn(Gt,tn){var In=(0,c.mC)(Gt),_n=Gt===tn?(0,c.O$)(Gt):(In-(0,c.mC)(tn))/(tn-Gt),Sn=In/_n+Gt;if((0,c.Wn)(_n)<c.Ho)return Kt.k;function jn(qn,ar){var cr=Sn-ar,$t=_n*qn;return[cr*(0,c.O$)($t),Sn-cr*(0,c.mC)($t)]}return jn.invert=function(qn,ar){var cr=Sn-ar,$t=(0,c.fv)(qn,(0,c.Wn)(cr))*(0,c.Xx)(cr);return cr*_n<0&&($t-=c.pi*(0,c.Xx)(qn)*(0,c.Xx)(cr)),[$t/_n,Sn-(0,c.Xx)(_n)*(0,c._b)(qn*qn+cr*cr)]},jn}function Un(){return ct(Mn).scale(131.154).center([0,13.9389])}var xn=1.340264,dn=-.081106,gn=893e-6,an=.003796,sn=(0,c._b)(3)/2;function On(Gt,tn){var In=(0,c.ZR)(sn*(0,c.O$)(tn)),_n=In*In,Sn=_n*_n*_n;return[Gt*(0,c.mC)(In)/(sn*(xn+3*dn*_n+Sn*(7*gn+9*an*_n))),In*(xn+dn*_n+Sn*(gn+an*_n))]}function En(){return(0,ut.Z)(On).scale(177.158)}On.invert=function(Gt,tn){for(var In,_n=tn,Sn=_n*_n,jn=Sn*Sn*Sn,qn=0;qn<12&&(jn=(Sn=(_n-=In=(_n*(xn+dn*Sn+jn*(gn+an*Sn))-tn)/(xn+3*dn*Sn+jn*(7*gn+9*an*Sn)))*_n)*Sn*Sn,!((0,c.Wn)(In)<c.aW));++qn);return[sn*Gt*(xn+3*dn*Sn+jn*(7*gn+9*an*Sn))/(0,c.mC)(_n),(0,c.ZR)((0,c.O$)(_n)/sn)]};var Dn=e(98936),Zn=e(64684);function Fn(){var Gt,tn,In,_n,Sn,jn,qn,ar=1,cr=0,$t=0,An=1,Rt=1,Yt=0,rn=null,bn=1,ln=1,kn=(0,Zn.l)({point:function(fn,mn){var zn=nn([fn,mn]);this.stream.point(zn[0],zn[1])}}),Tn=ee.Z;function hn(){return bn=ar*An,ln=ar*Rt,jn=qn=null,nn}function nn(fn){var mn=fn[0]*bn,zn=fn[1]*ln;if(Yt){var Gn=zn*Gt-mn*tn;mn=mn*Gt+zn*tn,zn=Gn}return[mn+cr,zn+$t]}return nn.invert=function(fn){var mn=fn[0]-cr,zn=fn[1]-$t;if(Yt){var Gn=zn*Gt+mn*tn;mn=mn*Gt-zn*tn,zn=Gn}return[mn/bn,zn/ln]},nn.stream=function(fn){return jn&&qn===fn?jn:jn=kn(Tn(qn=fn))},nn.postclip=function(fn){return arguments.length?(Tn=fn,rn=In=_n=Sn=null,hn()):Tn},nn.clipExtent=function(fn){return arguments.length?(Tn=fn==null?(rn=In=_n=Sn=null,ee.Z):(0,s.Z)(rn=+fn[0][0],In=+fn[0][1],_n=+fn[1][0],Sn=+fn[1][1]),hn()):rn==null?null:[[rn,In],[_n,Sn]]},nn.scale=function(fn){return arguments.length?(ar=+fn,hn()):ar},nn.translate=function(fn){return arguments.length?(cr=+fn[0],$t=+fn[1],hn()):[cr,$t]},nn.angle=function(fn){return arguments.length?(Yt=fn%360*c.uR,tn=(0,c.O$)(Yt),Gt=(0,c.mC)(Yt),hn()):Yt*c.RW},nn.reflectX=function(fn){return arguments.length?(An=fn?-1:1,hn()):An<0},nn.reflectY=function(fn){return arguments.length?(Rt=fn?-1:1,hn()):Rt<0},nn.fitExtent=function(fn,mn){return(0,mt.qg)(nn,fn,mn)},nn.fitSize=function(fn,mn){return(0,mt.mF)(nn,fn,mn)},nn.fitWidth=function(fn,mn){return(0,mt.V6)(nn,fn,mn)},nn.fitHeight=function(fn,mn){return(0,mt.rf)(nn,fn,mn)},nn}var nr=e(26867),$n=e(57962),mr=e(25382);function dr(Gt,tn){var In=(0,c.mC)(tn),_n=1+(0,c.mC)(Gt)*In;return[In*(0,c.O$)(Gt)/_n,(0,c.O$)(tn)/_n]}function Yn(){return(0,ut.Z)(dr).scale(250).clipAngle(142)}function Vn(Gt,tn){return[(0,c.cM)((0,c.OR)((c.ou+tn)/2)),-Gt]}function ur(){var Gt=qt(Vn),tn=Gt.center,In=Gt.rotate;return Gt.center=function(_n){return arguments.length?tn([-_n[1],_n[0]]):[(_n=tn())[1],-_n[0]]},Gt.rotate=function(_n){return arguments.length?In([_n[0],_n[1],_n.length>2?_n[2]+90:90]):[(_n=In())[0],_n[1],_n[2]-90]},In([0,0,90]).scale(159.155)}dr.invert=(0,mr.O)(function(Gt){return 2*(0,c.z4)(Gt)}),Vn.invert=function(Gt,tn){return[-tn,2*(0,c.z4)((0,c.Qq)(Gt))-c.ou]}},83074:function($,R,e){e.d(R,{Z:function(){return k}});var A=e(39695);function k(l,T){var x=l[0]*A.uR,d=l[1]*A.uR,s=T[0]*A.uR,t=T[1]*A.uR,o=(0,A.mC)(d),r=(0,A.O$)(d),n=(0,A.mC)(t),a=(0,A.O$)(t),i=o*(0,A.mC)(x),c=o*(0,A.O$)(x),h=n*(0,A.mC)(s),f=n*(0,A.O$)(s),b=2*(0,A.ZR)((0,A._b)((0,A.Jy)(t-d)+o*n*(0,A.Jy)(s-x))),v=(0,A.O$)(b),g=b?function(y){var p=(0,A.O$)(y*=b)/v,m=(0,A.O$)(b-y)/v,w=m*i+p*h,u=m*c+p*f,S=m*r+p*a;return[(0,A.fv)(u,w)*A.RW,(0,A.fv)(S,(0,A._b)(w*w+u*u))*A.RW]}:function(){return[x*A.RW,d*A.RW]};return g.distance=b,g}},39695:function($,R,e){e.d(R,{BZ:function(){return d},Ho:function(){return A},Jy:function(){return w},Kh:function(){return p},O$:function(){return b},OR:function(){return y},Qq:function(){return c},RW:function(){return s},Wn:function(){return o},Xx:function(){return v},ZR:function(){return m},_b:function(){return g},aW:function(){return k},cM:function(){return h},fv:function(){return n},mC:function(){return a},mD:function(){return i},ou:function(){return T},pi:function(){return l},pu:function(){return x},sQ:function(){return f},uR:function(){return t},z4:function(){return r}});var A=1e-6,k=1e-12,l=Math.PI,T=l/2,x=l/4,d=2*l,s=180/l,t=l/180,o=Math.abs,r=Math.atan,n=Math.atan2,a=Math.cos,i=Math.ceil,c=Math.exp,h=Math.log,f=Math.pow,b=Math.sin,v=Math.sign||function(u){return u>0?1:u<0?-1:0},g=Math.sqrt,y=Math.tan;function p(u){return u>1?0:u<-1?l:Math.acos(u)}function m(u){return u>1?T:u<-1?-T:Math.asin(u)}function w(u){return(u=b(u/2))*u}},73182:function($,R,e){function A(){}e.d(R,{Z:function(){return A}})},3559:function($,R,e){var A=e(73182),k=1/0,l=k,T=-k,x=T,d={point:function(s,t){s<k&&(k=s),s>T&&(T=s),t<l&&(l=t),t>x&&(x=t)},lineStart:A.Z,lineEnd:A.Z,polygonStart:A.Z,polygonEnd:A.Z,result:function(){var s=[[k,l],[T,x]];return T=x=-(l=k=1/0),s}};R.Z=d},67108:function($,R,e){e.d(R,{Z:function(){return k}});var A=e(39695);function k(l,T){return(0,A.Wn)(l[0]-T[0])<A.Ho&&(0,A.Wn)(l[1]-T[1])<A.Ho}},23071:function($,R,e){e.d(R,{Z:function(){return d}});var A=e(33940),k=e(7620),l=e(39695),T=(0,A.Z)();function x(s){return(0,l.Wn)(s[0])<=l.pi?s[0]:(0,l.Xx)(s[0])*(((0,l.Wn)(s[0])+l.pi)%l.BZ-l.pi)}function d(s,t){var o=x(t),r=t[1],n=(0,l.O$)(r),a=[(0,l.O$)(o),-(0,l.mC)(o),0],i=0,c=0;T.reset(),n===1?r=l.ou+l.Ho:n===-1&&(r=-l.ou-l.Ho);for(var h=0,f=s.length;h<f;++h)if(v=(b=s[h]).length)for(var b,v,g=b[v-1],y=x(g),p=g[1]/2+l.pu,m=(0,l.O$)(p),w=(0,l.mC)(p),u=0;u<v;++u,y=_,m=L,w=C,g=S){var S=b[u],_=x(S),E=S[1]/2+l.pu,L=(0,l.O$)(E),C=(0,l.mC)(E),P=_-y,I=P>=0?1:-1,U=I*P,z=U>l.pi,H=m*L;if(T.add((0,l.fv)(H*I*(0,l.O$)(U),w*C+H*(0,l.mC)(U))),i+=z?P+I*l.BZ:P,z^y>=o^_>=o){var F=(0,k.T5)((0,k.Og)(g),(0,k.Og)(S));(0,k.iJ)(F);var N=(0,k.T5)(a,F);(0,k.iJ)(N);var B=(z^P>=0?-1:1)*(0,l.ZR)(N[2]);(r>B||r===B&&(F[0]||F[1]))&&(c+=z^P>=0?1:-1)}}return(i<-l.Ho||i<l.Ho&&T<-l.Ho)^1&c}},25382:function($,R,e){e.d(R,{O:function(){return l},W:function(){return k}});var A=e(39695);function k(T){return function(x,d){var s=(0,A.mC)(x),t=(0,A.mC)(d),o=T(s*t);return[o*t*(0,A.O$)(x),o*(0,A.O$)(d)]}}function l(T){return function(x,d){var s=(0,A._b)(x*x+d*d),t=T(s),o=(0,A.O$)(t),r=(0,A.mC)(t);return[(0,A.fv)(x*o,s*r),(0,A.ZR)(s&&d*o/s)]}}},12956:function($,R,e){e.d(R,{Z:function(){return x},l:function(){return T}});var A=e(39695),k=e(25382),l=e(15002),T=(0,k.W)(function(d){return(0,A._b)(2/(1+d))});function x(){return(0,l.Z)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.O)(function(d){return 2*(0,A.ZR)(d/2)})},17889:function($,R,e){e.d(R,{N:function(){return T},Z:function(){return x}});var A=e(39695),k=e(25382),l=e(15002),T=(0,k.W)(function(d){return(d=(0,A.Kh)(d))&&d/(0,A.O$)(d)});function x(){return(0,l.Z)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.O)(function(d){return d})},97492:function($,R,e){e.d(R,{Z:function(){return l},k:function(){return k}});var A=e(15002);function k(T,x){return[T,x]}function l(){return(0,A.Z)(k).scale(152.63)}k.invert=k},47589:function($,R,e){e.d(R,{V6:function(){return d},mF:function(){return x},qg:function(){return T},rf:function(){return s}});var A=e(72736),k=e(3559);function l(t,o,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),(0,A.Z)(r,t.stream(k.Z)),o(k.Z.result()),n!=null&&t.clipExtent(n),t}function T(t,o,r){return l(t,function(n){var a=o[1][0]-o[0][0],i=o[1][1]-o[0][1],c=Math.min(a/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),h=+o[0][0]+(a-c*(n[1][0]+n[0][0]))/2,f=+o[0][1]+(i-c*(n[1][1]+n[0][1]))/2;t.scale(150*c).translate([h,f])},r)}function x(t,o,r){return T(t,[[0,0],o],r)}function d(t,o,r){return l(t,function(n){var a=+o,i=a/(n[1][0]-n[0][0]),c=(a-i*(n[1][0]+n[0][0]))/2,h=-i*n[0][1];t.scale(150*i).translate([c,h])},r)}function s(t,o,r){return l(t,function(n){var a=+o,i=a/(n[1][1]-n[0][1]),c=-i*n[0][0],h=(a-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([c,h])},r)}},98936:function($,R,e){e.d(R,{M:function(){return T},Z:function(){return x}});var A=e(39695),k=e(25382),l=e(15002);function T(d,s){var t=(0,A.mC)(s),o=(0,A.mC)(d)*t;return[t*(0,A.O$)(d)/o,(0,A.O$)(s)/o]}function x(){return(0,l.Z)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.O)(A.z4)},15002:function($,R,e){e.d(R,{Z:function(){return f},r:function(){return b}});var A=e(87070),k=e(1457),l=e(87605),T=e(96059),x=e(8593),d=e(39695),s=e(49386),t=e(64684),o=e(47589),r=e(7620),n=(0,d.mC)(30*d.uR);function a(v,g){return+g?function(y,p){function m(w,u,S,_,E,L,C,P,I,U,z,H,F,N){var B=C-w,j=P-u,K=B*B+j*j;if(K>4*p&&F--){var G=_+U,V=E+z,W=L+H,J=(0,d._b)(G*G+V*V+W*W),X=(0,d.ZR)(W/=J),ee=(0,d.Wn)((0,d.Wn)(W)-1)<d.Ho||(0,d.Wn)(S-I)<d.Ho?(S+I)/2:(0,d.fv)(V,G),re=y(ee,X),ie=re[0],se=re[1],fe=ie-w,ye=se-u,ge=j*fe-B*ye;(ge*ge/K>p||(0,d.Wn)((B*fe+j*ye)/K-.5)>.3||_*U+E*z+L*H<n)&&(m(w,u,S,_,E,L,ie,se,ee,G/=J,V/=J,W,F,N),N.point(ie,se),m(ie,se,ee,G,V,W,C,P,I,U,z,H,F,N))}}return function(w){var u,S,_,E,L,C,P,I,U,z,H,F,N={point:B,lineStart:j,lineEnd:G,polygonStart:function(){w.polygonStart(),N.lineStart=V},polygonEnd:function(){w.polygonEnd(),N.lineStart=j}};function B(X,ee){X=y(X,ee),w.point(X[0],X[1])}function j(){I=NaN,N.point=K,w.lineStart()}function K(X,ee){var re=(0,r.Og)([X,ee]),ie=y(X,ee);m(I,U,P,z,H,F,I=ie[0],U=ie[1],P=X,z=re[0],H=re[1],F=re[2],16,w),w.point(I,U)}function G(){N.point=B,w.lineEnd()}function V(){j(),N.point=W,N.lineEnd=J}function W(X,ee){K(u=X,ee),S=I,_=U,E=z,L=H,C=F,N.point=K}function J(){m(I,U,P,z,H,F,S,_,u,E,L,C,16,w),N.lineEnd=G,G()}return N}}(v,g):function(y){return(0,t.l)({point:function(p,m){p=y(p,m),this.stream.point(p[0],p[1])}})}(v)}var i=(0,t.l)({point:function(v,g){this.stream.point(v*d.uR,g*d.uR)}});function c(v,g,y,p,m){function w(u,S){return[g+v*(u*=p),y-v*(S*=m)]}return w.invert=function(u,S){return[(u-g)/v*p,(y-S)/v*m]},w}function h(v,g,y,p,m,w){var u=(0,d.mC)(w),S=(0,d.O$)(w),_=u*v,E=S*v,L=u/v,C=S/v,P=(S*y-u*g)/v,I=(S*g+u*y)/v;function U(z,H){return[_*(z*=p)-E*(H*=m)+g,y-E*z-_*H]}return U.invert=function(z,H){return[p*(L*z-C*H+P),m*(I-C*z-L*H)]},U}function f(v){return b(function(){return v})()}function b(v){var g,y,p,m,w,u,S,_,E,L,C=150,P=480,I=250,U=0,z=0,H=0,F=0,N=0,B=0,j=1,K=1,G=null,V=A.Z,W=null,J=x.Z,X=.5;function ee(fe){return _(fe[0]*d.uR,fe[1]*d.uR)}function re(fe){return(fe=_.invert(fe[0],fe[1]))&&[fe[0]*d.RW,fe[1]*d.RW]}function ie(){var fe=h(C,0,0,j,K,B).apply(null,g(U,z)),ye=(B?h:c)(C,P-fe[0],I-fe[1],j,K,B);return y=(0,s.I)(H,F,N),S=(0,T.Z)(g,ye),_=(0,T.Z)(y,S),u=a(S,X),se()}function se(){return E=L=null,ee}return ee.stream=function(fe){return E&&L===fe?E:E=i(function(ye){return(0,t.l)({point:function(ge,he){var ve=ye(ge,he);return this.stream.point(ve[0],ve[1])}})}(y)(V(u(J(L=fe)))))},ee.preclip=function(fe){return arguments.length?(V=fe,G=void 0,se()):V},ee.postclip=function(fe){return arguments.length?(J=fe,W=p=m=w=null,se()):J},ee.clipAngle=function(fe){return arguments.length?(V=+fe?(0,k.Z)(G=fe*d.uR):(G=null,A.Z),se()):G*d.RW},ee.clipExtent=function(fe){return arguments.length?(J=fe==null?(W=p=m=w=null,x.Z):(0,l.Z)(W=+fe[0][0],p=+fe[0][1],m=+fe[1][0],w=+fe[1][1]),se()):W==null?null:[[W,p],[m,w]]},ee.scale=function(fe){return arguments.length?(C=+fe,ie()):C},ee.translate=function(fe){return arguments.length?(P=+fe[0],I=+fe[1],ie()):[P,I]},ee.center=function(fe){return arguments.length?(U=fe[0]%360*d.uR,z=fe[1]%360*d.uR,ie()):[U*d.RW,z*d.RW]},ee.rotate=function(fe){return arguments.length?(H=fe[0]%360*d.uR,F=fe[1]%360*d.uR,N=fe.length>2?fe[2]%360*d.uR:0,ie()):[H*d.RW,F*d.RW,N*d.RW]},ee.angle=function(fe){return arguments.length?(B=fe%360*d.uR,ie()):B*d.RW},ee.reflectX=function(fe){return arguments.length?(j=fe?-1:1,ie()):j<0},ee.reflectY=function(fe){return arguments.length?(K=fe?-1:1,ie()):K<0},ee.precision=function(fe){return arguments.length?(u=a(S,X=fe*fe),se()):(0,d._b)(X)},ee.fitExtent=function(fe,ye){return(0,o.qg)(ee,fe,ye)},ee.fitSize=function(fe,ye){return(0,o.mF)(ee,fe,ye)},ee.fitWidth=function(fe,ye){return(0,o.V6)(ee,fe,ye)},ee.fitHeight=function(fe,ye){return(0,o.rf)(ee,fe,ye)},function(){return g=v.apply(this,arguments),ee.invert=g.invert&&re,ie()}}},26867:function($,R,e){e.d(R,{K:function(){return l},Z:function(){return T}});var A=e(15002),k=e(39695);function l(x,d){var s=d*d,t=s*s;return[x*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),d*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function T(){return(0,A.Z)(l).scale(175.295)}l.invert=function(x,d){var s,t=d,o=25;do{var r=t*t,n=r*r;t-=s=(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-d)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,k.Wn)(s)>k.Ho&&--o>0);return[x/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]}},57962:function($,R,e){e.d(R,{I:function(){return T},Z:function(){return x}});var A=e(39695),k=e(25382),l=e(15002);function T(d,s){return[(0,A.mC)(s)*(0,A.O$)(d),(0,A.O$)(s)]}function x(){return(0,l.Z)(T).scale(249.5).clipAngle(90+A.Ho)}T.invert=(0,k.O)(A.ZR)},49386:function($,R,e){e.d(R,{I:function(){return T},Z:function(){return t}});var A=e(96059),k=e(39695);function l(o,r){return[(0,k.Wn)(o)>k.pi?o+Math.round(-o/k.BZ)*k.BZ:o,r]}function T(o,r,n){return(o%=k.BZ)?r||n?(0,A.Z)(d(o),s(r,n)):d(o):r||n?s(r,n):l}function x(o){return function(r,n){return[(r+=o)>k.pi?r-k.BZ:r<-k.pi?r+k.BZ:r,n]}}function d(o){var r=x(o);return r.invert=x(-o),r}function s(o,r){var n=(0,k.mC)(o),a=(0,k.O$)(o),i=(0,k.mC)(r),c=(0,k.O$)(r);function h(f,b){var v=(0,k.mC)(b),g=(0,k.mC)(f)*v,y=(0,k.O$)(f)*v,p=(0,k.O$)(b),m=p*n+g*a;return[(0,k.fv)(y*i-m*c,g*n-p*a),(0,k.ZR)(m*i+y*c)]}return h.invert=function(f,b){var v=(0,k.mC)(b),g=(0,k.mC)(f)*v,y=(0,k.O$)(f)*v,p=(0,k.O$)(b),m=p*i-y*c;return[(0,k.fv)(y*i+p*c,g*n+m*a),(0,k.ZR)(m*n-g*a)]},h}function t(o){function r(n){return(n=o(n[0]*k.uR,n[1]*k.uR))[0]*=k.RW,n[1]*=k.RW,n}return o=T(o[0]*k.uR,o[1]*k.uR,o.length>2?o[2]*k.uR:0),r.invert=function(n){return(n=o.invert(n[0]*k.uR,n[1]*k.uR))[0]*=k.RW,n[1]*=k.RW,n},r}l.invert=l},72736:function($,R,e){function A(s,t){s&&l.hasOwnProperty(s.type)&&l[s.type](s,t)}e.d(R,{Z:function(){return d}});var k={Feature:function(s,t){A(s.geometry,t)},FeatureCollection:function(s,t){for(var o=s.features,r=-1,n=o.length;++r<n;)A(o[r].geometry,t)}},l={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)s=o[r],t.point(s[0],s[1],s[2])},LineString:function(s,t){T(s.coordinates,t,0)},MultiLineString:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)T(o[r],t,0)},Polygon:function(s,t){x(s.coordinates,t)},MultiPolygon:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)x(o[r],t)},GeometryCollection:function(s,t){for(var o=s.geometries,r=-1,n=o.length;++r<n;)A(o[r],t)}};function T(s,t,o){var r,n=-1,a=s.length-o;for(t.lineStart();++n<a;)r=s[n],t.point(r[0],r[1],r[2]);t.lineEnd()}function x(s,t){var o=-1,r=s.length;for(t.polygonStart();++o<r;)T(s[o],t,1);t.polygonEnd()}function d(s,t){s&&k.hasOwnProperty(s.type)?k[s.type](s,t):A(s,t)}},64684:function($,R,e){function A(T){return{stream:k(T)}}function k(T){return function(x){var d=new l;for(var s in T)d[s]=T[s];return d.stream=x,d}}function l(){}e.d(R,{Z:function(){return A},l:function(){return k}}),l.prototype={constructor:l,point:function(T,x){this.stream.point(T,x)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function($,R,e){function A(Te,Q){return Te.parent===Q.parent?1:2}function k(Te,Q){return Te+Q.x}function l(Te,Q){return Math.max(Te,Q.y)}function T(){var Te=A,Q=1,oe=1,ce=!1;function me(Me){var Re,Ce=0;Me.eachAfter(function(Fe){var Ve=Fe.children;Ve?(Fe.x=function(He){return He.reduce(k,0)/He.length}(Ve),Fe.y=function(He){return 1+He.reduce(l,0)}(Ve)):(Fe.x=Re?Ce+=Te(Fe,Re):0,Fe.y=0,Re=Fe)});var ze=function(Fe){for(var Ve;Ve=Fe.children;)Fe=Ve[0];return Fe}(Me),le=function(Fe){for(var Ve;Ve=Fe.children;)Fe=Ve[Ve.length-1];return Fe}(Me),de=ze.x-Te(ze,le)/2,be=le.x+Te(le,ze)/2;return Me.eachAfter(ce?function(Fe){Fe.x=(Fe.x-Me.x)*Q,Fe.y=(Me.y-Fe.y)*oe}:function(Fe){Fe.x=(Fe.x-de)/(be-de)*Q,Fe.y=(1-(Me.y?Fe.y/Me.y:1))*oe})}return me.separation=function(Me){return arguments.length?(Te=Me,me):Te},me.size=function(Me){return arguments.length?(ce=!1,Q=+Me[0],oe=+Me[1],me):ce?null:[Q,oe]},me.nodeSize=function(Me){return arguments.length?(ce=!0,Q=+Me[0],oe=+Me[1],me):ce?[Q,oe]:null},me}function x(Te){var Q=0,oe=Te.children,ce=oe&&oe.length;if(ce)for(;--ce>=0;)Q+=oe[ce].value;else Q=1;Te.value=Q}function d(Te,Q){var oe,ce,me,Me,Re,Ce=new r(Te),ze=+Te.value&&(Ce.value=Te.value),le=[Ce];for(Q==null&&(Q=s);oe=le.pop();)if(ze&&(oe.value=+oe.data.value),(me=Q(oe.data))&&(Re=me.length))for(oe.children=new Array(Re),Me=Re-1;Me>=0;--Me)le.push(ce=oe.children[Me]=new r(me[Me])),ce.parent=oe,ce.depth=oe.depth+1;return Ce.eachBefore(o)}function s(Te){return Te.children}function t(Te){Te.data=Te.data.data}function o(Te){var Q=0;do Te.height=Q;while((Te=Te.parent)&&Te.height<++Q)}function r(Te){this.data=Te,this.depth=this.height=0,this.parent=null}e.r(R),e.d(R,{cluster:function(){return T},hierarchy:function(){return d},pack:function(){return I},packEnclose:function(){return a},packSiblings:function(){return S},partition:function(){return B},stratify:function(){return W},tree:function(){return fe},treemap:function(){return Ie},treemapBinary:function(){return xe},treemapDice:function(){return N},treemapResquarify:function(){return Se},treemapSlice:function(){return ye},treemapSliceDice:function(){return Ae},treemapSquarify:function(){return ve}}),r.prototype=d.prototype={constructor:r,count:function(){return this.eachAfter(x)},each:function(Te){var Q,oe,ce,me,Me=this,Re=[Me];do for(Q=Re.reverse(),Re=[];Me=Q.pop();)if(Te(Me),oe=Me.children)for(ce=0,me=oe.length;ce<me;++ce)Re.push(oe[ce]);while(Re.length);return this},eachAfter:function(Te){for(var Q,oe,ce,me=this,Me=[me],Re=[];me=Me.pop();)if(Re.push(me),Q=me.children)for(oe=0,ce=Q.length;oe<ce;++oe)Me.push(Q[oe]);for(;me=Re.pop();)Te(me);return this},eachBefore:function(Te){for(var Q,oe,ce=this,me=[ce];ce=me.pop();)if(Te(ce),Q=ce.children)for(oe=Q.length-1;oe>=0;--oe)me.push(Q[oe]);return this},sum:function(Te){return this.eachAfter(function(Q){for(var oe=+Te(Q.data)||0,ce=Q.children,me=ce&&ce.length;--me>=0;)oe+=ce[me].value;Q.value=oe})},sort:function(Te){return this.eachBefore(function(Q){Q.children&&Q.children.sort(Te)})},path:function(Te){for(var Q=this,oe=function(Me,Re){if(Me===Re)return Me;var Ce=Me.ancestors(),ze=Re.ancestors(),le=null;for(Me=Ce.pop(),Re=ze.pop();Me===Re;)le=Me,Me=Ce.pop(),Re=ze.pop();return le}(Q,Te),ce=[Q];Q!==oe;)Q=Q.parent,ce.push(Q);for(var me=ce.length;Te!==oe;)ce.splice(me,0,Te),Te=Te.parent;return ce},ancestors:function(){for(var Te=this,Q=[Te];Te=Te.parent;)Q.push(Te);return Q},descendants:function(){var Te=[];return this.each(function(Q){Te.push(Q)}),Te},leaves:function(){var Te=[];return this.eachBefore(function(Q){Q.children||Te.push(Q)}),Te},links:function(){var Te=this,Q=[];return Te.each(function(oe){oe!==Te&&Q.push({source:oe.parent,target:oe})}),Q},copy:function(){return d(this).eachBefore(t)}};var n=Array.prototype.slice;function a(Te){for(var Q,oe,ce=0,me=(Te=function(Re){for(var Ce,ze,le=Re.length;le;)ze=Math.random()*le--|0,Ce=Re[le],Re[le]=Re[ze],Re[ze]=Ce;return Re}(n.call(Te))).length,Me=[];ce<me;)Q=Te[ce],oe&&h(oe,Q)?++ce:(oe=b(Me=i(Me,Q)),ce=0);return oe}function i(Te,Q){var oe,ce;if(f(Q,Te))return[Q];for(oe=0;oe<Te.length;++oe)if(c(Q,Te[oe])&&f(v(Te[oe],Q),Te))return[Te[oe],Q];for(oe=0;oe<Te.length-1;++oe)for(ce=oe+1;ce<Te.length;++ce)if(c(v(Te[oe],Te[ce]),Q)&&c(v(Te[oe],Q),Te[ce])&&c(v(Te[ce],Q),Te[oe])&&f(g(Te[oe],Te[ce],Q),Te))return[Te[oe],Te[ce],Q];throw new Error}function c(Te,Q){var oe=Te.r-Q.r,ce=Q.x-Te.x,me=Q.y-Te.y;return oe<0||oe*oe<ce*ce+me*me}function h(Te,Q){var oe=Te.r-Q.r+1e-6,ce=Q.x-Te.x,me=Q.y-Te.y;return oe>0&&oe*oe>ce*ce+me*me}function f(Te,Q){for(var oe=0;oe<Q.length;++oe)if(!h(Te,Q[oe]))return!1;return!0}function b(Te){switch(Te.length){case 1:return{x:(Q=Te[0]).x,y:Q.y,r:Q.r};case 2:return v(Te[0],Te[1]);case 3:return g(Te[0],Te[1],Te[2])}var Q}function v(Te,Q){var oe=Te.x,ce=Te.y,me=Te.r,Me=Q.x,Re=Q.y,Ce=Q.r,ze=Me-oe,le=Re-ce,de=Ce-me,be=Math.sqrt(ze*ze+le*le);return{x:(oe+Me+ze/be*de)/2,y:(ce+Re+le/be*de)/2,r:(be+me+Ce)/2}}function g(Te,Q,oe){var ce=Te.x,me=Te.y,Me=Te.r,Re=Q.x,Ce=Q.y,ze=Q.r,le=oe.x,de=oe.y,be=oe.r,Fe=ce-Re,Ve=ce-le,He=me-Ce,rt=me-de,tt=ze-Me,ot=be-Me,ht=ce*ce+me*me-Me*Me,_t=ht-Re*Re-Ce*Ce+ze*ze,dt=ht-le*le-de*de+be*be,bt=Ve*He-Fe*rt,St=(He*dt-rt*_t)/(2*bt)-ce,Et=(rt*tt-He*ot)/bt,zt=(Ve*_t-Fe*dt)/(2*bt)-me,Ut=(Fe*ot-Ve*tt)/bt,Pt=Et*Et+Ut*Ut-1,Ze=2*(Me+St*Et+zt*Ut),Ye=St*St+zt*zt-Me*Me,Be=-(Pt?(Ze+Math.sqrt(Ze*Ze-4*Pt*Ye))/(2*Pt):Ye/Ze);return{x:ce+St+Et*Be,y:me+zt+Ut*Be,r:Be}}function y(Te,Q,oe){var ce,me,Me,Re,Ce=Te.x-Q.x,ze=Te.y-Q.y,le=Ce*Ce+ze*ze;le?(me=Q.r+oe.r,me*=me,Re=Te.r+oe.r,me>(Re*=Re)?(ce=(le+Re-me)/(2*le),Me=Math.sqrt(Math.max(0,Re/le-ce*ce)),oe.x=Te.x-ce*Ce-Me*ze,oe.y=Te.y-ce*ze+Me*Ce):(ce=(le+me-Re)/(2*le),Me=Math.sqrt(Math.max(0,me/le-ce*ce)),oe.x=Q.x+ce*Ce-Me*ze,oe.y=Q.y+ce*ze+Me*Ce)):(oe.x=Q.x+oe.r,oe.y=Q.y)}function p(Te,Q){var oe=Te.r+Q.r-1e-6,ce=Q.x-Te.x,me=Q.y-Te.y;return oe>0&&oe*oe>ce*ce+me*me}function m(Te){var Q=Te._,oe=Te.next._,ce=Q.r+oe.r,me=(Q.x*oe.r+oe.x*Q.r)/ce,Me=(Q.y*oe.r+oe.y*Q.r)/ce;return me*me+Me*Me}function w(Te){this._=Te,this.next=null,this.previous=null}function u(Te){if(!(me=Te.length))return 0;var Q,oe,ce,me,Me,Re,Ce,ze,le,de,be;if((Q=Te[0]).x=0,Q.y=0,!(me>1))return Q.r;if(oe=Te[1],Q.x=-oe.r,oe.x=Q.r,oe.y=0,!(me>2))return Q.r+oe.r;y(oe,Q,ce=Te[2]),Q=new w(Q),oe=new w(oe),ce=new w(ce),Q.next=ce.previous=oe,oe.next=Q.previous=ce,ce.next=oe.previous=Q;e:for(Ce=3;Ce<me;++Ce){y(Q._,oe._,ce=Te[Ce]),ce=new w(ce),ze=oe.next,le=Q.previous,de=oe._.r,be=Q._.r;do if(de<=be){if(p(ze._,ce._)){oe=ze,Q.next=oe,oe.previous=Q,--Ce;continue e}de+=ze._.r,ze=ze.next}else{if(p(le._,ce._)){(Q=le).next=oe,oe.previous=Q,--Ce;continue e}be+=le._.r,le=le.previous}while(ze!==le.next);for(ce.previous=Q,ce.next=oe,Q.next=oe.previous=oe=ce,Me=m(Q);(ce=ce.next)!==oe;)(Re=m(ce))<Me&&(Q=ce,Me=Re);oe=Q.next}for(Q=[oe._],ce=oe;(ce=ce.next)!==oe;)Q.push(ce._);for(ce=a(Q),Ce=0;Ce<me;++Ce)(Q=Te[Ce]).x-=ce.x,Q.y-=ce.y;return ce.r}function S(Te){return u(Te),Te}function _(Te){return Te==null?null:E(Te)}function E(Te){if(typeof Te!="function")throw new Error;return Te}function L(){return 0}function C(Te){return function(){return Te}}function P(Te){return Math.sqrt(Te.value)}function I(){var Te=null,Q=1,oe=1,ce=L;function me(Me){return Me.x=Q/2,Me.y=oe/2,Te?Me.eachBefore(U(Te)).eachAfter(z(ce,.5)).eachBefore(H(1)):Me.eachBefore(U(P)).eachAfter(z(L,1)).eachAfter(z(ce,Me.r/Math.min(Q,oe))).eachBefore(H(Math.min(Q,oe)/(2*Me.r))),Me}return me.radius=function(Me){return arguments.length?(Te=_(Me),me):Te},me.size=function(Me){return arguments.length?(Q=+Me[0],oe=+Me[1],me):[Q,oe]},me.padding=function(Me){return arguments.length?(ce=typeof Me=="function"?Me:C(+Me),me):ce},me}function U(Te){return function(Q){Q.children||(Q.r=Math.max(0,+Te(Q)||0))}}function z(Te,Q){return function(oe){if(ce=oe.children){var ce,me,Me,Re=ce.length,Ce=Te(oe)*Q||0;if(Ce)for(me=0;me<Re;++me)ce[me].r+=Ce;if(Me=u(ce),Ce)for(me=0;me<Re;++me)ce[me].r-=Ce;oe.r=Me+Ce}}}function H(Te){return function(Q){var oe=Q.parent;Q.r*=Te,oe&&(Q.x=oe.x+Te*Q.x,Q.y=oe.y+Te*Q.y)}}function F(Te){Te.x0=Math.round(Te.x0),Te.y0=Math.round(Te.y0),Te.x1=Math.round(Te.x1),Te.y1=Math.round(Te.y1)}function N(Te,Q,oe,ce,me){for(var Me,Re=Te.children,Ce=-1,ze=Re.length,le=Te.value&&(ce-Q)/Te.value;++Ce<ze;)(Me=Re[Ce]).y0=oe,Me.y1=me,Me.x0=Q,Me.x1=Q+=Me.value*le}function B(){var Te=1,Q=1,oe=0,ce=!1;function me(Me){var Re=Me.height+1;return Me.x0=Me.y0=oe,Me.x1=Te,Me.y1=Q/Re,Me.eachBefore(function(Ce,ze){return function(le){le.children&&N(le,le.x0,Ce*(le.depth+1)/ze,le.x1,Ce*(le.depth+2)/ze);var de=le.x0,be=le.y0,Fe=le.x1-oe,Ve=le.y1-oe;Fe<de&&(de=Fe=(de+Fe)/2),Ve<be&&(be=Ve=(be+Ve)/2),le.x0=de,le.y0=be,le.x1=Fe,le.y1=Ve}}(Q,Re)),ce&&Me.eachBefore(F),Me}return me.round=function(Me){return arguments.length?(ce=!!Me,me):ce},me.size=function(Me){return arguments.length?(Te=+Me[0],Q=+Me[1],me):[Te,Q]},me.padding=function(Me){return arguments.length?(oe=+Me,me):oe},me}var j={depth:-1},K={};function G(Te){return Te.id}function V(Te){return Te.parentId}function W(){var Te=G,Q=V;function oe(ce){var me,Me,Re,Ce,ze,le,de,be=ce.length,Fe=new Array(be),Ve={};for(Me=0;Me<be;++Me)me=ce[Me],ze=Fe[Me]=new r(me),(le=Te(me,Me,ce))!=null&&(le+="")&&(Ve[de="$"+(ze.id=le)]=de in Ve?K:ze);for(Me=0;Me<be;++Me)if(ze=Fe[Me],(le=Q(ce[Me],Me,ce))!=null&&(le+="")){if(!(Ce=Ve["$"+le]))throw new Error("missing: "+le);if(Ce===K)throw new Error("ambiguous: "+le);Ce.children?Ce.children.push(ze):Ce.children=[ze],ze.parent=Ce}else{if(Re)throw new Error("multiple roots");Re=ze}if(!Re)throw new Error("no root");if(Re.parent=j,Re.eachBefore(function(He){He.depth=He.parent.depth+1,--be}).eachBefore(o),Re.parent=null,be>0)throw new Error("cycle");return Re}return oe.id=function(ce){return arguments.length?(Te=E(ce),oe):Te},oe.parentId=function(ce){return arguments.length?(Q=E(ce),oe):Q},oe}function J(Te,Q){return Te.parent===Q.parent?1:2}function X(Te){var Q=Te.children;return Q?Q[0]:Te.t}function ee(Te){var Q=Te.children;return Q?Q[Q.length-1]:Te.t}function re(Te,Q,oe){var ce=oe/(Q.i-Te.i);Q.c-=ce,Q.s+=oe,Te.c+=ce,Q.z+=oe,Q.m+=oe}function ie(Te,Q,oe){return Te.a.parent===Q.parent?Te.a:oe}function se(Te,Q){this._=Te,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Q}function fe(){var Te=J,Q=1,oe=1,ce=null;function me(ze){var le=function(ot){for(var ht,_t,dt,bt,St,Et=new se(ot,0),zt=[Et];ht=zt.pop();)if(dt=ht._.children)for(ht.children=new Array(St=dt.length),bt=St-1;bt>=0;--bt)zt.push(_t=ht.children[bt]=new se(dt[bt],bt)),_t.parent=ht;return(Et.parent=new se(null,0)).children=[Et],Et}(ze);if(le.eachAfter(Me),le.parent.m=-le.z,le.eachBefore(Re),ce)ze.eachBefore(Ce);else{var de=ze,be=ze,Fe=ze;ze.eachBefore(function(ot){ot.x<de.x&&(de=ot),ot.x>be.x&&(be=ot),ot.depth>Fe.depth&&(Fe=ot)});var Ve=de===be?1:Te(de,be)/2,He=Ve-de.x,rt=Q/(be.x+Ve+He),tt=oe/(Fe.depth||1);ze.eachBefore(function(ot){ot.x=(ot.x+He)*rt,ot.y=ot.depth*tt})}return ze}function Me(ze){var le=ze.children,de=ze.parent.children,be=ze.i?de[ze.i-1]:null;if(le){(function(Ve){for(var He,rt=0,tt=0,ot=Ve.children,ht=ot.length;--ht>=0;)(He=ot[ht]).z+=rt,He.m+=rt,rt+=He.s+(tt+=He.c)})(ze);var Fe=(le[0].z+le[le.length-1].z)/2;be?(ze.z=be.z+Te(ze._,be._),ze.m=ze.z-Fe):ze.z=Fe}else be&&(ze.z=be.z+Te(ze._,be._));ze.parent.A=function(Ve,He,rt){if(He){for(var tt,ot=Ve,ht=Ve,_t=He,dt=ot.parent.children[0],bt=ot.m,St=ht.m,Et=_t.m,zt=dt.m;_t=ee(_t),ot=X(ot),_t&&ot;)dt=X(dt),(ht=ee(ht)).a=Ve,(tt=_t.z+Et-ot.z-bt+Te(_t._,ot._))>0&&(re(ie(_t,Ve,rt),Ve,tt),bt+=tt,St+=tt),Et+=_t.m,bt+=ot.m,zt+=dt.m,St+=ht.m;_t&&!ee(ht)&&(ht.t=_t,ht.m+=Et-St),ot&&!X(dt)&&(dt.t=ot,dt.m+=bt-zt,rt=Ve)}return rt}(ze,be,ze.parent.A||de[0])}function Re(ze){ze._.x=ze.z+ze.parent.m,ze.m+=ze.parent.m}function Ce(ze){ze.x*=Q,ze.y=ze.depth*oe}return me.separation=function(ze){return arguments.length?(Te=ze,me):Te},me.size=function(ze){return arguments.length?(ce=!1,Q=+ze[0],oe=+ze[1],me):ce?null:[Q,oe]},me.nodeSize=function(ze){return arguments.length?(ce=!0,Q=+ze[0],oe=+ze[1],me):ce?[Q,oe]:null},me}function ye(Te,Q,oe,ce,me){for(var Me,Re=Te.children,Ce=-1,ze=Re.length,le=Te.value&&(me-oe)/Te.value;++Ce<ze;)(Me=Re[Ce]).x0=Q,Me.x1=ce,Me.y0=oe,Me.y1=oe+=Me.value*le}se.prototype=Object.create(r.prototype);var ge=(1+Math.sqrt(5))/2;function he(Te,Q,oe,ce,me,Me){for(var Re,Ce,ze,le,de,be,Fe,Ve,He,rt,tt,ot=[],ht=Q.children,_t=0,dt=0,bt=ht.length,St=Q.value;_t<bt;){ze=me-oe,le=Me-ce;do de=ht[dt++].value;while(!de&&dt<bt);for(be=Fe=de,tt=de*de*(rt=Math.max(le/ze,ze/le)/(St*Te)),He=Math.max(Fe/tt,tt/be);dt<bt;++dt){if(de+=Ce=ht[dt].value,Ce<be&&(be=Ce),Ce>Fe&&(Fe=Ce),tt=de*de*rt,(Ve=Math.max(Fe/tt,tt/be))>He){de-=Ce;break}He=Ve}ot.push(Re={value:de,dice:ze<le,children:ht.slice(_t,dt)}),Re.dice?N(Re,oe,ce,me,St?ce+=le*de/St:Me):ye(Re,oe,ce,St?oe+=ze*de/St:me,Me),St-=de,_t=dt}return ot}var ve=function Te(Q){function oe(ce,me,Me,Re,Ce){he(Q,ce,me,Me,Re,Ce)}return oe.ratio=function(ce){return Te((ce=+ce)>1?ce:1)},oe}(ge);function Ie(){var Te=ve,Q=!1,oe=1,ce=1,me=[0],Me=L,Re=L,Ce=L,ze=L,le=L;function de(Fe){return Fe.x0=Fe.y0=0,Fe.x1=oe,Fe.y1=ce,Fe.eachBefore(be),me=[0],Q&&Fe.eachBefore(F),Fe}function be(Fe){var Ve=me[Fe.depth],He=Fe.x0+Ve,rt=Fe.y0+Ve,tt=Fe.x1-Ve,ot=Fe.y1-Ve;tt<He&&(He=tt=(He+tt)/2),ot<rt&&(rt=ot=(rt+ot)/2),Fe.x0=He,Fe.y0=rt,Fe.x1=tt,Fe.y1=ot,Fe.children&&(Ve=me[Fe.depth+1]=Me(Fe)/2,He+=le(Fe)-Ve,rt+=Re(Fe)-Ve,(tt-=Ce(Fe)-Ve)<He&&(He=tt=(He+tt)/2),(ot-=ze(Fe)-Ve)<rt&&(rt=ot=(rt+ot)/2),Te(Fe,He,rt,tt,ot))}return de.round=function(Fe){return arguments.length?(Q=!!Fe,de):Q},de.size=function(Fe){return arguments.length?(oe=+Fe[0],ce=+Fe[1],de):[oe,ce]},de.tile=function(Fe){return arguments.length?(Te=E(Fe),de):Te},de.padding=function(Fe){return arguments.length?de.paddingInner(Fe).paddingOuter(Fe):de.paddingInner()},de.paddingInner=function(Fe){return arguments.length?(Me=typeof Fe=="function"?Fe:C(+Fe),de):Me},de.paddingOuter=function(Fe){return arguments.length?de.paddingTop(Fe).paddingRight(Fe).paddingBottom(Fe).paddingLeft(Fe):de.paddingTop()},de.paddingTop=function(Fe){return arguments.length?(Re=typeof Fe=="function"?Fe:C(+Fe),de):Re},de.paddingRight=function(Fe){return arguments.length?(Ce=typeof Fe=="function"?Fe:C(+Fe),de):Ce},de.paddingBottom=function(Fe){return arguments.length?(ze=typeof Fe=="function"?Fe:C(+Fe),de):ze},de.paddingLeft=function(Fe){return arguments.length?(le=typeof Fe=="function"?Fe:C(+Fe),de):le},de}function xe(Te,Q,oe,ce,me){var Me,Re,Ce=Te.children,ze=Ce.length,le=new Array(ze+1);for(le[0]=Re=Me=0;Me<ze;++Me)le[Me+1]=Re+=Ce[Me].value;(function de(be,Fe,Ve,He,rt,tt,ot){if(be>=Fe-1){var ht=Ce[be];return ht.x0=He,ht.y0=rt,ht.x1=tt,void(ht.y1=ot)}for(var _t=le[be],dt=Ve/2+_t,bt=be+1,St=Fe-1;bt<St;){var Et=bt+St>>>1;le[Et]<dt?bt=Et+1:St=Et}dt-le[bt-1]<le[bt]-dt&&be+1<bt&&--bt;var zt=le[bt]-_t,Ut=Ve-zt;if(tt-He>ot-rt){var Pt=(He*Ut+tt*zt)/Ve;de(be,bt,zt,He,rt,Pt,ot),de(bt,Fe,Ut,Pt,rt,tt,ot)}else{var Ze=(rt*Ut+ot*zt)/Ve;de(be,bt,zt,He,rt,tt,Ze),de(bt,Fe,Ut,He,Ze,tt,ot)}})(0,ze,Te.value,Q,oe,ce,me)}function Ae(Te,Q,oe,ce,me){(1&Te.depth?ye:N)(Te,Q,oe,ce,me)}var Se=function Te(Q){function oe(ce,me,Me,Re,Ce){if((ze=ce._squarify)&&ze.ratio===Q)for(var ze,le,de,be,Fe,Ve=-1,He=ze.length,rt=ce.value;++Ve<He;){for(de=(le=ze[Ve]).children,be=le.value=0,Fe=de.length;be<Fe;++be)le.value+=de[be].value;le.dice?N(le,me,Me,Re,Me+=(Ce-Me)*le.value/rt):ye(le,me,Me,me+=(Re-me)*le.value/rt,Ce),rt-=le.value}else ce._squarify=ze=he(Q,ce,me,Me,Re,Ce),ze.ratio=Q}return oe.ratio=function(ce){return Te((ce=+ce)>1?ce:1)},oe}(ge)},29502:function($,R,e){function A(X,ee,re){X.prototype=ee.prototype=re,re.constructor=X}function k(X,ee){var re=Object.create(X.prototype);for(var ie in ee)re[ie]=ee[ie];return re}function l(){}e.d(R,{sX:function(){return J},k4:function(){return B}});var T=.7,x=1/T,d="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\("+[d,d,d]+"\\)$"),n=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),a=new RegExp("^rgba\\("+[d,d,d,s]+"\\)$"),i=new RegExp("^rgba\\("+[t,t,t,s]+"\\)$"),c=new RegExp("^hsl\\("+[s,t,t]+"\\)$"),h=new RegExp("^hsla\\("+[s,t,t,s]+"\\)$"),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function g(X){var ee,re;return X=(X+"").trim().toLowerCase(),(ee=o.exec(X))?(re=ee[1].length,ee=parseInt(ee[1],16),re===6?y(ee):re===3?new u(ee>>8&15|ee>>4&240,ee>>4&15|240&ee,(15&ee)<<4|15&ee,1):re===8?p(ee>>24&255,ee>>16&255,ee>>8&255,(255&ee)/255):re===4?p(ee>>12&15|ee>>8&240,ee>>8&15|ee>>4&240,ee>>4&15|240&ee,((15&ee)<<4|15&ee)/255):null):(ee=r.exec(X))?new u(ee[1],ee[2],ee[3],1):(ee=n.exec(X))?new u(255*ee[1]/100,255*ee[2]/100,255*ee[3]/100,1):(ee=a.exec(X))?p(ee[1],ee[2],ee[3],ee[4]):(ee=i.exec(X))?p(255*ee[1]/100,255*ee[2]/100,255*ee[3]/100,ee[4]):(ee=c.exec(X))?L(ee[1],ee[2]/100,ee[3]/100,1):(ee=h.exec(X))?L(ee[1],ee[2]/100,ee[3]/100,ee[4]):f.hasOwnProperty(X)?y(f[X]):X==="transparent"?new u(NaN,NaN,NaN,0):null}function y(X){return new u(X>>16&255,X>>8&255,255&X,1)}function p(X,ee,re,ie){return ie<=0&&(X=ee=re=NaN),new u(X,ee,re,ie)}function m(X){return X instanceof l||(X=g(X)),X?new u((X=X.rgb()).r,X.g,X.b,X.opacity):new u}function w(X,ee,re,ie){return arguments.length===1?m(X):new u(X,ee,re,ie??1)}function u(X,ee,re,ie){this.r=+X,this.g=+ee,this.b=+re,this.opacity=+ie}function S(){return"#"+E(this.r)+E(this.g)+E(this.b)}function _(){var X=this.opacity;return((X=isNaN(X)?1:Math.max(0,Math.min(1,X)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(X===1?")":", "+X+")")}function E(X){return((X=Math.max(0,Math.min(255,Math.round(X)||0)))<16?"0":"")+X.toString(16)}function L(X,ee,re,ie){return ie<=0?X=ee=re=NaN:re<=0||re>=1?X=ee=NaN:ee<=0&&(X=NaN),new P(X,ee,re,ie)}function C(X){if(X instanceof P)return new P(X.h,X.s,X.l,X.opacity);if(X instanceof l||(X=g(X)),!X)return new P;if(X instanceof P)return X;var ee=(X=X.rgb()).r/255,re=X.g/255,ie=X.b/255,se=Math.min(ee,re,ie),fe=Math.max(ee,re,ie),ye=NaN,ge=fe-se,he=(fe+se)/2;return ge?(ye=ee===fe?(re-ie)/ge+6*(re<ie):re===fe?(ie-ee)/ge+2:(ee-re)/ge+4,ge/=he<.5?fe+se:2-fe-se,ye*=60):ge=he>0&&he<1?0:ye,new P(ye,ge,he,X.opacity)}function P(X,ee,re,ie){this.h=+X,this.s=+ee,this.l=+re,this.opacity=+ie}function I(X,ee,re){return 255*(X<60?ee+(re-ee)*X/60:X<180?re:X<240?ee+(re-ee)*(240-X)/60:ee)}function U(X){return function(){return X}}function z(X,ee){var re=ee-X;return re?function(ie,se){return function(fe){return ie+fe*se}}(X,re):U(isNaN(X)?ee:X)}A(l,g,{copy:function(X){return Object.assign(new this.constructor,this,X)},displayable:function(){return this.rgb().displayable()},hex:b,formatHex:b,formatHsl:function(){return C(this).formatHsl()},formatRgb:v,toString:v}),A(u,w,k(l,{brighter:function(X){return X=X==null?x:Math.pow(x,X),new u(this.r*X,this.g*X,this.b*X,this.opacity)},darker:function(X){return X=X==null?T:Math.pow(T,X),new u(this.r*X,this.g*X,this.b*X,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:_,toString:_})),A(P,function(X,ee,re,ie){return arguments.length===1?C(X):new P(X,ee,re,ie??1)},k(l,{brighter:function(X){return X=X==null?x:Math.pow(x,X),new P(this.h,this.s,this.l*X,this.opacity)},darker:function(X){return X=X==null?T:Math.pow(T,X),new P(this.h,this.s,this.l*X,this.opacity)},rgb:function(){var X=this.h%360+360*(this.h<0),ee=isNaN(X)||isNaN(this.s)?0:this.s,re=this.l,ie=re+(re<.5?re:1-re)*ee,se=2*re-ie;return new u(I(X>=240?X-240:X+120,se,ie),I(X,se,ie),I(X<120?X+240:X-120,se,ie),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var X=this.opacity;return((X=isNaN(X)?1:Math.max(0,Math.min(1,X)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(X===1?")":", "+X+")")}}));var H=function X(ee){var re=function(se){return(se=+se)==1?z:function(fe,ye){return ye-fe?function(ge,he,ve){return ge=Math.pow(ge,ve),he=Math.pow(he,ve)-ge,ve=1/ve,function(Ie){return Math.pow(ge+Ie*he,ve)}}(fe,ye,se):U(isNaN(fe)?ye:fe)}}(ee);function ie(se,fe){var ye=re((se=w(se)).r,(fe=w(fe)).r),ge=re(se.g,fe.g),he=re(se.b,fe.b),ve=z(se.opacity,fe.opacity);return function(Ie){return se.r=ye(Ie),se.g=ge(Ie),se.b=he(Ie),se.opacity=ve(Ie),se+""}}return ie.gamma=X,ie}(1);function F(X,ee){var re,ie=ee?ee.length:0,se=X?Math.min(ie,X.length):0,fe=new Array(se),ye=new Array(ie);for(re=0;re<se;++re)fe[re]=J(X[re],ee[re]);for(;re<ie;++re)ye[re]=ee[re];return function(ge){for(re=0;re<se;++re)ye[re]=fe[re](ge);return ye}}function N(X,ee){var re=new Date;return X=+X,ee=+ee,function(ie){return re.setTime(X*(1-ie)+ee*ie),re}}function B(X,ee){return X=+X,ee=+ee,function(re){return X*(1-re)+ee*re}}function j(X,ee){var re,ie={},se={};for(re in X!==null&&typeof X=="object"||(X={}),ee!==null&&typeof ee=="object"||(ee={}),ee)re in X?ie[re]=J(X[re],ee[re]):se[re]=ee[re];return function(fe){for(re in ie)se[re]=ie[re](fe);return se}}var K=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,G=new RegExp(K.source,"g");function V(X,ee){var re,ie,se,fe=K.lastIndex=G.lastIndex=0,ye=-1,ge=[],he=[];for(X+="",ee+="";(re=K.exec(X))&&(ie=G.exec(ee));)(se=ie.index)>fe&&(se=ee.slice(fe,se),ge[ye]?ge[ye]+=se:ge[++ye]=se),(re=re[0])===(ie=ie[0])?ge[ye]?ge[ye]+=ie:ge[++ye]=ie:(ge[++ye]=null,he.push({i:ye,x:B(re,ie)})),fe=G.lastIndex;return fe<ee.length&&(se=ee.slice(fe),ge[ye]?ge[ye]+=se:ge[++ye]=se),ge.length<2?he[0]?function(ve){return function(Ie){return ve(Ie)+""}}(he[0].x):function(ve){return function(){return ve}}(ee):(ee=he.length,function(ve){for(var Ie,xe=0;xe<ee;++xe)ge[(Ie=he[xe]).i]=Ie.x(ve);return ge.join("")})}function W(X,ee){ee||(ee=[]);var re,ie=X?Math.min(ee.length,X.length):0,se=ee.slice();return function(fe){for(re=0;re<ie;++re)se[re]=X[re]*(1-fe)+ee[re]*fe;return se}}function J(X,ee){var re,ie,se=typeof ee;return ee==null||se==="boolean"?U(ee):(se==="number"?B:se==="string"?(re=g(ee))?(ee=re,H):V:ee instanceof g?H:ee instanceof Date?N:(ie=ee,!ArrayBuffer.isView(ie)||ie instanceof DataView?Array.isArray(ee)?F:typeof ee.valueOf!="function"&&typeof ee.toString!="function"||isNaN(ee)?j:B:W))(X,ee)}},45879:function($,R,e){e.d(R,{h5:function(){return h}});var A=Math.PI,k=2*A,l=1e-6,T=k-l;function x(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function d(){return new x}x.prototype=d.prototype={constructor:x,moveTo:function(f,b){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+b)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(f,b){this._+="L"+(this._x1=+f)+","+(this._y1=+b)},quadraticCurveTo:function(f,b,v,g){this._+="Q"+ +f+","+ +b+","+(this._x1=+v)+","+(this._y1=+g)},bezierCurveTo:function(f,b,v,g,y,p){this._+="C"+ +f+","+ +b+","+ +v+","+ +g+","+(this._x1=+y)+","+(this._y1=+p)},arcTo:function(f,b,v,g,y){f=+f,b=+b,v=+v,g=+g,y=+y;var p=this._x1,m=this._y1,w=v-f,u=g-b,S=p-f,_=m-b,E=S*S+_*_;if(y<0)throw new Error("negative radius: "+y);if(this._x1===null)this._+="M"+(this._x1=f)+","+(this._y1=b);else if(E>l)if(Math.abs(_*w-u*S)>l&&y){var L=v-p,C=g-m,P=w*w+u*u,I=L*L+C*C,U=Math.sqrt(P),z=Math.sqrt(E),H=y*Math.tan((A-Math.acos((P+E-I)/(2*U*z)))/2),F=H/z,N=H/U;Math.abs(F-1)>l&&(this._+="L"+(f+F*S)+","+(b+F*_)),this._+="A"+y+","+y+",0,0,"+ +(_*L>S*C)+","+(this._x1=f+N*w)+","+(this._y1=b+N*u)}else this._+="L"+(this._x1=f)+","+(this._y1=b)},arc:function(f,b,v,g,y,p){f=+f,b=+b,p=!!p;var m=(v=+v)*Math.cos(g),w=v*Math.sin(g),u=f+m,S=b+w,_=1^p,E=p?g-y:y-g;if(v<0)throw new Error("negative radius: "+v);this._x1===null?this._+="M"+u+","+S:(Math.abs(this._x1-u)>l||Math.abs(this._y1-S)>l)&&(this._+="L"+u+","+S),v&&(E<0&&(E=E%k+k),E>T?this._+="A"+v+","+v+",0,1,"+_+","+(f-m)+","+(b-w)+"A"+v+","+v+",0,1,"+_+","+(this._x1=u)+","+(this._y1=S):E>l&&(this._+="A"+v+","+v+",0,"+ +(E>=A)+","+_+","+(this._x1=f+v*Math.cos(y))+","+(this._y1=b+v*Math.sin(y))))},rect:function(f,b,v,g){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+b)+"h"+ +v+"v"+ +g+"h"+-v+"Z"},toString:function(){return this._}};var s=d,t=Array.prototype.slice;function o(f){return function(){return f}}function r(f){return f[0]}function n(f){return f[1]}function a(f){return f.source}function i(f){return f.target}function c(f,b,v,g,y){f.moveTo(b,v),f.bezierCurveTo(b=(b+g)/2,v,b,y,g,y)}function h(){return function(f){var b=a,v=i,g=r,y=n,p=null;function m(){var w,u=t.call(arguments),S=b.apply(this,u),_=v.apply(this,u);if(p||(p=w=s()),f(p,+g.apply(this,(u[0]=S,u)),+y.apply(this,u),+g.apply(this,(u[0]=_,u)),+y.apply(this,u)),w)return p=null,w+""||null}return m.source=function(w){return arguments.length?(b=w,m):b},m.target=function(w){return arguments.length?(v=w,m):v},m.x=function(w){return arguments.length?(g=typeof w=="function"?w:o(+w),m):g},m.y=function(w){return arguments.length?(y=typeof w=="function"?w:o(+w),m):y},m.context=function(w){return arguments.length?(p=w??null,m):p},m}(c)}},84096:function($,R,e){e.d(R,{i$:function(){return a},Dq:function(){return r},g0:function(){return i}});var A=e(58176),k=e(48480),l=e(59879),T=e(82301),x=e(34823),d=e(79791);function s(bt){if(0<=bt.y&&bt.y<100){var St=new Date(-1,bt.m,bt.d,bt.H,bt.M,bt.S,bt.L);return St.setFullYear(bt.y),St}return new Date(bt.y,bt.m,bt.d,bt.H,bt.M,bt.S,bt.L)}function t(bt){if(0<=bt.y&&bt.y<100){var St=new Date(Date.UTC(-1,bt.m,bt.d,bt.H,bt.M,bt.S,bt.L));return St.setUTCFullYear(bt.y),St}return new Date(Date.UTC(bt.y,bt.m,bt.d,bt.H,bt.M,bt.S,bt.L))}function o(bt,St,Et){return{y:bt,m:St,d:Et,H:0,M:0,S:0,L:0}}function r(bt){var St=bt.dateTime,Et=bt.date,zt=bt.time,Ut=bt.periods,Pt=bt.days,Ze=bt.shortDays,Ye=bt.months,Be=bt.shortMonths,ke=y(Ut),Pe=p(Ut),qe=y(Pt),Xe=p(Pt),nt=y(Ze),ut=p(Ze),ct=y(Ye),Ct=p(Ye),Lt=y(Be),Mt=p(Be),mt={a:function(Dt){return Ze[Dt.getDay()]},A:function(Dt){return Pt[Dt.getDay()]},b:function(Dt){return Be[Dt.getMonth()]},B:function(Dt){return Ye[Dt.getMonth()]},c:null,d:W,e:W,f:ie,H:J,I:X,j:ee,L:re,m:se,M:fe,p:function(Dt){return Ut[+(Dt.getHours()>=12)]},q:function(Dt){return 1+~~(Dt.getMonth()/3)},Q:_t,s:dt,S:ye,u:ge,U:he,V:ve,w:Ie,W:xe,x:null,X:null,y:Ae,Y:Se,Z:Te,"%":ht},kt={a:function(Dt){return Ze[Dt.getUTCDay()]},A:function(Dt){return Pt[Dt.getUTCDay()]},b:function(Dt){return Be[Dt.getUTCMonth()]},B:function(Dt){return Ye[Dt.getUTCMonth()]},c:null,d:Q,e:Q,f:Re,H:oe,I:ce,j:me,L:Me,m:Ce,M:ze,p:function(Dt){return Ut[+(Dt.getUTCHours()>=12)]},q:function(Dt){return 1+~~(Dt.getUTCMonth()/3)},Q:_t,s:dt,S:le,u:de,U:be,V:Fe,w:Ve,W:He,x:null,X:null,y:rt,Y:tt,Z:ot,"%":ht},wt={a:function(Dt,qt,Xt){var cn=nt.exec(qt.slice(Xt));return cn?(Dt.w=ut[cn[0].toLowerCase()],Xt+cn[0].length):-1},A:function(Dt,qt,Xt){var cn=qe.exec(qt.slice(Xt));return cn?(Dt.w=Xe[cn[0].toLowerCase()],Xt+cn[0].length):-1},b:function(Dt,qt,Xt){var cn=Lt.exec(qt.slice(Xt));return cn?(Dt.m=Mt[cn[0].toLowerCase()],Xt+cn[0].length):-1},B:function(Dt,qt,Xt){var cn=ct.exec(qt.slice(Xt));return cn?(Dt.m=Ct[cn[0].toLowerCase()],Xt+cn[0].length):-1},c:function(Dt,qt,Xt){return Nt(Dt,St,qt,Xt)},d:U,e:U,f:j,H,I:H,j:z,L:B,m:I,M:F,p:function(Dt,qt,Xt){var cn=ke.exec(qt.slice(Xt));return cn?(Dt.p=Pe[cn[0].toLowerCase()],Xt+cn[0].length):-1},q:P,Q:G,s:V,S:N,u:w,U:u,V:S,w:m,W:_,x:function(Dt,qt,Xt){return Nt(Dt,Et,qt,Xt)},X:function(Dt,qt,Xt){return Nt(Dt,zt,qt,Xt)},y:L,Y:E,Z:C,"%":K};function Ot(Dt,qt){return function(Xt){var cn,yn,Kt,Mn=[],Un=-1,xn=0,dn=Dt.length;for(Xt instanceof Date||(Xt=new Date(+Xt));++Un<dn;)Dt.charCodeAt(Un)===37&&(Mn.push(Dt.slice(xn,Un)),(yn=c[cn=Dt.charAt(++Un)])!=null?cn=Dt.charAt(++Un):yn=cn==="e"?" ":"0",(Kt=qt[cn])&&(cn=Kt(Xt,yn)),Mn.push(cn),xn=Un+1);return Mn.push(Dt.slice(xn,Un)),Mn.join("")}}function It(Dt,qt){return function(Xt){var cn,yn,Kt=o(1900,void 0,1);if(Nt(Kt,Dt,Xt+="",0)!=Xt.length)return null;if("Q"in Kt)return new Date(Kt.Q);if("s"in Kt)return new Date(1e3*Kt.s+("L"in Kt?Kt.L:0));if(qt&&!("Z"in Kt)&&(Kt.Z=0),"p"in Kt&&(Kt.H=Kt.H%12+12*Kt.p),Kt.m===void 0&&(Kt.m="q"in Kt?Kt.q:0),"V"in Kt){if(Kt.V<1||Kt.V>53)return null;"w"in Kt||(Kt.w=1),"Z"in Kt?(yn=(cn=t(o(Kt.y,0,1))).getUTCDay(),cn=yn>4||yn===0?A.l6.ceil(cn):(0,A.l6)(cn),cn=k.Z.offset(cn,7*(Kt.V-1)),Kt.y=cn.getUTCFullYear(),Kt.m=cn.getUTCMonth(),Kt.d=cn.getUTCDate()+(Kt.w+6)%7):(yn=(cn=s(o(Kt.y,0,1))).getDay(),cn=yn>4||yn===0?l.wA.ceil(cn):(0,l.wA)(cn),cn=T.Z.offset(cn,7*(Kt.V-1)),Kt.y=cn.getFullYear(),Kt.m=cn.getMonth(),Kt.d=cn.getDate()+(Kt.w+6)%7)}else("W"in Kt||"U"in Kt)&&("w"in Kt||(Kt.w="u"in Kt?Kt.u%7:"W"in Kt?1:0),yn="Z"in Kt?t(o(Kt.y,0,1)).getUTCDay():s(o(Kt.y,0,1)).getDay(),Kt.m=0,Kt.d="W"in Kt?(Kt.w+6)%7+7*Kt.W-(yn+5)%7:Kt.w+7*Kt.U-(yn+6)%7);return"Z"in Kt?(Kt.H+=Kt.Z/100|0,Kt.M+=Kt.Z%100,t(Kt)):s(Kt)}}function Nt(Dt,qt,Xt,cn){for(var yn,Kt,Mn=0,Un=qt.length,xn=Xt.length;Mn<Un;){if(cn>=xn)return-1;if((yn=qt.charCodeAt(Mn++))===37){if(yn=qt.charAt(Mn++),!(Kt=wt[yn in c?qt.charAt(Mn++):yn])||(cn=Kt(Dt,Xt,cn))<0)return-1}else if(yn!=Xt.charCodeAt(cn++))return-1}return cn}return mt.x=Ot(Et,mt),mt.X=Ot(zt,mt),mt.c=Ot(St,mt),kt.x=Ot(Et,kt),kt.X=Ot(zt,kt),kt.c=Ot(St,kt),{format:function(Dt){var qt=Ot(Dt+="",mt);return qt.toString=function(){return Dt},qt},parse:function(Dt){var qt=It(Dt+="",!1);return qt.toString=function(){return Dt},qt},utcFormat:function(Dt){var qt=Ot(Dt+="",kt);return qt.toString=function(){return Dt},qt},utcParse:function(Dt){var qt=It(Dt+="",!0);return qt.toString=function(){return Dt},qt}}}var n,a,i,c={"-":"",_:" ",0:"0"},h=/^\s*\d+/,f=/^%/,b=/[\\^$*+?|[\]().{}]/g;function v(bt,St,Et){var zt=bt<0?"-":"",Ut=(zt?-bt:bt)+"",Pt=Ut.length;return zt+(Pt<Et?new Array(Et-Pt+1).join(St)+Ut:Ut)}function g(bt){return bt.replace(b,"\\$&")}function y(bt){return new RegExp("^(?:"+bt.map(g).join("|")+")","i")}function p(bt){for(var St={},Et=-1,zt=bt.length;++Et<zt;)St[bt[Et].toLowerCase()]=Et;return St}function m(bt,St,Et){var zt=h.exec(St.slice(Et,Et+1));return zt?(bt.w=+zt[0],Et+zt[0].length):-1}function w(bt,St,Et){var zt=h.exec(St.slice(Et,Et+1));return zt?(bt.u=+zt[0],Et+zt[0].length):-1}function u(bt,St,Et){var zt=h.exec(St.slice(Et,Et+2));return zt?(bt.U=+zt[0],Et+zt[0].length):-1}function S(bt,St,Et){var zt=h.exec(St.slice(Et,Et+2));return zt?(bt.V=+zt[0],Et+zt[0].length):-1}function _(bt,St,Et){var zt=h.exec(St.slice(Et,Et+2));return zt?(bt.W=+zt[0],Et+zt[0].length):-1}function E(bt,St,Et){var zt=h.exec(St.slice(Et,Et+4));return zt?(bt.y=+zt[0],Et+zt[0].length):-1}function L(bt,St,Et){var zt=h.exec(St.slice(Et,Et+2));return zt?(bt.y=+zt[0]+(+zt[0]>68?1900:2e3),Et+zt[0].length):-1}function C(bt,St,Et){var zt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(St.slice(Et,Et+6));return zt?(bt.Z=zt[1]?0:-(zt[2]+(zt[3]||"00")),Et+zt[0].length):-1}function P(bt,St,Et){var zt=h.exec(St.slice(Et,Et+1));return zt?(bt.q=3*zt[0]-3,Et+zt[0].length):-1}function I(bt,St,Et){var zt=h.exec(St.slice(Et,Et+2));return zt?(bt.m=zt[0]-1,Et+zt[0].length):-1}function U(bt,St,Et){var zt=h.exec(St.slice(Et,Et+2));return zt?(bt.d=+zt[0],Et+zt[0].length):-1}function z(bt,St,Et){var zt=h.exec(St.slice(Et,Et+3));return zt?(bt.m=0,bt.d=+zt[0],Et+zt[0].length):-1}function H(bt,St,Et){var zt=h.exec(St.slice(Et,Et+2));return zt?(bt.H=+zt[0],Et+zt[0].length):-1}function F(bt,St,Et){var zt=h.exec(St.slice(Et,Et+2));return zt?(bt.M=+zt[0],Et+zt[0].length):-1}function N(bt,St,Et){var zt=h.exec(St.slice(Et,Et+2));return zt?(bt.S=+zt[0],Et+zt[0].length):-1}function B(bt,St,Et){var zt=h.exec(St.slice(Et,Et+3));return zt?(bt.L=+zt[0],Et+zt[0].length):-1}function j(bt,St,Et){var zt=h.exec(St.slice(Et,Et+6));return zt?(bt.L=Math.floor(zt[0]/1e3),Et+zt[0].length):-1}function K(bt,St,Et){var zt=f.exec(St.slice(Et,Et+1));return zt?Et+zt[0].length:-1}function G(bt,St,Et){var zt=h.exec(St.slice(Et));return zt?(bt.Q=+zt[0],Et+zt[0].length):-1}function V(bt,St,Et){var zt=h.exec(St.slice(Et));return zt?(bt.s=+zt[0],Et+zt[0].length):-1}function W(bt,St){return v(bt.getDate(),St,2)}function J(bt,St){return v(bt.getHours(),St,2)}function X(bt,St){return v(bt.getHours()%12||12,St,2)}function ee(bt,St){return v(1+T.Z.count((0,x.Z)(bt),bt),St,3)}function re(bt,St){return v(bt.getMilliseconds(),St,3)}function ie(bt,St){return re(bt,St)+"000"}function se(bt,St){return v(bt.getMonth()+1,St,2)}function fe(bt,St){return v(bt.getMinutes(),St,2)}function ye(bt,St){return v(bt.getSeconds(),St,2)}function ge(bt){var St=bt.getDay();return St===0?7:St}function he(bt,St){return v(l.OM.count((0,x.Z)(bt)-1,bt),St,2)}function ve(bt,St){var Et=bt.getDay();return bt=Et>=4||Et===0?(0,l.bL)(bt):l.bL.ceil(bt),v(l.bL.count((0,x.Z)(bt),bt)+((0,x.Z)(bt).getDay()===4),St,2)}function Ie(bt){return bt.getDay()}function xe(bt,St){return v(l.wA.count((0,x.Z)(bt)-1,bt),St,2)}function Ae(bt,St){return v(bt.getFullYear()%100,St,2)}function Se(bt,St){return v(bt.getFullYear()%1e4,St,4)}function Te(bt){var St=bt.getTimezoneOffset();return(St>0?"-":(St*=-1,"+"))+v(St/60|0,"0",2)+v(St%60,"0",2)}function Q(bt,St){return v(bt.getUTCDate(),St,2)}function oe(bt,St){return v(bt.getUTCHours(),St,2)}function ce(bt,St){return v(bt.getUTCHours()%12||12,St,2)}function me(bt,St){return v(1+k.Z.count((0,d.Z)(bt),bt),St,3)}function Me(bt,St){return v(bt.getUTCMilliseconds(),St,3)}function Re(bt,St){return Me(bt,St)+"000"}function Ce(bt,St){return v(bt.getUTCMonth()+1,St,2)}function ze(bt,St){return v(bt.getUTCMinutes(),St,2)}function le(bt,St){return v(bt.getUTCSeconds(),St,2)}function de(bt){var St=bt.getUTCDay();return St===0?7:St}function be(bt,St){return v(A.Ox.count((0,d.Z)(bt)-1,bt),St,2)}function Fe(bt,St){var Et=bt.getUTCDay();return bt=Et>=4||Et===0?(0,A.hB)(bt):A.hB.ceil(bt),v(A.hB.count((0,d.Z)(bt),bt)+((0,d.Z)(bt).getUTCDay()===4),St,2)}function Ve(bt){return bt.getUTCDay()}function He(bt,St){return v(A.l6.count((0,d.Z)(bt)-1,bt),St,2)}function rt(bt,St){return v(bt.getUTCFullYear()%100,St,2)}function tt(bt,St){return v(bt.getUTCFullYear()%1e4,St,4)}function ot(){return"+0000"}function ht(){return"%"}function _t(bt){return+bt}function dt(bt){return Math.floor(+bt/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=n.format,n.parse,i=n.utcFormat,n.utcParse},82301:function($,R,e){e.d(R,{a:function(){return T}});var A=e(30052),k=e(54263),l=(0,A.Z)(function(x){x.setHours(0,0,0,0)},function(x,d){x.setDate(x.getDate()+d)},function(x,d){return(d-x-(d.getTimezoneOffset()-x.getTimezoneOffset())*k.yB)/k.UD},function(x){return x.getDate()-1});R.Z=l;var T=l.range},54263:function($,R,e){e.d(R,{UD:function(){return T},Y2:function(){return l},Ym:function(){return A},iM:function(){return x},yB:function(){return k}});var A=1e3,k=6e4,l=36e5,T=864e5,x=6048e5},81041:function($,R,e){e.r(R),e.d(R,{timeDay:function(){return h.Z},timeDays:function(){return h.a},timeFriday:function(){return f.mC},timeFridays:function(){return f.b$},timeHour:function(){return i},timeHours:function(){return c},timeInterval:function(){return A.Z},timeMillisecond:function(){return l},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return f.wA},timeMondays:function(){return f.bJ},timeMonth:function(){return v},timeMonths:function(){return g},timeSaturday:function(){return f.EY},timeSaturdays:function(){return f.Ff},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return f.OM},timeSundays:function(){return f.vm},timeThursday:function(){return f.bL},timeThursdays:function(){return f.$t},timeTuesday:function(){return f.sy},timeTuesdays:function(){return f.aU},timeWednesday:function(){return f.zg},timeWednesdays:function(){return f.Ld},timeWeek:function(){return f.OM},timeWeeks:function(){return f.vm},timeYear:function(){return y.Z},timeYears:function(){return y.g},utcDay:function(){return E.Z},utcDays:function(){return E.y},utcFriday:function(){return L.QQ},utcFridays:function(){return L.fz},utcHour:function(){return S},utcHours:function(){return _},utcMillisecond:function(){return l},utcMilliseconds:function(){return T},utcMinute:function(){return m},utcMinutes:function(){return w},utcMonday:function(){return L.l6},utcMondays:function(){return L.$3},utcMonth:function(){return P},utcMonths:function(){return I},utcSaturday:function(){return L.g4},utcSaturdays:function(){return L.Q_},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return L.Ox},utcSundays:function(){return L.SU},utcThursday:function(){return L.hB},utcThursdays:function(){return L.xj},utcTuesday:function(){return L.J1},utcTuesdays:function(){return L.DK},utcWednesday:function(){return L.b3},utcWednesdays:function(){return L.uy},utcWeek:function(){return L.Ox},utcWeeks:function(){return L.SU},utcYear:function(){return U.Z},utcYears:function(){return U.D}});var A=e(30052),k=(0,A.Z)(function(){},function(z,H){z.setTime(+z+H)},function(z,H){return H-z});k.every=function(z){return z=Math.floor(z),isFinite(z)&&z>0?z>1?(0,A.Z)(function(H){H.setTime(Math.floor(H/z)*z)},function(H,F){H.setTime(+H+F*z)},function(H,F){return(F-H)/z}):k:null};var l=k,T=k.range,x=e(54263),d=(0,A.Z)(function(z){z.setTime(z-z.getMilliseconds())},function(z,H){z.setTime(+z+H*x.Ym)},function(z,H){return(H-z)/x.Ym},function(z){return z.getUTCSeconds()}),s=d,t=d.range,o=(0,A.Z)(function(z){z.setTime(z-z.getMilliseconds()-z.getSeconds()*x.Ym)},function(z,H){z.setTime(+z+H*x.yB)},function(z,H){return(H-z)/x.yB},function(z){return z.getMinutes()}),r=o,n=o.range,a=(0,A.Z)(function(z){z.setTime(z-z.getMilliseconds()-z.getSeconds()*x.Ym-z.getMinutes()*x.yB)},function(z,H){z.setTime(+z+H*x.Y2)},function(z,H){return(H-z)/x.Y2},function(z){return z.getHours()}),i=a,c=a.range,h=e(82301),f=e(59879),b=(0,A.Z)(function(z){z.setDate(1),z.setHours(0,0,0,0)},function(z,H){z.setMonth(z.getMonth()+H)},function(z,H){return H.getMonth()-z.getMonth()+12*(H.getFullYear()-z.getFullYear())},function(z){return z.getMonth()}),v=b,g=b.range,y=e(34823),p=(0,A.Z)(function(z){z.setUTCSeconds(0,0)},function(z,H){z.setTime(+z+H*x.yB)},function(z,H){return(H-z)/x.yB},function(z){return z.getUTCMinutes()}),m=p,w=p.range,u=(0,A.Z)(function(z){z.setUTCMinutes(0,0,0)},function(z,H){z.setTime(+z+H*x.Y2)},function(z,H){return(H-z)/x.Y2},function(z){return z.getUTCHours()}),S=u,_=u.range,E=e(48480),L=e(58176),C=(0,A.Z)(function(z){z.setUTCDate(1),z.setUTCHours(0,0,0,0)},function(z,H){z.setUTCMonth(z.getUTCMonth()+H)},function(z,H){return H.getUTCMonth()-z.getUTCMonth()+12*(H.getUTCFullYear()-z.getUTCFullYear())},function(z){return z.getUTCMonth()}),P=C,I=C.range,U=e(79791)},30052:function($,R,e){e.d(R,{Z:function(){return l}});var A=new Date,k=new Date;function l(T,x,d,s){function t(o){return T(o=arguments.length===0?new Date:new Date(+o)),o}return t.floor=function(o){return T(o=new Date(+o)),o},t.ceil=function(o){return T(o=new Date(o-1)),x(o,1),T(o),o},t.round=function(o){var r=t(o),n=t.ceil(o);return o-r<n-o?r:n},t.offset=function(o,r){return x(o=new Date(+o),r==null?1:Math.floor(r)),o},t.range=function(o,r,n){var a,i=[];if(o=t.ceil(o),n=n==null?1:Math.floor(n),!(o<r&&n>0))return i;do i.push(a=new Date(+o)),x(o,n),T(o);while(a<o&&o<r);return i},t.filter=function(o){return l(function(r){if(r>=r)for(;T(r),!o(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;x(r,-1),!o(r););else for(;--n>=0;)for(;x(r,1),!o(r););})},d&&(t.count=function(o,r){return A.setTime(+o),k.setTime(+r),T(A),T(k),Math.floor(d(A,k))},t.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?t.filter(s?function(r){return s(r)%o==0}:function(r){return t.count(0,r)%o==0}):t:null}),t}},48480:function($,R,e){e.d(R,{y:function(){return T}});var A=e(30052),k=e(54263),l=(0,A.Z)(function(x){x.setUTCHours(0,0,0,0)},function(x,d){x.setUTCDate(x.getUTCDate()+d)},function(x,d){return(d-x)/k.UD},function(x){return x.getUTCDate()-1});R.Z=l;var T=l.range},58176:function($,R,e){e.d(R,{$3:function(){return a},DK:function(){return i},J1:function(){return d},Ox:function(){return T},QQ:function(){return o},Q_:function(){return b},SU:function(){return n},b3:function(){return s},fz:function(){return f},g4:function(){return r},hB:function(){return t},l6:function(){return x},uy:function(){return c},xj:function(){return h}});var A=e(30052),k=e(54263);function l(v){return(0,A.Z)(function(g){g.setUTCDate(g.getUTCDate()-(g.getUTCDay()+7-v)%7),g.setUTCHours(0,0,0,0)},function(g,y){g.setUTCDate(g.getUTCDate()+7*y)},function(g,y){return(y-g)/k.iM})}var T=l(0),x=l(1),d=l(2),s=l(3),t=l(4),o=l(5),r=l(6),n=T.range,a=x.range,i=d.range,c=s.range,h=t.range,f=o.range,b=r.range},79791:function($,R,e){e.d(R,{D:function(){return l}});var A=e(30052),k=(0,A.Z)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,x){T.setUTCFullYear(T.getUTCFullYear()+x)},function(T,x){return x.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,A.Z)(function(x){x.setUTCFullYear(Math.floor(x.getUTCFullYear()/T)*T),x.setUTCMonth(0,1),x.setUTCHours(0,0,0,0)},function(x,d){x.setUTCFullYear(x.getUTCFullYear()+d*T)}):null},R.Z=k;var l=k.range},59879:function($,R,e){e.d(R,{$t:function(){return h},EY:function(){return r},Ff:function(){return b},Ld:function(){return c},OM:function(){return T},aU:function(){return i},b$:function(){return f},bJ:function(){return a},bL:function(){return t},mC:function(){return o},sy:function(){return d},vm:function(){return n},wA:function(){return x},zg:function(){return s}});var A=e(30052),k=e(54263);function l(v){return(0,A.Z)(function(g){g.setDate(g.getDate()-(g.getDay()+7-v)%7),g.setHours(0,0,0,0)},function(g,y){g.setDate(g.getDate()+7*y)},function(g,y){return(y-g-(y.getTimezoneOffset()-g.getTimezoneOffset())*k.yB)/k.iM})}var T=l(0),x=l(1),d=l(2),s=l(3),t=l(4),o=l(5),r=l(6),n=T.range,a=x.range,i=d.range,c=s.range,h=t.range,f=o.range,b=r.range},34823:function($,R,e){e.d(R,{g:function(){return l}});var A=e(30052),k=(0,A.Z)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,x){T.setFullYear(T.getFullYear()+x)},function(T,x){return x.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,A.Z)(function(x){x.setFullYear(Math.floor(x.getFullYear()/T)*T),x.setMonth(0,1),x.setHours(0,0,0,0)},function(x,d){x.setFullYear(x.getFullYear()+d*T)}):null},R.Z=k;var l=k.range},17045:function($,R,e){var A=e(8709),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",l=Object.prototype.toString,T=Array.prototype.concat,x=Object.defineProperty,d=x&&function(){var o={};try{for(var r in x(o,"x",{enumerable:!1,value:o}),o)return!1;return o.x===o}catch{return!1}}(),s=function(o,r,n,a){var i;(!(r in o)||typeof(i=a)=="function"&&l.call(i)==="[object Function]"&&a())&&(d?x(o,r,{configurable:!0,enumerable:!1,value:n,writable:!0}):o[r]=n)},t=function(o,r){var n=arguments.length>2?arguments[2]:{},a=A(r);k&&(a=T.call(a,Object.getOwnPropertySymbols(r)));for(var i=0;i<a.length;i+=1)s(o,a[i],r[a[i]],n[a[i]])};t.supportsDescriptors=!!d,$.exports=t},46775:function($){$.exports=function(){for(var R=0;R<arguments.length;R++)if(arguments[R]!==void 0)return arguments[R]}},53545:function($){$.exports=A;var R=(A.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function A(l,T){Array.isArray(l)&&(l=l.join(", "));var x,d={},s=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?x=k(T):Array.isArray(T)?x=T:(T.o?x=k(T.o):T.pairs&&(x=T.pairs),T.fontSize&&(s=T.fontSize),T.threshold!=null&&(t=T.threshold))),x||(x=e),R.font=s+"px "+l;for(var o=0;o<x.length;o++){var r=x[o],n=R.measureText(r[0]).width+R.measureText(r[1]).width,a=R.measureText(r).width;if(Math.abs(n-a)>s*t){var i=(a-n)/s;d[r]=1e3*i}}return d}function k(l){for(var T=[],x=l[0];x<=l[1];x++)for(var d=String.fromCharCode(x),s=l[0];s<l[1];s++){var t=d+String.fromCharCode(s);T.push(t)}return T}A.createPairs=k,A.ascii=e},31457:function($,R,e){var A=e(65185),k=e(18625),l={M:"moveTo",C:"bezierCurveTo"};$.exports=function(T,x){T.beginPath(),k(A(x)).forEach(function(d){var s=d[0],t=d.slice(1);T[l[s]].apply(T,t)}),T.closePath()}},90660:function($){$.exports=function(R){switch(R){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function($){function R(e,A,k){var l=0|e[k];if(l<=0)return[];var T,x=new Array(l);if(k===e.length-1)for(T=0;T<l;++T)x[T]=A;else for(T=0;T<l;++T)x[T]=R(e,A,k+1);return x}$.exports=function(e,A){switch(A===void 0&&(A=0),typeof e){case"number":if(e>0)return function(k,l){var T,x;for(T=new Array(k),x=0;x<k;++x)T[x]=l;return T}(0|e,A);break;case"object":if(typeof e.length=="number")return R(e,A,0)}return[]}},11474:function($){function R(S,_,E){E=E||2;var L,C,P,I,U,z,H,F=_&&_.length,N=F?_[0]*E:S.length,B=e(S,0,N,E,!0),j=[];if(!B||B.next===B.prev)return j;if(F&&(B=function(G,V,W,J){var X,ee,re,ie=[];for(X=0,ee=V.length;X<ee;X++)(re=e(G,V[X]*J,X<ee-1?V[X+1]*J:G.length,J,!1))===re.next&&(re.steiner=!0),ie.push(n(re));for(ie.sort(s),X=0;X<ie.length;X++)t(ie[X],W),W=A(W,W.next);return W}(S,_,B,E)),S.length>80*E){L=P=S[0],C=I=S[1];for(var K=E;K<N;K+=E)(U=S[K])<L&&(L=U),(z=S[K+1])<C&&(C=z),U>P&&(P=U),z>I&&(I=z);H=(H=Math.max(P-L,I-C))!==0?1/H:0}return k(B,j,E,L,C,H),j}function e(S,_,E,L,C){var P,I;if(C===u(S,_,E,L)>0)for(P=_;P<E;P+=L)I=p(P,S[P],S[P+1],I);else for(P=E-L;P>=_;P-=L)I=p(P,S[P],S[P+1],I);return I&&h(I,I.next)&&(m(I),I=I.next),I}function A(S,_){if(!S)return S;_||(_=S);var E,L=S;do if(E=!1,L.steiner||!h(L,L.next)&&c(L.prev,L,L.next)!==0)L=L.next;else{if(m(L),(L=_=L.prev)===L.next)break;E=!0}while(E||L!==_);return _}function k(S,_,E,L,C,P,I){if(S){!I&&P&&function(F,N,B,j){var K=F;do K.z===null&&(K.z=r(K.x,K.y,N,B,j)),K.prevZ=K.prev,K.nextZ=K.next,K=K.next;while(K!==F);K.prevZ.nextZ=null,K.prevZ=null,function(G){var V,W,J,X,ee,re,ie,se,fe=1;do{for(W=G,G=null,ee=null,re=0;W;){for(re++,J=W,ie=0,V=0;V<fe&&(ie++,J=J.nextZ);V++);for(se=fe;ie>0||se>0&&J;)ie!==0&&(se===0||!J||W.z<=J.z)?(X=W,W=W.nextZ,ie--):(X=J,J=J.nextZ,se--),ee?ee.nextZ=X:G=X,X.prevZ=ee,ee=X;W=J}ee.nextZ=null,fe*=2}while(re>1)}(K)}(S,L,C,P);for(var U,z,H=S;S.prev!==S.next;)if(U=S.prev,z=S.next,P?T(S,L,C,P):l(S))_.push(U.i/E),_.push(S.i/E),_.push(z.i/E),m(S),S=z.next,H=z.next;else if((S=z)===H){I?I===1?k(S=x(A(S),_,E),_,E,L,C,P,2):I===2&&d(S,_,E,L,C,P):k(A(S),_,E,L,C,P,1);break}}}function l(S){var _=S.prev,E=S,L=S.next;if(c(_,E,L)>=0)return!1;for(var C=S.next.next;C!==S.prev;){if(a(_.x,_.y,E.x,E.y,L.x,L.y,C.x,C.y)&&c(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(S,_,E,L){var C=S.prev,P=S,I=S.next;if(c(C,P,I)>=0)return!1;for(var U=C.x<P.x?C.x<I.x?C.x:I.x:P.x<I.x?P.x:I.x,z=C.y<P.y?C.y<I.y?C.y:I.y:P.y<I.y?P.y:I.y,H=C.x>P.x?C.x>I.x?C.x:I.x:P.x>I.x?P.x:I.x,F=C.y>P.y?C.y>I.y?C.y:I.y:P.y>I.y?P.y:I.y,N=r(U,z,_,E,L),B=r(H,F,_,E,L),j=S.prevZ,K=S.nextZ;j&&j.z>=N&&K&&K.z<=B;){if(j!==S.prev&&j!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,j.x,j.y)&&c(j.prev,j,j.next)>=0||(j=j.prevZ,K!==S.prev&&K!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,K.x,K.y)&&c(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;j&&j.z>=N;){if(j!==S.prev&&j!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,j.x,j.y)&&c(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;K&&K.z<=B;){if(K!==S.prev&&K!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,K.x,K.y)&&c(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function x(S,_,E){var L=S;do{var C=L.prev,P=L.next.next;!h(C,P)&&f(C,L,L.next,P)&&g(C,P)&&g(P,C)&&(_.push(C.i/E),_.push(L.i/E),_.push(P.i/E),m(L),m(L.next),L=S=P),L=L.next}while(L!==S);return A(L)}function d(S,_,E,L,C,P){var I=S;do{for(var U=I.next.next;U!==I.prev;){if(I.i!==U.i&&i(I,U)){var z=y(I,U);return I=A(I,I.next),z=A(z,z.next),k(I,_,E,L,C,P),void k(z,_,E,L,C,P)}U=U.next}I=I.next}while(I!==S)}function s(S,_){return S.x-_.x}function t(S,_){if(_=function(L,C){var P,I=C,U=L.x,z=L.y,H=-1/0;do{if(z<=I.y&&z>=I.next.y&&I.next.y!==I.y){var F=I.x+(z-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(F<=U&&F>H){if(H=F,F===U){if(z===I.y)return I;if(z===I.next.y)return I.next}P=I.x<I.next.x?I:I.next}}I=I.next}while(I!==C);if(!P)return null;if(U===H)return P;var N,B=P,j=P.x,K=P.y,G=1/0;I=P;do U>=I.x&&I.x>=j&&U!==I.x&&a(z<K?U:H,z,j,K,z<K?H:U,z,I.x,I.y)&&(N=Math.abs(z-I.y)/(U-I.x),g(I,L)&&(N<G||N===G&&(I.x>P.x||I.x===P.x&&o(P,I)))&&(P=I,G=N)),I=I.next;while(I!==B);return P}(S,_),_){var E=y(_,S);A(_,_.next),A(E,E.next)}}function o(S,_){return c(S.prev,S,_.prev)<0&&c(_.next,S,S.next)<0}function r(S,_,E,L,C){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*C)|S<<8))|S<<4))|S<<2))|S<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=32767*(_-L)*C)|_<<8))|_<<4))|_<<2))|_<<1))<<1}function n(S){var _=S,E=S;do(_.x<E.x||_.x===E.x&&_.y<E.y)&&(E=_),_=_.next;while(_!==S);return E}function a(S,_,E,L,C,P,I,U){return(C-I)*(_-U)-(S-I)*(P-U)>=0&&(S-I)*(L-U)-(E-I)*(_-U)>=0&&(E-I)*(P-U)-(C-I)*(L-U)>=0}function i(S,_){return S.next.i!==_.i&&S.prev.i!==_.i&&!function(E,L){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==L.i&&C.next.i!==L.i&&f(C,C.next,E,L))return!0;C=C.next}while(C!==E);return!1}(S,_)&&(g(S,_)&&g(_,S)&&function(E,L){var C=E,P=!1,I=(E.x+L.x)/2,U=(E.y+L.y)/2;do C.y>U!=C.next.y>U&&C.next.y!==C.y&&I<(C.next.x-C.x)*(U-C.y)/(C.next.y-C.y)+C.x&&(P=!P),C=C.next;while(C!==E);return P}(S,_)&&(c(S.prev,S,_.prev)||c(S,_.prev,_))||h(S,_)&&c(S.prev,S,S.next)>0&&c(_.prev,_,_.next)>0)}function c(S,_,E){return(_.y-S.y)*(E.x-_.x)-(_.x-S.x)*(E.y-_.y)}function h(S,_){return S.x===_.x&&S.y===_.y}function f(S,_,E,L){var C=v(c(S,_,E)),P=v(c(S,_,L)),I=v(c(E,L,S)),U=v(c(E,L,_));return C!==P&&I!==U||!(C!==0||!b(S,E,_))||!(P!==0||!b(S,L,_))||!(I!==0||!b(E,S,L))||!(U!==0||!b(E,_,L))}function b(S,_,E){return _.x<=Math.max(S.x,E.x)&&_.x>=Math.min(S.x,E.x)&&_.y<=Math.max(S.y,E.y)&&_.y>=Math.min(S.y,E.y)}function v(S){return S>0?1:S<0?-1:0}function g(S,_){return c(S.prev,S,S.next)<0?c(S,_,S.next)>=0&&c(S,S.prev,_)>=0:c(S,_,S.prev)<0||c(S,S.next,_)<0}function y(S,_){var E=new w(S.i,S.x,S.y),L=new w(_.i,_.x,_.y),C=S.next,P=_.prev;return S.next=_,_.prev=S,E.next=C,C.prev=E,L.next=E,E.prev=L,P.next=L,L.prev=P,L}function p(S,_,E,L){var C=new w(S,_,E);return L?(C.next=L.next,C.prev=L,L.next.prev=C,L.next=C):(C.prev=C,C.next=C),C}function m(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function w(S,_,E){this.i=S,this.x=_,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u(S,_,E,L){for(var C=0,P=_,I=E-L;P<E;P+=L)C+=(S[I]-S[P])*(S[P+1]+S[I+1]),I=P;return C}$.exports=R,$.exports.default=R,R.deviation=function(S,_,E,L){var C=_&&_.length,P=C?_[0]*E:S.length,I=Math.abs(u(S,0,P,E));if(C)for(var U=0,z=_.length;U<z;U++){var H=_[U]*E,F=U<z-1?_[U+1]*E:S.length;I-=Math.abs(u(S,H,F,E))}var N=0;for(U=0;U<L.length;U+=3){var B=L[U]*E,j=L[U+1]*E,K=L[U+2]*E;N+=Math.abs((S[B]-S[K])*(S[j+1]-S[B+1])-(S[B]-S[j])*(S[K+1]-S[B+1]))}return I===0&&N===0?0:Math.abs((N-I)/I)},R.flatten=function(S){for(var _=S[0][0].length,E={vertices:[],holes:[],dimensions:_},L=0,C=0;C<S.length;C++){for(var P=0;P<S[C].length;P++)for(var I=0;I<_;I++)E.vertices.push(S[C][P][I]);C>0&&(L+=S[C-1].length,E.holes.push(L))}return E}},2502:function($,R,e){var A=e(68664);$.exports=function(k,l){var T,x=[],d=[],s=[],t={},o=[];function r(g){s[g]=!1,t.hasOwnProperty(g)&&Object.keys(t[g]).forEach(function(y){delete t[g][y],s[y]&&r(y)})}function n(g){var y,p,m=!1;for(d.push(g),s[g]=!0,y=0;y<o[g].length;y++)(p=o[g][y])===T?(a(T,d),m=!0):s[p]||(m=n(p));if(m)r(g);else for(y=0;y<o[g].length;y++){p=o[g][y];var w=t[p];w||(w={},t[p]=w),w[p]=!0}return d.pop(),m}function a(g,y){var p=[].concat(y).concat(g);l?l(n):x.push(p)}function i(g){(function(E){for(var L=0;L<k.length;L++)L<E&&(k[L]=[]),k[L]=k[L].filter(function(C){return C>=E})})(g);for(var y,p=A(k).components.filter(function(E){return E.length>1}),m=1/0,w=0;w<p.length;w++)for(var u=0;u<p[w].length;u++)p[w][u]<m&&(m=p[w][u],y=w);var S=p[y];if(!S)return!1;var _=k.map(function(E,L){return S.indexOf(L)===-1?[]:E.filter(function(C){return S.indexOf(C)!==-1})});return{leastVertex:m,adjList:_}}T=0;for(var c=k.length;T<c;){var h=i(T);if(T=h.leastVertex,o=h.adjList){for(var f=0;f<o.length;f++)for(var b=0;b<o[f].length;b++){var v=o[f][b];s[+v]=!1,t[v]={}}n(T),T+=1}else T=c}return l?void 0:x}},72943:function($,R,e){var A,k=TypeError,l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch{l=null}var T=function(){throw new k},x=l?function(){try{return T}catch{try{return l(arguments,"callee").get}catch{return T}}}():T,d=e(57877)(),s=Object.getPrototypeOf||function(h){return h.__proto__},t=typeof Uint8Array>"u"?A:s(Uint8Array),o={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?A:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?A:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":d?s([][Symbol.iterator]()):A,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":A,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":A,"%AsyncGenerator%":A,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":A,"%AsyncIteratorPrototype%":A,"%Atomics%":typeof Atomics>"u"?A:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?A:DataView,"%DataViewPrototype%":typeof DataView>"u"?A:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?A:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?A:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?A:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?A:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":A,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":A,"%Int8Array%":typeof Int8Array>"u"?A:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?A:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?A:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?A:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?A:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?A:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?s(s([][Symbol.iterator]())):A,"%JSON%":typeof JSON=="object"?JSON:A,"%JSONParse%":typeof JSON=="object"?JSON.parse:A,"%Map%":typeof Map>"u"?A:Map,"%MapIteratorPrototype%":typeof Map<"u"&&d?s(new Map()[Symbol.iterator]()):A,"%MapPrototype%":typeof Map>"u"?A:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?A:Promise,"%PromisePrototype%":typeof Promise>"u"?A:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?A:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?A:Promise.all,"%Promise_reject%":typeof Promise>"u"?A:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?A:Promise.resolve,"%Proxy%":typeof Proxy>"u"?A:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?A:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?A:Set,"%SetIteratorPrototype%":typeof Set<"u"&&d?s(new Set()[Symbol.iterator]()):A,"%SetPrototype%":typeof Set>"u"?A:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?A:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?A:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":d?s(""[Symbol.iterator]()):A,"%StringPrototype%":String.prototype,"%Symbol%":d?Symbol:A,"%SymbolPrototype%":d?Symbol.prototype:A,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":x,"%TypedArray%":t,"%TypedArrayPrototype%":t?t.prototype:A,"%TypeError%":k,"%TypeErrorPrototype%":k.prototype,"%Uint8Array%":typeof Uint8Array>"u"?A:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?A:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?A:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?A:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?A:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?A:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?A:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?A:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?A:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?A:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?A:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?A:WeakSet.prototype},r=e(77575).call(Function.call,String.prototype.replace),n=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,a=/\\(\\)?/g,i=function(h){var f=[];return r(h,n,function(b,v,g,y){f[f.length]=g?r(y,a,"$1"):v||b}),f},c=function(h,f){if(!(h in o))throw new SyntaxError("intrinsic "+h+" does not exist!");if(o[h]===void 0&&!f)throw new k("intrinsic "+h+" exists, but is not available. Please file an issue!");return o[h]};$.exports=function(h,f){if(typeof h!="string"||h.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof f!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var b=i(h),v=c("%"+(b.length>0?b[0]:"")+"%",f),g=1;g<b.length;g+=1)if(v!=null)if(l&&g+1>=b.length){var y=l(v,b[g]);if(!f&&!(b[g]in v))throw new k("base intrinsic for "+h+" exists, but the property is not available.");v=y?y.get||y.value:v[b[g]]}else v=v[b[g]];return v}},84671:function($,R,e){var A=e(77575),k=e(72943)("%Function%"),l=k.apply,T=k.call;$.exports=function(){return A.apply(T,arguments)},$.exports.apply=function(){return A.apply(l,arguments)}},92978:function($,R,e){var A=e(72943),k=e(84671),l=k(A("String.prototype.indexOf"));$.exports=function(T,x){var d=A(T,!!x);return typeof d=="function"&&l(T,".prototype.")?k(d):d}},67295:function($,R,e){var A=e(72943)("%Object.getOwnPropertyDescriptor%");if(A)try{A([],"length")}catch{A=null}$.exports=A},16134:function($,R,e){var A=e(36672);$.exports=function(){return A(this).length=0,this}},4892:function($,R,e){$.exports=e(64404)()?Array.from:e(49441)},64404:function($){$.exports=function(){var R,e,A=Array.from;return typeof A=="function"&&(e=A(R=["raz","dwa"]),Boolean(e&&e!==R&&e[1]==="dwa"))}},49441:function($,R,e){var A=e(8260).iterator,k=e(73051),l=e(33717),T=e(35976),x=e(78513),d=e(36672),s=e(95296),t=e(87963),o=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;$.exports=function(i){var c,h,f,b,v,g,y,p,m,w,u=arguments[1],S=arguments[2];if(i=Object(d(i)),s(u)&&x(u),this&&this!==Array&&l(this))c=this;else{if(!u){if(k(i))return(v=i.length)!==1?Array.apply(null,i):((b=new Array(1))[0]=i[0],b);if(o(i)){for(b=new Array(v=i.length),h=0;h<v;++h)b[h]=i[h];return b}}b=[]}if(!o(i)){if((m=i[A])!==void 0){for(y=x(m).call(i),c&&(b=new c),p=y.next(),h=0;!p.done;)w=u?r.call(u,S,p.value,h):p.value,c?(n.value=w,a(b,h,n)):b[h]=w,p=y.next(),++h;v=h}else if(t(i)){for(v=i.length,c&&(b=new c),h=0,f=0;h<v;++h)w=i[h],h+1<v&&(g=w.charCodeAt(0))>=55296&&g<=56319&&(w+=i[++h]),w=u?r.call(u,S,w,f):w,c?(n.value=w,a(b,f,n)):b[f]=w,++f;v=f}}if(v===void 0)for(v=T(i.length),c&&(b=new c(v)),h=0;h<v;++h)w=u?r.call(u,S,i[h],h):i[h],c?(n.value=w,a(b,h,n)):b[h]=w;return c&&(n.value=null,b.length=v),b}},73051:function($){var R=Object.prototype.toString,e=R.call(function(){return arguments}());$.exports=function(A){return R.call(A)===e}},33717:function($){var R=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);$.exports=function(A){return typeof A=="function"&&e(R.call(A))}},52345:function($){$.exports=function(){}},9953:function($,R,e){$.exports=e(90436)()?Math.sign:e(6069)},90436:function($){$.exports=function(){var R=Math.sign;return typeof R=="function"&&R(10)===1&&R(-20)===-1}},6069:function($){$.exports=function(R){return R=Number(R),isNaN(R)||R===0?R:R>0?1:-1}},56247:function($,R,e){var A=e(9953),k=Math.abs,l=Math.floor;$.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?A(T)*l(k(T)):T}},35976:function($,R,e){var A=e(56247),k=Math.max;$.exports=function(l){return k(0,A(l))}},67260:function($,R,e){var A=e(78513),k=e(36672),l=Function.prototype.bind,T=Function.prototype.call,x=Object.keys,d=Object.prototype.propertyIsEnumerable;$.exports=function(s,t){return function(o,r){var n,a=arguments[2],i=arguments[3];return o=Object(k(o)),A(r),n=x(o),i&&n.sort(typeof i=="function"?l.call(i,o):void 0),typeof s!="function"&&(s=n[s]),T.call(s,n,function(c,h){return d.call(o,c)?T.call(r,a,o[c],c,o,h):t})}}},95879:function($,R,e){$.exports=e(73583)()?Object.assign:e(34205)},73583:function($){$.exports=function(){var R,e=Object.assign;return typeof e=="function"&&(e(R={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),R.foo+R.bar+R.trzy==="razdwatrzy")}},34205:function($,R,e){var A=e(68700),k=e(36672),l=Math.max;$.exports=function(T,x){var d,s,t,o=l(arguments.length,2);for(T=Object(k(T)),t=function(r){try{T[r]=x[r]}catch(n){d||(d=n)}},s=1;s<o;++s)A(x=arguments[s]).forEach(t);if(d!==void 0)throw d;return T}},19012:function($,R,e){var A=e(4892),k=e(95879),l=e(36672);$.exports=function(T){var x=Object(l(T)),d=arguments[1],s=Object(arguments[2]);if(x!==T&&!d)return x;var t={};return d?A(d,function(o){(s.ensure||o in T)&&(t[o]=T[o])}):k(t,T),t}},52818:function($,R,e){var A,k,l,T,x=Object.create;e(33247)()||(A=e(51882)),$.exports=A?A.level!==1?x:(k={},l={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(d){l[d]=d!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,l),Object.defineProperty(A,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(d,s){return x(d===null?k:d,s)}):x},96437:function($,R,e){$.exports=e(67260)("forEach")},99611:function($,R,e){var A=e(95296),k={function:!0,object:!0};$.exports=function(l){return A(l)&&k[typeof l]||!1}},95296:function($,R,e){var A=e(52345)();$.exports=function(k){return k!==A&&k!==null}},68700:function($,R,e){$.exports=e(13895)()?Object.keys:e(25217)},13895:function($){$.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function($,R,e){var A=e(95296),k=Object.keys;$.exports=function(l){return k(A(l)?Object(l):l)}},16906:function($,R,e){var A=e(78513),k=e(96437),l=Function.prototype.call;$.exports=function(T,x){var d={},s=arguments[2];return A(x),k(T,function(t,o,r,n){d[o]=l.call(x,s,t,o,r,n)}),d}},21780:function($,R,e){var A=e(95296),k=Array.prototype.forEach,l=Object.create,T=function(x,d){var s;for(s in x)d[s]=x[s]};$.exports=function(x){var d=l(null);return k.call(arguments,function(s){A(s)&&T(Object(s),d)}),d}},1496:function($,R,e){$.exports=e(33247)()?Object.setPrototypeOf:e(51882)},33247:function($){var R=Object.create,e=Object.getPrototypeOf,A={};$.exports=function(){var k=Object.setPrototypeOf,l=arguments[0]||R;return typeof k=="function"&&e(k(l(null),A))===A}},51882:function($,R,e){var A,k,l,T,x=e(99611),d=e(36672),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};A=function(r,n){if(d(r),n===null||x(n))return r;throw new TypeError("Prototype must be null or an object")},$.exports=(k=function(){var r,n=Object.create(null),a={},i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{(r=i.set).call(n,a)}catch{}if(Object.getPrototypeOf(n)===a)return{set:r,level:2}}return n.__proto__=a,Object.getPrototypeOf(n)===a?{level:2}:((n={}).__proto__=a,Object.getPrototypeOf(n)===a&&{level:1})}(),k?(k.level===2?k.set?(T=k.set,l=function(r,n){return T.call(A(r,n),n),r}):l=function(r,n){return A(r,n).__proto__=n,r}:l=function r(n,a){var i;return A(n,a),(i=s.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,a===null&&(a=r.nullPolyfill),n.__proto__=a,i&&t(r.nullPolyfill,"__proto__",o),n},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),e(52818)},78513:function($){$.exports=function(R){if(typeof R!="function")throw new TypeError(R+" is not a function");return R}},98976:function($,R,e){var A=e(99611);$.exports=function(k){if(!A(k))throw new TypeError(k+" is not an Object");return k}},36672:function($,R,e){var A=e(95296);$.exports=function(k){if(!A(k))throw new TypeError("Cannot use null or undefined");return k}},66741:function($,R,e){$.exports=e(17557)()?String.prototype.contains:e(60381)},17557:function($){var R="razdwatrzy";$.exports=function(){return typeof R.contains=="function"&&R.contains("dwa")===!0&&R.contains("foo")===!1}},60381:function($){var R=String.prototype.indexOf;$.exports=function(e){return R.call(this,e,arguments[1])>-1}},87963:function($){var R=Object.prototype.toString,e=R.call("");$.exports=function(A){return typeof A=="string"||A&&typeof A=="object"&&(A instanceof String||R.call(A)===e)||!1}},43043:function($){var R=Object.create(null),e=Math.random;$.exports=function(){var A;do A=e().toString(36).slice(2);while(R[A]);return A}},32411:function($,R,e){var A,k=e(1496),l=e(66741),T=e(62072),x=e(8260),d=e(95426),s=Object.defineProperty;A=$.exports=function(t,o){if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");d.call(this,t),o=o?l.call(o,"key+value")?"key+value":l.call(o,"key")?"key":"value":"value",s(this,"__kind__",T("",o))},k&&k(A,d),delete A.prototype.constructor,A.prototype=Object.create(d.prototype,{_resolve:T(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(A.prototype,x.toStringTag,T("c","Array Iterator"))},27515:function($,R,e){var A=e(73051),k=e(78513),l=e(87963),T=e(66661),x=Array.isArray,d=Function.prototype.call,s=Array.prototype.some;$.exports=function(t,o){var r,n,a,i,c,h,f,b,v=arguments[2];if(x(t)||A(t)?r="array":l(t)?r="string":t=T(t),k(o),a=function(){i=!0},r!=="array")if(r!=="string")for(n=t.next();!n.done;){if(d.call(o,v,n.value,a),i)return;n=t.next()}else for(h=t.length,c=0;c<h&&(f=t[c],c+1<h&&(b=f.charCodeAt(0))>=55296&&b<=56319&&(f+=t[++c]),d.call(o,v,f,a),!i);++c);else s.call(t,function(g){return d.call(o,v,g,a),i})}},66661:function($,R,e){var A=e(73051),k=e(87963),l=e(32411),T=e(259),x=e(58095),d=e(8260).iterator;$.exports=function(s){return typeof x(s)[d]=="function"?s[d]():A(s)?new l(s):k(s)?new T(s):new l(s)}},95426:function($,R,e){var A,k=e(16134),l=e(95879),T=e(78513),x=e(36672),d=e(62072),s=e(55174),t=e(8260),o=Object.defineProperty,r=Object.defineProperties;$.exports=A=function(n,a){if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");r(this,{__list__:d("w",x(n)),__context__:d("w",a),__nextIndex__:d("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete A.prototype.constructor,r(A.prototype,l({_next:d(function(){var n;if(this.__list__)return this.__redo__&&(n=this.__redo__.shift())!==void 0?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:d(function(n){return this.__list__[n]}),_unBind:d(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:d(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:d(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,i){a>=n&&(this.__redo__[i]=++a)},this),this.__redo__.push(n)):o(this,"__redo__",d("c",[n])))}),_onDelete:d(function(n){var a;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((a=this.__redo__.indexOf(n))!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(i,c){i>n&&(this.__redo__[c]=--i)},this)))}),_onClear:d(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),o(A.prototype,t.iterator,d(function(){return this}))},35940:function($,R,e){var A=e(73051),k=e(95296),l=e(87963),T=e(8260).iterator,x=Array.isArray;$.exports=function(d){return!(!k(d)||!x(d)&&!l(d)&&!A(d)&&typeof d[T]!="function")}},259:function($,R,e){var A,k=e(1496),l=e(62072),T=e(8260),x=e(95426),d=Object.defineProperty;A=$.exports=function(s){if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");s=String(s),x.call(this,s),d(this,"__length__",l("",s.length))},k&&k(A,x),delete A.prototype.constructor,A.prototype=Object.create(x.prototype,{_next:l(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:l(function(s){var t,o=this.__list__[s];return this.__nextIndex__===this.__length__?o:(t=o.charCodeAt(0))>=55296&&t<=56319?o+this.__list__[this.__nextIndex__++]:o})}),d(A.prototype,T.toStringTag,l("c","String Iterator"))},58095:function($,R,e){var A=e(35940);$.exports=function(k){if(!A(k))throw new TypeError(k+" is not iterable");return k}},73523:function($){function R(e,A){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),l=1;l<arguments.length;l++){var T=arguments[l];if(T!=null)for(var x=Object.keys(Object(T)),d=0,s=x.length;d<s;d++){var t=x[d],o=Object.getOwnPropertyDescriptor(T,t);o!==void 0&&o.enumerable&&(k[t]=T[t])}}return k}$.exports={assign:R,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:R})}}},8260:function($,R,e){$.exports=e(69711)()?e(94908).Symbol:e(18415)},69711:function($,R,e){var A=e(94908),k={object:!0,symbol:!0};$.exports=function(){var l,T=A.Symbol;if(typeof T!="function")return!1;l=T("test symbol");try{String(l)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},82276:function($){$.exports=function(R){return!!R&&(typeof R=="symbol"||!!R.constructor&&R.constructor.name==="Symbol"&&R[R.constructor.toStringTag]==="Symbol")}},29366:function($,R,e){var A=e(62072),k=Object.create,l=Object.defineProperty,T=Object.prototype,x=k(null);$.exports=function(d){for(var s,t,o=0;x[d+(o||"")];)++o;return x[d+=o||""]=!0,l(T,s="@@"+d,A.gs(null,function(r){t||(t=!0,l(this,s,A(r)),t=!1)})),s}},92842:function($,R,e){var A=e(62072),k=e(94908).Symbol;$.exports=function(l){return Object.defineProperties(l,{hasInstance:A("",k&&k.hasInstance||l("hasInstance")),isConcatSpreadable:A("",k&&k.isConcatSpreadable||l("isConcatSpreadable")),iterator:A("",k&&k.iterator||l("iterator")),match:A("",k&&k.match||l("match")),replace:A("",k&&k.replace||l("replace")),search:A("",k&&k.search||l("search")),species:A("",k&&k.species||l("species")),split:A("",k&&k.split||l("split")),toPrimitive:A("",k&&k.toPrimitive||l("toPrimitive")),toStringTag:A("",k&&k.toStringTag||l("toStringTag")),unscopables:A("",k&&k.unscopables||l("unscopables"))})}},13304:function($,R,e){var A=e(62072),k=e(53308),l=Object.create(null);$.exports=function(T){return Object.defineProperties(T,{for:A(function(x){return l[x]?l[x]:l[x]=T(String(x))}),keyFor:A(function(x){var d;for(d in k(x),l)if(l[d]===x)return d})})}},18415:function($,R,e){var A,k,l,T=e(62072),x=e(53308),d=e(94908).Symbol,s=e(29366),t=e(92842),o=e(13304),r=Object.create,n=Object.defineProperties,a=Object.defineProperty;if(typeof d=="function")try{String(d()),l=!0}catch{}else d=null;k=function(i){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return A(i)},$.exports=A=function i(c){var h;if(this instanceof i)throw new TypeError("Symbol is not a constructor");return l?d(c):(h=r(k.prototype),c=c===void 0?"":String(c),n(h,{__description__:T("",c),__name__:T("",s(c))}))},t(A),o(A),n(k.prototype,{constructor:T(A),toString:T("",function(){return this.__name__})}),n(A.prototype,{toString:T(function(){return"Symbol ("+x(this).__description__+")"}),valueOf:T(function(){return x(this)})}),a(A.prototype,A.toPrimitive,T("",function(){var i=x(this);return typeof i=="symbol"?i:i.toString()})),a(A.prototype,A.toStringTag,T("c","Symbol")),a(k.prototype,A.toStringTag,T("c",A.prototype[A.toStringTag])),a(k.prototype,A.toPrimitive,T("c",A.prototype[A.toPrimitive]))},53308:function($,R,e){var A=e(82276);$.exports=function(k){if(!A(k))throw new TypeError(k+" is not a symbol");return k}},83522:function($,R,e){$.exports=e(96402)()?WeakMap:e(329)},96402:function($){$.exports=function(){var R,e;if(typeof WeakMap!="function")return!1;try{R=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(R)==="[object WeakMap]"&&typeof R.set=="function"&&R.set({},1)===R&&typeof R.delete=="function"&&typeof R.has=="function"&&R.get(e)==="one"}},96416:function($){$.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},329:function($,R,e){var A,k=e(95296),l=e(1496),T=e(98976),x=e(36672),d=e(43043),s=e(62072),t=e(66661),o=e(27515),r=e(8260).toStringTag,n=e(96416),a=Array.isArray,i=Object.defineProperty,c=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;$.exports=A=function(){var f,b=arguments[0];if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");return f=n&&l&&WeakMap!==A?l(new WeakMap,h(this)):this,k(b)&&(a(b)||(b=t(b))),i(f,"__weakMapData__",s("c","$weakMap$"+d())),b&&o(b,function(v){x(v),f.set(v[0],v[1])}),f},n&&(l&&l(A,WeakMap),A.prototype=Object.create(WeakMap.prototype,{constructor:s(A)})),Object.defineProperties(A.prototype,{delete:s(function(f){return!!c.call(T(f),this.__weakMapData__)&&(delete f[this.__weakMapData__],!0)}),get:s(function(f){if(c.call(T(f),this.__weakMapData__))return f[this.__weakMapData__]}),has:s(function(f){return c.call(T(f),this.__weakMapData__)}),set:s(function(f,b){return i(T(f),this.__weakMapData__,s("c",b)),this}),toString:s(function(){return"[object WeakMap]"})}),i(A.prototype,r,s("c","WeakMap"))},15398:function($){var R,e=typeof Reflect=="object"?Reflect:null,A=e&&typeof e.apply=="function"?e.apply:function(c,h,f){return Function.prototype.apply.call(c,h,f)};R=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:function(c){return Object.getOwnPropertyNames(c)};var k=Number.isNaN||function(c){return c!=c};function l(){l.init.call(this)}$.exports=l,$.exports.once=function(c,h){return new Promise(function(f,b){function v(y){c.removeListener(h,g),b(y)}function g(){typeof c.removeListener=="function"&&c.removeListener("error",v),f([].slice.call(arguments))}i(c,h,g,{once:!0}),h!=="error"&&function(y,p,m){typeof y.on=="function"&&i(y,"error",p,{once:!0})}(c,v)})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var T=10;function x(c){if(typeof c!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}function d(c){return c._maxListeners===void 0?l.defaultMaxListeners:c._maxListeners}function s(c,h,f,b){var v,g,y,p;if(x(f),(g=c._events)===void 0?(g=c._events=Object.create(null),c._eventsCount=0):(g.newListener!==void 0&&(c.emit("newListener",h,f.listener?f.listener:f),g=c._events),y=g[h]),y===void 0)y=g[h]=f,++c._eventsCount;else if(typeof y=="function"?y=g[h]=b?[f,y]:[y,f]:b?y.unshift(f):y.push(f),(v=d(c))>0&&y.length>v&&!y.warned){y.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=c,m.type=h,m.count=y.length,p=m,console&&console.warn&&console.warn(p)}return c}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(c,h,f){var b={fired:!1,wrapFn:void 0,target:c,type:h,listener:f},v=t.bind(b);return v.listener=f,b.wrapFn=v,v}function r(c,h,f){var b=c._events;if(b===void 0)return[];var v=b[h];return v===void 0?[]:typeof v=="function"?f?[v.listener||v]:[v]:f?function(g){for(var y=new Array(g.length),p=0;p<y.length;++p)y[p]=g[p].listener||g[p];return y}(v):a(v,v.length)}function n(c){var h=this._events;if(h!==void 0){var f=h[c];if(typeof f=="function")return 1;if(f!==void 0)return f.length}return 0}function a(c,h){for(var f=new Array(h),b=0;b<h;++b)f[b]=c[b];return f}function i(c,h,f,b){if(typeof c.on=="function")b.once?c.once(h,f):c.on(h,f);else{if(typeof c.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c);c.addEventListener(h,function v(g){b.once&&c.removeEventListener(h,v),f(g)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(c){if(typeof c!="number"||c<0||k(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");T=c}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||k(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(c){for(var h=[],f=1;f<arguments.length;f++)h.push(arguments[f]);var b=c==="error",v=this._events;if(v!==void 0)b=b&&v.error===void 0;else if(!b)return!1;if(b){var g;if(h.length>0&&(g=h[0]),g instanceof Error)throw g;var y=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw y.context=g,y}var p=v[c];if(p===void 0)return!1;if(typeof p=="function")A(p,this,h);else{var m=p.length,w=a(p,m);for(f=0;f<m;++f)A(w[f],this,h)}return!0},l.prototype.addListener=function(c,h){return s(this,c,h,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(c,h){return s(this,c,h,!0)},l.prototype.once=function(c,h){return x(h),this.on(c,o(this,c,h)),this},l.prototype.prependOnceListener=function(c,h){return x(h),this.prependListener(c,o(this,c,h)),this},l.prototype.removeListener=function(c,h){var f,b,v,g,y;if(x(h),(b=this._events)===void 0)return this;if((f=b[c])===void 0)return this;if(f===h||f.listener===h)--this._eventsCount==0?this._events=Object.create(null):(delete b[c],b.removeListener&&this.emit("removeListener",c,f.listener||h));else if(typeof f!="function"){for(v=-1,g=f.length-1;g>=0;g--)if(f[g]===h||f[g].listener===h){y=f[g].listener,v=g;break}if(v<0)return this;v===0?f.shift():function(p,m){for(;m+1<p.length;m++)p[m]=p[m+1];p.pop()}(f,v),f.length===1&&(b[c]=f[0]),b.removeListener!==void 0&&this.emit("removeListener",c,y||h)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(c){var h,f,b;if((f=this._events)===void 0)return this;if(f.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):f[c]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete f[c]),this;if(arguments.length===0){var v,g=Object.keys(f);for(b=0;b<g.length;++b)(v=g[b])!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(h=f[c])=="function")this.removeListener(c,h);else if(h!==void 0)for(b=h.length-1;b>=0;b--)this.removeListener(c,h[b]);return this},l.prototype.listeners=function(c){return r(this,c,!0)},l.prototype.rawListeners=function(c){return r(this,c,!1)},l.listenerCount=function(c,h){return typeof c.listenerCount=="function"?c.listenerCount(h):n.call(c,h)},l.prototype.listenerCount=n,l.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]}},60774:function($){var R=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};$.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return R()}try{return __global__||R()}finally{delete Object.prototype.__global__}}()},94908:function($,R,e){$.exports=e(51152)()?globalThis:e(60774)},51152:function($){$.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},92770:function($,R,e){var A=e(18546);$.exports=function(k){var l=typeof k;if(l==="string"){var T=k;if((k=+k)==0&&A(T))return!1}else if(l!=="number")return!1;return k-k<1}},30120:function($,R,e){var A=e(90660);$.exports=function(k,l,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var x,d,s,t,o=k[0].length,r=k.length*o;l&&typeof l!="string"||(l=new(A(l||"float32"))(r+T));var n=l.length-T;if(r!==n)throw new Error("source length "+r+" ("+o+"x"+k.length+") does not match destination length "+n);for(x=0,s=T;x<k.length;x++)for(d=0;d<o;d++)l[s++]=k[x][d]===null?NaN:k[x][d]}else if(l&&typeof l!="string")l.set(k,T);else{var a=A(l||"float32");if(Array.isArray(k)||l==="array")for(x=0,s=T,t=(l=new a(k.length+T)).length;s<t;s++,x++)l[s]=k[x]===null?NaN:k[x];else T===0?l=new a(k):(l=new a(k.length+T)).set(k,T)}return l}},68016:function($,R,e){var A=e(53313),k=[32,126];$.exports=function(l){var T=(l=l||{}).shape?l.shape:l.canvas?[l.canvas.width,l.canvas.height]:[512,512],x=l.canvas||document.createElement("canvas"),d=l.font,s=typeof l.step=="number"?[l.step,l.step]:l.step||[32,32],t=l.chars||k;if(d&&typeof d!="string"&&(d=A(d)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var o=[],r=t[0],n=0;r<=t[1];r++)o[n++]=String.fromCharCode(r);t=o}}else t=String(t).split("");T=T.slice(),x.width=T[0],x.height=T[1];var a=x.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,x.width,x.height),a.font=d,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var i=s[0]/2,c=s[1]/2;for(r=0;r<t.length;r++)a.fillText(t[r],i,c),(i+=s[0])>T[0]-s[0]/2&&(i=s[0]/2,c+=s[1]);return x}},32879:function($){function R(l,T){T||(T={}),(typeof l=="string"||Array.isArray(l))&&(T.family=l);var x=Array.isArray(T.family)?T.family.join(", "):T.family;if(!x)throw Error("`family` must be defined");var d=T.size||T.fontSize||T.em||48,s=T.weight||T.fontWeight||"",t=(l=[T.style||T.fontStyle||"",s,d].join(" ")+"px "+x,T.origin||"top");if(R.cache[x]&&d<=R.cache[x].em)return e(R.cache[x],t);var o=T.canvas||R.canvas,r=o.getContext("2d"),n={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},a=Math.ceil(1.5*d);o.height=a,o.width=.5*a,r.font=l;var i="H",c={top:0};r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(i,0,0);var h=A(r.getImageData(0,0,a,a));r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(i,0,a);var f=A(r.getImageData(0,0,a,a));c.lineHeight=c.bottom=a-f+h,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(i,0,a);var b=a-A(r.getImageData(0,0,a,a))-1+h;c.baseline=c.alphabetic=b,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(i,0,.5*a);var v=A(r.getImageData(0,0,a,a));c.median=c.middle=a-v-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(i,0,.5*a);var g=A(r.getImageData(0,0,a,a));c.hanging=a-g-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(i,0,a);var y=A(r.getImageData(0,0,a,a));if(c.ideographic=a-y-1+h,n.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.upper,0,0),c.upper=A(r.getImageData(0,0,a,a)),c.capHeight=c.baseline-c.upper),n.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.lower,0,0),c.lower=A(r.getImageData(0,0,a,a)),c.xHeight=c.baseline-c.lower),n.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.tittle,0,0),c.tittle=A(r.getImageData(0,0,a,a))),n.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.ascent,0,0),c.ascent=A(r.getImageData(0,0,a,a))),n.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.descent,0,0),c.descent=k(r.getImageData(0,0,a,a))),n.overshoot){r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.overshoot,0,0);var p=k(r.getImageData(0,0,a,a));c.overshoot=p-b}for(var m in c)c[m]/=d;return c.em=d,R.cache[x]=c,e(c,t)}function e(l,T){var x={};for(var d in typeof T=="string"&&(T=l[T]),l)d!=="em"&&(x[d]=l[d]-T);return x}function A(l){for(var T=l.height,x=l.data,d=3;d<x.length;d+=4)if(x[d]!==0)return Math.floor(.25*(d-3)/T)}function k(l){for(var T=l.height,x=l.data,d=x.length-1;d>0;d-=4)if(x[d]!==0)return Math.floor(.25*(d-3)/T)}$.exports=R,R.canvas=document.createElement("canvas"),R.cache={}},86165:function($){var R=Object.prototype.hasOwnProperty,e=Object.prototype.toString;$.exports=function(A,k,l){if(e.call(k)!=="[object Function]")throw new TypeError("iterator must be a function");var T=A.length;if(T===+T)for(var x=0;x<T;x++)k.call(l,A[x],x,A);else for(var d in A)R.call(A,d)&&k.call(l,A[d],d,A)}},73047:function($){var R="Function.prototype.bind called on incompatible ",e=Array.prototype.slice,A=Object.prototype.toString,k="[object Function]";$.exports=function(l){var T=this;if(typeof T!="function"||A.call(T)!==k)throw new TypeError(R+T);for(var x,d=e.call(arguments,1),s=function(){if(this instanceof x){var a=T.apply(this,d.concat(e.call(arguments)));return Object(a)===a?a:this}return T.apply(l,d.concat(e.call(arguments)))},t=Math.max(0,T.length-d.length),o=[],r=0;r<t;r++)o.push("$"+r);if(x=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(s),T.prototype){var n=function(){};n.prototype=T.prototype,x.prototype=new n,n.prototype=null}return x}},77575:function($,R,e){var A=e(73047);$.exports=Function.prototype.bind||A},86249:function($){$.exports=function(R,e){if(typeof R!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var A=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(A.width=e.width),typeof e.height=="number"&&(A.height=e.height);var k,l=e;try{var T=[R];R.indexOf("webgl")===0&&T.push("experimental-"+R);for(var x=0;x<T.length;x++)if(k=A.getContext(T[x],l))return k}catch{k=null}return k||null}},68318:function($,R,e){var A,k=SyntaxError,l=Function,T=TypeError,x=function(E){try{return Function('"use strict"; return ('+E+").constructor;")()}catch{}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch{d=null}var s=function(){throw new T},t=d?function(){try{return s}catch{try{return d(arguments,"callee").get}catch{return s}}}():s,o=e(57877)(),r=Object.getPrototypeOf||function(E){return E.__proto__},n=x("async function* () {}"),a=n?n.prototype:A,i=a?a.prototype:A,c=typeof Uint8Array>"u"?A:r(Uint8Array),h={"%AggregateError%":typeof AggregateError>"u"?A:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?A:ArrayBuffer,"%ArrayIteratorPrototype%":o?r([][Symbol.iterator]()):A,"%AsyncFromSyncIteratorPrototype%":A,"%AsyncFunction%":x("async function () {}"),"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":n,"%AsyncIteratorPrototype%":i?r(i):A,"%Atomics%":typeof Atomics>"u"?A:Atomics,"%BigInt%":typeof BigInt>"u"?A:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?A:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?A:Float32Array,"%Float64Array%":typeof Float64Array>"u"?A:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?A:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":x("function* () {}"),"%Int8Array%":typeof Int8Array>"u"?A:Int8Array,"%Int16Array%":typeof Int16Array>"u"?A:Int16Array,"%Int32Array%":typeof Int32Array>"u"?A:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":o?r(r([][Symbol.iterator]())):A,"%JSON%":typeof JSON=="object"?JSON:A,"%Map%":typeof Map>"u"?A:Map,"%MapIteratorPrototype%":typeof Map<"u"&&o?r(new Map()[Symbol.iterator]()):A,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?A:Promise,"%Proxy%":typeof Proxy>"u"?A:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?A:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?A:Set,"%SetIteratorPrototype%":typeof Set<"u"&&o?r(new Set()[Symbol.iterator]()):A,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?A:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":o?r(""[Symbol.iterator]()):A,"%Symbol%":o?Symbol:A,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":c,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?A:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?A:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?A:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?A:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?A:WeakMap,"%WeakRef%":typeof WeakRef>"u"?A:WeakRef,"%WeakSet%":typeof WeakSet>"u"?A:WeakSet},f={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=e(77575),v=e(35065),g=b.call(Function.call,Array.prototype.concat),y=b.call(Function.apply,Array.prototype.splice),p=b.call(Function.call,String.prototype.replace),m=b.call(Function.call,String.prototype.slice),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,u=/\\(\\)?/g,S=function(E){var L=m(E,0,1),C=m(E,-1);if(L==="%"&&C!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(C==="%"&&L!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var P=[];return p(E,w,function(I,U,z,H){P[P.length]=z?p(H,u,"$1"):U||I}),P},_=function(E,L){var C,P=E;if(v(f,P)&&(P="%"+(C=f[P])[0]+"%"),v(h,P)){var I=h[P];if(I===void 0&&!L)throw new T("intrinsic "+E+" exists, but is not available. Please file an issue!");return{alias:C,name:P,value:I}}throw new k("intrinsic "+E+" does not exist!")};$.exports=function(E,L){if(typeof E!="string"||E.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof L!="boolean")throw new T('"allowMissing" argument must be a boolean');var C=S(E),P=C.length>0?C[0]:"",I=_("%"+P+"%",L),U=I.name,z=I.value,H=!1,F=I.alias;F&&(P=F[0],y(C,g([0,1],F)));for(var N=1,B=!0;N<C.length;N+=1){var j=C[N],K=m(j,0,1),G=m(j,-1);if((K==='"'||K==="'"||K==="`"||G==='"'||G==="'"||G==="`")&&K!==G)throw new k("property names with quotes must have matching quotes");if(j!=="constructor"&&B||(H=!0),v(h,U="%"+(P+="."+j)+"%"))z=h[U];else if(z!=null){if(!(j in z)){if(!L)throw new T("base intrinsic for "+E+" exists, but the property is not available.");return}if(d&&N+1>=C.length){var V=d(z,j);z=(B=!!V)&&"get"in V&&!("originalValue"in V.get)?V.get:z[j]}else B=v(z,j),z=z[j];B&&!H&&(h[U]=z)}}return z}},85400:function($){$.exports=function(R,e){var A=e[0],k=e[1],l=e[2],T=e[3],x=e[4],d=e[5],s=e[6],t=e[7],o=e[8],r=e[9],n=e[10],a=e[11],i=e[12],c=e[13],h=e[14],f=e[15];return R[0]=d*(n*f-a*h)-r*(s*f-t*h)+c*(s*a-t*n),R[1]=-(k*(n*f-a*h)-r*(l*f-T*h)+c*(l*a-T*n)),R[2]=k*(s*f-t*h)-d*(l*f-T*h)+c*(l*t-T*s),R[3]=-(k*(s*a-t*n)-d*(l*a-T*n)+r*(l*t-T*s)),R[4]=-(x*(n*f-a*h)-o*(s*f-t*h)+i*(s*a-t*n)),R[5]=A*(n*f-a*h)-o*(l*f-T*h)+i*(l*a-T*n),R[6]=-(A*(s*f-t*h)-x*(l*f-T*h)+i*(l*t-T*s)),R[7]=A*(s*a-t*n)-x*(l*a-T*n)+o*(l*t-T*s),R[8]=x*(r*f-a*c)-o*(d*f-t*c)+i*(d*a-t*r),R[9]=-(A*(r*f-a*c)-o*(k*f-T*c)+i*(k*a-T*r)),R[10]=A*(d*f-t*c)-x*(k*f-T*c)+i*(k*t-T*d),R[11]=-(A*(d*a-t*r)-x*(k*a-T*r)+o*(k*t-T*d)),R[12]=-(x*(r*h-n*c)-o*(d*h-s*c)+i*(d*n-s*r)),R[13]=A*(r*h-n*c)-o*(k*h-l*c)+i*(k*n-l*r),R[14]=-(A*(d*h-s*c)-x*(k*h-l*c)+i*(k*s-l*d)),R[15]=A*(d*n-s*r)-x*(k*n-l*r)+o*(k*s-l*d),R}},42331:function($){$.exports=function(R){var e=new Float32Array(16);return e[0]=R[0],e[1]=R[1],e[2]=R[2],e[3]=R[3],e[4]=R[4],e[5]=R[5],e[6]=R[6],e[7]=R[7],e[8]=R[8],e[9]=R[9],e[10]=R[10],e[11]=R[11],e[12]=R[12],e[13]=R[13],e[14]=R[14],e[15]=R[15],e}},31042:function($){$.exports=function(R,e){return R[0]=e[0],R[1]=e[1],R[2]=e[2],R[3]=e[3],R[4]=e[4],R[5]=e[5],R[6]=e[6],R[7]=e[7],R[8]=e[8],R[9]=e[9],R[10]=e[10],R[11]=e[11],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15],R}},11902:function($){$.exports=function(){var R=new Float32Array(16);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},89887:function($){$.exports=function(R){var e=R[0],A=R[1],k=R[2],l=R[3],T=R[4],x=R[5],d=R[6],s=R[7],t=R[8],o=R[9],r=R[10],n=R[11],a=R[12],i=R[13],c=R[14],h=R[15];return(e*x-A*T)*(r*h-n*c)-(e*d-k*T)*(o*h-n*i)+(e*s-l*T)*(o*c-r*i)+(A*d-k*x)*(t*h-n*a)-(A*s-l*x)*(t*c-r*a)+(k*s-l*d)*(t*i-o*a)}},27812:function($){$.exports=function(R,e){var A=e[0],k=e[1],l=e[2],T=e[3],x=A+A,d=k+k,s=l+l,t=A*x,o=k*x,r=k*d,n=l*x,a=l*d,i=l*s,c=T*x,h=T*d,f=T*s;return R[0]=1-r-i,R[1]=o+f,R[2]=n-h,R[3]=0,R[4]=o-f,R[5]=1-t-i,R[6]=a+c,R[7]=0,R[8]=n+h,R[9]=a-c,R[10]=1-t-r,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},34045:function($){$.exports=function(R,e,A){var k,l,T,x=A[0],d=A[1],s=A[2],t=Math.sqrt(x*x+d*d+s*s);return Math.abs(t)<1e-6?null:(x*=t=1/t,d*=t,s*=t,k=Math.sin(e),T=1-(l=Math.cos(e)),R[0]=x*x*T+l,R[1]=d*x*T+s*k,R[2]=s*x*T-d*k,R[3]=0,R[4]=x*d*T-s*k,R[5]=d*d*T+l,R[6]=s*d*T+x*k,R[7]=0,R[8]=x*s*T+d*k,R[9]=d*s*T-x*k,R[10]=s*s*T+l,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R)}},45973:function($){$.exports=function(R,e,A){var k=e[0],l=e[1],T=e[2],x=e[3],d=k+k,s=l+l,t=T+T,o=k*d,r=k*s,n=k*t,a=l*s,i=l*t,c=T*t,h=x*d,f=x*s,b=x*t;return R[0]=1-(a+c),R[1]=r+b,R[2]=n-f,R[3]=0,R[4]=r-b,R[5]=1-(o+c),R[6]=i+h,R[7]=0,R[8]=n+f,R[9]=i-h,R[10]=1-(o+a),R[11]=0,R[12]=A[0],R[13]=A[1],R[14]=A[2],R[15]=1,R}},81472:function($){$.exports=function(R,e){return R[0]=e[0],R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=e[1],R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=e[2],R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},14669:function($){$.exports=function(R,e){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=e[0],R[13]=e[1],R[14]=e[2],R[15]=1,R}},75262:function($){$.exports=function(R,e){var A=Math.sin(e),k=Math.cos(e);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=k,R[6]=A,R[7]=0,R[8]=0,R[9]=-A,R[10]=k,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},331:function($){$.exports=function(R,e){var A=Math.sin(e),k=Math.cos(e);return R[0]=k,R[1]=0,R[2]=-A,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=A,R[9]=0,R[10]=k,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},11049:function($){$.exports=function(R,e){var A=Math.sin(e),k=Math.cos(e);return R[0]=k,R[1]=A,R[2]=0,R[3]=0,R[4]=-A,R[5]=k,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},75195:function($){$.exports=function(R,e,A,k,l,T,x){var d=1/(A-e),s=1/(l-k),t=1/(T-x);return R[0]=2*T*d,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=2*T*s,R[6]=0,R[7]=0,R[8]=(A+e)*d,R[9]=(l+k)*s,R[10]=(x+T)*t,R[11]=-1,R[12]=0,R[13]=0,R[14]=x*T*2*t,R[15]=0,R}},71551:function($){$.exports=function(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},79576:function($,R,e){$.exports={create:e(11902),clone:e(42331),copy:e(31042),identity:e(71551),transpose:e(88654),invert:e(95874),adjoint:e(85400),determinant:e(89887),multiply:e(91362),translate:e(31283),scale:e(10789),rotate:e(65074),rotateX:e(35545),rotateY:e(94918),rotateZ:e(15692),fromRotation:e(34045),fromRotationTranslation:e(45973),fromScaling:e(81472),fromTranslation:e(14669),fromXRotation:e(75262),fromYRotation:e(331),fromZRotation:e(11049),fromQuat:e(27812),frustum:e(75195),perspective:e(7864),perspectiveFromFieldOfView:e(35279),ortho:e(60378),lookAt:e(65551),str:e(6726)}},95874:function($){$.exports=function(R,e){var A=e[0],k=e[1],l=e[2],T=e[3],x=e[4],d=e[5],s=e[6],t=e[7],o=e[8],r=e[9],n=e[10],a=e[11],i=e[12],c=e[13],h=e[14],f=e[15],b=A*d-k*x,v=A*s-l*x,g=A*t-T*x,y=k*s-l*d,p=k*t-T*d,m=l*t-T*s,w=o*c-r*i,u=o*h-n*i,S=o*f-a*i,_=r*h-n*c,E=r*f-a*c,L=n*f-a*h,C=b*L-v*E+g*_+y*S-p*u+m*w;return C?(C=1/C,R[0]=(d*L-s*E+t*_)*C,R[1]=(l*E-k*L-T*_)*C,R[2]=(c*m-h*p+f*y)*C,R[3]=(n*p-r*m-a*y)*C,R[4]=(s*S-x*L-t*u)*C,R[5]=(A*L-l*S+T*u)*C,R[6]=(h*g-i*m-f*v)*C,R[7]=(o*m-n*g+a*v)*C,R[8]=(x*E-d*S+t*w)*C,R[9]=(k*S-A*E-T*w)*C,R[10]=(i*p-c*g+f*b)*C,R[11]=(r*g-o*p-a*b)*C,R[12]=(d*u-x*_-s*w)*C,R[13]=(A*_-k*u+l*w)*C,R[14]=(c*v-i*y-h*b)*C,R[15]=(o*y-r*v+n*b)*C,R):null}},65551:function($,R,e){var A=e(71551);$.exports=function(k,l,T,x){var d,s,t,o,r,n,a,i,c,h,f=l[0],b=l[1],v=l[2],g=x[0],y=x[1],p=x[2],m=T[0],w=T[1],u=T[2];return Math.abs(f-m)<1e-6&&Math.abs(b-w)<1e-6&&Math.abs(v-u)<1e-6?A(k):(a=f-m,i=b-w,c=v-u,d=y*(c*=h=1/Math.sqrt(a*a+i*i+c*c))-p*(i*=h),s=p*(a*=h)-g*c,t=g*i-y*a,(h=Math.sqrt(d*d+s*s+t*t))?(d*=h=1/h,s*=h,t*=h):(d=0,s=0,t=0),o=i*t-c*s,r=c*d-a*t,n=a*s-i*d,(h=Math.sqrt(o*o+r*r+n*n))?(o*=h=1/h,r*=h,n*=h):(o=0,r=0,n=0),k[0]=d,k[1]=o,k[2]=a,k[3]=0,k[4]=s,k[5]=r,k[6]=i,k[7]=0,k[8]=t,k[9]=n,k[10]=c,k[11]=0,k[12]=-(d*f+s*b+t*v),k[13]=-(o*f+r*b+n*v),k[14]=-(a*f+i*b+c*v),k[15]=1,k)}},91362:function($){$.exports=function(R,e,A){var k=e[0],l=e[1],T=e[2],x=e[3],d=e[4],s=e[5],t=e[6],o=e[7],r=e[8],n=e[9],a=e[10],i=e[11],c=e[12],h=e[13],f=e[14],b=e[15],v=A[0],g=A[1],y=A[2],p=A[3];return R[0]=v*k+g*d+y*r+p*c,R[1]=v*l+g*s+y*n+p*h,R[2]=v*T+g*t+y*a+p*f,R[3]=v*x+g*o+y*i+p*b,v=A[4],g=A[5],y=A[6],p=A[7],R[4]=v*k+g*d+y*r+p*c,R[5]=v*l+g*s+y*n+p*h,R[6]=v*T+g*t+y*a+p*f,R[7]=v*x+g*o+y*i+p*b,v=A[8],g=A[9],y=A[10],p=A[11],R[8]=v*k+g*d+y*r+p*c,R[9]=v*l+g*s+y*n+p*h,R[10]=v*T+g*t+y*a+p*f,R[11]=v*x+g*o+y*i+p*b,v=A[12],g=A[13],y=A[14],p=A[15],R[12]=v*k+g*d+y*r+p*c,R[13]=v*l+g*s+y*n+p*h,R[14]=v*T+g*t+y*a+p*f,R[15]=v*x+g*o+y*i+p*b,R}},60378:function($){$.exports=function(R,e,A,k,l,T,x){var d=1/(e-A),s=1/(k-l),t=1/(T-x);return R[0]=-2*d,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=-2*s,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=2*t,R[11]=0,R[12]=(e+A)*d,R[13]=(l+k)*s,R[14]=(x+T)*t,R[15]=1,R}},7864:function($){$.exports=function(R,e,A,k,l){var T=1/Math.tan(e/2),x=1/(k-l);return R[0]=T/A,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=T,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=(l+k)*x,R[11]=-1,R[12]=0,R[13]=0,R[14]=2*l*k*x,R[15]=0,R}},35279:function($){$.exports=function(R,e,A,k){var l=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),x=Math.tan(e.leftDegrees*Math.PI/180),d=Math.tan(e.rightDegrees*Math.PI/180),s=2/(x+d),t=2/(l+T);return R[0]=s,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=t,R[6]=0,R[7]=0,R[8]=-(x-d)*s*.5,R[9]=(l-T)*t*.5,R[10]=k/(A-k),R[11]=-1,R[12]=0,R[13]=0,R[14]=k*A/(A-k),R[15]=0,R}},65074:function($){$.exports=function(R,e,A,k){var l,T,x,d,s,t,o,r,n,a,i,c,h,f,b,v,g,y,p,m,w,u,S,_,E=k[0],L=k[1],C=k[2],P=Math.sqrt(E*E+L*L+C*C);return Math.abs(P)<1e-6?null:(E*=P=1/P,L*=P,C*=P,l=Math.sin(A),x=1-(T=Math.cos(A)),d=e[0],s=e[1],t=e[2],o=e[3],r=e[4],n=e[5],a=e[6],i=e[7],c=e[8],h=e[9],f=e[10],b=e[11],v=E*E*x+T,g=L*E*x+C*l,y=C*E*x-L*l,p=E*L*x-C*l,m=L*L*x+T,w=C*L*x+E*l,u=E*C*x+L*l,S=L*C*x-E*l,_=C*C*x+T,R[0]=d*v+r*g+c*y,R[1]=s*v+n*g+h*y,R[2]=t*v+a*g+f*y,R[3]=o*v+i*g+b*y,R[4]=d*p+r*m+c*w,R[5]=s*p+n*m+h*w,R[6]=t*p+a*m+f*w,R[7]=o*p+i*m+b*w,R[8]=d*u+r*S+c*_,R[9]=s*u+n*S+h*_,R[10]=t*u+a*S+f*_,R[11]=o*u+i*S+b*_,e!==R&&(R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R)}},35545:function($){$.exports=function(R,e,A){var k=Math.sin(A),l=Math.cos(A),T=e[4],x=e[5],d=e[6],s=e[7],t=e[8],o=e[9],r=e[10],n=e[11];return e!==R&&(R[0]=e[0],R[1]=e[1],R[2]=e[2],R[3]=e[3],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[4]=T*l+t*k,R[5]=x*l+o*k,R[6]=d*l+r*k,R[7]=s*l+n*k,R[8]=t*l-T*k,R[9]=o*l-x*k,R[10]=r*l-d*k,R[11]=n*l-s*k,R}},94918:function($){$.exports=function(R,e,A){var k=Math.sin(A),l=Math.cos(A),T=e[0],x=e[1],d=e[2],s=e[3],t=e[8],o=e[9],r=e[10],n=e[11];return e!==R&&(R[4]=e[4],R[5]=e[5],R[6]=e[6],R[7]=e[7],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[0]=T*l-t*k,R[1]=x*l-o*k,R[2]=d*l-r*k,R[3]=s*l-n*k,R[8]=T*k+t*l,R[9]=x*k+o*l,R[10]=d*k+r*l,R[11]=s*k+n*l,R}},15692:function($){$.exports=function(R,e,A){var k=Math.sin(A),l=Math.cos(A),T=e[0],x=e[1],d=e[2],s=e[3],t=e[4],o=e[5],r=e[6],n=e[7];return e!==R&&(R[8]=e[8],R[9]=e[9],R[10]=e[10],R[11]=e[11],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[0]=T*l+t*k,R[1]=x*l+o*k,R[2]=d*l+r*k,R[3]=s*l+n*k,R[4]=t*l-T*k,R[5]=o*l-x*k,R[6]=r*l-d*k,R[7]=n*l-s*k,R}},10789:function($){$.exports=function(R,e,A){var k=A[0],l=A[1],T=A[2];return R[0]=e[0]*k,R[1]=e[1]*k,R[2]=e[2]*k,R[3]=e[3]*k,R[4]=e[4]*l,R[5]=e[5]*l,R[6]=e[6]*l,R[7]=e[7]*l,R[8]=e[8]*T,R[9]=e[9]*T,R[10]=e[10]*T,R[11]=e[11]*T,R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15],R}},6726:function($){$.exports=function(R){return"mat4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+", "+R[4]+", "+R[5]+", "+R[6]+", "+R[7]+", "+R[8]+", "+R[9]+", "+R[10]+", "+R[11]+", "+R[12]+", "+R[13]+", "+R[14]+", "+R[15]+")"}},31283:function($){$.exports=function(R,e,A){var k,l,T,x,d,s,t,o,r,n,a,i,c=A[0],h=A[1],f=A[2];return e===R?(R[12]=e[0]*c+e[4]*h+e[8]*f+e[12],R[13]=e[1]*c+e[5]*h+e[9]*f+e[13],R[14]=e[2]*c+e[6]*h+e[10]*f+e[14],R[15]=e[3]*c+e[7]*h+e[11]*f+e[15]):(k=e[0],l=e[1],T=e[2],x=e[3],d=e[4],s=e[5],t=e[6],o=e[7],r=e[8],n=e[9],a=e[10],i=e[11],R[0]=k,R[1]=l,R[2]=T,R[3]=x,R[4]=d,R[5]=s,R[6]=t,R[7]=o,R[8]=r,R[9]=n,R[10]=a,R[11]=i,R[12]=k*c+d*h+r*f+e[12],R[13]=l*c+s*h+n*f+e[13],R[14]=T*c+t*h+a*f+e[14],R[15]=x*c+o*h+i*f+e[15]),R}},88654:function($){$.exports=function(R,e){if(R===e){var A=e[1],k=e[2],l=e[3],T=e[6],x=e[7],d=e[11];R[1]=e[4],R[2]=e[8],R[3]=e[12],R[4]=A,R[6]=e[9],R[7]=e[13],R[8]=k,R[9]=T,R[11]=e[14],R[12]=l,R[13]=x,R[14]=d}else R[0]=e[0],R[1]=e[4],R[2]=e[8],R[3]=e[12],R[4]=e[1],R[5]=e[5],R[6]=e[9],R[7]=e[13],R[8]=e[2],R[9]=e[6],R[10]=e[10],R[11]=e[14],R[12]=e[3],R[13]=e[7],R[14]=e[11],R[15]=e[15];return R}},42505:function($,R,e){var A=e(72791),k=e(71299),l=e(98580),T=e(12018),x=e(83522),d=e(25075),s=e(68016),t=e(58404),o=e(18863),r=e(10973),n=e(25677),a=e(75686),i=e(53545),c=e(56131),h=e(32879),f=e(30120),b=e(13547).nextPow2,v=new x,g=!1;if(document.body){var y=document.body.appendChild(document.createElement("div"));y.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(y).fontStretch&&(g=!0),document.body.removeChild(y)}var p=function(m){(function(w){return typeof w=="function"&&w._gl&&w.prop&&w.texture&&w.buffer})(m)?(m={regl:m},this.gl=m.regl._gl):this.gl=T(m),this.shader=v.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=m.regl||l({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),v.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(m)?m:{})};p.prototype.createShader=function(){var m=this.regl,w=m({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:m.prop("count"),offset:m.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:m.this("sizeBuffer")},width:{offset:0,stride:8,buffer:m.this("sizeBuffer")},char:m.this("charBuffer"),position:m.this("position")},uniforms:{atlasSize:function(u,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(u,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(u,S){return S.atlas.texture},charStep:function(u,S){return S.atlas.step},em:function(u,S){return S.atlas.em},color:m.prop("color"),opacity:m.prop("opacity"),viewport:m.this("viewportArray"),scale:m.this("scale"),align:m.prop("align"),baseline:m.prop("baseline"),translate:m.this("translate"),positionOffset:m.prop("positionOffset")},primitive:"points",viewport:m.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:m,draw:w,atlas:{}}},p.prototype.update=function(m){var w=this;if(typeof m=="string")m={text:m};else if(!m)return;(m=k(m,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(m.opacity)?this.opacity=m.opacity.map(function(Q){return parseFloat(Q)}):this.opacity=parseFloat(m.opacity)),m.viewport!=null&&(this.viewport=o(m.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),m.kerning!=null&&(this.kerning=m.kerning),m.offset!=null&&(typeof m.offset=="number"&&(m.offset=[m.offset,0]),this.positionOffset=f(m.offset)),m.direction&&(this.direction=m.direction),m.range&&(this.range=m.range,this.scale=[1/(m.range[2]-m.range[0]),1/(m.range[3]-m.range[1])],this.translate=[-m.range[0],-m.range[1]]),m.scale&&(this.scale=m.scale),m.translate&&(this.translate=m.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||m.font||(m.font=p.baseFontSize+"px sans-serif");var u,S=!1,_=!1;if(m.font&&(Array.isArray(m.font)?m.font:[m.font]).forEach(function(Q,oe){if(typeof Q=="string")try{Q=A.parse(Q)}catch{Q=A.parse(p.baseFontSize+"px "+Q)}else Q=A.parse(A.stringify(Q));var ce=A.stringify({size:p.baseFontSize,family:Q.family,stretch:g?Q.stretch:void 0,variant:Q.variant,weight:Q.weight,style:Q.style}),me=n(Q.size),Me=Math.round(me[0]*a(me[1]));if(Me!==w.fontSize[oe]&&(_=!0,w.fontSize[oe]=Me),!(w.font[oe]&&ce==w.font[oe].baseString||(S=!0,w.font[oe]=p.fonts[ce],w.font[oe]))){var Re=Q.family.join(", "),Ce=[Q.style];Q.style!=Q.variant&&Ce.push(Q.variant),Q.variant!=Q.weight&&Ce.push(Q.weight),g&&Q.weight!=Q.stretch&&Ce.push(Q.stretch),w.font[oe]={baseString:ce,family:Re,weight:Q.weight,stretch:Q.stretch,style:Q.style,variant:Q.variant,width:{},kerning:{},metrics:h(Re,{origin:"top",fontSize:p.baseFontSize,fontStyle:Ce.join(" ")})},p.fonts[ce]=w.font[oe]}}),(S||_)&&this.font.forEach(function(Q,oe){var ce=A.stringify({size:w.fontSize[oe],family:Q.family,stretch:g?Q.stretch:void 0,variant:Q.variant,weight:Q.weight,style:Q.style});if(w.fontAtlas[oe]=w.shader.atlas[ce],!w.fontAtlas[oe]){var me=Q.metrics;w.shader.atlas[ce]=w.fontAtlas[oe]={fontString:ce,step:2*Math.ceil(w.fontSize[oe]*me.bottom*.5),em:w.fontSize[oe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:w.regl.texture()}}m.text==null&&(m.text=w.text)}),typeof m.text=="string"&&m.position&&m.position.length>2){for(var E=Array(.5*m.position.length),L=0;L<E.length;L++)E[L]=m.text;m.text=E}if(m.text!=null||S){if(this.textOffsets=[0],Array.isArray(m.text)){this.count=m.text[0].length,this.counts=[this.count];for(var C=1;C<m.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+m.text[C-1].length,this.count+=m.text[C].length,this.counts.push(m.text[C].length);this.text=m.text.join("")}else this.text=m.text,this.count=this.text.length,this.counts=[this.count];u=[],this.font.forEach(function(Q,oe){p.atlasContext.font=Q.baseString;for(var ce=w.fontAtlas[oe],me=0;me<w.text.length;me++){var Me=w.text.charAt(me);if(ce.ids[Me]==null&&(ce.ids[Me]=ce.chars.length,ce.chars.push(Me),u.push(Me)),Q.width[Me]==null&&(Q.width[Me]=p.atlasContext.measureText(Me).width/p.baseFontSize,w.kerning)){var Re=[];for(var Ce in Q.width)Re.push(Ce+Me,Me+Ce);c(Q.kerning,i(Q.family,{pairs:Re}))}}})}if(m.position)if(m.position.length>2){for(var P=!m.position[0].length,I=t.mallocFloat(2*this.count),U=0,z=0;U<this.counts.length;U++){var H=this.counts[U];if(P)for(var F=0;F<H;F++)I[z++]=m.position[2*U],I[z++]=m.position[2*U+1];else for(var N=0;N<H;N++)I[z++]=m.position[U][0],I[z++]=m.position[U][1]}this.position.call?this.position({type:"float",data:I}):this.position=this.regl.buffer({type:"float",data:I}),t.freeFloat(I)}else this.position.destroy&&this.position.destroy(),this.position={constant:m.position};if(m.text||S){var B=t.mallocUint8(this.count),j=t.mallocFloat(2*this.count);this.textWidth=[];for(var K=0,G=0;K<this.counts.length;K++){for(var V=this.counts[K],W=this.font[K]||this.font[0],J=this.fontAtlas[K]||this.fontAtlas[0],X=0;X<V;X++){var ee=this.text.charAt(G),re=this.text.charAt(G-1);if(B[G]=J.ids[ee],j[2*G]=W.width[ee],X){var ie=j[2*G-2],se=j[2*G],fe=j[2*G-1]+.5*ie+.5*se;if(this.kerning){var ye=W.kerning[re+ee];ye&&(fe+=.001*ye)}j[2*G+1]=fe}else j[2*G+1]=.5*j[2*G];G++}this.textWidth.push(j.length?.5*j[2*G-2]+j[2*G-1]:0)}m.align||(m.align=this.align),this.charBuffer({data:B,type:"uint8",usage:"stream"}),this.sizeBuffer({data:j,type:"float",usage:"stream"}),t.freeUint8(B),t.freeFloat(j),u.length&&this.font.forEach(function(Q,oe){var ce=w.fontAtlas[oe],me=ce.step,Me=Math.floor(p.maxAtlasSize/me),Re=Math.min(Me,ce.chars.length),Ce=Math.ceil(ce.chars.length/Re),ze=b(Re*me),le=b(Ce*me);ce.width=ze,ce.height=le,ce.rows=Ce,ce.cols=Re,ce.em&&ce.texture({data:s({canvas:p.atlasCanvas,font:ce.fontString,chars:ce.chars,shape:[ze,le],step:[me,me]})})})}if(m.align&&(this.align=m.align,this.alignOffset=this.textWidth.map(function(Q,oe){var ce=Array.isArray(w.align)?w.align.length>1?w.align[oe]:w.align[0]:w.align;if(typeof ce=="number")return ce;switch(ce){case"right":case"end":return-Q;case"center":case"centre":case"middle":return .5*-Q}return 0})),this.baseline==null&&m.baseline==null&&(m.baseline=0),m.baseline!=null&&(this.baseline=m.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Q,oe){var ce=(w.font[oe]||w.font[0]).metrics,me=0;return me+=.5*ce.bottom,-1*(me+=typeof Q=="number"?Q-ce.baseline:-ce[Q])})),m.color!=null)if(m.color||(m.color="transparent"),typeof m.color!="string"&&isNaN(m.color)){var ge;if(typeof m.color[0]=="number"&&m.color.length>this.counts.length){var he=m.color.length;ge=t.mallocUint8(he);for(var ve=(m.color.subarray||m.color.slice).bind(m.color),Ie=0;Ie<he;Ie+=4)ge.set(d(ve(Ie,Ie+4),"uint8"),Ie)}else{var xe=m.color.length;ge=t.mallocUint8(4*xe);for(var Ae=0;Ae<xe;Ae++)ge.set(d(m.color[Ae]||0,"uint8"),4*Ae)}this.color=ge}else this.color=d(m.color,"uint8");if(m.position||m.text||m.color||m.baseline||m.align||m.font||m.offset||m.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Se=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Se);for(var Te=0;Te<this.batch.length;Te++)this.batch[Te]={count:this.counts.length>1?this.counts[Te]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Te]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*Te,4*Te+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Te]:this.opacity,baseline:this.baselineOffset[Te]!=null?this.baselineOffset[Te]:this.baselineOffset[0],align:this.align?this.alignOffset[Te]!=null?this.alignOffset[Te]:this.alignOffset[0]:0,atlas:this.fontAtlas[Te]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*Te,2*Te+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},p.prototype.destroy=function(){},p.prototype.kerning=!0,p.prototype.position={constant:new Float32Array(2)},p.prototype.translate=null,p.prototype.scale=null,p.prototype.font=null,p.prototype.text="",p.prototype.positionOffset=[0,0],p.prototype.opacity=1,p.prototype.color=new Uint8Array([0,0,0,255]),p.prototype.alignOffset=[0,0],p.maxAtlasSize=1024,p.atlasCanvas=document.createElement("canvas"),p.atlasContext=p.atlasCanvas.getContext("2d",{alpha:!1}),p.baseFontSize=64,p.fonts={},$.exports=p},12018:function($,R,e){var A=e(71299);function k(x){if(x.container)if(x.container==document.body)document.body.style.width||(x.canvas.width=x.width||x.pixelRatio*e.g.innerWidth),document.body.style.height||(x.canvas.height=x.height||x.pixelRatio*e.g.innerHeight);else{var d=x.container.getBoundingClientRect();x.canvas.width=x.width||d.right-d.left,x.canvas.height=x.height||d.bottom-d.top}}function l(x){return typeof x.getContext=="function"&&"width"in x&&"height"in x}function T(){var x=document.createElement("canvas");return x.style.position="absolute",x.style.top=0,x.style.left=0,x}$.exports=function(x){var d;if(x?typeof x=="string"&&(x={container:x}):x={},(x=l(x)||typeof(d=x).nodeName=="string"&&typeof d.appendChild=="function"&&typeof d.getBoundingClientRect=="function"?{container:x}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(x)?{gl:x}:A(x,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(x.pixelRatio=e.g.pixelRatio||1),x.gl)return x.gl;if(x.canvas&&(x.container=x.canvas.parentNode),x.container){if(typeof x.container=="string"){var s=document.querySelector(x.container);if(!s)throw Error("Element "+x.container+" is not found");x.container=s}l(x.container)?(x.canvas=x.container,x.container=x.canvas.parentNode):x.canvas||(x.canvas=T(),x.container.appendChild(x.canvas),k(x))}else if(!x.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");x.container=document.body||document.documentElement,x.canvas=T(),x.container.appendChild(x.canvas),k(x)}return x.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{x.gl=x.canvas.getContext(t,x.attrs)}catch{}return x.gl}),x.gl}},56068:function($){$.exports=function(R){typeof R=="string"&&(R=[R]);for(var e=[].slice.call(arguments,1),A=[],k=0;k<R.length-1;k++)A.push(R[k],e[k]||"");return A.push(R[k]),A.join("")}},57035:function($,R,e){var A,k=e(54404);A=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:k,$.exports=A},38520:function($,R,e){var A=e(54404);$.exports=A&&function(){var k=!1;try{var l=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{k=!1}return k}()},57877:function($,R,e){var A=typeof Symbol<"u"&&Symbol,k=e(35638);$.exports=function(){return typeof A=="function"&&typeof Symbol=="function"&&typeof A("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},35638:function($){$.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var R={},e=Symbol("test"),A=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(A)!=="[object Symbol]")return!1;for(e in R[e]=42,R)return!1;if(typeof Object.keys=="function"&&Object.keys(R).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(R).length!==0)return!1;var k=Object.getOwnPropertySymbols(R);if(k.length!==1||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(R,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(R,e);if(l.value!==42||l.enumerable!==!0)return!1}return!0}},84543:function($,R,e){var A=e(35638);$.exports=function(){return A()&&!!Symbol.toStringTag}},35065:function($,R,e){var A=e(77575);$.exports=A.call(Function.call,Object.prototype.hasOwnProperty)},95280:function($,R){R.read=function(e,A,k,l,T){var x,d,s=8*T-l-1,t=(1<<s)-1,o=t>>1,r=-7,n=k?T-1:0,a=k?-1:1,i=e[A+n];for(n+=a,x=i&(1<<-r)-1,i>>=-r,r+=s;r>0;x=256*x+e[A+n],n+=a,r-=8);for(d=x&(1<<-r)-1,x>>=-r,r+=l;r>0;d=256*d+e[A+n],n+=a,r-=8);if(x===0)x=1-o;else{if(x===t)return d?NaN:1/0*(i?-1:1);d+=Math.pow(2,l),x-=o}return(i?-1:1)*d*Math.pow(2,x-l)},R.write=function(e,A,k,l,T,x){var d,s,t,o=8*x-T-1,r=(1<<o)-1,n=r>>1,a=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=l?0:x-1,c=l?1:-1,h=A<0||A===0&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(s=isNaN(A)?1:0,d=r):(d=Math.floor(Math.log(A)/Math.LN2),A*(t=Math.pow(2,-d))<1&&(d--,t*=2),(A+=d+n>=1?a/t:a*Math.pow(2,1-n))*t>=2&&(d++,t/=2),d+n>=r?(s=0,d=r):d+n>=1?(s=(A*t-1)*Math.pow(2,T),d+=n):(s=A*Math.pow(2,n-1)*Math.pow(2,T),d=0));T>=8;e[k+i]=255&s,i+=c,s/=256,T-=8);for(d=d<<T|s,o+=T;o>0;e[k+i]=255&d,i+=c,d/=256,o-=8);e[k+i-c]|=128*h}},42018:function($){typeof Object.create=="function"?$.exports=function(R,e){e&&(R.super_=e,R.prototype=Object.create(e.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}))}:$.exports=function(R,e){if(e){R.super_=e;var A=function(){};A.prototype=e.prototype,R.prototype=new A,R.prototype.constructor=R}}},47216:function($){var R=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",e=Object.prototype.toString,A=function(T){return!(R&&T&&typeof T=="object"&&Symbol.toStringTag in T)&&e.call(T)==="[object Arguments]"},k=function(T){return!!A(T)||T!==null&&typeof T=="object"&&typeof T.length=="number"&&T.length>=0&&e.call(T)!=="[object Array]"&&e.call(T.callee)==="[object Function]"},l=function(){return A(arguments)}();A.isLegacyArguments=k,$.exports=l?A:k},54404:function($){$.exports=!0},65481:function($,R,e){var A,k=Object.prototype.toString,l=Function.prototype.toString,T=/^\s*(?:function)?\*/,x=e(84543)(),d=Object.getPrototypeOf;$.exports=function(s){if(typeof s!="function")return!1;if(T.test(l.call(s)))return!0;if(!x)return k.call(s)==="[object GeneratorFunction]";if(!d)return!1;if(A===void 0){var t=function(){if(!x)return!1;try{return Function("return function*() {}")()}catch{}}();A=!!t&&d(t)}return d(s)===A}},62683:function($){$.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},15539:function($){$.exports=A,$.exports.isMobile=A,$.exports.default=A;var R=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function A(k){k||(k={});var l=k.ua;if(l||typeof navigator>"u"||(l=navigator.userAgent),l&&l.headers&&typeof l.headers["user-agent"]=="string"&&(l=l.headers["user-agent"]),typeof l!="string")return!1;var T=k.tablet?e.test(l):R.test(l);return!T&&k.tablet&&k.featureDetect&&navigator&&navigator.maxTouchPoints>1&&l.indexOf("Macintosh")!==-1&&l.indexOf("Safari")!==-1&&(T=!0),T}},64274:function($){$.exports=function(R){return R!=R}},15567:function($,R,e){var A=e(68222),k=e(17045),l=e(64274),T=e(14922),x=e(22442),d=A(T(),Number);k(d,{getPolyfill:T,implementation:l,shim:x}),$.exports=d},14922:function($,R,e){var A=e(64274);$.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:A}},22442:function($,R,e){var A=e(17045),k=e(14922);$.exports=function(){var l=k();return A(Number,{isNaN:l},{isNaN:function(){return Number.isNaN!==l}}),l}},64941:function($){$.exports=function(R){var e=typeof R;return R!==null&&(e==="object"||e==="function")}},10973:function($){var R=Object.prototype.toString;$.exports=function(e){var A;return R.call(e)==="[object Object]"&&((A=Object.getPrototypeOf(e))===null||A===Object.getPrototypeOf({}))}},18546:function($){$.exports=function(R){for(var e,A=R.length,k=0;k<A;k++)if(((e=R.charCodeAt(k))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},89546:function($){$.exports=function(R){return typeof R=="string"&&(R=R.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(R)&&/[\dz]$/i.test(R)&&R.length>4))}},9187:function($,R,e){var A=e(86165),k=e(72077),l=e(92978),T=l("Object.prototype.toString"),x=e(57877)()&&typeof Symbol.toStringTag=="symbol",d=k(),s=l("Array.prototype.indexOf",!0)||function(a,i){for(var c=0;c<a.length;c+=1)if(a[c]===i)return c;return-1},t=l("String.prototype.slice"),o={},r=e(67295),n=Object.getPrototypeOf;x&&r&&n&&A(d,function(a){var i=new e.g[a];if(!(Symbol.toStringTag in i))throw new EvalError("this engine has support for Symbol.toStringTag, but "+a+" does not have the property! Please report this.");var c=n(i),h=r(c,Symbol.toStringTag);if(!h){var f=n(c);h=r(f,Symbol.toStringTag)}o[a]=h.get}),$.exports=function(a){if(!a||typeof a!="object")return!1;if(!x){var i=t(T(a),8,-1);return s(d,i)>-1}return!!r&&function(c){var h=!1;return A(o,function(f,b){if(!h)try{h=f.call(c)===b}catch{}}),h}(a)}},44517:function($){$.exports=function(){var R,e,A;function k(l,T){if(R)if(e){var x="var sharedChunk = {}; ("+R+")(sharedChunk); ("+e+")(sharedChunk);",d={};R(d),(A=T(d)).workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"}))}else e=T;else R=T}return k(0,function(l){function T(M,O){return M(O={exports:{}},O.exports),O.exports}var x="1.10.1",d=s;function s(M,O,Z,ae){this.cx=3*M,this.bx=3*(Z-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*O,this.by=3*(ae-O)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=ae,this.p2x=Z,this.p2y=ae}s.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},s.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},s.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},s.prototype.solveCurveX=function(M,O){var Z,ae,_e,Ee,je;for(O===void 0&&(O=1e-6),_e=M,je=0;je<8;je++){if(Ee=this.sampleCurveX(_e)-M,Math.abs(Ee)<O)return _e;var Qe=this.sampleCurveDerivativeX(_e);if(Math.abs(Qe)<1e-6)break;_e-=Ee/Qe}if((_e=M)<(Z=0))return Z;if(_e>(ae=1))return ae;for(;Z<ae;){if(Ee=this.sampleCurveX(_e),Math.abs(Ee-M)<O)return _e;M>Ee?Z=_e:ae=_e,_e=.5*(ae-Z)+Z}return _e},s.prototype.solve=function(M,O){return this.sampleCurveY(this.solveCurveX(M,O))};var t=o;function o(M,O){this.x=M,this.y=O}function r(M,O,Z,ae){var _e=new d(M,O,Z,ae);return function(Ee){return _e.solve(Ee)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,O){return this.clone()._rotateAround(M,O)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var O=M.x-this.x,Z=M.y-this.y;return O*O+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,O){return Math.atan2(this.x*O-this.y*M,this.x*M+this.y*O)},_matMult:function(M){var O=M[0]*this.x+M[1]*this.y,Z=M[2]*this.x+M[3]*this.y;return this.x=O,this.y=Z,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var O=Math.cos(M),Z=Math.sin(M),ae=O*this.x-Z*this.y,_e=Z*this.x+O*this.y;return this.x=ae,this.y=_e,this},_rotateAround:function(M,O){var Z=Math.cos(M),ae=Math.sin(M),_e=O.x+Z*(this.x-O.x)-ae*(this.y-O.y),Ee=O.y+ae*(this.x-O.x)+Z*(this.y-O.y);return this.x=_e,this.y=Ee,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(M){return M instanceof o?M:Array.isArray(M)?new o(M[0],M[1]):M};var n=r(.25,.1,.25,1);function a(M,O,Z){return Math.min(Z,Math.max(O,M))}function i(M,O,Z){var ae=Z-O,_e=((M-O)%ae+ae)%ae+O;return _e===O?Z:_e}function c(M){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];for(var ae=0,_e=O;ae<_e.length;ae+=1){var Ee=_e[ae];for(var je in Ee)M[je]=Ee[je]}return M}var h=1;function f(){return h++}function b(){return function M(O){return O?(O^16*Math.random()>>O/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function v(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function g(M,O){M.forEach(function(Z){O[Z]&&(O[Z]=O[Z].bind(O))})}function y(M,O){return M.indexOf(O,M.length-O.length)!==-1}function p(M,O,Z){var ae={};for(var _e in M)ae[_e]=O.call(Z||this,M[_e],_e,M);return ae}function m(M,O,Z){var ae={};for(var _e in M)O.call(Z||this,M[_e],_e,M)&&(ae[_e]=M[_e]);return ae}function w(M){return Array.isArray(M)?M.map(w):typeof M=="object"&&M?p(M,w):M}var u={};function S(M){u[M]||(typeof console<"u"&&console.warn(M),u[M]=!0)}function _(M,O,Z){return(Z.y-M.y)*(O.x-M.x)>(O.y-M.y)*(Z.x-M.x)}function E(M){for(var O=0,Z=0,ae=M.length,_e=ae-1,Ee=void 0,je=void 0;Z<ae;_e=Z++)Ee=M[Z],O+=((je=M[_e]).x-Ee.x)*(Ee.y+je.y);return O}function L(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function C(M){var O={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ae,_e,Ee,je){var Qe=Ee||je;return O[_e]=!Qe||Qe.toLowerCase(),""}),O["max-age"]){var Z=parseInt(O["max-age"],10);isNaN(Z)?delete O["max-age"]:O["max-age"]=Z}return O}var P=null;function I(M){if(P==null){var O=M.navigator?M.navigator.userAgent:null;P=!!M.safari||!(!O||!(/\b(iPad|iPhone|iPod)\b/.test(O)||O.match("Safari")&&!O.match("Chrome")))}return P}function U(M){try{var O=self[M];return O.setItem("_mapbox_test_",1),O.removeItem("_mapbox_test_"),!0}catch{return!1}}var z,H,F,N,B=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),j=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,K=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,G={now:B,frame:function(M){var O=j(M);return{cancel:function(){return K(O)}}},getImageData:function(M,O){O===void 0&&(O=0);var Z=self.document.createElement("canvas"),ae=Z.getContext("2d");if(!ae)throw new Error("failed to create canvas 2d context");return Z.width=M.width,Z.height=M.height,ae.drawImage(M,0,0,M.width,M.height),ae.getImageData(-O,-O,M.width+2*O,M.height+2*O)},resolveURL:function(M){return z||(z=self.document.createElement("a")),z.href=M,z.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(H==null&&(H=self.matchMedia("(prefers-reduced-motion: reduce)")),H.matches)}},V={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},W={supported:!1,testSupport:function(M){!J&&N&&(X?ee(M):F=M)}},J=!1,X=!1;function ee(M){var O=M.createTexture();M.bindTexture(M.TEXTURE_2D,O);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,N),M.isContextLost())return;W.supported=!0}catch{}M.deleteTexture(O),J=!0}self.document&&((N=self.document.createElement("img")).onload=function(){F&&ee(F),F=null,X=!0},N.onerror=function(){J=!0,F=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ie=function(M,O){this._transformRequestFn=M,this._customAccessToken=O,this._createSkuToken()};function se(M){return M.indexOf("mapbox:")===0}ie.prototype._createSkuToken=function(){var M=function(){for(var O="",Z=0;Z<10;Z++)O+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,O].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},ie.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ie.prototype.transformRequest=function(M,O){return this._transformRequestFn&&this._transformRequestFn(M,O)||{url:M}},ie.prototype.normalizeStyleURL=function(M,O){if(!se(M))return M;var Z=he(M);return Z.path="/styles/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||O)},ie.prototype.normalizeGlyphsURL=function(M,O){if(!se(M))return M;var Z=he(M);return Z.path="/fonts/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||O)},ie.prototype.normalizeSourceURL=function(M,O){if(!se(M))return M;var Z=he(M);return Z.path="/v4/"+Z.authority+".json",Z.params.push("secure"),this._makeAPIURL(Z,this._customAccessToken||O)},ie.prototype.normalizeSpriteURL=function(M,O,Z,ae){var _e=he(M);return se(M)?(_e.path="/styles/v1"+_e.path+"/sprite"+O+Z,this._makeAPIURL(_e,this._customAccessToken||ae)):(_e.path+=""+O+Z,ve(_e))},ie.prototype.normalizeTileURL=function(M,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!se(M))return M;var Z=he(M),ae=G.devicePixelRatio>=2||O===512?"@2x":"",_e=W.supported?".webp":"$1";Z.path=Z.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+ae+_e),Z.path=Z.path.replace(/^.+\/v4\//,"/"),Z.path="/v4"+Z.path;var Ee=this._customAccessToken||function(je){for(var Qe=0,st=je;Qe<st.length;Qe+=1){var xt=st[Qe].match(/^access_token=(.*)$/);if(xt)return xt[1]}return null}(Z.params)||V.ACCESS_TOKEN;return V.REQUIRE_ACCESS_TOKEN&&Ee&&this._skuToken&&Z.params.push("sku="+this._skuToken),this._makeAPIURL(Z,Ee)},ie.prototype.canonicalizeTileURL=function(M,O){var Z=he(M);if(!Z.path.match(/(^\/v4\/)/)||!Z.path.match(/\.[\w]+$/))return M;var ae="mapbox://tiles/";ae+=Z.path.replace("/v4/","");var _e=Z.params;return O&&(_e=_e.filter(function(Ee){return!Ee.match(/^access_token=/)})),_e.length&&(ae+="?"+_e.join("&")),ae},ie.prototype.canonicalizeTileset=function(M,O){for(var Z=!!O&&se(O),ae=[],_e=0,Ee=M.tiles||[];_e<Ee.length;_e+=1){var je=Ee[_e];ye(je)?ae.push(this.canonicalizeTileURL(je,Z)):ae.push(je)}return ae},ie.prototype._makeAPIURL=function(M,O){var Z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ae=he(V.API_URL);if(M.protocol=ae.protocol,M.authority=ae.authority,ae.path!=="/"&&(M.path=""+ae.path+M.path),!V.REQUIRE_ACCESS_TOKEN)return ve(M);if(!(O=O||V.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Z);if(O[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Z);return M.params=M.params.filter(function(_e){return _e.indexOf("access_token")===-1}),M.params.push("access_token="+O),ve(M)};var fe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ye(M){return fe.test(M)}var ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function he(M){var O=M.match(ge);if(!O)throw new Error("Unable to parse URL object");return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}function ve(M){var O=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+O}var Ie="mapbox.eventData";function xe(M){if(!M)return null;var O,Z=M.split(".");if(!Z||Z.length!==3)return null;try{return JSON.parse((O=Z[1],decodeURIComponent(self.atob(O).split("").map(function(ae){return"%"+("00"+ae.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var Ae=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ae.prototype.getStorageKey=function(M){var O,Z,ae=xe(V.ACCESS_TOKEN);return O=ae&&ae.u?(Z=ae.u,self.btoa(encodeURIComponent(Z).replace(/%([0-9A-F]{2})/g,function(_e,Ee){return String.fromCharCode(Number("0x"+Ee))}))):V.ACCESS_TOKEN||"",M?Ie+"."+M+":"+O:Ie+":"+O},Ae.prototype.fetchEventData=function(){var M=U("localStorage"),O=this.getStorageKey(),Z=this.getStorageKey("uuid");if(M)try{var ae=self.localStorage.getItem(O);ae&&(this.eventData=JSON.parse(ae));var _e=self.localStorage.getItem(Z);_e&&(this.anonId=_e)}catch{S("Unable to read from LocalStorage")}},Ae.prototype.saveEventData=function(){var M=U("localStorage"),O=this.getStorageKey(),Z=this.getStorageKey("uuid");if(M)try{self.localStorage.setItem(Z,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{S("Unable to write to LocalStorage")}},Ae.prototype.processRequests=function(M){},Ae.prototype.postEvent=function(M,O,Z,ae){var _e=this;if(V.EVENTS_URL){var Ee=he(V.EVENTS_URL);Ee.params.push("access_token="+(ae||V.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:re,userId:this.anonId},Qe=O?c(je,O):je,st={url:ve(Ee),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Qe])};this.pendingRequest=Et(st,function(xt){_e.pendingRequest=null,Z(xt),_e.saveEventData(),_e.processRequests(ae)})}},Ae.prototype.queueRequest=function(M,O){this.queue.push(M),this.processRequests(O)};var Se,Te,Q=function(M){function O(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.postMapLoadEvent=function(Z,ae,_e,Ee){this.skuToken=_e,(V.EVENTS_URL&&Ee||V.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(je){return se(je)||ye(je)}))&&this.queueRequest({id:ae,timestamp:Date.now()},Ee)},O.prototype.processRequests=function(Z){var ae=this;if(!this.pendingRequest&&this.queue.length!==0){var _e=this.queue.shift(),Ee=_e.id,je=_e.timestamp;Ee&&this.success[Ee]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=b()),this.postEvent(je,{skuToken:this.skuToken},function(Qe){Qe||Ee&&(ae.success[Ee]=!0)},Z))}},O}(Ae),oe=function(M){function O(Z){M.call(this,"appUserTurnstile"),this._customAccessToken=Z}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.postTurnstileEvent=function(Z,ae){V.EVENTS_URL&&V.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(_e){return se(_e)||ye(_e)})&&this.queueRequest(Date.now(),ae)},O.prototype.processRequests=function(Z){var ae=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var _e=xe(V.ACCESS_TOKEN),Ee=_e?_e.u:V.ACCESS_TOKEN,je=Ee!==this.eventData.tokenU;v(this.anonId)||(this.anonId=b(),je=!0);var Qe=this.queue.shift();if(this.eventData.lastSuccess){var st=new Date(this.eventData.lastSuccess),xt=new Date(Qe),Tt=(Qe-this.eventData.lastSuccess)/864e5;je=je||Tt>=1||Tt<-1||st.getDate()!==xt.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent(Qe,{"enabled.telemetry":!1},function(jt){jt||(ae.eventData.lastSuccess=Qe,ae.eventData.tokenU=Ee)},Z)}},O}(Ae),ce=new oe,me=ce.postTurnstileEvent.bind(ce),Me=new Q,Re=Me.postMapLoadEvent.bind(Me),Ce="mapbox-tiles",ze=500,le=50;function de(){self.caches&&!Se&&(Se=self.caches.open(Ce))}function be(M,O,Z){if(de(),Se){var ae={status:O.status,statusText:O.statusText,headers:new self.Headers};O.headers.forEach(function(Ee,je){return ae.headers.set(je,Ee)});var _e=C(O.headers.get("Cache-Control")||"");_e["no-store"]||(_e["max-age"]&&ae.headers.set("Expires",new Date(Z+1e3*_e["max-age"]).toUTCString()),new Date(ae.headers.get("Expires")).getTime()-Z<42e4||function(Ee,je){if(Te===void 0)try{new Response(new ReadableStream),Te=!0}catch{Te=!1}Te?je(Ee.body):Ee.blob().then(je)}(O,function(Ee){var je=new self.Response(Ee,ae);de(),Se&&Se.then(function(Qe){return Qe.put(Fe(M.url),je)}).catch(function(Qe){return S(Qe.message)})}))}}function Fe(M){var O=M.indexOf("?");return O<0?M:M.slice(0,O)}function Ve(M,O){if(de(),!Se)return O(null);var Z=Fe(M.url);Se.then(function(ae){ae.match(Z).then(function(_e){var Ee=function(je){if(!je)return!1;var Qe=new Date(je.headers.get("Expires")||0),st=C(je.headers.get("Cache-Control")||"");return Qe>Date.now()&&!st["no-cache"]}(_e);ae.delete(Z),Ee&&ae.put(Z,_e.clone()),O(null,_e,Ee)}).catch(O)}).catch(O)}var He,rt=1/0;function tt(){return He==null&&(He=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),He}var ot={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ot);var ht=function(M){function O(Z,ae,_e){ae===401&&ye(_e)&&(Z+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,Z),this.status=ae,this.url=_e,this.name=this.constructor.name,this.message=Z}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},O}(Error),_t=L()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function dt(M,O){var Z,ae=new self.AbortController,_e=new self.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:_t(),signal:ae.signal}),Ee=!1,je=!1,Qe=(Z=_e.url).indexOf("sku=")>0&&ye(Z);M.type==="json"&&_e.headers.set("Accept","application/json");var st=function(Tt,jt,Ht){if(!je){if(Tt&&Tt.message!=="SecurityError"&&S(Tt),jt&&Ht)return xt(jt);var Vt=Date.now();self.fetch(_e).then(function(on){if(on.ok){var vn=Qe?on.clone():null;return xt(on,vn,Vt)}return O(new ht(on.statusText,on.status,M.url))}).catch(function(on){on.code!==20&&O(new Error(on.message))})}},xt=function(Tt,jt,Ht){(M.type==="arrayBuffer"?Tt.arrayBuffer():M.type==="json"?Tt.json():Tt.text()).then(function(Vt){je||(jt&&Ht&&be(_e,jt,Ht),Ee=!0,O(null,Vt,Tt.headers.get("Cache-Control"),Tt.headers.get("Expires")))}).catch(function(Vt){je||O(new Error(Vt.message))})};return Qe?Ve(_e,st):st(null,null),{cancel:function(){je=!0,Ee||ae.abort()}}}var bt=function(M,O){if(Z=M.url,!(/^file:/.test(Z)||/^file:/.test(_t())&&!/^\w+:/.test(Z))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return dt(M,O);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,O,void 0,!0)}var Z;return function(ae,_e){var Ee=new self.XMLHttpRequest;for(var je in Ee.open(ae.method||"GET",ae.url,!0),ae.type==="arrayBuffer"&&(Ee.responseType="arraybuffer"),ae.headers)Ee.setRequestHeader(je,ae.headers[je]);return ae.type==="json"&&(Ee.responseType="text",Ee.setRequestHeader("Accept","application/json")),Ee.withCredentials=ae.credentials==="include",Ee.onerror=function(){_e(new Error(Ee.statusText))},Ee.onload=function(){if((Ee.status>=200&&Ee.status<300||Ee.status===0)&&Ee.response!==null){var Qe=Ee.response;if(ae.type==="json")try{Qe=JSON.parse(Ee.response)}catch(st){return _e(st)}_e(null,Qe,Ee.getResponseHeader("Cache-Control"),Ee.getResponseHeader("Expires"))}else _e(new ht(Ee.statusText,Ee.status,ae.url))},Ee.send(ae.body),{cancel:function(){return Ee.abort()}}}(M,O)},St=function(M,O){return bt(c(M,{type:"arrayBuffer"}),O)},Et=function(M,O){return bt(c(M,{method:"POST"}),O)},zt,Ut;zt=[],Ut=0;var Pt=function(M,O){if(W.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),Ut>=V.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:M,callback:O,cancelled:!1,cancel:function(){this.cancelled=!0}};return zt.push(Z),Z}Ut++;var ae=!1,_e=function(){if(!ae)for(ae=!0,Ut--;zt.length&&Ut<V.MAX_PARALLEL_IMAGE_REQUESTS;){var je=zt.shift(),Qe=je.requestParameters,st=je.callback;je.cancelled||(je.cancel=Pt(Qe,st).cancel)}},Ee=St(M,function(je,Qe,st,xt){_e(),je?O(je):Qe&&(tt()?function(Tt,jt){var Ht=new self.Blob([new Uint8Array(Tt)],{type:"image/png"});self.createImageBitmap(Ht).then(function(Vt){jt(null,Vt)}).catch(function(Vt){jt(new Error("Could not load image because of "+Vt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Qe,O):function(Tt,jt,Ht,Vt){var on=new self.Image,vn=self.URL;on.onload=function(){jt(null,on),vn.revokeObjectURL(on.src)},on.onerror=function(){return jt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Pn=new self.Blob([new Uint8Array(Tt)],{type:"image/png"});on.cacheControl=Ht,on.expires=Vt,on.src=Tt.byteLength?vn.createObjectURL(Pn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Qe,O,st,xt))});return{cancel:function(){Ee.cancel(),_e()}}};function Ze(M,O,Z){Z[M]&&Z[M].indexOf(O)!==-1||(Z[M]=Z[M]||[],Z[M].push(O))}function Ye(M,O,Z){if(Z&&Z[M]){var ae=Z[M].indexOf(O);ae!==-1&&Z[M].splice(ae,1)}}var Be=function(M,O){O===void 0&&(O={}),c(this,O),this.type=M},ke=function(M){function O(Z,ae){ae===void 0&&(ae={}),M.call(this,"error",c({error:Z},ae))}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Be),Pe=function(){};Pe.prototype.on=function(M,O){return this._listeners=this._listeners||{},Ze(M,O,this._listeners),this},Pe.prototype.off=function(M,O){return Ye(M,O,this._listeners),Ye(M,O,this._oneTimeListeners),this},Pe.prototype.once=function(M,O){return this._oneTimeListeners=this._oneTimeListeners||{},Ze(M,O,this._oneTimeListeners),this},Pe.prototype.fire=function(M,O){typeof M=="string"&&(M=new Be(M,O||{}));var Z=M.type;if(this.listens(Z)){M.target=this;for(var ae=0,_e=this._listeners&&this._listeners[Z]?this._listeners[Z].slice():[];ae<_e.length;ae+=1)_e[ae].call(this,M);for(var Ee=0,je=this._oneTimeListeners&&this._oneTimeListeners[Z]?this._oneTimeListeners[Z].slice():[];Ee<je.length;Ee+=1){var Qe=je[Ee];Ye(Z,Qe,this._oneTimeListeners),Qe.call(this,M)}var st=this._eventedParent;st&&(c(M,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),st.fire(M))}else M instanceof ke&&console.error(M.error);return this},Pe.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},Pe.prototype.setEventedParent=function(M,O){return this._eventedParent=M,this._eventedParentData=O,this};var qe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Xe=function(M,O,Z,ae){this.message=(M?M+": ":"")+Z,ae&&(this.identifier=ae),O!=null&&O.__line__&&(this.line=O.__line__)};function nt(M){var O=M.key,Z=M.value;return Z?[new Xe(O,Z,"constants have been deprecated as of v8")]:[]}function ut(M){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];for(var ae=0,_e=O;ae<_e.length;ae+=1){var Ee=_e[ae];for(var je in Ee)M[je]=Ee[je]}return M}function ct(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function Ct(M){if(Array.isArray(M))return M.map(Ct);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var O={};for(var Z in M)O[Z]=Ct(M[Z]);return O}return ct(M)}var Lt=function(M){function O(Z,ae){M.call(this,ae),this.message=ae,this.key=Z}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Error),Mt=function(M,O){O===void 0&&(O=[]),this.parent=M,this.bindings={};for(var Z=0,ae=O;Z<ae.length;Z+=1){var _e=ae[Z],Ee=_e[0],je=_e[1];this.bindings[Ee]=je}};Mt.prototype.concat=function(M){return new Mt(this,M)},Mt.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},Mt.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var mt={kind:"null"},kt={kind:"number"},wt={kind:"string"},Ot={kind:"boolean"},It={kind:"color"},Nt={kind:"object"},Dt={kind:"value"},qt={kind:"collator"},Xt={kind:"formatted"},cn={kind:"resolvedImage"};function yn(M,O){return{kind:"array",itemType:M,N:O}}function Kt(M){if(M.kind==="array"){var O=Kt(M.itemType);return typeof M.N=="number"?"array<"+O+", "+M.N+">":M.itemType.kind==="value"?"array":"array<"+O+">"}return M.kind}var Mn=[mt,kt,wt,Ot,It,Xt,Nt,yn(Dt),cn];function Un(M,O){if(O.kind==="error")return null;if(M.kind==="array"){if(O.kind==="array"&&(O.N===0&&O.itemType.kind==="value"||!Un(M.itemType,O.itemType))&&(typeof M.N!="number"||M.N===O.N))return null}else{if(M.kind===O.kind)return null;if(M.kind==="value"){for(var Z=0,ae=Mn;Z<ae.length;Z+=1)if(!Un(ae[Z],O))return null}}return"Expected "+Kt(M)+" but found "+Kt(O)+" instead."}function xn(M,O){return O.some(function(Z){return Z.kind===M.kind})}function dn(M,O){return O.some(function(Z){return Z==="null"?M===null:Z==="array"?Array.isArray(M):Z==="object"?M&&!Array.isArray(M)&&typeof M=="object":Z===typeof M})}var gn=T(function(M,O){var Z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ae(st){return(st=Math.round(st))<0?0:st>255?255:st}function _e(st){return st<0?0:st>1?1:st}function Ee(st){return st[st.length-1]==="%"?ae(parseFloat(st)/100*255):ae(parseInt(st))}function je(st){return st[st.length-1]==="%"?_e(parseFloat(st)/100):_e(parseFloat(st))}function Qe(st,xt,Tt){return Tt<0?Tt+=1:Tt>1&&(Tt-=1),6*Tt<1?st+(xt-st)*Tt*6:2*Tt<1?xt:3*Tt<2?st+(xt-st)*(2/3-Tt)*6:st}try{O.parseCSSColor=function(st){var xt,Tt=st.replace(/ /g,"").toLowerCase();if(Tt in Z)return Z[Tt].slice();if(Tt[0]==="#")return Tt.length===4?(xt=parseInt(Tt.substr(1),16))>=0&&xt<=4095?[(3840&xt)>>4|(3840&xt)>>8,240&xt|(240&xt)>>4,15&xt|(15&xt)<<4,1]:null:Tt.length===7&&(xt=parseInt(Tt.substr(1),16))>=0&&xt<=16777215?[(16711680&xt)>>16,(65280&xt)>>8,255&xt,1]:null;var jt=Tt.indexOf("("),Ht=Tt.indexOf(")");if(jt!==-1&&Ht+1===Tt.length){var Vt=Tt.substr(0,jt),on=Tt.substr(jt+1,Ht-(jt+1)).split(","),vn=1;switch(Vt){case"rgba":if(on.length!==4)return null;vn=je(on.pop());case"rgb":return on.length!==3?null:[Ee(on[0]),Ee(on[1]),Ee(on[2]),vn];case"hsla":if(on.length!==4)return null;vn=je(on.pop());case"hsl":if(on.length!==3)return null;var Pn=(parseFloat(on[0])%360+360)%360/360,Cn=je(on[1]),Bn=je(on[2]),Nn=Bn<=.5?Bn*(Cn+1):Bn+Cn-Bn*Cn,Wn=2*Bn-Nn;return[ae(255*Qe(Wn,Nn,Pn+1/3)),ae(255*Qe(Wn,Nn,Pn)),ae(255*Qe(Wn,Nn,Pn-1/3)),vn];default:return null}}return null}}catch{}}),an=gn.parseCSSColor,sn=function(M,O,Z,ae){ae===void 0&&(ae=1),this.r=M,this.g=O,this.b=Z,this.a=ae};sn.parse=function(M){if(M){if(M instanceof sn)return M;if(typeof M=="string"){var O=an(M);if(O)return new sn(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},sn.prototype.toString=function(){var M=this.toArray(),O=M[0],Z=M[1],ae=M[2],_e=M[3];return"rgba("+Math.round(O)+","+Math.round(Z)+","+Math.round(ae)+","+_e+")"},sn.prototype.toArray=function(){var M=this,O=M.r,Z=M.g,ae=M.b,_e=M.a;return _e===0?[0,0,0,0]:[255*O/_e,255*Z/_e,255*ae/_e,_e]},sn.black=new sn(0,0,0,1),sn.white=new sn(1,1,1,1),sn.transparent=new sn(0,0,0,0),sn.red=new sn(1,0,0,1);var On=function(M,O,Z){this.sensitivity=M?O?"variant":"case":O?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};On.prototype.compare=function(M,O){return this.collator.compare(M,O)},On.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var En=function(M,O,Z,ae,_e){this.text=M,this.image=O,this.scale=Z,this.fontStack=ae,this.textColor=_e},Dn=function(M){this.sections=M};Dn.fromString=function(M){return new Dn([new En(M,null,null,null,null)])},Dn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(M){return M.text.length!==0||M.image&&M.image.name.length!==0})},Dn.factory=function(M){return M instanceof Dn?M:Dn.fromString(M)},Dn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(M){return M.text}).join("")},Dn.prototype.serialize=function(){for(var M=["format"],O=0,Z=this.sections;O<Z.length;O+=1){var ae=Z[O];if(ae.image)M.push(["image",ae.image.name]);else{M.push(ae.text);var _e={};ae.fontStack&&(_e["text-font"]=["literal",ae.fontStack.split(",")]),ae.scale&&(_e["font-scale"]=ae.scale),ae.textColor&&(_e["text-color"]=["rgba"].concat(ae.textColor.toArray())),M.push(_e)}}return M};var Zn=function(M){this.name=M.name,this.available=M.available};function Fn(M,O,Z,ae){return typeof M=="number"&&M>=0&&M<=255&&typeof O=="number"&&O>=0&&O<=255&&typeof Z=="number"&&Z>=0&&Z<=255?ae===void 0||typeof ae=="number"&&ae>=0&&ae<=1?null:"Invalid rgba value ["+[M,O,Z,ae].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof ae=="number"?[M,O,Z,ae]:[M,O,Z]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function nr(M){if(M===null||typeof M=="string"||typeof M=="boolean"||typeof M=="number"||M instanceof sn||M instanceof On||M instanceof Dn||M instanceof Zn)return!0;if(Array.isArray(M)){for(var O=0,Z=M;O<Z.length;O+=1)if(!nr(Z[O]))return!1;return!0}if(typeof M=="object"){for(var ae in M)if(!nr(M[ae]))return!1;return!0}return!1}function $n(M){if(M===null)return mt;if(typeof M=="string")return wt;if(typeof M=="boolean")return Ot;if(typeof M=="number")return kt;if(M instanceof sn)return It;if(M instanceof On)return qt;if(M instanceof Dn)return Xt;if(M instanceof Zn)return cn;if(Array.isArray(M)){for(var O,Z=M.length,ae=0,_e=M;ae<_e.length;ae+=1){var Ee=$n(_e[ae]);if(O){if(O===Ee)continue;O=Dt;break}O=Ee}return yn(O||Dt,Z)}return Nt}function mr(M){var O=typeof M;return M===null?"":O==="string"||O==="number"||O==="boolean"?String(M):M instanceof sn||M instanceof Dn||M instanceof Zn?M.toString():JSON.stringify(M)}Zn.prototype.toString=function(){return this.name},Zn.fromString=function(M){return M?new Zn({name:M,available:!1}):null},Zn.prototype.serialize=function(){return["image",this.name]};var dr=function(M,O){this.type=M,this.value=O};dr.parse=function(M,O){if(M.length!==2)return O.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!nr(M[1]))return O.error("invalid value");var Z=M[1],ae=$n(Z),_e=O.expectedType;return ae.kind!=="array"||ae.N!==0||!_e||_e.kind!=="array"||typeof _e.N=="number"&&_e.N!==0||(ae=_e),new dr(ae,Z)},dr.prototype.evaluate=function(){return this.value},dr.prototype.eachChild=function(){},dr.prototype.outputDefined=function(){return!0},dr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof sn?["rgba"].concat(this.value.toArray()):this.value instanceof Dn?this.value.serialize():this.value};var Yn=function(M){this.name="ExpressionEvaluationError",this.message=M};Yn.prototype.toJSON=function(){return this.message};var Vn={string:wt,number:kt,boolean:Ot,object:Nt},ur=function(M,O){this.type=M,this.args=O};ur.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var Z,ae=1,_e=M[0];if(_e==="array"){var Ee,je;if(M.length>2){var Qe=M[1];if(typeof Qe!="string"||!(Qe in Vn)||Qe==="object")return O.error('The item type argument of "array" must be one of string, number, boolean',1);Ee=Vn[Qe],ae++}else Ee=Dt;if(M.length>3){if(M[2]!==null&&(typeof M[2]!="number"||M[2]<0||M[2]!==Math.floor(M[2])))return O.error('The length argument to "array" must be a positive integer literal',2);je=M[2],ae++}Z=yn(Ee,je)}else Z=Vn[_e];for(var st=[];ae<M.length;ae++){var xt=O.parse(M[ae],ae,Dt);if(!xt)return null;st.push(xt)}return new ur(Z,st)},ur.prototype.evaluate=function(M){for(var O=0;O<this.args.length;O++){var Z=this.args[O].evaluate(M);if(!Un(this.type,$n(Z)))return Z;if(O===this.args.length-1)throw new Yn("Expected value to be of type "+Kt(this.type)+", but found "+Kt($n(Z))+" instead.")}return null},ur.prototype.eachChild=function(M){this.args.forEach(M)},ur.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},ur.prototype.serialize=function(){var M=this.type,O=[M.kind];if(M.kind==="array"){var Z=M.itemType;if(Z.kind==="string"||Z.kind==="number"||Z.kind==="boolean"){O.push(Z.kind);var ae=M.N;(typeof ae=="number"||this.args.length>1)&&O.push(ae)}}return O.concat(this.args.map(function(_e){return _e.serialize()}))};var Gt=function(M){this.type=Xt,this.sections=M};Gt.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var Z=M[1];if(!Array.isArray(Z)&&typeof Z=="object")return O.error("First argument must be an image or text section.");for(var ae=[],_e=!1,Ee=1;Ee<=M.length-1;++Ee){var je=M[Ee];if(_e&&typeof je=="object"&&!Array.isArray(je)){_e=!1;var Qe=null;if(je["font-scale"]&&!(Qe=O.parse(je["font-scale"],1,kt)))return null;var st=null;if(je["text-font"]&&!(st=O.parse(je["text-font"],1,yn(wt))))return null;var xt=null;if(je["text-color"]&&!(xt=O.parse(je["text-color"],1,It)))return null;var Tt=ae[ae.length-1];Tt.scale=Qe,Tt.font=st,Tt.textColor=xt}else{var jt=O.parse(M[Ee],1,Dt);if(!jt)return null;var Ht=jt.type.kind;if(Ht!=="string"&&Ht!=="value"&&Ht!=="null"&&Ht!=="resolvedImage")return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_e=!0,ae.push({content:jt,scale:null,font:null,textColor:null})}}return new Gt(ae)},Gt.prototype.evaluate=function(M){return new Dn(this.sections.map(function(O){var Z=O.content.evaluate(M);return $n(Z)===cn?new En("",Z,null,null,null):new En(mr(Z),null,O.scale?O.scale.evaluate(M):null,O.font?O.font.evaluate(M).join(","):null,O.textColor?O.textColor.evaluate(M):null)}))},Gt.prototype.eachChild=function(M){for(var O=0,Z=this.sections;O<Z.length;O+=1){var ae=Z[O];M(ae.content),ae.scale&&M(ae.scale),ae.font&&M(ae.font),ae.textColor&&M(ae.textColor)}},Gt.prototype.outputDefined=function(){return!1},Gt.prototype.serialize=function(){for(var M=["format"],O=0,Z=this.sections;O<Z.length;O+=1){var ae=Z[O];M.push(ae.content.serialize());var _e={};ae.scale&&(_e["font-scale"]=ae.scale.serialize()),ae.font&&(_e["text-font"]=ae.font.serialize()),ae.textColor&&(_e["text-color"]=ae.textColor.serialize()),M.push(_e)}return M};var tn=function(M){this.type=cn,this.input=M};tn.parse=function(M,O){if(M.length!==2)return O.error("Expected two arguments.");var Z=O.parse(M[1],1,wt);return Z?new tn(Z):O.error("No image name provided.")},tn.prototype.evaluate=function(M){var O=this.input.evaluate(M),Z=Zn.fromString(O);return Z&&M.availableImages&&(Z.available=M.availableImages.indexOf(O)>-1),Z},tn.prototype.eachChild=function(M){M(this.input)},tn.prototype.outputDefined=function(){return!1},tn.prototype.serialize=function(){return["image",this.input.serialize()]};var In={"to-boolean":Ot,"to-color":It,"to-number":kt,"to-string":wt},_n=function(M,O){this.type=M,this.args=O};_n.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var Z=M[0];if((Z==="to-boolean"||Z==="to-string")&&M.length!==2)return O.error("Expected one argument.");for(var ae=In[Z],_e=[],Ee=1;Ee<M.length;Ee++){var je=O.parse(M[Ee],Ee,Dt);if(!je)return null;_e.push(je)}return new _n(ae,_e)},_n.prototype.evaluate=function(M){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(M));if(this.type.kind==="color"){for(var O,Z,ae=0,_e=this.args;ae<_e.length;ae+=1){if(Z=null,(O=_e[ae].evaluate(M))instanceof sn)return O;if(typeof O=="string"){var Ee=M.parseColor(O);if(Ee)return Ee}else if(Array.isArray(O)&&!(Z=O.length<3||O.length>4?"Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":Fn(O[0],O[1],O[2],O[3])))return new sn(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new Yn(Z||"Could not parse color from value '"+(typeof O=="string"?O:String(JSON.stringify(O)))+"'")}if(this.type.kind==="number"){for(var je=null,Qe=0,st=this.args;Qe<st.length;Qe+=1){if((je=st[Qe].evaluate(M))===null)return 0;var xt=Number(je);if(!isNaN(xt))return xt}throw new Yn("Could not convert "+JSON.stringify(je)+" to number.")}return this.type.kind==="formatted"?Dn.fromString(mr(this.args[0].evaluate(M))):this.type.kind==="resolvedImage"?Zn.fromString(mr(this.args[0].evaluate(M))):mr(this.args[0].evaluate(M))},_n.prototype.eachChild=function(M){this.args.forEach(M)},_n.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},_n.prototype.serialize=function(){if(this.type.kind==="formatted")return new Gt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new tn(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(O){M.push(O.serialize())}),M};var Sn=["Unknown","Point","LineString","Polygon"],jn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};jn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},jn.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Sn[this.feature.type]:this.feature.type:null},jn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},jn.prototype.canonicalID=function(){return this.canonical},jn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},jn.prototype.parseColor=function(M){var O=this._parseColorCache[M];return O||(O=this._parseColorCache[M]=sn.parse(M)),O};var qn=function(M,O,Z,ae){this.name=M,this.type=O,this._evaluate=Z,this.args=ae};qn.prototype.evaluate=function(M){return this._evaluate(M,this.args)},qn.prototype.eachChild=function(M){this.args.forEach(M)},qn.prototype.outputDefined=function(){return!1},qn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},qn.parse=function(M,O){var Z,ae=M[0],_e=qn.definitions[ae];if(!_e)return O.error('Unknown expression "'+ae+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ee=Array.isArray(_e)?_e[0]:_e.type,je=Array.isArray(_e)?[[_e[1],_e[2]]]:_e.overloads,Qe=je.filter(function(jr){var Pr=jr[0];return!Array.isArray(Pr)||Pr.length===M.length-1}),st=null,xt=0,Tt=Qe;xt<Tt.length;xt+=1){var jt=Tt[xt],Ht=jt[0],Vt=jt[1];st=new ir(O.registry,O.path,null,O.scope);for(var on=[],vn=!1,Pn=1;Pn<M.length;Pn++){var Cn=M[Pn],Bn=Array.isArray(Ht)?Ht[Pn-1]:Ht.type,Nn=st.parse(Cn,1+on.length,Bn);if(!Nn){vn=!0;break}on.push(Nn)}if(!vn)if(Array.isArray(Ht)&&Ht.length!==on.length)st.error("Expected "+Ht.length+" arguments, but found "+on.length+" instead.");else{for(var Wn=0;Wn<on.length;Wn++){var Kn=Array.isArray(Ht)?Ht[Wn]:Ht.type,tr=on[Wn];st.concat(Wn+1).checkSubtype(Kn,tr.type)}if(st.errors.length===0)return new qn(ae,Ee,Vt,on)}}if(Qe.length===1)(Z=O.errors).push.apply(Z,st.errors);else{for(var xr=(Qe.length?Qe:je).map(function(jr){return Pr=jr[0],Array.isArray(Pr)?"("+Pr.map(Kt).join(", ")+")":"("+Kt(Pr.type)+"...)";var Pr}).join(" | "),hr=[],wr=1;wr<M.length;wr++){var Er=O.parse(M[wr],1+hr.length);if(!Er)return null;hr.push(Kt(Er.type))}O.error("Expected arguments of type "+xr+", but found ("+hr.join(", ")+") instead.")}return null},qn.register=function(M,O){for(var Z in qn.definitions=O,O)M[Z]=qn};var ar=function(M,O,Z){this.type=qt,this.locale=Z,this.caseSensitive=M,this.diacriticSensitive=O};ar.parse=function(M,O){if(M.length!==2)return O.error("Expected one argument.");var Z=M[1];if(typeof Z!="object"||Array.isArray(Z))return O.error("Collator options argument must be an object.");var ae=O.parse(Z["case-sensitive"]!==void 0&&Z["case-sensitive"],1,Ot);if(!ae)return null;var _e=O.parse(Z["diacritic-sensitive"]!==void 0&&Z["diacritic-sensitive"],1,Ot);if(!_e)return null;var Ee=null;return Z.locale&&!(Ee=O.parse(Z.locale,1,wt))?null:new ar(ae,_e,Ee)},ar.prototype.evaluate=function(M){return new On(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},ar.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},ar.prototype.outputDefined=function(){return!1},ar.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var cr=8192;function $t(M,O){M[0]=Math.min(M[0],O[0]),M[1]=Math.min(M[1],O[1]),M[2]=Math.max(M[2],O[0]),M[3]=Math.max(M[3],O[1])}function An(M,O){return!(M[0]<=O[0]||M[2]>=O[2]||M[1]<=O[1]||M[3]>=O[3])}function Rt(M,O){var Z,ae=(180+M[0])/360,_e=(Z=M[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Z*Math.PI/360)))/360),Ee=Math.pow(2,O.z);return[Math.round(ae*Ee*cr),Math.round(_e*Ee*cr)]}function Yt(M,O,Z){return O[1]>M[1]!=Z[1]>M[1]&&M[0]<(Z[0]-O[0])*(M[1]-O[1])/(Z[1]-O[1])+O[0]}function rn(M,O){for(var Z=!1,ae=0,_e=O.length;ae<_e;ae++)for(var Ee=O[ae],je=0,Qe=Ee.length;je<Qe-1;je++){if(st=M,xt=Ee[je],Tt=Ee[je+1],jt=void 0,Ht=void 0,Vt=void 0,on=void 0,jt=st[0]-xt[0],Ht=st[1]-xt[1],Vt=st[0]-Tt[0],on=st[1]-Tt[1],jt*on-Vt*Ht==0&&jt*Vt<=0&&Ht*on<=0)return!1;Yt(M,Ee[je],Ee[je+1])&&(Z=!Z)}var st,xt,Tt,jt,Ht,Vt,on;return Z}function bn(M,O){for(var Z=0;Z<O.length;Z++)if(rn(M,O[Z]))return!0;return!1}function ln(M,O,Z,ae){var _e=M[0]-Z[0],Ee=M[1]-Z[1],je=O[0]-Z[0],Qe=O[1]-Z[1],st=ae[0]-Z[0],xt=ae[1]-Z[1],Tt=_e*xt-st*Ee,jt=je*xt-st*Qe;return Tt>0&&jt<0||Tt<0&&jt>0}function kn(M,O,Z){for(var ae=0,_e=Z;ae<_e.length;ae+=1)for(var Ee=_e[ae],je=0;je<Ee.length-1;++je)if(Qe=M,st=O,xt=Ee[je],Tt=Ee[je+1],jt=void 0,Ht=void 0,Vt=void 0,Vt=[st[0]-Qe[0],st[1]-Qe[1]],jt=[Tt[0]-xt[0],Tt[1]-xt[1]],Ht=Vt,jt[0]*Ht[1]-jt[1]*Ht[0]!=0&&ln(Qe,st,xt,Tt)&&ln(xt,Tt,Qe,st))return!0;var Qe,st,xt,Tt,jt,Ht,Vt;return!1}function Tn(M,O){for(var Z=0;Z<M.length;++Z)if(!rn(M[Z],O))return!1;for(var ae=0;ae<M.length-1;++ae)if(kn(M[ae],M[ae+1],O))return!1;return!0}function hn(M,O){for(var Z=0;Z<O.length;Z++)if(Tn(M,O[Z]))return!0;return!1}function nn(M,O,Z){for(var ae=[],_e=0;_e<M.length;_e++){for(var Ee=[],je=0;je<M[_e].length;je++){var Qe=Rt(M[_e][je],Z);$t(O,Qe),Ee.push(Qe)}ae.push(Ee)}return ae}function fn(M,O,Z){for(var ae=[],_e=0;_e<M.length;_e++){var Ee=nn(M[_e],O,Z);ae.push(Ee)}return ae}function mn(M,O,Z,ae){if(M[0]<Z[0]||M[0]>Z[2]){var _e=.5*ae,Ee=M[0]-Z[0]>_e?-ae:Z[0]-M[0]>_e?ae:0;Ee===0&&(Ee=M[0]-Z[2]>_e?-ae:Z[2]-M[0]>_e?ae:0),M[0]+=Ee}$t(O,M)}function zn(M,O,Z,ae){for(var _e=Math.pow(2,ae.z)*cr,Ee=[ae.x*cr,ae.y*cr],je=[],Qe=0,st=M;Qe<st.length;Qe+=1)for(var xt=0,Tt=st[Qe];xt<Tt.length;xt+=1){var jt=Tt[xt],Ht=[jt.x+Ee[0],jt.y+Ee[1]];mn(Ht,O,Z,_e),je.push(Ht)}return je}function Gn(M,O,Z,ae){for(var _e=Math.pow(2,ae.z)*cr,Ee=[ae.x*cr,ae.y*cr],je=[],Qe=0,st=M;Qe<st.length;Qe+=1){for(var xt=[],Tt=0,jt=st[Qe];Tt<jt.length;Tt+=1){var Ht=jt[Tt],Vt=[Ht.x+Ee[0],Ht.y+Ee[1]];$t(O,Vt),xt.push(Vt)}je.push(xt)}if(O[2]-O[0]<=_e/2){(Bn=O)[0]=Bn[1]=1/0,Bn[2]=Bn[3]=-1/0;for(var on=0,vn=je;on<vn.length;on+=1)for(var Pn=0,Cn=vn[on];Pn<Cn.length;Pn+=1)mn(Cn[Pn],O,Z,_e)}var Bn;return je}var Hn=function(M,O){this.type=Ot,this.geojson=M,this.geometries=O};function Qn(M){if(M instanceof qn&&(M.name==="get"&&M.args.length===1||M.name==="feature-state"||M.name==="has"&&M.args.length===1||M.name==="properties"||M.name==="geometry-type"||M.name==="id"||/^filter-/.test(M.name))||M instanceof Hn)return!1;var O=!0;return M.eachChild(function(Z){O&&!Qn(Z)&&(O=!1)}),O}function rr(M){if(M instanceof qn&&M.name==="feature-state")return!1;var O=!0;return M.eachChild(function(Z){O&&!rr(Z)&&(O=!1)}),O}function er(M,O){if(M instanceof qn&&O.indexOf(M.name)>=0)return!1;var Z=!0;return M.eachChild(function(ae){Z&&!er(ae,O)&&(Z=!1)}),Z}Hn.parse=function(M,O){if(M.length!==2)return O.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(nr(M[1])){var Z=M[1];if(Z.type==="FeatureCollection")for(var ae=0;ae<Z.features.length;++ae){var _e=Z.features[ae].geometry.type;if(_e==="Polygon"||_e==="MultiPolygon")return new Hn(Z,Z.features[ae].geometry)}else if(Z.type==="Feature"){var Ee=Z.geometry.type;if(Ee==="Polygon"||Ee==="MultiPolygon")return new Hn(Z,Z.geometry)}else if(Z.type==="Polygon"||Z.type==="MultiPolygon")return new Hn(Z,Z)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Hn.prototype.evaluate=function(M){if(M.geometry()!=null&&M.canonicalID()!=null){if(M.geometryType()==="Point")return function(O,Z){var ae=[1/0,1/0,-1/0,-1/0],_e=[1/0,1/0,-1/0,-1/0],Ee=O.canonicalID();if(Z.type==="Polygon"){var je=nn(Z.coordinates,_e,Ee),Qe=zn(O.geometry(),ae,_e,Ee);if(!An(ae,_e))return!1;for(var st=0,xt=Qe;st<xt.length;st+=1)if(!rn(xt[st],je))return!1}if(Z.type==="MultiPolygon"){var Tt=fn(Z.coordinates,_e,Ee),jt=zn(O.geometry(),ae,_e,Ee);if(!An(ae,_e))return!1;for(var Ht=0,Vt=jt;Ht<Vt.length;Ht+=1)if(!bn(Vt[Ht],Tt))return!1}return!0}(M,this.geometries);if(M.geometryType()==="LineString")return function(O,Z){var ae=[1/0,1/0,-1/0,-1/0],_e=[1/0,1/0,-1/0,-1/0],Ee=O.canonicalID();if(Z.type==="Polygon"){var je=nn(Z.coordinates,_e,Ee),Qe=Gn(O.geometry(),ae,_e,Ee);if(!An(ae,_e))return!1;for(var st=0,xt=Qe;st<xt.length;st+=1)if(!Tn(xt[st],je))return!1}if(Z.type==="MultiPolygon"){var Tt=fn(Z.coordinates,_e,Ee),jt=Gn(O.geometry(),ae,_e,Ee);if(!An(ae,_e))return!1;for(var Ht=0,Vt=jt;Ht<Vt.length;Ht+=1)if(!hn(Vt[Ht],Tt))return!1}return!0}(M,this.geometries)}return!1},Hn.prototype.eachChild=function(){},Hn.prototype.outputDefined=function(){return!0},Hn.prototype.serialize=function(){return["within",this.geojson]};var or=function(M,O){this.type=O.type,this.name=M,this.boundExpression=O};or.parse=function(M,O){if(M.length!==2||typeof M[1]!="string")return O.error("'var' expression requires exactly one string literal argument.");var Z=M[1];return O.scope.has(Z)?new or(Z,O.scope.get(Z)):O.error('Unknown variable "'+Z+'". Make sure "'+Z+'" has been bound in an enclosing "let" expression before using it.',1)},or.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},or.prototype.eachChild=function(){},or.prototype.outputDefined=function(){return!1},or.prototype.serialize=function(){return["var",this.name]};var ir=function(M,O,Z,ae,_e){O===void 0&&(O=[]),ae===void 0&&(ae=new Mt),_e===void 0&&(_e=[]),this.registry=M,this.path=O,this.key=O.map(function(Ee){return"["+Ee+"]"}).join(""),this.scope=ae,this.errors=_e,this.expectedType=Z};function gr(M){if(M instanceof or)return gr(M.boundExpression);if(M instanceof qn&&M.name==="error"||M instanceof ar||M instanceof Hn)return!1;var O=M instanceof _n||M instanceof ur,Z=!0;return M.eachChild(function(ae){Z=O?Z&&gr(ae):Z&&ae instanceof dr}),!!Z&&Qn(M)&&er(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Tr(M,O){for(var Z,ae,_e=M.length-1,Ee=0,je=_e,Qe=0;Ee<=je;)if(Z=M[Qe=Math.floor((Ee+je)/2)],ae=M[Qe+1],Z<=O){if(Qe===_e||O<ae)return Qe;Ee=Qe+1}else{if(!(Z>O))throw new Yn("Input is not a number.");je=Qe-1}return 0}ir.prototype.parse=function(M,O,Z,ae,_e){return _e===void 0&&(_e={}),O?this.concat(O,Z,ae)._parse(M,_e):this._parse(M,_e)},ir.prototype._parse=function(M,O){function Z(xt,Tt,jt){return jt==="assert"?new ur(Tt,[xt]):jt==="coerce"?new _n(Tt,[xt]):xt}if(M!==null&&typeof M!="string"&&typeof M!="boolean"&&typeof M!="number"||(M=["literal",M]),Array.isArray(M)){if(M.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ae=M[0];if(typeof ae!="string")return this.error("Expression name must be a string, but found "+typeof ae+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var _e=this.registry[ae];if(_e){var Ee=_e.parse(M,this);if(!Ee)return null;if(this.expectedType){var je=this.expectedType,Qe=Ee.type;if(je.kind!=="string"&&je.kind!=="number"&&je.kind!=="boolean"&&je.kind!=="object"&&je.kind!=="array"||Qe.kind!=="value")if(je.kind!=="color"&&je.kind!=="formatted"&&je.kind!=="resolvedImage"||Qe.kind!=="value"&&Qe.kind!=="string"){if(this.checkSubtype(je,Qe))return null}else Ee=Z(Ee,je,O.typeAnnotation||"coerce");else Ee=Z(Ee,je,O.typeAnnotation||"assert")}if(!(Ee instanceof dr)&&Ee.type.kind!=="resolvedImage"&&gr(Ee)){var st=new jn;try{Ee=new dr(Ee.type,Ee.evaluate(st))}catch(xt){return this.error(xt.message),null}}return Ee}return this.error('Unknown expression "'+ae+'". If you wanted a literal array, use ["literal", [...]].',0)}return M===void 0?this.error("'undefined' value invalid. Use null instead."):typeof M=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof M+" instead.")},ir.prototype.concat=function(M,O,Z){var ae=typeof M=="number"?this.path.concat(M):this.path,_e=Z?this.scope.concat(Z):this.scope;return new ir(this.registry,ae,O||null,_e,this.errors)},ir.prototype.error=function(M){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];var ae=""+this.key+O.map(function(_e){return"["+_e+"]"}).join("");this.errors.push(new Lt(ae,M))},ir.prototype.checkSubtype=function(M,O){var Z=Un(M,O);return Z&&this.error(Z),Z};var Ur=function(M,O,Z){this.type=M,this.input=O,this.labels=[],this.outputs=[];for(var ae=0,_e=Z;ae<_e.length;ae+=1){var Ee=_e[ae],je=Ee[0],Qe=Ee[1];this.labels.push(je),this.outputs.push(Qe)}};function Sr(M,O,Z){return M*(1-Z)+O*Z}Ur.parse=function(M,O){if(M.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return O.error("Expected an even number of arguments.");var Z=O.parse(M[1],1,kt);if(!Z)return null;var ae=[],_e=null;O.expectedType&&O.expectedType.kind!=="value"&&(_e=O.expectedType);for(var Ee=1;Ee<M.length;Ee+=2){var je=Ee===1?-1/0:M[Ee],Qe=M[Ee+1],st=Ee,xt=Ee+1;if(typeof je!="number")return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(ae.length&&ae[ae.length-1][0]>=je)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',st);var Tt=O.parse(Qe,xt,_e);if(!Tt)return null;_e=_e||Tt.type,ae.push([je,Tt])}return new Ur(_e,Z,ae)},Ur.prototype.evaluate=function(M){var O=this.labels,Z=this.outputs;if(O.length===1)return Z[0].evaluate(M);var ae=this.input.evaluate(M);if(ae<=O[0])return Z[0].evaluate(M);var _e=O.length;return ae>=O[_e-1]?Z[_e-1].evaluate(M):Z[Tr(O,ae)].evaluate(M)},Ur.prototype.eachChild=function(M){M(this.input);for(var O=0,Z=this.outputs;O<Z.length;O+=1)M(Z[O])},Ur.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Ur.prototype.serialize=function(){for(var M=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&M.push(this.labels[O]),M.push(this.outputs[O].serialize());return M};var lr=Object.freeze({__proto__:null,number:Sr,color:function(M,O,Z){return new sn(Sr(M.r,O.r,Z),Sr(M.g,O.g,Z),Sr(M.b,O.b,Z),Sr(M.a,O.a,Z))},array:function(M,O,Z){return M.map(function(ae,_e){return Sr(ae,O[_e],Z)})}}),Lr=.95047,Rr=1.08883,li=4/29,Mi=6/29,Pi=3*Mi*Mi,Ea=Math.PI/180,Ui=180/Math.PI;function vi(M){return M>.008856451679035631?Math.pow(M,.3333333333333333):M/Pi+li}function La(M){return M>Mi?M*M*M:Pi*(M-li)}function no(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,.4166666666666667)-.055)}function Zo(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function Wo(M){var O=Zo(M.r),Z=Zo(M.g),ae=Zo(M.b),_e=vi((.4124564*O+.3575761*Z+.1804375*ae)/Lr),Ee=vi((.2126729*O+.7151522*Z+.072175*ae)/1);return{l:116*Ee-16,a:500*(_e-Ee),b:200*(Ee-vi((.0193339*O+.119192*Z+.9503041*ae)/Rr)),alpha:M.a}}function ol(M){var O=(M.l+16)/116,Z=isNaN(M.a)?O:O+M.a/500,ae=isNaN(M.b)?O:O-M.b/200;return O=1*La(O),Z=Lr*La(Z),ae=Rr*La(ae),new sn(no(3.2404542*Z-1.5371385*O-.4985314*ae),no(-.969266*Z+1.8760108*O+.041556*ae),no(.0556434*Z-.2040259*O+1.0572252*ae),M.alpha)}function Hs(M,O,Z){var ae=O-M;return M+Z*(ae>180||ae<-180?ae-360*Math.round(ae/360):ae)}var Yo={forward:Wo,reverse:ol,interpolate:function(M,O,Z){return{l:Sr(M.l,O.l,Z),a:Sr(M.a,O.a,Z),b:Sr(M.b,O.b,Z),alpha:Sr(M.alpha,O.alpha,Z)}}},Ta={forward:function(M){var O=Wo(M),Z=O.l,ae=O.a,_e=O.b,Ee=Math.atan2(_e,ae)*Ui;return{h:Ee<0?Ee+360:Ee,c:Math.sqrt(ae*ae+_e*_e),l:Z,alpha:M.a}},reverse:function(M){var O=M.h*Ea,Z=M.c;return ol({l:M.l,a:Math.cos(O)*Z,b:Math.sin(O)*Z,alpha:M.alpha})},interpolate:function(M,O,Z){return{h:Hs(M.h,O.h,Z),c:Sr(M.c,O.c,Z),l:Sr(M.l,O.l,Z),alpha:Sr(M.alpha,O.alpha,Z)}}},qs=Object.freeze({__proto__:null,lab:Yo,hcl:Ta}),zi=function(M,O,Z,ae,_e){this.type=M,this.operator=O,this.interpolation=Z,this.input=ae,this.labels=[],this.outputs=[];for(var Ee=0,je=_e;Ee<je.length;Ee+=1){var Qe=je[Ee],st=Qe[0],xt=Qe[1];this.labels.push(st),this.outputs.push(xt)}};function us(M,O,Z,ae){var _e=ae-Z,Ee=M-Z;return _e===0?0:O===1?Ee/_e:(Math.pow(O,Ee)-1)/(Math.pow(O,_e)-1)}zi.interpolationFactor=function(M,O,Z,ae){var _e=0;if(M.name==="exponential")_e=us(O,M.base,Z,ae);else if(M.name==="linear")_e=us(O,1,Z,ae);else if(M.name==="cubic-bezier"){var Ee=M.controlPoints;_e=new d(Ee[0],Ee[1],Ee[2],Ee[3]).solve(us(O,1,Z,ae))}return _e},zi.parse=function(M,O){var Z=M[0],ae=M[1],_e=M[2],Ee=M.slice(3);if(!Array.isArray(ae)||ae.length===0)return O.error("Expected an interpolation type expression.",1);if(ae[0]==="linear")ae={name:"linear"};else if(ae[0]==="exponential"){var je=ae[1];if(typeof je!="number")return O.error("Exponential interpolation requires a numeric base.",1,1);ae={name:"exponential",base:je}}else{if(ae[0]!=="cubic-bezier")return O.error("Unknown interpolation type "+String(ae[0]),1,0);var Qe=ae.slice(1);if(Qe.length!==4||Qe.some(function(Pn){return typeof Pn!="number"||Pn<0||Pn>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ae={name:"cubic-bezier",controlPoints:Qe}}if(M.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(!(_e=O.parse(_e,2,kt)))return null;var st=[],xt=null;Z==="interpolate-hcl"||Z==="interpolate-lab"?xt=It:O.expectedType&&O.expectedType.kind!=="value"&&(xt=O.expectedType);for(var Tt=0;Tt<Ee.length;Tt+=2){var jt=Ee[Tt],Ht=Ee[Tt+1],Vt=Tt+3,on=Tt+4;if(typeof jt!="number")return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Vt);if(st.length&&st[st.length-1][0]>=jt)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Vt);var vn=O.parse(Ht,on,xt);if(!vn)return null;xt=xt||vn.type,st.push([jt,vn])}return xt.kind==="number"||xt.kind==="color"||xt.kind==="array"&&xt.itemType.kind==="number"&&typeof xt.N=="number"?new zi(xt,Z,ae,_e,st):O.error("Type "+Kt(xt)+" is not interpolatable.")},zi.prototype.evaluate=function(M){var O=this.labels,Z=this.outputs;if(O.length===1)return Z[0].evaluate(M);var ae=this.input.evaluate(M);if(ae<=O[0])return Z[0].evaluate(M);var _e=O.length;if(ae>=O[_e-1])return Z[_e-1].evaluate(M);var Ee=Tr(O,ae),je=O[Ee],Qe=O[Ee+1],st=zi.interpolationFactor(this.interpolation,ae,je,Qe),xt=Z[Ee].evaluate(M),Tt=Z[Ee+1].evaluate(M);return this.operator==="interpolate"?lr[this.type.kind.toLowerCase()](xt,Tt,st):this.operator==="interpolate-hcl"?Ta.reverse(Ta.interpolate(Ta.forward(xt),Ta.forward(Tt),st)):Yo.reverse(Yo.interpolate(Yo.forward(xt),Yo.forward(Tt),st))},zi.prototype.eachChild=function(M){M(this.input);for(var O=0,Z=this.outputs;O<Z.length;O+=1)M(Z[O])},zi.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},zi.prototype.serialize=function(){var M;M=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,M,this.input.serialize()],Z=0;Z<this.labels.length;Z++)O.push(this.labels[Z],this.outputs[Z].serialize());return O};var ma=function(M,O){this.type=M,this.args=O};ma.parse=function(M,O){if(M.length<2)return O.error("Expectected at least one argument.");var Z=null,ae=O.expectedType;ae&&ae.kind!=="value"&&(Z=ae);for(var _e=[],Ee=0,je=M.slice(1);Ee<je.length;Ee+=1){var Qe=je[Ee],st=O.parse(Qe,1+_e.length,Z,void 0,{typeAnnotation:"omit"});if(!st)return null;Z=Z||st.type,_e.push(st)}var xt=ae&&_e.some(function(Tt){return Un(ae,Tt.type)});return new ma(xt?Dt:Z,_e)},ma.prototype.evaluate=function(M){for(var O,Z=null,ae=0,_e=0,Ee=this.args;_e<Ee.length&&(ae++,(Z=Ee[_e].evaluate(M))&&Z instanceof Zn&&!Z.available&&(O||(O=Z.name),Z=null,ae===this.args.length&&(Z=O)),Z===null);_e+=1);return Z},ma.prototype.eachChild=function(M){this.args.forEach(M)},ma.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},ma.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(O){M.push(O.serialize())}),M};var ka=function(M,O){this.type=O.type,this.bindings=[].concat(M),this.result=O};ka.prototype.evaluate=function(M){return this.result.evaluate(M)},ka.prototype.eachChild=function(M){for(var O=0,Z=this.bindings;O<Z.length;O+=1)M(Z[O][1]);M(this.result)},ka.parse=function(M,O){if(M.length<4)return O.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var Z=[],ae=1;ae<M.length-1;ae+=2){var _e=M[ae];if(typeof _e!="string")return O.error("Expected string, but found "+typeof _e+" instead.",ae);if(/[^a-zA-Z0-9_]/.test(_e))return O.error("Variable names must contain only alphanumeric characters or '_'.",ae);var Ee=O.parse(M[ae+1],ae+1);if(!Ee)return null;Z.push([_e,Ee])}var je=O.parse(M[M.length-1],M.length-1,O.expectedType,Z);return je?new ka(Z,je):null},ka.prototype.outputDefined=function(){return this.result.outputDefined()},ka.prototype.serialize=function(){for(var M=["let"],O=0,Z=this.bindings;O<Z.length;O+=1){var ae=Z[O],_e=ae[0],Ee=ae[1];M.push(_e,Ee.serialize())}return M.push(this.result.serialize()),M};var mo=function(M,O,Z){this.type=M,this.index=O,this.input=Z};mo.parse=function(M,O){if(M.length!==3)return O.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Z=O.parse(M[1],1,kt),ae=O.parse(M[2],2,yn(O.expectedType||Dt));if(!Z||!ae)return null;var _e=ae.type;return new mo(_e.itemType,Z,ae)},mo.prototype.evaluate=function(M){var O=this.index.evaluate(M),Z=this.input.evaluate(M);if(O<0)throw new Yn("Array index out of bounds: "+O+" < 0.");if(O>=Z.length)throw new Yn("Array index out of bounds: "+O+" > "+(Z.length-1)+".");if(O!==Math.floor(O))throw new Yn("Array index must be an integer, but found "+O+" instead.");return Z[O]},mo.prototype.eachChild=function(M){M(this.index),M(this.input)},mo.prototype.outputDefined=function(){return!1},mo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Qr=function(M,O){this.type=Ot,this.needle=M,this.haystack=O};Qr.parse=function(M,O){if(M.length!==3)return O.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Z=O.parse(M[1],1,Dt),ae=O.parse(M[2],2,Dt);return Z&&ae?xn(Z.type,[Ot,wt,kt,mt,Dt])?new Qr(Z,ae):O.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Z.type)+" instead"):null},Qr.prototype.evaluate=function(M){var O=this.needle.evaluate(M),Z=this.haystack.evaluate(M);if(!Z)return!1;if(!dn(O,["boolean","string","number","null"]))throw new Yn("Expected first argument to be of type boolean, string, number or null, but found "+Kt($n(O))+" instead.");if(!dn(Z,["string","array"]))throw new Yn("Expected second argument to be of type array or string, but found "+Kt($n(Z))+" instead.");return Z.indexOf(O)>=0},Qr.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},Qr.prototype.outputDefined=function(){return!0},Qr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var yo=function(M,O,Z){this.type=kt,this.needle=M,this.haystack=O,this.fromIndex=Z};yo.parse=function(M,O){if(M.length<=2||M.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Z=O.parse(M[1],1,Dt),ae=O.parse(M[2],2,Dt);if(!Z||!ae)return null;if(!xn(Z.type,[Ot,wt,kt,mt,Dt]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Z.type)+" instead");if(M.length===4){var _e=O.parse(M[3],3,kt);return _e?new yo(Z,ae,_e):null}return new yo(Z,ae)},yo.prototype.evaluate=function(M){var O=this.needle.evaluate(M),Z=this.haystack.evaluate(M);if(!dn(O,["boolean","string","number","null"]))throw new Yn("Expected first argument to be of type boolean, string, number or null, but found "+Kt($n(O))+" instead.");if(!dn(Z,["string","array"]))throw new Yn("Expected second argument to be of type array or string, but found "+Kt($n(Z))+" instead.");if(this.fromIndex){var ae=this.fromIndex.evaluate(M);return Z.indexOf(O,ae)}return Z.indexOf(O)},yo.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ca=function(M,O,Z,ae,_e,Ee){this.inputType=M,this.type=O,this.input=Z,this.cases=ae,this.outputs=_e,this.otherwise=Ee};Ca.parse=function(M,O){if(M.length<5)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return O.error("Expected an even number of arguments.");var Z,ae;O.expectedType&&O.expectedType.kind!=="value"&&(ae=O.expectedType);for(var _e={},Ee=[],je=2;je<M.length-1;je+=2){var Qe=M[je],st=M[je+1];Array.isArray(Qe)||(Qe=[Qe]);var xt=O.concat(je);if(Qe.length===0)return xt.error("Expected at least one branch label.");for(var Tt=0,jt=Qe;Tt<jt.length;Tt+=1){var Ht=jt[Tt];if(typeof Ht!="number"&&typeof Ht!="string")return xt.error("Branch labels must be numbers or strings.");if(typeof Ht=="number"&&Math.abs(Ht)>Number.MAX_SAFE_INTEGER)return xt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ht=="number"&&Math.floor(Ht)!==Ht)return xt.error("Numeric branch labels must be integer values.");if(Z){if(xt.checkSubtype(Z,$n(Ht)))return null}else Z=$n(Ht);if(_e[String(Ht)]!==void 0)return xt.error("Branch labels must be unique.");_e[String(Ht)]=Ee.length}var Vt=O.parse(st,je,ae);if(!Vt)return null;ae=ae||Vt.type,Ee.push(Vt)}var on=O.parse(M[1],1,Dt);if(!on)return null;var vn=O.parse(M[M.length-1],M.length-1,ae);return vn?on.type.kind!=="value"&&O.concat(1).checkSubtype(Z,on.type)?null:new Ca(Z,ae,on,_e,Ee,vn):null},Ca.prototype.evaluate=function(M){var O=this.input.evaluate(M);return($n(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise).evaluate(M)},Ca.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},Ca.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},Ca.prototype.serialize=function(){for(var M=this,O=["match",this.input.serialize()],Z=[],ae={},_e=0,Ee=Object.keys(this.cases).sort();_e<Ee.length;_e+=1){var je=Ee[_e];(jt=ae[this.cases[je]])===void 0?(ae[this.cases[je]]=Z.length,Z.push([this.cases[je],[je]])):Z[jt][1].push(je)}for(var Qe=function(Vt){return M.inputType.kind==="number"?Number(Vt):Vt},st=0,xt=Z;st<xt.length;st+=1){var Tt=xt[st],jt=Tt[0],Ht=Tt[1];Ht.length===1?O.push(Qe(Ht[0])):O.push(Ht.map(Qe)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var Ua=function(M,O,Z){this.type=M,this.branches=O,this.otherwise=Z};Ua.parse=function(M,O){if(M.length<4)return O.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return O.error("Expected an odd number of arguments.");var Z;O.expectedType&&O.expectedType.kind!=="value"&&(Z=O.expectedType);for(var ae=[],_e=1;_e<M.length-1;_e+=2){var Ee=O.parse(M[_e],_e,Ot);if(!Ee)return null;var je=O.parse(M[_e+1],_e+1,Z);if(!je)return null;ae.push([Ee,je]),Z=Z||je.type}var Qe=O.parse(M[M.length-1],M.length-1,Z);return Qe?new Ua(Z,ae,Qe):null},Ua.prototype.evaluate=function(M){for(var O=0,Z=this.branches;O<Z.length;O+=1){var ae=Z[O],_e=ae[0],Ee=ae[1];if(_e.evaluate(M))return Ee.evaluate(M)}return this.otherwise.evaluate(M)},Ua.prototype.eachChild=function(M){for(var O=0,Z=this.branches;O<Z.length;O+=1){var ae=Z[O],_e=ae[0],Ee=ae[1];M(_e),M(Ee)}M(this.otherwise)},Ua.prototype.outputDefined=function(){return this.branches.every(function(M){return M[0],M[1].outputDefined()})&&this.otherwise.outputDefined()},Ua.prototype.serialize=function(){var M=["case"];return this.eachChild(function(O){M.push(O.serialize())}),M};var Xa=function(M,O,Z,ae){this.type=M,this.input=O,this.beginIndex=Z,this.endIndex=ae};function cs(M,O){return M==="=="||M==="!="?O.kind==="boolean"||O.kind==="string"||O.kind==="number"||O.kind==="null"||O.kind==="value":O.kind==="string"||O.kind==="number"||O.kind==="value"}function sl(M,O,Z,ae){return ae.compare(O,Z)===0}function ro(M,O,Z){var ae=M!=="=="&&M!=="!=";return function(){function _e(Ee,je,Qe){this.type=Ot,this.lhs=Ee,this.rhs=je,this.collator=Qe,this.hasUntypedArgument=Ee.type.kind==="value"||je.type.kind==="value"}return _e.parse=function(Ee,je){if(Ee.length!==3&&Ee.length!==4)return je.error("Expected two or three arguments.");var Qe=Ee[0],st=je.parse(Ee[1],1,Dt);if(!st)return null;if(!cs(Qe,st.type))return je.concat(1).error('"'+Qe+`" comparisons are not supported for type '`+Kt(st.type)+"'.");var xt=je.parse(Ee[2],2,Dt);if(!xt)return null;if(!cs(Qe,xt.type))return je.concat(2).error('"'+Qe+`" comparisons are not supported for type '`+Kt(xt.type)+"'.");if(st.type.kind!==xt.type.kind&&st.type.kind!=="value"&&xt.type.kind!=="value")return je.error("Cannot compare types '"+Kt(st.type)+"' and '"+Kt(xt.type)+"'.");ae&&(st.type.kind==="value"&&xt.type.kind!=="value"?st=new ur(xt.type,[st]):st.type.kind!=="value"&&xt.type.kind==="value"&&(xt=new ur(st.type,[xt])));var Tt=null;if(Ee.length===4){if(st.type.kind!=="string"&&xt.type.kind!=="string"&&st.type.kind!=="value"&&xt.type.kind!=="value")return je.error("Cannot use collator to compare non-string types.");if(!(Tt=je.parse(Ee[3],3,qt)))return null}return new _e(st,xt,Tt)},_e.prototype.evaluate=function(Ee){var je=this.lhs.evaluate(Ee),Qe=this.rhs.evaluate(Ee);if(ae&&this.hasUntypedArgument){var st=$n(je),xt=$n(Qe);if(st.kind!==xt.kind||st.kind!=="string"&&st.kind!=="number")throw new Yn('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+st.kind+", "+xt.kind+") instead.")}if(this.collator&&!ae&&this.hasUntypedArgument){var Tt=$n(je),jt=$n(Qe);if(Tt.kind!=="string"||jt.kind!=="string")return O(Ee,je,Qe)}return this.collator?Z(Ee,je,Qe,this.collator.evaluate(Ee)):O(Ee,je,Qe)},_e.prototype.eachChild=function(Ee){Ee(this.lhs),Ee(this.rhs),this.collator&&Ee(this.collator)},_e.prototype.outputDefined=function(){return!0},_e.prototype.serialize=function(){var Ee=[M];return this.eachChild(function(je){Ee.push(je.serialize())}),Ee},_e}()}Xa.parse=function(M,O){if(M.length<=2||M.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Z=O.parse(M[1],1,Dt),ae=O.parse(M[2],2,kt);if(!Z||!ae)return null;if(!xn(Z.type,[yn(Dt),wt,Dt]))return O.error("Expected first argument to be of type array or string, but found "+Kt(Z.type)+" instead");if(M.length===4){var _e=O.parse(M[3],3,kt);return _e?new Xa(Z.type,Z,ae,_e):null}return new Xa(Z.type,Z,ae)},Xa.prototype.evaluate=function(M){var O=this.input.evaluate(M),Z=this.beginIndex.evaluate(M);if(!dn(O,["string","array"]))throw new Yn("Expected first argument to be of type array or string, but found "+Kt($n(O))+" instead.");if(this.endIndex){var ae=this.endIndex.evaluate(M);return O.slice(Z,ae)}return O.slice(Z)},Xa.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},Xa.prototype.outputDefined=function(){return!1},Xa.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ll=ro("==",function(M,O,Z){return O===Z},sl),ul=ro("!=",function(M,O,Z){return O!==Z},function(M,O,Z,ae){return!sl(0,O,Z,ae)}),yl=ro("<",function(M,O,Z){return O<Z},function(M,O,Z,ae){return ae.compare(O,Z)<0}),Gs=ro(">",function(M,O,Z){return O>Z},function(M,O,Z,ae){return ae.compare(O,Z)>0}),cl=ro("<=",function(M,O,Z){return O<=Z},function(M,O,Z,ae){return ae.compare(O,Z)<=0}),Zs=ro(">=",function(M,O,Z){return O>=Z},function(M,O,Z,ae){return ae.compare(O,Z)>=0}),io=function(M,O,Z,ae,_e){this.type=wt,this.number=M,this.locale=O,this.currency=Z,this.minFractionDigits=ae,this.maxFractionDigits=_e};io.parse=function(M,O){if(M.length!==3)return O.error("Expected two arguments.");var Z=O.parse(M[1],1,kt);if(!Z)return null;var ae=M[2];if(typeof ae!="object"||Array.isArray(ae))return O.error("NumberFormat options argument must be an object.");var _e=null;if(ae.locale&&!(_e=O.parse(ae.locale,1,wt)))return null;var Ee=null;if(ae.currency&&!(Ee=O.parse(ae.currency,1,wt)))return null;var je=null;if(ae["min-fraction-digits"]&&!(je=O.parse(ae["min-fraction-digits"],1,kt)))return null;var Qe=null;return ae["max-fraction-digits"]&&!(Qe=O.parse(ae["max-fraction-digits"],1,kt))?null:new io(Z,_e,Ee,je,Qe)},io.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},io.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},io.prototype.outputDefined=function(){return!1},io.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var ao=function(M){this.type=kt,this.input=M};ao.parse=function(M,O){if(M.length!==2)return O.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var Z=O.parse(M[1],1);return Z?Z.type.kind!=="array"&&Z.type.kind!=="string"&&Z.type.kind!=="value"?O.error("Expected argument of type string or array, but found "+Kt(Z.type)+" instead."):new ao(Z):null},ao.prototype.evaluate=function(M){var O=this.input.evaluate(M);if(typeof O=="string"||Array.isArray(O))return O.length;throw new Yn("Expected value to be of type string or array, but found "+Kt($n(O))+" instead.")},ao.prototype.eachChild=function(M){M(this.input)},ao.prototype.outputDefined=function(){return!1},ao.prototype.serialize=function(){var M=["length"];return this.eachChild(function(O){M.push(O.serialize())}),M};var Xo={"==":ll,"!=":ul,">":Gs,"<":yl,">=":Zs,"<=":cl,array:ur,at:mo,boolean:ur,case:Ua,coalesce:ma,collator:ar,format:Gt,image:tn,in:Qr,"index-of":yo,interpolate:zi,"interpolate-hcl":zi,"interpolate-lab":zi,length:ao,let:ka,literal:dr,match:Ca,number:ur,"number-format":io,object:ur,slice:Xa,step:Ur,string:ur,"to-boolean":_n,"to-color":_n,"to-number":_n,"to-string":_n,var:or,within:Hn};function oo(M,O){var Z=O[0],ae=O[1],_e=O[2],Ee=O[3];Z=Z.evaluate(M),ae=ae.evaluate(M),_e=_e.evaluate(M);var je=Ee?Ee.evaluate(M):1,Qe=Fn(Z,ae,_e,je);if(Qe)throw new Yn(Qe);return new sn(Z/255*je,ae/255*je,_e/255*je,je)}function Ws(M,O){return M in O}function Ys(M,O){var Z=O[M];return Z===void 0?null:Z}function Oo(M){return{type:M}}function Es(M){return{result:"success",value:M}}function xo(M){return{result:"error",value:M}}function Jo(M){return M["property-type"]==="data-driven"||M["property-type"]==="cross-faded-data-driven"}function Io(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function so(M){return!!M.expression&&M.expression.interpolated}function ei(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":M===null?"null":typeof M}function bo(M){return typeof M=="object"&&M!==null&&!Array.isArray(M)}function xl(M){return M}function Ls(M,O){var Z,ae,_e,Ee=O.type==="color",je=M.stops&&typeof M.stops[0][0]=="object",Qe=je||M.property!==void 0,st=je||!Qe,xt=M.type||(so(O)?"exponential":"interval");if(Ee&&((M=ut({},M)).stops&&(M.stops=M.stops.map(function(hr){return[hr[0],sn.parse(hr[1])]})),M.default?M.default=sn.parse(M.default):M.default=sn.parse(O.default)),M.colorSpace&&M.colorSpace!=="rgb"&&!qs[M.colorSpace])throw new Error("Unknown color space: "+M.colorSpace);if(xt==="exponential")Z=Pa;else if(xt==="interval")Z=Ko;else if(xt==="categorical"){Z=Ro,ae=Object.create(null);for(var Tt=0,jt=M.stops;Tt<jt.length;Tt+=1){var Ht=jt[Tt];ae[Ht[0]]=Ht[1]}_e=typeof M.stops[0][0]}else{if(xt!=="identity")throw new Error('Unknown function type "'+xt+'"');Z=Xs}if(je){for(var Vt={},on=[],vn=0;vn<M.stops.length;vn++){var Pn=M.stops[vn],Cn=Pn[0].zoom;Vt[Cn]===void 0&&(Vt[Cn]={zoom:Cn,type:M.type,property:M.property,default:M.default,stops:[]},on.push(Cn)),Vt[Cn].stops.push([Pn[0].value,Pn[1]])}for(var Bn=[],Nn=0,Wn=on;Nn<Wn.length;Nn+=1){var Kn=Wn[Nn];Bn.push([Vt[Kn].zoom,Ls(Vt[Kn],O)])}var tr={name:"linear"};return{kind:"composite",interpolationType:tr,interpolationFactor:zi.interpolationFactor.bind(void 0,tr),zoomStops:Bn.map(function(hr){return hr[0]}),evaluate:function(hr,wr){var Er=hr.zoom;return Pa({stops:Bn,base:M.base},O,Er).evaluate(Er,wr)}}}if(st){var xr=xt==="exponential"?{name:"exponential",base:M.base!==void 0?M.base:1}:null;return{kind:"camera",interpolationType:xr,interpolationFactor:zi.interpolationFactor.bind(void 0,xr),zoomStops:M.stops.map(function(hr){return hr[0]}),evaluate:function(hr){var wr=hr.zoom;return Z(M,O,wr,ae,_e)}}}return{kind:"source",evaluate:function(hr,wr){var Er=wr&&wr.properties?wr.properties[M.property]:void 0;return Er===void 0?fs(M.default,O.default):Z(M,O,Er,ae,_e)}}}function fs(M,O,Z){return M!==void 0?M:O!==void 0?O:Z!==void 0?Z:void 0}function Ro(M,O,Z,ae,_e){return fs(typeof Z===_e?ae[Z]:void 0,M.default,O.default)}function Ko(M,O,Z){if(ei(Z)!=="number")return fs(M.default,O.default);var ae=M.stops.length;if(ae===1||Z<=M.stops[0][0])return M.stops[0][1];if(Z>=M.stops[ae-1][0])return M.stops[ae-1][1];var _e=Tr(M.stops.map(function(Ee){return Ee[0]}),Z);return M.stops[_e][1]}function Pa(M,O,Z){var ae=M.base!==void 0?M.base:1;if(ei(Z)!=="number")return fs(M.default,O.default);var _e=M.stops.length;if(_e===1||Z<=M.stops[0][0])return M.stops[0][1];if(Z>=M.stops[_e-1][0])return M.stops[_e-1][1];var Ee=Tr(M.stops.map(function(jt){return jt[0]}),Z),je=function(jt,Ht,Vt,on){var vn=on-Vt,Pn=jt-Vt;return vn===0?0:Ht===1?Pn/vn:(Math.pow(Ht,Pn)-1)/(Math.pow(Ht,vn)-1)}(Z,ae,M.stops[Ee][0],M.stops[Ee+1][0]),Qe=M.stops[Ee][1],st=M.stops[Ee+1][1],xt=lr[O.type]||xl;if(M.colorSpace&&M.colorSpace!=="rgb"){var Tt=qs[M.colorSpace];xt=function(jt,Ht){return Tt.reverse(Tt.interpolate(Tt.forward(jt),Tt.forward(Ht),je))}}return typeof Qe.evaluate=="function"?{evaluate:function(){for(var jt=[],Ht=arguments.length;Ht--;)jt[Ht]=arguments[Ht];var Vt=Qe.evaluate.apply(void 0,jt),on=st.evaluate.apply(void 0,jt);if(Vt!==void 0&&on!==void 0)return xt(Vt,on,je)}}:xt(Qe,st,je)}function Xs(M,O,Z){return O.type==="color"?Z=sn.parse(Z):O.type==="formatted"?Z=Dn.fromString(Z.toString()):O.type==="resolvedImage"?Z=Zn.fromString(Z.toString()):ei(Z)===O.type||O.type==="enum"&&O.values[Z]||(Z=void 0),fs(Z,M.default,O.default)}qn.register(Xo,{error:[{kind:"error"},[wt],function(M,O){var Z=O[0];throw new Yn(Z.evaluate(M))}],typeof:[wt,[Dt],function(M,O){return Kt($n(O[0].evaluate(M)))}],"to-rgba":[yn(kt,4),[It],function(M,O){return O[0].evaluate(M).toArray()}],rgb:[It,[kt,kt,kt],oo],rgba:[It,[kt,kt,kt,kt],oo],has:{type:Ot,overloads:[[[wt],function(M,O){return Ws(O[0].evaluate(M),M.properties())}],[[wt,Nt],function(M,O){var Z=O[0],ae=O[1];return Ws(Z.evaluate(M),ae.evaluate(M))}]]},get:{type:Dt,overloads:[[[wt],function(M,O){return Ys(O[0].evaluate(M),M.properties())}],[[wt,Nt],function(M,O){var Z=O[0],ae=O[1];return Ys(Z.evaluate(M),ae.evaluate(M))}]]},"feature-state":[Dt,[wt],function(M,O){return Ys(O[0].evaluate(M),M.featureState||{})}],properties:[Nt,[],function(M){return M.properties()}],"geometry-type":[wt,[],function(M){return M.geometryType()}],id:[Dt,[],function(M){return M.id()}],zoom:[kt,[],function(M){return M.globals.zoom}],"heatmap-density":[kt,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[kt,[],function(M){return M.globals.lineProgress||0}],accumulated:[Dt,[],function(M){return M.globals.accumulated===void 0?null:M.globals.accumulated}],"+":[kt,Oo(kt),function(M,O){for(var Z=0,ae=0,_e=O;ae<_e.length;ae+=1)Z+=_e[ae].evaluate(M);return Z}],"*":[kt,Oo(kt),function(M,O){for(var Z=1,ae=0,_e=O;ae<_e.length;ae+=1)Z*=_e[ae].evaluate(M);return Z}],"-":{type:kt,overloads:[[[kt,kt],function(M,O){var Z=O[0],ae=O[1];return Z.evaluate(M)-ae.evaluate(M)}],[[kt],function(M,O){return-O[0].evaluate(M)}]]},"/":[kt,[kt,kt],function(M,O){var Z=O[0],ae=O[1];return Z.evaluate(M)/ae.evaluate(M)}],"%":[kt,[kt,kt],function(M,O){var Z=O[0],ae=O[1];return Z.evaluate(M)%ae.evaluate(M)}],ln2:[kt,[],function(){return Math.LN2}],pi:[kt,[],function(){return Math.PI}],e:[kt,[],function(){return Math.E}],"^":[kt,[kt,kt],function(M,O){var Z=O[0],ae=O[1];return Math.pow(Z.evaluate(M),ae.evaluate(M))}],sqrt:[kt,[kt],function(M,O){var Z=O[0];return Math.sqrt(Z.evaluate(M))}],log10:[kt,[kt],function(M,O){var Z=O[0];return Math.log(Z.evaluate(M))/Math.LN10}],ln:[kt,[kt],function(M,O){var Z=O[0];return Math.log(Z.evaluate(M))}],log2:[kt,[kt],function(M,O){var Z=O[0];return Math.log(Z.evaluate(M))/Math.LN2}],sin:[kt,[kt],function(M,O){var Z=O[0];return Math.sin(Z.evaluate(M))}],cos:[kt,[kt],function(M,O){var Z=O[0];return Math.cos(Z.evaluate(M))}],tan:[kt,[kt],function(M,O){var Z=O[0];return Math.tan(Z.evaluate(M))}],asin:[kt,[kt],function(M,O){var Z=O[0];return Math.asin(Z.evaluate(M))}],acos:[kt,[kt],function(M,O){var Z=O[0];return Math.acos(Z.evaluate(M))}],atan:[kt,[kt],function(M,O){var Z=O[0];return Math.atan(Z.evaluate(M))}],min:[kt,Oo(kt),function(M,O){return Math.min.apply(Math,O.map(function(Z){return Z.evaluate(M)}))}],max:[kt,Oo(kt),function(M,O){return Math.max.apply(Math,O.map(function(Z){return Z.evaluate(M)}))}],abs:[kt,[kt],function(M,O){var Z=O[0];return Math.abs(Z.evaluate(M))}],round:[kt,[kt],function(M,O){var Z=O[0].evaluate(M);return Z<0?-Math.round(-Z):Math.round(Z)}],floor:[kt,[kt],function(M,O){var Z=O[0];return Math.floor(Z.evaluate(M))}],ceil:[kt,[kt],function(M,O){var Z=O[0];return Math.ceil(Z.evaluate(M))}],"filter-==":[Ot,[wt,Dt],function(M,O){var Z=O[0],ae=O[1];return M.properties()[Z.value]===ae.value}],"filter-id-==":[Ot,[Dt],function(M,O){var Z=O[0];return M.id()===Z.value}],"filter-type-==":[Ot,[wt],function(M,O){var Z=O[0];return M.geometryType()===Z.value}],"filter-<":[Ot,[wt,Dt],function(M,O){var Z=O[0],ae=O[1],_e=M.properties()[Z.value],Ee=ae.value;return typeof _e==typeof Ee&&_e<Ee}],"filter-id-<":[Ot,[Dt],function(M,O){var Z=O[0],ae=M.id(),_e=Z.value;return typeof ae==typeof _e&&ae<_e}],"filter->":[Ot,[wt,Dt],function(M,O){var Z=O[0],ae=O[1],_e=M.properties()[Z.value],Ee=ae.value;return typeof _e==typeof Ee&&_e>Ee}],"filter-id->":[Ot,[Dt],function(M,O){var Z=O[0],ae=M.id(),_e=Z.value;return typeof ae==typeof _e&&ae>_e}],"filter-<=":[Ot,[wt,Dt],function(M,O){var Z=O[0],ae=O[1],_e=M.properties()[Z.value],Ee=ae.value;return typeof _e==typeof Ee&&_e<=Ee}],"filter-id-<=":[Ot,[Dt],function(M,O){var Z=O[0],ae=M.id(),_e=Z.value;return typeof ae==typeof _e&&ae<=_e}],"filter->=":[Ot,[wt,Dt],function(M,O){var Z=O[0],ae=O[1],_e=M.properties()[Z.value],Ee=ae.value;return typeof _e==typeof Ee&&_e>=Ee}],"filter-id->=":[Ot,[Dt],function(M,O){var Z=O[0],ae=M.id(),_e=Z.value;return typeof ae==typeof _e&&ae>=_e}],"filter-has":[Ot,[Dt],function(M,O){return O[0].value in M.properties()}],"filter-has-id":[Ot,[],function(M){return M.id()!==null&&M.id()!==void 0}],"filter-type-in":[Ot,[yn(wt)],function(M,O){return O[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[Ot,[yn(Dt)],function(M,O){return O[0].value.indexOf(M.id())>=0}],"filter-in-small":[Ot,[wt,yn(Dt)],function(M,O){var Z=O[0];return O[1].value.indexOf(M.properties()[Z.value])>=0}],"filter-in-large":[Ot,[wt,yn(Dt)],function(M,O){var Z=O[0],ae=O[1];return function(_e,Ee,je,Qe){for(;je<=Qe;){var st=je+Qe>>1;if(Ee[st]===_e)return!0;Ee[st]>_e?Qe=st-1:je=st+1}return!1}(M.properties()[Z.value],ae.value,0,ae.value.length-1)}],all:{type:Ot,overloads:[[[Ot,Ot],function(M,O){var Z=O[0],ae=O[1];return Z.evaluate(M)&&ae.evaluate(M)}],[Oo(Ot),function(M,O){for(var Z=0,ae=O;Z<ae.length;Z+=1)if(!ae[Z].evaluate(M))return!1;return!0}]]},any:{type:Ot,overloads:[[[Ot,Ot],function(M,O){var Z=O[0],ae=O[1];return Z.evaluate(M)||ae.evaluate(M)}],[Oo(Ot),function(M,O){for(var Z=0,ae=O;Z<ae.length;Z+=1)if(ae[Z].evaluate(M))return!0;return!1}]]},"!":[Ot,[Ot],function(M,O){return!O[0].evaluate(M)}],"is-supported-script":[Ot,[wt],function(M,O){var Z=O[0],ae=M.globals&&M.globals.isSupportedScript;return!ae||ae(Z.evaluate(M))}],upcase:[wt,[wt],function(M,O){return O[0].evaluate(M).toUpperCase()}],downcase:[wt,[wt],function(M,O){return O[0].evaluate(M).toLowerCase()}],concat:[wt,Oo(Dt),function(M,O){return O.map(function(Z){return mr(Z.evaluate(M))}).join("")}],"resolved-locale":[wt,[qt],function(M,O){return O[0].evaluate(M).resolvedLocale()}]});var hs=function(M,O){this.expression=M,this._warningHistory={},this._evaluator=new jn,this._defaultValue=O?function(Z){return Z.type==="color"&&bo(Z.default)?new sn(0,0,0,0):Z.type==="color"?sn.parse(Z.default)||null:Z.default===void 0?null:Z.default}(O):null,this._enumValues=O&&O.type==="enum"?O.values:null};function $o(M){return Array.isArray(M)&&M.length>0&&typeof M[0]=="string"&&M[0]in Xo}function ps(M,O){var Z=new ir(Xo,[],O?function(_e){var Ee={color:It,string:wt,number:kt,enum:wt,boolean:Ot,formatted:Xt,resolvedImage:cn};return _e.type==="array"?yn(Ee[_e.value]||Dt,_e.length):Ee[_e.type]}(O):void 0),ae=Z.parse(M,void 0,void 0,void 0,O&&O.type==="string"?{typeAnnotation:"coerce"}:void 0);return ae?Es(new hs(ae,O)):xo(Z.errors)}hs.prototype.evaluateWithoutErrorHandling=function(M,O,Z,ae,_e,Ee){return this._evaluator.globals=M,this._evaluator.feature=O,this._evaluator.featureState=Z,this._evaluator.canonical=ae,this._evaluator.availableImages=_e||null,this._evaluator.formattedSection=Ee,this.expression.evaluate(this._evaluator)},hs.prototype.evaluate=function(M,O,Z,ae,_e,Ee){this._evaluator.globals=M,this._evaluator.feature=O||null,this._evaluator.featureState=Z||null,this._evaluator.canonical=ae,this._evaluator.availableImages=_e||null,this._evaluator.formattedSection=Ee||null;try{var je=this.expression.evaluate(this._evaluator);if(je==null||typeof je=="number"&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new Yn("Expected value to be one of "+Object.keys(this._enumValues).map(function(Qe){return JSON.stringify(Qe)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch(Qe){return this._warningHistory[Qe.message]||(this._warningHistory[Qe.message]=!0,typeof console<"u"&&console.warn(Qe.message)),this._defaultValue}};var zo=function(M,O){this.kind=M,this._styleExpression=O,this.isStateDependent=M!=="constant"&&!rr(O.expression)};zo.prototype.evaluateWithoutErrorHandling=function(M,O,Z,ae,_e,Ee){return this._styleExpression.evaluateWithoutErrorHandling(M,O,Z,ae,_e,Ee)},zo.prototype.evaluate=function(M,O,Z,ae,_e,Ee){return this._styleExpression.evaluate(M,O,Z,ae,_e,Ee)};var Do=function(M,O,Z,ae){this.kind=M,this.zoomStops=Z,this._styleExpression=O,this.isStateDependent=M!=="camera"&&!rr(O.expression),this.interpolationType=ae};function Qo(M,O){if((M=ps(M,O)).result==="error")return M;var Z=M.value.expression,ae=Qn(Z);if(!ae&&!Jo(O))return xo([new Lt("","data expressions not supported")]);var _e=er(Z,["zoom"]);if(!_e&&!Io(O))return xo([new Lt("","zoom expressions not supported")]);var Ee=gs(Z);if(!Ee&&!_e)return xo([new Lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ee instanceof Lt)return xo([Ee]);if(Ee instanceof zi&&!so(O))return xo([new Lt("",'"interpolate" expressions cannot be used with this property')]);if(!Ee)return Es(new zo(ae?"constant":"source",M.value));var je=Ee instanceof zi?Ee.interpolation:void 0;return Es(new Do(ae?"camera":"composite",M.value,Ee.labels,je))}Do.prototype.evaluateWithoutErrorHandling=function(M,O,Z,ae,_e,Ee){return this._styleExpression.evaluateWithoutErrorHandling(M,O,Z,ae,_e,Ee)},Do.prototype.evaluate=function(M,O,Z,ae,_e,Ee){return this._styleExpression.evaluate(M,O,Z,ae,_e,Ee)},Do.prototype.interpolationFactor=function(M,O,Z){return this.interpolationType?zi.interpolationFactor(this.interpolationType,M,O,Z):0};var ds=function(M,O){this._parameters=M,this._specification=O,ut(this,Ls(this._parameters,this._specification))};function gs(M){var O=null;if(M instanceof ka)O=gs(M.result);else if(M instanceof ma)for(var Z=0,ae=M.args;Z<ae.length;Z+=1){var _e=ae[Z];if(O=gs(_e))break}else(M instanceof Ur||M instanceof zi)&&M.input instanceof qn&&M.input.name==="zoom"&&(O=M);return O instanceof Lt||M.eachChild(function(Ee){var je=gs(Ee);je instanceof Lt?O=je:!O&&je?O=new Lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):O&&je&&O!==je&&(O=new Lt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),O}function Oa(M){var O=M.key,Z=M.value,ae=M.valueSpec||{},_e=M.objectElementValidators||{},Ee=M.style,je=M.styleSpec,Qe=[],st=ei(Z);if(st!=="object")return[new Xe(O,Z,"object expected, "+st+" found")];for(var xt in Z){var Tt=xt.split(".")[0],jt=ae[Tt]||ae["*"],Ht=void 0;if(_e[Tt])Ht=_e[Tt];else if(ae[Tt])Ht=mi;else if(_e["*"])Ht=_e["*"];else{if(!ae["*"]){Qe.push(new Xe(O,Z[xt],'unknown property "'+xt+'"'));continue}Ht=mi}Qe=Qe.concat(Ht({key:(O&&O+".")+xt,value:Z[xt],valueSpec:jt,style:Ee,styleSpec:je,object:Z,objectKey:xt},Z))}for(var Vt in ae)_e[Vt]||ae[Vt].required&&ae[Vt].default===void 0&&Z[Vt]===void 0&&Qe.push(new Xe(O,Z,'missing required property "'+Vt+'"'));return Qe}function vs(M){var O=M.value,Z=M.valueSpec,ae=M.style,_e=M.styleSpec,Ee=M.key,je=M.arrayElementValidator||mi;if(ei(O)!=="array")return[new Xe(Ee,O,"array expected, "+ei(O)+" found")];if(Z.length&&O.length!==Z.length)return[new Xe(Ee,O,"array length "+Z.length+" expected, length "+O.length+" found")];if(Z["min-length"]&&O.length<Z["min-length"])return[new Xe(Ee,O,"array length at least "+Z["min-length"]+" expected, length "+O.length+" found")];var Qe={type:Z.value,values:Z.values};_e.$version<7&&(Qe.function=Z.function),ei(Z.value)==="object"&&(Qe=Z.value);for(var st=[],xt=0;xt<O.length;xt++)st=st.concat(je({array:O,arrayIndex:xt,value:O[xt],valueSpec:Qe,style:ae,styleSpec:_e,key:Ee+"["+xt+"]"}));return st}function ms(M){var O=M.key,Z=M.value,ae=M.valueSpec,_e=ei(Z);return _e==="number"&&Z!=Z&&(_e="NaN"),_e!=="number"?[new Xe(O,Z,"number expected, "+_e+" found")]:"minimum"in ae&&Z<ae.minimum?[new Xe(O,Z,Z+" is less than the minimum value "+ae.minimum)]:"maximum"in ae&&Z>ae.maximum?[new Xe(O,Z,Z+" is greater than the maximum value "+ae.maximum)]:[]}function Js(M){var O,Z,ae,_e=M.valueSpec,Ee=ct(M.value.type),je={},Qe=Ee!=="categorical"&&M.value.property===void 0,st=!Qe,xt=ei(M.value.stops)==="array"&&ei(M.value.stops[0])==="array"&&ei(M.value.stops[0][0])==="object",Tt=Oa({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Vt){if(Ee==="identity")return[new Xe(Vt.key,Vt.value,'identity function may not have a "stops" property')];var on=[],vn=Vt.value;return on=on.concat(vs({key:Vt.key,value:vn,valueSpec:Vt.valueSpec,style:Vt.style,styleSpec:Vt.styleSpec,arrayElementValidator:jt})),ei(vn)==="array"&&vn.length===0&&on.push(new Xe(Vt.key,vn,"array must have at least one stop")),on},default:function(Vt){return mi({key:Vt.key,value:Vt.value,valueSpec:_e,style:Vt.style,styleSpec:Vt.styleSpec})}}});return Ee==="identity"&&Qe&&Tt.push(new Xe(M.key,M.value,'missing required property "property"')),Ee==="identity"||M.value.stops||Tt.push(new Xe(M.key,M.value,'missing required property "stops"')),Ee==="exponential"&&M.valueSpec.expression&&!so(M.valueSpec)&&Tt.push(new Xe(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(st&&!Jo(M.valueSpec)?Tt.push(new Xe(M.key,M.value,"property functions not supported")):Qe&&!Io(M.valueSpec)&&Tt.push(new Xe(M.key,M.value,"zoom functions not supported"))),Ee!=="categorical"&&!xt||M.value.property!==void 0||Tt.push(new Xe(M.key,M.value,'"property" property is required')),Tt;function jt(Vt){var on=[],vn=Vt.value,Pn=Vt.key;if(ei(vn)!=="array")return[new Xe(Pn,vn,"array expected, "+ei(vn)+" found")];if(vn.length!==2)return[new Xe(Pn,vn,"array length 2 expected, length "+vn.length+" found")];if(xt){if(ei(vn[0])!=="object")return[new Xe(Pn,vn,"object expected, "+ei(vn[0])+" found")];if(vn[0].zoom===void 0)return[new Xe(Pn,vn,"object stop key must have zoom")];if(vn[0].value===void 0)return[new Xe(Pn,vn,"object stop key must have value")];if(ae&&ae>ct(vn[0].zoom))return[new Xe(Pn,vn[0].zoom,"stop zoom values must appear in ascending order")];ct(vn[0].zoom)!==ae&&(ae=ct(vn[0].zoom),Z=void 0,je={}),on=on.concat(Oa({key:Pn+"[0]",value:vn[0],valueSpec:{zoom:{}},style:Vt.style,styleSpec:Vt.styleSpec,objectElementValidators:{zoom:ms,value:Ht}}))}else on=on.concat(Ht({key:Pn+"[0]",value:vn[0],valueSpec:{},style:Vt.style,styleSpec:Vt.styleSpec},vn));return $o(Ct(vn[1]))?on.concat([new Xe(Pn+"[1]",vn[1],"expressions are not allowed in function stops.")]):on.concat(mi({key:Pn+"[1]",value:vn[1],valueSpec:_e,style:Vt.style,styleSpec:Vt.styleSpec}))}function Ht(Vt,on){var vn=ei(Vt.value),Pn=ct(Vt.value),Cn=Vt.value!==null?Vt.value:on;if(O){if(vn!==O)return[new Xe(Vt.key,Cn,vn+" stop domain type must match previous stop domain type "+O)]}else O=vn;if(vn!=="number"&&vn!=="string"&&vn!=="boolean")return[new Xe(Vt.key,Cn,"stop domain value must be a number, string, or boolean")];if(vn!=="number"&&Ee!=="categorical"){var Bn="number expected, "+vn+" found";return Jo(_e)&&Ee===void 0&&(Bn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xe(Vt.key,Cn,Bn)]}return Ee!=="categorical"||vn!=="number"||isFinite(Pn)&&Math.floor(Pn)===Pn?Ee!=="categorical"&&vn==="number"&&Z!==void 0&&Pn<Z?[new Xe(Vt.key,Cn,"stop domain values must appear in ascending order")]:(Z=Pn,Ee==="categorical"&&Pn in je?[new Xe(Vt.key,Cn,"stop domain values must be unique")]:(je[Pn]=!0,[])):[new Xe(Vt.key,Cn,"integer expected, found "+Pn)]}}function _o(M){var O=(M.expressionContext==="property"?Qo:ps)(Ct(M.value),M.valueSpec);if(O.result==="error")return O.value.map(function(ae){return new Xe(""+M.key+ae.key,M.value,ae.message)});var Z=O.value.expression||O.value._styleExpression.expression;if(M.expressionContext==="property"&&M.propertyKey==="text-font"&&!Z.outputDefined())return[new Xe(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if(M.expressionContext==="property"&&M.propertyType==="layout"&&!rr(Z))return[new Xe(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if(M.expressionContext==="filter"&&!rr(Z))return[new Xe(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&M.expressionContext.indexOf("cluster")===0){if(!er(Z,["zoom","feature-state"]))return[new Xe(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(M.expressionContext==="cluster-initial"&&!Qn(Z))return[new Xe(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cs(M){var O=M.key,Z=M.value,ae=M.valueSpec,_e=[];return Array.isArray(ae.values)?ae.values.indexOf(ct(Z))===-1&&_e.push(new Xe(O,Z,"expected one of ["+ae.values.join(", ")+"], "+JSON.stringify(Z)+" found")):Object.keys(ae.values).indexOf(ct(Z))===-1&&_e.push(new Xe(O,Z,"expected one of ["+Object.keys(ae.values).join(", ")+"], "+JSON.stringify(Z)+" found")),_e}function ys(M){if(M===!0||M===!1)return!0;if(!Array.isArray(M)||M.length===0)return!1;switch(M[0]){case"has":return M.length>=2&&M[1]!=="$id"&&M[1]!=="$type";case"in":return M.length>=3&&(typeof M[1]!="string"||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return M.length!==3||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var O=0,Z=M.slice(1);O<Z.length;O+=1){var ae=Z[O];if(!ys(ae)&&typeof ae!="boolean")return!1}return!0;default:return!0}}ds.deserialize=function(M){return new ds(M._parameters,M._specification)},ds.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var Ks={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xs(M){if(M==null)return{filter:function(){return!0},needGeometry:!1};ys(M)||(M=Bo(M));var O=ps(M,Ks);if(O.result==="error")throw new Error(O.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return{filter:function(Z,ae,_e){return O.value.evaluate(Z,ae,{},_e)},needGeometry:Fo(M)}}function es(M,O){return M<O?-1:M>O?1:0}function Fo(M){if(!Array.isArray(M))return!1;if(M[0]==="within")return!0;for(var O=1;O<M.length;O++)if(Fo(M[O]))return!0;return!1}function Bo(M){if(!M)return!0;var O,Z=M[0];return M.length<=1?Z!=="any":Z==="=="?ai(M[1],M[2],"=="):Z==="!="?Zi(ai(M[1],M[2],"==")):Z==="<"||Z===">"||Z==="<="||Z===">="?ai(M[1],M[2],Z):Z==="any"?(O=M.slice(1),["any"].concat(O.map(Bo))):Z==="all"?["all"].concat(M.slice(1).map(Bo)):Z==="none"?["all"].concat(M.slice(1).map(Bo).map(Zi)):Z==="in"?wo(M[1],M.slice(2)):Z==="!in"?Zi(wo(M[1],M.slice(2))):Z==="has"?To(M[1]):Z==="!has"?Zi(To(M[1])):Z!=="within"||M}function ai(M,O,Z){switch(M){case"$type":return["filter-type-"+Z,O];case"$id":return["filter-id-"+Z,O];default:return["filter-"+Z,M,O]}}function wo(M,O){if(O.length===0)return!1;switch(M){case"$type":return["filter-type-in",["literal",O]];case"$id":return["filter-id-in",["literal",O]];default:return O.length>200&&!O.some(function(Z){return typeof Z!=typeof O[0]})?["filter-in-large",M,["literal",O.sort(es)]]:["filter-in-small",M,["literal",O]]}}function To(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function Zi(M){return["!",M]}function Xr(M){return ys(Ct(M.value))?_o(ut({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Kr(M)}function Kr(M){var O=M.value,Z=M.key;if(ei(O)!=="array")return[new Xe(Z,O,"array expected, "+ei(O)+" found")];var ae,_e=M.styleSpec,Ee=[];if(O.length<1)return[new Xe(Z,O,"filter array must have at least 1 element")];switch(Ee=Ee.concat(Cs({key:Z+"[0]",value:O[0],valueSpec:_e.filter_operator,style:M.style,styleSpec:M.styleSpec})),ct(O[0])){case"<":case"<=":case">":case">=":O.length>=2&&ct(O[1])==="$type"&&Ee.push(new Xe(Z,O,'"$type" cannot be use with operator "'+O[0]+'"'));case"==":case"!=":O.length!==3&&Ee.push(new Xe(Z,O,'filter array for operator "'+O[0]+'" must have 3 elements'));case"in":case"!in":O.length>=2&&(ae=ei(O[1]))!=="string"&&Ee.push(new Xe(Z+"[1]",O[1],"string expected, "+ae+" found"));for(var je=2;je<O.length;je++)ae=ei(O[je]),ct(O[1])==="$type"?Ee=Ee.concat(Cs({key:Z+"["+je+"]",value:O[je],valueSpec:_e.geometry_type,style:M.style,styleSpec:M.styleSpec})):ae!=="string"&&ae!=="number"&&ae!=="boolean"&&Ee.push(new Xe(Z+"["+je+"]",O[je],"string, number, or boolean expected, "+ae+" found"));break;case"any":case"all":case"none":for(var Qe=1;Qe<O.length;Qe++)Ee=Ee.concat(Kr({key:Z+"["+Qe+"]",value:O[Qe],style:M.style,styleSpec:M.styleSpec}));break;case"has":case"!has":ae=ei(O[1]),O.length!==2?Ee.push(new Xe(Z,O,'filter array for "'+O[0]+'" operator must have 2 elements')):ae!=="string"&&Ee.push(new Xe(Z+"[1]",O[1],"string expected, "+ae+" found"));break;case"within":ae=ei(O[1]),O.length!==2?Ee.push(new Xe(Z,O,'filter array for "'+O[0]+'" operator must have 2 elements')):ae!=="object"&&Ee.push(new Xe(Z+"[1]",O[1],"object expected, "+ae+" found"))}return Ee}function lo(M,O){var Z=M.key,ae=M.style,_e=M.styleSpec,Ee=M.value,je=M.objectKey,Qe=_e[O+"_"+M.layerType];if(!Qe)return[];var st=je.match(/^(.*)-transition$/);if(O==="paint"&&st&&Qe[st[1]]&&Qe[st[1]].transition)return mi({key:Z,value:Ee,valueSpec:_e.transition,style:ae,styleSpec:_e});var xt,Tt=M.valueSpec||Qe[je];if(!Tt)return[new Xe(Z,Ee,'unknown property "'+je+'"')];if(ei(Ee)==="string"&&Jo(Tt)&&!Tt.tokens&&(xt=/^{([^}]+)}$/.exec(Ee)))return[new Xe(Z,Ee,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(xt[1])+" }`.")];var jt=[];return M.layerType==="symbol"&&(je==="text-field"&&ae&&!ae.glyphs&&jt.push(new Xe(Z,Ee,'use of "text-field" requires a style "glyphs" property')),je==="text-font"&&bo(Ct(Ee))&&ct(Ee.type)==="identity"&&jt.push(new Xe(Z,Ee,'"text-font" does not support identity functions'))),jt.concat(mi({key:M.key,value:Ee,valueSpec:Tt,style:ae,styleSpec:_e,expressionContext:"property",propertyType:O,propertyKey:je}))}function Ja(M){return lo(M,"paint")}function Ps(M){return lo(M,"layout")}function $s(M){var O=[],Z=M.value,ae=M.key,_e=M.style,Ee=M.styleSpec;Z.type||Z.ref||O.push(new Xe(ae,Z,'either "type" or "ref" is required'));var je,Qe=ct(Z.type),st=ct(Z.ref);if(Z.id)for(var xt=ct(Z.id),Tt=0;Tt<M.arrayIndex;Tt++){var jt=_e.layers[Tt];ct(jt.id)===xt&&O.push(new Xe(ae,Z.id,'duplicate layer id "'+Z.id+'", previously used at line '+jt.id.__line__))}if("ref"in Z)["type","source","source-layer","filter","layout"].forEach(function(on){on in Z&&O.push(new Xe(ae,Z[on],'"'+on+'" is prohibited for ref layers'))}),_e.layers.forEach(function(on){ct(on.id)===st&&(je=on)}),je?je.ref?O.push(new Xe(ae,Z.ref,"ref cannot reference another ref layer")):Qe=ct(je.type):O.push(new Xe(ae,Z.ref,'ref layer "'+st+'" not found'));else if(Qe!=="background")if(Z.source){var Ht=_e.sources&&_e.sources[Z.source],Vt=Ht&&ct(Ht.type);Ht?Vt==="vector"&&Qe==="raster"?O.push(new Xe(ae,Z.source,'layer "'+Z.id+'" requires a raster source')):Vt==="raster"&&Qe!=="raster"?O.push(new Xe(ae,Z.source,'layer "'+Z.id+'" requires a vector source')):Vt!=="vector"||Z["source-layer"]?Vt==="raster-dem"&&Qe!=="hillshade"?O.push(new Xe(ae,Z.source,"raster-dem source can only be used with layer type 'hillshade'.")):Qe!=="line"||!Z.paint||!Z.paint["line-gradient"]||Vt==="geojson"&&Ht.lineMetrics||O.push(new Xe(ae,Z,'layer "'+Z.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):O.push(new Xe(ae,Z,'layer "'+Z.id+'" must specify a "source-layer"')):O.push(new Xe(ae,Z.source,'source "'+Z.source+'" not found'))}else O.push(new Xe(ae,Z,'missing required property "source"'));return O=O.concat(Oa({key:ae,value:Z,valueSpec:Ee.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return mi({key:ae+".type",value:Z.type,valueSpec:Ee.layer.type,style:M.style,styleSpec:M.styleSpec,object:Z,objectKey:"type"})},filter:Xr,layout:function(on){return Oa({layer:Z,key:on.key,value:on.value,style:on.style,styleSpec:on.styleSpec,objectElementValidators:{"*":function(vn){return Ps(ut({layerType:Qe},vn))}}})},paint:function(on){return Oa({layer:Z,key:on.key,value:on.value,style:on.style,styleSpec:on.styleSpec,objectElementValidators:{"*":function(vn){return Ja(ut({layerType:Qe},vn))}}})}}})),O}function No(M){var O=M.value,Z=M.key,ae=ei(O);return ae!=="string"?[new Xe(Z,O,"string expected, "+ae+" found")]:[]}var Qs={promoteId:function(M){var O=M.key,Z=M.value;if(ei(Z)==="string")return No({key:O,value:Z});var ae=[];for(var _e in Z)ae.push.apply(ae,No({key:O+"."+_e,value:Z[_e]}));return ae}};function jo(M){var O=M.value,Z=M.key,ae=M.styleSpec,_e=M.style;if(!O.type)return[new Xe(Z,O,'"type" is required')];var Ee,je=ct(O.type);switch(je){case"vector":case"raster":case"raster-dem":return Oa({key:Z,value:O,valueSpec:ae["source_"+je.replace("-","_")],style:M.style,styleSpec:ae,objectElementValidators:Qs});case"geojson":if(Ee=Oa({key:Z,value:O,valueSpec:ae.source_geojson,style:_e,styleSpec:ae,objectElementValidators:Qs}),O.cluster)for(var Qe in O.clusterProperties){var st=O.clusterProperties[Qe],xt=st[0],Tt=st[1],jt=typeof xt=="string"?[xt,["accumulated"],["get",Qe]]:xt;Ee.push.apply(Ee,_o({key:Z+"."+Qe+".map",value:Tt,expressionContext:"cluster-map"})),Ee.push.apply(Ee,_o({key:Z+"."+Qe+".reduce",value:jt,expressionContext:"cluster-reduce"}))}return Ee;case"video":return Oa({key:Z,value:O,valueSpec:ae.source_video,style:_e,styleSpec:ae});case"image":return Oa({key:Z,value:O,valueSpec:ae.source_image,style:_e,styleSpec:ae});case"canvas":return[new Xe(Z,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Cs({key:Z+".type",value:O.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_e,styleSpec:ae})}}function uo(M){var O=M.value,Z=M.styleSpec,ae=Z.light,_e=M.style,Ee=[],je=ei(O);if(O===void 0)return Ee;if(je!=="object")return Ee.concat([new Xe("light",O,"object expected, "+je+" found")]);for(var Qe in O){var st=Qe.match(/^(.*)-transition$/);Ee=st&&ae[st[1]]&&ae[st[1]].transition?Ee.concat(mi({key:Qe,value:O[Qe],valueSpec:Z.transition,style:_e,styleSpec:Z})):ae[Qe]?Ee.concat(mi({key:Qe,value:O[Qe],valueSpec:ae[Qe],style:_e,styleSpec:Z})):Ee.concat([new Xe(Qe,O[Qe],'unknown property "'+Qe+'"')])}return Ee}var Uo={"*":function(){return[]},array:vs,boolean:function(M){var O=M.value,Z=M.key,ae=ei(O);return ae!=="boolean"?[new Xe(Z,O,"boolean expected, "+ae+" found")]:[]},number:ms,color:function(M){var O=M.key,Z=M.value,ae=ei(Z);return ae!=="string"?[new Xe(O,Z,"color expected, "+ae+" found")]:an(Z)===null?[new Xe(O,Z,'color expected, "'+Z+'" found')]:[]},constants:nt,enum:Cs,filter:Xr,function:Js,layer:$s,object:Oa,source:jo,light:uo,string:No,formatted:function(M){return No(M).length===0?[]:_o(M)},resolvedImage:function(M){return No(M).length===0?[]:_o(M)}};function mi(M){var O=M.value,Z=M.valueSpec,ae=M.styleSpec;return Z.expression&&bo(ct(O))?Js(M):Z.expression&&$o(Ct(O))?_o(M):Z.type&&Uo[Z.type]?Uo[Z.type](M):Oa(ut({},M,{valueSpec:Z.type?ae[Z.type]:Z}))}function Ka(M){var O=M.value,Z=M.key,ae=No(M);return ae.length||(O.indexOf("{fontstack}")===-1&&ae.push(new Xe(Z,O,'"glyphs" url must include a "{fontstack}" token')),O.indexOf("{range}")===-1&&ae.push(new Xe(Z,O,'"glyphs" url must include a "{range}" token'))),ae}function Vo(M,O){O===void 0&&(O=qe);var Z=[];return Z=Z.concat(mi({key:"",value:M,valueSpec:O.$root,styleSpec:O,style:M,objectElementValidators:{glyphs:Ka,"*":function(){return[]}}})),M.constants&&(Z=Z.concat(nt({key:"constants",value:M.constants,style:M,styleSpec:O}))),Ii(Z)}function Ii(M){return[].concat(M).sort(function(O,Z){return O.line-Z.line})}function Wi(M){return function(){for(var O=[],Z=arguments.length;Z--;)O[Z]=arguments[Z];return Ii(M.apply(this,O))}}Vo.source=Wi(jo),Vo.light=Wi(uo),Vo.layer=Wi($s),Vo.filter=Wi(Xr),Vo.paintProperty=Wi(Ja),Vo.layoutProperty=Wi(Ps);var Yi=Vo,qi=Yi.light,sa=Yi.paintProperty,ko=Yi.layoutProperty;function Ia(M,O){var Z=!1;if(O&&O.length)for(var ae=0,_e=O;ae<_e.length;ae+=1){var Ee=_e[ae];M.fire(new ke(new Error(Ee.message))),Z=!0}return Z}var Di=ya;function ya(M,O,Z){var ae=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var _e=new Int32Array(this.arrayBuffer);M=_e[0],O=_e[1],Z=_e[2],this.d=O+2*Z;for(var Ee=0;Ee<this.d*this.d;Ee++){var je=_e[3+Ee],Qe=_e[3+Ee+1];ae.push(je===Qe?null:_e.subarray(je,Qe))}var st=_e[3+ae.length],xt=_e[3+ae.length+1];this.keys=_e.subarray(st,xt),this.bboxes=_e.subarray(xt),this.insert=this._insertReadonly}else{this.d=O+2*Z;for(var Tt=0;Tt<this.d*this.d;Tt++)ae.push([]);this.keys=[],this.bboxes=[]}this.n=O,this.extent=M,this.padding=Z,this.scale=O/M,this.uid=0;var jt=Z/O*M;this.min=-jt,this.max=M+jt}ya.prototype.insert=function(M,O,Z,ae,_e){this._forEachCell(O,Z,ae,_e,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(O),this.bboxes.push(Z),this.bboxes.push(ae),this.bboxes.push(_e)},ya.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ya.prototype._insertCell=function(M,O,Z,ae,_e,Ee){this.cells[_e].push(Ee)},ya.prototype.query=function(M,O,Z,ae,_e){var Ee=this.min,je=this.max;if(M<=Ee&&O<=Ee&&je<=Z&&je<=ae&&!_e)return Array.prototype.slice.call(this.keys);var Qe=[];return this._forEachCell(M,O,Z,ae,this._queryCell,Qe,{},_e),Qe},ya.prototype._queryCell=function(M,O,Z,ae,_e,Ee,je,Qe){var st=this.cells[_e];if(st!==null)for(var xt=this.keys,Tt=this.bboxes,jt=0;jt<st.length;jt++){var Ht=st[jt];if(je[Ht]===void 0){var Vt=4*Ht;(Qe?Qe(Tt[Vt+0],Tt[Vt+1],Tt[Vt+2],Tt[Vt+3]):M<=Tt[Vt+2]&&O<=Tt[Vt+3]&&Z>=Tt[Vt+0]&&ae>=Tt[Vt+1])?(je[Ht]=!0,Ee.push(xt[Ht])):je[Ht]=!1}}},ya.prototype._forEachCell=function(M,O,Z,ae,_e,Ee,je,Qe){for(var st=this._convertToCellCoord(M),xt=this._convertToCellCoord(O),Tt=this._convertToCellCoord(Z),jt=this._convertToCellCoord(ae),Ht=st;Ht<=Tt;Ht++)for(var Vt=xt;Vt<=jt;Vt++){var on=this.d*Vt+Ht;if((!Qe||Qe(this._convertFromCellCoord(Ht),this._convertFromCellCoord(Vt),this._convertFromCellCoord(Ht+1),this._convertFromCellCoord(Vt+1)))&&_e.call(this,M,O,Z,ae,on,Ee,je,Qe))return}},ya.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},ya.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},ya.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,O=3+this.cells.length+1+1,Z=0,ae=0;ae<this.cells.length;ae++)Z+=this.cells[ae].length;var _e=new Int32Array(O+Z+this.keys.length+this.bboxes.length);_e[0]=this.extent,_e[1]=this.n,_e[2]=this.padding;for(var Ee=O,je=0;je<M.length;je++){var Qe=M[je];_e[3+je]=Ee,_e.set(Qe,Ee),Ee+=Qe.length}return _e[3+M.length]=Ee,_e.set(this.keys,Ee),Ee+=this.keys.length,_e[3+M.length+1]=Ee,_e.set(this.bboxes,Ee),Ee+=this.bboxes.length,_e.buffer};var Os=self.ImageData,Is=self.ImageBitmap,ia={};function br(M,O,Z){Z===void 0&&(Z={}),Object.defineProperty(O,"_classRegistryKey",{value:M,writeable:!1}),ia[M]={klass:O,omit:Z.omit||[],shallow:Z.shallow||[]}}for(var Ho in br("Object",Object),Di.serialize=function(M,O){var Z=M.toArrayBuffer();return O&&O.push(Z),{buffer:Z}},Di.deserialize=function(M){return new Di(M.buffer)},br("Grid",Di),br("Color",sn),br("Error",Error),br("ResolvedImage",Zn),br("StylePropertyFunction",ds),br("StyleExpression",hs,{omit:["_evaluator"]}),br("ZoomDependentExpression",Do),br("ZoomConstantExpression",zo),br("CompoundExpression",qn,{omit:["_evaluate"]}),Xo)Xo[Ho]._classRegistryKey||br("Expression_"+Ho,Xo[Ho]);function la(M){return M&&typeof ArrayBuffer<"u"&&(M instanceof ArrayBuffer||M.constructor&&M.constructor.name==="ArrayBuffer")}function Rs(M){return Is&&M instanceof Is}function ts(M,O){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(la(M)||Rs(M))return O&&O.push(M),M;if(ArrayBuffer.isView(M)){var Z=M;return O&&O.push(Z.buffer),Z}if(M instanceof Os)return O&&O.push(M.data.buffer),M;if(Array.isArray(M)){for(var ae=[],_e=0,Ee=M;_e<Ee.length;_e+=1){var je=Ee[_e];ae.push(ts(je,O))}return ae}if(typeof M=="object"){var Qe=M.constructor,st=Qe._classRegistryKey;if(!st)throw new Error("can't serialize object of unregistered class");var xt=Qe.serialize?Qe.serialize(M,O):{};if(!Qe.serialize){for(var Tt in M)if(M.hasOwnProperty(Tt)&&!(ia[st].omit.indexOf(Tt)>=0)){var jt=M[Tt];xt[Tt]=ia[st].shallow.indexOf(Tt)>=0?jt:ts(jt,O)}M instanceof Error&&(xt.message=M.message)}if(xt.$name)throw new Error("$name property is reserved for worker serialization logic.");return st!=="Object"&&(xt.$name=st),xt}throw new Error("can't serialize object of type "+typeof M)}function ns(M){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||la(M)||Rs(M)||ArrayBuffer.isView(M)||M instanceof Os)return M;if(Array.isArray(M))return M.map(ns);if(typeof M=="object"){var O=M.$name||"Object",Z=ia[O].klass;if(!Z)throw new Error("can't deserialize unregistered class "+O);if(Z.deserialize)return Z.deserialize(M);for(var ae=Object.create(Z.prototype),_e=0,Ee=Object.keys(M);_e<Ee.length;_e+=1){var je=Ee[_e];if(je!=="$name"){var Qe=M[je];ae[je]=ia[O].shallow.indexOf(je)>=0?Qe:ns(Qe)}}return ae}throw new Error("can't deserialize object of type "+typeof M)}var rs=function(){this.first=!0};rs.prototype.update=function(M,O){var Z=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=Z,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=Z,!0):(this.lastFloorZoom>Z?(this.lastIntegerZoom=Z+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<Z&&(this.lastIntegerZoom=Z,this.lastIntegerZoomTime=O),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=Z,!0))};var _r={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function is(M){for(var O=0,Z=M;O<Z.length;O+=1)if(Ra(Z[O].charCodeAt(0)))return!0;return!1}function Ra(M){return!(M!==746&&M!==747&&(M<4352||!(_r["Bopomofo Extended"](M)||_r.Bopomofo(M)||_r["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||_r["CJK Compatibility Ideographs"](M)||_r["CJK Compatibility"](M)||_r["CJK Radicals Supplement"](M)||_r["CJK Strokes"](M)||!(!_r["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||M===12336)||_r["CJK Unified Ideographs Extension A"](M)||_r["CJK Unified Ideographs"](M)||_r["Enclosed CJK Letters and Months"](M)||_r["Hangul Compatibility Jamo"](M)||_r["Hangul Jamo Extended-A"](M)||_r["Hangul Jamo Extended-B"](M)||_r["Hangul Jamo"](M)||_r["Hangul Syllables"](M)||_r.Hiragana(M)||_r["Ideographic Description Characters"](M)||_r.Kanbun(M)||_r["Kangxi Radicals"](M)||_r["Katakana Phonetic Extensions"](M)||_r.Katakana(M)&&M!==12540||!(!_r["Halfwidth and Fullwidth Forms"](M)||M===65288||M===65289||M===65293||M>=65306&&M<=65310||M===65339||M===65341||M===65343||M>=65371&&M<=65503||M===65507||M>=65512&&M<=65519)||!(!_r["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||_r["Unified Canadian Aboriginal Syllabics"](M)||_r["Unified Canadian Aboriginal Syllabics Extended"](M)||_r["Vertical Forms"](M)||_r["Yijing Hexagram Symbols"](M)||_r["Yi Syllables"](M)||_r["Yi Radicals"](M))))}function zs(M){return!(Ra(M)||function(O){return!!(_r["Latin-1 Supplement"](O)&&(O===167||O===169||O===174||O===177||O===188||O===189||O===190||O===215||O===247)||_r["General Punctuation"](O)&&(O===8214||O===8224||O===8225||O===8240||O===8241||O===8251||O===8252||O===8258||O===8263||O===8264||O===8265||O===8273)||_r["Letterlike Symbols"](O)||_r["Number Forms"](O)||_r["Miscellaneous Technical"](O)&&(O>=8960&&O<=8967||O>=8972&&O<=8991||O>=8996&&O<=9e3||O===9003||O>=9085&&O<=9114||O>=9150&&O<=9165||O===9167||O>=9169&&O<=9179||O>=9186&&O<=9215)||_r["Control Pictures"](O)&&O!==9251||_r["Optical Character Recognition"](O)||_r["Enclosed Alphanumerics"](O)||_r["Geometric Shapes"](O)||_r["Miscellaneous Symbols"](O)&&!(O>=9754&&O<=9759)||_r["Miscellaneous Symbols and Arrows"](O)&&(O>=11026&&O<=11055||O>=11088&&O<=11097||O>=11192&&O<=11243)||_r["CJK Symbols and Punctuation"](O)||_r.Katakana(O)||_r["Private Use Area"](O)||_r["CJK Compatibility Forms"](O)||_r["Small Form Variants"](O)||_r["Halfwidth and Fullwidth Forms"](O)||O===8734||O===8756||O===8757||O>=9984&&O<=10087||O>=10102&&O<=10131||O===65532||O===65533)}(M))}function bs(M){return _r.Arabic(M)||_r["Arabic Supplement"](M)||_r["Arabic Extended-A"](M)||_r["Arabic Presentation Forms-A"](M)||_r["Arabic Presentation Forms-B"](M)}function Xi(M){return M>=1424&&M<=2303||_r["Arabic Presentation Forms-A"](M)||_r["Arabic Presentation Forms-B"](M)}function qo(M,O){return!(!O&&Xi(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||_r.Khmer(M))}function co(M){for(var O=0,Z=M;O<Z.length;O+=1)if(Xi(Z[O].charCodeAt(0)))return!0;return!1}var xa="deferred",Ao="loading",Va="loaded",za="error",Go=null,Ji="unavailable",Da=null,ri=function(M){M&&typeof M=="string"&&M.indexOf("NetworkError")>-1&&(Ji=za),Go&&Go(M)};function _s(){Aa.fire(new Be("pluginStateChange",{pluginStatus:Ji,pluginURL:Da}))}var Aa=new Pe,Fa=function(){return Ji},$a=function(){if(Ji!==xa||!Da)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ji=Ao,_s(),Da&&St({url:Da},function(M){M?ri(M):(Ji=Va,_s())})},ua={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ji===Va||ua.applyArabicShaping!=null},isLoading:function(){return Ji===Ao},setState:function(M){Ji=M.pluginStatus,Da=M.pluginURL},isParsed:function(){return ua.applyArabicShaping!=null&&ua.processBidirectionalText!=null&&ua.processStyledBidirectionalText!=null},getPluginURL:function(){return Da}},ni=function(M,O){this.zoom=M,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new rs,this.transition={})};ni.prototype.isSupportedScript=function(M){return function(O,Z){for(var ae=0,_e=O;ae<_e.length;ae+=1)if(!qo(_e[ae].charCodeAt(0),Z))return!1;return!0}(M,ua.isLoaded())},ni.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ni.prototype.getCrossfadeParameters=function(){var M=this.zoom,O=M-Math.floor(M),Z=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*Z}:{fromScale:.5,toScale:1,t:1-(1-Z)*O}};var Vi=function(M,O){this.property=M,this.value=O,this.expression=function(Z,ae){if(bo(Z))return new ds(Z,ae);if($o(Z)){var _e=Qo(Z,ae);if(_e.result==="error")throw new Error(_e.value.map(function(je){return je.key+": "+je.message}).join(", "));return _e.value}var Ee=Z;return typeof Z=="string"&&ae.type==="color"&&(Ee=sn.parse(Z)),{kind:"constant",evaluate:function(){return Ee}}}(O===void 0?M.specification.default:O,M.specification)};Vi.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Vi.prototype.possiblyEvaluate=function(M,O,Z){return this.property.possiblyEvaluate(this,M,O,Z)};var Ha=function(M){this.property=M,this.value=new Vi(M,void 0)};Ha.prototype.transitioned=function(M,O){return new Qa(this.property,this.value,O,c({},M.transition,this.transition),M.now)},Ha.prototype.untransitioned=function(){return new Qa(this.property,this.value,null,{},0)};var ca=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};ca.prototype.getValue=function(M){return w(this._values[M].value.value)},ca.prototype.setValue=function(M,O){this._values.hasOwnProperty(M)||(this._values[M]=new Ha(this._values[M].property)),this._values[M].value=new Vi(this._values[M].property,O===null?void 0:w(O))},ca.prototype.getTransition=function(M){return w(this._values[M].transition)},ca.prototype.setTransition=function(M,O){this._values.hasOwnProperty(M)||(this._values[M]=new Ha(this._values[M].property)),this._values[M].transition=w(O)||void 0},ca.prototype.serialize=function(){for(var M={},O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ae=Z[O],_e=this.getValue(ae);_e!==void 0&&(M[ae]=_e);var Ee=this.getTransition(ae);Ee!==void 0&&(M[ae+"-transition"]=Ee)}return M},ca.prototype.transitioned=function(M,O){for(var Z=new Mo(this._properties),ae=0,_e=Object.keys(this._values);ae<_e.length;ae+=1){var Ee=_e[ae];Z._values[Ee]=this._values[Ee].transitioned(M,O._values[Ee])}return Z},ca.prototype.untransitioned=function(){for(var M=new Mo(this._properties),O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ae=Z[O];M._values[ae]=this._values[ae].untransitioned()}return M};var Qa=function(M,O,Z,ae,_e){this.property=M,this.value=O,this.begin=_e+ae.delay||0,this.end=this.begin+ae.duration||0,M.specification.transition&&(ae.delay||ae.duration)&&(this.prior=Z)};Qa.prototype.possiblyEvaluate=function(M,O,Z){var ae=M.now||0,_e=this.value.possiblyEvaluate(M,O,Z),Ee=this.prior;if(Ee){if(ae>this.end)return this.prior=null,_e;if(this.value.isDataDriven())return this.prior=null,_e;if(ae<this.begin)return Ee.possiblyEvaluate(M,O,Z);var je=(ae-this.begin)/(this.end-this.begin);return this.property.interpolate(Ee.possiblyEvaluate(M,O,Z),_e,function(Qe){if(Qe<=0)return 0;if(Qe>=1)return 1;var st=Qe*Qe,xt=st*Qe;return 4*(Qe<.5?xt:3*(Qe-st)+xt-.75)}(je))}return _e};var Mo=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};Mo.prototype.possiblyEvaluate=function(M,O,Z){for(var ae=new Ba(this._properties),_e=0,Ee=Object.keys(this._values);_e<Ee.length;_e+=1){var je=Ee[_e];ae._values[je]=this._values[je].possiblyEvaluate(M,O,Z)}return ae},Mo.prototype.hasTransition=function(){for(var M=0,O=Object.keys(this._values);M<O.length;M+=1){var Z=O[M];if(this._values[Z].prior)return!0}return!1};var fo=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};fo.prototype.getValue=function(M){return w(this._values[M].value)},fo.prototype.setValue=function(M,O){this._values[M]=new Vi(this._values[M].property,O===null?void 0:w(O))},fo.prototype.serialize=function(){for(var M={},O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ae=Z[O],_e=this.getValue(ae);_e!==void 0&&(M[ae]=_e)}return M},fo.prototype.possiblyEvaluate=function(M,O,Z){for(var ae=new Ba(this._properties),_e=0,Ee=Object.keys(this._values);_e<Ee.length;_e+=1){var je=Ee[_e];ae._values[je]=this._values[je].possiblyEvaluate(M,O,Z)}return ae};var Ki=function(M,O,Z){this.property=M,this.value=O,this.parameters=Z};Ki.prototype.isConstant=function(){return this.value.kind==="constant"},Ki.prototype.constantOr=function(M){return this.value.kind==="constant"?this.value.value:M},Ki.prototype.evaluate=function(M,O,Z,ae){return this.property.evaluate(this.value,this.parameters,M,O,Z,ae)};var Ba=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};Ba.prototype.get=function(M){return this._values[M]};var Mr=function(M){this.specification=M};Mr.prototype.possiblyEvaluate=function(M,O){return M.expression.evaluate(O)},Mr.prototype.interpolate=function(M,O,Z){var ae=lr[this.specification.type];return ae?ae(M,O,Z):M};var Or=function(M,O){this.specification=M,this.overrides=O};Or.prototype.possiblyEvaluate=function(M,O,Z,ae){return M.expression.kind==="constant"||M.expression.kind==="camera"?new Ki(this,{kind:"constant",value:M.expression.evaluate(O,null,{},Z,ae)},O):new Ki(this,M.expression,O)},Or.prototype.interpolate=function(M,O,Z){if(M.value.kind!=="constant"||O.value.kind!=="constant")return M;if(M.value.value===void 0||O.value.value===void 0)return new Ki(this,{kind:"constant",value:void 0},M.parameters);var ae=lr[this.specification.type];return ae?new Ki(this,{kind:"constant",value:ae(M.value.value,O.value.value,Z)},M.parameters):M},Or.prototype.evaluate=function(M,O,Z,ae,_e,Ee){return M.kind==="constant"?M.value:M.evaluate(O,Z,ae,_e,Ee)};var as=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.possiblyEvaluate=function(Z,ae,_e,Ee){if(Z.value===void 0)return new Ki(this,{kind:"constant",value:void 0},ae);if(Z.expression.kind==="constant"){var je=Z.expression.evaluate(ae,null,{},_e,Ee),Qe=Z.property.specification.type==="resolvedImage"&&typeof je!="string"?je.name:je,st=this._calculate(Qe,Qe,Qe,ae);return new Ki(this,{kind:"constant",value:st},ae)}if(Z.expression.kind==="camera"){var xt=this._calculate(Z.expression.evaluate({zoom:ae.zoom-1}),Z.expression.evaluate({zoom:ae.zoom}),Z.expression.evaluate({zoom:ae.zoom+1}),ae);return new Ki(this,{kind:"constant",value:xt},ae)}return new Ki(this,Z.expression,ae)},O.prototype.evaluate=function(Z,ae,_e,Ee,je,Qe){if(Z.kind==="source"){var st=Z.evaluate(ae,_e,Ee,je,Qe);return this._calculate(st,st,st,ae)}return Z.kind==="composite"?this._calculate(Z.evaluate({zoom:Math.floor(ae.zoom)-1},_e,Ee),Z.evaluate({zoom:Math.floor(ae.zoom)},_e,Ee),Z.evaluate({zoom:Math.floor(ae.zoom)+1},_e,Ee),ae):Z.value},O.prototype._calculate=function(Z,ae,_e,Ee){return Ee.zoom>Ee.zoomHistory.lastIntegerZoom?{from:Z,to:ae}:{from:_e,to:ae}},O.prototype.interpolate=function(Z){return Z},O}(Or),ho=function(M){this.specification=M};ho.prototype.possiblyEvaluate=function(M,O,Z,ae){if(M.value!==void 0){if(M.expression.kind==="constant"){var _e=M.expression.evaluate(O,null,{},Z,ae);return this._calculate(_e,_e,_e,O)}return this._calculate(M.expression.evaluate(new ni(Math.floor(O.zoom-1),O)),M.expression.evaluate(new ni(Math.floor(O.zoom),O)),M.expression.evaluate(new ni(Math.floor(O.zoom+1),O)),O)}},ho.prototype._calculate=function(M,O,Z,ae){return ae.zoom>ae.zoomHistory.lastIntegerZoom?{from:M,to:O}:{from:Z,to:O}},ho.prototype.interpolate=function(M){return M};var qa=function(M){this.specification=M};qa.prototype.possiblyEvaluate=function(M,O,Z,ae){return!!M.expression.evaluate(O,null,{},Z,ae)},qa.prototype.interpolate=function(){return!1};var $i=function(M){for(var O in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var Z=M[O];Z.specification.overridable&&this.overridableProperties.push(O);var ae=this.defaultPropertyValues[O]=new Vi(Z,void 0),_e=this.defaultTransitionablePropertyValues[O]=new Ha(Z);this.defaultTransitioningPropertyValues[O]=_e.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=ae.possiblyEvaluate({})}};br("DataDrivenProperty",Or),br("DataConstantProperty",Mr),br("CrossFadedDataDrivenProperty",as),br("CrossFadedProperty",ho),br("ColorRampProperty",qa);var Ds="-transition",fa=function(M){function O(Z,ae){if(M.call(this),this.id=Z.id,this.type=Z.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Z.type!=="custom"&&(this.metadata=Z.metadata,this.minzoom=Z.minzoom,this.maxzoom=Z.maxzoom,Z.type!=="background"&&(this.source=Z.source,this.sourceLayer=Z["source-layer"],this.filter=Z.filter),ae.layout&&(this._unevaluatedLayout=new fo(ae.layout)),ae.paint)){for(var _e in this._transitionablePaint=new ca(ae.paint),Z.paint)this.setPaintProperty(_e,Z.paint[_e],{validate:!1});for(var Ee in Z.layout)this.setLayoutProperty(Ee,Z.layout[Ee],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ba(ae.paint)}}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},O.prototype.getLayoutProperty=function(Z){return Z==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Z)},O.prototype.setLayoutProperty=function(Z,ae,_e){if(_e===void 0&&(_e={}),ae!=null){var Ee="layers."+this.id+".layout."+Z;if(this._validate(ko,Ee,Z,ae,_e))return}Z!=="visibility"?this._unevaluatedLayout.setValue(Z,ae):this.visibility=ae},O.prototype.getPaintProperty=function(Z){return y(Z,Ds)?this._transitionablePaint.getTransition(Z.slice(0,-Ds.length)):this._transitionablePaint.getValue(Z)},O.prototype.setPaintProperty=function(Z,ae,_e){if(_e===void 0&&(_e={}),ae!=null){var Ee="layers."+this.id+".paint."+Z;if(this._validate(sa,Ee,Z,ae,_e))return!1}if(y(Z,Ds))return this._transitionablePaint.setTransition(Z.slice(0,-Ds.length),ae||void 0),!1;var je=this._transitionablePaint._values[Z],Qe=je.property.specification["property-type"]==="cross-faded-data-driven",st=je.value.isDataDriven(),xt=je.value;this._transitionablePaint.setValue(Z,ae),this._handleSpecialPaintPropertyUpdate(Z);var Tt=this._transitionablePaint._values[Z].value;return Tt.isDataDriven()||st||Qe||this._handleOverridablePaintPropertyUpdate(Z,xt,Tt)},O.prototype._handleSpecialPaintPropertyUpdate=function(Z){},O.prototype._handleOverridablePaintPropertyUpdate=function(Z,ae,_e){return!1},O.prototype.isHidden=function(Z){return!!(this.minzoom&&Z<this.minzoom)||!!(this.maxzoom&&Z>=this.maxzoom)||this.visibility==="none"},O.prototype.updateTransitions=function(Z){this._transitioningPaint=this._transitionablePaint.transitioned(Z,this._transitioningPaint)},O.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},O.prototype.recalculate=function(Z,ae){Z.getCrossfadeParameters&&(this._crossfadeParameters=Z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Z,void 0,ae)),this.paint=this._transitioningPaint.possiblyEvaluate(Z,void 0,ae)},O.prototype.serialize=function(){var Z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Z.layout=Z.layout||{},Z.layout.visibility=this.visibility),m(Z,function(ae,_e){return!(ae===void 0||_e==="layout"&&!Object.keys(ae).length||_e==="paint"&&!Object.keys(ae).length)})},O.prototype._validate=function(Z,ae,_e,Ee,je){return je===void 0&&(je={}),(!je||je.validate!==!1)&&Ia(this,Z.call(Yi,{key:ae,layerType:this.type,objectKey:_e,value:Ee,styleSpec:qe,style:{glyphs:!0,sprite:!0}}))},O.prototype.is3D=function(){return!1},O.prototype.isTileClipped=function(){return!1},O.prototype.hasOffscreenPass=function(){return!1},O.prototype.resize=function(){},O.prototype.isStateDependent=function(){for(var Z in this.paint._values){var ae=this.paint.get(Z);if(ae instanceof Ki&&Jo(ae.property.specification)&&(ae.value.kind==="source"||ae.value.kind==="composite")&&ae.value.isStateDependent)return!0}return!1},O}(Pe),os={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},po=function(M,O){this._structArray=M,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},oi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function fi(M,O){O===void 0&&(O=1);var Z=0,ae=0;return{members:M.map(function(_e){var Ee,je=(Ee=_e.type,os[Ee].BYTES_PER_ELEMENT),Qe=Z=Fs(Z,Math.max(O,je)),st=_e.components||1;return ae=Math.max(ae,je),Z+=je*st,{name:_e.name,type:_e.type,components:st,offset:Qe}}),size:Fs(Z,Math.max(ae,O)),alignment:O}}function Fs(M,O){return Math.ceil(M/O)*O}oi.serialize=function(M,O){return M._trim(),O&&(M.isTransferred=!0,O.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},oi.deserialize=function(M){var O=Object.create(this.prototype);return O.arrayBuffer=M.arrayBuffer,O.length=M.length,O.capacity=M.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},oi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},oi.prototype.clear=function(){this.length=0},oi.prototype.resize=function(M){this.reserve(M),this.length=M},oi.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},oi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Je=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae){var _e=this.length;return this.resize(_e+1),this.emplace(_e,Z,ae)},O.prototype.emplace=function(Z,ae,_e){var Ee=2*Z;return this.int16[Ee+0]=ae,this.int16[Ee+1]=_e,Z},O}(oi);Je.prototype.bytesPerElement=4,br("StructArrayLayout2i4",Je);var $e=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee){var je=this.length;return this.resize(je+1),this.emplace(je,Z,ae,_e,Ee)},O.prototype.emplace=function(Z,ae,_e,Ee,je){var Qe=4*Z;return this.int16[Qe+0]=ae,this.int16[Qe+1]=_e,this.int16[Qe+2]=Ee,this.int16[Qe+3]=je,Z},O}(oi);$e.prototype.bytesPerElement=8,br("StructArrayLayout4i8",$e);var at=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee,je,Qe){var st=this.length;return this.resize(st+1),this.emplace(st,Z,ae,_e,Ee,je,Qe)},O.prototype.emplace=function(Z,ae,_e,Ee,je,Qe,st){var xt=6*Z;return this.int16[xt+0]=ae,this.int16[xt+1]=_e,this.int16[xt+2]=Ee,this.int16[xt+3]=je,this.int16[xt+4]=Qe,this.int16[xt+5]=st,Z},O}(oi);at.prototype.bytesPerElement=12,br("StructArrayLayout2i4i12",at);var ft=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee,je,Qe){var st=this.length;return this.resize(st+1),this.emplace(st,Z,ae,_e,Ee,je,Qe)},O.prototype.emplace=function(Z,ae,_e,Ee,je,Qe,st){var xt=4*Z,Tt=8*Z;return this.int16[xt+0]=ae,this.int16[xt+1]=_e,this.uint8[Tt+4]=Ee,this.uint8[Tt+5]=je,this.uint8[Tt+6]=Qe,this.uint8[Tt+7]=st,Z},O}(oi);ft.prototype.bytesPerElement=8,br("StructArrayLayout2i4ub8",ft);var yt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt){var Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt)},O.prototype.emplace=function(Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht){var Vt=9*Z,on=18*Z;return this.uint16[Vt+0]=ae,this.uint16[Vt+1]=_e,this.uint16[Vt+2]=Ee,this.uint16[Vt+3]=je,this.uint16[Vt+4]=Qe,this.uint16[Vt+5]=st,this.uint16[Vt+6]=xt,this.uint16[Vt+7]=Tt,this.uint8[on+16]=jt,this.uint8[on+17]=Ht,Z},O}(oi);yt.prototype.bytesPerElement=18,br("StructArrayLayout8ui2ub18",yt);var gt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt){var on=this.length;return this.resize(on+1),this.emplace(on,Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt)},O.prototype.emplace=function(Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt,on){var vn=12*Z;return this.int16[vn+0]=ae,this.int16[vn+1]=_e,this.int16[vn+2]=Ee,this.int16[vn+3]=je,this.uint16[vn+4]=Qe,this.uint16[vn+5]=st,this.uint16[vn+6]=xt,this.uint16[vn+7]=Tt,this.int16[vn+8]=jt,this.int16[vn+9]=Ht,this.int16[vn+10]=Vt,this.int16[vn+11]=on,Z},O}(oi);gt.prototype.bytesPerElement=24,br("StructArrayLayout4i4ui4i24",gt);var D=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Z,ae,_e)},O.prototype.emplace=function(Z,ae,_e,Ee){var je=3*Z;return this.float32[je+0]=ae,this.float32[je+1]=_e,this.float32[je+2]=Ee,Z},O}(oi);D.prototype.bytesPerElement=12,br("StructArrayLayout3f12",D);var Y=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ae=this.length;return this.resize(ae+1),this.emplace(ae,Z)},O.prototype.emplace=function(Z,ae){var _e=1*Z;return this.uint32[_e+0]=ae,Z},O}(oi);Y.prototype.bytesPerElement=4,br("StructArrayLayout1ul4",Y);var q=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee,je,Qe,st,xt,Tt){var jt=this.length;return this.resize(jt+1),this.emplace(jt,Z,ae,_e,Ee,je,Qe,st,xt,Tt)},O.prototype.emplace=function(Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt){var Ht=10*Z,Vt=5*Z;return this.int16[Ht+0]=ae,this.int16[Ht+1]=_e,this.int16[Ht+2]=Ee,this.int16[Ht+3]=je,this.int16[Ht+4]=Qe,this.int16[Ht+5]=st,this.uint32[Vt+3]=xt,this.uint16[Ht+8]=Tt,this.uint16[Ht+9]=jt,Z},O}(oi);q.prototype.bytesPerElement=20,br("StructArrayLayout6i1ul2ui20",q);var ne=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee,je,Qe){var st=this.length;return this.resize(st+1),this.emplace(st,Z,ae,_e,Ee,je,Qe)},O.prototype.emplace=function(Z,ae,_e,Ee,je,Qe,st){var xt=6*Z;return this.int16[xt+0]=ae,this.int16[xt+1]=_e,this.int16[xt+2]=Ee,this.int16[xt+3]=je,this.int16[xt+4]=Qe,this.int16[xt+5]=st,Z},O}(oi);ne.prototype.bytesPerElement=12,br("StructArrayLayout2i2i2i12",ne);var pe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee,je){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,Z,ae,_e,Ee,je)},O.prototype.emplace=function(Z,ae,_e,Ee,je,Qe){var st=4*Z,xt=8*Z;return this.float32[st+0]=ae,this.float32[st+1]=_e,this.float32[st+2]=Ee,this.int16[xt+6]=je,this.int16[xt+7]=Qe,Z},O}(oi);pe.prototype.bytesPerElement=16,br("StructArrayLayout2f1f2i16",pe);var Le=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee){var je=this.length;return this.resize(je+1),this.emplace(je,Z,ae,_e,Ee)},O.prototype.emplace=function(Z,ae,_e,Ee,je){var Qe=12*Z,st=3*Z;return this.uint8[Qe+0]=ae,this.uint8[Qe+1]=_e,this.float32[st+1]=Ee,this.float32[st+2]=je,Z},O}(oi);Le.prototype.bytesPerElement=12,br("StructArrayLayout2ub2f12",Le);var Ne=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Z,ae,_e)},O.prototype.emplace=function(Z,ae,_e,Ee){var je=3*Z;return this.uint16[je+0]=ae,this.uint16[je+1]=_e,this.uint16[je+2]=Ee,Z},O}(oi);Ne.prototype.bytesPerElement=6,br("StructArrayLayout3ui6",Ne);var Ge=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt,on,vn,Pn,Cn,Bn){var Nn=this.length;return this.resize(Nn+1),this.emplace(Nn,Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt,on,vn,Pn,Cn,Bn)},O.prototype.emplace=function(Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt,on,vn,Pn,Cn,Bn,Nn){var Wn=24*Z,Kn=12*Z,tr=48*Z;return this.int16[Wn+0]=ae,this.int16[Wn+1]=_e,this.uint16[Wn+2]=Ee,this.uint16[Wn+3]=je,this.uint32[Kn+2]=Qe,this.uint32[Kn+3]=st,this.uint32[Kn+4]=xt,this.uint16[Wn+10]=Tt,this.uint16[Wn+11]=jt,this.uint16[Wn+12]=Ht,this.float32[Kn+7]=Vt,this.float32[Kn+8]=on,this.uint8[tr+36]=vn,this.uint8[tr+37]=Pn,this.uint8[tr+38]=Cn,this.uint32[Kn+10]=Bn,this.int16[Wn+22]=Nn,Z},O}(oi);Ge.prototype.bytesPerElement=48,br("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ge);var et=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt,on,vn,Pn,Cn,Bn,Nn,Wn,Kn,tr,xr,hr,wr,Er,jr,Pr,Nr){var Ir=this.length;return this.resize(Ir+1),this.emplace(Ir,Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt,on,vn,Pn,Cn,Bn,Nn,Wn,Kn,tr,xr,hr,wr,Er,jr,Pr,Nr)},O.prototype.emplace=function(Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt,on,vn,Pn,Cn,Bn,Nn,Wn,Kn,tr,xr,hr,wr,Er,jr,Pr,Nr,Ir){var Cr=34*Z,Jr=17*Z;return this.int16[Cr+0]=ae,this.int16[Cr+1]=_e,this.int16[Cr+2]=Ee,this.int16[Cr+3]=je,this.int16[Cr+4]=Qe,this.int16[Cr+5]=st,this.int16[Cr+6]=xt,this.int16[Cr+7]=Tt,this.uint16[Cr+8]=jt,this.uint16[Cr+9]=Ht,this.uint16[Cr+10]=Vt,this.uint16[Cr+11]=on,this.uint16[Cr+12]=vn,this.uint16[Cr+13]=Pn,this.uint16[Cr+14]=Cn,this.uint16[Cr+15]=Bn,this.uint16[Cr+16]=Nn,this.uint16[Cr+17]=Wn,this.uint16[Cr+18]=Kn,this.uint16[Cr+19]=tr,this.uint16[Cr+20]=xr,this.uint16[Cr+21]=hr,this.uint16[Cr+22]=wr,this.uint32[Jr+12]=Er,this.float32[Jr+13]=jr,this.float32[Jr+14]=Pr,this.float32[Jr+15]=Nr,this.float32[Jr+16]=Ir,Z},O}(oi);et.prototype.bytesPerElement=68,br("StructArrayLayout8i15ui1ul4f68",et);var pt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ae=this.length;return this.resize(ae+1),this.emplace(ae,Z)},O.prototype.emplace=function(Z,ae){var _e=1*Z;return this.float32[_e+0]=ae,Z},O}(oi);pt.prototype.bytesPerElement=4,br("StructArrayLayout1f4",pt);var vt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Z,ae,_e)},O.prototype.emplace=function(Z,ae,_e,Ee){var je=3*Z;return this.int16[je+0]=ae,this.int16[je+1]=_e,this.int16[je+2]=Ee,Z},O}(oi);vt.prototype.bytesPerElement=6,br("StructArrayLayout3i6",vt);var te=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Z,ae,_e)},O.prototype.emplace=function(Z,ae,_e,Ee){var je=2*Z,Qe=4*Z;return this.uint32[je+0]=ae,this.uint16[Qe+2]=_e,this.uint16[Qe+3]=Ee,Z},O}(oi);te.prototype.bytesPerElement=8,br("StructArrayLayout1ul2ui8",te);var ue=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae){var _e=this.length;return this.resize(_e+1),this.emplace(_e,Z,ae)},O.prototype.emplace=function(Z,ae,_e){var Ee=2*Z;return this.uint16[Ee+0]=ae,this.uint16[Ee+1]=_e,Z},O}(oi);ue.prototype.bytesPerElement=4,br("StructArrayLayout2ui4",ue);var we=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ae=this.length;return this.resize(ae+1),this.emplace(ae,Z)},O.prototype.emplace=function(Z,ae){var _e=1*Z;return this.uint16[_e+0]=ae,Z},O}(oi);we.prototype.bytesPerElement=2,br("StructArrayLayout1ui2",we);var Oe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae){var _e=this.length;return this.resize(_e+1),this.emplace(_e,Z,ae)},O.prototype.emplace=function(Z,ae,_e){var Ee=2*Z;return this.float32[Ee+0]=ae,this.float32[Ee+1]=_e,Z},O}(oi);Oe.prototype.bytesPerElement=8,br("StructArrayLayout2f8",Oe);var De=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,_e,Ee){var je=this.length;return this.resize(je+1),this.emplace(je,Z,ae,_e,Ee)},O.prototype.emplace=function(Z,ae,_e,Ee,je){var Qe=4*Z;return this.float32[Qe+0]=ae,this.float32[Qe+1]=_e,this.float32[Qe+2]=Ee,this.float32[Qe+3]=je,Z},O}(oi);De.prototype.bytesPerElement=16,br("StructArrayLayout4f16",De);var Ue=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Z={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Z.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Z.x1.get=function(){return this._structArray.int16[this._pos2+2]},Z.y1.get=function(){return this._structArray.int16[this._pos2+3]},Z.x2.get=function(){return this._structArray.int16[this._pos2+4]},Z.y2.get=function(){return this._structArray.int16[this._pos2+5]},Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(O.prototype,Z),O}(po);Ue.prototype.size=20;var We=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Z){return new Ue(this,Z)},O}(q);br("CollisionBoxArray",We);var Ke=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Z.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Z.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Z.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Z.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Z.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Z.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Z.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Z.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Z.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Z.placedOrientation.set=function(ae){this._structArray.uint8[this._pos1+37]=ae},Z.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Z.hidden.set=function(ae){this._structArray.uint8[this._pos1+38]=ae},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Z.crossTileID.set=function(ae){this._structArray.uint32[this._pos4+10]=ae},Z.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(O.prototype,Z),O}(po);Ke.prototype.size=48;var it=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Z){return new Ke(this,Z)},O}(Ge);br("PlacedSymbolArray",it);var lt=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Z.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Z.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Z.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Z.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Z.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Z.key.get=function(){return this._structArray.uint16[this._pos2+8]},Z.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Z.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Z.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Z.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Z.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Z.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Z.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Z.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Z.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Z.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Z.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Z.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Z.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Z.crossTileID.set=function(ae){this._structArray.uint32[this._pos4+12]=ae},Z.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Z.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Z.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Z.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(O.prototype,Z),O}(po);lt.prototype.size=68;var At=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Z){return new lt(this,Z)},O}(et);br("SymbolInstanceArray",At);var Ft=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getoffsetX=function(Z){return this.float32[1*Z+0]},O}(pt);br("GlyphOffsetArray",Ft);var Bt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getx=function(Z){return this.int16[3*Z+0]},O.prototype.gety=function(Z){return this.int16[3*Z+1]},O.prototype.gettileUnitDistanceFromAnchor=function(Z){return this.int16[3*Z+2]},O}(vt);br("SymbolLineVertexArray",Bt);var Zt=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Z={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(O.prototype,Z),O}(po);Zt.prototype.size=8;var un=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Z){return new Zt(this,Z)},O}(te);br("FeatureIndexArray",un);var Wt=fi([{name:"a_pos",components:2,type:"Int16"}],4).members,en=function(M){M===void 0&&(M=[]),this.segments=M};function Jt(M,O){return 256*(M=a(Math.floor(M),0,255))+a(Math.floor(O),0,255)}en.prototype.prepareSegment=function(M,O,Z,ae){var _e=this.segments[this.segments.length-1];return M>en.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+en.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!_e||_e.vertexLength+M>en.MAX_VERTEX_ARRAY_LENGTH||_e.sortKey!==ae)&&(_e={vertexOffset:O.length,primitiveOffset:Z.length,vertexLength:0,primitiveLength:0},ae!==void 0&&(_e.sortKey=ae),this.segments.push(_e)),_e},en.prototype.get=function(){return this.segments},en.prototype.destroy=function(){for(var M=0,O=this.segments;M<O.length;M+=1){var Z=O[M];for(var ae in Z.vaos)Z.vaos[ae].destroy()}},en.simpleSegment=function(M,O,Z,ae){return new en([{vertexOffset:M,primitiveOffset:O,vertexLength:Z,primitiveLength:ae,vaos:{},sortKey:0}])},en.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,br("SegmentVector",en);var wn=fi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),pn=T(function(M){M.exports=function(O,Z){var ae,_e,Ee,je,Qe,st,xt,Tt;for(ae=3&O.length,_e=O.length-ae,Ee=Z,Qe=3432918353,st=461845907,Tt=0;Tt<_e;)xt=255&O.charCodeAt(Tt)|(255&O.charCodeAt(++Tt))<<8|(255&O.charCodeAt(++Tt))<<16|(255&O.charCodeAt(++Tt))<<24,++Tt,Ee=27492+(65535&(je=5*(65535&(Ee=(Ee^=xt=(65535&(xt=(xt=(65535&xt)*Qe+(((xt>>>16)*Qe&65535)<<16)&4294967295)<<15|xt>>>17))*st+(((xt>>>16)*st&65535)<<16)&4294967295)<<13|Ee>>>19))+((5*(Ee>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(xt=0,ae){case 3:xt^=(255&O.charCodeAt(Tt+2))<<16;case 2:xt^=(255&O.charCodeAt(Tt+1))<<8;case 1:Ee^=xt=(65535&(xt=(xt=(65535&(xt^=255&O.charCodeAt(Tt)))*Qe+(((xt>>>16)*Qe&65535)<<16)&4294967295)<<15|xt>>>17))*st+(((xt>>>16)*st&65535)<<16)&4294967295}return Ee^=O.length,Ee=2246822507*(65535&(Ee^=Ee>>>16))+((2246822507*(Ee>>>16)&65535)<<16)&4294967295,Ee=3266489909*(65535&(Ee^=Ee>>>13))+((3266489909*(Ee>>>16)&65535)<<16)&4294967295,(Ee^=Ee>>>16)>>>0}}),Qt=T(function(M){M.exports=function(O,Z){for(var ae,_e=O.length,Ee=Z^_e,je=0;_e>=4;)ae=1540483477*(65535&(ae=255&O.charCodeAt(je)|(255&O.charCodeAt(++je))<<8|(255&O.charCodeAt(++je))<<16|(255&O.charCodeAt(++je))<<24))+((1540483477*(ae>>>16)&65535)<<16),Ee=1540483477*(65535&Ee)+((1540483477*(Ee>>>16)&65535)<<16)^(ae=1540483477*(65535&(ae^=ae>>>24))+((1540483477*(ae>>>16)&65535)<<16)),_e-=4,++je;switch(_e){case 3:Ee^=(255&O.charCodeAt(je+2))<<16;case 2:Ee^=(255&O.charCodeAt(je+1))<<8;case 1:Ee=1540483477*(65535&(Ee^=255&O.charCodeAt(je)))+((1540483477*(Ee>>>16)&65535)<<16)}return Ee=1540483477*(65535&(Ee^=Ee>>>13))+((1540483477*(Ee>>>16)&65535)<<16),(Ee^=Ee>>>15)>>>0}}),Ln=pn,Rn=pn,Xn=Qt;Ln.murmur3=Rn,Ln.murmur2=Xn;var Jn=function(){this.ids=[],this.positions=[],this.indexed=!1};Jn.prototype.add=function(M,O,Z,ae){this.ids.push(yr(M)),this.positions.push(O,Z,ae)},Jn.prototype.getPositions=function(M){for(var O=yr(M),Z=0,ae=this.ids.length-1;Z<ae;){var _e=Z+ae>>1;this.ids[_e]>=O?ae=_e:Z=_e+1}for(var Ee=[];this.ids[Z]===O;){var je=this.positions[3*Z],Qe=this.positions[3*Z+1],st=this.positions[3*Z+2];Ee.push({index:je,start:Qe,end:st}),Z++}return Ee},Jn.serialize=function(M,O){var Z=new Float64Array(M.ids),ae=new Uint32Array(M.positions);return sr(Z,ae,0,Z.length-1),O&&O.push(Z.buffer,ae.buffer),{ids:Z,positions:ae}},Jn.deserialize=function(M){var O=new Jn;return O.ids=M.ids,O.positions=M.positions,O.indexed=!0,O};var vr=Math.pow(2,53)-1;function yr(M){var O=+M;return!isNaN(O)&&O<=vr?O:Ln(String(M))}function sr(M,O,Z,ae){for(;Z<ae;){for(var _e=M[Z+ae>>1],Ee=Z-1,je=ae+1;;){do Ee++;while(M[Ee]<_e);do je--;while(M[je]>_e);if(Ee>=je)break;pr(M,Ee,je),pr(O,3*Ee,3*je),pr(O,3*Ee+1,3*je+1),pr(O,3*Ee+2,3*je+2)}je-Z<ae-je?(sr(M,O,Z,je),Z=je+1):(sr(M,O,je+1,ae),ae=je)}}function pr(M,O,Z){var ae=M[O];M[O]=M[Z],M[Z]=ae}br("FeaturePositionMap",Jn);var kr=function(M,O){this.gl=M.gl,this.location=O},Vr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=0}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1i(this.location,Z))},O}(kr),Hr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=0}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1f(this.location,Z))},O}(kr),fr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=[0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]||(this.current=Z,this.gl.uniform2f(this.location,Z[0],Z[1]))},O}(kr),Ar=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=[0,0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]||(this.current=Z,this.gl.uniform3f(this.location,Z[0],Z[1],Z[2]))},O}(kr),Dr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=[0,0,0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]&&Z[3]===this.current[3]||(this.current=Z,this.gl.uniform4f(this.location,Z[0],Z[1],Z[2],Z[3]))},O}(kr),zr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=sn.transparent}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){Z.r===this.current.r&&Z.g===this.current.g&&Z.b===this.current.b&&Z.a===this.current.a||(this.current=Z,this.gl.uniform4f(this.location,Z.r,Z.g,Z.b,Z.a))},O}(kr),Wr=new Float32Array(16),Zr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=Wr}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){if(Z[12]!==this.current[12]||Z[0]!==this.current[0])return this.current=Z,void this.gl.uniformMatrix4fv(this.location,!1,Z);for(var ae=1;ae<16;ae++)if(Z[ae]!==this.current[ae]){this.current=Z,this.gl.uniformMatrix4fv(this.location,!1,Z);break}},O}(kr);function $r(M){return[Jt(255*M.r,255*M.g),Jt(255*M.b,255*M.a)]}var ui=function(M,O,Z){this.value=M,this.uniformNames=O.map(function(ae){return"u_"+ae}),this.type=Z};ui.prototype.setUniform=function(M,O,Z){M.set(Z.constantOr(this.value))},ui.prototype.getBinding=function(M,O,Z){return this.type==="color"?new zr(M,O):new Hr(M,O)};var yi=function(M,O){this.uniformNames=O.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};yi.prototype.setConstantPatternPositions=function(M,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=M.tlbr},yi.prototype.setUniform=function(M,O,Z,ae){var _e=ae==="u_pattern_to"?this.patternTo:ae==="u_pattern_from"?this.patternFrom:ae==="u_pixel_ratio_to"?this.pixelRatioTo:ae==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_e&&M.set(_e)},yi.prototype.getBinding=function(M,O,Z){return Z.substr(0,9)==="u_pattern"?new Dr(M,O):new Hr(M,O)};var hi=function(M,O,Z,ae){this.expression=M,this.type=Z,this.maxValue=0,this.paintVertexAttributes=O.map(function(_e){return{name:"a_"+_e,type:"Float32",components:Z==="color"?2:1,offset:0}}),this.paintVertexArray=new ae};hi.prototype.populatePaintArray=function(M,O,Z,ae,_e){var Ee=this.paintVertexArray.length,je=this.expression.evaluate(new ni(0),O,{},ae,[],_e);this.paintVertexArray.resize(M),this._setPaintValue(Ee,M,je)},hi.prototype.updatePaintArray=function(M,O,Z,ae){var _e=this.expression.evaluate({zoom:0},Z,ae);this._setPaintValue(M,O,_e)},hi.prototype._setPaintValue=function(M,O,Z){if(this.type==="color")for(var ae=$r(Z),_e=M;_e<O;_e++)this.paintVertexArray.emplace(_e,ae[0],ae[1]);else{for(var Ee=M;Ee<O;Ee++)this.paintVertexArray.emplace(Ee,Z);this.maxValue=Math.max(this.maxValue,Math.abs(Z))}},hi.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},hi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var si=function(M,O,Z,ae,_e,Ee){this.expression=M,this.uniformNames=O.map(function(je){return"u_"+je+"_t"}),this.type=Z,this.useIntegerZoom=ae,this.zoom=_e,this.maxValue=0,this.paintVertexAttributes=O.map(function(je){return{name:"a_"+je,type:"Float32",components:Z==="color"?4:2,offset:0}}),this.paintVertexArray=new Ee};si.prototype.populatePaintArray=function(M,O,Z,ae,_e){var Ee=this.expression.evaluate(new ni(this.zoom),O,{},ae,[],_e),je=this.expression.evaluate(new ni(this.zoom+1),O,{},ae,[],_e),Qe=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(Qe,M,Ee,je)},si.prototype.updatePaintArray=function(M,O,Z,ae){var _e=this.expression.evaluate({zoom:this.zoom},Z,ae),Ee=this.expression.evaluate({zoom:this.zoom+1},Z,ae);this._setPaintValue(M,O,_e,Ee)},si.prototype._setPaintValue=function(M,O,Z,ae){if(this.type==="color")for(var _e=$r(Z),Ee=$r(ae),je=M;je<O;je++)this.paintVertexArray.emplace(je,_e[0],_e[1],Ee[0],Ee[1]);else{for(var Qe=M;Qe<O;Qe++)this.paintVertexArray.emplace(Qe,Z,ae);this.maxValue=Math.max(this.maxValue,Math.abs(Z),Math.abs(ae))}},si.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},si.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},si.prototype.setUniform=function(M,O){var Z=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,ae=a(this.expression.interpolationFactor(Z,this.zoom,this.zoom+1),0,1);M.set(ae)},si.prototype.getBinding=function(M,O,Z){return new Hr(M,O)};var ci=function(M,O,Z,ae,_e,Ee){this.expression=M,this.type=O,this.useIntegerZoom=Z,this.zoom=ae,this.layerId=Ee,this.zoomInPaintVertexArray=new _e,this.zoomOutPaintVertexArray=new _e};ci.prototype.populatePaintArray=function(M,O,Z){var ae=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(ae,M,O.patterns&&O.patterns[this.layerId],Z)},ci.prototype.updatePaintArray=function(M,O,Z,ae,_e){this._setPaintValues(M,O,Z.patterns&&Z.patterns[this.layerId],_e)},ci.prototype._setPaintValues=function(M,O,Z,ae){if(ae&&Z){var _e=Z.min,Ee=Z.mid,je=Z.max,Qe=ae[_e],st=ae[Ee],xt=ae[je];if(Qe&&st&&xt)for(var Tt=M;Tt<O;Tt++)this.zoomInPaintVertexArray.emplace(Tt,st.tl[0],st.tl[1],st.br[0],st.br[1],Qe.tl[0],Qe.tl[1],Qe.br[0],Qe.br[1],st.pixelRatio,Qe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Tt,st.tl[0],st.tl[1],st.br[0],st.br[1],xt.tl[0],xt.tl[1],xt.br[0],xt.br[1],st.pixelRatio,xt.pixelRatio)}},ci.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,wn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,wn.members,this.expression.isStateDependent))},ci.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var pi=function(M,O,Z,ae){this.binders={},this.layoutAttributes=ae,this._buffers=[];var _e=[];for(var Ee in M.paint._values)if(Z(Ee)){var je=M.paint.get(Ee);if(je instanceof Ki&&Jo(je.property.specification)){var Qe=So(Ee,M.type),st=je.value,xt=je.property.specification.type,Tt=je.property.useIntegerZoom,jt=je.property.specification["property-type"],Ht=jt==="cross-faded"||jt==="cross-faded-data-driven";if(st.kind==="constant")this.binders[Ee]=Ht?new yi(st.value,Qe):new ui(st.value,Qe,xt),_e.push("/u_"+Ee);else if(st.kind==="source"||Ht){var Vt=Fi(Ee,xt,"source");this.binders[Ee]=Ht?new ci(st,xt,Tt,O,Vt,M.id):new hi(st,Qe,xt,Vt),_e.push("/a_"+Ee)}else{var on=Fi(Ee,xt,"composite");this.binders[Ee]=new si(st,Qe,xt,Tt,O,on),_e.push("/z_"+Ee)}}}this.cacheKey=_e.sort().join("")};pi.prototype.getMaxValue=function(M){var O=this.binders[M];return O instanceof hi||O instanceof si?O.maxValue:0},pi.prototype.populatePaintArrays=function(M,O,Z,ae,_e){for(var Ee in this.binders){var je=this.binders[Ee];(je instanceof hi||je instanceof si||je instanceof ci)&&je.populatePaintArray(M,O,Z,ae,_e)}},pi.prototype.setConstantPatternPositions=function(M,O){for(var Z in this.binders){var ae=this.binders[Z];ae instanceof yi&&ae.setConstantPatternPositions(M,O)}},pi.prototype.updatePaintArrays=function(M,O,Z,ae,_e){var Ee=!1;for(var je in M)for(var Qe=0,st=O.getPositions(je);Qe<st.length;Qe+=1){var xt=st[Qe],Tt=Z.feature(xt.index);for(var jt in this.binders){var Ht=this.binders[jt];if((Ht instanceof hi||Ht instanceof si||Ht instanceof ci)&&Ht.expression.isStateDependent===!0){var Vt=ae.paint.get(jt);Ht.expression=Vt.value,Ht.updatePaintArray(xt.start,xt.end,Tt,M[je],_e),Ee=!0}}}return Ee},pi.prototype.defines=function(){var M=[];for(var O in this.binders){var Z=this.binders[O];(Z instanceof ui||Z instanceof yi)&&M.push.apply(M,Z.uniformNames.map(function(ae){return"#define HAS_UNIFORM_"+ae}))}return M},pi.prototype.getPaintVertexBuffers=function(){return this._buffers},pi.prototype.getUniforms=function(M,O){var Z=[];for(var ae in this.binders){var _e=this.binders[ae];if(_e instanceof ui||_e instanceof yi||_e instanceof si)for(var Ee=0,je=_e.uniformNames;Ee<je.length;Ee+=1){var Qe=je[Ee];if(O[Qe]){var st=_e.getBinding(M,O[Qe],Qe);Z.push({name:Qe,property:ae,binding:st})}}}return Z},pi.prototype.setUniforms=function(M,O,Z,ae){for(var _e=0,Ee=O;_e<Ee.length;_e+=1){var je=Ee[_e],Qe=je.name,st=je.property,xt=je.binding;this.binders[st].setUniform(xt,ae,Z.get(st),Qe)}},pi.prototype.updatePaintBuffers=function(M){for(var O in this._buffers=[],this.binders){var Z=this.binders[O];if(M&&Z instanceof ci){var ae=M.fromScale===2?Z.zoomInPaintVertexBuffer:Z.zoomOutPaintVertexBuffer;ae&&this._buffers.push(ae)}else(Z instanceof hi||Z instanceof si)&&Z.paintVertexBuffer&&this._buffers.push(Z.paintVertexBuffer)}},pi.prototype.upload=function(M){for(var O in this.binders){var Z=this.binders[O];(Z instanceof hi||Z instanceof si||Z instanceof ci)&&Z.upload(M)}this.updatePaintBuffers()},pi.prototype.destroy=function(){for(var M in this.binders){var O=this.binders[M];(O instanceof hi||O instanceof si||O instanceof ci)&&O.destroy()}};var Si=function(M,O,Z,ae){ae===void 0&&(ae=function(){return!0}),this.programConfigurations={};for(var _e=0,Ee=O;_e<Ee.length;_e+=1){var je=Ee[_e];this.programConfigurations[je.id]=new pi(je,Z,ae,M)}this.needsUpload=!1,this._featureMap=new Jn,this._bufferOffset=0};function So(M,O){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(O+"-","").replace(/-/g,"_")]}function Fi(M,O,Z){var ae={color:{source:Oe,composite:De},number:{source:pt,composite:Oe}},_e=function(Ee){return{"line-pattern":{source:yt,composite:yt},"fill-pattern":{source:yt,composite:yt},"fill-extrusion-pattern":{source:yt,composite:yt}}[Ee]}(M);return _e&&_e[Z]||ae[O][Z]}Si.prototype.populatePaintArrays=function(M,O,Z,ae,_e,Ee){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(M,O,ae,_e,Ee);O.id!==void 0&&this._featureMap.add(O.id,Z,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},Si.prototype.updatePaintArrays=function(M,O,Z,ae){for(var _e=0,Ee=Z;_e<Ee.length;_e+=1){var je=Ee[_e];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(M,this._featureMap,O,je,ae)||this.needsUpload}},Si.prototype.get=function(M){return this.programConfigurations[M]},Si.prototype.upload=function(M){if(this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(M);this.needsUpload=!1}},Si.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},br("ConstantBinder",ui),br("CrossFadedConstantBinder",yi),br("SourceExpressionBinder",hi),br("CrossFadedCompositeBinder",ci),br("CompositeExpressionBinder",si),br("ProgramConfiguration",pi,{omit:["_buffers"]}),br("ProgramConfigurationSet",Si);var Br=8192,Gi,Qi=(Gi=15,{min:-1*Math.pow(2,Gi-1),max:Math.pow(2,Gi-1)-1});function ki(M){for(var O=Br/M.extent,Z=M.loadGeometry(),ae=0;ae<Z.length;ae++)for(var _e=Z[ae],Ee=0;Ee<_e.length;Ee++){var je=_e[Ee];je.x=Math.round(je.x*O),je.y=Math.round(je.y*O),(je.x<Qi.min||je.x>Qi.max||je.y<Qi.min||je.y>Qi.max)&&(S("Geometry exceeds allowed extent, reduce your vector tile buffer size"),je.x=a(je.x,Qi.min,Qi.max),je.y=a(je.y,Qi.min,Qi.max))}return Z}function Ga(M,O,Z,ae,_e){M.emplaceBack(2*O+(ae+1)/2,2*Z+(_e+1)/2)}var Yr=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new Je,this.indexArray=new Ne,this.segments=new en,this.programConfigurations=new Si(Wt,M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function Bi(M,O){for(var Z=0;Z<M.length;Z++)if(hl(O,M[Z]))return!0;for(var ae=0;ae<O.length;ae++)if(hl(M,O[ae]))return!0;return!!$l(M,O)}function ha(M,O,Z){return!!hl(M,O)||!!fl(O,M,Z)}function Bs(M,O){if(M.length===1)return bl(O,M[0]);for(var Z=0;Z<O.length;Z++)for(var ae=O[Z],_e=0;_e<ae.length;_e++)if(hl(M,ae[_e]))return!0;for(var Ee=0;Ee<M.length;Ee++)if(bl(O,M[Ee]))return!0;for(var je=0;je<O.length;je++)if($l(M,O[je]))return!0;return!1}function cc(M,O,Z){if(M.length>1){if($l(M,O))return!0;for(var ae=0;ae<O.length;ae++)if(fl(O[ae],M,Z))return!0}for(var _e=0;_e<M.length;_e++)if(fl(M[_e],O,Z))return!0;return!1}function $l(M,O){if(M.length===0||O.length===0)return!1;for(var Z=0;Z<M.length-1;Z++)for(var ae=M[Z],_e=M[Z+1],Ee=0;Ee<O.length-1;Ee++)if(fc(ae,_e,O[Ee],O[Ee+1]))return!0;return!1}function fc(M,O,Z,ae){return _(M,Z,ae)!==_(O,Z,ae)&&_(M,O,Z)!==_(M,O,ae)}function fl(M,O,Z){var ae=Z*Z;if(O.length===1)return M.distSqr(O[0])<ae;for(var _e=1;_e<O.length;_e++)if(Tu(M,O[_e-1],O[_e])<ae)return!0;return!1}function Tu(M,O,Z){var ae=O.distSqr(Z);if(ae===0)return M.distSqr(O);var _e=((M.x-O.x)*(Z.x-O.x)+(M.y-O.y)*(Z.y-O.y))/ae;return _e<0?M.distSqr(O):_e>1?M.distSqr(Z):M.distSqr(Z.sub(O)._mult(_e)._add(O))}function bl(M,O){for(var Z,ae,_e,Ee=!1,je=0;je<M.length;je++)for(var Qe=0,st=(Z=M[je]).length-1;Qe<Z.length;st=Qe++)ae=Z[Qe],_e=Z[st],ae.y>O.y!=_e.y>O.y&&O.x<(_e.x-ae.x)*(O.y-ae.y)/(_e.y-ae.y)+ae.x&&(Ee=!Ee);return Ee}function hl(M,O){for(var Z=!1,ae=0,_e=M.length-1;ae<M.length;_e=ae++){var Ee=M[ae],je=M[_e];Ee.y>O.y!=je.y>O.y&&O.x<(je.x-Ee.x)*(O.y-Ee.y)/(je.y-Ee.y)+Ee.x&&(Z=!Z)}return Z}function hc(M,O,Z){var ae=Z[0],_e=Z[2];if(M.x<ae.x&&O.x<ae.x||M.x>_e.x&&O.x>_e.x||M.y<ae.y&&O.y<ae.y||M.y>_e.y&&O.y>_e.y)return!1;var Ee=_(M,O,Z[0]);return Ee!==_(M,O,Z[1])||Ee!==_(M,O,Z[2])||Ee!==_(M,O,Z[3])}function el(M,O,Z){var ae=O.paint.get(M).value;return ae.kind==="constant"?ae.value:Z.programConfigurations.get(O.id).getMaxValue(M)}function ku(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Au(M,O,Z,ae,_e){if(!O[0]&&!O[1])return M;var Ee=t.convert(O)._mult(_e);Z==="viewport"&&Ee._rotate(-ae);for(var je=[],Qe=0;Qe<M.length;Qe++){var st=M[Qe];je.push(st.sub(Ee))}return je}Yr.prototype.populate=function(M,O,Z){var ae=this.layers[0],_e=[],Ee=null;ae.type==="circle"&&(Ee=ae.layout.get("circle-sort-key"));for(var je=0,Qe=M;je<Qe.length;je+=1){var st=Qe[je],xt=st.feature,Tt=st.id,jt=st.index,Ht=st.sourceLayerIndex,Vt=this.layers[0]._featureFilter.needGeometry,on={type:xt.type,id:Tt,properties:xt.properties,geometry:Vt?ki(xt):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),on,Z)){Vt||(on.geometry=ki(xt));var vn=Ee?Ee.evaluate(on,{},Z):void 0,Pn={id:Tt,properties:xt.properties,type:xt.type,sourceLayerIndex:Ht,index:jt,geometry:on.geometry,patterns:{},sortKey:vn};_e.push(Pn)}}Ee&&_e.sort(function(wr,Er){return wr.sortKey-Er.sortKey});for(var Cn=0,Bn=_e;Cn<Bn.length;Cn+=1){var Nn=Bn[Cn],Wn=Nn,Kn=Wn.geometry,tr=Wn.index,xr=Wn.sourceLayerIndex,hr=M[tr].feature;this.addFeature(Nn,Kn,tr,Z),O.featureIndex.insert(hr,Kn,tr,xr,this.index)}},Yr.prototype.update=function(M,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Z)},Yr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Yr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yr.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Wt),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Yr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Yr.prototype.addFeature=function(M,O,Z,ae){for(var _e=0,Ee=O;_e<Ee.length;_e+=1)for(var je=0,Qe=Ee[_e];je<Qe.length;je+=1){var st=Qe[je],xt=st.x,Tt=st.y;if(!(xt<0||xt>=Br||Tt<0||Tt>=Br)){var jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),Ht=jt.vertexLength;Ga(this.layoutVertexArray,xt,Tt,-1,-1),Ga(this.layoutVertexArray,xt,Tt,1,-1),Ga(this.layoutVertexArray,xt,Tt,1,1),Ga(this.layoutVertexArray,xt,Tt,-1,1),this.indexArray.emplaceBack(Ht,Ht+1,Ht+2),this.indexArray.emplaceBack(Ht,Ht+3,Ht+2),jt.vertexLength+=4,jt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,{},ae)},br("CircleBucket",Yr,{omit:["layers"]});var Oh=new $i({"circle-sort-key":new Or(qe.layout_circle["circle-sort-key"])}),Ih={paint:new $i({"circle-radius":new Or(qe.paint_circle["circle-radius"]),"circle-color":new Or(qe.paint_circle["circle-color"]),"circle-blur":new Or(qe.paint_circle["circle-blur"]),"circle-opacity":new Or(qe.paint_circle["circle-opacity"]),"circle-translate":new Mr(qe.paint_circle["circle-translate"]),"circle-translate-anchor":new Mr(qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Mr(qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Mr(qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Or(qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Or(qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Or(qe.paint_circle["circle-stroke-opacity"])}),layout:Oh},Eo=typeof Float32Array<"u"?Float32Array:Array;function pc(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function Kc(M,O,Z){var ae=O[0],_e=O[1],Ee=O[2],je=O[3],Qe=O[4],st=O[5],xt=O[6],Tt=O[7],jt=O[8],Ht=O[9],Vt=O[10],on=O[11],vn=O[12],Pn=O[13],Cn=O[14],Bn=O[15],Nn=Z[0],Wn=Z[1],Kn=Z[2],tr=Z[3];return M[0]=Nn*ae+Wn*Qe+Kn*jt+tr*vn,M[1]=Nn*_e+Wn*st+Kn*Ht+tr*Pn,M[2]=Nn*Ee+Wn*xt+Kn*Vt+tr*Cn,M[3]=Nn*je+Wn*Tt+Kn*on+tr*Bn,Nn=Z[4],Wn=Z[5],Kn=Z[6],tr=Z[7],M[4]=Nn*ae+Wn*Qe+Kn*jt+tr*vn,M[5]=Nn*_e+Wn*st+Kn*Ht+tr*Pn,M[6]=Nn*Ee+Wn*xt+Kn*Vt+tr*Cn,M[7]=Nn*je+Wn*Tt+Kn*on+tr*Bn,Nn=Z[8],Wn=Z[9],Kn=Z[10],tr=Z[11],M[8]=Nn*ae+Wn*Qe+Kn*jt+tr*vn,M[9]=Nn*_e+Wn*st+Kn*Ht+tr*Pn,M[10]=Nn*Ee+Wn*xt+Kn*Vt+tr*Cn,M[11]=Nn*je+Wn*Tt+Kn*on+tr*Bn,Nn=Z[12],Wn=Z[13],Kn=Z[14],tr=Z[15],M[12]=Nn*ae+Wn*Qe+Kn*jt+tr*vn,M[13]=Nn*_e+Wn*st+Kn*Ht+tr*Pn,M[14]=Nn*Ee+Wn*xt+Kn*Vt+tr*Cn,M[15]=Nn*je+Wn*Tt+Kn*on+tr*Bn,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,O=0,Z=arguments.length;Z--;)O+=M[Z]*M[Z];return Math.sqrt(O)});var Rh=Kc,Mu,zh=function(M,O,Z){return M[0]=O[0]-Z[0],M[1]=O[1]-Z[1],M[2]=O[2]-Z[2],M};function Su(M,O,Z){var ae=O[0],_e=O[1],Ee=O[2],je=O[3];return M[0]=Z[0]*ae+Z[4]*_e+Z[8]*Ee+Z[12]*je,M[1]=Z[1]*ae+Z[5]*_e+Z[9]*Ee+Z[13]*je,M[2]=Z[2]*ae+Z[6]*_e+Z[10]*Ee+Z[14]*je,M[3]=Z[3]*ae+Z[7]*_e+Z[11]*Ee+Z[15]*je,M}Mu=new Eo(3),Eo!=Float32Array&&(Mu[0]=0,Mu[1]=0,Mu[2]=0),function(){var M=new Eo(4);Eo!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[3]=0)}();var Dh=function(M){var O=M[0],Z=M[1];return O*O+Z*Z},Fh=(function(){var M=new Eo(2);Eo!=Float32Array&&(M[0]=0,M[1]=0)}(),function(M){function O(Z){M.call(this,Z,Ih)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(Z){return new Yr(Z)},O.prototype.queryRadius=function(Z){var ae=Z;return el("circle-radius",this,ae)+el("circle-stroke-width",this,ae)+ku(this.paint.get("circle-translate"))},O.prototype.queryIntersectsFeature=function(Z,ae,_e,Ee,je,Qe,st,xt){for(var Tt=Au(Z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Qe.angle,st),jt=this.paint.get("circle-radius").evaluate(ae,_e)+this.paint.get("circle-stroke-width").evaluate(ae,_e),Ht=this.paint.get("circle-pitch-alignment")==="map",Vt=Ht?Tt:function(xr,hr){return xr.map(function(wr){return $c(wr,hr)})}(Tt,xt),on=Ht?jt*st:jt,vn=0,Pn=Ee;vn<Pn.length;vn+=1)for(var Cn=0,Bn=Pn[vn];Cn<Bn.length;Cn+=1){var Nn=Bn[Cn],Wn=Ht?Nn:$c(Nn,xt),Kn=on,tr=Su([],[Nn.x,Nn.y,0,1],xt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Kn*=tr[3]/Qe.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Kn*=Qe.cameraToCenterDistance/tr[3]),ha(Vt,Wn,Kn))return!0}return!1},O}(fa));function $c(M,O){var Z=Su([],[M.x,M.y,0,1],O);return new t(Z[0]/Z[3],Z[1]/Z[3])}var Qc=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Yr);function dc(M,O,Z,ae){var _e=O.width,Ee=O.height;if(ae){if(ae instanceof Uint8ClampedArray)ae=new Uint8Array(ae.buffer);else if(ae.length!==_e*Ee*Z)throw new RangeError("mismatched image size")}else ae=new Uint8Array(_e*Ee*Z);return M.width=_e,M.height=Ee,M.data=ae,M}function ef(M,O,Z){var ae=O.width,_e=O.height;if(ae!==M.width||_e!==M.height){var Ee=dc({},{width:ae,height:_e},Z);gc(M,Ee,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,ae),height:Math.min(M.height,_e)},Z),M.width=ae,M.height=_e,M.data=Ee.data}}function gc(M,O,Z,ae,_e,Ee){if(_e.width===0||_e.height===0)return O;if(_e.width>M.width||_e.height>M.height||Z.x>M.width-_e.width||Z.y>M.height-_e.height)throw new RangeError("out of range source coordinates for image copy");if(_e.width>O.width||_e.height>O.height||ae.x>O.width-_e.width||ae.y>O.height-_e.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=M.data,Qe=O.data,st=0;st<_e.height;st++)for(var xt=((Z.y+st)*M.width+Z.x)*Ee,Tt=((ae.y+st)*O.width+ae.x)*Ee,jt=0;jt<_e.width*Ee;jt++)Qe[Tt+jt]=je[xt+jt];return O}br("HeatmapBucket",Qc,{omit:["layers"]});var _l=function(M,O){dc(this,M,1,O)};_l.prototype.resize=function(M){ef(this,M,1)},_l.prototype.clone=function(){return new _l({width:this.width,height:this.height},new Uint8Array(this.data))},_l.copy=function(M,O,Z,ae,_e){gc(M,O,Z,ae,_e,1)};var eo=function(M,O){dc(this,M,4,O)};eo.prototype.resize=function(M){ef(this,M,4)},eo.prototype.replace=function(M,O){O?this.data.set(M):M instanceof Uint8ClampedArray?this.data=new Uint8Array(M.buffer):this.data=M},eo.prototype.clone=function(){return new eo({width:this.width,height:this.height},new Uint8Array(this.data))},eo.copy=function(M,O,Z,ae,_e){gc(M,O,Z,ae,_e,4)},br("AlphaImage",_l),br("RGBAImage",eo);var Bh={paint:new $i({"heatmap-radius":new Or(qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Or(qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Mr(qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qa(qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Mr(qe.paint_heatmap["heatmap-opacity"])})};function tf(M,O){for(var Z=new Uint8Array(1024),ae={},_e=0,Ee=0;_e<256;_e++,Ee+=4){ae[O]=_e/255;var je=M.evaluate(ae);Z[Ee+0]=Math.floor(255*je.r/je.a),Z[Ee+1]=Math.floor(255*je.g/je.a),Z[Ee+2]=Math.floor(255*je.b/je.a),Z[Ee+3]=Math.floor(255*je.a)}return new eo({width:256,height:1},Z)}var Nh=function(M){function O(Z){M.call(this,Z,Bh),this._updateColorRamp()}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(Z){return new Qc(Z)},O.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="heatmap-color"&&this._updateColorRamp()},O.prototype._updateColorRamp=function(){var Z=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=tf(Z,"heatmapDensity"),this.colorRampTexture=null},O.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},O}(fa),jh={paint:new $i({"hillshade-illumination-direction":new Mr(qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Mr(qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Mr(qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Mr(qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Mr(qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Mr(qe.paint_hillshade["hillshade-accent-color"])})},Uh=function(M){function O(Z){M.call(this,Z,jh)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},O}(fa),nf=fi([{name:"a_pos",components:2,type:"Int16"}],4).members,vc=Eu,Vh=Eu;function Eu(M,O,Z){Z=Z||2;var ae,_e,Ee,je,Qe,st,xt,Tt=O&&O.length,jt=Tt?O[0]*Z:M.length,Ht=rf(M,0,jt,Z,!0),Vt=[];if(!Ht||Ht.next===Ht.prev)return Vt;if(Tt&&(Ht=function(vn,Pn,Cn,Bn){var Nn,Wn,Kn,tr=[];for(Nn=0,Wn=Pn.length;Nn<Wn;Nn++)(Kn=rf(vn,Pn[Nn]*Bn,Nn<Wn-1?Pn[Nn+1]*Bn:vn.length,Bn,!1))===Kn.next&&(Kn.steiner=!0),tr.push(Jh(Kn));for(tr.sort(Wh),Nn=0;Nn<tr.length;Nn++)Yh(tr[Nn],Cn),Cn=pl(Cn,Cn.next);return Cn}(M,O,Ht,Z)),M.length>80*Z){ae=Ee=M[0],_e=je=M[1];for(var on=Z;on<jt;on+=Z)(Qe=M[on])<ae&&(ae=Qe),(st=M[on+1])<_e&&(_e=st),Qe>Ee&&(Ee=Qe),st>je&&(je=st);xt=(xt=Math.max(Ee-ae,je-_e))!==0?1/xt:0}return Ql(Ht,Vt,Z,ae,_e,xt),Vt}function rf(M,O,Z,ae,_e){var Ee,je;if(_e===xc(M,O,Z,ae)>0)for(Ee=O;Ee<Z;Ee+=ae)je=sf(Ee,M[Ee],M[Ee+1],je);else for(Ee=Z-ae;Ee>=O;Ee-=ae)je=sf(Ee,M[Ee],M[Ee+1],je);return je&&Lu(je,je.next)&&(tu(je),je=je.next),je}function pl(M,O){if(!M)return M;O||(O=M);var Z,ae=M;do if(Z=!1,ae.steiner||!Lu(ae,ae.next)&&ea(ae.prev,ae,ae.next)!==0)ae=ae.next;else{if(tu(ae),(ae=O=ae.prev)===ae.next)break;Z=!0}while(Z||ae!==O);return O}function Ql(M,O,Z,ae,_e,Ee,je){if(M){!je&&Ee&&function(Tt,jt,Ht,Vt){var on=Tt;do on.z===null&&(on.z=mc(on.x,on.y,jt,Ht,Vt)),on.prevZ=on.prev,on.nextZ=on.next,on=on.next;while(on!==Tt);on.prevZ.nextZ=null,on.prevZ=null,function(vn){var Pn,Cn,Bn,Nn,Wn,Kn,tr,xr,hr=1;do{for(Cn=vn,vn=null,Wn=null,Kn=0;Cn;){for(Kn++,Bn=Cn,tr=0,Pn=0;Pn<hr&&(tr++,Bn=Bn.nextZ);Pn++);for(xr=hr;tr>0||xr>0&&Bn;)tr!==0&&(xr===0||!Bn||Cn.z<=Bn.z)?(Nn=Cn,Cn=Cn.nextZ,tr--):(Nn=Bn,Bn=Bn.nextZ,xr--),Wn?Wn.nextZ=Nn:vn=Nn,Nn.prevZ=Wn,Wn=Nn;Cn=Bn}Wn.nextZ=null,hr*=2}while(Kn>1)}(on)}(M,ae,_e,Ee);for(var Qe,st,xt=M;M.prev!==M.next;)if(Qe=M.prev,st=M.next,Ee?qh(M,ae,_e,Ee):Hh(M))O.push(Qe.i/Z),O.push(M.i/Z),O.push(st.i/Z),tu(M),M=st.next,xt=st.next;else if((M=st)===xt){je?je===1?Ql(M=Gh(pl(M),O,Z),O,Z,ae,_e,Ee,2):je===2&&Zh(M,O,Z,ae,_e,Ee):Ql(pl(M),O,Z,ae,_e,Ee,1);break}}}function Hh(M){var O=M.prev,Z=M,ae=M.next;if(ea(O,Z,ae)>=0)return!1;for(var _e=M.next.next;_e!==M.prev;){if(Ol(O.x,O.y,Z.x,Z.y,ae.x,ae.y,_e.x,_e.y)&&ea(_e.prev,_e,_e.next)>=0)return!1;_e=_e.next}return!0}function qh(M,O,Z,ae){var _e=M.prev,Ee=M,je=M.next;if(ea(_e,Ee,je)>=0)return!1;for(var Qe=_e.x<Ee.x?_e.x<je.x?_e.x:je.x:Ee.x<je.x?Ee.x:je.x,st=_e.y<Ee.y?_e.y<je.y?_e.y:je.y:Ee.y<je.y?Ee.y:je.y,xt=_e.x>Ee.x?_e.x>je.x?_e.x:je.x:Ee.x>je.x?Ee.x:je.x,Tt=_e.y>Ee.y?_e.y>je.y?_e.y:je.y:Ee.y>je.y?Ee.y:je.y,jt=mc(Qe,st,O,Z,ae),Ht=mc(xt,Tt,O,Z,ae),Vt=M.prevZ,on=M.nextZ;Vt&&Vt.z>=jt&&on&&on.z<=Ht;){if(Vt!==M.prev&&Vt!==M.next&&Ol(_e.x,_e.y,Ee.x,Ee.y,je.x,je.y,Vt.x,Vt.y)&&ea(Vt.prev,Vt,Vt.next)>=0||(Vt=Vt.prevZ,on!==M.prev&&on!==M.next&&Ol(_e.x,_e.y,Ee.x,Ee.y,je.x,je.y,on.x,on.y)&&ea(on.prev,on,on.next)>=0))return!1;on=on.nextZ}for(;Vt&&Vt.z>=jt;){if(Vt!==M.prev&&Vt!==M.next&&Ol(_e.x,_e.y,Ee.x,Ee.y,je.x,je.y,Vt.x,Vt.y)&&ea(Vt.prev,Vt,Vt.next)>=0)return!1;Vt=Vt.prevZ}for(;on&&on.z<=Ht;){if(on!==M.prev&&on!==M.next&&Ol(_e.x,_e.y,Ee.x,Ee.y,je.x,je.y,on.x,on.y)&&ea(on.prev,on,on.next)>=0)return!1;on=on.nextZ}return!0}function Gh(M,O,Z){var ae=M;do{var _e=ae.prev,Ee=ae.next.next;!Lu(_e,Ee)&&af(_e,ae,ae.next,Ee)&&eu(_e,Ee)&&eu(Ee,_e)&&(O.push(_e.i/Z),O.push(ae.i/Z),O.push(Ee.i/Z),tu(ae),tu(ae.next),ae=M=Ee),ae=ae.next}while(ae!==M);return pl(ae)}function Zh(M,O,Z,ae,_e,Ee){var je=M;do{for(var Qe=je.next.next;Qe!==je.prev;){if(je.i!==Qe.i&&Kh(je,Qe)){var st=of(je,Qe);return je=pl(je,je.next),st=pl(st,st.next),Ql(je,O,Z,ae,_e,Ee),void Ql(st,O,Z,ae,_e,Ee)}Qe=Qe.next}je=je.next}while(je!==M)}function Wh(M,O){return M.x-O.x}function Yh(M,O){if(O=function(ae,_e){var Ee,je=_e,Qe=ae.x,st=ae.y,xt=-1/0;do{if(st<=je.y&&st>=je.next.y&&je.next.y!==je.y){var Tt=je.x+(st-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(Tt<=Qe&&Tt>xt){if(xt=Tt,Tt===Qe){if(st===je.y)return je;if(st===je.next.y)return je.next}Ee=je.x<je.next.x?je:je.next}}je=je.next}while(je!==_e);if(!Ee)return null;if(Qe===xt)return Ee;var jt,Ht=Ee,Vt=Ee.x,on=Ee.y,vn=1/0;je=Ee;do Qe>=je.x&&je.x>=Vt&&Qe!==je.x&&Ol(st<on?Qe:xt,st,Vt,on,st<on?xt:Qe,st,je.x,je.y)&&(jt=Math.abs(st-je.y)/(Qe-je.x),eu(je,ae)&&(jt<vn||jt===vn&&(je.x>Ee.x||je.x===Ee.x&&Xh(Ee,je)))&&(Ee=je,vn=jt)),je=je.next;while(je!==Ht);return Ee}(M,O)){var Z=of(O,M);pl(O,O.next),pl(Z,Z.next)}}function Xh(M,O){return ea(M.prev,M,O.prev)<0&&ea(O.next,M,M.next)<0}function mc(M,O,Z,ae,_e){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-Z)*_e)|M<<8))|M<<4))|M<<2))|M<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ae)*_e)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function Jh(M){var O=M,Z=M;do(O.x<Z.x||O.x===Z.x&&O.y<Z.y)&&(Z=O),O=O.next;while(O!==M);return Z}function Ol(M,O,Z,ae,_e,Ee,je,Qe){return(_e-je)*(O-Qe)-(M-je)*(Ee-Qe)>=0&&(M-je)*(ae-Qe)-(Z-je)*(O-Qe)>=0&&(Z-je)*(Ee-Qe)-(_e-je)*(ae-Qe)>=0}function Kh(M,O){return M.next.i!==O.i&&M.prev.i!==O.i&&!function(Z,ae){var _e=Z;do{if(_e.i!==Z.i&&_e.next.i!==Z.i&&_e.i!==ae.i&&_e.next.i!==ae.i&&af(_e,_e.next,Z,ae))return!0;_e=_e.next}while(_e!==Z);return!1}(M,O)&&(eu(M,O)&&eu(O,M)&&function(Z,ae){var _e=Z,Ee=!1,je=(Z.x+ae.x)/2,Qe=(Z.y+ae.y)/2;do _e.y>Qe!=_e.next.y>Qe&&_e.next.y!==_e.y&&je<(_e.next.x-_e.x)*(Qe-_e.y)/(_e.next.y-_e.y)+_e.x&&(Ee=!Ee),_e=_e.next;while(_e!==Z);return Ee}(M,O)&&(ea(M.prev,M,O.prev)||ea(M,O.prev,O))||Lu(M,O)&&ea(M.prev,M,M.next)>0&&ea(O.prev,O,O.next)>0)}function ea(M,O,Z){return(O.y-M.y)*(Z.x-O.x)-(O.x-M.x)*(Z.y-O.y)}function Lu(M,O){return M.x===O.x&&M.y===O.y}function af(M,O,Z,ae){var _e=Pu(ea(M,O,Z)),Ee=Pu(ea(M,O,ae)),je=Pu(ea(Z,ae,M)),Qe=Pu(ea(Z,ae,O));return _e!==Ee&&je!==Qe||!(_e!==0||!Cu(M,Z,O))||!(Ee!==0||!Cu(M,ae,O))||!(je!==0||!Cu(Z,M,ae))||!(Qe!==0||!Cu(Z,O,ae))}function Cu(M,O,Z){return O.x<=Math.max(M.x,Z.x)&&O.x>=Math.min(M.x,Z.x)&&O.y<=Math.max(M.y,Z.y)&&O.y>=Math.min(M.y,Z.y)}function Pu(M){return M>0?1:M<0?-1:0}function eu(M,O){return ea(M.prev,M,M.next)<0?ea(M,O,M.next)>=0&&ea(M,M.prev,O)>=0:ea(M,O,M.prev)<0||ea(M,M.next,O)<0}function of(M,O){var Z=new yc(M.i,M.x,M.y),ae=new yc(O.i,O.x,O.y),_e=M.next,Ee=O.prev;return M.next=O,O.prev=M,Z.next=_e,_e.prev=Z,ae.next=Z,Z.prev=ae,Ee.next=ae,ae.prev=Ee,ae}function sf(M,O,Z,ae){var _e=new yc(M,O,Z);return ae?(_e.next=ae.next,_e.prev=ae,ae.next.prev=_e,ae.next=_e):(_e.prev=_e,_e.next=_e),_e}function tu(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function yc(M,O,Z){this.i=M,this.x=O,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xc(M,O,Z,ae){for(var _e=0,Ee=O,je=Z-ae;Ee<Z;Ee+=ae)_e+=(M[je]-M[Ee])*(M[Ee+1]+M[je+1]),je=Ee;return _e}function $h(M,O,Z,ae,_e){lf(M,O,Z||0,ae||M.length-1,_e||Qh)}function lf(M,O,Z,ae,_e){for(;ae>Z;){if(ae-Z>600){var Ee=ae-Z+1,je=O-Z+1,Qe=Math.log(Ee),st=.5*Math.exp(2*Qe/3),xt=.5*Math.sqrt(Qe*st*(Ee-st)/Ee)*(je-Ee/2<0?-1:1);lf(M,O,Math.max(Z,Math.floor(O-je*st/Ee+xt)),Math.min(ae,Math.floor(O+(Ee-je)*st/Ee+xt)),_e)}var Tt=M[O],jt=Z,Ht=ae;for(nu(M,Z,O),_e(M[ae],Tt)>0&&nu(M,Z,ae);jt<Ht;){for(nu(M,jt,Ht),jt++,Ht--;_e(M[jt],Tt)<0;)jt++;for(;_e(M[Ht],Tt)>0;)Ht--}_e(M[Z],Tt)===0?nu(M,Z,Ht):nu(M,++Ht,ae),Ht<=O&&(Z=Ht+1),O<=Ht&&(ae=Ht-1)}}function nu(M,O,Z){var ae=M[O];M[O]=M[Z],M[Z]=ae}function Qh(M,O){return M<O?-1:M>O?1:0}function bc(M,O){var Z=M.length;if(Z<=1)return[M];for(var ae,_e,Ee=[],je=0;je<Z;je++){var Qe=E(M[je]);Qe!==0&&(M[je].area=Math.abs(Qe),_e===void 0&&(_e=Qe<0),_e===Qe<0?(ae&&Ee.push(ae),ae=[M[je]]):ae.push(M[je]))}if(ae&&Ee.push(ae),O>1)for(var st=0;st<Ee.length;st++)Ee[st].length<=O||($h(Ee[st],O,1,Ee[st].length-1,ep),Ee[st]=Ee[st].slice(0,O));return Ee}function ep(M,O){return O.area-M.area}function _c(M,O,Z){for(var ae=Z.patternDependencies,_e=!1,Ee=0,je=O;Ee<je.length;Ee+=1){var Qe=je[Ee].paint.get(M+"-pattern");Qe.isConstant()||(_e=!0);var st=Qe.constantOr(null);st&&(_e=!0,ae[st.to]=!0,ae[st.from]=!0)}return _e}function wc(M,O,Z,ae,_e){for(var Ee=_e.patternDependencies,je=0,Qe=O;je<Qe.length;je+=1){var st=Qe[je],xt=st.paint.get(M+"-pattern").value;if(xt.kind!=="constant"){var Tt=xt.evaluate({zoom:ae-1},Z,{},_e.availableImages),jt=xt.evaluate({zoom:ae},Z,{},_e.availableImages),Ht=xt.evaluate({zoom:ae+1},Z,{},_e.availableImages);Tt=Tt&&Tt.name?Tt.name:Tt,jt=jt&&jt.name?jt.name:jt,Ht=Ht&&Ht.name?Ht.name:Ht,Ee[Tt]=!0,Ee[jt]=!0,Ee[Ht]=!0,Z.patterns[st.id]={min:Tt,mid:jt,max:Ht}}}return Z}Eu.deviation=function(M,O,Z,ae){var _e=O&&O.length,Ee=_e?O[0]*Z:M.length,je=Math.abs(xc(M,0,Ee,Z));if(_e)for(var Qe=0,st=O.length;Qe<st;Qe++){var xt=O[Qe]*Z,Tt=Qe<st-1?O[Qe+1]*Z:M.length;je-=Math.abs(xc(M,xt,Tt,Z))}var jt=0;for(Qe=0;Qe<ae.length;Qe+=3){var Ht=ae[Qe]*Z,Vt=ae[Qe+1]*Z,on=ae[Qe+2]*Z;jt+=Math.abs((M[Ht]-M[on])*(M[Vt+1]-M[Ht+1])-(M[Ht]-M[Vt])*(M[on+1]-M[Ht+1]))}return je===0&&jt===0?0:Math.abs((jt-je)/je)},Eu.flatten=function(M){for(var O=M[0][0].length,Z={vertices:[],holes:[],dimensions:O},ae=0,_e=0;_e<M.length;_e++){for(var Ee=0;Ee<M[_e].length;Ee++)for(var je=0;je<O;je++)Z.vertices.push(M[_e][Ee][je]);_e>0&&(ae+=M[_e-1].length,Z.holes.push(ae))}return Z},vc.default=Vh;var ws=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Je,this.indexArray=new Ne,this.indexArray2=new ue,this.programConfigurations=new Si(nf,M.layers,M.zoom),this.segments=new en,this.segments2=new en,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};ws.prototype.populate=function(M,O,Z){this.hasPattern=_c("fill",this.layers,O);for(var ae=this.layers[0].layout.get("fill-sort-key"),_e=[],Ee=0,je=M;Ee<je.length;Ee+=1){var Qe=je[Ee],st=Qe.feature,xt=Qe.id,Tt=Qe.index,jt=Qe.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,Vt={type:st.type,id:xt,properties:st.properties,geometry:Ht?ki(st):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),Vt,Z)){Ht||(Vt.geometry=ki(st));var on=ae?ae.evaluate(Vt,{},Z,O.availableImages):void 0,vn={id:xt,properties:st.properties,type:st.type,sourceLayerIndex:jt,index:Tt,geometry:Vt.geometry,patterns:{},sortKey:on};_e.push(vn)}}ae&&_e.sort(function(wr,Er){return wr.sortKey-Er.sortKey});for(var Pn=0,Cn=_e;Pn<Cn.length;Pn+=1){var Bn=Cn[Pn],Nn=Bn,Wn=Nn.geometry,Kn=Nn.index,tr=Nn.sourceLayerIndex;if(this.hasPattern){var xr=wc("fill",this.layers,Bn,this.zoom,O);this.patternFeatures.push(xr)}else this.addFeature(Bn,Wn,Kn,Z,{});var hr=M[Kn].feature;O.featureIndex.insert(hr,Wn,Kn,tr,this.index)}},ws.prototype.update=function(M,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Z)},ws.prototype.addFeatures=function(M,O,Z){for(var ae=0,_e=this.patternFeatures;ae<_e.length;ae+=1){var Ee=_e[ae];this.addFeature(Ee,Ee.geometry,Ee.index,O,Z)}},ws.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ws.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,nf),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ws.prototype.addFeature=function(M,O,Z,ae,_e){for(var Ee=0,je=bc(O,500);Ee<je.length;Ee+=1){for(var Qe=je[Ee],st=0,xt=0,Tt=Qe;xt<Tt.length;xt+=1)st+=Tt[xt].length;for(var jt=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray),Ht=jt.vertexLength,Vt=[],on=[],vn=0,Pn=Qe;vn<Pn.length;vn+=1){var Cn=Pn[vn];if(Cn.length!==0){Cn!==Qe[0]&&on.push(Vt.length/2);var Bn=this.segments2.prepareSegment(Cn.length,this.layoutVertexArray,this.indexArray2),Nn=Bn.vertexLength;this.layoutVertexArray.emplaceBack(Cn[0].x,Cn[0].y),this.indexArray2.emplaceBack(Nn+Cn.length-1,Nn),Vt.push(Cn[0].x),Vt.push(Cn[0].y);for(var Wn=1;Wn<Cn.length;Wn++)this.layoutVertexArray.emplaceBack(Cn[Wn].x,Cn[Wn].y),this.indexArray2.emplaceBack(Nn+Wn-1,Nn+Wn),Vt.push(Cn[Wn].x),Vt.push(Cn[Wn].y);Bn.vertexLength+=Cn.length,Bn.primitiveLength+=Cn.length}}for(var Kn=vc(Vt,on),tr=0;tr<Kn.length;tr+=3)this.indexArray.emplaceBack(Ht+Kn[tr],Ht+Kn[tr+1],Ht+Kn[tr+2]);jt.vertexLength+=st,jt.primitiveLength+=Kn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,_e,ae)},br("FillBucket",ws,{omit:["layers","patternFeatures"]});var tp=new $i({"fill-sort-key":new Or(qe.layout_fill["fill-sort-key"])}),np={paint:new $i({"fill-antialias":new Mr(qe.paint_fill["fill-antialias"]),"fill-opacity":new Or(qe.paint_fill["fill-opacity"]),"fill-color":new Or(qe.paint_fill["fill-color"]),"fill-outline-color":new Or(qe.paint_fill["fill-outline-color"]),"fill-translate":new Mr(qe.paint_fill["fill-translate"]),"fill-translate-anchor":new Mr(qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new as(qe.paint_fill["fill-pattern"])}),layout:tp},rp=function(M){function O(Z){M.call(this,Z,np)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.recalculate=function(Z,ae){M.prototype.recalculate.call(this,Z,ae);var _e=this.paint._values["fill-outline-color"];_e.value.kind==="constant"&&_e.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},O.prototype.createBucket=function(Z){return new ws(Z)},O.prototype.queryRadius=function(){return ku(this.paint.get("fill-translate"))},O.prototype.queryIntersectsFeature=function(Z,ae,_e,Ee,je,Qe,st){return Bs(Au(Z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Qe.angle,st),Ee)},O.prototype.isTileClipped=function(){return!0},O}(fa),uf=fi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,cf=Il;function Il(M,O,Z,ae,_e){this.properties={},this.extent=Z,this.type=0,this._pbf=M,this._geometry=-1,this._keys=ae,this._values=_e,M.readFields(ip,this,O)}function ip(M,O,Z){M==1?O.id=Z.readVarint():M==2?function(ae,_e){for(var Ee=ae.readVarint()+ae.pos;ae.pos<Ee;){var je=_e._keys[ae.readVarint()],Qe=_e._values[ae.readVarint()];_e.properties[je]=Qe}}(Z,O):M==3?O.type=Z.readVarint():M==4&&(O._geometry=Z.pos)}function ap(M){for(var O,Z,ae=0,_e=0,Ee=M.length,je=Ee-1;_e<Ee;je=_e++)O=M[_e],ae+=((Z=M[je]).x-O.x)*(O.y+Z.y);return ae}Il.types=["Unknown","Point","LineString","Polygon"],Il.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var O,Z=M.readVarint()+M.pos,ae=1,_e=0,Ee=0,je=0,Qe=[];M.pos<Z;){if(_e<=0){var st=M.readVarint();ae=7&st,_e=st>>3}if(_e--,ae===1||ae===2)Ee+=M.readSVarint(),je+=M.readSVarint(),ae===1&&(O&&Qe.push(O),O=[]),O.push(new t(Ee,je));else{if(ae!==7)throw new Error("unknown command "+ae);O&&O.push(O[0].clone())}}return O&&Qe.push(O),Qe},Il.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var O=M.readVarint()+M.pos,Z=1,ae=0,_e=0,Ee=0,je=1/0,Qe=-1/0,st=1/0,xt=-1/0;M.pos<O;){if(ae<=0){var Tt=M.readVarint();Z=7&Tt,ae=Tt>>3}if(ae--,Z===1||Z===2)(_e+=M.readSVarint())<je&&(je=_e),_e>Qe&&(Qe=_e),(Ee+=M.readSVarint())<st&&(st=Ee),Ee>xt&&(xt=Ee);else if(Z!==7)throw new Error("unknown command "+Z)}return[je,st,Qe,xt]},Il.prototype.toGeoJSON=function(M,O,Z){var ae,_e,Ee=this.extent*Math.pow(2,Z),je=this.extent*M,Qe=this.extent*O,st=this.loadGeometry(),xt=Il.types[this.type];function Tt(Vt){for(var on=0;on<Vt.length;on++){var vn=Vt[on],Pn=180-360*(vn.y+Qe)/Ee;Vt[on]=[360*(vn.x+je)/Ee-180,360/Math.PI*Math.atan(Math.exp(Pn*Math.PI/180))-90]}}switch(this.type){case 1:var jt=[];for(ae=0;ae<st.length;ae++)jt[ae]=st[ae][0];Tt(st=jt);break;case 2:for(ae=0;ae<st.length;ae++)Tt(st[ae]);break;case 3:for(st=function(Vt){var on=Vt.length;if(on<=1)return[Vt];for(var vn,Pn,Cn=[],Bn=0;Bn<on;Bn++){var Nn=ap(Vt[Bn]);Nn!==0&&(Pn===void 0&&(Pn=Nn<0),Pn===Nn<0?(vn&&Cn.push(vn),vn=[Vt[Bn]]):vn.push(Vt[Bn]))}return vn&&Cn.push(vn),Cn}(st),ae=0;ae<st.length;ae++)for(_e=0;_e<st[ae].length;_e++)Tt(st[ae][_e])}st.length===1?st=st[0]:xt="Multi"+xt;var Ht={type:"Feature",geometry:{type:xt,coordinates:st},properties:this.properties};return"id"in this&&(Ht.id=this.id),Ht};var ff=hf;function hf(M,O){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(op,this,O),this.length=this._features.length}function op(M,O,Z){M===15?O.version=Z.readVarint():M===1?O.name=Z.readString():M===5?O.extent=Z.readVarint():M===2?O._features.push(Z.pos):M===3?O._keys.push(Z.readString()):M===4&&O._values.push(function(ae){for(var _e=null,Ee=ae.readVarint()+ae.pos;ae.pos<Ee;){var je=ae.readVarint()>>3;_e=je===1?ae.readString():je===2?ae.readFloat():je===3?ae.readDouble():je===4?ae.readVarint64():je===5?ae.readVarint():je===6?ae.readSVarint():je===7?ae.readBoolean():null}return _e}(Z))}function sp(M,O,Z){if(M===3){var ae=new ff(Z,Z.readVarint()+Z.pos);ae.length&&(O[ae.name]=ae)}}hf.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var O=this._pbf.readVarint()+this._pbf.pos;return new cf(this._pbf,O,this.extent,this._keys,this._values)};var Rl={VectorTile:function(M,O){this.layers=M.readFields(sp,{},O)},VectorTileFeature:cf,VectorTileLayer:ff},lp=Rl.VectorTileFeature.types,Tc=Math.pow(2,13);function ru(M,O,Z,ae,_e,Ee,je,Qe){M.emplaceBack(O,Z,2*Math.floor(ae*Tc)+je,_e*Tc*2,Ee*Tc*2,Math.round(Qe))}var Ts=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new at,this.indexArray=new Ne,this.programConfigurations=new Si(uf,M.layers,M.zoom),this.segments=new en,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function up(M,O){return M.x===O.x&&(M.x<0||M.x>Br)||M.y===O.y&&(M.y<0||M.y>Br)}Ts.prototype.populate=function(M,O,Z){this.features=[],this.hasPattern=_c("fill-extrusion",this.layers,O);for(var ae=0,_e=M;ae<_e.length;ae+=1){var Ee=_e[ae],je=Ee.feature,Qe=Ee.id,st=Ee.index,xt=Ee.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,jt={type:je.type,id:Qe,properties:je.properties,geometry:Tt?ki(je):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),jt,Z)){var Ht={id:Qe,sourceLayerIndex:xt,index:st,geometry:Tt?jt.geometry:ki(je),properties:je.properties,type:je.type,patterns:{}};je.id!==void 0&&(Ht.id=je.id),this.hasPattern?this.features.push(wc("fill-extrusion",this.layers,Ht,this.zoom,O)):this.addFeature(Ht,Ht.geometry,st,Z,{}),O.featureIndex.insert(je,Ht.geometry,st,xt,this.index,!0)}}},Ts.prototype.addFeatures=function(M,O,Z){for(var ae=0,_e=this.features;ae<_e.length;ae+=1){var Ee=_e[ae],je=Ee.geometry;this.addFeature(Ee,je,Ee.index,O,Z)}},Ts.prototype.update=function(M,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Z)},Ts.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ts.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ts.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,uf),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Ts.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ts.prototype.addFeature=function(M,O,Z,ae,_e){for(var Ee=0,je=bc(O,500);Ee<je.length;Ee+=1){for(var Qe=je[Ee],st=0,xt=0,Tt=Qe;xt<Tt.length;xt+=1)st+=Tt[xt].length;for(var jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Ht=0,Vt=Qe;Ht<Vt.length;Ht+=1){var on=Vt[Ht];if(on.length!==0&&!((Jr=on).every(function(qr){return qr.x<0})||Jr.every(function(qr){return qr.x>Br})||Jr.every(function(qr){return qr.y<0})||Jr.every(function(qr){return qr.y>Br})))for(var vn=0,Pn=0;Pn<on.length;Pn++){var Cn=on[Pn];if(Pn>=1){var Bn=on[Pn-1];if(!up(Cn,Bn)){jt.vertexLength+4>en.MAX_VERTEX_ARRAY_LENGTH&&(jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Nn=Cn.sub(Bn)._perp()._unit(),Wn=Bn.dist(Cn);vn+Wn>32768&&(vn=0),ru(this.layoutVertexArray,Cn.x,Cn.y,Nn.x,Nn.y,0,0,vn),ru(this.layoutVertexArray,Cn.x,Cn.y,Nn.x,Nn.y,0,1,vn),vn+=Wn,ru(this.layoutVertexArray,Bn.x,Bn.y,Nn.x,Nn.y,0,0,vn),ru(this.layoutVertexArray,Bn.x,Bn.y,Nn.x,Nn.y,0,1,vn);var Kn=jt.vertexLength;this.indexArray.emplaceBack(Kn,Kn+2,Kn+1),this.indexArray.emplaceBack(Kn+1,Kn+2,Kn+3),jt.vertexLength+=4,jt.primitiveLength+=2}}}}if(jt.vertexLength+st>en.MAX_VERTEX_ARRAY_LENGTH&&(jt=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray)),lp[M.type]==="Polygon"){for(var tr=[],xr=[],hr=jt.vertexLength,wr=0,Er=Qe;wr<Er.length;wr+=1){var jr=Er[wr];if(jr.length!==0){jr!==Qe[0]&&xr.push(tr.length/2);for(var Pr=0;Pr<jr.length;Pr++){var Nr=jr[Pr];ru(this.layoutVertexArray,Nr.x,Nr.y,0,0,1,1,0),tr.push(Nr.x),tr.push(Nr.y)}}}for(var Ir=vc(tr,xr),Cr=0;Cr<Ir.length;Cr+=3)this.indexArray.emplaceBack(hr+Ir[Cr],hr+Ir[Cr+2],hr+Ir[Cr+1]);jt.primitiveLength+=Ir.length/3,jt.vertexLength+=st}}var Jr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,_e,ae)},br("FillExtrusionBucket",Ts,{omit:["layers","features"]});var cp={paint:new $i({"fill-extrusion-opacity":new Mr(qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Or(qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Mr(qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Mr(qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new as(qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Or(qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Or(qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Mr(qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},fp=function(M){function O(Z){M.call(this,Z,cp)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(Z){return new Ts(Z)},O.prototype.queryRadius=function(){return ku(this.paint.get("fill-extrusion-translate"))},O.prototype.is3D=function(){return!0},O.prototype.queryIntersectsFeature=function(Z,ae,_e,Ee,je,Qe,st,xt){var Tt=Au(Z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Qe.angle,st),jt=this.paint.get("fill-extrusion-height").evaluate(ae,_e),Ht=this.paint.get("fill-extrusion-base").evaluate(ae,_e),Vt=function(vn,Pn,Cn,Bn){for(var Nn=[],Wn=0,Kn=vn;Wn<Kn.length;Wn+=1){var tr=Kn[Wn],xr=[tr.x,tr.y,Bn,1];Su(xr,xr,Pn),Nn.push(new t(xr[0]/xr[3],xr[1]/xr[3]))}return Nn}(Tt,xt,0,0),on=function(vn,Pn,Cn,Bn){for(var Nn=[],Wn=[],Kn=Bn[8]*Pn,tr=Bn[9]*Pn,xr=Bn[10]*Pn,hr=Bn[11]*Pn,wr=Bn[8]*Cn,Er=Bn[9]*Cn,jr=Bn[10]*Cn,Pr=Bn[11]*Cn,Nr=0,Ir=vn;Nr<Ir.length;Nr+=1){for(var Cr=[],Jr=[],qr=0,bi=Ir[Nr];qr<bi.length;qr+=1){var Fr=bi[qr],gi=Fr.x,Ti=Fr.y,Ai=Bn[0]*gi+Bn[4]*Ti+Bn[12],Li=Bn[1]*gi+Bn[5]*Ti+Bn[13],_i=Bn[2]*gi+Bn[6]*Ti+Bn[14],ra=Bn[3]*gi+Bn[7]*Ti+Bn[15],Oi=_i+xr,da=ra+hr,Sa=Ai+wr,ba=Li+Er,Za=_i+jr,_a=ra+Pr,aa=new t((Ai+Kn)/da,(Li+tr)/da);aa.z=Oi/da,Cr.push(aa);var wa=new t(Sa/_a,ba/_a);wa.z=Za/_a,Jr.push(wa)}Nn.push(Cr),Wn.push(Jr)}return[Nn,Wn]}(Ee,Ht,jt,xt);return function(vn,Pn,Cn){var Bn=1/0;Bs(Cn,Pn)&&(Bn=pf(Cn,Pn[0]));for(var Nn=0;Nn<Pn.length;Nn++)for(var Wn=Pn[Nn],Kn=vn[Nn],tr=0;tr<Wn.length-1;tr++){var xr=Wn[tr],hr=Wn[tr+1],wr=Kn[tr],Er=[xr,hr,Kn[tr+1],wr,xr];Bi(Cn,Er)&&(Bn=Math.min(Bn,pf(Cn,Er)))}return Bn!==1/0&&Bn}(on[0],on[1],Vt)},O}(fa);function iu(M,O){return M.x*O.x+M.y*O.y}function pf(M,O){if(M.length===1){for(var Z,ae=0,_e=O[ae++];!Z||_e.equals(Z);)if(!(Z=O[ae++]))return 1/0;for(;ae<O.length;ae++){var Ee=O[ae],je=M[0],Qe=Z.sub(_e),st=Ee.sub(_e),xt=je.sub(_e),Tt=iu(Qe,Qe),jt=iu(Qe,st),Ht=iu(st,st),Vt=iu(xt,Qe),on=iu(xt,st),vn=Tt*Ht-jt*jt,Pn=(Ht*Vt-jt*on)/vn,Cn=(Tt*on-jt*Vt)/vn,Bn=1-Pn-Cn,Nn=_e.z*Bn+Z.z*Pn+Ee.z*Cn;if(isFinite(Nn))return Nn}return 1/0}for(var Wn=1/0,Kn=0,tr=O;Kn<tr.length;Kn+=1){var xr=tr[Kn];Wn=Math.min(Wn,xr.z)}return Wn}var df=fi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,hp=Rl.VectorTileFeature.types,pp=Math.cos(Math.PI/180*37.5),gf=Math.pow(2,14)/.5,to=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ft,this.indexArray=new Ne,this.programConfigurations=new Si(df,M.layers,M.zoom),this.segments=new en,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};to.prototype.populate=function(M,O,Z){this.hasPattern=_c("line",this.layers,O);for(var ae=this.layers[0].layout.get("line-sort-key"),_e=[],Ee=0,je=M;Ee<je.length;Ee+=1){var Qe=je[Ee],st=Qe.feature,xt=Qe.id,Tt=Qe.index,jt=Qe.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,Vt={type:st.type,id:xt,properties:st.properties,geometry:Ht?ki(st):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),Vt,Z)){Ht||(Vt.geometry=ki(st));var on=ae?ae.evaluate(Vt,{},Z):void 0,vn={id:xt,properties:st.properties,type:st.type,sourceLayerIndex:jt,index:Tt,geometry:Vt.geometry,patterns:{},sortKey:on};_e.push(vn)}}ae&&_e.sort(function(wr,Er){return wr.sortKey-Er.sortKey});for(var Pn=0,Cn=_e;Pn<Cn.length;Pn+=1){var Bn=Cn[Pn],Nn=Bn,Wn=Nn.geometry,Kn=Nn.index,tr=Nn.sourceLayerIndex;if(this.hasPattern){var xr=wc("line",this.layers,Bn,this.zoom,O);this.patternFeatures.push(xr)}else this.addFeature(Bn,Wn,Kn,Z,{});var hr=M[Kn].feature;O.featureIndex.insert(hr,Wn,Kn,tr,this.index)}},to.prototype.update=function(M,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Z)},to.prototype.addFeatures=function(M,O,Z){for(var ae=0,_e=this.patternFeatures;ae<_e.length;ae+=1){var Ee=_e[ae];this.addFeature(Ee,Ee.geometry,Ee.index,O,Z)}},to.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},to.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},to.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,df),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},to.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},to.prototype.addFeature=function(M,O,Z,ae,_e){for(var Ee=this.layers[0].layout,je=Ee.get("line-join").evaluate(M,{}),Qe=Ee.get("line-cap"),st=Ee.get("line-miter-limit"),xt=Ee.get("line-round-limit"),Tt=0,jt=O;Tt<jt.length;Tt+=1){var Ht=jt[Tt];this.addLine(Ht,M,je,Qe,st,xt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,_e,ae)},to.prototype.addLine=function(M,O,Z,ae,_e,Ee){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var je=0;je<M.length-1;je++)this.totalDistance+=M[je].dist(M[je+1]);this.updateScaledDistance()}for(var Qe=hp[O.type]==="Polygon",st=M.length;st>=2&&M[st-1].equals(M[st-2]);)st--;for(var xt=0;xt<st-1&&M[xt].equals(M[xt+1]);)xt++;if(!(st<(Qe?3:2))){Z==="bevel"&&(_e=1.05);var Tt,jt=this.overscaling<=16?122880/(512*this.overscaling):0,Ht=this.segments.prepareSegment(10*st,this.layoutVertexArray,this.indexArray),Vt=void 0,on=void 0,vn=void 0,Pn=void 0;this.e1=this.e2=-1,Qe&&(Tt=M[st-2],Pn=M[xt].sub(Tt)._unit()._perp());for(var Cn=xt;Cn<st;Cn++)if(!(on=Cn===st-1?Qe?M[xt+1]:void 0:M[Cn+1])||!M[Cn].equals(on)){Pn&&(vn=Pn),Tt&&(Vt=Tt),Tt=M[Cn],Pn=on?on.sub(Tt)._unit()._perp():vn;var Bn=(vn=vn||Pn).add(Pn);Bn.x===0&&Bn.y===0||Bn._unit();var Nn=vn.x*Pn.x+vn.y*Pn.y,Wn=Bn.x*Pn.x+Bn.y*Pn.y,Kn=Wn!==0?1/Wn:1/0,tr=2*Math.sqrt(2-2*Wn),xr=Wn<pp&&Vt&&on,hr=vn.x*Pn.y-vn.y*Pn.x>0;if(xr&&Cn>xt){var wr=Tt.dist(Vt);if(wr>2*jt){var Er=Tt.sub(Tt.sub(Vt)._mult(jt/wr)._round());this.updateDistance(Vt,Er),this.addCurrentVertex(Er,vn,0,0,Ht),Vt=Er}}var jr=Vt&&on,Pr=jr?Z:Qe?"butt":ae;if(jr&&Pr==="round"&&(Kn<Ee?Pr="miter":Kn<=2&&(Pr="fakeround")),Pr==="miter"&&Kn>_e&&(Pr="bevel"),Pr==="bevel"&&(Kn>2&&(Pr="flipbevel"),Kn<_e&&(Pr="miter")),Vt&&this.updateDistance(Vt,Tt),Pr==="miter")Bn._mult(Kn),this.addCurrentVertex(Tt,Bn,0,0,Ht);else if(Pr==="flipbevel"){if(Kn>100)Bn=Pn.mult(-1);else{var Nr=Kn*vn.add(Pn).mag()/vn.sub(Pn).mag();Bn._perp()._mult(Nr*(hr?-1:1))}this.addCurrentVertex(Tt,Bn,0,0,Ht),this.addCurrentVertex(Tt,Bn.mult(-1),0,0,Ht)}else if(Pr==="bevel"||Pr==="fakeround"){var Ir=-Math.sqrt(Kn*Kn-1),Cr=hr?Ir:0,Jr=hr?0:Ir;if(Vt&&this.addCurrentVertex(Tt,vn,Cr,Jr,Ht),Pr==="fakeround")for(var qr=Math.round(180*tr/Math.PI/20),bi=1;bi<qr;bi++){var Fr=bi/qr;if(Fr!==.5){var gi=Fr-.5;Fr+=Fr*gi*(Fr-1)*((1.0904+Nn*(Nn*(3.55645-1.43519*Nn)-3.2452))*gi*gi+(.848013+Nn*(.215638*Nn-1.06021)))}var Ti=Pn.sub(vn)._mult(Fr)._add(vn)._unit()._mult(hr?-1:1);this.addHalfVertex(Tt,Ti.x,Ti.y,!1,hr,0,Ht)}on&&this.addCurrentVertex(Tt,Pn,-Cr,-Jr,Ht)}else if(Pr==="butt")this.addCurrentVertex(Tt,Bn,0,0,Ht);else if(Pr==="square"){var Ai=Vt?1:-1;this.addCurrentVertex(Tt,Bn,Ai,Ai,Ht)}else Pr==="round"&&(Vt&&(this.addCurrentVertex(Tt,vn,0,0,Ht),this.addCurrentVertex(Tt,vn,1,1,Ht,!0)),on&&(this.addCurrentVertex(Tt,Pn,-1,-1,Ht,!0),this.addCurrentVertex(Tt,Pn,0,0,Ht)));if(xr&&Cn<st-1){var Li=Tt.dist(on);if(Li>2*jt){var _i=Tt.add(on.sub(Tt)._mult(jt/Li)._round());this.updateDistance(Tt,_i),this.addCurrentVertex(_i,Pn,0,0,Ht),Tt=_i}}}}},to.prototype.addCurrentVertex=function(M,O,Z,ae,_e,Ee){Ee===void 0&&(Ee=!1);var je=O.x+O.y*Z,Qe=O.y-O.x*Z,st=-O.x+O.y*ae,xt=-O.y-O.x*ae;this.addHalfVertex(M,je,Qe,Ee,!1,Z,_e),this.addHalfVertex(M,st,xt,Ee,!0,-ae,_e),this.distance>gf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(M,O,Z,ae,_e,Ee))},to.prototype.addHalfVertex=function(M,O,Z,ae,_e,Ee,je){var Qe=M.x,st=M.y,xt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((Qe<<1)+(ae?1:0),(st<<1)+(_e?1:0),Math.round(63*O)+128,Math.round(63*Z)+128,1+(Ee===0?0:Ee<0?-1:1)|(63&xt)<<2,xt>>6);var Tt=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Tt),je.primitiveLength++),_e?this.e2=Tt:this.e1=Tt},to.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(gf-1):this.distance},to.prototype.updateDistance=function(M,O){this.distance+=M.dist(O),this.updateScaledDistance()},br("LineBucket",to,{omit:["layers","patternFeatures"]});var dp=new $i({"line-cap":new Mr(qe.layout_line["line-cap"]),"line-join":new Or(qe.layout_line["line-join"]),"line-miter-limit":new Mr(qe.layout_line["line-miter-limit"]),"line-round-limit":new Mr(qe.layout_line["line-round-limit"]),"line-sort-key":new Or(qe.layout_line["line-sort-key"])}),vf={paint:new $i({"line-opacity":new Or(qe.paint_line["line-opacity"]),"line-color":new Or(qe.paint_line["line-color"]),"line-translate":new Mr(qe.paint_line["line-translate"]),"line-translate-anchor":new Mr(qe.paint_line["line-translate-anchor"]),"line-width":new Or(qe.paint_line["line-width"]),"line-gap-width":new Or(qe.paint_line["line-gap-width"]),"line-offset":new Or(qe.paint_line["line-offset"]),"line-blur":new Or(qe.paint_line["line-blur"]),"line-dasharray":new ho(qe.paint_line["line-dasharray"]),"line-pattern":new as(qe.paint_line["line-pattern"]),"line-gradient":new qa(qe.paint_line["line-gradient"])}),layout:dp},gp=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.possiblyEvaluate=function(Z,ae){return ae=new ni(Math.floor(ae.zoom),{now:ae.now,fadeDuration:ae.fadeDuration,zoomHistory:ae.zoomHistory,transition:ae.transition}),M.prototype.possiblyEvaluate.call(this,Z,ae)},O.prototype.evaluate=function(Z,ae,_e,Ee){return ae=c({},ae,{zoom:Math.floor(ae.zoom)}),M.prototype.evaluate.call(this,Z,ae,_e,Ee)},O}(Or),mf=new gp(vf.paint.properties["line-width"].specification);mf.useIntegerZoom=!0;var vp=function(M){function O(Z){M.call(this,Z,vf)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="line-gradient"&&this._updateGradient()},O.prototype._updateGradient=function(){var Z=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=tf(Z,"lineProgress"),this.gradientTexture=null},O.prototype.recalculate=function(Z,ae){M.prototype.recalculate.call(this,Z,ae),this.paint._values["line-floorwidth"]=mf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Z)},O.prototype.createBucket=function(Z){return new to(Z)},O.prototype.queryRadius=function(Z){var ae=Z,_e=yf(el("line-width",this,ae),el("line-gap-width",this,ae)),Ee=el("line-offset",this,ae);return _e/2+Math.abs(Ee)+ku(this.paint.get("line-translate"))},O.prototype.queryIntersectsFeature=function(Z,ae,_e,Ee,je,Qe,st){var xt=Au(Z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Qe.angle,st),Tt=st/2*yf(this.paint.get("line-width").evaluate(ae,_e),this.paint.get("line-gap-width").evaluate(ae,_e)),jt=this.paint.get("line-offset").evaluate(ae,_e);return jt&&(Ee=function(Ht,Vt){for(var on=[],vn=new t(0,0),Pn=0;Pn<Ht.length;Pn++){for(var Cn=Ht[Pn],Bn=[],Nn=0;Nn<Cn.length;Nn++){var Wn=Cn[Nn-1],Kn=Cn[Nn],tr=Cn[Nn+1],xr=Nn===0?vn:Kn.sub(Wn)._unit()._perp(),hr=Nn===Cn.length-1?vn:tr.sub(Kn)._unit()._perp(),wr=xr._add(hr)._unit(),Er=wr.x*hr.x+wr.y*hr.y;wr._mult(1/Er),Bn.push(wr._mult(Vt)._add(Kn))}on.push(Bn)}return on}(Ee,jt*st)),function(Ht,Vt,on){for(var vn=0;vn<Vt.length;vn++){var Pn=Vt[vn];if(Ht.length>=3){for(var Cn=0;Cn<Pn.length;Cn++)if(hl(Ht,Pn[Cn]))return!0}if(cc(Ht,Pn,on))return!0}return!1}(xt,Ee,Tt)},O.prototype.isTileClipped=function(){return!0},O}(fa);function yf(M,O){return O>0?O+2*M:M}var kc=fi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mp=fi([{name:"a_projected_pos",components:3,type:"Float32"}],4),yp=(fi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),fi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),xf=(fi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),fi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),xp=fi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function bp(M,O,Z){return M.sections.forEach(function(ae){ae.text=function(_e,Ee,je){var Qe=Ee.layout.get("text-transform").evaluate(je,{});return Qe==="uppercase"?_e=_e.toLocaleUpperCase():Qe==="lowercase"&&(_e=_e.toLocaleLowerCase()),ua.applyArabicShaping&&(_e=ua.applyArabicShaping(_e)),_e}(ae.text,O,Z)}),M}fi([{name:"triangle",components:3,type:"Uint16"}]),fi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),fi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),fi([{type:"Float32",name:"offsetX"}]),fi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var au={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Ma=24,bf=function(M,O,Z,ae,_e){var Ee,je,Qe=8*_e-ae-1,st=(1<<Qe)-1,xt=st>>1,Tt=-7,jt=Z?_e-1:0,Ht=Z?-1:1,Vt=M[O+jt];for(jt+=Ht,Ee=Vt&(1<<-Tt)-1,Vt>>=-Tt,Tt+=Qe;Tt>0;Ee=256*Ee+M[O+jt],jt+=Ht,Tt-=8);for(je=Ee&(1<<-Tt)-1,Ee>>=-Tt,Tt+=ae;Tt>0;je=256*je+M[O+jt],jt+=Ht,Tt-=8);if(Ee===0)Ee=1-xt;else{if(Ee===st)return je?NaN:1/0*(Vt?-1:1);je+=Math.pow(2,ae),Ee-=xt}return(Vt?-1:1)*je*Math.pow(2,Ee-ae)},_f=function(M,O,Z,ae,_e,Ee){var je,Qe,st,xt=8*Ee-_e-1,Tt=(1<<xt)-1,jt=Tt>>1,Ht=_e===23?Math.pow(2,-24)-Math.pow(2,-77):0,Vt=ae?0:Ee-1,on=ae?1:-1,vn=O<0||O===0&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(Qe=isNaN(O)?1:0,je=Tt):(je=Math.floor(Math.log(O)/Math.LN2),O*(st=Math.pow(2,-je))<1&&(je--,st*=2),(O+=je+jt>=1?Ht/st:Ht*Math.pow(2,1-jt))*st>=2&&(je++,st/=2),je+jt>=Tt?(Qe=0,je=Tt):je+jt>=1?(Qe=(O*st-1)*Math.pow(2,_e),je+=jt):(Qe=O*Math.pow(2,jt-1)*Math.pow(2,_e),je=0));_e>=8;M[Z+Vt]=255&Qe,Vt+=on,Qe/=256,_e-=8);for(je=je<<_e|Qe,xt+=_e;xt>0;M[Z+Vt]=255&je,Vt+=on,je/=256,xt-=8);M[Z+Vt-on]|=128*vn},Ou=wi;function wi(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}wi.Varint=0,wi.Fixed64=1,wi.Bytes=2,wi.Fixed32=5;var Ac=4294967296,wf=1/Ac,Tf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function tl(M){return M.type===wi.Bytes?M.readVarint()+M.pos:M.pos+1}function zl(M,O,Z){return Z?4294967296*O+(M>>>0):4294967296*(O>>>0)+(M>>>0)}function kf(M,O,Z){var ae=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));Z.realloc(ae);for(var _e=Z.pos-1;_e>=M;_e--)Z.buf[_e+ae]=Z.buf[_e]}function _p(M,O){for(var Z=0;Z<M.length;Z++)O.writeVarint(M[Z])}function wp(M,O){for(var Z=0;Z<M.length;Z++)O.writeSVarint(M[Z])}function Tp(M,O){for(var Z=0;Z<M.length;Z++)O.writeFloat(M[Z])}function kp(M,O){for(var Z=0;Z<M.length;Z++)O.writeDouble(M[Z])}function Ap(M,O){for(var Z=0;Z<M.length;Z++)O.writeBoolean(M[Z])}function Mp(M,O){for(var Z=0;Z<M.length;Z++)O.writeFixed32(M[Z])}function Sp(M,O){for(var Z=0;Z<M.length;Z++)O.writeSFixed32(M[Z])}function Ep(M,O){for(var Z=0;Z<M.length;Z++)O.writeFixed64(M[Z])}function Lp(M,O){for(var Z=0;Z<M.length;Z++)O.writeSFixed64(M[Z])}function Iu(M,O){return(M[O]|M[O+1]<<8|M[O+2]<<16)+16777216*M[O+3]}function Dl(M,O,Z){M[Z]=O,M[Z+1]=O>>>8,M[Z+2]=O>>>16,M[Z+3]=O>>>24}function Af(M,O){return(M[O]|M[O+1]<<8|M[O+2]<<16)+(M[O+3]<<24)}wi.prototype={destroy:function(){this.buf=null},readFields:function(M,O,Z){for(Z=Z||this.length;this.pos<Z;){var ae=this.readVarint(),_e=ae>>3,Ee=this.pos;this.type=7&ae,M(_e,O,this),this.pos===Ee&&this.skip(ae)}return O},readMessage:function(M,O){return this.readFields(M,O,this.readVarint()+this.pos)},readFixed32:function(){var M=Iu(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=Af(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Iu(this.buf,this.pos)+Iu(this.buf,this.pos+4)*Ac;return this.pos+=8,M},readSFixed64:function(){var M=Iu(this.buf,this.pos)+Af(this.buf,this.pos+4)*Ac;return this.pos+=8,M},readFloat:function(){var M=bf(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=bf(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var O,Z,ae=this.buf;return O=127&(Z=ae[this.pos++]),Z<128?O:(O|=(127&(Z=ae[this.pos++]))<<7,Z<128?O:(O|=(127&(Z=ae[this.pos++]))<<14,Z<128?O:(O|=(127&(Z=ae[this.pos++]))<<21,Z<128?O:function(_e,Ee,je){var Qe,st,xt=je.buf;if(Qe=(112&(st=xt[je.pos++]))>>4,st<128||(Qe|=(127&(st=xt[je.pos++]))<<3,st<128)||(Qe|=(127&(st=xt[je.pos++]))<<10,st<128)||(Qe|=(127&(st=xt[je.pos++]))<<17,st<128)||(Qe|=(127&(st=xt[je.pos++]))<<24,st<128)||(Qe|=(1&(st=xt[je.pos++]))<<31,st<128))return zl(_e,Qe,Ee);throw new Error("Expected varint not more than 10 bytes")}(O|=(15&(Z=ae[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var M=this.readVarint()+this.pos,O=this.pos;return this.pos=M,M-O>=12&&Tf?function(Z,ae,_e){return Tf.decode(Z.subarray(ae,_e))}(this.buf,O,M):function(Z,ae,_e){for(var Ee="",je=ae;je<_e;){var Qe,st,xt,Tt=Z[je],jt=null,Ht=Tt>239?4:Tt>223?3:Tt>191?2:1;if(je+Ht>_e)break;Ht===1?Tt<128&&(jt=Tt):Ht===2?(192&(Qe=Z[je+1]))==128&&(jt=(31&Tt)<<6|63&Qe)<=127&&(jt=null):Ht===3?(Qe=Z[je+1],st=Z[je+2],(192&Qe)==128&&(192&st)==128&&((jt=(15&Tt)<<12|(63&Qe)<<6|63&st)<=2047||jt>=55296&&jt<=57343)&&(jt=null)):Ht===4&&(Qe=Z[je+1],st=Z[je+2],xt=Z[je+3],(192&Qe)==128&&(192&st)==128&&(192&xt)==128&&((jt=(15&Tt)<<18|(63&Qe)<<12|(63&st)<<6|63&xt)<=65535||jt>=1114112)&&(jt=null)),jt===null?(jt=65533,Ht=1):jt>65535&&(jt-=65536,Ee+=String.fromCharCode(jt>>>10&1023|55296),jt=56320|1023&jt),Ee+=String.fromCharCode(jt),je+=Ht}return Ee}(this.buf,O,M)},readBytes:function(){var M=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,M);return this.pos=M,O},readPackedVarint:function(M,O){if(this.type!==wi.Bytes)return M.push(this.readVarint(O));var Z=tl(this);for(M=M||[];this.pos<Z;)M.push(this.readVarint(O));return M},readPackedSVarint:function(M){if(this.type!==wi.Bytes)return M.push(this.readSVarint());var O=tl(this);for(M=M||[];this.pos<O;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==wi.Bytes)return M.push(this.readBoolean());var O=tl(this);for(M=M||[];this.pos<O;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==wi.Bytes)return M.push(this.readFloat());var O=tl(this);for(M=M||[];this.pos<O;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==wi.Bytes)return M.push(this.readDouble());var O=tl(this);for(M=M||[];this.pos<O;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==wi.Bytes)return M.push(this.readFixed32());var O=tl(this);for(M=M||[];this.pos<O;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==wi.Bytes)return M.push(this.readSFixed32());var O=tl(this);for(M=M||[];this.pos<O;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==wi.Bytes)return M.push(this.readFixed64());var O=tl(this);for(M=M||[];this.pos<O;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==wi.Bytes)return M.push(this.readSFixed64());var O=tl(this);for(M=M||[];this.pos<O;)M.push(this.readSFixed64());return M},skip:function(M){var O=7&M;if(O===wi.Varint)for(;this.buf[this.pos++]>127;);else if(O===wi.Bytes)this.pos=this.readVarint()+this.pos;else if(O===wi.Fixed32)this.pos+=4;else{if(O!==wi.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(M,O){this.writeVarint(M<<3|O)},realloc:function(M){for(var O=this.length||16;O<this.pos+M;)O*=2;if(O!==this.length){var Z=new Uint8Array(O);Z.set(this.buf),this.buf=Z,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),Dl(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),Dl(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),Dl(this.buf,-1&M,this.pos),Dl(this.buf,Math.floor(M*wf),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),Dl(this.buf,-1&M,this.pos),Dl(this.buf,Math.floor(M*wf),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(O,Z){var ae,_e;if(O>=0?(ae=O%4294967296|0,_e=O/4294967296|0):(_e=~(-O/4294967296),4294967295^(ae=~(-O%4294967296))?ae=ae+1|0:(ae=0,_e=_e+1|0)),O>=18446744073709552e3||O<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),function(Ee,je,Qe){Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos]=127&Ee}(ae,0,Z),function(Ee,je){var Qe=(7&Ee)<<4;je.buf[je.pos++]|=Qe|((Ee>>>=3)?128:0),Ee&&(je.buf[je.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(je.buf[je.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(je.buf[je.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(je.buf[je.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(je.buf[je.pos++]=127&Ee)))))}(_e,Z)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(Boolean(M))},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var O=this.pos;this.pos=function(ae,_e,Ee){for(var je,Qe,st=0;st<_e.length;st++){if((je=_e.charCodeAt(st))>55295&&je<57344){if(!Qe){je>56319||st+1===_e.length?(ae[Ee++]=239,ae[Ee++]=191,ae[Ee++]=189):Qe=je;continue}if(je<56320){ae[Ee++]=239,ae[Ee++]=191,ae[Ee++]=189,Qe=je;continue}je=Qe-55296<<10|je-56320|65536,Qe=null}else Qe&&(ae[Ee++]=239,ae[Ee++]=191,ae[Ee++]=189,Qe=null);je<128?ae[Ee++]=je:(je<2048?ae[Ee++]=je>>6|192:(je<65536?ae[Ee++]=je>>12|224:(ae[Ee++]=je>>18|240,ae[Ee++]=je>>12&63|128),ae[Ee++]=je>>6&63|128),ae[Ee++]=63&je|128)}return Ee}(this.buf,M,this.pos);var Z=this.pos-O;Z>=128&&kf(O,Z,this),this.pos=O-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(M){this.realloc(4),_f(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),_f(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var O=M.length;this.writeVarint(O),this.realloc(O);for(var Z=0;Z<O;Z++)this.buf[this.pos++]=M[Z]},writeRawMessage:function(M,O){this.pos++;var Z=this.pos;M(O,this);var ae=this.pos-Z;ae>=128&&kf(Z,ae,this),this.pos=Z-1,this.writeVarint(ae),this.pos+=ae},writeMessage:function(M,O,Z){this.writeTag(M,wi.Bytes),this.writeRawMessage(O,Z)},writePackedVarint:function(M,O){O.length&&this.writeMessage(M,_p,O)},writePackedSVarint:function(M,O){O.length&&this.writeMessage(M,wp,O)},writePackedBoolean:function(M,O){O.length&&this.writeMessage(M,Ap,O)},writePackedFloat:function(M,O){O.length&&this.writeMessage(M,Tp,O)},writePackedDouble:function(M,O){O.length&&this.writeMessage(M,kp,O)},writePackedFixed32:function(M,O){O.length&&this.writeMessage(M,Mp,O)},writePackedSFixed32:function(M,O){O.length&&this.writeMessage(M,Sp,O)},writePackedFixed64:function(M,O){O.length&&this.writeMessage(M,Ep,O)},writePackedSFixed64:function(M,O){O.length&&this.writeMessage(M,Lp,O)},writeBytesField:function(M,O){this.writeTag(M,wi.Bytes),this.writeBytes(O)},writeFixed32Field:function(M,O){this.writeTag(M,wi.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(M,O){this.writeTag(M,wi.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(M,O){this.writeTag(M,wi.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(M,O){this.writeTag(M,wi.Fixed64),this.writeSFixed64(O)},writeVarintField:function(M,O){this.writeTag(M,wi.Varint),this.writeVarint(O)},writeSVarintField:function(M,O){this.writeTag(M,wi.Varint),this.writeSVarint(O)},writeStringField:function(M,O){this.writeTag(M,wi.Bytes),this.writeString(O)},writeFloatField:function(M,O){this.writeTag(M,wi.Fixed32),this.writeFloat(O)},writeDoubleField:function(M,O){this.writeTag(M,wi.Fixed64),this.writeDouble(O)},writeBooleanField:function(M,O){this.writeVarintField(M,Boolean(O))}};function Cp(M,O,Z){M===1&&Z.readMessage(Pp,O)}function Pp(M,O,Z){if(M===3){var ae=Z.readMessage(Op,{}),_e=ae.id,Ee=ae.bitmap,je=ae.width,Qe=ae.height,st=ae.left,xt=ae.top,Tt=ae.advance;O.push({id:_e,bitmap:new _l({width:je+6,height:Qe+6},Ee),metrics:{width:je,height:Qe,left:st,top:xt,advance:Tt}})}}function Op(M,O,Z){M===1?O.id=Z.readVarint():M===2?O.bitmap=Z.readBytes():M===3?O.width=Z.readVarint():M===4?O.height=Z.readVarint():M===5?O.left=Z.readSVarint():M===6?O.top=Z.readSVarint():M===7&&(O.advance=Z.readVarint())}function Mf(M){for(var O=0,Z=0,ae=0,_e=M;ae<_e.length;ae+=1){var Ee=_e[ae];O+=Ee.w*Ee.h,Z=Math.max(Z,Ee.w)}M.sort(function(vn,Pn){return Pn.h-vn.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(O/.95)),Z),h:1/0}],Qe=0,st=0,xt=0,Tt=M;xt<Tt.length;xt+=1)for(var jt=Tt[xt],Ht=je.length-1;Ht>=0;Ht--){var Vt=je[Ht];if(!(jt.w>Vt.w||jt.h>Vt.h)){if(jt.x=Vt.x,jt.y=Vt.y,st=Math.max(st,jt.y+jt.h),Qe=Math.max(Qe,jt.x+jt.w),jt.w===Vt.w&&jt.h===Vt.h){var on=je.pop();Ht<je.length&&(je[Ht]=on)}else jt.h===Vt.h?(Vt.x+=jt.w,Vt.w-=jt.w):jt.w===Vt.w?(Vt.y+=jt.h,Vt.h-=jt.h):(je.push({x:Vt.x+jt.w,y:Vt.y,w:Vt.w-jt.w,h:jt.h}),Vt.y+=jt.h,Vt.h-=jt.h);break}}return{w:Qe,h:st,fill:O/(Qe*st)||0}}var Ru=function(M,O){var Z=O.pixelRatio,ae=O.version,_e=O.stretchX,Ee=O.stretchY,je=O.content;this.paddedRect=M,this.pixelRatio=Z,this.stretchX=_e,this.stretchY=Ee,this.content=je,this.version=ae},ou={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ou.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ou.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ou.tlbr.get=function(){return this.tl.concat(this.br)},ou.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ru.prototype,ou);var su=function(M,O){var Z={},ae={};this.haveRenderCallbacks=[];var _e=[];this.addImages(M,Z,_e),this.addImages(O,ae,_e);var Ee=Mf(_e),je=Ee.w,Qe=Ee.h,st=new eo({width:je||1,height:Qe||1});for(var xt in M){var Tt=M[xt],jt=Z[xt].paddedRect;eo.copy(Tt.data,st,{x:0,y:0},{x:jt.x+1,y:jt.y+1},Tt.data)}for(var Ht in O){var Vt=O[Ht],on=ae[Ht].paddedRect,vn=on.x+1,Pn=on.y+1,Cn=Vt.data.width,Bn=Vt.data.height;eo.copy(Vt.data,st,{x:0,y:0},{x:vn,y:Pn},Vt.data),eo.copy(Vt.data,st,{x:0,y:Bn-1},{x:vn,y:Pn-1},{width:Cn,height:1}),eo.copy(Vt.data,st,{x:0,y:0},{x:vn,y:Pn+Bn},{width:Cn,height:1}),eo.copy(Vt.data,st,{x:Cn-1,y:0},{x:vn-1,y:Pn},{width:1,height:Bn}),eo.copy(Vt.data,st,{x:0,y:0},{x:vn+Cn,y:Pn},{width:1,height:Bn})}this.image=st,this.iconPositions=Z,this.patternPositions=ae};su.prototype.addImages=function(M,O,Z){for(var ae in M){var _e=M[ae],Ee={x:0,y:0,w:_e.data.width+2,h:_e.data.height+2};Z.push(Ee),O[ae]=new Ru(Ee,_e),_e.hasRenderCallback&&this.haveRenderCallbacks.push(ae)}},su.prototype.patchUpdatedImages=function(M,O){for(var Z in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[Z],M.getImage(Z),O),this.patchUpdatedImage(this.patternPositions[Z],M.getImage(Z),O)},su.prototype.patchUpdatedImage=function(M,O,Z){if(M&&O&&M.version!==O.version){M.version=O.version;var ae=M.tl,_e=ae[0],Ee=ae[1];Z.update(O.data,void 0,{x:_e,y:Ee})}},br("ImagePosition",Ru),br("ImageAtlas",su);var Lo={horizontal:1,vertical:2,horizontalOnly:3},zu=-17,Fl=function(){this.scale=1,this.fontStack="",this.imageName=null};Fl.forText=function(M,O){var Z=new Fl;return Z.scale=M||1,Z.fontStack=O,Z},Fl.forImage=function(M){var O=new Fl;return O.imageName=M,O};var Na=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Du(M,O,Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt,on,vn){var Pn,Cn=Na.fromFeature(M,_e);jt===Lo.vertical&&Cn.verticalizePunctuation();var Bn=ua.processBidirectionalText,Nn=ua.processStyledBidirectionalText;if(Bn&&Cn.sections.length===1){Pn=[];for(var Wn=0,Kn=Bn(Cn.toString(),Mc(Cn,xt,Ee,O,ae,Vt,on));Wn<Kn.length;Wn+=1){var tr=Kn[Wn],xr=new Na;xr.text=tr,xr.sections=Cn.sections;for(var hr=0;hr<tr.length;hr++)xr.sectionIndex.push(0);Pn.push(xr)}}else if(Nn){Pn=[];for(var wr=0,Er=Nn(Cn.text,Cn.sectionIndex,Mc(Cn,xt,Ee,O,ae,Vt,on));wr<Er.length;wr+=1){var jr=Er[wr],Pr=new Na;Pr.text=jr[0],Pr.sectionIndex=jr[1],Pr.sections=Cn.sections,Pn.push(Pr)}}else Pn=function(Cr,Jr){for(var qr=[],bi=Cr.text,Fr=0,gi=0,Ti=Jr;gi<Ti.length;gi+=1){var Ai=Ti[gi];qr.push(Cr.substring(Fr,Ai)),Fr=Ai}return Fr<bi.length&&qr.push(Cr.substring(Fr,bi.length)),qr}(Cn,Mc(Cn,xt,Ee,O,ae,Vt,on));var Nr=[],Ir={positionedLines:Nr,text:Cn.toString(),top:Tt[1],bottom:Tt[1],left:Tt[0],right:Tt[0],writingMode:jt,iconsInText:!1,verticalizable:!1};return function(Cr,Jr,qr,bi,Fr,gi,Ti,Ai,Li,_i,ra,Oi){for(var da=0,Sa=zu,ba=0,Za=0,_a=Ai==="right"?1:Ai==="left"?0:.5,aa=0,wa=0,ga=Fr;wa<ga.length;wa+=1){var oa=ga[wa];oa.trim();var Gr=oa.getMaxScale(),ti=(Gr-1)*Ma,Ni={positionedGlyphs:[],lineOffset:0};Cr.positionedLines[aa]=Ni;var xi=Ni.positionedGlyphs,Ri=0;if(oa.length()){for(var Ci=0;Ci<oa.length();Ci++){var ii=oa.getSection(Ci),ji=oa.getSectionIndex(Ci),Wa=oa.getCharCode(Ci),vo=0,ja=null,ks=null,il=null,va=Ma,As=!(Li===Lo.horizontal||!ra&&!Ra(Wa)||ra&&(Fu[Wa]||bs(Wa)));if(ii.imageName){var ss=bi[ii.imageName];if(!ss)continue;il=ii.imageName,Cr.iconsInText=Cr.iconsInText||!0,ks=ss.paddedRect;var ls=ss.displaySize;ii.scale=ii.scale*Ma/Oi,ja={width:ls[0],height:ls[1],left:1,top:-3,advance:As?ls[1]:ls[0]},vo=ti+(Ma-ls[1]*ii.scale),va=ja.advance;var Al=As?ls[0]*ii.scale-Ma*Gr:ls[1]*ii.scale-Ma*Gr;Al>0&&Al>Ri&&(Ri=Al)}else{var Zu=qr[ii.fontStack],Ml=Zu&&Zu[Wa];if(Ml&&Ml.rect)ks=Ml.rect,ja=Ml.metrics;else{var Wu=Jr[ii.fontStack],cu=Wu&&Wu[Wa];if(!cu)continue;ja=cu.metrics}vo=(Gr-ii.scale)*Ma}As?(Cr.verticalizable=!0,xi.push({glyph:Wa,imageName:il,x:da,y:Sa+vo,vertical:As,scale:ii.scale,fontStack:ii.fontStack,sectionIndex:ji,metrics:ja,rect:ks}),da+=va*ii.scale+_i):(xi.push({glyph:Wa,imageName:il,x:da,y:Sa+vo,vertical:As,scale:ii.scale,fontStack:ii.fontStack,sectionIndex:ji,metrics:ja,rect:ks}),da+=ja.advance*ii.scale+_i)}if(xi.length!==0){var Dc=da-_i;ba=Math.max(Dc,ba),Rp(xi,0,xi.length-1,_a,Ri)}da=0;var Yu=gi*Gr+Ri;Ni.lineOffset=Math.max(Ri,ti),Sa+=Yu,Za=Math.max(Yu,Za),++aa}else Sa+=gi,++aa}var Gl=Sa-zu,Xu=Sc(Ti),Ju=Xu.horizontalAlign,fu=Xu.verticalAlign;(function(Fc,hu,Sl,Zl,Ku,$u,Wl,Qu,ec){var pu=(hu-Sl)*Ku,du=0;du=$u!==Wl?-Qu*Zl-zu:(-Zl*ec+.5)*Wl;for(var El=0,gu=Fc;El<gu.length;El+=1)for(var Ll=0,vu=gu[El].positionedGlyphs;Ll<vu.length;Ll+=1){var mu=vu[Ll];mu.x+=pu,mu.y+=du}})(Cr.positionedLines,_a,Ju,fu,ba,Za,gi,Gl,Fr.length),Cr.top+=-fu*Gl,Cr.bottom=Cr.top+Gl,Cr.left+=-Ju*ba,Cr.right=Cr.left+ba}(Ir,O,Z,ae,Pn,je,Qe,st,jt,xt,Ht,vn),!function(Cr){for(var Jr=0,qr=Cr;Jr<qr.length;Jr+=1)if(qr[Jr].positionedGlyphs.length!==0)return!1;return!0}(Nr)&&Ir}Na.fromFeature=function(M,O){for(var Z=new Na,ae=0;ae<M.sections.length;ae++){var _e=M.sections[ae];_e.image?Z.addImageSection(_e):Z.addTextSection(_e,O)}return Z},Na.prototype.length=function(){return this.text.length},Na.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},Na.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},Na.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},Na.prototype.verticalizePunctuation=function(){this.text=function(M){for(var O="",Z=0;Z<M.length;Z++){var ae=M.charCodeAt(Z+1)||null,_e=M.charCodeAt(Z-1)||null;ae&&zs(ae)&&!au[M[Z+1]]||_e&&zs(_e)&&!au[M[Z-1]]||!au[M[Z]]?O+=M[Z]:O+=au[M[Z]]}return O}(this.text)},Na.prototype.trim=function(){for(var M=0,O=0;O<this.text.length&&Fu[this.text.charCodeAt(O)];O++)M++;for(var Z=this.text.length,ae=this.text.length-1;ae>=0&&ae>=M&&Fu[this.text.charCodeAt(ae)];ae--)Z--;this.text=this.text.substring(M,Z),this.sectionIndex=this.sectionIndex.slice(M,Z)},Na.prototype.substring=function(M,O){var Z=new Na;return Z.text=this.text.substring(M,O),Z.sectionIndex=this.sectionIndex.slice(M,O),Z.sections=this.sections,Z},Na.prototype.toString=function(){return this.text},Na.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(O,Z){return Math.max(O,M.sections[Z].scale)},0)},Na.prototype.addTextSection=function(M,O){this.text+=M.text,this.sections.push(Fl.forText(M.scale,M.fontStack||O));for(var Z=this.sections.length-1,ae=0;ae<M.text.length;++ae)this.sectionIndex.push(Z)},Na.prototype.addImageSection=function(M){var O=M.image?M.image.name:"";if(O.length!==0){var Z=this.getNextImageSectionCharCode();Z?(this.text+=String.fromCharCode(Z),this.sections.push(Fl.forImage(O)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},Na.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Fu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},go={};function Sf(M,O,Z,ae,_e,Ee){if(O.imageName){var je=ae[O.imageName];return je?je.displaySize[0]*O.scale*Ma/Ee+_e:0}var Qe=Z[O.fontStack],st=Qe&&Qe[M];return st?st.metrics.advance*O.scale+_e:0}function Ef(M,O,Z,ae){var _e=Math.pow(M-O,2);return ae?M<O?_e/2:2*_e:_e+Math.abs(Z)*Z}function Ip(M,O,Z){var ae=0;return M===10&&(ae-=1e4),Z&&(ae+=150),M!==40&&M!==65288||(ae+=50),O!==41&&O!==65289||(ae+=50),ae}function Lf(M,O,Z,ae,_e,Ee){for(var je=null,Qe=Ef(O,Z,_e,Ee),st=0,xt=ae;st<xt.length;st+=1){var Tt=xt[st],jt=Ef(O-Tt.x,Z,_e,Ee)+Tt.badness;jt<=Qe&&(je=Tt,Qe=jt)}return{index:M,x:O,priorBreak:je,badness:Qe}}function Cf(M){return M?Cf(M.priorBreak).concat(M.index):[]}function Mc(M,O,Z,ae,_e,Ee,je){if(Ee!=="point")return[];if(!M)return[];for(var Qe=[],st=function(Pn,Cn,Bn,Nn,Wn,Kn){for(var tr=0,xr=0;xr<Pn.length();xr++){var hr=Pn.getSection(xr);tr+=Sf(Pn.getCharCode(xr),hr,Nn,Wn,Cn,Kn)}return tr/Math.max(1,Math.ceil(tr/Bn))}(M,O,Z,ae,_e,je),xt=M.text.indexOf("​")>=0,Tt=0,jt=0;jt<M.length();jt++){var Ht=M.getSection(jt),Vt=M.getCharCode(jt);if(Fu[Vt]||(Tt+=Sf(Vt,Ht,ae,_e,O,je)),jt<M.length()-1){var on=!((vn=Vt)<11904||!(_r["Bopomofo Extended"](vn)||_r.Bopomofo(vn)||_r["CJK Compatibility Forms"](vn)||_r["CJK Compatibility Ideographs"](vn)||_r["CJK Compatibility"](vn)||_r["CJK Radicals Supplement"](vn)||_r["CJK Strokes"](vn)||_r["CJK Symbols and Punctuation"](vn)||_r["CJK Unified Ideographs Extension A"](vn)||_r["CJK Unified Ideographs"](vn)||_r["Enclosed CJK Letters and Months"](vn)||_r["Halfwidth and Fullwidth Forms"](vn)||_r.Hiragana(vn)||_r["Ideographic Description Characters"](vn)||_r["Kangxi Radicals"](vn)||_r["Katakana Phonetic Extensions"](vn)||_r.Katakana(vn)||_r["Vertical Forms"](vn)||_r["Yi Radicals"](vn)||_r["Yi Syllables"](vn)));(go[Vt]||on||Ht.imageName)&&Qe.push(Lf(jt+1,Tt,st,Qe,Ip(Vt,M.getCharCode(jt+1),on&&xt),!1))}}var vn;return Cf(Lf(M.length(),Tt,st,Qe,0,!0))}function Sc(M){var O=.5,Z=.5;switch(M){case"right":case"top-right":case"bottom-right":O=1;break;case"left":case"top-left":case"bottom-left":O=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":Z=1;break;case"top":case"top-right":case"top-left":Z=0}return{horizontalAlign:O,verticalAlign:Z}}function Rp(M,O,Z,ae,_e){if(ae||_e)for(var Ee=M[Z],je=Ee.metrics.advance*Ee.scale,Qe=(M[Z].x+je)*ae,st=O;st<=Z;st++)M[st].x-=Qe,M[st].y+=_e}function Pf(M,O,Z,ae,_e,Ee){var je,Qe=M.image;if(Qe.content){var st=Qe.content,xt=Qe.pixelRatio||1;je=[st[0]/xt,st[1]/xt,Qe.displaySize[0]-st[2]/xt,Qe.displaySize[1]-st[3]/xt]}var Tt,jt,Ht,Vt,on=O.left*Ee,vn=O.right*Ee;Z==="width"||Z==="both"?(Vt=_e[0]+on-ae[3],jt=_e[0]+vn+ae[1]):jt=(Vt=_e[0]+(on+vn-Qe.displaySize[0])/2)+Qe.displaySize[0];var Pn=O.top*Ee,Cn=O.bottom*Ee;return Z==="height"||Z==="both"?(Tt=_e[1]+Pn-ae[0],Ht=_e[1]+Cn+ae[2]):Ht=(Tt=_e[1]+(Pn+Cn-Qe.displaySize[1])/2)+Qe.displaySize[1],{image:Qe,top:Tt,right:jt,bottom:Ht,left:Vt,collisionPadding:je}}go[10]=!0,go[32]=!0,go[38]=!0,go[40]=!0,go[41]=!0,go[43]=!0,go[45]=!0,go[47]=!0,go[173]=!0,go[183]=!0,go[8203]=!0,go[8208]=!0,go[8211]=!0,go[8231]=!0;var Bl=function(M){function O(Z,ae,_e,Ee){M.call(this,Z,ae),this.angle=_e,Ee!==void 0&&(this.segment=Ee)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.clone=function(){return new O(this.x,this.y,this.angle,this.segment)},O}(t);br("Anchor",Bl);var Ns=128;function Ec(M,O){var Z=O.expression;if(Z.kind==="constant")return{kind:"constant",layoutSize:Z.evaluate(new ni(M+1))};if(Z.kind==="source")return{kind:"source"};for(var ae=Z.zoomStops,_e=Z.interpolationType,Ee=0;Ee<ae.length&&ae[Ee]<=M;)Ee++;for(var je=Ee=Math.max(0,Ee-1);je<ae.length&&ae[je]<M+1;)je++;je=Math.min(ae.length-1,je);var Qe=ae[Ee],st=ae[je];return Z.kind==="composite"?{kind:"composite",minZoom:Qe,maxZoom:st,interpolationType:_e}:{kind:"camera",minZoom:Qe,maxZoom:st,minSize:Z.evaluate(new ni(Qe)),maxSize:Z.evaluate(new ni(st)),interpolationType:_e}}function Of(M,O,Z){var ae=O.uSize,_e=O.uSizeT,Ee=Z.lowerSize,je=Z.upperSize;return M.kind==="source"?Ee/Ns:M.kind==="composite"?Sr(Ee/Ns,je/Ns,_e):ae}function If(M,O){var Z=0,ae=0;if(M.kind==="constant")ae=M.layoutSize;else if(M.kind!=="source"){var _e=M.interpolationType,Ee=M.minZoom,je=M.maxZoom,Qe=_e?a(zi.interpolationFactor(_e,O,Ee,je),0,1):0;M.kind==="camera"?ae=Sr(M.minSize,M.maxSize,Qe):Z=Qe}return{uSizeT:Z,uSize:ae}}var zp=Object.freeze({__proto__:null,getSizeData:Ec,evaluateSizeForFeature:Of,evaluateSizeForZoom:If,SIZE_PACK_FACTOR:Ns});function Rf(M,O,Z,ae,_e){if(O.segment===void 0)return!0;for(var Ee=O,je=O.segment+1,Qe=0;Qe>-Z/2;){if(--je<0)return!1;Qe-=M[je].dist(Ee),Ee=M[je]}Qe+=M[je].dist(M[je+1]),je++;for(var st=[],xt=0;Qe<Z/2;){var Tt=M[je-1],jt=M[je],Ht=M[je+1];if(!Ht)return!1;var Vt=Tt.angleTo(jt)-jt.angleTo(Ht);for(Vt=Math.abs((Vt+3*Math.PI)%(2*Math.PI)-Math.PI),st.push({distance:Qe,angleDelta:Vt}),xt+=Vt;Qe-st[0].distance>ae;)xt-=st.shift().angleDelta;if(xt>_e)return!1;je++,Qe+=jt.dist(Ht)}return!0}function zf(M){for(var O=0,Z=0;Z<M.length-1;Z++)O+=M[Z].dist(M[Z+1]);return O}function Df(M,O,Z){return M?.6*O*Z:0}function Ff(M,O){return Math.max(M?M.right-M.left:0,O?O.right-O.left:0)}function Dp(M,O,Z,ae,_e,Ee){for(var je=Df(Z,_e,Ee),Qe=Ff(Z,ae)*Ee,st=0,xt=zf(M)/2,Tt=0;Tt<M.length-1;Tt++){var jt=M[Tt],Ht=M[Tt+1],Vt=jt.dist(Ht);if(st+Vt>xt){var on=(xt-st)/Vt,vn=Sr(jt.x,Ht.x,on),Pn=Sr(jt.y,Ht.y,on),Cn=new Bl(vn,Pn,Ht.angleTo(jt),Tt);return Cn._round(),!je||Rf(M,Cn,Qe,je,O)?Cn:void 0}st+=Vt}}function Fp(M,O,Z,ae,_e,Ee,je,Qe,st){var xt=Df(ae,Ee,je),Tt=Ff(ae,_e),jt=Tt*je,Ht=M[0].x===0||M[0].x===st||M[0].y===0||M[0].y===st;return O-jt<O/4&&(O=jt+O/4),Bf(M,Ht?O/2*Qe%O:(Tt/2+2*Ee)*je*Qe%O,O,xt,Z,jt,Ht,!1,st)}function Bf(M,O,Z,ae,_e,Ee,je,Qe,st){for(var xt=Ee/2,Tt=zf(M),jt=0,Ht=O-Z,Vt=[],on=0;on<M.length-1;on++){for(var vn=M[on],Pn=M[on+1],Cn=vn.dist(Pn),Bn=Pn.angleTo(vn);Ht+Z<jt+Cn;){var Nn=((Ht+=Z)-jt)/Cn,Wn=Sr(vn.x,Pn.x,Nn),Kn=Sr(vn.y,Pn.y,Nn);if(Wn>=0&&Wn<st&&Kn>=0&&Kn<st&&Ht-xt>=0&&Ht+xt<=Tt){var tr=new Bl(Wn,Kn,Bn,on);tr._round(),ae&&!Rf(M,tr,Ee,ae,_e)||Vt.push(tr)}}jt+=Cn}return Qe||Vt.length||je||(Vt=Bf(M,jt/2,Z,ae,_e,Ee,je,!0,st)),Vt}function Nf(M,O,Z,ae,_e){for(var Ee=[],je=0;je<M.length;je++)for(var Qe=M[je],st=void 0,xt=0;xt<Qe.length-1;xt++){var Tt=Qe[xt],jt=Qe[xt+1];Tt.x<O&&jt.x<O||(Tt.x<O?Tt=new t(O,Tt.y+(jt.y-Tt.y)*((O-Tt.x)/(jt.x-Tt.x)))._round():jt.x<O&&(jt=new t(O,Tt.y+(jt.y-Tt.y)*((O-Tt.x)/(jt.x-Tt.x)))._round()),Tt.y<Z&&jt.y<Z||(Tt.y<Z?Tt=new t(Tt.x+(jt.x-Tt.x)*((Z-Tt.y)/(jt.y-Tt.y)),Z)._round():jt.y<Z&&(jt=new t(Tt.x+(jt.x-Tt.x)*((Z-Tt.y)/(jt.y-Tt.y)),Z)._round()),Tt.x>=ae&&jt.x>=ae||(Tt.x>=ae?Tt=new t(ae,Tt.y+(jt.y-Tt.y)*((ae-Tt.x)/(jt.x-Tt.x)))._round():jt.x>=ae&&(jt=new t(ae,Tt.y+(jt.y-Tt.y)*((ae-Tt.x)/(jt.x-Tt.x)))._round()),Tt.y>=_e&&jt.y>=_e||(Tt.y>=_e?Tt=new t(Tt.x+(jt.x-Tt.x)*((_e-Tt.y)/(jt.y-Tt.y)),_e)._round():jt.y>=_e&&(jt=new t(Tt.x+(jt.x-Tt.x)*((_e-Tt.y)/(jt.y-Tt.y)),_e)._round()),st&&Tt.equals(st[st.length-1])||(st=[Tt],Ee.push(st)),st.push(jt)))))}return Ee}function jf(M,O,Z,ae){var _e=[],Ee=M.image,je=Ee.pixelRatio,Qe=Ee.paddedRect.w-2,st=Ee.paddedRect.h-2,xt=M.right-M.left,Tt=M.bottom-M.top,jt=Ee.stretchX||[[0,Qe]],Ht=Ee.stretchY||[[0,st]],Vt=function(gi,Ti){return gi+Ti[1]-Ti[0]},on=jt.reduce(Vt,0),vn=Ht.reduce(Vt,0),Pn=Qe-on,Cn=st-vn,Bn=0,Nn=on,Wn=0,Kn=vn,tr=0,xr=Pn,hr=0,wr=Cn;if(Ee.content&&ae){var Er=Ee.content;Bn=Bu(jt,0,Er[0]),Wn=Bu(Ht,0,Er[1]),Nn=Bu(jt,Er[0],Er[2]),Kn=Bu(Ht,Er[1],Er[3]),tr=Er[0]-Bn,hr=Er[1]-Wn,xr=Er[2]-Er[0]-Nn,wr=Er[3]-Er[1]-Kn}var jr=function(gi,Ti,Ai,Li){var _i=Nu(gi.stretch-Bn,Nn,xt,M.left),ra=ju(gi.fixed-tr,xr,gi.stretch,on),Oi=Nu(Ti.stretch-Wn,Kn,Tt,M.top),da=ju(Ti.fixed-hr,wr,Ti.stretch,vn),Sa=Nu(Ai.stretch-Bn,Nn,xt,M.left),ba=ju(Ai.fixed-tr,xr,Ai.stretch,on),Za=Nu(Li.stretch-Wn,Kn,Tt,M.top),_a=ju(Li.fixed-hr,wr,Li.stretch,vn),aa=new t(_i,Oi),wa=new t(Sa,Oi),ga=new t(Sa,Za),oa=new t(_i,Za),Gr=new t(ra/je,da/je),ti=new t(ba/je,_a/je),Ni=O*Math.PI/180;if(Ni){var xi=Math.sin(Ni),Ri=Math.cos(Ni),Ci=[Ri,-xi,xi,Ri];aa._matMult(Ci),wa._matMult(Ci),oa._matMult(Ci),ga._matMult(Ci)}var ii=gi.stretch+gi.fixed,ji=Ai.stretch+Ai.fixed,Wa=Ti.stretch+Ti.fixed,vo=Li.stretch+Li.fixed;return{tl:aa,tr:wa,bl:oa,br:ga,tex:{x:Ee.paddedRect.x+1+ii,y:Ee.paddedRect.y+1+Wa,w:ji-ii,h:vo-Wa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gr,pixelOffsetBR:ti,minFontScaleX:xr/je/xt,minFontScaleY:wr/je/Tt,isSDF:Z}};if(ae&&(Ee.stretchX||Ee.stretchY))for(var Pr=Uf(jt,Pn,on),Nr=Uf(Ht,Cn,vn),Ir=0;Ir<Pr.length-1;Ir++)for(var Cr=Pr[Ir],Jr=Pr[Ir+1],qr=0;qr<Nr.length-1;qr++){var bi=Nr[qr],Fr=Nr[qr+1];_e.push(jr(Cr,bi,Jr,Fr))}else _e.push(jr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Qe+1},{fixed:0,stretch:st+1}));return _e}function Bu(M,O,Z){for(var ae=0,_e=0,Ee=M;_e<Ee.length;_e+=1){var je=Ee[_e];ae+=Math.max(O,Math.min(Z,je[1]))-Math.max(O,Math.min(Z,je[0]))}return ae}function Uf(M,O,Z){for(var ae=[{fixed:-1,stretch:0}],_e=0,Ee=M;_e<Ee.length;_e+=1){var je=Ee[_e],Qe=je[0],st=je[1],xt=ae[ae.length-1];ae.push({fixed:Qe-xt.stretch,stretch:xt.stretch}),ae.push({fixed:Qe-xt.stretch,stretch:xt.stretch+(st-Qe)})}return ae.push({fixed:O+1,stretch:Z}),ae}function Nu(M,O,Z,ae){return M/O*Z+ae}function ju(M,O,Z,ae){return M-O*Z/ae}var Uu=function(M,O,Z,ae,_e,Ee,je,Qe,st,xt){if(this.boxStartIndex=M.length,st){var Tt=Ee.top,jt=Ee.bottom,Ht=Ee.collisionPadding;Ht&&(Tt-=Ht[1],jt+=Ht[3]);var Vt=jt-Tt;Vt>0&&(Vt=Math.max(10,Vt),this.circleDiameter=Vt)}else{var on=Ee.top*je-Qe,vn=Ee.bottom*je+Qe,Pn=Ee.left*je-Qe,Cn=Ee.right*je+Qe,Bn=Ee.collisionPadding;if(Bn&&(Pn-=Bn[0]*je,on-=Bn[1]*je,Cn+=Bn[2]*je,vn+=Bn[3]*je),xt){var Nn=new t(Pn,on),Wn=new t(Cn,on),Kn=new t(Pn,vn),tr=new t(Cn,vn),xr=xt*Math.PI/180;Nn._rotate(xr),Wn._rotate(xr),Kn._rotate(xr),tr._rotate(xr),Pn=Math.min(Nn.x,Wn.x,Kn.x,tr.x),Cn=Math.max(Nn.x,Wn.x,Kn.x,tr.x),on=Math.min(Nn.y,Wn.y,Kn.y,tr.y),vn=Math.max(Nn.y,Wn.y,Kn.y,tr.y)}M.emplaceBack(O.x,O.y,Pn,on,Cn,vn,Z,ae,_e)}this.boxEndIndex=M.length},Nl=function(M,O){if(M===void 0&&(M=[]),O===void 0&&(O=Bp),this.data=M,this.length=this.data.length,this.compare=O,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function Bp(M,O){return M<O?-1:M>O?1:0}function Np(M,O,Z){O===void 0&&(O=1),Z===void 0&&(Z=!1);for(var ae=1/0,_e=1/0,Ee=-1/0,je=-1/0,Qe=M[0],st=0;st<Qe.length;st++){var xt=Qe[st];(!st||xt.x<ae)&&(ae=xt.x),(!st||xt.y<_e)&&(_e=xt.y),(!st||xt.x>Ee)&&(Ee=xt.x),(!st||xt.y>je)&&(je=xt.y)}var Tt=Ee-ae,jt=je-_e,Ht=Math.min(Tt,jt),Vt=Ht/2,on=new Nl([],jp);if(Ht===0)return new t(ae,_e);for(var vn=ae;vn<Ee;vn+=Ht)for(var Pn=_e;Pn<je;Pn+=Ht)on.push(new jl(vn+Vt,Pn+Vt,Vt,M));for(var Cn=function(Wn){for(var Kn=0,tr=0,xr=0,hr=Wn[0],wr=0,Er=hr.length,jr=Er-1;wr<Er;jr=wr++){var Pr=hr[wr],Nr=hr[jr],Ir=Pr.x*Nr.y-Nr.x*Pr.y;tr+=(Pr.x+Nr.x)*Ir,xr+=(Pr.y+Nr.y)*Ir,Kn+=3*Ir}return new jl(tr/Kn,xr/Kn,0,Wn)}(M),Bn=on.length;on.length;){var Nn=on.pop();(Nn.d>Cn.d||!Cn.d)&&(Cn=Nn,Z&&console.log("found best %d after %d probes",Math.round(1e4*Nn.d)/1e4,Bn)),Nn.max-Cn.d<=O||(Vt=Nn.h/2,on.push(new jl(Nn.p.x-Vt,Nn.p.y-Vt,Vt,M)),on.push(new jl(Nn.p.x+Vt,Nn.p.y-Vt,Vt,M)),on.push(new jl(Nn.p.x-Vt,Nn.p.y+Vt,Vt,M)),on.push(new jl(Nn.p.x+Vt,Nn.p.y+Vt,Vt,M)),Bn+=4)}return Z&&(console.log("num probes: "+Bn),console.log("best distance: "+Cn.d)),Cn.p}function jp(M,O){return O.max-M.max}function jl(M,O,Z,ae){this.p=new t(M,O),this.h=Z,this.d=function(_e,Ee){for(var je=!1,Qe=1/0,st=0;st<Ee.length;st++)for(var xt=Ee[st],Tt=0,jt=xt.length,Ht=jt-1;Tt<jt;Ht=Tt++){var Vt=xt[Tt],on=xt[Ht];Vt.y>_e.y!=on.y>_e.y&&_e.x<(on.x-Vt.x)*(_e.y-Vt.y)/(on.y-Vt.y)+Vt.x&&(je=!je),Qe=Math.min(Qe,Tu(_e,Vt,on))}return(je?1:-1)*Math.sqrt(Qe)}(this.p,ae),this.max=this.d+this.h*Math.SQRT2}Nl.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},Nl.prototype.pop=function(){if(this.length!==0){var M=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),M}},Nl.prototype.peek=function(){return this.data[0]},Nl.prototype._up=function(M){for(var O=this.data,Z=this.compare,ae=O[M];M>0;){var _e=M-1>>1,Ee=O[_e];if(Z(ae,Ee)>=0)break;O[M]=Ee,M=_e}O[M]=ae},Nl.prototype._down=function(M){for(var O=this.data,Z=this.compare,ae=this.length>>1,_e=O[M];M<ae;){var Ee=1+(M<<1),je=O[Ee],Qe=Ee+1;if(Qe<this.length&&Z(O[Qe],je)<0&&(Ee=Qe,je=O[Qe]),Z(je,_e)>=0)break;O[M]=je,M=Ee}O[M]=_e};var Lc=Number.POSITIVE_INFINITY;function Vf(M,O){return O[1]!==Lc?function(Z,ae,_e){var Ee=0,je=0;switch(ae=Math.abs(ae),_e=Math.abs(_e),Z){case"top-right":case"top-left":case"top":je=_e-7;break;case"bottom-right":case"bottom-left":case"bottom":je=7-_e}switch(Z){case"top-right":case"bottom-right":case"right":Ee=-ae;break;case"top-left":case"bottom-left":case"left":Ee=ae}return[Ee,je]}(M,O[0],O[1]):function(Z,ae){var _e=0,Ee=0;ae<0&&(ae=0);var je=ae/Math.sqrt(2);switch(Z){case"top-right":case"top-left":Ee=je-7;break;case"bottom-right":case"bottom-left":Ee=7-je;break;case"bottom":Ee=7-ae;break;case"top":Ee=ae-7}switch(Z){case"top-right":case"bottom-right":_e=-je;break;case"top-left":case"bottom-left":_e=je;break;case"left":_e=ae;break;case"right":_e=-ae}return[_e,Ee]}(M,O[0])}function Cc(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var dl=32640;function Hf(M,O,Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt,on){var vn=function(Wn,Kn,tr,xr,hr,wr,Er,jr){for(var Pr=xr.layout.get("text-rotate").evaluate(wr,{})*Math.PI/180,Nr=[],Ir=0,Cr=Kn.positionedLines;Ir<Cr.length;Ir+=1)for(var Jr=Cr[Ir],qr=0,bi=Jr.positionedGlyphs;qr<bi.length;qr+=1){var Fr=bi[qr];if(Fr.rect){var gi=Fr.rect||{},Ti=4,Ai=!0,Li=1,_i=0,ra=(hr||jr)&&Fr.vertical,Oi=Fr.metrics.advance*Fr.scale/2;if(jr&&Kn.verticalizable){var da=(Fr.scale-1)*Ma,Sa=(Ma-Fr.metrics.width*Fr.scale)/2;_i=Jr.lineOffset/2-(Fr.imageName?-Sa:da)}if(Fr.imageName){var ba=Er[Fr.imageName];Ai=ba.sdf,Ti=1/(Li=ba.pixelRatio)}var Za=hr?[Fr.x+Oi,Fr.y]:[0,0],_a=hr?[0,0]:[Fr.x+Oi+tr[0],Fr.y+tr[1]-_i],aa=[0,0];ra&&(aa=_a,_a=[0,0]);var wa=(Fr.metrics.left-Ti)*Fr.scale-Oi+_a[0],ga=(-Fr.metrics.top-Ti)*Fr.scale+_a[1],oa=wa+gi.w*Fr.scale/Li,Gr=ga+gi.h*Fr.scale/Li,ti=new t(wa,ga),Ni=new t(oa,ga),xi=new t(wa,Gr),Ri=new t(oa,Gr);if(ra){var Ci=new t(-Oi,Oi-zu),ii=-Math.PI/2,ji=12-Oi,Wa=Fr.imageName?ji:0,vo=new t(22-ji,-Wa),ja=new(Function.prototype.bind.apply(t,[null].concat(aa)));ti._rotateAround(ii,Ci)._add(vo)._add(ja),Ni._rotateAround(ii,Ci)._add(vo)._add(ja),xi._rotateAround(ii,Ci)._add(vo)._add(ja),Ri._rotateAround(ii,Ci)._add(vo)._add(ja)}if(Pr){var ks=Math.sin(Pr),il=Math.cos(Pr),va=[il,-ks,ks,il];ti._matMult(va),Ni._matMult(va),xi._matMult(va),Ri._matMult(va)}var As=new t(0,0),ss=new t(0,0);Nr.push({tl:ti,tr:Ni,bl:xi,br:Ri,tex:gi,writingMode:Kn.writingMode,glyphOffset:Za,sectionIndex:Fr.sectionIndex,isSDF:Ai,pixelOffsetTL:As,pixelOffsetBR:ss,minFontScaleX:0,minFontScaleY:0})}}return Nr}(0,Z,Qe,_e,Ee,je,ae,M.allowVerticalPlacement),Pn=M.textSizeData,Cn=null;Pn.kind==="source"?(Cn=[Ns*_e.layout.get("text-size").evaluate(je,{})])[0]>dl&&S(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Pn.kind==="composite"&&((Cn=[Ns*Vt.compositeTextSizes[0].evaluate(je,{},on),Ns*Vt.compositeTextSizes[1].evaluate(je,{},on)])[0]>dl||Cn[1]>dl)&&S(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),M.addSymbols(M.text,vn,Cn,Qe,Ee,je,xt,O,st.lineStartIndex,st.lineLength,Ht,on);for(var Bn=0,Nn=Tt;Bn<Nn.length;Bn+=1)jt[Nn[Bn]]=M.text.placedSymbolArray.length-1;return 4*vn.length}function qf(M){for(var O in M)return M[O];return null}function Up(M,O,Z,ae){var _e=M.compareText;if(O in _e){for(var Ee=_e[O],je=Ee.length-1;je>=0;je--)if(ae.dist(Ee[je])<Z)return!0}else _e[O]=[];return _e[O].push(ae),!1}var Vp=Rl.VectorTileFeature.types,Hp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Vu(M,O,Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht){var Vt=Qe?Math.min(dl,Math.round(Qe[0])):0,on=Qe?Math.min(dl,Math.round(Qe[1])):0;M.emplaceBack(O,Z,Math.round(32*ae),Math.round(32*_e),Ee,je,(Vt<<1)+(st?1:0),on,16*xt,16*Tt,256*jt,256*Ht)}function Pc(M,O,Z){M.emplaceBack(O.x,O.y,Z),M.emplaceBack(O.x,O.y,Z),M.emplaceBack(O.x,O.y,Z),M.emplaceBack(O.x,O.y,Z)}function qp(M){for(var O=0,Z=M.sections;O<Z.length;O+=1)if(co(Z[O].text))return!0;return!1}var Ul=function(M){this.layoutVertexArray=new gt,this.indexArray=new Ne,this.programConfigurations=M,this.segments=new en,this.dynamicLayoutVertexArray=new D,this.opacityVertexArray=new Y,this.placedSymbolArray=new it};Ul.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ul.prototype.upload=function(M,O,Z,ae){this.isEmpty()||(Z&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,kc.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,mp.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,Hp,!0),this.opacityVertexBuffer.itemSize=1),(Z||ae)&&this.programConfigurations.upload(M))},Ul.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},br("SymbolBuffers",Ul);var lu=function(M,O,Z){this.layoutVertexArray=new M,this.layoutAttributes=O,this.indexArray=new Z,this.segments=new en,this.collisionVertexArray=new Le};lu.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,yp.members,!0)},lu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},br("CollisionBuffers",lu);var di=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=pc([]),this.placementViewportMatrix=pc([]);var O=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ec(this.zoom,O["text-size"]),this.iconSizeData=Ec(this.zoom,O["icon-size"]);var Z=this.layers[0].layout,ae=Z.get("symbol-sort-key"),_e=Z.get("symbol-z-order");this.sortFeaturesByKey=_e!=="viewport-y"&&ae.constantOr(1)!==void 0;var Ee=_e==="viewport-y"||_e==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ee&&(Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement")),Z.get("symbol-placement")==="point"&&(this.writingModes=Z.get("text-writing-mode").map(function(je){return Lo[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=M.sourceID};di.prototype.createArrays=function(){this.text=new Ul(new Si(kc.members,this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new Ul(new Si(kc.members,this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Ft,this.lineVertexArray=new Bt,this.symbolInstances=new At},di.prototype.calculateGlyphDependencies=function(M,O,Z,ae,_e){for(var Ee=0;Ee<M.length;Ee++)if(O[M.charCodeAt(Ee)]=!0,(Z||ae)&&_e){var je=au[M.charAt(Ee)];je&&(O[je.charCodeAt(0)]=!0)}},di.prototype.populate=function(M,O,Z){var ae=this.layers[0],_e=ae.layout,Ee=_e.get("text-font"),je=_e.get("text-field"),Qe=_e.get("icon-image"),st=(je.value.kind!=="constant"||je.value.value instanceof Dn&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&(Ee.value.kind!=="constant"||Ee.value.value.length>0),xt=Qe.value.kind!=="constant"||!!Qe.value.value||Object.keys(Qe.parameters).length>0,Tt=_e.get("symbol-sort-key");if(this.features=[],st||xt){for(var jt=O.iconDependencies,Ht=O.glyphDependencies,Vt=O.availableImages,on=new ni(this.zoom),vn=0,Pn=M;vn<Pn.length;vn+=1){var Cn=Pn[vn],Bn=Cn.feature,Nn=Cn.id,Wn=Cn.index,Kn=Cn.sourceLayerIndex,tr=ae._featureFilter.needGeometry,xr={type:Bn.type,id:Nn,properties:Bn.properties,geometry:tr?ki(Bn):[]};if(ae._featureFilter.filter(on,xr,Z)){tr||(xr.geometry=ki(Bn));var hr=void 0;if(st){var wr=ae.getValueAndResolveTokens("text-field",xr,Z,Vt),Er=Dn.factory(wr);qp(Er)&&(this.hasRTLText=!0),(!this.hasRTLText||Fa()==="unavailable"||this.hasRTLText&&ua.isParsed())&&(hr=bp(Er,ae,xr))}var jr=void 0;if(xt){var Pr=ae.getValueAndResolveTokens("icon-image",xr,Z,Vt);jr=Pr instanceof Zn?Pr:Zn.fromString(Pr)}if(hr||jr){var Nr=this.sortFeaturesByKey?Tt.evaluate(xr,{},Z):void 0,Ir={id:Nn,text:hr,icon:jr,index:Wn,sourceLayerIndex:Kn,geometry:ki(Bn),properties:Bn.properties,type:Vp[Bn.type],sortKey:Nr};if(this.features.push(Ir),jr&&(jt[jr.name]=!0),hr){var Cr=Ee.evaluate(xr,{},Z).join(","),Jr=_e.get("text-rotation-alignment")==="map"&&_e.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Lo.vertical)>=0;for(var qr=0,bi=hr.sections;qr<bi.length;qr+=1){var Fr=bi[qr];if(Fr.image)jt[Fr.image.name]=!0;else{var gi=is(hr.toString()),Ti=Fr.fontStack||Cr,Ai=Ht[Ti]=Ht[Ti]||{};this.calculateGlyphDependencies(Fr.text,Ai,Jr,this.allowVerticalPlacement,gi)}}}}}}_e.get("symbol-placement")==="line"&&(this.features=function(Li){var _i={},ra={},Oi=[],da=0;function Sa(Ri){Oi.push(Li[Ri]),da++}function ba(Ri,Ci,ii){var ji=ra[Ri];return delete ra[Ri],ra[Ci]=ji,Oi[ji].geometry[0].pop(),Oi[ji].geometry[0]=Oi[ji].geometry[0].concat(ii[0]),ji}function Za(Ri,Ci,ii){var ji=_i[Ci];return delete _i[Ci],_i[Ri]=ji,Oi[ji].geometry[0].shift(),Oi[ji].geometry[0]=ii[0].concat(Oi[ji].geometry[0]),ji}function _a(Ri,Ci,ii){var ji=ii?Ci[0][Ci[0].length-1]:Ci[0][0];return Ri+":"+ji.x+":"+ji.y}for(var aa=0;aa<Li.length;aa++){var wa=Li[aa],ga=wa.geometry,oa=wa.text?wa.text.toString():null;if(oa){var Gr=_a(oa,ga),ti=_a(oa,ga,!0);if(Gr in ra&&ti in _i&&ra[Gr]!==_i[ti]){var Ni=Za(Gr,ti,ga),xi=ba(Gr,ti,Oi[Ni].geometry);delete _i[Gr],delete ra[ti],ra[_a(oa,Oi[xi].geometry,!0)]=xi,Oi[Ni].geometry=null}else Gr in ra?ba(Gr,ti,ga):ti in _i?Za(Gr,ti,ga):(Sa(aa),_i[Gr]=da-1,ra[ti]=da-1)}else Sa(aa)}return Oi.filter(function(Ri){return Ri.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Li,_i){return Li.sortKey-_i.sortKey})}},di.prototype.update=function(M,O,Z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,O,this.layers,Z),this.icon.programConfigurations.updatePaintArrays(M,O,this.layers,Z))},di.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},di.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},di.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},di.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},di.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},di.prototype.addToLineVertexArray=function(M,O){var Z=this.lineVertexArray.length;if(M.segment!==void 0){for(var ae=M.dist(O[M.segment+1]),_e=M.dist(O[M.segment]),Ee={},je=M.segment+1;je<O.length;je++)Ee[je]={x:O[je].x,y:O[je].y,tileUnitDistanceFromAnchor:ae},je<O.length-1&&(ae+=O[je+1].dist(O[je]));for(var Qe=M.segment||0;Qe>=0;Qe--)Ee[Qe]={x:O[Qe].x,y:O[Qe].y,tileUnitDistanceFromAnchor:_e},Qe>0&&(_e+=O[Qe-1].dist(O[Qe]));for(var st=0;st<O.length;st++){var xt=Ee[st];this.lineVertexArray.emplaceBack(xt.x,xt.y,xt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Z,lineLength:this.lineVertexArray.length-Z}},di.prototype.addSymbols=function(M,O,Z,ae,_e,Ee,je,Qe,st,xt,Tt,jt){for(var Ht=M.indexArray,Vt=M.layoutVertexArray,on=M.segments.prepareSegment(4*O.length,Vt,Ht,Ee.sortKey),vn=this.glyphOffsetArray.length,Pn=on.vertexLength,Cn=this.allowVerticalPlacement&&je===Lo.vertical?Math.PI/2:0,Bn=Ee.text&&Ee.text.sections,Nn=0;Nn<O.length;Nn++){var Wn=O[Nn],Kn=Wn.tl,tr=Wn.tr,xr=Wn.bl,hr=Wn.br,wr=Wn.tex,Er=Wn.pixelOffsetTL,jr=Wn.pixelOffsetBR,Pr=Wn.minFontScaleX,Nr=Wn.minFontScaleY,Ir=Wn.glyphOffset,Cr=Wn.isSDF,Jr=Wn.sectionIndex,qr=on.vertexLength,bi=Ir[1];Vu(Vt,Qe.x,Qe.y,Kn.x,bi+Kn.y,wr.x,wr.y,Z,Cr,Er.x,Er.y,Pr,Nr),Vu(Vt,Qe.x,Qe.y,tr.x,bi+tr.y,wr.x+wr.w,wr.y,Z,Cr,jr.x,Er.y,Pr,Nr),Vu(Vt,Qe.x,Qe.y,xr.x,bi+xr.y,wr.x,wr.y+wr.h,Z,Cr,Er.x,jr.y,Pr,Nr),Vu(Vt,Qe.x,Qe.y,hr.x,bi+hr.y,wr.x+wr.w,wr.y+wr.h,Z,Cr,jr.x,jr.y,Pr,Nr),Pc(M.dynamicLayoutVertexArray,Qe,Cn),Ht.emplaceBack(qr,qr+1,qr+2),Ht.emplaceBack(qr+1,qr+2,qr+3),on.vertexLength+=4,on.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ir[0]),Nn!==O.length-1&&Jr===O[Nn+1].sectionIndex||M.programConfigurations.populatePaintArrays(Vt.length,Ee,Ee.index,{},jt,Bn&&Bn[Jr])}M.placedSymbolArray.emplaceBack(Qe.x,Qe.y,vn,this.glyphOffsetArray.length-vn,Pn,st,xt,Qe.segment,Z?Z[0]:0,Z?Z[1]:0,ae[0],ae[1],je,0,!1,0,Tt)},di.prototype._addCollisionDebugVertex=function(M,O,Z,ae,_e,Ee){return O.emplaceBack(0,0),M.emplaceBack(Z.x,Z.y,ae,_e,Math.round(Ee.x),Math.round(Ee.y))},di.prototype.addCollisionDebugVertices=function(M,O,Z,ae,_e,Ee,je){var Qe=_e.segments.prepareSegment(4,_e.layoutVertexArray,_e.indexArray),st=Qe.vertexLength,xt=_e.layoutVertexArray,Tt=_e.collisionVertexArray,jt=je.anchorX,Ht=je.anchorY;this._addCollisionDebugVertex(xt,Tt,Ee,jt,Ht,new t(M,O)),this._addCollisionDebugVertex(xt,Tt,Ee,jt,Ht,new t(Z,O)),this._addCollisionDebugVertex(xt,Tt,Ee,jt,Ht,new t(Z,ae)),this._addCollisionDebugVertex(xt,Tt,Ee,jt,Ht,new t(M,ae)),Qe.vertexLength+=4;var Vt=_e.indexArray;Vt.emplaceBack(st,st+1),Vt.emplaceBack(st+1,st+2),Vt.emplaceBack(st+2,st+3),Vt.emplaceBack(st+3,st),Qe.primitiveLength+=4},di.prototype.addDebugCollisionBoxes=function(M,O,Z,ae){for(var _e=M;_e<O;_e++){var Ee=this.collisionBoxArray.get(_e),je=Ee.x1,Qe=Ee.y1,st=Ee.x2,xt=Ee.y2;this.addCollisionDebugVertices(je,Qe,st,xt,ae?this.textCollisionBox:this.iconCollisionBox,Ee.anchorPoint,Z)}},di.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new lu(ne,xf.members,ue),this.iconCollisionBox=new lu(ne,xf.members,ue);for(var M=0;M<this.symbolInstances.length;M++){var O=this.symbolInstances.get(M);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},di.prototype._deserializeCollisionBoxesForSymbol=function(M,O,Z,ae,_e,Ee,je,Qe,st){for(var xt={},Tt=O;Tt<Z;Tt++){var jt=M.get(Tt);xt.textBox={x1:jt.x1,y1:jt.y1,x2:jt.x2,y2:jt.y2,anchorPointX:jt.anchorPointX,anchorPointY:jt.anchorPointY},xt.textFeatureIndex=jt.featureIndex;break}for(var Ht=ae;Ht<_e;Ht++){var Vt=M.get(Ht);xt.verticalTextBox={x1:Vt.x1,y1:Vt.y1,x2:Vt.x2,y2:Vt.y2,anchorPointX:Vt.anchorPointX,anchorPointY:Vt.anchorPointY},xt.verticalTextFeatureIndex=Vt.featureIndex;break}for(var on=Ee;on<je;on++){var vn=M.get(on);xt.iconBox={x1:vn.x1,y1:vn.y1,x2:vn.x2,y2:vn.y2,anchorPointX:vn.anchorPointX,anchorPointY:vn.anchorPointY},xt.iconFeatureIndex=vn.featureIndex;break}for(var Pn=Qe;Pn<st;Pn++){var Cn=M.get(Pn);xt.verticalIconBox={x1:Cn.x1,y1:Cn.y1,x2:Cn.x2,y2:Cn.y2,anchorPointX:Cn.anchorPointX,anchorPointY:Cn.anchorPointY},xt.verticalIconFeatureIndex=Cn.featureIndex;break}return xt},di.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var Z=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,Z.textBoxStartIndex,Z.textBoxEndIndex,Z.verticalTextBoxStartIndex,Z.verticalTextBoxEndIndex,Z.iconBoxStartIndex,Z.iconBoxEndIndex,Z.verticalIconBoxStartIndex,Z.verticalIconBoxEndIndex))}},di.prototype.hasTextData=function(){return this.text.segments.get().length>0},di.prototype.hasIconData=function(){return this.icon.segments.get().length>0},di.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},di.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},di.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},di.prototype.addIndicesForPlacedSymbol=function(M,O){for(var Z=M.placedSymbolArray.get(O),ae=Z.vertexStartIndex+4*Z.numGlyphs,_e=Z.vertexStartIndex;_e<ae;_e+=4)M.indexArray.emplaceBack(_e,_e+1,_e+2),M.indexArray.emplaceBack(_e+1,_e+2,_e+3)},di.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var O=Math.sin(M),Z=Math.cos(M),ae=[],_e=[],Ee=[],je=0;je<this.symbolInstances.length;++je){Ee.push(je);var Qe=this.symbolInstances.get(je);ae.push(0|Math.round(O*Qe.anchorX+Z*Qe.anchorY)),_e.push(Qe.featureIndex)}return Ee.sort(function(st,xt){return ae[st]-ae[xt]||_e[xt]-_e[st]}),Ee},di.prototype.addToSortKeyRanges=function(M,O){var Z=this.sortKeyRanges[this.sortKeyRanges.length-1];Z&&Z.sortKey===O?Z.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:M,symbolInstanceEnd:M+1})},di.prototype.sortFeatures=function(M){var O=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Z=0,ae=this.symbolInstanceIndexes;Z<ae.length;Z+=1){var _e=ae[Z],Ee=this.symbolInstances.get(_e);this.featureSortOrder.push(Ee.featureIndex),[Ee.rightJustifiedTextSymbolIndex,Ee.centerJustifiedTextSymbolIndex,Ee.leftJustifiedTextSymbolIndex].forEach(function(je,Qe,st){je>=0&&st.indexOf(je)===Qe&&O.addIndicesForPlacedSymbol(O.text,je)}),Ee.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ee.verticalPlacedTextSymbolIndex),Ee.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ee.placedIconSymbolIndex),Ee.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ee.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},br("SymbolBucket",di,{omit:["layers","collisionBoxArray","features","compareText"]}),di.MAX_GLYPHS=65535,di.addDynamicAttributes=Pc;var Gp=new $i({"symbol-placement":new Mr(qe.layout_symbol["symbol-placement"]),"symbol-spacing":new Mr(qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Mr(qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Or(qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Mr(qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Mr(qe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Mr(qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Mr(qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Mr(qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Or(qe.layout_symbol["icon-size"]),"icon-text-fit":new Mr(qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Mr(qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Or(qe.layout_symbol["icon-image"]),"icon-rotate":new Or(qe.layout_symbol["icon-rotate"]),"icon-padding":new Mr(qe.layout_symbol["icon-padding"]),"icon-keep-upright":new Mr(qe.layout_symbol["icon-keep-upright"]),"icon-offset":new Or(qe.layout_symbol["icon-offset"]),"icon-anchor":new Or(qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Mr(qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Mr(qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Mr(qe.layout_symbol["text-rotation-alignment"]),"text-field":new Or(qe.layout_symbol["text-field"]),"text-font":new Or(qe.layout_symbol["text-font"]),"text-size":new Or(qe.layout_symbol["text-size"]),"text-max-width":new Or(qe.layout_symbol["text-max-width"]),"text-line-height":new Mr(qe.layout_symbol["text-line-height"]),"text-letter-spacing":new Or(qe.layout_symbol["text-letter-spacing"]),"text-justify":new Or(qe.layout_symbol["text-justify"]),"text-radial-offset":new Or(qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Mr(qe.layout_symbol["text-variable-anchor"]),"text-anchor":new Or(qe.layout_symbol["text-anchor"]),"text-max-angle":new Mr(qe.layout_symbol["text-max-angle"]),"text-writing-mode":new Mr(qe.layout_symbol["text-writing-mode"]),"text-rotate":new Or(qe.layout_symbol["text-rotate"]),"text-padding":new Mr(qe.layout_symbol["text-padding"]),"text-keep-upright":new Mr(qe.layout_symbol["text-keep-upright"]),"text-transform":new Or(qe.layout_symbol["text-transform"]),"text-offset":new Or(qe.layout_symbol["text-offset"]),"text-allow-overlap":new Mr(qe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Mr(qe.layout_symbol["text-ignore-placement"]),"text-optional":new Mr(qe.layout_symbol["text-optional"])}),Oc={paint:new $i({"icon-opacity":new Or(qe.paint_symbol["icon-opacity"]),"icon-color":new Or(qe.paint_symbol["icon-color"]),"icon-halo-color":new Or(qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Or(qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Or(qe.paint_symbol["icon-halo-blur"]),"icon-translate":new Mr(qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Mr(qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Or(qe.paint_symbol["text-opacity"]),"text-color":new Or(qe.paint_symbol["text-color"],{runtimeType:It,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new Or(qe.paint_symbol["text-halo-color"]),"text-halo-width":new Or(qe.paint_symbol["text-halo-width"]),"text-halo-blur":new Or(qe.paint_symbol["text-halo-blur"]),"text-translate":new Mr(qe.paint_symbol["text-translate"]),"text-translate-anchor":new Mr(qe.paint_symbol["text-translate-anchor"])}),layout:Gp},Vl=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:mt,this.defaultValue=M};Vl.prototype.evaluate=function(M){if(M.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(M.formattedSection))return O.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},Vl.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},Vl.prototype.outputDefined=function(){return!1},Vl.prototype.serialize=function(){return null},br("FormatSectionOverride",Vl,{omit:["defaultValue"]});var Zp=function(M){function O(Z){M.call(this,Z,Oc)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.recalculate=function(Z,ae){if(M.prototype.recalculate.call(this,Z,ae),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var _e=this.layout.get("text-writing-mode");if(_e){for(var Ee=[],je=0,Qe=_e;je<Qe.length;je+=1){var st=Qe[je];Ee.indexOf(st)<0&&Ee.push(st)}this.layout._values["text-writing-mode"]=Ee}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},O.prototype.getValueAndResolveTokens=function(Z,ae,_e,Ee){var je=this.layout.get(Z).evaluate(ae,{},_e,Ee),Qe=this._unevaluatedLayout._values[Z];return Qe.isDataDriven()||$o(Qe.value)||!je?je:function(st,xt){return xt.replace(/{([^{}]+)}/g,function(Tt,jt){return jt in st?String(st[jt]):""})}(ae.properties,je)},O.prototype.createBucket=function(Z){return new di(Z)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype._setPaintOverrides=function(){for(var Z=0,ae=Oc.paint.overridableProperties;Z<ae.length;Z+=1){var _e=ae[Z];if(O.hasPaintOverride(this.layout,_e)){var Ee,je=this.paint.get(_e),Qe=new Vl(je),st=new hs(Qe,je.property.specification);Ee=je.value.kind==="constant"||je.value.kind==="source"?new zo("source",st):new Do("composite",st,je.value.zoomStops,je.value._interpolationType),this.paint._values[_e]=new Ki(je.property,Ee,je.parameters)}}},O.prototype._handleOverridablePaintPropertyUpdate=function(Z,ae,_e){return!(!this.layout||ae.isDataDriven()||_e.isDataDriven())&&O.hasPaintOverride(this.layout,Z)},O.hasPaintOverride=function(Z,ae){var _e=Z.get("text-field"),Ee=Oc.paint.properties[ae],je=!1,Qe=function(Tt){for(var jt=0,Ht=Tt;jt<Ht.length;jt+=1){var Vt=Ht[jt];if(Ee.overrides&&Ee.overrides.hasOverride(Vt))return void(je=!0)}};if(_e.value.kind==="constant"&&_e.value.value instanceof Dn)Qe(_e.value.value.sections);else if(_e.value.kind==="source"){var st=function(Tt){if(!je)if(Tt instanceof dr&&$n(Tt.value)===Xt){var jt=Tt.value;Qe(jt.sections)}else Tt instanceof Gt?Qe(Tt.sections):Tt.eachChild(st)},xt=_e.value;xt._styleExpression&&st(xt._styleExpression.expression)}return je},O}(fa),Wp={paint:new $i({"background-color":new Mr(qe.paint_background["background-color"]),"background-pattern":new ho(qe.paint_background["background-pattern"]),"background-opacity":new Mr(qe.paint_background["background-opacity"])})},Yp=function(M){function O(Z){M.call(this,Z,Wp)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(fa),Xp={paint:new $i({"raster-opacity":new Mr(qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Mr(qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Mr(qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Mr(qe.paint_raster["raster-brightness-max"]),"raster-saturation":new Mr(qe.paint_raster["raster-saturation"]),"raster-contrast":new Mr(qe.paint_raster["raster-contrast"]),"raster-resampling":new Mr(qe.paint_raster["raster-resampling"]),"raster-fade-duration":new Mr(qe.paint_raster["raster-fade-duration"])})},Jp=function(M){function O(Z){M.call(this,Z,Xp)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(fa),Kp=function(M){function O(Z){M.call(this,Z,{}),this.implementation=Z}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},O.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},O.prototype.recalculate=function(){},O.prototype.updateTransitions=function(){},O.prototype.hasTransition=function(){},O.prototype.serialize=function(){},O.prototype.onAdd=function(Z){this.implementation.onAdd&&this.implementation.onAdd(Z,Z.painter.context.gl)},O.prototype.onRemove=function(Z){this.implementation.onRemove&&this.implementation.onRemove(Z,Z.painter.context.gl)},O}(fa),$p={circle:Fh,heatmap:Nh,hillshade:Uh,fill:rp,"fill-extrusion":fp,line:vp,symbol:Zp,background:Yp,raster:Jp},Gf=self.HTMLImageElement,Zf=self.HTMLCanvasElement,Wf=self.HTMLVideoElement,Yf=self.ImageData,Hu=self.ImageBitmap,wl=function(M,O,Z,ae){this.context=M,this.format=Z,this.texture=M.gl.createTexture(),this.update(O,ae)};wl.prototype.update=function(M,O,Z){var ae=M.width,_e=M.height,Ee=!(this.size&&this.size[0]===ae&&this.size[1]===_e||Z),je=this.context,Qe=je.gl;if(this.useMipmap=Boolean(O&&O.useMipmap),Qe.bindTexture(Qe.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===Qe.RGBA&&(!O||O.premultiply!==!1)),Ee)this.size=[ae,_e],M instanceof Gf||M instanceof Zf||M instanceof Wf||M instanceof Yf||Hu&&M instanceof Hu?Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,this.format,Qe.UNSIGNED_BYTE,M):Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,ae,_e,0,this.format,Qe.UNSIGNED_BYTE,M.data);else{var st=Z||{x:0,y:0},xt=st.x,Tt=st.y;M instanceof Gf||M instanceof Zf||M instanceof Wf||M instanceof Yf||Hu&&M instanceof Hu?Qe.texSubImage2D(Qe.TEXTURE_2D,0,xt,Tt,Qe.RGBA,Qe.UNSIGNED_BYTE,M):Qe.texSubImage2D(Qe.TEXTURE_2D,0,xt,Tt,ae,_e,Qe.RGBA,Qe.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Qe.generateMipmap(Qe.TEXTURE_2D)},wl.prototype.bind=function(M,O,Z){var ae=this.context.gl;ae.bindTexture(ae.TEXTURE_2D,this.texture),Z!==ae.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Z=ae.LINEAR),M!==this.filter&&(ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,M),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,Z||M),this.filter=M),O!==this.wrap&&(ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,O),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,O),this.wrap=O)},wl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},wl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ic=function(M){var O=this;this._callback=M,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};Ic.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},Ic.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Hl=function(M,O,Z){this.target=M,this.parent=O,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Ic(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?M:self};function Xf(M,O,Z){var ae=2*Math.PI*6378137/256/Math.pow(2,Z);return[M*ae-2*Math.PI*6378137/2,O*ae-2*Math.PI*6378137/2]}Hl.prototype.send=function(M,O,Z,ae,_e){var Ee=this;_e===void 0&&(_e=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);Z&&(this.callbacks[je]=Z);var Qe=I(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:M,hasCallback:!!Z,targetMapId:ae,mustQueue:_e,sourceMapId:this.mapId,data:ts(O,Qe)},Qe),{cancel:function(){Z&&delete Ee.callbacks[je],Ee.target.postMessage({id:je,type:"<cancel>",targetMapId:ae,sourceMapId:Ee.mapId})}}},Hl.prototype.receive=function(M){var O=M.data,Z=O.id;if(Z&&(!O.targetMapId||this.mapId===O.targetMapId))if(O.type==="<cancel>"){delete this.tasks[Z];var ae=this.cancelCallbacks[Z];delete this.cancelCallbacks[Z],ae&&ae()}else L()||O.mustQueue?(this.tasks[Z]=O,this.taskQueue.push(Z),this.invoker.trigger()):this.processTask(Z,O)},Hl.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),O=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(M,O)}},Hl.prototype.processTask=function(M,O){var Z=this;if(O.type==="<response>"){var ae=this.callbacks[M];delete this.callbacks[M],ae&&(O.error?ae(ns(O.error)):ae(null,ns(O.data)))}else{var _e=!1,Ee=I(this.globalScope)?void 0:[],je=O.hasCallback?function(Tt,jt){_e=!0,delete Z.cancelCallbacks[M],Z.target.postMessage({id:M,type:"<response>",sourceMapId:Z.mapId,error:Tt?ts(Tt):null,data:ts(jt,Ee)},Ee)}:function(Tt){_e=!0},Qe=null,st=ns(O.data);if(this.parent[O.type])Qe=this.parent[O.type](O.sourceMapId,st,je);else if(this.parent.getWorkerSource){var xt=O.type.split(".");Qe=this.parent.getWorkerSource(O.sourceMapId,xt[0],st.source)[xt[1]](st,je)}else je(new Error("Could not find function "+O.type));!_e&&Qe&&Qe.cancel&&(this.cancelCallbacks[M]=Qe.cancel)}},Hl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ta=function(M,O){M&&(O?this.setSouthWest(M).setNorthEast(O):M.length===4?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};ta.prototype.setNorthEast=function(M){return this._ne=M instanceof Ei?new Ei(M.lng,M.lat):Ei.convert(M),this},ta.prototype.setSouthWest=function(M){return this._sw=M instanceof Ei?new Ei(M.lng,M.lat):Ei.convert(M),this},ta.prototype.extend=function(M){var O,Z,ae=this._sw,_e=this._ne;if(M instanceof Ei)O=M,Z=M;else{if(!(M instanceof ta)){if(Array.isArray(M)){if(M.length===4||M.every(Array.isArray)){var Ee=M;return this.extend(ta.convert(Ee))}var je=M;return this.extend(Ei.convert(je))}return this}if(O=M._sw,Z=M._ne,!O||!Z)return this}return ae||_e?(ae.lng=Math.min(O.lng,ae.lng),ae.lat=Math.min(O.lat,ae.lat),_e.lng=Math.max(Z.lng,_e.lng),_e.lat=Math.max(Z.lat,_e.lat)):(this._sw=new Ei(O.lng,O.lat),this._ne=new Ei(Z.lng,Z.lat)),this},ta.prototype.getCenter=function(){return new Ei((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ta.prototype.getSouthWest=function(){return this._sw},ta.prototype.getNorthEast=function(){return this._ne},ta.prototype.getNorthWest=function(){return new Ei(this.getWest(),this.getNorth())},ta.prototype.getSouthEast=function(){return new Ei(this.getEast(),this.getSouth())},ta.prototype.getWest=function(){return this._sw.lng},ta.prototype.getSouth=function(){return this._sw.lat},ta.prototype.getEast=function(){return this._ne.lng},ta.prototype.getNorth=function(){return this._ne.lat},ta.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ta.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ta.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ta.prototype.contains=function(M){var O=Ei.convert(M),Z=O.lng,ae=O.lat,_e=this._sw.lat<=ae&&ae<=this._ne.lat,Ee=this._sw.lng<=Z&&Z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ee=this._sw.lng>=Z&&Z>=this._ne.lng),_e&&Ee},ta.convert=function(M){return!M||M instanceof ta?M:new ta(M)};var Jf=63710088e-1,Ei=function(M,O){if(isNaN(M)||isNaN(O))throw new Error("Invalid LngLat object: ("+M+", "+O+")");if(this.lng=+M,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ei.prototype.wrap=function(){return new Ei(i(this.lng,-180,180),this.lat)},Ei.prototype.toArray=function(){return[this.lng,this.lat]},Ei.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ei.prototype.distanceTo=function(M){var O=Math.PI/180,Z=this.lat*O,ae=M.lat*O,_e=Math.sin(Z)*Math.sin(ae)+Math.cos(Z)*Math.cos(ae)*Math.cos((M.lng-this.lng)*O);return Jf*Math.acos(Math.min(_e,1))},Ei.prototype.toBounds=function(M){M===void 0&&(M=0);var O=360*M/40075017,Z=O/Math.cos(Math.PI/180*this.lat);return new ta(new Ei(this.lng-Z,this.lat-O),new Ei(this.lng+Z,this.lat+O))},Ei.convert=function(M){if(M instanceof Ei)return M;if(Array.isArray(M)&&(M.length===2||M.length===3))return new Ei(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&typeof M=="object"&&M!==null)return new Ei(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Kf=2*Math.PI*Jf;function $f(M){return Kf*Math.cos(M*Math.PI/180)}function Qf(M){return(180+M)/360}function eh(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function th(M,O){return M/$f(O)}function Rc(M){var O=180-360*M;return 360/Math.PI*Math.atan(Math.exp(O*Math.PI/180))-90}var Tl=function(M,O,Z){Z===void 0&&(Z=0),this.x=+M,this.y=+O,this.z=+Z};Tl.fromLngLat=function(M,O){O===void 0&&(O=0);var Z=Ei.convert(M);return new Tl(Qf(Z.lng),eh(Z.lat),th(O,Z.lat))},Tl.prototype.toLngLat=function(){return new Ei(360*this.x-180,Rc(this.y))},Tl.prototype.toAltitude=function(){return M=this.z,O=this.y,M*$f(Rc(O));var M,O},Tl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Kf*(M=Rc(this.y),1/Math.cos(M*Math.PI/180));var M};var kl=function(M,O,Z){this.z=M,this.x=O,this.y=Z,this.key=uu(0,M,M,O,Z)};kl.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},kl.prototype.url=function(M,O){var Z,ae,_e,Ee,je,Qe=(Z=this.x,ae=this.y,_e=this.z,Ee=Xf(256*Z,256*(ae=Math.pow(2,_e)-ae-1),_e),je=Xf(256*(Z+1),256*(ae+1),_e),Ee[0]+","+Ee[1]+","+je[0]+","+je[1]),st=function(xt,Tt,jt){for(var Ht,Vt="",on=xt;on>0;on--)Vt+=(Tt&(Ht=1<<on-1)?1:0)+(jt&Ht?2:0);return Vt}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(O==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",st).replace("{bbox-epsg-3857}",Qe)},kl.prototype.getTilePoint=function(M){var O=Math.pow(2,this.z);return new t((M.x*O-this.x)*Br,(M.y*O-this.y)*Br)},kl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var nh=function(M,O){this.wrap=M,this.canonical=O,this.key=uu(M,O.z,O.z,O.x,O.y)},na=function(M,O,Z,ae,_e){this.overscaledZ=M,this.wrap=O,this.canonical=new kl(Z,+ae,+_e),this.key=uu(O,M,Z,ae,_e)};function uu(M,O,Z,ae,_e){(M*=2)<0&&(M=-1*M-1);var Ee=1<<Z;return(Ee*Ee*M+Ee*_e+ae).toString(36)+Z.toString(36)+O.toString(36)}na.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},na.prototype.scaledTo=function(M){var O=this.canonical.z-M;return M>this.canonical.z?new na(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new na(M,this.wrap,M,this.canonical.x>>O,this.canonical.y>>O)},na.prototype.calculateScaledKey=function(M,O){var Z=this.canonical.z-M;return M>this.canonical.z?uu(this.wrap*+O,M,this.canonical.z,this.canonical.x,this.canonical.y):uu(this.wrap*+O,M,M,this.canonical.x>>Z,this.canonical.y>>Z)},na.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var O=this.canonical.z-M.canonical.z;return M.overscaledZ===0||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>O&&M.canonical.y===this.canonical.y>>O},na.prototype.children=function(M){if(this.overscaledZ>=M)return[new na(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,Z=2*this.canonical.x,ae=2*this.canonical.y;return[new na(O,this.wrap,O,Z,ae),new na(O,this.wrap,O,Z+1,ae),new na(O,this.wrap,O,Z,ae+1),new na(O,this.wrap,O,Z+1,ae+1)]},na.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},na.prototype.wrapped=function(){return new na(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},na.prototype.unwrapTo=function(M){return new na(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},na.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},na.prototype.toUnwrapped=function(){return new nh(this.wrap,this.canonical)},na.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},na.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new Tl(M.x-this.wrap,M.y))},br("CanonicalTileID",kl),br("OverscaledTileID",na,{omit:["posMatrix"]});var nl=function(M,O,Z){if(this.uid=M,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(Z&&Z!=="mapbox"&&Z!=="terrarium")return S('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var ae=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=Z||"mapbox";for(var _e=0;_e<ae;_e++)this.data[this._idx(-1,_e)]=this.data[this._idx(0,_e)],this.data[this._idx(ae,_e)]=this.data[this._idx(ae-1,_e)],this.data[this._idx(_e,-1)]=this.data[this._idx(_e,0)],this.data[this._idx(_e,ae)]=this.data[this._idx(_e,ae-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ae,-1)]=this.data[this._idx(ae-1,0)],this.data[this._idx(-1,ae)]=this.data[this._idx(0,ae-1)],this.data[this._idx(ae,ae)]=this.data[this._idx(ae-1,ae-1)]};nl.prototype.get=function(M,O){var Z=new Uint8Array(this.data.buffer),ae=4*this._idx(M,O);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Z[ae],Z[ae+1],Z[ae+2])},nl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},nl.prototype._idx=function(M,O){if(M<-1||M>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(M+1)},nl.prototype._unpackMapbox=function(M,O,Z){return(256*M*256+256*O+Z)/10-1e4},nl.prototype._unpackTerrarium=function(M,O,Z){return 256*M+O+Z/256-32768},nl.prototype.getPixels=function(){return new eo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},nl.prototype.backfillBorder=function(M,O,Z){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var ae=O*this.dim,_e=O*this.dim+this.dim,Ee=Z*this.dim,je=Z*this.dim+this.dim;switch(O){case-1:ae=_e-1;break;case 1:_e=ae+1}switch(Z){case-1:Ee=je-1;break;case 1:je=Ee+1}for(var Qe=-O*this.dim,st=-Z*this.dim,xt=Ee;xt<je;xt++)for(var Tt=ae;Tt<_e;Tt++)this.data[this._idx(Tt,xt)]=M.data[this._idx(Tt+Qe,xt+st)]},br("DEMData",nl);var qu=function(M){this._stringToNumber={},this._numberToString=[];for(var O=0;O<M.length;O++){var Z=M[O];this._stringToNumber[Z]=O,this._numberToString[O]=Z}};qu.prototype.encode=function(M){return this._stringToNumber[M]},qu.prototype.decode=function(M){return this._numberToString[M]};var Gu=function(M,O,Z,ae,_e){this.type="Feature",this._vectorTileFeature=M,M._z=O,M._x=Z,M._y=ae,this.properties=M.properties,this.id=_e},zc={geometry:{configurable:!0}};zc.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},zc.geometry.set=function(M){this._geometry=M},Gu.prototype.toJSON=function(){var M={geometry:this.geometry};for(var O in this)O!=="_geometry"&&O!=="_vectorTileFeature"&&(M[O]=this[O]);return M},Object.defineProperties(Gu.prototype,zc);var ql=function(){this.state={},this.stateChanges={},this.deletedStates={}};ql.prototype.updateState=function(M,O,Z){var ae=String(O);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][ae]=this.stateChanges[M][ae]||{},c(this.stateChanges[M][ae],Z),this.deletedStates[M]===null)for(var _e in this.deletedStates[M]={},this.state[M])_e!==ae&&(this.deletedStates[M][_e]=null);else if(this.deletedStates[M]&&this.deletedStates[M][ae]===null)for(var Ee in this.deletedStates[M][ae]={},this.state[M][ae])Z[Ee]||(this.deletedStates[M][ae][Ee]=null);else for(var je in Z)this.deletedStates[M]&&this.deletedStates[M][ae]&&this.deletedStates[M][ae][je]===null&&delete this.deletedStates[M][ae][je]},ql.prototype.removeFeatureState=function(M,O,Z){if(this.deletedStates[M]!==null){var ae=String(O);if(this.deletedStates[M]=this.deletedStates[M]||{},Z&&O!==void 0)this.deletedStates[M][ae]!==null&&(this.deletedStates[M][ae]=this.deletedStates[M][ae]||{},this.deletedStates[M][ae][Z]=null);else if(O!==void 0)if(this.stateChanges[M]&&this.stateChanges[M][ae])for(Z in this.deletedStates[M][ae]={},this.stateChanges[M][ae])this.deletedStates[M][ae][Z]=null;else this.deletedStates[M][ae]=null;else this.deletedStates[M]=null}},ql.prototype.getState=function(M,O){var Z=String(O),ae=this.state[M]||{},_e=this.stateChanges[M]||{},Ee=c({},ae[Z],_e[Z]);if(this.deletedStates[M]===null)return{};if(this.deletedStates[M]){var je=this.deletedStates[M][O];if(je===null)return{};for(var Qe in je)delete Ee[Qe]}return Ee},ql.prototype.initializeTileState=function(M,O){M.setFeatureState(this.state,O)},ql.prototype.coalesceChanges=function(M,O){var Z={};for(var ae in this.stateChanges){this.state[ae]=this.state[ae]||{};var _e={};for(var Ee in this.stateChanges[ae])this.state[ae][Ee]||(this.state[ae][Ee]={}),c(this.state[ae][Ee],this.stateChanges[ae][Ee]),_e[Ee]=this.state[ae][Ee];Z[ae]=_e}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var Qe={};if(this.deletedStates[je]===null)for(var st in this.state[je])Qe[st]={},this.state[je][st]={};else for(var xt in this.deletedStates[je]){if(this.deletedStates[je][xt]===null)this.state[je][xt]={};else for(var Tt=0,jt=Object.keys(this.deletedStates[je][xt]);Tt<jt.length;Tt+=1){var Ht=jt[Tt];delete this.state[je][xt][Ht]}Qe[xt]=this.state[je][xt]}Z[je]=Z[je]||{},c(Z[je],Qe)}if(this.stateChanges={},this.deletedStates={},Object.keys(Z).length!==0)for(var Vt in M)M[Vt].setFeatureState(Z,O)};var rl=function(M,O){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new Di(Br,16,0),this.grid3D=new Di(Br,16,0),this.featureIndexArray=new un,this.promoteId=O};function rh(M,O,Z,ae,_e){return p(M,function(Ee,je){var Qe=O instanceof Ba?O.get(je):null;return Qe&&Qe.evaluate?Qe.evaluate(Z,ae,_e):Qe})}function ih(M){for(var O=1/0,Z=1/0,ae=-1/0,_e=-1/0,Ee=0,je=M;Ee<je.length;Ee+=1){var Qe=je[Ee];O=Math.min(O,Qe.x),Z=Math.min(Z,Qe.y),ae=Math.max(ae,Qe.x),_e=Math.max(_e,Qe.y)}return{minX:O,minY:Z,maxX:ae,maxY:_e}}function Qp(M,O){return O-M}rl.prototype.insert=function(M,O,Z,ae,_e,Ee){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Z,ae,_e);for(var Qe=Ee?this.grid3D:this.grid,st=0;st<O.length;st++){for(var xt=O[st],Tt=[1/0,1/0,-1/0,-1/0],jt=0;jt<xt.length;jt++){var Ht=xt[jt];Tt[0]=Math.min(Tt[0],Ht.x),Tt[1]=Math.min(Tt[1],Ht.y),Tt[2]=Math.max(Tt[2],Ht.x),Tt[3]=Math.max(Tt[3],Ht.y)}Tt[0]<Br&&Tt[1]<Br&&Tt[2]>=0&&Tt[3]>=0&&Qe.insert(je,Tt[0],Tt[1],Tt[2],Tt[3])}},rl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Rl.VectorTile(new Ou(this.rawTileData)).layers,this.sourceLayerCoder=new qu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},rl.prototype.query=function(M,O,Z,ae){var _e=this;this.loadVTLayers();for(var Ee=M.params||{},je=Br/M.tileSize/M.scale,Qe=xs(Ee.filter),st=M.queryGeometry,xt=M.queryPadding*je,Tt=ih(st),jt=this.grid.query(Tt.minX-xt,Tt.minY-xt,Tt.maxX+xt,Tt.maxY+xt),Ht=ih(M.cameraQueryGeometry),Vt=0,on=this.grid3D.query(Ht.minX-xt,Ht.minY-xt,Ht.maxX+xt,Ht.maxY+xt,function(Wn,Kn,tr,xr){return function(hr,wr,Er,jr,Pr){for(var Nr=0,Ir=hr;Nr<Ir.length;Nr+=1){var Cr=Ir[Nr];if(wr<=Cr.x&&Er<=Cr.y&&jr>=Cr.x&&Pr>=Cr.y)return!0}var Jr=[new t(wr,Er),new t(wr,Pr),new t(jr,Pr),new t(jr,Er)];if(hr.length>2){for(var qr=0,bi=Jr;qr<bi.length;qr+=1)if(hl(hr,bi[qr]))return!0}for(var Fr=0;Fr<hr.length-1;Fr++)if(hc(hr[Fr],hr[Fr+1],Jr))return!0;return!1}(M.cameraQueryGeometry,Wn-xt,Kn-xt,tr+xt,xr+xt)});Vt<on.length;Vt+=1){var vn=on[Vt];jt.push(vn)}jt.sort(Qp);for(var Pn,Cn={},Bn=function(Wn){var Kn=jt[Wn];if(Kn!==Pn){Pn=Kn;var tr=_e.featureIndexArray.get(Kn),xr=null;_e.loadMatchingFeature(Cn,tr.bucketIndex,tr.sourceLayerIndex,tr.featureIndex,Qe,Ee.layers,Ee.availableImages,O,Z,ae,function(hr,wr,Er){return xr||(xr=ki(hr)),wr.queryIntersectsFeature(st,hr,Er,xr,_e.z,M.transform,je,M.pixelPosMatrix)})}},Nn=0;Nn<jt.length;Nn++)Bn(Nn);return Cn},rl.prototype.loadMatchingFeature=function(M,O,Z,ae,_e,Ee,je,Qe,st,xt,Tt){var jt=this.bucketLayerIDs[O];if(!Ee||function(xr,hr){for(var wr=0;wr<xr.length;wr++)if(hr.indexOf(xr[wr])>=0)return!0;return!1}(Ee,jt)){var Ht=this.sourceLayerCoder.decode(Z),Vt=this.vtLayers[Ht].feature(ae);if(_e.filter(new ni(this.tileID.overscaledZ),Vt))for(var on=this.getId(Vt,Ht),vn=0;vn<jt.length;vn++){var Pn=jt[vn];if(!(Ee&&Ee.indexOf(Pn)<0)){var Cn=Qe[Pn];if(Cn){var Bn={};on!==void 0&&xt&&(Bn=xt.getState(Cn.sourceLayer||"_geojsonTileLayer",on));var Nn=st[Pn];Nn.paint=rh(Nn.paint,Cn.paint,Vt,Bn,je),Nn.layout=rh(Nn.layout,Cn.layout,Vt,Bn,je);var Wn=!Tt||Tt(Vt,Cn,Bn);if(Wn){var Kn=new Gu(Vt,this.z,this.x,this.y,on);Kn.layer=Nn;var tr=M[Pn];tr===void 0&&(tr=M[Pn]=[]),tr.push({featureIndex:ae,feature:Kn,intersectionZ:Wn})}}}}}},rl.prototype.lookupSymbolFeatures=function(M,O,Z,ae,_e,Ee,je,Qe){var st={};this.loadVTLayers();for(var xt=xs(_e),Tt=0,jt=M;Tt<jt.length;Tt+=1){var Ht=jt[Tt];this.loadMatchingFeature(st,Z,ae,Ht,xt,Ee,je,Qe,O)}return st},rl.prototype.hasLayer=function(M){for(var O=0,Z=this.bucketLayerIDs;O<Z.length;O+=1)for(var ae=0,_e=Z[O];ae<_e.length;ae+=1)if(M===_e[ae])return!0;return!1},rl.prototype.getId=function(M,O){var Z=M.id;if(this.promoteId){var ae=typeof this.promoteId=="string"?this.promoteId:this.promoteId[O];typeof(Z=M.properties[ae])=="boolean"&&(Z=Number(Z))}return Z},br("FeatureIndex",rl,{omit:["rawTileData","sourceLayerCoder"]});var pa=function(M,O){this.tileID=M,this.uid=f(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};pa.prototype.registerFadeDuration=function(M){var O=M+this.timeAdded;O<G.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},pa.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},pa.prototype.loadVectorData=function(M,O,Z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var ae in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(xt,Tt){var jt={};if(!Tt)return jt;for(var Ht=function(){var vn=on[Vt],Pn=vn.layerIds.map(function(Wn){return Tt.getLayer(Wn)}).filter(Boolean);if(Pn.length!==0){vn.layers=Pn,vn.stateDependentLayerIds&&(vn.stateDependentLayers=vn.stateDependentLayerIds.map(function(Wn){return Pn.filter(function(Kn){return Kn.id===Wn})[0]}));for(var Cn=0,Bn=Pn;Cn<Bn.length;Cn+=1){var Nn=Bn[Cn];jt[Nn.id]=vn}}},Vt=0,on=xt;Vt<on.length;Vt+=1)Ht();return jt}(M.buckets,O.style),this.hasSymbolBuckets=!1,this.buckets){var _e=this.buckets[ae];if(_e instanceof di){if(this.hasSymbolBuckets=!0,!Z)break;_e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ee in this.buckets){var je=this.buckets[Ee];if(je instanceof di&&je.hasRTLText){this.hasRTLText=!0,ua.isLoading()||ua.isLoaded()||Fa()!=="deferred"||$a();break}}for(var Qe in this.queryPadding=0,this.buckets){var st=this.buckets[Qe];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(Qe).queryRadius(st))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new We},pa.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},pa.prototype.getBucket=function(M){return this.buckets[M.id]},pa.prototype.upload=function(M){for(var O in this.buckets){var Z=this.buckets[O];Z.uploadPending()&&Z.upload(M)}var ae=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new wl(M,this.imageAtlas.image,ae.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new wl(M,this.glyphAtlasImage,ae.ALPHA),this.glyphAtlasImage=null)},pa.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},pa.prototype.queryRenderedFeatures=function(M,O,Z,ae,_e,Ee,je,Qe,st,xt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ae,cameraQueryGeometry:_e,scale:Ee,tileSize:this.tileSize,pixelPosMatrix:xt,transform:Qe,params:je,queryPadding:this.queryPadding*st},M,O,Z):{}},pa.prototype.querySourceFeatures=function(M,O){var Z=this.latestFeatureIndex;if(Z&&Z.rawTileData){var ae=Z.loadVTLayers(),_e=O?O.sourceLayer:"",Ee=ae._geojsonTileLayer||ae[_e];if(Ee)for(var je=xs(O&&O.filter),Qe=this.tileID.canonical,st=Qe.z,xt=Qe.x,Tt=Qe.y,jt={z:st,x:xt,y:Tt},Ht=0;Ht<Ee.length;Ht++){var Vt=Ee.feature(Ht);if(je.filter(new ni(this.tileID.overscaledZ),Vt)){var on=Z.getId(Vt,_e),vn=new Gu(Vt,st,xt,Tt,on);vn.tile=jt,M.push(vn)}}}},pa.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},pa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},pa.prototype.setExpiryData=function(M){var O=this.expirationTime;if(M.cacheControl){var Z=C(M.cacheControl);Z["max-age"]&&(this.expirationTime=Date.now()+1e3*Z["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var ae=Date.now(),_e=!1;if(this.expirationTime>ae)_e=!1;else if(O)if(this.expirationTime<O)_e=!0;else{var Ee=this.expirationTime-O;Ee?this.expirationTime=ae+Math.max(Ee,3e4):_e=!0}else _e=!0;_e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},pa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},pa.prototype.setFeatureState=function(M,O){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(M).length!==0){var Z=this.latestFeatureIndex.loadVTLayers();for(var ae in this.buckets)if(O.style.hasLayer(ae)){var _e=this.buckets[ae],Ee=_e.layers[0].sourceLayer||"_geojsonTileLayer",je=Z[Ee],Qe=M[Ee];if(je&&Qe&&Object.keys(Qe).length!==0){_e.update(Qe,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var st=O&&O.style&&O.style.getLayer(ae);st&&(this.queryPadding=Math.max(this.queryPadding,st.queryRadius(_e)))}}}},pa.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},pa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<G.now()},pa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},pa.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=G.now()+M},pa.prototype.setDependencies=function(M,O){for(var Z={},ae=0,_e=O;ae<_e.length;ae+=1)Z[_e[ae]]=!0;this.dependencies[M]=Z},pa.prototype.hasDependency=function(M,O){for(var Z=0,ae=M;Z<ae.length;Z+=1){var _e=ae[Z],Ee=this.dependencies[_e];if(Ee){for(var je=0,Qe=O;je<Qe.length;je+=1)if(Ee[Qe[je]])return!0}}return!1};var vl=self.performance,ah=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},vl.mark(this._marks.start)};ah.prototype.finish=function(){vl.mark(this._marks.end);var M=vl.getEntriesByName(this._marks.measure);return M.length===0&&(vl.measure(this._marks.measure,this._marks.start,this._marks.end),M=vl.getEntriesByName(this._marks.measure),vl.clearMarks(this._marks.start),vl.clearMarks(this._marks.end),vl.clearMeasures(this._marks.measure)),M},l.Actor=Hl,l.AlphaImage=_l,l.CanonicalTileID=kl,l.CollisionBoxArray=We,l.Color=sn,l.DEMData=nl,l.DataConstantProperty=Mr,l.DictionaryCoder=qu,l.EXTENT=Br,l.ErrorEvent=ke,l.EvaluationParameters=ni,l.Event=Be,l.Evented=Pe,l.FeatureIndex=rl,l.FillBucket=ws,l.FillExtrusionBucket=Ts,l.ImageAtlas=su,l.ImagePosition=Ru,l.LineBucket=to,l.LngLat=Ei,l.LngLatBounds=ta,l.MercatorCoordinate=Tl,l.ONE_EM=Ma,l.OverscaledTileID=na,l.Point=t,l.Point$1=t,l.Properties=$i,l.Protobuf=Ou,l.RGBAImage=eo,l.RequestManager=ie,l.RequestPerformance=ah,l.ResourceType=ot,l.SegmentVector=en,l.SourceFeatureState=ql,l.StructArrayLayout1ui2=we,l.StructArrayLayout2f1f2i16=pe,l.StructArrayLayout2i4=Je,l.StructArrayLayout3ui6=Ne,l.StructArrayLayout4i8=$e,l.SymbolBucket=di,l.Texture=wl,l.Tile=pa,l.Transitionable=ca,l.Uniform1f=Hr,l.Uniform1i=Vr,l.Uniform2f=fr,l.Uniform3f=Ar,l.Uniform4f=Dr,l.UniformColor=zr,l.UniformMatrix4f=Zr,l.UnwrappedTileID=nh,l.ValidationError=Xe,l.WritingMode=Lo,l.ZoomHistory=rs,l.add=function(M,O,Z){return M[0]=O[0]+Z[0],M[1]=O[1]+Z[1],M[2]=O[2]+Z[2],M},l.addDynamicAttributes=Pc,l.asyncAll=function(M,O,Z){if(!M.length)return Z(null,[]);var ae=M.length,_e=new Array(M.length),Ee=null;M.forEach(function(je,Qe){O(je,function(st,xt){st&&(Ee=st),_e[Qe]=xt,--ae==0&&Z(Ee,_e)})})},l.bezier=r,l.bindAll=g,l.browser=G,l.cacheEntryPossiblyAdded=function(M){++rt>le&&(M.getActor().send("enforceCacheSizeLimit",ze),rt=0)},l.clamp=a,l.clearTileCache=function(M){var O=self.caches.delete(Ce);M&&O.catch(M).then(function(){return M()})},l.clipLine=Nf,l.clone=function(M){var O=new Eo(16);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O[3]=M[3],O[4]=M[4],O[5]=M[5],O[6]=M[6],O[7]=M[7],O[8]=M[8],O[9]=M[9],O[10]=M[10],O[11]=M[11],O[12]=M[12],O[13]=M[13],O[14]=M[14],O[15]=M[15],O},l.clone$1=w,l.clone$2=function(M){var O=new Eo(3);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O},l.collisionCircleLayout=xp,l.config=V,l.create=function(){var M=new Eo(16);return Eo!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},l.create$1=function(){var M=new Eo(9);return Eo!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},l.create$2=function(){var M=new Eo(4);return Eo!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},l.createCommonjsModule=T,l.createExpression=ps,l.createLayout=fi,l.createStyleLayer=function(M){return M.type==="custom"?new Kp(M):new $p[M.type](M)},l.cross=function(M,O,Z){var ae=O[0],_e=O[1],Ee=O[2],je=Z[0],Qe=Z[1],st=Z[2];return M[0]=_e*st-Ee*Qe,M[1]=Ee*je-ae*st,M[2]=ae*Qe-_e*je,M},l.deepEqual=function M(O,Z){if(Array.isArray(O)){if(!Array.isArray(Z)||O.length!==Z.length)return!1;for(var ae=0;ae<O.length;ae++)if(!M(O[ae],Z[ae]))return!1;return!0}if(typeof O=="object"&&O!==null&&Z!==null){if(typeof Z!="object"||Object.keys(O).length!==Object.keys(Z).length)return!1;for(var _e in O)if(!M(O[_e],Z[_e]))return!1;return!0}return O===Z},l.dot=function(M,O){return M[0]*O[0]+M[1]*O[1]+M[2]*O[2]},l.dot$1=function(M,O){return M[0]*O[0]+M[1]*O[1]+M[2]*O[2]+M[3]*O[3]},l.ease=n,l.emitValidationErrors=Ia,l.endsWith=y,l.enforceCacheSizeLimit=function(M){de(),Se&&Se.then(function(O){O.keys().then(function(Z){for(var ae=0;ae<Z.length-M;ae++)O.delete(Z[ae])})})},l.evaluateSizeForFeature=Of,l.evaluateSizeForZoom=If,l.evaluateVariableOffset=Vf,l.evented=Aa,l.extend=c,l.featureFilter=xs,l.filterObject=m,l.fromRotation=function(M,O){var Z=Math.sin(O),ae=Math.cos(O);return M[0]=ae,M[1]=Z,M[2]=0,M[3]=-Z,M[4]=ae,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},l.getAnchorAlignment=Sc,l.getAnchorJustification=Cc,l.getArrayBuffer=St,l.getImage=Pt,l.getJSON=function(M,O){return bt(c(M,{type:"json"}),O)},l.getRTLTextPluginStatus=Fa,l.getReferrer=_t,l.getVideo=function(M,O){var Z,ae,_e=self.document.createElement("video");_e.muted=!0,_e.onloadstart=function(){O(null,_e)};for(var Ee=0;Ee<M.length;Ee++){var je=self.document.createElement("source");Z=M[Ee],ae=void 0,(ae=self.document.createElement("a")).href=Z,ae.protocol===self.document.location.protocol&&ae.host===self.document.location.host||(_e.crossOrigin="Anonymous"),je.src=M[Ee],_e.appendChild(je)}return{cancel:function(){}}},l.identity=pc,l.invert=function(M,O){var Z=O[0],ae=O[1],_e=O[2],Ee=O[3],je=O[4],Qe=O[5],st=O[6],xt=O[7],Tt=O[8],jt=O[9],Ht=O[10],Vt=O[11],on=O[12],vn=O[13],Pn=O[14],Cn=O[15],Bn=Z*Qe-ae*je,Nn=Z*st-_e*je,Wn=Z*xt-Ee*je,Kn=ae*st-_e*Qe,tr=ae*xt-Ee*Qe,xr=_e*xt-Ee*st,hr=Tt*vn-jt*on,wr=Tt*Pn-Ht*on,Er=Tt*Cn-Vt*on,jr=jt*Pn-Ht*vn,Pr=jt*Cn-Vt*vn,Nr=Ht*Cn-Vt*Pn,Ir=Bn*Nr-Nn*Pr+Wn*jr+Kn*Er-tr*wr+xr*hr;return Ir?(Ir=1/Ir,M[0]=(Qe*Nr-st*Pr+xt*jr)*Ir,M[1]=(_e*Pr-ae*Nr-Ee*jr)*Ir,M[2]=(vn*xr-Pn*tr+Cn*Kn)*Ir,M[3]=(Ht*tr-jt*xr-Vt*Kn)*Ir,M[4]=(st*Er-je*Nr-xt*wr)*Ir,M[5]=(Z*Nr-_e*Er+Ee*wr)*Ir,M[6]=(Pn*Wn-on*xr-Cn*Nn)*Ir,M[7]=(Tt*xr-Ht*Wn+Vt*Nn)*Ir,M[8]=(je*Pr-Qe*Er+xt*hr)*Ir,M[9]=(ae*Er-Z*Pr-Ee*hr)*Ir,M[10]=(on*tr-vn*Wn+Cn*Bn)*Ir,M[11]=(jt*Wn-Tt*tr-Vt*Bn)*Ir,M[12]=(Qe*wr-je*jr-st*hr)*Ir,M[13]=(Z*jr-ae*wr+_e*hr)*Ir,M[14]=(vn*Nn-on*Kn-Pn*Bn)*Ir,M[15]=(Tt*Kn-jt*Nn+Ht*Bn)*Ir,M):null},l.isChar=_r,l.isMapboxURL=se,l.keysDifference=function(M,O){var Z=[];for(var ae in M)ae in O||Z.push(ae);return Z},l.makeRequest=bt,l.mapObject=p,l.mercatorXfromLng=Qf,l.mercatorYfromLat=eh,l.mercatorZfromAltitude=th,l.mul=Rh,l.multiply=Kc,l.mvt=Rl,l.normalize=function(M,O){var Z=O[0],ae=O[1],_e=O[2],Ee=Z*Z+ae*ae+_e*_e;return Ee>0&&(Ee=1/Math.sqrt(Ee)),M[0]=O[0]*Ee,M[1]=O[1]*Ee,M[2]=O[2]*Ee,M},l.number=Sr,l.offscreenCanvasSupported=tt,l.ortho=function(M,O,Z,ae,_e,Ee,je){var Qe=1/(O-Z),st=1/(ae-_e),xt=1/(Ee-je);return M[0]=-2*Qe,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*st,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*xt,M[11]=0,M[12]=(O+Z)*Qe,M[13]=(_e+ae)*st,M[14]=(je+Ee)*xt,M[15]=1,M},l.parseGlyphPBF=function(M){return new Ou(M).readFields(Cp,[])},l.pbf=Ou,l.performSymbolLayout=function(M,O,Z,ae,_e,Ee,je){M.createArrays();var Qe=512*M.overscaling;M.tilePixelRatio=Br/Qe,M.compareText={},M.iconsNeedLinear=!1;var st=M.layers[0].layout,xt=M.layers[0]._unevaluatedLayout._values,Tt={};if(M.textSizeData.kind==="composite"){var jt=M.textSizeData,Ht=jt.minZoom,Vt=jt.maxZoom;Tt.compositeTextSizes=[xt["text-size"].possiblyEvaluate(new ni(Ht),je),xt["text-size"].possiblyEvaluate(new ni(Vt),je)]}if(M.iconSizeData.kind==="composite"){var on=M.iconSizeData,vn=on.minZoom,Pn=on.maxZoom;Tt.compositeIconSizes=[xt["icon-size"].possiblyEvaluate(new ni(vn),je),xt["icon-size"].possiblyEvaluate(new ni(Pn),je)]}Tt.layoutTextSize=xt["text-size"].possiblyEvaluate(new ni(M.zoom+1),je),Tt.layoutIconSize=xt["icon-size"].possiblyEvaluate(new ni(M.zoom+1),je),Tt.textMaxSize=xt["text-size"].possiblyEvaluate(new ni(18));for(var Cn=st.get("text-line-height")*Ma,Bn=st.get("text-rotation-alignment")==="map"&&st.get("symbol-placement")!=="point",Nn=st.get("text-keep-upright"),Wn=st.get("text-size"),Kn=function(){var hr=xr[tr],wr=st.get("text-font").evaluate(hr,{},je).join(","),Er=Wn.evaluate(hr,{},je),jr=Tt.layoutTextSize.evaluate(hr,{},je),Pr=Tt.layoutIconSize.evaluate(hr,{},je),Nr={horizontal:{},vertical:void 0},Ir=hr.text,Cr=[0,0];if(Ir){var Jr=Ir.toString(),qr=st.get("text-letter-spacing").evaluate(hr,{},je)*Ma,bi=function(Gr){for(var ti=0,Ni=Gr;ti<Ni.length;ti+=1)if(xi=Ni[ti].charCodeAt(0),_r.Arabic(xi)||_r["Arabic Supplement"](xi)||_r["Arabic Extended-A"](xi)||_r["Arabic Presentation Forms-A"](xi)||_r["Arabic Presentation Forms-B"](xi))return!1;var xi;return!0}(Jr)?qr:0,Fr=st.get("text-anchor").evaluate(hr,{},je),gi=st.get("text-variable-anchor");if(!gi){var Ti=st.get("text-radial-offset").evaluate(hr,{},je);Cr=Ti?Vf(Fr,[Ti*Ma,Lc]):st.get("text-offset").evaluate(hr,{},je).map(function(Gr){return Gr*Ma})}var Ai=Bn?"center":st.get("text-justify").evaluate(hr,{},je),Li=st.get("symbol-placement"),_i=Li==="point"?st.get("text-max-width").evaluate(hr,{},je)*Ma:0,ra=function(){M.allowVerticalPlacement&&is(Jr)&&(Nr.vertical=Du(Ir,O,Z,_e,wr,_i,Cn,Fr,"left",bi,Cr,Lo.vertical,!0,Li,jr,Er))};if(!Bn&&gi){for(var Oi=Ai==="auto"?gi.map(function(Gr){return Cc(Gr)}):[Ai],da=!1,Sa=0;Sa<Oi.length;Sa++){var ba=Oi[Sa];if(!Nr.horizontal[ba])if(da)Nr.horizontal[ba]=Nr.horizontal[0];else{var Za=Du(Ir,O,Z,_e,wr,_i,Cn,"center",ba,bi,Cr,Lo.horizontal,!1,Li,jr,Er);Za&&(Nr.horizontal[ba]=Za,da=Za.positionedLines.length===1)}}ra()}else{Ai==="auto"&&(Ai=Cc(Fr));var _a=Du(Ir,O,Z,_e,wr,_i,Cn,Fr,Ai,bi,Cr,Lo.horizontal,!1,Li,jr,Er);_a&&(Nr.horizontal[Ai]=_a),ra(),is(Jr)&&Bn&&Nn&&(Nr.vertical=Du(Ir,O,Z,_e,wr,_i,Cn,Fr,Ai,bi,Cr,Lo.vertical,!1,Li,jr,Er))}}var aa=void 0,wa=!1;if(hr.icon&&hr.icon.name){var ga=ae[hr.icon.name];ga&&(aa=function(Gr,ti,Ni){var xi=Sc(Ni),Ri=xi.horizontalAlign,Ci=xi.verticalAlign,ii=ti[0],ji=ti[1],Wa=ii-Gr.displaySize[0]*Ri,vo=Wa+Gr.displaySize[0],ja=ji-Gr.displaySize[1]*Ci;return{image:Gr,top:ja,bottom:ja+Gr.displaySize[1],left:Wa,right:vo}}(_e[hr.icon.name],st.get("icon-offset").evaluate(hr,{},je),st.get("icon-anchor").evaluate(hr,{},je)),wa=ga.sdf,M.sdfIcons===void 0?M.sdfIcons=ga.sdf:M.sdfIcons!==ga.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ga.pixelRatio!==M.pixelRatio||st.get("icon-rotate").constantOr(1)!==0)&&(M.iconsNeedLinear=!0))}var oa=qf(Nr.horizontal)||Nr.vertical;M.iconsInText=!!oa&&oa.iconsInText,(oa||aa)&&function(Gr,ti,Ni,xi,Ri,Ci,ii,ji,Wa,vo,ja){var ks=Ci.textMaxSize.evaluate(ti,{});ks===void 0&&(ks=ii);var il,va=Gr.layers[0].layout,As=va.get("icon-offset").evaluate(ti,{},ja),ss=qf(Ni.horizontal),ls=24,Al=ii/ls,Zu=Gr.tilePixelRatio*Al,Ml=Gr.tilePixelRatio*ks/ls,Wu=Gr.tilePixelRatio*ji,cu=Gr.tilePixelRatio*va.get("symbol-spacing"),Dc=va.get("text-padding")*Gr.tilePixelRatio,Yu=va.get("icon-padding")*Gr.tilePixelRatio,Gl=va.get("text-max-angle")/180*Math.PI,Xu=va.get("text-rotation-alignment")==="map"&&va.get("symbol-placement")!=="point",Ju=va.get("icon-rotation-alignment")==="map"&&va.get("symbol-placement")!=="point",fu=va.get("symbol-placement"),Fc=cu/2,hu=va.get("icon-text-fit");xi&&hu!=="none"&&(Gr.allowVerticalPlacement&&Ni.vertical&&(il=Pf(xi,Ni.vertical,hu,va.get("icon-text-fit-padding"),As,Al)),ss&&(xi=Pf(xi,ss,hu,va.get("icon-text-fit-padding"),As,Al)));var Sl=function(ed,yu){yu.x<0||yu.x>=Br||yu.y<0||yu.y>=Br||function(Hi,Ms,td,ml,Hc,ch,tc,js,nc,xu,rc,ic,qc,fh,bu,hh,ph,dh,gh,vh,Co,ac,mh,Us,nd){var yh,Cl,Yl,Xl,Jl,Kl=Hi.addToLineVertexArray(Ms,td),xh=0,bh=0,_h=0,wh=0,Gc=-1,Zc=-1,al={},Th=Ln(""),Wc=0,Yc=0;if(js._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Wc=(yh=js.layout.get("text-offset").evaluate(Co,{},Us).map(function(wu){return wu*Ma}))[0],Yc=yh[1]):(Wc=js.layout.get("text-radial-offset").evaluate(Co,{},Us)*Ma,Yc=Lc),Hi.allowVerticalPlacement&&ml.vertical){var kh=js.layout.get("text-rotate").evaluate(Co,{},Us)+90,rd=ml.vertical;Xl=new Uu(nc,Ms,xu,rc,ic,rd,qc,fh,bu,kh),tc&&(Jl=new Uu(nc,Ms,xu,rc,ic,tc,ph,dh,bu,kh))}if(Hc){var Xc=js.layout.get("icon-rotate").evaluate(Co,{}),Ah=js.layout.get("icon-text-fit")!=="none",Mh=jf(Hc,Xc,mh,Ah),Jc=tc?jf(tc,Xc,mh,Ah):void 0;Yl=new Uu(nc,Ms,xu,rc,ic,Hc,ph,dh,!1,Xc),xh=4*Mh.length;var Sh=Hi.iconSizeData,_u=null;Sh.kind==="source"?(_u=[Ns*js.layout.get("icon-size").evaluate(Co,{})])[0]>dl&&S(Hi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Sh.kind==="composite"&&((_u=[Ns*ac.compositeIconSizes[0].evaluate(Co,{},Us),Ns*ac.compositeIconSizes[1].evaluate(Co,{},Us)])[0]>dl||_u[1]>dl)&&S(Hi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Hi.addSymbols(Hi.icon,Mh,_u,vh,gh,Co,!1,Ms,Kl.lineStartIndex,Kl.lineLength,-1,Us),Gc=Hi.icon.placedSymbolArray.length-1,Jc&&(bh=4*Jc.length,Hi.addSymbols(Hi.icon,Jc,_u,vh,gh,Co,Lo.vertical,Ms,Kl.lineStartIndex,Kl.lineLength,-1,Us),Zc=Hi.icon.placedSymbolArray.length-1)}for(var Eh in ml.horizontal){var oc=ml.horizontal[Eh];if(!Cl){Th=Ln(oc.text);var id=js.layout.get("text-rotate").evaluate(Co,{},Us);Cl=new Uu(nc,Ms,xu,rc,ic,oc,qc,fh,bu,id)}var Lh=oc.positionedLines.length===1;if(_h+=Hf(Hi,Ms,oc,ch,js,bu,Co,hh,Kl,ml.vertical?Lo.horizontal:Lo.horizontalOnly,Lh?Object.keys(ml.horizontal):[Eh],al,Gc,ac,Us),Lh)break}ml.vertical&&(wh+=Hf(Hi,Ms,ml.vertical,ch,js,bu,Co,hh,Kl,Lo.vertical,["vertical"],al,Zc,ac,Us));var ad=Cl?Cl.boxStartIndex:Hi.collisionBoxArray.length,od=Cl?Cl.boxEndIndex:Hi.collisionBoxArray.length,sd=Xl?Xl.boxStartIndex:Hi.collisionBoxArray.length,ld=Xl?Xl.boxEndIndex:Hi.collisionBoxArray.length,ud=Yl?Yl.boxStartIndex:Hi.collisionBoxArray.length,cd=Yl?Yl.boxEndIndex:Hi.collisionBoxArray.length,fd=Jl?Jl.boxStartIndex:Hi.collisionBoxArray.length,hd=Jl?Jl.boxEndIndex:Hi.collisionBoxArray.length,Vs=-1,sc=function(wu,Ph){return wu&&wu.circleDiameter?Math.max(wu.circleDiameter,Ph):Ph};Vs=sc(Cl,Vs),Vs=sc(Xl,Vs),Vs=sc(Yl,Vs);var Ch=(Vs=sc(Jl,Vs))>-1?1:0;Ch&&(Vs*=nd/Ma),Hi.glyphOffsetArray.length>=di.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Co.sortKey!==void 0&&Hi.addToSortKeyRanges(Hi.symbolInstances.length,Co.sortKey),Hi.symbolInstances.emplaceBack(Ms.x,Ms.y,al.right>=0?al.right:-1,al.center>=0?al.center:-1,al.left>=0?al.left:-1,al.vertical||-1,Gc,Zc,Th,ad,od,sd,ld,ud,cd,fd,hd,xu,_h,wh,xh,bh,Ch,0,qc,Wc,Yc,Vs)}(Gr,yu,ed,Ni,xi,Ri,il,Gr.layers[0],Gr.collisionBoxArray,ti.index,ti.sourceLayerIndex,Gr.index,Zu,Dc,Xu,Wa,Wu,Yu,Ju,As,ti,Ci,vo,ja,ii)};if(fu==="line")for(var Zl=0,Ku=Nf(ti.geometry,0,0,Br,Br);Zl<Ku.length;Zl+=1)for(var $u=Ku[Zl],Wl=0,Qu=Fp($u,cu,Gl,Ni.vertical||ss,xi,ls,Ml,Gr.overscaling,Br);Wl<Qu.length;Wl+=1){var ec=Qu[Wl];ss&&Up(Gr,ss.text,Fc,ec)||Sl($u,ec)}else if(fu==="line-center")for(var pu=0,du=ti.geometry;pu<du.length;pu+=1){var El=du[pu];if(El.length>1){var gu=Dp(El,Gl,Ni.vertical||ss,xi,ls,Ml);gu&&Sl(El,gu)}}else if(ti.type==="Polygon")for(var Ll=0,vu=bc(ti.geometry,0);Ll<vu.length;Ll+=1){var mu=vu[Ll],oh=Np(mu,16);Sl(mu[0],new Bl(oh.x,oh.y,0))}else if(ti.type==="LineString")for(var Bc=0,sh=ti.geometry;Bc<sh.length;Bc+=1){var Nc=sh[Bc];Sl(Nc,new Bl(Nc[0].x,Nc[0].y,0))}else if(ti.type==="Point")for(var jc=0,lh=ti.geometry;jc<lh.length;jc+=1)for(var Uc=0,uh=lh[jc];Uc<uh.length;Uc+=1){var Vc=uh[Uc];Sl([Vc],new Bl(Vc.x,Vc.y,0))}}(M,hr,Nr,aa,ae,Tt,jr,Pr,Cr,wa,je)},tr=0,xr=M.features;tr<xr.length;tr+=1)Kn();Ee&&M.generateCollisionDebugBuffers()},l.perspective=function(M,O,Z,ae,_e){var Ee,je=1/Math.tan(O/2);return M[0]=je/Z,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=je,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,_e!=null&&_e!==1/0?(Ee=1/(ae-_e),M[10]=(_e+ae)*Ee,M[14]=2*_e*ae*Ee):(M[10]=-1,M[14]=-2*ae),M},l.pick=function(M,O){for(var Z={},ae=0;ae<O.length;ae++){var _e=O[ae];_e in M&&(Z[_e]=M[_e])}return Z},l.plugin=ua,l.polygonIntersectsPolygon=Bi,l.postMapLoadEvent=Re,l.postTurnstileEvent=me,l.potpack=Mf,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=br,l.registerForPluginStateChange=function(M){return M({pluginStatus:Ji,pluginURL:Da}),Aa.on("pluginStateChange",M),M},l.rotate=function(M,O,Z){var ae=O[0],_e=O[1],Ee=O[2],je=O[3],Qe=Math.sin(Z),st=Math.cos(Z);return M[0]=ae*st+Ee*Qe,M[1]=_e*st+je*Qe,M[2]=ae*-Qe+Ee*st,M[3]=_e*-Qe+je*st,M},l.rotateX=function(M,O,Z){var ae=Math.sin(Z),_e=Math.cos(Z),Ee=O[4],je=O[5],Qe=O[6],st=O[7],xt=O[8],Tt=O[9],jt=O[10],Ht=O[11];return O!==M&&(M[0]=O[0],M[1]=O[1],M[2]=O[2],M[3]=O[3],M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15]),M[4]=Ee*_e+xt*ae,M[5]=je*_e+Tt*ae,M[6]=Qe*_e+jt*ae,M[7]=st*_e+Ht*ae,M[8]=xt*_e-Ee*ae,M[9]=Tt*_e-je*ae,M[10]=jt*_e-Qe*ae,M[11]=Ht*_e-st*ae,M},l.rotateZ=function(M,O,Z){var ae=Math.sin(Z),_e=Math.cos(Z),Ee=O[0],je=O[1],Qe=O[2],st=O[3],xt=O[4],Tt=O[5],jt=O[6],Ht=O[7];return O!==M&&(M[8]=O[8],M[9]=O[9],M[10]=O[10],M[11]=O[11],M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15]),M[0]=Ee*_e+xt*ae,M[1]=je*_e+Tt*ae,M[2]=Qe*_e+jt*ae,M[3]=st*_e+Ht*ae,M[4]=xt*_e-Ee*ae,M[5]=Tt*_e-je*ae,M[6]=jt*_e-Qe*ae,M[7]=Ht*_e-st*ae,M},l.scale=function(M,O,Z){var ae=Z[0],_e=Z[1],Ee=Z[2];return M[0]=O[0]*ae,M[1]=O[1]*ae,M[2]=O[2]*ae,M[3]=O[3]*ae,M[4]=O[4]*_e,M[5]=O[5]*_e,M[6]=O[6]*_e,M[7]=O[7]*_e,M[8]=O[8]*Ee,M[9]=O[9]*Ee,M[10]=O[10]*Ee,M[11]=O[11]*Ee,M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15],M},l.scale$1=function(M,O,Z){return M[0]=O[0]*Z,M[1]=O[1]*Z,M[2]=O[2]*Z,M[3]=O[3]*Z,M},l.scale$2=function(M,O,Z){return M[0]=O[0]*Z,M[1]=O[1]*Z,M[2]=O[2]*Z,M},l.setCacheLimits=function(M,O){ze=M,le=O},l.setRTLTextPlugin=function(M,O,Z){if(Z===void 0&&(Z=!1),Ji===xa||Ji===Ao||Ji===Va)throw new Error("setRTLTextPlugin cannot be called multiple times.");Da=G.resolveURL(M),Ji=xa,Go=O,_s(),Z||$a()},l.sphericalToCartesian=function(M){var O=M[0],Z=M[1],ae=M[2];return Z+=90,Z*=Math.PI/180,ae*=Math.PI/180,{x:O*Math.cos(Z)*Math.sin(ae),y:O*Math.sin(Z)*Math.sin(ae),z:O*Math.cos(ae)}},l.sqrLen=Dh,l.styleSpec=qe,l.sub=zh,l.symbolSize=zp,l.transformMat3=function(M,O,Z){var ae=O[0],_e=O[1],Ee=O[2];return M[0]=ae*Z[0]+_e*Z[3]+Ee*Z[6],M[1]=ae*Z[1]+_e*Z[4]+Ee*Z[7],M[2]=ae*Z[2]+_e*Z[5]+Ee*Z[8],M},l.transformMat4=Su,l.translate=function(M,O,Z){var ae,_e,Ee,je,Qe,st,xt,Tt,jt,Ht,Vt,on,vn=Z[0],Pn=Z[1],Cn=Z[2];return O===M?(M[12]=O[0]*vn+O[4]*Pn+O[8]*Cn+O[12],M[13]=O[1]*vn+O[5]*Pn+O[9]*Cn+O[13],M[14]=O[2]*vn+O[6]*Pn+O[10]*Cn+O[14],M[15]=O[3]*vn+O[7]*Pn+O[11]*Cn+O[15]):(ae=O[0],_e=O[1],Ee=O[2],je=O[3],Qe=O[4],st=O[5],xt=O[6],Tt=O[7],jt=O[8],Ht=O[9],Vt=O[10],on=O[11],M[0]=ae,M[1]=_e,M[2]=Ee,M[3]=je,M[4]=Qe,M[5]=st,M[6]=xt,M[7]=Tt,M[8]=jt,M[9]=Ht,M[10]=Vt,M[11]=on,M[12]=ae*vn+Qe*Pn+jt*Cn+O[12],M[13]=_e*vn+st*Pn+Ht*Cn+O[13],M[14]=Ee*vn+xt*Pn+Vt*Cn+O[14],M[15]=je*vn+Tt*Pn+on*Cn+O[15]),M},l.triggerPluginCompletionEvent=ri,l.uniqueId=f,l.validateCustomStyleLayer=function(M){var O=[],Z=M.id;return Z===void 0&&O.push({message:"layers."+Z+': missing required property "id"'}),M.render===void 0&&O.push({message:"layers."+Z+': missing required method "render"'}),M.renderingMode&&M.renderingMode!=="2d"&&M.renderingMode!=="3d"&&O.push({message:"layers."+Z+': property "renderingMode" must be either "2d" or "3d"'}),O},l.validateLight=qi,l.validateStyle=Yi,l.values=function(M){var O=[];for(var Z in M)O.push(M[Z]);return O},l.vectorTile=Rl,l.version=x,l.warnOnce=S,l.webpSupported=W,l.window=self,l.wrap=i}),k(0,function(l){function T(Ze){var Ye=typeof Ze;if(Ye==="number"||Ye==="boolean"||Ye==="string"||Ze==null)return JSON.stringify(Ze);if(Array.isArray(Ze)){for(var Be="[",ke=0,Pe=Ze;ke<Pe.length;ke+=1)Be+=T(Pe[ke])+",";return Be+"]"}for(var qe=Object.keys(Ze).sort(),Xe="{",nt=0;nt<qe.length;nt++)Xe+=JSON.stringify(qe[nt])+":"+T(Ze[qe[nt]])+",";return Xe+"}"}function x(Ze){for(var Ye="",Be=0,ke=l.refProperties;Be<ke.length;Be+=1)Ye+="/"+T(Ze[ke[Be]]);return Ye}var d=function(Ze){this.keyCache={},Ze&&this.replace(Ze)};d.prototype.replace=function(Ze){this._layerConfigs={},this._layers={},this.update(Ze,[])},d.prototype.update=function(Ze,Ye){for(var Be=this,ke=0,Pe=Ze;ke<Pe.length;ke+=1){var qe=Pe[ke];this._layerConfigs[qe.id]=qe;var Xe=this._layers[qe.id]=l.createStyleLayer(qe);Xe._featureFilter=l.featureFilter(Xe.filter),this.keyCache[qe.id]&&delete this.keyCache[qe.id]}for(var nt=0,ut=Ye;nt<ut.length;nt+=1){var ct=ut[nt];delete this.keyCache[ct],delete this._layerConfigs[ct],delete this._layers[ct]}this.familiesBySource={};for(var Ct=0,Lt=function(Nt,Dt){for(var qt={},Xt=0;Xt<Nt.length;Xt++){var cn=Dt&&Dt[Nt[Xt].id]||x(Nt[Xt]);Dt&&(Dt[Nt[Xt].id]=cn);var yn=qt[cn];yn||(yn=qt[cn]=[]),yn.push(Nt[Xt])}var Kt=[];for(var Mn in qt)Kt.push(qt[Mn]);return Kt}(l.values(this._layerConfigs),this.keyCache);Ct<Lt.length;Ct+=1){var Mt=Lt[Ct].map(function(Nt){return Be._layers[Nt.id]}),mt=Mt[0];if(mt.visibility!=="none"){var kt=mt.source||"",wt=this.familiesBySource[kt];wt||(wt=this.familiesBySource[kt]={});var Ot=mt.sourceLayer||"_geojsonTileLayer",It=wt[Ot];It||(It=wt[Ot]=[]),It.push(Mt)}}};var s=function(Ze){var Ye={},Be=[];for(var ke in Ze){var Pe=Ze[ke],qe=Ye[ke]={};for(var Xe in Pe){var nt=Pe[+Xe];if(nt&&nt.bitmap.width!==0&&nt.bitmap.height!==0){var ut={x:0,y:0,w:nt.bitmap.width+2,h:nt.bitmap.height+2};Be.push(ut),qe[Xe]={rect:ut,metrics:nt.metrics}}}}var ct=l.potpack(Be),Ct=ct.w,Lt=ct.h,Mt=new l.AlphaImage({width:Ct||1,height:Lt||1});for(var mt in Ze){var kt=Ze[mt];for(var wt in kt){var Ot=kt[+wt];if(Ot&&Ot.bitmap.width!==0&&Ot.bitmap.height!==0){var It=Ye[mt][wt].rect;l.AlphaImage.copy(Ot.bitmap,Mt,{x:0,y:0},{x:It.x+1,y:It.y+1},Ot.bitmap)}}}this.image=Mt,this.positions=Ye};l.register("GlyphAtlas",s);var t=function(Ze){this.tileID=new l.OverscaledTileID(Ze.tileID.overscaledZ,Ze.tileID.wrap,Ze.tileID.canonical.z,Ze.tileID.canonical.x,Ze.tileID.canonical.y),this.uid=Ze.uid,this.zoom=Ze.zoom,this.pixelRatio=Ze.pixelRatio,this.tileSize=Ze.tileSize,this.source=Ze.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ze.showCollisionBoxes,this.collectResourceTiming=!!Ze.collectResourceTiming,this.returnDependencies=!!Ze.returnDependencies,this.promoteId=Ze.promoteId};function o(Ze,Ye,Be){for(var ke=new l.EvaluationParameters(Ye),Pe=0,qe=Ze;Pe<qe.length;Pe+=1)qe[Pe].recalculate(ke,Be)}function r(Ze,Ye){var Be=l.getArrayBuffer(Ze.request,function(ke,Pe,qe,Xe){ke?Ye(ke):Pe&&Ye(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(Pe)),rawData:Pe,cacheControl:qe,expires:Xe})});return function(){Be.cancel(),Ye()}}t.prototype.parse=function(Ze,Ye,Be,ke,Pe){var qe=this;this.status="parsing",this.data=Ze,this.collisionBoxArray=new l.CollisionBoxArray;var Xe=new l.DictionaryCoder(Object.keys(Ze.layers).sort()),nt=new l.FeatureIndex(this.tileID,this.promoteId);nt.bucketLayerIDs=[];var ut,ct,Ct,Lt,Mt={},mt={featureIndex:nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Be},kt=Ye.familiesBySource[this.source];for(var wt in kt){var Ot=Ze.layers[wt];if(Ot){Ot.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+wt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var It=Xe.encode(wt),Nt=[],Dt=0;Dt<Ot.length;Dt++){var qt=Ot.feature(Dt),Xt=nt.getId(qt,wt);Nt.push({feature:qt,id:Xt,index:Dt,sourceLayerIndex:It})}for(var cn=0,yn=kt[wt];cn<yn.length;cn+=1){var Kt=yn[cn],Mn=Kt[0];Mn.minzoom&&this.zoom<Math.floor(Mn.minzoom)||Mn.maxzoom&&this.zoom>=Mn.maxzoom||Mn.visibility!=="none"&&(o(Kt,this.zoom,Be),(Mt[Mn.id]=Mn.createBucket({index:nt.bucketLayerIDs.length,layers:Kt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:It,sourceID:this.source})).populate(Nt,mt,this.tileID.canonical),nt.bucketLayerIDs.push(Kt.map(function(an){return an.id})))}}}var Un=l.mapObject(mt.glyphDependencies,function(an){return Object.keys(an).map(Number)});Object.keys(Un).length?ke.send("getGlyphs",{uid:this.uid,stacks:Un},function(an,sn){ut||(ut=an,ct=sn,gn.call(qe))}):ct={};var xn=Object.keys(mt.iconDependencies);xn.length?ke.send("getImages",{icons:xn,source:this.source,tileID:this.tileID,type:"icons"},function(an,sn){ut||(ut=an,Ct=sn,gn.call(qe))}):Ct={};var dn=Object.keys(mt.patternDependencies);function gn(){if(ut)return Pe(ut);if(ct&&Ct&&Lt){var an=new s(ct),sn=new l.ImageAtlas(Ct,Lt);for(var On in Mt){var En=Mt[On];En instanceof l.SymbolBucket?(o(En.layers,this.zoom,Be),l.performSymbolLayout(En,ct,an.positions,Ct,sn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):En.hasPattern&&(En instanceof l.LineBucket||En instanceof l.FillBucket||En instanceof l.FillExtrusionBucket)&&(o(En.layers,this.zoom,Be),En.addFeatures(mt,this.tileID.canonical,sn.patternPositions))}this.status="done",Pe(null,{buckets:l.values(Mt).filter(function(Dn){return!Dn.isEmpty()}),featureIndex:nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:an.image,imageAtlas:sn,glyphMap:this.returnDependencies?ct:null,iconMap:this.returnDependencies?Ct:null,glyphPositions:this.returnDependencies?an.positions:null})}}dn.length?ke.send("getImages",{icons:dn,source:this.source,tileID:this.tileID,type:"patterns"},function(an,sn){ut||(ut=an,Lt=sn,gn.call(qe))}):Lt={},gn.call(this)};var n=function(Ze,Ye,Be,ke){this.actor=Ze,this.layerIndex=Ye,this.availableImages=Be,this.loadVectorData=ke||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(Ze,Ye){var Be=this,ke=Ze.uid;this.loading||(this.loading={});var Pe=!!(Ze&&Ze.request&&Ze.request.collectResourceTiming)&&new l.RequestPerformance(Ze.request),qe=this.loading[ke]=new t(Ze);qe.abort=this.loadVectorData(Ze,function(Xe,nt){if(delete Be.loading[ke],Xe||!nt)return qe.status="done",Be.loaded[ke]=qe,Ye(Xe);var ut=nt.rawData,ct={};nt.expires&&(ct.expires=nt.expires),nt.cacheControl&&(ct.cacheControl=nt.cacheControl);var Ct={};if(Pe){var Lt=Pe.finish();Lt&&(Ct.resourceTiming=JSON.parse(JSON.stringify(Lt)))}qe.vectorTile=nt.vectorTile,qe.parse(nt.vectorTile,Be.layerIndex,Be.availableImages,Be.actor,function(Mt,mt){if(Mt||!mt)return Ye(Mt);Ye(null,l.extend({rawTileData:ut.slice(0)},mt,ct,Ct))}),Be.loaded=Be.loaded||{},Be.loaded[ke]=qe})},n.prototype.reloadTile=function(Ze,Ye){var Be=this,ke=this.loaded,Pe=Ze.uid,qe=this;if(ke&&ke[Pe]){var Xe=ke[Pe];Xe.showCollisionBoxes=Ze.showCollisionBoxes;var nt=function(ut,ct){var Ct=Xe.reloadCallback;Ct&&(delete Xe.reloadCallback,Xe.parse(Xe.vectorTile,qe.layerIndex,Be.availableImages,qe.actor,Ct)),Ye(ut,ct)};Xe.status==="parsing"?Xe.reloadCallback=nt:Xe.status==="done"&&(Xe.vectorTile?Xe.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,nt):nt())}},n.prototype.abortTile=function(Ze,Ye){var Be=this.loading,ke=Ze.uid;Be&&Be[ke]&&Be[ke].abort&&(Be[ke].abort(),delete Be[ke]),Ye()},n.prototype.removeTile=function(Ze,Ye){var Be=this.loaded,ke=Ze.uid;Be&&Be[ke]&&delete Be[ke],Ye()};var a=l.window.ImageBitmap,i=function(){this.loaded={}};i.prototype.loadTile=function(Ze,Ye){var Be=Ze.uid,ke=Ze.encoding,Pe=Ze.rawImageData,qe=a&&Pe instanceof a?this.getImageData(Pe):Pe,Xe=new l.DEMData(Be,qe,ke);this.loaded=this.loaded||{},this.loaded[Be]=Xe,Ye(null,Xe)},i.prototype.getImageData=function(Ze){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ze.width,Ze.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ze.width,this.offscreenCanvas.height=Ze.height,this.offscreenCanvasContext.drawImage(Ze,0,0,Ze.width,Ze.height);var Ye=this.offscreenCanvasContext.getImageData(-1,-1,Ze.width+2,Ze.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:Ye.width,height:Ye.height},Ye.data)},i.prototype.removeTile=function(Ze){var Ye=this.loaded,Be=Ze.uid;Ye&&Ye[Be]&&delete Ye[Be]};var c=function Ze(Ye,Be){var ke,Pe=Ye&&Ye.type;if(Pe==="FeatureCollection")for(ke=0;ke<Ye.features.length;ke++)Ze(Ye.features[ke],Be);else if(Pe==="GeometryCollection")for(ke=0;ke<Ye.geometries.length;ke++)Ze(Ye.geometries[ke],Be);else if(Pe==="Feature")Ze(Ye.geometry,Be);else if(Pe==="Polygon")h(Ye.coordinates,Be);else if(Pe==="MultiPolygon")for(ke=0;ke<Ye.coordinates.length;ke++)h(Ye.coordinates[ke],Be);return Ye};function h(Ze,Ye){if(Ze.length!==0){f(Ze[0],Ye);for(var Be=1;Be<Ze.length;Be++)f(Ze[Be],!Ye)}}function f(Ze,Ye){for(var Be=0,ke=0,Pe=Ze.length,qe=Pe-1;ke<Pe;qe=ke++)Be+=(Ze[ke][0]-Ze[qe][0])*(Ze[qe][1]+Ze[ke][1]);Be>=0!=!!Ye&&Ze.reverse()}var b=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(Ze){this._feature=Ze,this.extent=l.EXTENT,this.type=Ze.type,this.properties=Ze.tags,"id"in Ze&&!isNaN(Ze.id)&&(this.id=parseInt(Ze.id,10))};v.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ze=[],Ye=0,Be=this._feature.geometry;Ye<Be.length;Ye+=1){var ke=Be[Ye];Ze.push([new l.Point$1(ke[0],ke[1])])}return Ze}for(var Pe=[],qe=0,Xe=this._feature.geometry;qe<Xe.length;qe+=1){for(var nt=[],ut=0,ct=Xe[qe];ut<ct.length;ut+=1){var Ct=ct[ut];nt.push(new l.Point$1(Ct[0],Ct[1]))}Pe.push(nt)}return Pe},v.prototype.toGeoJSON=function(Ze,Ye,Be){return b.call(this,Ze,Ye,Be)};var g=function(Ze){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Ze.length,this._features=Ze};g.prototype.feature=function(Ze){return new v(this._features[Ze])};var y=l.vectorTile.VectorTileFeature,p=m;function m(Ze,Ye){this.options=Ye||{},this.features=Ze,this.length=Ze.length}function w(Ze,Ye){this.id=typeof Ze.id=="number"?Ze.id:void 0,this.type=Ze.type,this.rawGeometry=Ze.type===1?[Ze.geometry]:Ze.geometry,this.properties=Ze.tags,this.extent=Ye||4096}m.prototype.feature=function(Ze){return new w(this.features[Ze],this.options.extent)},w.prototype.loadGeometry=function(){var Ze=this.rawGeometry;this.geometry=[];for(var Ye=0;Ye<Ze.length;Ye++){for(var Be=Ze[Ye],ke=[],Pe=0;Pe<Be.length;Pe++)ke.push(new l.Point$1(Be[Pe][0],Be[Pe][1]));this.geometry.push(ke)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ze=this.geometry,Ye=1/0,Be=-1/0,ke=1/0,Pe=-1/0,qe=0;qe<Ze.length;qe++)for(var Xe=Ze[qe],nt=0;nt<Xe.length;nt++){var ut=Xe[nt];Ye=Math.min(Ye,ut.x),Be=Math.max(Be,ut.x),ke=Math.min(ke,ut.y),Pe=Math.max(Pe,ut.y)}return[Ye,ke,Be,Pe]},w.prototype.toGeoJSON=y.prototype.toGeoJSON;var u=L,S=L,_=function(Ze,Ye){Ye=Ye||{};var Be={};for(var ke in Ze)Be[ke]=new p(Ze[ke].features,Ye),Be[ke].name=ke,Be[ke].version=Ye.version,Be[ke].extent=Ye.extent;return L({layers:Be})},E=p;function L(Ze){var Ye=new l.pbf;return function(Be,ke){for(var Pe in Be.layers)ke.writeMessage(3,C,Be.layers[Pe])}(Ze,Ye),Ye.finish()}function C(Ze,Ye){var Be;Ye.writeVarintField(15,Ze.version||1),Ye.writeStringField(1,Ze.name||""),Ye.writeVarintField(5,Ze.extent||4096);var ke={keys:[],values:[],keycache:{},valuecache:{}};for(Be=0;Be<Ze.length;Be++)ke.feature=Ze.feature(Be),Ye.writeMessage(2,P,ke);var Pe=ke.keys;for(Be=0;Be<Pe.length;Be++)Ye.writeStringField(3,Pe[Be]);var qe=ke.values;for(Be=0;Be<qe.length;Be++)Ye.writeMessage(4,F,qe[Be])}function P(Ze,Ye){var Be=Ze.feature;Be.id!==void 0&&Ye.writeVarintField(1,Be.id),Ye.writeMessage(2,I,Ze),Ye.writeVarintField(3,Be.type),Ye.writeMessage(4,H,Be)}function I(Ze,Ye){var Be=Ze.feature,ke=Ze.keys,Pe=Ze.values,qe=Ze.keycache,Xe=Ze.valuecache;for(var nt in Be.properties){var ut=qe[nt];ut===void 0&&(ke.push(nt),ut=ke.length-1,qe[nt]=ut),Ye.writeVarint(ut);var ct=Be.properties[nt],Ct=typeof ct;Ct!=="string"&&Ct!=="boolean"&&Ct!=="number"&&(ct=JSON.stringify(ct));var Lt=Ct+":"+ct,Mt=Xe[Lt];Mt===void 0&&(Pe.push(ct),Mt=Pe.length-1,Xe[Lt]=Mt),Ye.writeVarint(Mt)}}function U(Ze,Ye){return(Ye<<3)+(7&Ze)}function z(Ze){return Ze<<1^Ze>>31}function H(Ze,Ye){for(var Be=Ze.loadGeometry(),ke=Ze.type,Pe=0,qe=0,Xe=Be.length,nt=0;nt<Xe;nt++){var ut=Be[nt],ct=1;ke===1&&(ct=ut.length),Ye.writeVarint(U(1,ct));for(var Ct=ke===3?ut.length-1:ut.length,Lt=0;Lt<Ct;Lt++){Lt===1&&ke!==1&&Ye.writeVarint(U(2,Ct-1));var Mt=ut[Lt].x-Pe,mt=ut[Lt].y-qe;Ye.writeVarint(z(Mt)),Ye.writeVarint(z(mt)),Pe+=Mt,qe+=mt}ke===3&&Ye.writeVarint(U(7,1))}}function F(Ze,Ye){var Be=typeof Ze;Be==="string"?Ye.writeStringField(1,Ze):Be==="boolean"?Ye.writeBooleanField(7,Ze):Be==="number"&&(Ze%1!=0?Ye.writeDoubleField(3,Ze):Ze<0?Ye.writeSVarintField(6,Ze):Ye.writeVarintField(5,Ze))}function N(Ze,Ye,Be,ke,Pe,qe){if(!(Pe-ke<=Be)){var Xe=ke+Pe>>1;B(Ze,Ye,Xe,ke,Pe,qe%2),N(Ze,Ye,Be,ke,Xe-1,qe+1),N(Ze,Ye,Be,Xe+1,Pe,qe+1)}}function B(Ze,Ye,Be,ke,Pe,qe){for(;Pe>ke;){if(Pe-ke>600){var Xe=Pe-ke+1,nt=Be-ke+1,ut=Math.log(Xe),ct=.5*Math.exp(2*ut/3),Ct=.5*Math.sqrt(ut*ct*(Xe-ct)/Xe)*(nt-Xe/2<0?-1:1);B(Ze,Ye,Be,Math.max(ke,Math.floor(Be-nt*ct/Xe+Ct)),Math.min(Pe,Math.floor(Be+(Xe-nt)*ct/Xe+Ct)),qe)}var Lt=Ye[2*Be+qe],Mt=ke,mt=Pe;for(j(Ze,Ye,ke,Be),Ye[2*Pe+qe]>Lt&&j(Ze,Ye,ke,Pe);Mt<mt;){for(j(Ze,Ye,Mt,mt),Mt++,mt--;Ye[2*Mt+qe]<Lt;)Mt++;for(;Ye[2*mt+qe]>Lt;)mt--}Ye[2*ke+qe]===Lt?j(Ze,Ye,ke,mt):j(Ze,Ye,++mt,Pe),mt<=Be&&(ke=mt+1),Be<=mt&&(Pe=mt-1)}}function j(Ze,Ye,Be,ke){K(Ze,Be,ke),K(Ye,2*Be,2*ke),K(Ye,2*Be+1,2*ke+1)}function K(Ze,Ye,Be){var ke=Ze[Ye];Ze[Ye]=Ze[Be],Ze[Be]=ke}function G(Ze,Ye,Be,ke){var Pe=Ze-Be,qe=Ye-ke;return Pe*Pe+qe*qe}u.fromVectorTileJs=S,u.fromGeojsonVt=_,u.GeoJSONWrapper=E;var V=function(Ze){return Ze[0]},W=function(Ze){return Ze[1]},J=function(Ze,Ye,Be,ke,Pe){Ye===void 0&&(Ye=V),Be===void 0&&(Be=W),ke===void 0&&(ke=64),Pe===void 0&&(Pe=Float64Array),this.nodeSize=ke,this.points=Ze;for(var qe=Ze.length<65536?Uint16Array:Uint32Array,Xe=this.ids=new qe(Ze.length),nt=this.coords=new Pe(2*Ze.length),ut=0;ut<Ze.length;ut++)Xe[ut]=ut,nt[2*ut]=Ye(Ze[ut]),nt[2*ut+1]=Be(Ze[ut]);N(Xe,nt,ke,0,Xe.length-1,0)};J.prototype.range=function(Ze,Ye,Be,ke){return function(Pe,qe,Xe,nt,ut,ct,Ct){for(var Lt,Mt,mt=[0,Pe.length-1,0],kt=[];mt.length;){var wt=mt.pop(),Ot=mt.pop(),It=mt.pop();if(Ot-It<=Ct)for(var Nt=It;Nt<=Ot;Nt++)Lt=qe[2*Nt],Mt=qe[2*Nt+1],Lt>=Xe&&Lt<=ut&&Mt>=nt&&Mt<=ct&&kt.push(Pe[Nt]);else{var Dt=Math.floor((It+Ot)/2);Lt=qe[2*Dt],Mt=qe[2*Dt+1],Lt>=Xe&&Lt<=ut&&Mt>=nt&&Mt<=ct&&kt.push(Pe[Dt]);var qt=(wt+1)%2;(wt===0?Xe<=Lt:nt<=Mt)&&(mt.push(It),mt.push(Dt-1),mt.push(qt)),(wt===0?ut>=Lt:ct>=Mt)&&(mt.push(Dt+1),mt.push(Ot),mt.push(qt))}}return kt}(this.ids,this.coords,Ze,Ye,Be,ke,this.nodeSize)},J.prototype.within=function(Ze,Ye,Be){return function(ke,Pe,qe,Xe,nt,ut){for(var ct=[0,ke.length-1,0],Ct=[],Lt=nt*nt;ct.length;){var Mt=ct.pop(),mt=ct.pop(),kt=ct.pop();if(mt-kt<=ut)for(var wt=kt;wt<=mt;wt++)G(Pe[2*wt],Pe[2*wt+1],qe,Xe)<=Lt&&Ct.push(ke[wt]);else{var Ot=Math.floor((kt+mt)/2),It=Pe[2*Ot],Nt=Pe[2*Ot+1];G(It,Nt,qe,Xe)<=Lt&&Ct.push(ke[Ot]);var Dt=(Mt+1)%2;(Mt===0?qe-nt<=It:Xe-nt<=Nt)&&(ct.push(kt),ct.push(Ot-1),ct.push(Dt)),(Mt===0?qe+nt>=It:Xe+nt>=Nt)&&(ct.push(Ot+1),ct.push(mt),ct.push(Dt))}}return Ct}(this.ids,this.coords,Ze,Ye,Be,this.nodeSize)};var X={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ze){return Ze}},ee=function(Ze){this.options=he(Object.create(X),Ze),this.trees=new Array(this.options.maxZoom+1)};function re(Ze,Ye,Be,ke,Pe){return{x:Ze,y:Ye,zoom:1/0,id:Be,parentId:-1,numPoints:ke,properties:Pe}}function ie(Ze,Ye){var Be=Ze.geometry.coordinates,ke=Be[0],Pe=Be[1];return{x:ye(ke),y:ge(Pe),zoom:1/0,index:Ye,parentId:-1}}function se(Ze){return{type:"Feature",id:Ze.id,properties:fe(Ze),geometry:{type:"Point",coordinates:[(ke=Ze.x,360*(ke-.5)),(Ye=Ze.y,Be=(180-360*Ye)*Math.PI/180,360*Math.atan(Math.exp(Be))/Math.PI-90)]}};var Ye,Be,ke}function fe(Ze){var Ye=Ze.numPoints,Be=Ye>=1e4?Math.round(Ye/1e3)+"k":Ye>=1e3?Math.round(Ye/100)/10+"k":Ye;return he(he({},Ze.properties),{cluster:!0,cluster_id:Ze.id,point_count:Ye,point_count_abbreviated:Be})}function ye(Ze){return Ze/360+.5}function ge(Ze){var Ye=Math.sin(Ze*Math.PI/180),Be=.5-.25*Math.log((1+Ye)/(1-Ye))/Math.PI;return Be<0?0:Be>1?1:Be}function he(Ze,Ye){for(var Be in Ye)Ze[Be]=Ye[Be];return Ze}function ve(Ze){return Ze.x}function Ie(Ze){return Ze.y}function xe(Ze,Ye,Be,ke){for(var Pe,qe=ke,Xe=Be-Ye>>1,nt=Be-Ye,ut=Ze[Ye],ct=Ze[Ye+1],Ct=Ze[Be],Lt=Ze[Be+1],Mt=Ye+3;Mt<Be;Mt+=3){var mt=Ae(Ze[Mt],Ze[Mt+1],ut,ct,Ct,Lt);if(mt>qe)Pe=Mt,qe=mt;else if(mt===qe){var kt=Math.abs(Mt-Xe);kt<nt&&(Pe=Mt,nt=kt)}}qe>ke&&(Pe-Ye>3&&xe(Ze,Ye,Pe,ke),Ze[Pe+2]=qe,Be-Pe>3&&xe(Ze,Pe,Be,ke))}function Ae(Ze,Ye,Be,ke,Pe,qe){var Xe=Pe-Be,nt=qe-ke;if(Xe!==0||nt!==0){var ut=((Ze-Be)*Xe+(Ye-ke)*nt)/(Xe*Xe+nt*nt);ut>1?(Be=Pe,ke=qe):ut>0&&(Be+=Xe*ut,ke+=nt*ut)}return(Xe=Ze-Be)*Xe+(nt=Ye-ke)*nt}function Se(Ze,Ye,Be,ke){var Pe={id:Ze===void 0?null:Ze,type:Ye,geometry:Be,tags:ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(qe){var Xe=qe.geometry,nt=qe.type;if(nt==="Point"||nt==="MultiPoint"||nt==="LineString")Te(qe,Xe);else if(nt==="Polygon"||nt==="MultiLineString")for(var ut=0;ut<Xe.length;ut++)Te(qe,Xe[ut]);else if(nt==="MultiPolygon")for(ut=0;ut<Xe.length;ut++)for(var ct=0;ct<Xe[ut].length;ct++)Te(qe,Xe[ut][ct])}(Pe),Pe}function Te(Ze,Ye){for(var Be=0;Be<Ye.length;Be+=3)Ze.minX=Math.min(Ze.minX,Ye[Be]),Ze.minY=Math.min(Ze.minY,Ye[Be+1]),Ze.maxX=Math.max(Ze.maxX,Ye[Be]),Ze.maxY=Math.max(Ze.maxY,Ye[Be+1])}function Q(Ze,Ye,Be,ke){if(Ye.geometry){var Pe=Ye.geometry.coordinates,qe=Ye.geometry.type,Xe=Math.pow(Be.tolerance/((1<<Be.maxZoom)*Be.extent),2),nt=[],ut=Ye.id;if(Be.promoteId?ut=Ye.properties[Be.promoteId]:Be.generateId&&(ut=ke||0),qe==="Point")oe(Pe,nt);else if(qe==="MultiPoint")for(var ct=0;ct<Pe.length;ct++)oe(Pe[ct],nt);else if(qe==="LineString")ce(Pe,nt,Xe,!1);else if(qe==="MultiLineString"){if(Be.lineMetrics){for(ct=0;ct<Pe.length;ct++)nt=[],ce(Pe[ct],nt,Xe,!1),Ze.push(Se(ut,"LineString",nt,Ye.properties));return}me(Pe,nt,Xe,!1)}else if(qe==="Polygon")me(Pe,nt,Xe,!0);else{if(qe!=="MultiPolygon"){if(qe==="GeometryCollection"){for(ct=0;ct<Ye.geometry.geometries.length;ct++)Q(Ze,{id:ut,geometry:Ye.geometry.geometries[ct],properties:Ye.properties},Be,ke);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ct=0;ct<Pe.length;ct++){var Ct=[];me(Pe[ct],Ct,Xe,!0),nt.push(Ct)}}Ze.push(Se(ut,qe,nt,Ye.properties))}}function oe(Ze,Ye){Ye.push(Me(Ze[0])),Ye.push(Re(Ze[1])),Ye.push(0)}function ce(Ze,Ye,Be,ke){for(var Pe,qe,Xe=0,nt=0;nt<Ze.length;nt++){var ut=Me(Ze[nt][0]),ct=Re(Ze[nt][1]);Ye.push(ut),Ye.push(ct),Ye.push(0),nt>0&&(Xe+=ke?(Pe*ct-ut*qe)/2:Math.sqrt(Math.pow(ut-Pe,2)+Math.pow(ct-qe,2))),Pe=ut,qe=ct}var Ct=Ye.length-3;Ye[2]=1,xe(Ye,0,Ct,Be),Ye[Ct+2]=1,Ye.size=Math.abs(Xe),Ye.start=0,Ye.end=Ye.size}function me(Ze,Ye,Be,ke){for(var Pe=0;Pe<Ze.length;Pe++){var qe=[];ce(Ze[Pe],qe,Be,ke),Ye.push(qe)}}function Me(Ze){return Ze/360+.5}function Re(Ze){var Ye=Math.sin(Ze*Math.PI/180),Be=.5-.25*Math.log((1+Ye)/(1-Ye))/Math.PI;return Be<0?0:Be>1?1:Be}function Ce(Ze,Ye,Be,ke,Pe,qe,Xe,nt){if(ke/=Ye,qe>=(Be/=Ye)&&Xe<ke)return Ze;if(Xe<Be||qe>=ke)return null;for(var ut=[],ct=0;ct<Ze.length;ct++){var Ct=Ze[ct],Lt=Ct.geometry,Mt=Ct.type,mt=Pe===0?Ct.minX:Ct.minY,kt=Pe===0?Ct.maxX:Ct.maxY;if(mt>=Be&&kt<ke)ut.push(Ct);else if(!(kt<Be||mt>=ke)){var wt=[];if(Mt==="Point"||Mt==="MultiPoint")ze(Lt,wt,Be,ke,Pe);else if(Mt==="LineString")le(Lt,wt,Be,ke,Pe,!1,nt.lineMetrics);else if(Mt==="MultiLineString")be(Lt,wt,Be,ke,Pe,!1);else if(Mt==="Polygon")be(Lt,wt,Be,ke,Pe,!0);else if(Mt==="MultiPolygon")for(var Ot=0;Ot<Lt.length;Ot++){var It=[];be(Lt[Ot],It,Be,ke,Pe,!0),It.length&&wt.push(It)}if(wt.length){if(nt.lineMetrics&&Mt==="LineString"){for(Ot=0;Ot<wt.length;Ot++)ut.push(Se(Ct.id,Mt,wt[Ot],Ct.tags));continue}Mt!=="LineString"&&Mt!=="MultiLineString"||(wt.length===1?(Mt="LineString",wt=wt[0]):Mt="MultiLineString"),Mt!=="Point"&&Mt!=="MultiPoint"||(Mt=wt.length===3?"Point":"MultiPoint"),ut.push(Se(Ct.id,Mt,wt,Ct.tags))}}}return ut.length?ut:null}function ze(Ze,Ye,Be,ke,Pe){for(var qe=0;qe<Ze.length;qe+=3){var Xe=Ze[qe+Pe];Xe>=Be&&Xe<=ke&&(Ye.push(Ze[qe]),Ye.push(Ze[qe+1]),Ye.push(Ze[qe+2]))}}function le(Ze,Ye,Be,ke,Pe,qe,Xe){for(var nt,ut,ct=de(Ze),Ct=Pe===0?Ve:He,Lt=Ze.start,Mt=0;Mt<Ze.length-3;Mt+=3){var mt=Ze[Mt],kt=Ze[Mt+1],wt=Ze[Mt+2],Ot=Ze[Mt+3],It=Ze[Mt+4],Nt=Pe===0?mt:kt,Dt=Pe===0?Ot:It,qt=!1;Xe&&(nt=Math.sqrt(Math.pow(mt-Ot,2)+Math.pow(kt-It,2))),Nt<Be?Dt>Be&&(ut=Ct(ct,mt,kt,Ot,It,Be),Xe&&(ct.start=Lt+nt*ut)):Nt>ke?Dt<ke&&(ut=Ct(ct,mt,kt,Ot,It,ke),Xe&&(ct.start=Lt+nt*ut)):Fe(ct,mt,kt,wt),Dt<Be&&Nt>=Be&&(ut=Ct(ct,mt,kt,Ot,It,Be),qt=!0),Dt>ke&&Nt<=ke&&(ut=Ct(ct,mt,kt,Ot,It,ke),qt=!0),!qe&&qt&&(Xe&&(ct.end=Lt+nt*ut),Ye.push(ct),ct=de(Ze)),Xe&&(Lt+=nt)}var Xt=Ze.length-3;mt=Ze[Xt],kt=Ze[Xt+1],wt=Ze[Xt+2],(Nt=Pe===0?mt:kt)>=Be&&Nt<=ke&&Fe(ct,mt,kt,wt),Xt=ct.length-3,qe&&Xt>=3&&(ct[Xt]!==ct[0]||ct[Xt+1]!==ct[1])&&Fe(ct,ct[0],ct[1],ct[2]),ct.length&&Ye.push(ct)}function de(Ze){var Ye=[];return Ye.size=Ze.size,Ye.start=Ze.start,Ye.end=Ze.end,Ye}function be(Ze,Ye,Be,ke,Pe,qe){for(var Xe=0;Xe<Ze.length;Xe++)le(Ze[Xe],Ye,Be,ke,Pe,qe,!1)}function Fe(Ze,Ye,Be,ke){Ze.push(Ye),Ze.push(Be),Ze.push(ke)}function Ve(Ze,Ye,Be,ke,Pe,qe){var Xe=(qe-Ye)/(ke-Ye);return Ze.push(qe),Ze.push(Be+(Pe-Be)*Xe),Ze.push(1),Xe}function He(Ze,Ye,Be,ke,Pe,qe){var Xe=(qe-Be)/(Pe-Be);return Ze.push(Ye+(ke-Ye)*Xe),Ze.push(qe),Ze.push(1),Xe}function rt(Ze,Ye){for(var Be=[],ke=0;ke<Ze.length;ke++){var Pe,qe=Ze[ke],Xe=qe.type;if(Xe==="Point"||Xe==="MultiPoint"||Xe==="LineString")Pe=tt(qe.geometry,Ye);else if(Xe==="MultiLineString"||Xe==="Polygon"){Pe=[];for(var nt=0;nt<qe.geometry.length;nt++)Pe.push(tt(qe.geometry[nt],Ye))}else if(Xe==="MultiPolygon")for(Pe=[],nt=0;nt<qe.geometry.length;nt++){for(var ut=[],ct=0;ct<qe.geometry[nt].length;ct++)ut.push(tt(qe.geometry[nt][ct],Ye));Pe.push(ut)}Be.push(Se(qe.id,Xe,Pe,qe.tags))}return Be}function tt(Ze,Ye){var Be=[];Be.size=Ze.size,Ze.start!==void 0&&(Be.start=Ze.start,Be.end=Ze.end);for(var ke=0;ke<Ze.length;ke+=3)Be.push(Ze[ke]+Ye,Ze[ke+1],Ze[ke+2]);return Be}function ot(Ze,Ye){if(Ze.transformed)return Ze;var Be,ke,Pe,qe=1<<Ze.z,Xe=Ze.x,nt=Ze.y;for(Be=0;Be<Ze.features.length;Be++){var ut=Ze.features[Be],ct=ut.geometry,Ct=ut.type;if(ut.geometry=[],Ct===1)for(ke=0;ke<ct.length;ke+=2)ut.geometry.push(ht(ct[ke],ct[ke+1],Ye,qe,Xe,nt));else for(ke=0;ke<ct.length;ke++){var Lt=[];for(Pe=0;Pe<ct[ke].length;Pe+=2)Lt.push(ht(ct[ke][Pe],ct[ke][Pe+1],Ye,qe,Xe,nt));ut.geometry.push(Lt)}}return Ze.transformed=!0,Ze}function ht(Ze,Ye,Be,ke,Pe,qe){return[Math.round(Be*(Ze*ke-Pe)),Math.round(Be*(Ye*ke-qe))]}function _t(Ze,Ye,Be,ke,Pe){for(var qe=Ye===Pe.maxZoom?0:Pe.tolerance/((1<<Ye)*Pe.extent),Xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Be,y:ke,z:Ye,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},nt=0;nt<Ze.length;nt++){Xe.numFeatures++,dt(Xe,Ze[nt],qe,Pe);var ut=Ze[nt].minX,ct=Ze[nt].minY,Ct=Ze[nt].maxX,Lt=Ze[nt].maxY;ut<Xe.minX&&(Xe.minX=ut),ct<Xe.minY&&(Xe.minY=ct),Ct>Xe.maxX&&(Xe.maxX=Ct),Lt>Xe.maxY&&(Xe.maxY=Lt)}return Xe}function dt(Ze,Ye,Be,ke){var Pe=Ye.geometry,qe=Ye.type,Xe=[];if(qe==="Point"||qe==="MultiPoint")for(var nt=0;nt<Pe.length;nt+=3)Xe.push(Pe[nt]),Xe.push(Pe[nt+1]),Ze.numPoints++,Ze.numSimplified++;else if(qe==="LineString")bt(Xe,Pe,Ze,Be,!1,!1);else if(qe==="MultiLineString"||qe==="Polygon")for(nt=0;nt<Pe.length;nt++)bt(Xe,Pe[nt],Ze,Be,qe==="Polygon",nt===0);else if(qe==="MultiPolygon")for(var ut=0;ut<Pe.length;ut++){var ct=Pe[ut];for(nt=0;nt<ct.length;nt++)bt(Xe,ct[nt],Ze,Be,!0,nt===0)}if(Xe.length){var Ct=Ye.tags||null;if(qe==="LineString"&&ke.lineMetrics){for(var Lt in Ct={},Ye.tags)Ct[Lt]=Ye.tags[Lt];Ct.mapbox_clip_start=Pe.start/Pe.size,Ct.mapbox_clip_end=Pe.end/Pe.size}var Mt={geometry:Xe,type:qe==="Polygon"||qe==="MultiPolygon"?3:qe==="LineString"||qe==="MultiLineString"?2:1,tags:Ct};Ye.id!==null&&(Mt.id=Ye.id),Ze.features.push(Mt)}}function bt(Ze,Ye,Be,ke,Pe,qe){var Xe=ke*ke;if(ke>0&&Ye.size<(Pe?Xe:ke))Be.numPoints+=Ye.length/3;else{for(var nt=[],ut=0;ut<Ye.length;ut+=3)(ke===0||Ye[ut+2]>Xe)&&(Be.numSimplified++,nt.push(Ye[ut]),nt.push(Ye[ut+1])),Be.numPoints++;Pe&&function(ct,Ct){for(var Lt=0,Mt=0,mt=ct.length,kt=mt-2;Mt<mt;kt=Mt,Mt+=2)Lt+=(ct[Mt]-ct[kt])*(ct[Mt+1]+ct[kt+1]);if(Lt>0===Ct)for(Mt=0,mt=ct.length;Mt<mt/2;Mt+=2){var wt=ct[Mt],Ot=ct[Mt+1];ct[Mt]=ct[mt-2-Mt],ct[Mt+1]=ct[mt-1-Mt],ct[mt-2-Mt]=wt,ct[mt-1-Mt]=Ot}}(nt,qe),Ze.push(nt)}}function St(Ze,Ye){var Be=(Ye=this.options=function(Pe,qe){for(var Xe in qe)Pe[Xe]=qe[Xe];return Pe}(Object.create(this.options),Ye)).debug;if(Be&&console.time("preprocess data"),Ye.maxZoom<0||Ye.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ye.promoteId&&Ye.generateId)throw new Error("promoteId and generateId cannot be used together.");var ke=function(Pe,qe){var Xe=[];if(Pe.type==="FeatureCollection")for(var nt=0;nt<Pe.features.length;nt++)Q(Xe,Pe.features[nt],qe,nt);else Pe.type==="Feature"?Q(Xe,Pe,qe):Q(Xe,{geometry:Pe},qe);return Xe}(Ze,Ye);this.tiles={},this.tileCoords=[],Be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ye.indexMaxZoom,Ye.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ke=function(Pe,qe){var Xe=qe.buffer/qe.extent,nt=Pe,ut=Ce(Pe,1,-1-Xe,Xe,0,-1,2,qe),ct=Ce(Pe,1,1-Xe,2+Xe,0,-1,2,qe);return(ut||ct)&&(nt=Ce(Pe,1,-Xe,1+Xe,0,-1,2,qe)||[],ut&&(nt=rt(ut,1).concat(nt)),ct&&(nt=nt.concat(rt(ct,-1)))),nt}(ke,Ye)).length&&this.splitTile(ke,0,0,0),Be&&(ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Et(Ze,Ye,Be){return 32*((1<<Ze)*Be+Ye)+Ze}function zt(Ze,Ye){var Be=Ze.tileID.canonical;if(!this._geoJSONIndex)return Ye(null,null);var ke=this._geoJSONIndex.getTile(Be.z,Be.x,Be.y);if(!ke)return Ye(null,null);var Pe=new g(ke.features),qe=u(Pe);qe.byteOffset===0&&qe.byteLength===qe.buffer.byteLength||(qe=new Uint8Array(qe)),Ye(null,{vectorTile:Pe,rawData:qe.buffer})}ee.prototype.load=function(Ze){var Ye=this.options,Be=Ye.log,ke=Ye.minZoom,Pe=Ye.maxZoom,qe=Ye.nodeSize;Be&&console.time("total time");var Xe="prepare "+Ze.length+" points";Be&&console.time(Xe),this.points=Ze;for(var nt=[],ut=0;ut<Ze.length;ut++)Ze[ut].geometry&&nt.push(ie(Ze[ut],ut));this.trees[Pe+1]=new J(nt,ve,Ie,qe,Float32Array),Be&&console.timeEnd(Xe);for(var ct=Pe;ct>=ke;ct--){var Ct=+Date.now();nt=this._cluster(nt,ct),this.trees[ct]=new J(nt,ve,Ie,qe,Float32Array),Be&&console.log("z%d: %d clusters in %dms",ct,nt.length,+Date.now()-Ct)}return Be&&console.timeEnd("total time"),this},ee.prototype.getClusters=function(Ze,Ye){var Be=((Ze[0]+180)%360+360)%360-180,ke=Math.max(-90,Math.min(90,Ze[1])),Pe=Ze[2]===180?180:((Ze[2]+180)%360+360)%360-180,qe=Math.max(-90,Math.min(90,Ze[3]));if(Ze[2]-Ze[0]>=360)Be=-180,Pe=180;else if(Be>Pe){var Xe=this.getClusters([Be,ke,180,qe],Ye),nt=this.getClusters([-180,ke,Pe,qe],Ye);return Xe.concat(nt)}for(var ut=this.trees[this._limitZoom(Ye)],ct=[],Ct=0,Lt=ut.range(ye(Be),ge(qe),ye(Pe),ge(ke));Ct<Lt.length;Ct+=1){var Mt=Lt[Ct],mt=ut.points[Mt];ct.push(mt.numPoints?se(mt):this.points[mt.index])}return ct},ee.prototype.getChildren=function(Ze){var Ye=this._getOriginId(Ze),Be=this._getOriginZoom(Ze),ke="No cluster with the specified id.",Pe=this.trees[Be];if(!Pe)throw new Error(ke);var qe=Pe.points[Ye];if(!qe)throw new Error(ke);for(var Xe=this.options.radius/(this.options.extent*Math.pow(2,Be-1)),nt=[],ut=0,ct=Pe.within(qe.x,qe.y,Xe);ut<ct.length;ut+=1){var Ct=ct[ut],Lt=Pe.points[Ct];Lt.parentId===Ze&&nt.push(Lt.numPoints?se(Lt):this.points[Lt.index])}if(nt.length===0)throw new Error(ke);return nt},ee.prototype.getLeaves=function(Ze,Ye,Be){Ye=Ye||10,Be=Be||0;var ke=[];return this._appendLeaves(ke,Ze,Ye,Be,0),ke},ee.prototype.getTile=function(Ze,Ye,Be){var ke=this.trees[this._limitZoom(Ze)],Pe=Math.pow(2,Ze),qe=this.options,Xe=qe.extent,nt=qe.radius/Xe,ut=(Be-nt)/Pe,ct=(Be+1+nt)/Pe,Ct={features:[]};return this._addTileFeatures(ke.range((Ye-nt)/Pe,ut,(Ye+1+nt)/Pe,ct),ke.points,Ye,Be,Pe,Ct),Ye===0&&this._addTileFeatures(ke.range(1-nt/Pe,ut,1,ct),ke.points,Pe,Be,Pe,Ct),Ye===Pe-1&&this._addTileFeatures(ke.range(0,ut,nt/Pe,ct),ke.points,-1,Be,Pe,Ct),Ct.features.length?Ct:null},ee.prototype.getClusterExpansionZoom=function(Ze){for(var Ye=this._getOriginZoom(Ze)-1;Ye<=this.options.maxZoom;){var Be=this.getChildren(Ze);if(Ye++,Be.length!==1)break;Ze=Be[0].properties.cluster_id}return Ye},ee.prototype._appendLeaves=function(Ze,Ye,Be,ke,Pe){for(var qe=0,Xe=this.getChildren(Ye);qe<Xe.length;qe+=1){var nt=Xe[qe],ut=nt.properties;if(ut&&ut.cluster?Pe+ut.point_count<=ke?Pe+=ut.point_count:Pe=this._appendLeaves(Ze,ut.cluster_id,Be,ke,Pe):Pe<ke?Pe++:Ze.push(nt),Ze.length===Be)break}return Pe},ee.prototype._addTileFeatures=function(Ze,Ye,Be,ke,Pe,qe){for(var Xe=0,nt=Ze;Xe<nt.length;Xe+=1){var ut=Ye[nt[Xe]],ct=ut.numPoints,Ct={type:1,geometry:[[Math.round(this.options.extent*(ut.x*Pe-Be)),Math.round(this.options.extent*(ut.y*Pe-ke))]],tags:ct?fe(ut):this.points[ut.index].properties},Lt=void 0;ct?Lt=ut.id:this.options.generateId?Lt=ut.index:this.points[ut.index].id&&(Lt=this.points[ut.index].id),Lt!==void 0&&(Ct.id=Lt),qe.features.push(Ct)}},ee.prototype._limitZoom=function(Ze){return Math.max(this.options.minZoom,Math.min(Ze,this.options.maxZoom+1))},ee.prototype._cluster=function(Ze,Ye){for(var Be=[],ke=this.options,Pe=ke.radius,qe=ke.extent,Xe=ke.reduce,nt=Pe/(qe*Math.pow(2,Ye)),ut=0;ut<Ze.length;ut++){var ct=Ze[ut];if(!(ct.zoom<=Ye)){ct.zoom=Ye;for(var Ct=this.trees[Ye+1],Lt=Ct.within(ct.x,ct.y,nt),Mt=ct.numPoints||1,mt=ct.x*Mt,kt=ct.y*Mt,wt=Xe&&Mt>1?this._map(ct,!0):null,Ot=(ut<<5)+(Ye+1)+this.points.length,It=0,Nt=Lt;It<Nt.length;It+=1){var Dt=Nt[It],qt=Ct.points[Dt];if(!(qt.zoom<=Ye)){qt.zoom=Ye;var Xt=qt.numPoints||1;mt+=qt.x*Xt,kt+=qt.y*Xt,Mt+=Xt,qt.parentId=Ot,Xe&&(wt||(wt=this._map(ct,!0)),Xe(wt,this._map(qt)))}}Mt===1?Be.push(ct):(ct.parentId=Ot,Be.push(re(mt/Mt,kt/Mt,Ot,Mt,wt)))}}return Be},ee.prototype._getOriginId=function(Ze){return Ze-this.points.length>>5},ee.prototype._getOriginZoom=function(Ze){return(Ze-this.points.length)%32},ee.prototype._map=function(Ze,Ye){if(Ze.numPoints)return Ye?he({},Ze.properties):Ze.properties;var Be=this.points[Ze.index].properties,ke=this.options.map(Be);return Ye&&ke===Be?he({},ke):ke},St.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},St.prototype.splitTile=function(Ze,Ye,Be,ke,Pe,qe,Xe){for(var nt=[Ze,Ye,Be,ke],ut=this.options,ct=ut.debug;nt.length;){ke=nt.pop(),Be=nt.pop(),Ye=nt.pop(),Ze=nt.pop();var Ct=1<<Ye,Lt=Et(Ye,Be,ke),Mt=this.tiles[Lt];if(!Mt&&(ct>1&&console.time("creation"),Mt=this.tiles[Lt]=_t(Ze,Ye,Be,ke,ut),this.tileCoords.push({z:Ye,x:Be,y:ke}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ye,Be,ke,Mt.numFeatures,Mt.numPoints,Mt.numSimplified),console.timeEnd("creation"));var mt="z"+Ye;this.stats[mt]=(this.stats[mt]||0)+1,this.total++}if(Mt.source=Ze,Pe){if(Ye===ut.maxZoom||Ye===Pe)continue;var kt=1<<Pe-Ye;if(Be!==Math.floor(qe/kt)||ke!==Math.floor(Xe/kt))continue}else if(Ye===ut.indexMaxZoom||Mt.numPoints<=ut.indexMaxPoints)continue;if(Mt.source=null,Ze.length!==0){ct>1&&console.time("clipping");var wt,Ot,It,Nt,Dt,qt,Xt=.5*ut.buffer/ut.extent,cn=.5-Xt,yn=.5+Xt,Kt=1+Xt;wt=Ot=It=Nt=null,Dt=Ce(Ze,Ct,Be-Xt,Be+yn,0,Mt.minX,Mt.maxX,ut),qt=Ce(Ze,Ct,Be+cn,Be+Kt,0,Mt.minX,Mt.maxX,ut),Ze=null,Dt&&(wt=Ce(Dt,Ct,ke-Xt,ke+yn,1,Mt.minY,Mt.maxY,ut),Ot=Ce(Dt,Ct,ke+cn,ke+Kt,1,Mt.minY,Mt.maxY,ut),Dt=null),qt&&(It=Ce(qt,Ct,ke-Xt,ke+yn,1,Mt.minY,Mt.maxY,ut),Nt=Ce(qt,Ct,ke+cn,ke+Kt,1,Mt.minY,Mt.maxY,ut),qt=null),ct>1&&console.timeEnd("clipping"),nt.push(wt||[],Ye+1,2*Be,2*ke),nt.push(Ot||[],Ye+1,2*Be,2*ke+1),nt.push(It||[],Ye+1,2*Be+1,2*ke),nt.push(Nt||[],Ye+1,2*Be+1,2*ke+1)}}},St.prototype.getTile=function(Ze,Ye,Be){var ke=this.options,Pe=ke.extent,qe=ke.debug;if(Ze<0||Ze>24)return null;var Xe=1<<Ze,nt=Et(Ze,Ye=(Ye%Xe+Xe)%Xe,Be);if(this.tiles[nt])return ot(this.tiles[nt],Pe);qe>1&&console.log("drilling down to z%d-%d-%d",Ze,Ye,Be);for(var ut,ct=Ze,Ct=Ye,Lt=Be;!ut&&ct>0;)ct--,Ct=Math.floor(Ct/2),Lt=Math.floor(Lt/2),ut=this.tiles[Et(ct,Ct,Lt)];return ut&&ut.source?(qe>1&&console.log("found parent tile z%d-%d-%d",ct,Ct,Lt),qe>1&&console.time("drilling down"),this.splitTile(ut.source,ct,Ct,Lt,Ze,Ye,Be),qe>1&&console.timeEnd("drilling down"),this.tiles[nt]?ot(this.tiles[nt],Pe):null):null};var Ut=function(Ze){function Ye(Be,ke,Pe,qe){Ze.call(this,Be,ke,Pe,zt),qe&&(this.loadGeoJSON=qe)}return Ze&&(Ye.__proto__=Ze),Ye.prototype=Object.create(Ze&&Ze.prototype),Ye.prototype.constructor=Ye,Ye.prototype.loadData=function(Be,ke){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ke,this._pendingLoadDataParams=Be,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ye.prototype._loadData=function(){var Be=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ke=this._pendingCallback,Pe=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var qe=!!(Pe&&Pe.request&&Pe.request.collectResourceTiming)&&new l.RequestPerformance(Pe.request);this.loadGeoJSON(Pe,function(Xe,nt){if(Xe||!nt)return ke(Xe);if(typeof nt!="object")return ke(new Error("Input data given to '"+Pe.source+"' is not a valid GeoJSON object."));c(nt,!0);try{Be._geoJSONIndex=Pe.cluster?new ee(function(Ct){var Lt=Ct.superclusterOptions,Mt=Ct.clusterProperties;if(!Mt||!Lt)return Lt;for(var mt={},kt={},wt={accumulated:null,zoom:0},Ot={properties:null},It=Object.keys(Mt),Nt=0,Dt=It;Nt<Dt.length;Nt+=1){var qt=Dt[Nt],Xt=Mt[qt],cn=Xt[0],yn=Xt[1],Kt=l.createExpression(yn),Mn=l.createExpression(typeof cn=="string"?[cn,["accumulated"],["get",qt]]:cn);mt[qt]=Kt.value,kt[qt]=Mn.value}return Lt.map=function(Un){Ot.properties=Un;for(var xn={},dn=0,gn=It;dn<gn.length;dn+=1){var an=gn[dn];xn[an]=mt[an].evaluate(wt,Ot)}return xn},Lt.reduce=function(Un,xn){Ot.properties=xn;for(var dn=0,gn=It;dn<gn.length;dn+=1){var an=gn[dn];wt.accumulated=Un[an],Un[an]=kt[an].evaluate(wt,Ot)}},Lt}(Pe)).load(nt.features):function(Ct,Lt){return new St(Ct,Lt)}(nt,Pe.geojsonVtOptions)}catch(Ct){return ke(Ct)}Be.loaded={};var ut={};if(qe){var ct=qe.finish();ct&&(ut.resourceTiming={},ut.resourceTiming[Pe.source]=JSON.parse(JSON.stringify(ct)))}ke(null,ut)})}},Ye.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ye.prototype.reloadTile=function(Be,ke){var Pe=this.loaded,qe=Be.uid;return Pe&&Pe[qe]?Ze.prototype.reloadTile.call(this,Be,ke):this.loadTile(Be,ke)},Ye.prototype.loadGeoJSON=function(Be,ke){if(Be.request)l.getJSON(Be.request,ke);else{if(typeof Be.data!="string")return ke(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."));try{return ke(null,JSON.parse(Be.data))}catch{return ke(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."))}}},Ye.prototype.removeSource=function(Be,ke){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ke()},Ye.prototype.getClusterExpansionZoom=function(Be,ke){try{ke(null,this._geoJSONIndex.getClusterExpansionZoom(Be.clusterId))}catch(Pe){ke(Pe)}},Ye.prototype.getClusterChildren=function(Be,ke){try{ke(null,this._geoJSONIndex.getChildren(Be.clusterId))}catch(Pe){ke(Pe)}},Ye.prototype.getClusterLeaves=function(Be,ke){try{ke(null,this._geoJSONIndex.getLeaves(Be.clusterId,Be.limit,Be.offset))}catch(Pe){ke(Pe)}},Ye}(n),Pt=function(Ze){var Ye=this;this.self=Ze,this.actor=new l.Actor(Ze,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Ut},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Be,ke){if(Ye.workerSourceTypes[Be])throw new Error('Worker source with name "'+Be+'" already registered.');Ye.workerSourceTypes[Be]=ke},this.self.registerRTLTextPlugin=function(Be){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=Be.applyArabicShaping,l.plugin.processBidirectionalText=Be.processBidirectionalText,l.plugin.processStyledBidirectionalText=Be.processStyledBidirectionalText}};return Pt.prototype.setReferrer=function(Ze,Ye){this.referrer=Ye},Pt.prototype.setImages=function(Ze,Ye,Be){for(var ke in this.availableImages[Ze]=Ye,this.workerSources[Ze]){var Pe=this.workerSources[Ze][ke];for(var qe in Pe)Pe[qe].availableImages=Ye}Be()},Pt.prototype.setLayers=function(Ze,Ye,Be){this.getLayerIndex(Ze).replace(Ye),Be()},Pt.prototype.updateLayers=function(Ze,Ye,Be){this.getLayerIndex(Ze).update(Ye.layers,Ye.removedIds),Be()},Pt.prototype.loadTile=function(Ze,Ye,Be){this.getWorkerSource(Ze,Ye.type,Ye.source).loadTile(Ye,Be)},Pt.prototype.loadDEMTile=function(Ze,Ye,Be){this.getDEMWorkerSource(Ze,Ye.source).loadTile(Ye,Be)},Pt.prototype.reloadTile=function(Ze,Ye,Be){this.getWorkerSource(Ze,Ye.type,Ye.source).reloadTile(Ye,Be)},Pt.prototype.abortTile=function(Ze,Ye,Be){this.getWorkerSource(Ze,Ye.type,Ye.source).abortTile(Ye,Be)},Pt.prototype.removeTile=function(Ze,Ye,Be){this.getWorkerSource(Ze,Ye.type,Ye.source).removeTile(Ye,Be)},Pt.prototype.removeDEMTile=function(Ze,Ye){this.getDEMWorkerSource(Ze,Ye.source).removeTile(Ye)},Pt.prototype.removeSource=function(Ze,Ye,Be){if(this.workerSources[Ze]&&this.workerSources[Ze][Ye.type]&&this.workerSources[Ze][Ye.type][Ye.source]){var ke=this.workerSources[Ze][Ye.type][Ye.source];delete this.workerSources[Ze][Ye.type][Ye.source],ke.removeSource!==void 0?ke.removeSource(Ye,Be):Be()}},Pt.prototype.loadWorkerSource=function(Ze,Ye,Be){try{this.self.importScripts(Ye.url),Be()}catch(ke){Be(ke.toString())}},Pt.prototype.syncRTLPluginState=function(Ze,Ye,Be){try{l.plugin.setState(Ye);var ke=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&ke!=null){this.self.importScripts(ke);var Pe=l.plugin.isParsed();Be(Pe?void 0:new Error("RTL Text Plugin failed to import scripts from "+ke),Pe)}}catch(qe){Be(qe.toString())}},Pt.prototype.getAvailableImages=function(Ze){var Ye=this.availableImages[Ze];return Ye||(Ye=[]),Ye},Pt.prototype.getLayerIndex=function(Ze){var Ye=this.layerIndexes[Ze];return Ye||(Ye=this.layerIndexes[Ze]=new d),Ye},Pt.prototype.getWorkerSource=function(Ze,Ye,Be){var ke=this;if(this.workerSources[Ze]||(this.workerSources[Ze]={}),this.workerSources[Ze][Ye]||(this.workerSources[Ze][Ye]={}),!this.workerSources[Ze][Ye][Be]){var Pe={send:function(qe,Xe,nt){ke.actor.send(qe,Xe,nt,Ze)}};this.workerSources[Ze][Ye][Be]=new this.workerSourceTypes[Ye](Pe,this.getLayerIndex(Ze),this.getAvailableImages(Ze))}return this.workerSources[Ze][Ye][Be]},Pt.prototype.getDEMWorkerSource=function(Ze,Ye){return this.demWorkerSources[Ze]||(this.demWorkerSources[Ze]={}),this.demWorkerSources[Ze][Ye]||(this.demWorkerSources[Ze][Ye]=new i),this.demWorkerSources[Ze][Ye]},Pt.prototype.enforceCacheSizeLimit=function(Ze,Ye){l.enforceCacheSizeLimit(Ye)},typeof WorkerGlobalScope<"u"&&l.window!==void 0&&l.window instanceof WorkerGlobalScope&&(l.window.worker=new Pt(l.window)),Pt}),k(0,function(l){var T=l.createCommonjsModule(function(D){function Y(pe){return!q(pe)}function q(pe){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Ne,Ge,et=new Blob([""],{type:"text/javascript"}),pt=URL.createObjectURL(et);try{Ge=new Worker(pt),Ne=!0}catch{Ne=!1}return Ge&&Ge.terminate(),URL.revokeObjectURL(pt),Ne}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Ne=document.createElement("canvas");Ne.width=Ne.height=1;var Ge=Ne.getContext("2d");if(!Ge)return!1;var et=Ge.getImageData(0,0,1,1);return et&&et.width===Ne.width}()?(Le=pe&&pe.failIfMajorPerformanceCaveat,ne[Le]===void 0&&(ne[Le]=function(Ne){var Ge=function(pt){var vt=document.createElement("canvas"),te=Object.create(Y.webGLContextAttributes);return te.failIfMajorPerformanceCaveat=pt,vt.probablySupportsContext?vt.probablySupportsContext("webgl",te)||vt.probablySupportsContext("experimental-webgl",te):vt.supportsContext?vt.supportsContext("webgl",te)||vt.supportsContext("experimental-webgl",te):vt.getContext("webgl",te)||vt.getContext("experimental-webgl",te)}(Ne);if(!Ge)return!1;var et=Ge.createShader(Ge.VERTEX_SHADER);return!(!et||Ge.isContextLost())&&(Ge.shaderSource(et,"void main() {}"),Ge.compileShader(et),Ge.getShaderParameter(et,Ge.COMPILE_STATUS)===!0)}(Le)),ne[Le]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Le}D.exports?D.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=q);var ne={};Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),x={create:function(D,Y,q){var ne=l.window.document.createElement(D);return Y!==void 0&&(ne.className=Y),q&&q.appendChild(ne),ne},createNS:function(D,Y){return l.window.document.createElementNS(D,Y)}},d=l.window.document.documentElement.style;function s(D){if(!d)return D[0];for(var Y=0;Y<D.length;Y++)if(D[Y]in d)return D[Y];return D[0]}var t,o=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);x.disableDrag=function(){d&&o&&(t=d[o],d[o]="none")},x.enableDrag=function(){d&&o&&(d[o]=t)};var r=s(["transform","WebkitTransform"]);x.setTransform=function(D,Y){D.style[r]=Y};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});l.window.addEventListener("test",a,a),l.window.removeEventListener("test",a,a)}catch{n=!1}x.addEventListener=function(D,Y,q,ne){ne===void 0&&(ne={}),"passive"in ne&&n?D.addEventListener(Y,q,ne):D.addEventListener(Y,q,ne.capture)},x.removeEventListener=function(D,Y,q,ne){ne===void 0&&(ne={}),"passive"in ne&&n?D.removeEventListener(Y,q,ne):D.removeEventListener(Y,q,ne.capture)};var i=function(D){D.preventDefault(),D.stopPropagation(),l.window.removeEventListener("click",i,!0)};function c(D){var Y=D.userImage;return!!(Y&&Y.render&&Y.render())&&(D.data.replace(new Uint8Array(Y.data.buffer)),!0)}x.suppressClick=function(){l.window.addEventListener("click",i,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",i,!0)},0)},x.mousePos=function(D,Y){var q=D.getBoundingClientRect();return new l.Point(Y.clientX-q.left-D.clientLeft,Y.clientY-q.top-D.clientTop)},x.touchPos=function(D,Y){for(var q=D.getBoundingClientRect(),ne=[],pe=0;pe<Y.length;pe++)ne.push(new l.Point(Y[pe].clientX-q.left-D.clientLeft,Y[pe].clientY-q.top-D.clientTop));return ne},x.mouseButton=function(D){return l.window.InstallTrigger!==void 0&&D.button===2&&D.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:D.button},x.remove=function(D){D.parentNode&&D.parentNode.removeChild(D)};var h=function(D){function Y(){D.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var ne=0,pe=this.requestors;ne<pe.length;ne+=1){var Le=pe[ne],Ne=Le.ids,Ge=Le.callback;this._notify(Ne,Ge)}this.requestors=[]}},Y.prototype.getImage=function(q){return this.images[q]},Y.prototype.addImage=function(q,ne){this._validate(q,ne)&&(this.images[q]=ne)},Y.prototype._validate=function(q,ne){var pe=!0;return this._validateStretch(ne.stretchX,ne.data&&ne.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),pe=!1),this._validateStretch(ne.stretchY,ne.data&&ne.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),pe=!1),this._validateContent(ne.content,ne)||(this.fire(new l.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),pe=!1),pe},Y.prototype._validateStretch=function(q,ne){if(!q)return!0;for(var pe=0,Le=0,Ne=q;Le<Ne.length;Le+=1){var Ge=Ne[Le];if(Ge[0]<pe||Ge[1]<Ge[0]||ne<Ge[1])return!1;pe=Ge[1]}return!0},Y.prototype._validateContent=function(q,ne){return!(q&&(q.length!==4||q[0]<0||ne.data.width<q[0]||q[1]<0||ne.data.height<q[1]||q[2]<0||ne.data.width<q[2]||q[3]<0||ne.data.height<q[3]||q[2]<q[0]||q[3]<q[1]))},Y.prototype.updateImage=function(q,ne){var pe=this.images[q];ne.version=pe.version+1,this.images[q]=ne,this.updatedImages[q]=!0},Y.prototype.removeImage=function(q){var ne=this.images[q];delete this.images[q],delete this.patterns[q],ne.userImage&&ne.userImage.onRemove&&ne.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(q,ne){var pe=!0;if(!this.isLoaded())for(var Le=0,Ne=q;Le<Ne.length;Le+=1){var Ge=Ne[Le];this.images[Ge]||(pe=!1)}this.isLoaded()||pe?this._notify(q,ne):this.requestors.push({ids:q,callback:ne})},Y.prototype._notify=function(q,ne){for(var pe={},Le=0,Ne=q;Le<Ne.length;Le+=1){var Ge=Ne[Le];this.images[Ge]||this.fire(new l.Event("styleimagemissing",{id:Ge}));var et=this.images[Ge];et?pe[Ge]={data:et.data.clone(),pixelRatio:et.pixelRatio,sdf:et.sdf,version:et.version,stretchX:et.stretchX,stretchY:et.stretchY,content:et.content,hasRenderCallback:Boolean(et.userImage&&et.userImage.render)}:l.warnOnce('Image "'+Ge+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ne(null,pe)},Y.prototype.getPixelSize=function(){var q=this.atlasImage;return{width:q.width,height:q.height}},Y.prototype.getPattern=function(q){var ne=this.patterns[q],pe=this.getImage(q);if(!pe)return null;if(ne&&ne.position.version===pe.version)return ne.position;if(ne)ne.position.version=pe.version;else{var Le={w:pe.data.width+2,h:pe.data.height+2,x:0,y:0},Ne=new l.ImagePosition(Le,pe);this.patterns[q]={bin:Le,position:Ne}}return this._updatePatternAtlas(),this.patterns[q].position},Y.prototype.bind=function(q){var ne=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(q,this.atlasImage,ne.RGBA),this.atlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var q=[];for(var ne in this.patterns)q.push(this.patterns[ne].bin);var pe=l.potpack(q),Le=pe.w,Ne=pe.h,Ge=this.atlasImage;for(var et in Ge.resize({width:Le||1,height:Ne||1}),this.patterns){var pt=this.patterns[et].bin,vt=pt.x+1,te=pt.y+1,ue=this.images[et].data,we=ue.width,Oe=ue.height;l.RGBAImage.copy(ue,Ge,{x:0,y:0},{x:vt,y:te},{width:we,height:Oe}),l.RGBAImage.copy(ue,Ge,{x:0,y:Oe-1},{x:vt,y:te-1},{width:we,height:1}),l.RGBAImage.copy(ue,Ge,{x:0,y:0},{x:vt,y:te+Oe},{width:we,height:1}),l.RGBAImage.copy(ue,Ge,{x:we-1,y:0},{x:vt-1,y:te},{width:1,height:Oe}),l.RGBAImage.copy(ue,Ge,{x:0,y:0},{x:vt+we,y:te},{width:1,height:Oe})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(q){for(var ne=0,pe=q;ne<pe.length;ne+=1){var Le=pe[ne];if(!this.callbackDispatchedThisFrame[Le]){this.callbackDispatchedThisFrame[Le]=!0;var Ne=this.images[Le];c(Ne)&&this.updateImage(Le,Ne)}}},Y}(l.Evented),f=g,b=g,v=1e20;function g(D,Y,q,ne,pe,Le){this.fontSize=D||24,this.buffer=Y===void 0?3:Y,this.cutoff=ne||.25,this.fontFamily=pe||"sans-serif",this.fontWeight=Le||"normal",this.radius=q||8;var Ne=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ne,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ne*Ne),this.gridInner=new Float64Array(Ne*Ne),this.f=new Float64Array(Ne),this.d=new Float64Array(Ne),this.z=new Float64Array(Ne+1),this.v=new Int16Array(Ne),this.middle=Math.round(Ne/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(D,Y,q,ne,pe,Le,Ne){for(var Ge=0;Ge<Y;Ge++){for(var et=0;et<q;et++)ne[et]=D[et*Y+Ge];for(p(ne,pe,Le,Ne,q),et=0;et<q;et++)D[et*Y+Ge]=pe[et]}for(et=0;et<q;et++){for(Ge=0;Ge<Y;Ge++)ne[Ge]=D[et*Y+Ge];for(p(ne,pe,Le,Ne,Y),Ge=0;Ge<Y;Ge++)D[et*Y+Ge]=Math.sqrt(pe[Ge])}}function p(D,Y,q,ne,pe){q[0]=0,ne[0]=-v,ne[1]=+v;for(var Le=1,Ne=0;Le<pe;Le++){for(var Ge=(D[Le]+Le*Le-(D[q[Ne]]+q[Ne]*q[Ne]))/(2*Le-2*q[Ne]);Ge<=ne[Ne];)Ne--,Ge=(D[Le]+Le*Le-(D[q[Ne]]+q[Ne]*q[Ne]))/(2*Le-2*q[Ne]);q[++Ne]=Le,ne[Ne]=Ge,ne[Ne+1]=+v}for(Le=0,Ne=0;Le<pe;Le++){for(;ne[Ne+1]<Le;)Ne++;Y[Le]=(Le-q[Ne])*(Le-q[Ne])+D[q[Ne]]}}g.prototype.draw=function(D){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(D,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),q=new Uint8ClampedArray(this.size*this.size),ne=0;ne<this.size*this.size;ne++){var pe=Y.data[4*ne+3]/255;this.gridOuter[ne]=pe===1?0:pe===0?v:Math.pow(Math.max(0,.5-pe),2),this.gridInner[ne]=pe===1?v:pe===0?0:Math.pow(Math.max(0,pe-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),ne=0;ne<this.size*this.size;ne++){var Le=this.gridOuter[ne]-this.gridInner[ne];q[ne]=Math.max(0,Math.min(255,Math.round(255-255*(Le/this.radius+this.cutoff))))}return q},f.default=b;var m=function(D,Y){this.requestManager=D,this.localIdeographFontFamily=Y,this.entries={}};m.prototype.setURL=function(D){this.url=D},m.prototype.getGlyphs=function(D,Y){var q=this,ne=[];for(var pe in D)for(var Le=0,Ne=D[pe];Le<Ne.length;Le+=1){var Ge=Ne[Le];ne.push({stack:pe,id:Ge})}l.asyncAll(ne,function(et,pt){var vt=et.stack,te=et.id,ue=q.entries[vt];ue||(ue=q.entries[vt]={glyphs:{},requests:{},ranges:{}});var we=ue.glyphs[te];if(we===void 0){if(we=q._tinySDF(ue,vt,te))return ue.glyphs[te]=we,void pt(null,{stack:vt,id:te,glyph:we});var Oe=Math.floor(te/256);if(256*Oe>65535)pt(new Error("glyphs > 65535 not supported"));else if(ue.ranges[Oe])pt(null,{stack:vt,id:te,glyph:we});else{var De=ue.requests[Oe];De||(De=ue.requests[Oe]=[],m.loadGlyphRange(vt,Oe,q.url,q.requestManager,function(Ue,We){if(We){for(var Ke in We)q._doesCharSupportLocalGlyph(+Ke)||(ue.glyphs[+Ke]=We[+Ke]);ue.ranges[Oe]=!0}for(var it=0,lt=De;it<lt.length;it+=1)(0,lt[it])(Ue,We);delete ue.requests[Oe]})),De.push(function(Ue,We){Ue?pt(Ue):We&&pt(null,{stack:vt,id:te,glyph:We[te]||null})})}}else pt(null,{stack:vt,id:te,glyph:we})},function(et,pt){if(et)Y(et);else if(pt){for(var vt={},te=0,ue=pt;te<ue.length;te+=1){var we=ue[te],Oe=we.stack,De=we.id,Ue=we.glyph;(vt[Oe]||(vt[Oe]={}))[De]=Ue&&{id:Ue.id,bitmap:Ue.bitmap.clone(),metrics:Ue.metrics}}Y(null,vt)}})},m.prototype._doesCharSupportLocalGlyph=function(D){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](D)||l.isChar["Hangul Syllables"](D)||l.isChar.Hiragana(D)||l.isChar.Katakana(D))},m.prototype._tinySDF=function(D,Y,q){var ne=this.localIdeographFontFamily;if(ne&&this._doesCharSupportLocalGlyph(q)){var pe=D.tinySDF;if(!pe){var Le="400";/bold/i.test(Y)?Le="900":/medium/i.test(Y)?Le="500":/light/i.test(Y)&&(Le="200"),pe=D.tinySDF=new m.TinySDF(24,3,8,.25,ne,Le)}return{id:q,bitmap:new l.AlphaImage({width:30,height:30},pe.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(D,Y,q,ne,pe){var Le=256*Y,Ne=Le+255,Ge=ne.transformRequest(ne.normalizeGlyphsURL(q).replace("{fontstack}",D).replace("{range}",Le+"-"+Ne),l.ResourceType.Glyphs);l.getArrayBuffer(Ge,function(et,pt){if(et)pe(et);else if(pt){for(var vt={},te=0,ue=l.parseGlyphPBF(pt);te<ue.length;te+=1){var we=ue[te];vt[we.id]=we}pe(null,vt)}})},m.TinySDF=f;var w=function(){this.specification=l.styleSpec.light.position};w.prototype.possiblyEvaluate=function(D,Y){return l.sphericalToCartesian(D.expression.evaluate(Y))},w.prototype.interpolate=function(D,Y,q){return{x:l.number(D.x,Y.x,q),y:l.number(D.y,Y.y,q),z:l.number(D.z,Y.z,q)}};var u=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new w,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),S="-transition",_=function(D){function Y(q){D.call(this),this._transitionable=new l.Transitionable(u),this.setLight(q),this._transitioning=this._transitionable.untransitioned()}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(q,ne){if(ne===void 0&&(ne={}),!this._validate(l.validateLight,q,ne))for(var pe in q){var Le=q[pe];l.endsWith(pe,S)?this._transitionable.setTransition(pe.slice(0,-S.length),Le):this._transitionable.setValue(pe,Le)}},Y.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},Y.prototype._validate=function(q,ne,pe){return(!pe||pe.validate!==!1)&&l.emitValidationErrors(this,q.call(l.validateStyle,l.extend({value:ne,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},Y}(l.Evented),E=function(D,Y){this.width=D,this.height=Y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(D,Y){var q=D.join(",")+String(Y);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash(D,Y)),this.dashEntry[q]},E.prototype.getDashRanges=function(D,Y,q){var ne=[],pe=D.length%2==1?-D[D.length-1]*q:0,Le=D[0]*q,Ne=!0;ne.push({left:pe,right:Le,isDash:Ne,zeroLength:D[0]===0});for(var Ge=D[0],et=1;et<D.length;et++){Ne=!Ne;var pt=D[et];pe=Ge*q,Le=(Ge+=pt)*q,ne.push({left:pe,right:Le,isDash:Ne,zeroLength:pt===0})}return ne},E.prototype.addRoundDash=function(D,Y,q){for(var ne=Y/2,pe=-q;pe<=q;pe++)for(var Le=this.nextRow+q+pe,Ne=this.width*Le,Ge=0,et=D[Ge],pt=0;pt<this.width;pt++){pt/et.right>1&&(et=D[++Ge]);var vt=Math.abs(pt-et.left),te=Math.abs(pt-et.right),ue=Math.min(vt,te),we=void 0,Oe=pe/q*(ne+1);if(et.isDash){var De=ne-Math.abs(Oe);we=Math.sqrt(ue*ue+De*De)}else we=ne-Math.sqrt(ue*ue+Oe*Oe);this.data[Ne+pt]=Math.max(0,Math.min(255,we+128))}},E.prototype.addRegularDash=function(D){for(var Y=D.length-1;Y>=0;--Y){var q=D[Y],ne=D[Y+1];q.zeroLength?D.splice(Y,1):ne&&ne.isDash===q.isDash&&(ne.left=q.left,D.splice(Y,1))}var pe=D[0],Le=D[D.length-1];pe.isDash===Le.isDash&&(pe.left=Le.left-this.width,Le.right=pe.right+this.width);for(var Ne=this.width*this.nextRow,Ge=0,et=D[Ge],pt=0;pt<this.width;pt++){pt/et.right>1&&(et=D[++Ge]);var vt=Math.abs(pt-et.left),te=Math.abs(pt-et.right),ue=Math.min(vt,te),we=et.isDash?ue:-ue;this.data[Ne+pt]=Math.max(0,Math.min(255,we+128))}},E.prototype.addDash=function(D,Y){var q=Y?7:0,ne=2*q+1;if(this.nextRow+ne>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var pe=0,Le=0;Le<D.length;Le++)pe+=D[Le];if(pe!==0){var Ne=this.width/pe,Ge=this.getDashRanges(D,this.width,Ne);Y?this.addRoundDash(Ge,Ne,q):this.addRegularDash(Ge)}var et={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:pe};return this.nextRow+=ne,this.dirty=!0,et},E.prototype.bind=function(D){var Y=D.gl;this.texture?(Y.bindTexture(Y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Y.texSubImage2D(Y.TEXTURE_2D,0,0,0,this.width,this.height,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))):(this.texture=Y.createTexture(),Y.bindTexture(Y.TEXTURE_2D,this.texture),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),Y.texImage2D(Y.TEXTURE_2D,0,Y.ALPHA,this.width,this.height,0,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))};var L=function D(Y,q){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var ne=this.workerPool.acquire(this.id),pe=0;pe<ne.length;pe++){var Le=ne[pe],Ne=new D.Actor(Le,q,this.id);Ne.name="Worker "+pe,this.actors.push(Ne)}};function C(D,Y,q){var ne=function(pe,Le){if(pe)return q(pe);if(Le){var Ne=l.pick(l.extend(Le,D),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Le.vector_layers&&(Ne.vectorLayers=Le.vector_layers,Ne.vectorLayerIds=Ne.vectorLayers.map(function(Ge){return Ge.id})),Ne.tiles=Y.canonicalizeTileset(Ne,D.url),q(null,Ne)}};return D.url?l.getJSON(Y.transformRequest(Y.normalizeSourceURL(D.url),l.ResourceType.Source),ne):l.browser.frame(function(){return ne(null,D)})}L.prototype.broadcast=function(D,Y,q){q=q||function(){},l.asyncAll(this.actors,function(ne,pe){ne.send(D,Y,pe)},q)},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(D){D.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=l.Actor;var P=function(D,Y,q){this.bounds=l.LngLatBounds.convert(this.validateBounds(D)),this.minzoom=Y||0,this.maxzoom=q||24};P.prototype.validateBounds=function(D){return Array.isArray(D)&&D.length===4?[Math.max(-180,D[0]),Math.max(-90,D[1]),Math.min(180,D[2]),Math.min(90,D[3])]:[-180,-90,180,90]},P.prototype.contains=function(D){var Y=Math.pow(2,D.z),q=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*Y),ne=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*Y),pe=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*Y),Le=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*Y);return D.x>=q&&D.x<pe&&D.y>=ne&&D.y<Le};var I=function(D){function Y(q,ne,pe,Le){if(D.call(this),this.id=q,this.dispatcher=pe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(ne,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},ne),this._collectResourceTiming=ne.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Le)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(ne,pe){q._tileJSONRequest=null,q._loaded=!0,ne?q.fire(new l.ErrorEvent(ne)):pe&&(l.extend(q,pe),pe.bounds&&(q.tileBounds=new P(pe.bounds,q.minzoom,q.maxzoom)),l.postTurnstileEvent(pe.tiles,q.map._requestManager._customAccessToken),l.postMapLoadEvent(pe.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return l.extend({},this._options)},Y.prototype.loadTile=function(q,ne){var pe=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),Le={request:this.map._requestManager.transformRequest(pe,l.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Ne(Ge,et){return delete q.request,q.aborted?ne(null):Ge&&Ge.status!==404?ne(Ge):(et&&et.resourceTiming&&(q.resourceTiming=et.resourceTiming),this.map._refreshExpiredTiles&&et&&q.setExpiryData(et),q.loadVectorData(et,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),ne(null),void(q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)))}Le.request.collectResourceTiming=this._collectResourceTiming,q.actor&&q.state!=="expired"?q.state==="loading"?q.reloadCallback=ne:q.request=q.actor.send("reloadTile",Le,Ne.bind(this)):(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",Le,Ne.bind(this)))},Y.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),U=function(D){function Y(q,ne,pe,Le){D.call(this),this.id=q,this.dispatcher=pe,this.setEventedParent(Le),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},ne),l.extend(this,l.pick(ne,["url","scheme","tileSize"]))}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(ne,pe){q._tileJSONRequest=null,q._loaded=!0,ne?q.fire(new l.ErrorEvent(ne)):pe&&(l.extend(q,pe),pe.bounds&&(q.tileBounds=new P(pe.bounds,q.minzoom,q.maxzoom)),l.postTurnstileEvent(pe.tiles),l.postMapLoadEvent(pe.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return l.extend({},this._options)},Y.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},Y.prototype.loadTile=function(q,ne){var pe=this,Le=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=l.getImage(this.map._requestManager.transformRequest(Le,l.ResourceType.Tile),function(Ne,Ge){if(delete q.request,q.aborted)q.state="unloaded",ne(null);else if(Ne)q.state="errored",ne(Ne);else if(Ge){pe.map._refreshExpiredTiles&&q.setExpiryData(Ge),delete Ge.cacheControl,delete Ge.expires;var et=pe.map.painter.context,pt=et.gl;q.texture=pe.map.painter.getTileTexture(Ge.width),q.texture?q.texture.update(Ge,{useMipmap:!0}):(q.texture=new l.Texture(et,Ge,pt.RGBA,{useMipmap:!0}),q.texture.bind(pt.LINEAR,pt.CLAMP_TO_EDGE,pt.LINEAR_MIPMAP_NEAREST),et.extTextureFilterAnisotropic&&pt.texParameterf(pt.TEXTURE_2D,et.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,et.extTextureFilterAnisotropicMax)),q.state="loaded",l.cacheEntryPossiblyAdded(pe.dispatcher),ne(null)}})},Y.prototype.abortTile=function(q,ne){q.request&&(q.request.cancel(),delete q.request),ne()},Y.prototype.unloadTile=function(q,ne){q.texture&&this.map.painter.saveTileTexture(q.texture),ne()},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),z=function(D){function Y(q,ne,pe,Le){D.call(this,q,ne,pe,Le),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},ne),this.encoding=ne.encoding||"mapbox"}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function(q,ne){var pe=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Le(Ne,Ge){Ne&&(q.state="errored",ne(Ne)),Ge&&(q.dem=Ge,q.needsHillshadePrepare=!0,q.state="loaded",ne(null))}q.request=l.getImage(this.map._requestManager.transformRequest(pe,l.ResourceType.Tile),function(Ne,Ge){if(delete q.request,q.aborted)q.state="unloaded",ne(null);else if(Ne)q.state="errored",ne(Ne);else if(Ge){this.map._refreshExpiredTiles&&q.setExpiryData(Ge),delete Ge.cacheControl,delete Ge.expires;var et=l.window.ImageBitmap&&Ge instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?Ge:l.browser.getImageData(Ge,1),pt={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:et,encoding:this.encoding};q.actor&&q.state!=="expired"||(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",pt,Le.bind(this)))}}.bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID)},Y.prototype._getNeighboringTiles=function(q){var ne=q.canonical,pe=Math.pow(2,ne.z),Le=(ne.x-1+pe)%pe,Ne=ne.x===0?q.wrap-1:q.wrap,Ge=(ne.x+1+pe)%pe,et=ne.x+1===pe?q.wrap+1:q.wrap,pt={};return pt[new l.OverscaledTileID(q.overscaledZ,Ne,ne.z,Le,ne.y).key]={backfilled:!1},pt[new l.OverscaledTileID(q.overscaledZ,et,ne.z,Ge,ne.y).key]={backfilled:!1},ne.y>0&&(pt[new l.OverscaledTileID(q.overscaledZ,Ne,ne.z,Le,ne.y-1).key]={backfilled:!1},pt[new l.OverscaledTileID(q.overscaledZ,q.wrap,ne.z,ne.x,ne.y-1).key]={backfilled:!1},pt[new l.OverscaledTileID(q.overscaledZ,et,ne.z,Ge,ne.y-1).key]={backfilled:!1}),ne.y+1<pe&&(pt[new l.OverscaledTileID(q.overscaledZ,Ne,ne.z,Le,ne.y+1).key]={backfilled:!1},pt[new l.OverscaledTileID(q.overscaledZ,q.wrap,ne.z,ne.x,ne.y+1).key]={backfilled:!1},pt[new l.OverscaledTileID(q.overscaledZ,et,ne.z,Ge,ne.y+1).key]={backfilled:!1}),pt},Y.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},Y}(U),H=function(D){function Y(q,ne,pe,Le){D.call(this),this.id=q,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=pe.getActor(),this.setEventedParent(Le),this._data=ne.data,this._options=l.extend({},ne),this._collectResourceTiming=ne.collectResourceTiming,this._resourceTiming=[],ne.maxzoom!==void 0&&(this.maxzoom=ne.maxzoom),ne.type&&(this.type=ne.type),ne.attribution&&(this.attribution=ne.attribution),this.promoteId=ne.promoteId;var Ne=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:ne.cluster||!1,geojsonVtOptions:{buffer:(ne.buffer!==void 0?ne.buffer:128)*Ne,tolerance:(ne.tolerance!==void 0?ne.tolerance:.375)*Ne,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:ne.lineMetrics||!1,generateId:ne.generateId||!1},superclusterOptions:{maxZoom:ne.clusterMaxZoom!==void 0?Math.min(ne.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l.EXTENT,radius:(ne.clusterRadius||50)*Ne,log:!1,generateId:ne.generateId||!1},clusterProperties:ne.clusterProperties},ne.workerOptions)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ne){if(ne)q.fire(new l.ErrorEvent(ne));else{var pe={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(pe.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new l.Event("data",pe))}})},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setData=function(q){var ne=this;return this._data=q,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(pe){if(pe)ne.fire(new l.ErrorEvent(pe));else{var Le={dataType:"source",sourceDataType:"content"};ne._collectResourceTiming&&ne._resourceTiming&&ne._resourceTiming.length>0&&(Le.resourceTiming=ne._resourceTiming,ne._resourceTiming=[]),ne.fire(new l.Event("data",Le))}}),this},Y.prototype.getClusterExpansionZoom=function(q,ne){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},ne),this},Y.prototype.getClusterChildren=function(q,ne){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},ne),this},Y.prototype.getClusterLeaves=function(q,ne,pe,Le){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:ne,offset:pe},Le),this},Y.prototype._updateWorkerData=function(q){var ne=this;this._loaded=!1;var pe=l.extend({},this.workerOptions),Le=this._data;typeof Le=="string"?(pe.request=this.map._requestManager.transformRequest(l.browser.resolveURL(Le),l.ResourceType.Source),pe.request.collectResourceTiming=this._collectResourceTiming):pe.data=JSON.stringify(Le),this.actor.send(this.type+".loadData",pe,function(Ne,Ge){ne._removed||Ge&&Ge.abandoned||(ne._loaded=!0,Ge&&Ge.resourceTiming&&Ge.resourceTiming[ne.id]&&(ne._resourceTiming=Ge.resourceTiming[ne.id].slice(0)),ne.actor.send(ne.type+".coalesce",{source:pe.source},null),q(Ne))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(q,ne){var pe=this,Le=q.actor?"reloadTile":"loadTile";q.actor=this.actor;var Ne={type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};q.request=this.actor.send(Le,Ne,function(Ge,et){return delete q.request,q.unloadVectorData(),q.aborted?ne(null):Ge?ne(Ge):(q.loadVectorData(et,pe.map.painter,Le==="reloadTile"),ne(null))})},Y.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},Y.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),F=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),N=function(D){function Y(q,ne,pe,Le){D.call(this),this.id=q,this.dispatcher=pe,this.coordinates=ne.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Le),this.options=ne}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(q,ne){var pe=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(Le,Ne){pe._loaded=!0,Le?pe.fire(new l.ErrorEvent(Le)):Ne&&(pe.image=Ne,q&&(pe.coordinates=q),ne&&ne(),pe._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(q){var ne=this;return this.image&&q.url?(this.options.url=q.url,this.load(q.coordinates,function(){ne.texture=null}),this):this},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setCoordinates=function(q){var ne=this;this.coordinates=q;var pe=q.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(Ne){for(var Ge=1/0,et=1/0,pt=-1/0,vt=-1/0,te=0,ue=Ne;te<ue.length;te+=1){var we=ue[te];Ge=Math.min(Ge,we.x),et=Math.min(et,we.y),pt=Math.max(pt,we.x),vt=Math.max(vt,we.y)}var Oe=pt-Ge,De=vt-et,Ue=Math.max(Oe,De),We=Math.max(0,Math.floor(-Math.log(Ue)/Math.LN2)),Ke=Math.pow(2,We);return new l.CanonicalTileID(We,Math.floor((Ge+pt)/2*Ke),Math.floor((et+vt)/2*Ke))}(pe),this.minzoom=this.maxzoom=this.tileID.z;var Le=pe.map(function(Ne){return ne.tileID.getTilePoint(Ne)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(Le[0].x,Le[0].y,0,0),this._boundsArray.emplaceBack(Le[1].x,Le[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(Le[3].x,Le[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(Le[2].x,Le[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var q=this.map.painter.context,ne=q.gl;for(var pe in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(q,this.image,ne.RGBA),this.texture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE)),this.tiles){var Le=this.tiles[pe];Le.state!=="loaded"&&(Le.state="loaded",Le.texture=this.texture)}}},Y.prototype.loadTile=function(q,ne){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},ne(null)):(q.state="errored",ne(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),B=function(D){function Y(q,ne,pe,Le){D.call(this,q,ne,pe,Le),this.roundZoom=!0,this.type="video",this.options=ne}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1;var ne=this.options;this.urls=[];for(var pe=0,Le=ne.urls;pe<Le.length;pe+=1){var Ne=Le[pe];this.urls.push(this.map._requestManager.transformRequest(Ne,l.ResourceType.Source).url)}l.getVideo(this.urls,function(Ge,et){q._loaded=!0,Ge?q.fire(new l.ErrorEvent(Ge)):et&&(q.video=et,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(q){if(this.video){var ne=this.video.seekable;q<ne.start(0)||q>ne.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ne.start(0)+" and "+ne.end(0)+"-second mark."))):this.video.currentTime=q}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var q=this.map.painter.context,ne=q.gl;for(var pe in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),ne.texSubImage2D(ne.TEXTURE_2D,0,0,0,ne.RGBA,ne.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(q,this.video,ne.RGBA),this.texture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE)),this.tiles){var Le=this.tiles[pe];Le.state!=="loaded"&&(Le.state="loaded",Le.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(N),j=function(D){function Y(q,ne,pe,Le){D.call(this,q,ne,pe,Le),ne.coordinates?Array.isArray(ne.coordinates)&&ne.coordinates.length===4&&!ne.coordinates.some(function(Ne){return!Array.isArray(Ne)||Ne.length!==2||Ne.some(function(Ge){return typeof Ge!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'missing required property "coordinates"'))),ne.animate&&typeof ne.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'optional "animate" property must be a boolean value'))),ne.canvas?typeof ne.canvas=="string"||ne.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'missing required property "canvas"'))),this.options=ne,this.animate=ne.animate===void 0||ne.animate}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ne=this.map.painter.context,pe=ne.gl;for(var Le in this.boundsBuffer||(this.boundsBuffer=ne.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(ne,this.canvas,pe.RGBA,{premultiply:!0}),this.tiles){var Ne=this.tiles[Le];Ne.state!=="loaded"&&(Ne.state="loaded",Ne.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var q=0,ne=[this.canvas.width,this.canvas.height];q<ne.length;q+=1){var pe=ne[q];if(isNaN(pe)||pe<=0)return!0}return!1},Y}(N),K={vector:I,raster:U,"raster-dem":z,geojson:H,video:B,image:N,canvas:j};function G(D,Y){var q=l.identity([]);return l.translate(q,q,[1,1,0]),l.scale(q,q,[.5*D.width,.5*D.height,1]),l.multiply(q,q,D.calculatePosMatrix(Y.toUnwrapped()))}function V(D,Y,q,ne,pe,Le){var Ne=function(De,Ue,We){if(De)for(var Ke=0,it=De;Ke<it.length;Ke+=1){var lt=Ue[it[Ke]];if(lt&&lt.source===We&&lt.type==="fill-extrusion")return!0}else for(var At in Ue){var Ft=Ue[At];if(Ft.source===We&&Ft.type==="fill-extrusion")return!0}return!1}(pe&&pe.layers,Y,D.id),Ge=Le.maxPitchScaleFactor(),et=D.tilesIn(ne,Ge,Ne);et.sort(W);for(var pt=[],vt=0,te=et;vt<te.length;vt+=1){var ue=te[vt];pt.push({wrappedTileID:ue.tileID.wrapped().key,queryResults:ue.tile.queryRenderedFeatures(Y,q,D._state,ue.queryGeometry,ue.cameraQueryGeometry,ue.scale,pe,Le,Ge,G(D.transform,ue.tileID))})}var we=function(De){for(var Ue={},We={},Ke=0,it=De;Ke<it.length;Ke+=1){var lt=it[Ke],At=lt.queryResults,Ft=lt.wrappedTileID,Bt=We[Ft]=We[Ft]||{};for(var Zt in At)for(var un=At[Zt],Wt=Bt[Zt]=Bt[Zt]||{},en=Ue[Zt]=Ue[Zt]||[],Jt=0,wn=un;Jt<wn.length;Jt+=1){var pn=wn[Jt];Wt[pn.featureIndex]||(Wt[pn.featureIndex]=!0,en.push(pn))}}return Ue}(pt);for(var Oe in we)we[Oe].forEach(function(De){var Ue=De.feature,We=D.getFeatureState(Ue.layer["source-layer"],Ue.id);Ue.source=Ue.layer.source,Ue.layer["source-layer"]&&(Ue.sourceLayer=Ue.layer["source-layer"]),Ue.state=We});return we}function W(D,Y){var q=D.tileID,ne=Y.tileID;return q.overscaledZ-ne.overscaledZ||q.canonical.y-ne.canonical.y||q.wrap-ne.wrap||q.canonical.x-ne.canonical.x}var J=function(D,Y){this.max=D,this.onRemove=Y,this.reset()};J.prototype.reset=function(){for(var D in this.data)for(var Y=0,q=this.data[D];Y<q.length;Y+=1){var ne=q[Y];ne.timeout&&clearTimeout(ne.timeout),this.onRemove(ne.value)}return this.data={},this.order=[],this},J.prototype.add=function(D,Y,q){var ne=this,pe=D.wrapped().key;this.data[pe]===void 0&&(this.data[pe]=[]);var Le={value:Y,timeout:void 0};if(q!==void 0&&(Le.timeout=setTimeout(function(){ne.remove(D,Le)},q)),this.data[pe].push(Le),this.order.push(pe),this.order.length>this.max){var Ne=this._getAndRemoveByKey(this.order[0]);Ne&&this.onRemove(Ne)}return this},J.prototype.has=function(D){return D.wrapped().key in this.data},J.prototype.getAndRemove=function(D){return this.has(D)?this._getAndRemoveByKey(D.wrapped().key):null},J.prototype._getAndRemoveByKey=function(D){var Y=this.data[D].shift();return Y.timeout&&clearTimeout(Y.timeout),this.data[D].length===0&&delete this.data[D],this.order.splice(this.order.indexOf(D),1),Y.value},J.prototype.getByKey=function(D){var Y=this.data[D];return Y?Y[0].value:null},J.prototype.get=function(D){return this.has(D)?this.data[D.wrapped().key][0].value:null},J.prototype.remove=function(D,Y){if(!this.has(D))return this;var q=D.wrapped().key,ne=Y===void 0?0:this.data[q].indexOf(Y),pe=this.data[q][ne];return this.data[q].splice(ne,1),pe.timeout&&clearTimeout(pe.timeout),this.data[q].length===0&&delete this.data[q],this.onRemove(pe.value),this.order.splice(this.order.indexOf(q),1),this},J.prototype.setMaxSize=function(D){for(this.max=D;this.order.length>this.max;){var Y=this._getAndRemoveByKey(this.order[0]);Y&&this.onRemove(Y)}return this},J.prototype.filter=function(D){var Y=[];for(var q in this.data)for(var ne=0,pe=this.data[q];ne<pe.length;ne+=1){var Le=pe[ne];D(Le.value)||Y.push(Le)}for(var Ne=0,Ge=Y;Ne<Ge.length;Ne+=1){var et=Ge[Ne];this.remove(et.value.tileID,et)}};var X=function(D,Y,q){this.context=D;var ne=D.gl;this.buffer=ne.createBuffer(),this.dynamicDraw=Boolean(q),this.context.unbindVAO(),D.bindElementBuffer.set(this.buffer),ne.bufferData(ne.ELEMENT_ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?ne.DYNAMIC_DRAW:ne.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};X.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},X.prototype.updateData=function(D){var Y=this.context.gl;this.context.unbindVAO(),this.bind(),Y.bufferSubData(Y.ELEMENT_ARRAY_BUFFER,0,D.arrayBuffer)},X.prototype.destroy=function(){var D=this.context.gl;this.buffer&&(D.deleteBuffer(this.buffer),delete this.buffer)};var ee={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(D,Y,q,ne){this.length=Y.length,this.attributes=q,this.itemSize=Y.bytesPerElement,this.dynamicDraw=ne,this.context=D;var pe=D.gl;this.buffer=pe.createBuffer(),D.bindVertexBuffer.set(this.buffer),pe.bufferData(pe.ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?pe.DYNAMIC_DRAW:pe.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(D){var Y=this.context.gl;this.bind(),Y.bufferSubData(Y.ARRAY_BUFFER,0,D.arrayBuffer)},re.prototype.enableAttributes=function(D,Y){for(var q=0;q<this.attributes.length;q++){var ne=this.attributes[q],pe=Y.attributes[ne.name];pe!==void 0&&D.enableVertexAttribArray(pe)}},re.prototype.setVertexAttribPointers=function(D,Y,q){for(var ne=0;ne<this.attributes.length;ne++){var pe=this.attributes[ne],Le=Y.attributes[pe.name];Le!==void 0&&D.vertexAttribPointer(Le,pe.components,D[ee[pe.type]],!1,this.itemSize,pe.offset+this.itemSize*(q||0))}},re.prototype.destroy=function(){var D=this.context.gl;this.buffer&&(D.deleteBuffer(this.buffer),delete this.buffer)};var ie=function(D){this.gl=D.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ie.prototype.get=function(){return this.current},ie.prototype.set=function(D){},ie.prototype.getDefault=function(){return this.default},ie.prototype.setDefault=function(){this.set(this.default)};var se=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return l.Color.transparent},Y.prototype.set=function(q){var ne=this.current;(q.r!==ne.r||q.g!==ne.g||q.b!==ne.b||q.a!==ne.a||this.dirty)&&(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},Y}(ie),fe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},Y}(ie),ye=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},Y}(ie),ge=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(q){var ne=this.current;(q[0]!==ne[0]||q[1]!==ne[1]||q[2]!==ne[2]||q[3]!==ne[3]||this.dirty)&&(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},Y}(ie),he=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthMask(q),this.current=q,this.dirty=!1)},Y}(ie),ve=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},Y}(ie),Ie=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(q){var ne=this.current;(q.func!==ne.func||q.ref!==ne.ref||q.mask!==ne.mask||this.dirty)&&(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},Y}(ie),xe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},Y.prototype.set=function(q){var ne=this.current;(q[0]!==ne[0]||q[1]!==ne[1]||q[2]!==ne[2]||this.dirty)&&(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},Y}(ie),Ae=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;q?ne.enable(ne.STENCIL_TEST):ne.disable(ne.STENCIL_TEST),this.current=q,this.dirty=!1}},Y}(ie),Se=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(q){var ne=this.current;(q[0]!==ne[0]||q[1]!==ne[1]||this.dirty)&&(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},Y}(ie),Te=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;q?ne.enable(ne.DEPTH_TEST):ne.disable(ne.DEPTH_TEST),this.current=q,this.dirty=!1}},Y}(ie),Q=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},Y}(ie),oe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;q?ne.enable(ne.BLEND):ne.disable(ne.BLEND),this.current=q,this.dirty=!1}},Y}(ie),ce=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},Y.prototype.set=function(q){var ne=this.current;(q[0]!==ne[0]||q[1]!==ne[1]||this.dirty)&&(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},Y}(ie),me=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return l.Color.transparent},Y.prototype.set=function(q){var ne=this.current;(q.r!==ne.r||q.g!==ne.g||q.b!==ne.b||q.a!==ne.a||this.dirty)&&(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},Y}(ie),Me=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},Y}(ie),Re=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;q?ne.enable(ne.CULL_FACE):ne.disable(ne.CULL_FACE),this.current=q,this.dirty=!1}},Y}(ie),Ce=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.cullFace(q),this.current=q,this.dirty=!1)},Y}(ie),ze=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.frontFace(q),this.current=q,this.dirty=!1)},Y}(ie),le=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.useProgram(q),this.current=q,this.dirty=!1)},Y}(ie),de=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},Y}(ie),be=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},Y.prototype.set=function(q){var ne=this.current;(q[0]!==ne[0]||q[1]!==ne[1]||q[2]!==ne[2]||q[3]!==ne[3]||this.dirty)&&(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},Y}(ie),Fe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.bindFramebuffer(ne.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},Y}(ie),Ve=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.bindRenderbuffer(ne.RENDERBUFFER,q),this.current=q,this.dirty=!1}},Y}(ie),He=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.bindTexture(ne.TEXTURE_2D,q),this.current=q,this.dirty=!1}},Y}(ie),rt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.bindBuffer(ne.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},Y}(ie),tt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){var ne=this.gl;ne.bindBuffer(ne.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},Y}(ie),ot=function(D){function Y(q){D.call(this,q),this.vao=q.extVertexArrayObject}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){this.vao&&(q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},Y}(ie),ht=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.pixelStorei(ne.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},Y}(ie),_t=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},Y}(ie),dt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},Y}(ie),bt=function(D){function Y(q,ne){D.call(this,q),this.context=q,this.parent=ne}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y}(ie),St=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ne=this.gl;ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},Y}(bt),Et=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ne=this.gl;ne.framebufferRenderbuffer(ne.FRAMEBUFFER,ne.DEPTH_ATTACHMENT,ne.RENDERBUFFER,q),this.current=q,this.dirty=!1}},Y}(bt),zt=function(D,Y,q,ne){this.context=D,this.width=Y,this.height=q;var pe=D.gl,Le=this.framebuffer=pe.createFramebuffer();this.colorAttachment=new St(D,Le),ne&&(this.depthAttachment=new Et(D,Le))};zt.prototype.destroy=function(){var D=this.context.gl,Y=this.colorAttachment.get();if(Y&&D.deleteTexture(Y),this.depthAttachment){var q=this.depthAttachment.get();q&&D.deleteRenderbuffer(q)}D.deleteFramebuffer(this.framebuffer)};var Ut=function(D,Y,q){this.func=D,this.mask=Y,this.range=q};Ut.ReadOnly=!1,Ut.ReadWrite=!0,Ut.disabled=new Ut(519,Ut.ReadOnly,[0,1]);var Pt=7680,Ze=function(D,Y,q,ne,pe,Le){this.test=D,this.ref=Y,this.mask=q,this.fail=ne,this.depthFail=pe,this.pass=Le};Ze.disabled=new Ze({func:519,mask:0},0,0,Pt,Pt,Pt);var Ye=function(D,Y,q){this.blendFunction=D,this.blendColor=Y,this.mask=q};Ye.disabled=new Ye(Ye.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),Ye.unblended=new Ye(Ye.Replace,l.Color.transparent,[!0,!0,!0,!0]),Ye.alphaBlended=new Ye([1,771],l.Color.transparent,[!0,!0,!0,!0]);var Be=function(D,Y,q){this.enable=D,this.mode=Y,this.frontFace=q};Be.disabled=new Be(!1,1029,2305),Be.backCCW=new Be(!0,1029,2305);var ke=function(D){this.gl=D,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new se(this),this.clearDepth=new fe(this),this.clearStencil=new ye(this),this.colorMask=new ge(this),this.depthMask=new he(this),this.stencilMask=new ve(this),this.stencilFunc=new Ie(this),this.stencilOp=new xe(this),this.stencilTest=new Ae(this),this.depthRange=new Se(this),this.depthTest=new Te(this),this.depthFunc=new Q(this),this.blend=new oe(this),this.blendFunc=new ce(this),this.blendColor=new me(this),this.blendEquation=new Me(this),this.cullFace=new Re(this),this.cullFaceSide=new Ce(this),this.frontFace=new ze(this),this.program=new le(this),this.activeTexture=new de(this),this.viewport=new be(this),this.bindFramebuffer=new Fe(this),this.bindRenderbuffer=new Ve(this),this.bindTexture=new He(this),this.bindVertexBuffer=new rt(this),this.bindElementBuffer=new tt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ot(this),this.pixelStoreUnpack=new ht(this),this.pixelStoreUnpackPremultiplyAlpha=new _t(this),this.pixelStoreUnpackFlipY=new dt(this),this.extTextureFilterAnisotropic=D.getExtension("EXT_texture_filter_anisotropic")||D.getExtension("MOZ_EXT_texture_filter_anisotropic")||D.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=D.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=D.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(D.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=D.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=D.getExtension("EXT_disjoint_timer_query")};ke.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ke.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ke.prototype.createIndexBuffer=function(D,Y){return new X(this,D,Y)},ke.prototype.createVertexBuffer=function(D,Y,q){return new re(this,D,Y,q)},ke.prototype.createRenderbuffer=function(D,Y,q){var ne=this.gl,pe=ne.createRenderbuffer();return this.bindRenderbuffer.set(pe),ne.renderbufferStorage(ne.RENDERBUFFER,D,Y,q),this.bindRenderbuffer.set(null),pe},ke.prototype.createFramebuffer=function(D,Y,q){return new zt(this,D,Y,q)},ke.prototype.clear=function(D){var Y=D.color,q=D.depth,ne=this.gl,pe=0;Y&&(pe|=ne.COLOR_BUFFER_BIT,this.clearColor.set(Y),this.colorMask.set([!0,!0,!0,!0])),q!==void 0&&(pe|=ne.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),ne.clear(pe)},ke.prototype.setCullFace=function(D){D.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(D.mode),this.frontFace.set(D.frontFace))},ke.prototype.setDepthMode=function(D){D.func!==this.gl.ALWAYS||D.mask?(this.depthTest.set(!0),this.depthFunc.set(D.func),this.depthMask.set(D.mask),this.depthRange.set(D.range)):this.depthTest.set(!1)},ke.prototype.setStencilMode=function(D){D.test.func!==this.gl.ALWAYS||D.mask?(this.stencilTest.set(!0),this.stencilMask.set(D.mask),this.stencilOp.set([D.fail,D.depthFail,D.pass]),this.stencilFunc.set({func:D.test.func,ref:D.ref,mask:D.test.mask})):this.stencilTest.set(!1)},ke.prototype.setColorMode=function(D){l.deepEqual(D.blendFunction,Ye.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(D.blendFunction),this.blendColor.set(D.blendColor)),this.colorMask.set(D.mask)},ke.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(D){function Y(q,ne,pe){var Le=this;D.call(this),this.id=q,this.dispatcher=pe,this.on("data",function(Ne){Ne.dataType==="source"&&Ne.sourceDataType==="metadata"&&(Le._sourceLoaded=!0),Le._sourceLoaded&&!Le._paused&&Ne.dataType==="source"&&Ne.sourceDataType==="content"&&(Le.reload(),Le.transform&&Le.update(Le.transform))}),this.on("error",function(){Le._sourceErrored=!0}),this._source=function(Ne,Ge,et,pt){var vt=new K[Ge.type](Ne,Ge,et,pt);if(vt.id!==Ne)throw new Error("Expected Source id to be "+Ne+" instead of "+vt.id);return l.bindAll(["load","abort","unload","serialize","prepare"],vt),vt}(q,ne,pe,this),this._tiles={},this._cache=new J(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},Y.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var ne=this._tiles[q];if(ne.state!=="loaded"&&ne.state!=="errored")return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(q,ne){return this._source.loadTile(q,ne)},Y.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},Y.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(q){for(var ne in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var pe=this._tiles[ne];pe.upload(q),pe.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return l.values(this._tiles).map(function(q){return q.tileID}).sort(qe).map(function(q){return q.key})},Y.prototype.getRenderableIds=function(q){var ne=this,pe=[];for(var Le in this._tiles)this._isIdRenderable(Le,q)&&pe.push(this._tiles[Le]);return q?pe.sort(function(Ne,Ge){var et=Ne.tileID,pt=Ge.tileID,vt=new l.Point(et.canonical.x,et.canonical.y)._rotate(ne.transform.angle),te=new l.Point(pt.canonical.x,pt.canonical.y)._rotate(ne.transform.angle);return et.overscaledZ-pt.overscaledZ||te.y-vt.y||te.x-vt.x}).map(function(Ne){return Ne.tileID.key}):pe.map(function(Ne){return Ne.tileID}).sort(qe).map(function(Ne){return Ne.key})},Y.prototype.hasRenderableParent=function(q){var ne=this.findLoadedParent(q,0);return!!ne&&this._isIdRenderable(ne.tileID.key)},Y.prototype._isIdRenderable=function(q,ne){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(ne||!this._tiles[q].holdingForFade())},Y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var q in this._cache.reset(),this._tiles)this._tiles[q].state!=="errored"&&this._reloadTile(q,"reloading")},Y.prototype._reloadTile=function(q,ne){var pe=this._tiles[q];pe&&(pe.state!=="loading"&&(pe.state=ne),this._loadTile(pe,this._tileLoaded.bind(this,pe,q,ne)))},Y.prototype._tileLoaded=function(q,ne,pe,Le){if(Le)return q.state="errored",void(Le.status!==404?this._source.fire(new l.ErrorEvent(Le,{tile:q})):this.update(this.transform));q.timeAdded=l.browser.now(),pe==="expired"&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(ne,q),this.getSource().type==="raster-dem"&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},Y.prototype._backfillDEM=function(q){for(var ne=this.getRenderableIds(),pe=0;pe<ne.length;pe++){var Le=ne[pe];if(q.neighboringTiles&&q.neighboringTiles[Le]){var Ne=this.getTileByID(Le);Ge(q,Ne),Ge(Ne,q)}}function Ge(et,pt){et.needsHillshadePrepare=!0;var vt=pt.tileID.canonical.x-et.tileID.canonical.x,te=pt.tileID.canonical.y-et.tileID.canonical.y,ue=Math.pow(2,et.tileID.canonical.z),we=pt.tileID.key;vt===0&&te===0||Math.abs(te)>1||(Math.abs(vt)>1&&(Math.abs(vt+ue)===1?vt+=ue:Math.abs(vt-ue)===1&&(vt-=ue)),pt.dem&&et.dem&&(et.dem.backfillBorder(pt.dem,vt,te),et.neighboringTiles&&et.neighboringTiles[we]&&(et.neighboringTiles[we].backfilled=!0)))}},Y.prototype.getTile=function(q){return this.getTileByID(q.key)},Y.prototype.getTileByID=function(q){return this._tiles[q]},Y.prototype._retainLoadedChildren=function(q,ne,pe,Le){for(var Ne in this._tiles){var Ge=this._tiles[Ne];if(!(Le[Ne]||!Ge.hasData()||Ge.tileID.overscaledZ<=ne||Ge.tileID.overscaledZ>pe)){for(var et=Ge.tileID;Ge&&Ge.tileID.overscaledZ>ne+1;){var pt=Ge.tileID.scaledTo(Ge.tileID.overscaledZ-1);(Ge=this._tiles[pt.key])&&Ge.hasData()&&(et=pt)}for(var vt=et;vt.overscaledZ>ne;)if(q[(vt=vt.scaledTo(vt.overscaledZ-1)).key]){Le[et.key]=et;break}}}},Y.prototype.findLoadedParent=function(q,ne){if(q.key in this._loadedParentTiles){var pe=this._loadedParentTiles[q.key];return pe&&pe.tileID.overscaledZ>=ne?pe:null}for(var Le=q.overscaledZ-1;Le>=ne;Le--){var Ne=q.scaledTo(Le),Ge=this._getLoadedTile(Ne);if(Ge)return Ge}},Y.prototype._getLoadedTile=function(q){var ne=this._tiles[q.key];return ne&&ne.hasData()?ne:this._cache.getByKey(q.wrapped().key)},Y.prototype.updateCacheSize=function(q){var ne=(Math.ceil(q.width/this._source.tileSize)+1)*(Math.ceil(q.height/this._source.tileSize)+1),pe=Math.floor(5*ne),Le=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,pe):pe;this._cache.setMaxSize(Le)},Y.prototype.handleWrapJump=function(q){var ne=(q-(this._prevLng===void 0?q:this._prevLng))/360,pe=Math.round(ne);if(this._prevLng=q,pe){var Le={};for(var Ne in this._tiles){var Ge=this._tiles[Ne];Ge.tileID=Ge.tileID.unwrapTo(Ge.tileID.wrap+pe),Le[Ge.tileID.key]=Ge}for(var et in this._tiles=Le,this._timers)clearTimeout(this._timers[et]),delete this._timers[et];for(var pt in this._tiles){var vt=this._tiles[pt];this._setTileReloadTimer(pt,vt)}}},Y.prototype.update=function(q){var ne=this;if(this.transform=q,this._sourceLoaded&&!this._paused){var pe;this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?pe=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Bt){return new l.OverscaledTileID(Bt.canonical.z,Bt.wrap,Bt.canonical.z,Bt.canonical.x,Bt.canonical.y)}):(pe=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(pe=pe.filter(function(Bt){return ne._source.hasTile(Bt)}))):pe=[];var Le=q.coveringZoomLevel(this._source),Ne=Math.max(Le-Y.maxOverzooming,this._source.minzoom),Ge=Math.max(Le+Y.maxUnderzooming,this._source.minzoom),et=this._updateRetainedTiles(pe,Le);if(Xe(this._source.type)){for(var pt={},vt={},te=0,ue=Object.keys(et);te<ue.length;te+=1){var we=ue[te],Oe=et[we],De=this._tiles[we];if(De&&!(De.fadeEndTime&&De.fadeEndTime<=l.browser.now())){var Ue=this.findLoadedParent(Oe,Ne);Ue&&(this._addTile(Ue.tileID),pt[Ue.tileID.key]=Ue.tileID),vt[we]=Oe}}for(var We in this._retainLoadedChildren(vt,Le,Ge,et),pt)et[We]||(this._coveredTiles[We]=!0,et[We]=pt[We])}for(var Ke in et)this._tiles[Ke].clearFadeHold();for(var it=0,lt=l.keysDifference(this._tiles,et);it<lt.length;it+=1){var At=lt[it],Ft=this._tiles[At];Ft.hasSymbolBuckets&&!Ft.holdingForFade()?Ft.setHoldDuration(this.map._fadeDuration):Ft.hasSymbolBuckets&&!Ft.symbolFadeFinished()||this._removeTile(At)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},Y.prototype._updateRetainedTiles=function(q,ne){for(var pe={},Le={},Ne=Math.max(ne-Y.maxOverzooming,this._source.minzoom),Ge=Math.max(ne+Y.maxUnderzooming,this._source.minzoom),et={},pt=0,vt=q;pt<vt.length;pt+=1){var te=vt[pt],ue=this._addTile(te);pe[te.key]=te,ue.hasData()||ne<this._source.maxzoom&&(et[te.key]=te)}this._retainLoadedChildren(et,ne,Ge,pe);for(var we=0,Oe=q;we<Oe.length;we+=1){var De=Oe[we],Ue=this._tiles[De.key];if(!Ue.hasData()){if(ne+1>this._source.maxzoom){var We=De.children(this._source.maxzoom)[0],Ke=this.getTile(We);if(Ke&&Ke.hasData()){pe[We.key]=We;continue}}else{var it=De.children(this._source.maxzoom);if(pe[it[0].key]&&pe[it[1].key]&&pe[it[2].key]&&pe[it[3].key])continue}for(var lt=Ue.wasRequested(),At=De.overscaledZ-1;At>=Ne;--At){var Ft=De.scaledTo(At);if(Le[Ft.key]||(Le[Ft.key]=!0,!(Ue=this.getTile(Ft))&&lt&&(Ue=this._addTile(Ft)),Ue&&(pe[Ft.key]=Ft,lt=Ue.wasRequested(),Ue.hasData())))break}}}return pe},Y.prototype._updateLoadedParentTileCache=function(){for(var q in this._loadedParentTiles={},this._tiles){for(var ne=[],pe=void 0,Le=this._tiles[q].tileID;Le.overscaledZ>0;){if(Le.key in this._loadedParentTiles){pe=this._loadedParentTiles[Le.key];break}ne.push(Le.key);var Ne=Le.scaledTo(Le.overscaledZ-1);if(pe=this._getLoadedTile(Ne))break;Le=Ne}for(var Ge=0,et=ne;Ge<et.length;Ge+=1){var pt=et[Ge];this._loadedParentTiles[pt]=pe}}},Y.prototype._addTile=function(q){var ne=this._tiles[q.key];if(ne)return ne;(ne=this._cache.getAndRemove(q))&&(this._setTileReloadTimer(q.key,ne),ne.tileID=q,this._state.initializeTileState(ne,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,ne)));var pe=Boolean(ne);return pe||(ne=new l.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(ne,this._tileLoaded.bind(this,ne,q.key,ne.state))),ne?(ne.uses++,this._tiles[q.key]=ne,pe||this._source.fire(new l.Event("dataloading",{tile:ne,coord:ne.tileID,dataType:"source"})),ne):null},Y.prototype._setTileReloadTimer=function(q,ne){var pe=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var Le=ne.getExpiryTimeout();Le&&(this._timers[q]=setTimeout(function(){pe._reloadTile(q,"expired"),delete pe._timers[q]},Le))},Y.prototype._removeTile=function(q){var ne=this._tiles[q];ne&&(ne.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),ne.uses>0||(ne.hasData()&&ne.state!=="reloading"?this._cache.add(ne.tileID,ne,ne.getExpiryTimeout()):(ne.aborted=!0,this._abortTile(ne),this._unloadTile(ne))))},Y.prototype.clearTiles=function(){for(var q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(q);this._cache.reset()},Y.prototype.tilesIn=function(q,ne,pe){var Le=this,Ne=[],Ge=this.transform;if(!Ge)return Ne;for(var et=pe?Ge.getCameraQueryGeometry(q):q,pt=q.map(function(At){return Ge.pointCoordinate(At)}),vt=et.map(function(At){return Ge.pointCoordinate(At)}),te=this.getIds(),ue=1/0,we=1/0,Oe=-1/0,De=-1/0,Ue=0,We=vt;Ue<We.length;Ue+=1){var Ke=We[Ue];ue=Math.min(ue,Ke.x),we=Math.min(we,Ke.y),Oe=Math.max(Oe,Ke.x),De=Math.max(De,Ke.y)}for(var it=function(At){var Ft=Le._tiles[te[At]];if(!Ft.holdingForFade()){var Bt=Ft.tileID,Zt=Math.pow(2,Ge.zoom-Ft.tileID.overscaledZ),un=ne*Ft.queryPadding*l.EXTENT/Ft.tileSize/Zt,Wt=[Bt.getTilePoint(new l.MercatorCoordinate(ue,we)),Bt.getTilePoint(new l.MercatorCoordinate(Oe,De))];if(Wt[0].x-un<l.EXTENT&&Wt[0].y-un<l.EXTENT&&Wt[1].x+un>=0&&Wt[1].y+un>=0){var en=pt.map(function(wn){return Bt.getTilePoint(wn)}),Jt=vt.map(function(wn){return Bt.getTilePoint(wn)});Ne.push({tile:Ft,tileID:Bt,queryGeometry:en,cameraQueryGeometry:Jt,scale:Zt})}}},lt=0;lt<te.length;lt++)it(lt);return Ne},Y.prototype.getVisibleCoordinates=function(q){for(var ne=this,pe=this.getRenderableIds(q).map(function(et){return ne._tiles[et].tileID}),Le=0,Ne=pe;Le<Ne.length;Le+=1){var Ge=Ne[Le];Ge.posMatrix=this.transform.calculatePosMatrix(Ge.toUnwrapped())}return pe},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Xe(this._source.type))for(var q in this._tiles){var ne=this._tiles[q];if(ne.fadeEndTime!==void 0&&ne.fadeEndTime>=l.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(q,ne,pe){q=q||"_geojsonTileLayer",this._state.updateState(q,ne,pe)},Y.prototype.removeFeatureState=function(q,ne,pe){q=q||"_geojsonTileLayer",this._state.removeFeatureState(q,ne,pe)},Y.prototype.getFeatureState=function(q,ne){return q=q||"_geojsonTileLayer",this._state.getState(q,ne)},Y.prototype.setDependencies=function(q,ne,pe){var Le=this._tiles[q];Le&&Le.setDependencies(ne,pe)},Y.prototype.reloadTilesForDependencies=function(q,ne){for(var pe in this._tiles)this._tiles[pe].hasDependency(q,ne)&&this._reloadTile(pe,"reloading");this._cache.filter(function(Le){return!Le.hasDependency(q,ne)})},Y}(l.Evented);function qe(D,Y){var q=Math.abs(2*D.wrap)-+(D.wrap<0),ne=Math.abs(2*Y.wrap)-+(Y.wrap<0);return D.overscaledZ-Y.overscaledZ||ne-q||Y.canonical.y-D.canonical.y||Y.canonical.x-D.canonical.x}function Xe(D){return D==="raster"||D==="image"||D==="video"}function nt(){return new l.window.Worker(gt.workerUrl)}Pe.maxOverzooming=10,Pe.maxUnderzooming=3;var ut="mapboxgl_preloaded_worker_pool",ct=function(){this.active={}};ct.prototype.acquire=function(D){if(!this.workers)for(this.workers=[];this.workers.length<ct.workerCount;)this.workers.push(new nt);return this.active[D]=!0,this.workers.slice()},ct.prototype.release=function(D){delete this.active[D],this.numActive()===0&&(this.workers.forEach(function(Y){Y.terminate()}),this.workers=null)},ct.prototype.isPreloaded=function(){return!!this.active[ut]},ct.prototype.numActive=function(){return Object.keys(this.active).length};var Ct,Lt=Math.floor(l.browser.hardwareConcurrency/2);function Mt(){return Ct||(Ct=new ct),Ct}function mt(D,Y){var q={};for(var ne in D)ne!=="ref"&&(q[ne]=D[ne]);return l.refProperties.forEach(function(pe){pe in Y&&(q[pe]=Y[pe])}),q}function kt(D){D=D.slice();for(var Y=Object.create(null),q=0;q<D.length;q++)Y[D[q].id]=D[q];for(var ne=0;ne<D.length;ne++)"ref"in D[ne]&&(D[ne]=mt(D[ne],Y[D[ne].ref]));return D}ct.workerCount=Math.max(Math.min(Lt,6),1);var wt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ot(D,Y,q){q.push({command:wt.addSource,args:[D,Y[D]]})}function It(D,Y,q){Y.push({command:wt.removeSource,args:[D]}),q[D]=!0}function Nt(D,Y,q,ne){It(D,q,ne),Ot(D,Y,q)}function Dt(D,Y,q){var ne;for(ne in D[q])if(D[q].hasOwnProperty(ne)&&ne!=="data"&&!l.deepEqual(D[q][ne],Y[q][ne]))return!1;for(ne in Y[q])if(Y[q].hasOwnProperty(ne)&&ne!=="data"&&!l.deepEqual(D[q][ne],Y[q][ne]))return!1;return!0}function qt(D,Y,q,ne,pe,Le){var Ne;for(Ne in Y=Y||{},D=D||{})D.hasOwnProperty(Ne)&&(l.deepEqual(D[Ne],Y[Ne])||q.push({command:Le,args:[ne,Ne,Y[Ne],pe]}));for(Ne in Y)Y.hasOwnProperty(Ne)&&!D.hasOwnProperty(Ne)&&(l.deepEqual(D[Ne],Y[Ne])||q.push({command:Le,args:[ne,Ne,Y[Ne],pe]}))}function Xt(D){return D.id}function cn(D,Y){return D[Y.id]=Y,D}function yn(D,Y){if(!D)return[{command:wt.setStyle,args:[Y]}];var q=[];try{if(!l.deepEqual(D.version,Y.version))return[{command:wt.setStyle,args:[Y]}];l.deepEqual(D.center,Y.center)||q.push({command:wt.setCenter,args:[Y.center]}),l.deepEqual(D.zoom,Y.zoom)||q.push({command:wt.setZoom,args:[Y.zoom]}),l.deepEqual(D.bearing,Y.bearing)||q.push({command:wt.setBearing,args:[Y.bearing]}),l.deepEqual(D.pitch,Y.pitch)||q.push({command:wt.setPitch,args:[Y.pitch]}),l.deepEqual(D.sprite,Y.sprite)||q.push({command:wt.setSprite,args:[Y.sprite]}),l.deepEqual(D.glyphs,Y.glyphs)||q.push({command:wt.setGlyphs,args:[Y.glyphs]}),l.deepEqual(D.transition,Y.transition)||q.push({command:wt.setTransition,args:[Y.transition]}),l.deepEqual(D.light,Y.light)||q.push({command:wt.setLight,args:[Y.light]});var ne={},pe=[];(function(Ne,Ge,et,pt){var vt;for(vt in Ge=Ge||{},Ne=Ne||{})Ne.hasOwnProperty(vt)&&(Ge.hasOwnProperty(vt)||It(vt,et,pt));for(vt in Ge)Ge.hasOwnProperty(vt)&&(Ne.hasOwnProperty(vt)?l.deepEqual(Ne[vt],Ge[vt])||(Ne[vt].type==="geojson"&&Ge[vt].type==="geojson"&&Dt(Ne,Ge,vt)?et.push({command:wt.setGeoJSONSourceData,args:[vt,Ge[vt].data]}):Nt(vt,Ge,et,pt)):Ot(vt,Ge,et))})(D.sources,Y.sources,pe,ne);var Le=[];D.layers&&D.layers.forEach(function(Ne){ne[Ne.source]?q.push({command:wt.removeLayer,args:[Ne.id]}):Le.push(Ne)}),q=q.concat(pe),function(Ne,Ge,et){Ge=Ge||[];var pt,vt,te,ue,we,Oe,De,Ue=(Ne=Ne||[]).map(Xt),We=Ge.map(Xt),Ke=Ne.reduce(cn,{}),it=Ge.reduce(cn,{}),lt=Ue.slice(),At=Object.create(null);for(pt=0,vt=0;pt<Ue.length;pt++)te=Ue[pt],it.hasOwnProperty(te)?vt++:(et.push({command:wt.removeLayer,args:[te]}),lt.splice(lt.indexOf(te,vt),1));for(pt=0,vt=0;pt<We.length;pt++)te=We[We.length-1-pt],lt[lt.length-1-pt]!==te&&(Ke.hasOwnProperty(te)?(et.push({command:wt.removeLayer,args:[te]}),lt.splice(lt.lastIndexOf(te,lt.length-vt),1)):vt++,Oe=lt[lt.length-pt],et.push({command:wt.addLayer,args:[it[te],Oe]}),lt.splice(lt.length-pt,0,te),At[te]=!0);for(pt=0;pt<We.length;pt++)if(ue=Ke[te=We[pt]],we=it[te],!At[te]&&!l.deepEqual(ue,we))if(l.deepEqual(ue.source,we.source)&&l.deepEqual(ue["source-layer"],we["source-layer"])&&l.deepEqual(ue.type,we.type)){for(De in qt(ue.layout,we.layout,et,te,null,wt.setLayoutProperty),qt(ue.paint,we.paint,et,te,null,wt.setPaintProperty),l.deepEqual(ue.filter,we.filter)||et.push({command:wt.setFilter,args:[te,we.filter]}),l.deepEqual(ue.minzoom,we.minzoom)&&l.deepEqual(ue.maxzoom,we.maxzoom)||et.push({command:wt.setLayerZoomRange,args:[te,we.minzoom,we.maxzoom]}),ue)ue.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?qt(ue[De],we[De],et,te,De.slice(6),wt.setPaintProperty):l.deepEqual(ue[De],we[De])||et.push({command:wt.setLayerProperty,args:[te,De,we[De]]}));for(De in we)we.hasOwnProperty(De)&&!ue.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?qt(ue[De],we[De],et,te,De.slice(6),wt.setPaintProperty):l.deepEqual(ue[De],we[De])||et.push({command:wt.setLayerProperty,args:[te,De,we[De]]}))}else et.push({command:wt.removeLayer,args:[te]}),Oe=lt[lt.lastIndexOf(te)+1],et.push({command:wt.addLayer,args:[we,Oe]})}(Le,Y.layers,q)}catch(Ne){console.warn("Unable to compute style diff:",Ne),q=[{command:wt.setStyle,args:[Y]}]}return q}var Kt=function(D,Y){this.reset(D,Y)};Kt.prototype.reset=function(D,Y){this.points=D||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(Y||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(D){if(this.points.length===1)return this.points[0];D=l.clamp(D,0,1);for(var Y=1,q=this._distances[Y],ne=D*this.paddedLength+this.padding;q<ne&&Y<this._distances.length;)q=this._distances[++Y];var pe=Y-1,Le=this._distances[pe],Ne=q-Le,Ge=Ne>0?(ne-Le)/Ne:0;return this.points[pe].mult(1-Ge).add(this.points[Y].mult(Ge))};var Mn=function(D,Y,q){var ne=this.boxCells=[],pe=this.circleCells=[];this.xCellCount=Math.ceil(D/q),this.yCellCount=Math.ceil(Y/q);for(var Le=0;Le<this.xCellCount*this.yCellCount;Le++)ne.push([]),pe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=D,this.height=Y,this.xScale=this.xCellCount/D,this.yScale=this.yCellCount/Y,this.boxUid=0,this.circleUid=0};function Un(D,Y,q,ne,pe){var Le=l.create();return Y?(l.scale(Le,Le,[1/pe,1/pe,1]),q||l.rotateZ(Le,Le,ne.angle)):l.multiply(Le,ne.labelPlaneMatrix,D),Le}function xn(D,Y,q,ne,pe){if(Y){var Le=l.clone(D);return l.scale(Le,Le,[pe,pe,1]),q||l.rotateZ(Le,Le,-ne.angle),Le}return ne.glCoordMatrix}function dn(D,Y){var q=[D.x,D.y,0,1];mr(q,q,Y);var ne=q[3];return{point:new l.Point(q[0]/ne,q[1]/ne),signedDistanceFromCamera:ne}}function gn(D,Y){return .5+D/Y*.5}function an(D,Y){var q=D[0]/D[3],ne=D[1]/D[3];return q>=-Y[0]&&q<=Y[0]&&ne>=-Y[1]&&ne<=Y[1]}function sn(D,Y,q,ne,pe,Le,Ne,Ge){var et=ne?D.textSizeData:D.iconSizeData,pt=l.evaluateSizeForZoom(et,q.transform.zoom),vt=[256/q.width*2+1,256/q.height*2+1],te=ne?D.text.dynamicLayoutVertexArray:D.icon.dynamicLayoutVertexArray;te.clear();for(var ue=D.lineVertexArray,we=ne?D.text.placedSymbolArray:D.icon.placedSymbolArray,Oe=q.transform.width/q.transform.height,De=!1,Ue=0;Ue<we.length;Ue++){var We=we.get(Ue);if(We.hidden||We.writingMode===l.WritingMode.vertical&&!De)$n(We.numGlyphs,te);else{De=!1;var Ke=[We.anchorX,We.anchorY,0,1];if(l.transformMat4(Ke,Ke,Y),an(Ke,vt)){var it=Ke[3],lt=gn(q.transform.cameraToCenterDistance,it),At=l.evaluateSizeForFeature(et,pt,We),Ft=Ne?At/lt:At*lt,Bt=new l.Point(We.anchorX,We.anchorY),Zt=dn(Bt,pe).point,un={},Wt=Dn(We,Ft,!1,Ge,Y,pe,Le,D.glyphOffsetArray,ue,te,Zt,Bt,un,Oe);De=Wt.useVertical,(Wt.notEnoughRoom||De||Wt.needsFlipping&&Dn(We,Ft,!0,Ge,Y,pe,Le,D.glyphOffsetArray,ue,te,Zt,Bt,un,Oe).notEnoughRoom)&&$n(We.numGlyphs,te)}else $n(We.numGlyphs,te)}}ne?D.text.dynamicLayoutVertexBuffer.updateData(te):D.icon.dynamicLayoutVertexBuffer.updateData(te)}function On(D,Y,q,ne,pe,Le,Ne,Ge,et,pt,vt){var te=Ge.glyphStartIndex+Ge.numGlyphs,ue=Ge.lineStartIndex,we=Ge.lineStartIndex+Ge.lineLength,Oe=Y.getoffsetX(Ge.glyphStartIndex),De=Y.getoffsetX(te-1),Ue=Fn(D*Oe,q,ne,pe,Le,Ne,Ge.segment,ue,we,et,pt,vt);if(!Ue)return null;var We=Fn(D*De,q,ne,pe,Le,Ne,Ge.segment,ue,we,et,pt,vt);return We?{first:Ue,last:We}:null}function En(D,Y,q,ne){return D===l.WritingMode.horizontal&&Math.abs(q.y-Y.y)>Math.abs(q.x-Y.x)*ne?{useVertical:!0}:(D===l.WritingMode.vertical?Y.y<q.y:Y.x>q.x)?{needsFlipping:!0}:null}function Dn(D,Y,q,ne,pe,Le,Ne,Ge,et,pt,vt,te,ue,we){var Oe,De=Y/24,Ue=D.lineOffsetX*De,We=D.lineOffsetY*De;if(D.numGlyphs>1){var Ke=D.glyphStartIndex+D.numGlyphs,it=D.lineStartIndex,lt=D.lineStartIndex+D.lineLength,At=On(De,Ge,Ue,We,q,vt,te,D,et,Le,ue);if(!At)return{notEnoughRoom:!0};var Ft=dn(At.first.point,Ne).point,Bt=dn(At.last.point,Ne).point;if(ne&&!q){var Zt=En(D.writingMode,Ft,Bt,we);if(Zt)return Zt}Oe=[At.first];for(var un=D.glyphStartIndex+1;un<Ke-1;un++)Oe.push(Fn(De*Ge.getoffsetX(un),Ue,We,q,vt,te,D.segment,it,lt,et,Le,ue));Oe.push(At.last)}else{if(ne&&!q){var Wt=dn(te,pe).point,en=D.lineStartIndex+D.segment+1,Jt=new l.Point(et.getx(en),et.gety(en)),wn=dn(Jt,pe),pn=wn.signedDistanceFromCamera>0?wn.point:Zn(te,Jt,Wt,1,pe),Qt=En(D.writingMode,Wt,pn,we);if(Qt)return Qt}var Ln=Fn(De*Ge.getoffsetX(D.glyphStartIndex),Ue,We,q,vt,te,D.segment,D.lineStartIndex,D.lineStartIndex+D.lineLength,et,Le,ue);if(!Ln)return{notEnoughRoom:!0};Oe=[Ln]}for(var Rn=0,Xn=Oe;Rn<Xn.length;Rn+=1){var Jn=Xn[Rn];l.addDynamicAttributes(pt,Jn.point,Jn.angle)}return{}}function Zn(D,Y,q,ne,pe){var Le=dn(D.add(D.sub(Y)._unit()),pe).point,Ne=q.sub(Le);return q.add(Ne._mult(ne/Ne.mag()))}function Fn(D,Y,q,ne,pe,Le,Ne,Ge,et,pt,vt,te){var ue=ne?D-Y:D+Y,we=ue>0?1:-1,Oe=0;ne&&(we*=-1,Oe=Math.PI),we<0&&(Oe+=Math.PI);for(var De=we>0?Ge+Ne:Ge+Ne+1,Ue=pe,We=pe,Ke=0,it=0,lt=Math.abs(ue),At=[];Ke+it<=lt;){if((De+=we)<Ge||De>=et)return null;if(We=Ue,At.push(Ue),(Ue=te[De])===void 0){var Ft=new l.Point(pt.getx(De),pt.gety(De)),Bt=dn(Ft,vt);if(Bt.signedDistanceFromCamera>0)Ue=te[De]=Bt.point;else{var Zt=De-we;Ue=Zn(Ke===0?Le:new l.Point(pt.getx(Zt),pt.gety(Zt)),Ft,We,lt-Ke+1,vt)}}Ke+=it,it=We.dist(Ue)}var un=(lt-Ke)/it,Wt=Ue.sub(We),en=Wt.mult(un)._add(We);en._add(Wt._unit()._perp()._mult(q*we));var Jt=Oe+Math.atan2(Ue.y-We.y,Ue.x-We.x);return At.push(en),{point:en,angle:Jt,path:At}}Mn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Mn.prototype.insert=function(D,Y,q,ne,pe){this._forEachCell(Y,q,ne,pe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(D),this.bboxes.push(Y),this.bboxes.push(q),this.bboxes.push(ne),this.bboxes.push(pe)},Mn.prototype.insertCircle=function(D,Y,q,ne){this._forEachCell(Y-ne,q-ne,Y+ne,q+ne,this._insertCircleCell,this.circleUid++),this.circleKeys.push(D),this.circles.push(Y),this.circles.push(q),this.circles.push(ne)},Mn.prototype._insertBoxCell=function(D,Y,q,ne,pe,Le){this.boxCells[pe].push(Le)},Mn.prototype._insertCircleCell=function(D,Y,q,ne,pe,Le){this.circleCells[pe].push(Le)},Mn.prototype._query=function(D,Y,q,ne,pe,Le){if(q<0||D>this.width||ne<0||Y>this.height)return!pe&&[];var Ne=[];if(D<=0&&Y<=0&&this.width<=q&&this.height<=ne){if(pe)return!0;for(var Ge=0;Ge<this.boxKeys.length;Ge++)Ne.push({key:this.boxKeys[Ge],x1:this.bboxes[4*Ge],y1:this.bboxes[4*Ge+1],x2:this.bboxes[4*Ge+2],y2:this.bboxes[4*Ge+3]});for(var et=0;et<this.circleKeys.length;et++){var pt=this.circles[3*et],vt=this.circles[3*et+1],te=this.circles[3*et+2];Ne.push({key:this.circleKeys[et],x1:pt-te,y1:vt-te,x2:pt+te,y2:vt+te})}return Le?Ne.filter(Le):Ne}var ue={hitTest:pe,seenUids:{box:{},circle:{}}};return this._forEachCell(D,Y,q,ne,this._queryCell,Ne,ue,Le),pe?Ne.length>0:Ne},Mn.prototype._queryCircle=function(D,Y,q,ne,pe){var Le=D-q,Ne=D+q,Ge=Y-q,et=Y+q;if(Ne<0||Le>this.width||et<0||Ge>this.height)return!ne&&[];var pt=[],vt={hitTest:ne,circle:{x:D,y:Y,radius:q},seenUids:{box:{},circle:{}}};return this._forEachCell(Le,Ge,Ne,et,this._queryCellCircle,pt,vt,pe),ne?pt.length>0:pt},Mn.prototype.query=function(D,Y,q,ne,pe){return this._query(D,Y,q,ne,!1,pe)},Mn.prototype.hitTest=function(D,Y,q,ne,pe){return this._query(D,Y,q,ne,!0,pe)},Mn.prototype.hitTestCircle=function(D,Y,q,ne){return this._queryCircle(D,Y,q,!0,ne)},Mn.prototype._queryCell=function(D,Y,q,ne,pe,Le,Ne,Ge){var et=Ne.seenUids,pt=this.boxCells[pe];if(pt!==null)for(var vt=this.bboxes,te=0,ue=pt;te<ue.length;te+=1){var we=ue[te];if(!et.box[we]){et.box[we]=!0;var Oe=4*we;if(D<=vt[Oe+2]&&Y<=vt[Oe+3]&&q>=vt[Oe+0]&&ne>=vt[Oe+1]&&(!Ge||Ge(this.boxKeys[we]))){if(Ne.hitTest)return Le.push(!0),!0;Le.push({key:this.boxKeys[we],x1:vt[Oe],y1:vt[Oe+1],x2:vt[Oe+2],y2:vt[Oe+3]})}}}var De=this.circleCells[pe];if(De!==null)for(var Ue=this.circles,We=0,Ke=De;We<Ke.length;We+=1){var it=Ke[We];if(!et.circle[it]){et.circle[it]=!0;var lt=3*it;if(this._circleAndRectCollide(Ue[lt],Ue[lt+1],Ue[lt+2],D,Y,q,ne)&&(!Ge||Ge(this.circleKeys[it]))){if(Ne.hitTest)return Le.push(!0),!0;var At=Ue[lt],Ft=Ue[lt+1],Bt=Ue[lt+2];Le.push({key:this.circleKeys[it],x1:At-Bt,y1:Ft-Bt,x2:At+Bt,y2:Ft+Bt})}}}},Mn.prototype._queryCellCircle=function(D,Y,q,ne,pe,Le,Ne,Ge){var et=Ne.circle,pt=Ne.seenUids,vt=this.boxCells[pe];if(vt!==null)for(var te=this.bboxes,ue=0,we=vt;ue<we.length;ue+=1){var Oe=we[ue];if(!pt.box[Oe]){pt.box[Oe]=!0;var De=4*Oe;if(this._circleAndRectCollide(et.x,et.y,et.radius,te[De+0],te[De+1],te[De+2],te[De+3])&&(!Ge||Ge(this.boxKeys[Oe])))return Le.push(!0),!0}}var Ue=this.circleCells[pe];if(Ue!==null)for(var We=this.circles,Ke=0,it=Ue;Ke<it.length;Ke+=1){var lt=it[Ke];if(!pt.circle[lt]){pt.circle[lt]=!0;var At=3*lt;if(this._circlesCollide(We[At],We[At+1],We[At+2],et.x,et.y,et.radius)&&(!Ge||Ge(this.circleKeys[lt])))return Le.push(!0),!0}}},Mn.prototype._forEachCell=function(D,Y,q,ne,pe,Le,Ne,Ge){for(var et=this._convertToXCellCoord(D),pt=this._convertToYCellCoord(Y),vt=this._convertToXCellCoord(q),te=this._convertToYCellCoord(ne),ue=et;ue<=vt;ue++)for(var we=pt;we<=te;we++){var Oe=this.xCellCount*we+ue;if(pe.call(this,D,Y,q,ne,Oe,Le,Ne,Ge))return}},Mn.prototype._convertToXCellCoord=function(D){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(D*this.xScale)))},Mn.prototype._convertToYCellCoord=function(D){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(D*this.yScale)))},Mn.prototype._circlesCollide=function(D,Y,q,ne,pe,Le){var Ne=ne-D,Ge=pe-Y,et=q+Le;return et*et>Ne*Ne+Ge*Ge},Mn.prototype._circleAndRectCollide=function(D,Y,q,ne,pe,Le,Ne){var Ge=(Le-ne)/2,et=Math.abs(D-(ne+Ge));if(et>Ge+q)return!1;var pt=(Ne-pe)/2,vt=Math.abs(Y-(pe+pt));if(vt>pt+q)return!1;if(et<=Ge||vt<=pt)return!0;var te=et-Ge,ue=vt-pt;return te*te+ue*ue<=q*q};var nr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $n(D,Y){for(var q=0;q<D;q++){var ne=Y.length;Y.resize(ne+4),Y.float32.set(nr,3*ne)}}function mr(D,Y,q){var ne=Y[0],pe=Y[1];return D[0]=q[0]*ne+q[4]*pe+q[12],D[1]=q[1]*ne+q[5]*pe+q[13],D[3]=q[3]*ne+q[7]*pe+q[15],D}var dr=100,Yn=function(D,Y,q){Y===void 0&&(Y=new Mn(D.width+200,D.height+200,25)),q===void 0&&(q=new Mn(D.width+200,D.height+200,25)),this.transform=D,this.grid=Y,this.ignoredGrid=q,this.pitchfactor=Math.cos(D._pitch)*D.cameraToCenterDistance,this.screenRightBoundary=D.width+dr,this.screenBottomBoundary=D.height+dr,this.gridRightBoundary=D.width+200,this.gridBottomBoundary=D.height+200};function Vn(D,Y,q){return Y*(l.EXTENT/(D.tileSize*Math.pow(2,q-D.tileID.overscaledZ)))}Yn.prototype.placeCollisionBox=function(D,Y,q,ne,pe){var Le=this.projectAndGetPerspectiveRatio(ne,D.anchorPointX,D.anchorPointY),Ne=q*Le.perspectiveRatio,Ge=D.x1*Ne+Le.point.x,et=D.y1*Ne+Le.point.y,pt=D.x2*Ne+Le.point.x,vt=D.y2*Ne+Le.point.y;return!this.isInsideGrid(Ge,et,pt,vt)||!Y&&this.grid.hitTest(Ge,et,pt,vt,pe)?{box:[],offscreen:!1}:{box:[Ge,et,pt,vt],offscreen:this.isOffscreen(Ge,et,pt,vt)}},Yn.prototype.placeCollisionCircles=function(D,Y,q,ne,pe,Le,Ne,Ge,et,pt,vt,te,ue){var we=[],Oe=new l.Point(Y.anchorX,Y.anchorY),De=dn(Oe,Le),Ue=gn(this.transform.cameraToCenterDistance,De.signedDistanceFromCamera),We=(pt?pe/Ue:pe*Ue)/l.ONE_EM,Ke=dn(Oe,Ne).point,it=On(We,ne,Y.lineOffsetX*We,Y.lineOffsetY*We,!1,Ke,Oe,Y,q,Ne,{}),lt=!1,At=!1,Ft=!0;if(it){for(var Bt=.5*te*Ue+ue,Zt=new l.Point(-100,-100),un=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Wt=new Kt,en=it.first,Jt=it.last,wn=[],pn=en.path.length-1;pn>=1;pn--)wn.push(en.path[pn]);for(var Qt=1;Qt<Jt.path.length;Qt++)wn.push(Jt.path[Qt]);var Ln=2.5*Bt;if(Ge){var Rn=wn.map(function(yi){return dn(yi,Ge)});wn=Rn.some(function(yi){return yi.signedDistanceFromCamera<=0})?[]:Rn.map(function(yi){return yi.point})}var Xn=[];if(wn.length>0){for(var Jn=wn[0].clone(),vr=wn[0].clone(),yr=1;yr<wn.length;yr++)Jn.x=Math.min(Jn.x,wn[yr].x),Jn.y=Math.min(Jn.y,wn[yr].y),vr.x=Math.max(vr.x,wn[yr].x),vr.y=Math.max(vr.y,wn[yr].y);Xn=Jn.x>=Zt.x&&vr.x<=un.x&&Jn.y>=Zt.y&&vr.y<=un.y?[wn]:vr.x<Zt.x||Jn.x>un.x||vr.y<Zt.y||Jn.y>un.y?[]:l.clipLine([wn],Zt.x,Zt.y,un.x,un.y)}for(var sr=0,pr=Xn;sr<pr.length;sr+=1){var kr=pr[sr];Wt.reset(kr,.25*Bt);var Vr;Vr=Wt.length<=.5*Bt?1:Math.ceil(Wt.paddedLength/Ln)+1;for(var Hr=0;Hr<Vr;Hr++){var fr=Hr/Math.max(Vr-1,1),Ar=Wt.lerp(fr),Dr=Ar.x+dr,zr=Ar.y+dr;we.push(Dr,zr,Bt,0);var Wr=Dr-Bt,Zr=zr-Bt,$r=Dr+Bt,ui=zr+Bt;if(Ft=Ft&&this.isOffscreen(Wr,Zr,$r,ui),At=At||this.isInsideGrid(Wr,Zr,$r,ui),!D&&this.grid.hitTestCircle(Dr,zr,Bt,vt)&&(lt=!0,!et))return{circles:[],offscreen:!1,collisionDetected:lt}}}}return{circles:!et&&lt||!At?[]:we,offscreen:Ft,collisionDetected:lt}},Yn.prototype.queryRenderedSymbols=function(D){if(D.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var Y=[],q=1/0,ne=1/0,pe=-1/0,Le=-1/0,Ne=0,Ge=D;Ne<Ge.length;Ne+=1){var et=Ge[Ne],pt=new l.Point(et.x+dr,et.y+dr);q=Math.min(q,pt.x),ne=Math.min(ne,pt.y),pe=Math.max(pe,pt.x),Le=Math.max(Le,pt.y),Y.push(pt)}for(var vt={},te={},ue=0,we=this.grid.query(q,ne,pe,Le).concat(this.ignoredGrid.query(q,ne,pe,Le));ue<we.length;ue+=1){var Oe=we[ue],De=Oe.key;if(vt[De.bucketInstanceId]===void 0&&(vt[De.bucketInstanceId]={}),!vt[De.bucketInstanceId][De.featureIndex]){var Ue=[new l.Point(Oe.x1,Oe.y1),new l.Point(Oe.x2,Oe.y1),new l.Point(Oe.x2,Oe.y2),new l.Point(Oe.x1,Oe.y2)];l.polygonIntersectsPolygon(Y,Ue)&&(vt[De.bucketInstanceId][De.featureIndex]=!0,te[De.bucketInstanceId]===void 0&&(te[De.bucketInstanceId]=[]),te[De.bucketInstanceId].push(De.featureIndex))}}return te},Yn.prototype.insertCollisionBox=function(D,Y,q,ne,pe){var Le={bucketInstanceId:q,featureIndex:ne,collisionGroupID:pe};(Y?this.ignoredGrid:this.grid).insert(Le,D[0],D[1],D[2],D[3])},Yn.prototype.insertCollisionCircles=function(D,Y,q,ne,pe){for(var Le=Y?this.ignoredGrid:this.grid,Ne={bucketInstanceId:q,featureIndex:ne,collisionGroupID:pe},Ge=0;Ge<D.length;Ge+=4)Le.insertCircle(Ne,D[Ge],D[Ge+1],D[Ge+2])},Yn.prototype.projectAndGetPerspectiveRatio=function(D,Y,q){var ne=[Y,q,0,1];return mr(ne,ne,D),{point:new l.Point((ne[0]/ne[3]+1)/2*this.transform.width+dr,(-ne[1]/ne[3]+1)/2*this.transform.height+dr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/ne[3]*.5}},Yn.prototype.isOffscreen=function(D,Y,q,ne){return q<dr||D>=this.screenRightBoundary||ne<dr||Y>this.screenBottomBoundary},Yn.prototype.isInsideGrid=function(D,Y,q,ne){return q>=0&&D<this.gridRightBoundary&&ne>=0&&Y<this.gridBottomBoundary},Yn.prototype.getViewportMatrix=function(){var D=l.identity([]);return l.translate(D,D,[-100,-100,0]),D};var ur=function(D,Y,q,ne){this.opacity=D?Math.max(0,Math.min(1,D.opacity+(D.placed?Y:-Y))):ne&&q?1:0,this.placed=q};ur.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Gt=function(D,Y,q,ne,pe){this.text=new ur(D?D.text:null,Y,q,pe),this.icon=new ur(D?D.icon:null,Y,ne,pe)};Gt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var tn=function(D,Y,q){this.text=D,this.icon=Y,this.skipFade=q},In=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},_n=function(D,Y,q,ne,pe){this.bucketInstanceId=D,this.featureIndex=Y,this.sourceLayerIndex=q,this.bucketIndex=ne,this.tileID=pe},Sn=function(D){this.crossSourceCollisions=D,this.maxGroupID=0,this.collisionGroups={}};function jn(D,Y,q,ne,pe){var Le=l.getAnchorAlignment(D),Ne=-(Le.horizontalAlign-.5)*Y,Ge=-(Le.verticalAlign-.5)*q,et=l.evaluateVariableOffset(D,ne);return new l.Point(Ne+et[0]*pe,Ge+et[1]*pe)}function qn(D,Y,q,ne,pe,Le){var Ne=D.x1,Ge=D.x2,et=D.y1,pt=D.y2,vt=D.anchorPointX,te=D.anchorPointY,ue=new l.Point(Y,q);return ne&&ue._rotate(pe?Le:-Le),{x1:Ne+ue.x,y1:et+ue.y,x2:Ge+ue.x,y2:pt+ue.y,anchorPointX:vt,anchorPointY:te}}Sn.prototype.get=function(D){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[D]){var Y=++this.maxGroupID;this.collisionGroups[D]={ID:Y,predicate:function(q){return q.collisionGroupID===Y}}}return this.collisionGroups[D]};var ar=function(D,Y,q,ne){this.transform=D.clone(),this.collisionIndex=new Yn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=Y,this.retainedQueryData={},this.collisionGroups=new Sn(q),this.collisionCircleArrays={},this.prevPlacement=ne,ne&&(ne.prevPlacement=void 0),this.placedOrientations={}};function cr(D,Y,q,ne,pe){D.emplaceBack(Y?1:0,q?1:0,ne||0,pe||0),D.emplaceBack(Y?1:0,q?1:0,ne||0,pe||0),D.emplaceBack(Y?1:0,q?1:0,ne||0,pe||0),D.emplaceBack(Y?1:0,q?1:0,ne||0,pe||0)}ar.prototype.getBucketParts=function(D,Y,q,ne){var pe=q.getBucket(Y),Le=q.latestFeatureIndex;if(pe&&Le&&Y.id===pe.layerIds[0]){var Ne=q.collisionBoxArray,Ge=pe.layers[0].layout,et=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),pt=q.tileSize/l.EXTENT,vt=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),te=Ge.get("text-pitch-alignment")==="map",ue=Ge.get("text-rotation-alignment")==="map",we=Vn(q,1,this.transform.zoom),Oe=Un(vt,te,ue,this.transform,we),De=null;if(te){var Ue=xn(vt,te,ue,this.transform,we);De=l.multiply([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[pe.bucketInstanceId]=new _n(pe.bucketInstanceId,Le,pe.sourceLayerIndex,pe.index,q.tileID);var We={bucket:pe,layout:Ge,posMatrix:vt,textLabelPlaneMatrix:Oe,labelToScreenMatrix:De,scale:et,textPixelRatio:pt,holdingForFade:q.holdingForFade(),collisionBoxArray:Ne,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(pe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(pe.sourceID)};if(ne)for(var Ke=0,it=pe.sortKeyRanges;Ke<it.length;Ke+=1){var lt=it[Ke],At=lt.sortKey,Ft=lt.symbolInstanceStart,Bt=lt.symbolInstanceEnd;D.push({sortKey:At,symbolInstanceStart:Ft,symbolInstanceEnd:Bt,parameters:We})}else D.push({symbolInstanceStart:0,symbolInstanceEnd:pe.symbolInstances.length,parameters:We})}},ar.prototype.attemptAnchorPlacement=function(D,Y,q,ne,pe,Le,Ne,Ge,et,pt,vt,te,ue,we,Oe){var De,Ue=[te.textOffset0,te.textOffset1],We=jn(D,q,ne,Ue,pe),Ke=this.collisionIndex.placeCollisionBox(qn(Y,We.x,We.y,Le,Ne,this.transform.angle),vt,Ge,et,pt.predicate);if(!Oe||this.collisionIndex.placeCollisionBox(qn(Oe,We.x,We.y,Le,Ne,this.transform.angle),vt,Ge,et,pt.predicate).box.length!==0)return Ke.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID].text&&(De=this.prevPlacement.variableOffsets[te.crossTileID].anchor),this.variableOffsets[te.crossTileID]={textOffset:Ue,width:q,height:ne,anchor:D,textBoxScale:pe,prevAnchor:De},this.markUsedJustification(ue,D,te,we),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,we,te),this.placedOrientations[te.crossTileID]=we),{shift:We,placedGlyphBoxes:Ke}):void 0},ar.prototype.placeLayerBucketPart=function(D,Y,q){var ne=this,pe=D.parameters,Le=pe.bucket,Ne=pe.layout,Ge=pe.posMatrix,et=pe.textLabelPlaneMatrix,pt=pe.labelToScreenMatrix,vt=pe.textPixelRatio,te=pe.holdingForFade,ue=pe.collisionBoxArray,we=pe.partiallyEvaluatedTextSize,Oe=pe.collisionGroup,De=Ne.get("text-optional"),Ue=Ne.get("icon-optional"),We=Ne.get("text-allow-overlap"),Ke=Ne.get("icon-allow-overlap"),it=Ne.get("text-rotation-alignment")==="map",lt=Ne.get("text-pitch-alignment")==="map",At=Ne.get("icon-text-fit")!=="none",Ft=Ne.get("symbol-z-order")==="viewport-y",Bt=We&&(Ke||!Le.hasIconData()||Ue),Zt=Ke&&(We||!Le.hasTextData()||De);!Le.collisionArrays&&ue&&Le.deserializeCollisionBoxes(ue);var un=function(Qt,Ln){if(!Y[Qt.crossTileID])if(te)ne.placements[Qt.crossTileID]=new tn(!1,!1,!1);else{var Rn,Xn=!1,Jn=!1,vr=!0,yr=null,sr={box:null,offscreen:null},pr={box:null,offscreen:null},kr=null,Vr=null,Hr=0,fr=0,Ar=0;Ln.textFeatureIndex?Hr=Ln.textFeatureIndex:Qt.useRuntimeCollisionCircles&&(Hr=Qt.featureIndex),Ln.verticalTextFeatureIndex&&(fr=Ln.verticalTextFeatureIndex);var Dr=Ln.textBox;if(Dr){var zr=function(Yr){var Bi=l.WritingMode.horizontal;if(Le.allowVerticalPlacement&&!Yr&&ne.prevPlacement){var ha=ne.prevPlacement.placedOrientations[Qt.crossTileID];ha&&(ne.placedOrientations[Qt.crossTileID]=ha,Bi=ha,ne.markUsedOrientation(Le,Bi,Qt))}return Bi},Wr=function(Yr,Bi){if(Le.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&Ln.verticalTextBox)for(var ha=0,Bs=Le.writingModes;ha<Bs.length&&(Bs[ha]===l.WritingMode.vertical?(sr=Bi(),pr=sr):sr=Yr(),!(sr&&sr.box&&sr.box.length));ha+=1);else sr=Yr()};if(Ne.get("text-variable-anchor")){var Zr=Ne.get("text-variable-anchor");if(ne.prevPlacement&&ne.prevPlacement.variableOffsets[Qt.crossTileID]){var $r=ne.prevPlacement.variableOffsets[Qt.crossTileID];Zr.indexOf($r.anchor)>0&&(Zr=Zr.filter(function(Yr){return Yr!==$r.anchor})).unshift($r.anchor)}var ui=function(Yr,Bi,ha){for(var Bs=Yr.x2-Yr.x1,cc=Yr.y2-Yr.y1,$l=Qt.textBoxScale,fc=At&&!Ke?Bi:null,fl={box:[],offscreen:!1},Tu=We?2*Zr.length:Zr.length,bl=0;bl<Tu;++bl){var hl=Zr[bl%Zr.length],hc=bl>=Zr.length,el=ne.attemptAnchorPlacement(hl,Yr,Bs,cc,$l,it,lt,vt,Ge,Oe,hc,Qt,Le,ha,fc);if(el&&(fl=el.placedGlyphBoxes)&&fl.box&&fl.box.length){Xn=!0,yr=el.shift;break}}return fl};Wr(function(){return ui(Dr,Ln.iconBox,l.WritingMode.horizontal)},function(){var Yr=Ln.verticalTextBox,Bi=sr&&sr.box&&sr.box.length;return Le.allowVerticalPlacement&&!Bi&&Qt.numVerticalGlyphVertices>0&&Yr?ui(Yr,Ln.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),sr&&(Xn=sr.box,vr=sr.offscreen);var yi=zr(sr&&sr.box);if(!Xn&&ne.prevPlacement){var hi=ne.prevPlacement.variableOffsets[Qt.crossTileID];hi&&(ne.variableOffsets[Qt.crossTileID]=hi,ne.markUsedJustification(Le,hi.anchor,Qt,yi))}}else{var si=function(Yr,Bi){var ha=ne.collisionIndex.placeCollisionBox(Yr,We,vt,Ge,Oe.predicate);return ha&&ha.box&&ha.box.length&&(ne.markUsedOrientation(Le,Bi,Qt),ne.placedOrientations[Qt.crossTileID]=Bi),ha};Wr(function(){return si(Dr,l.WritingMode.horizontal)},function(){var Yr=Ln.verticalTextBox;return Le.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&Yr?si(Yr,l.WritingMode.vertical):{box:null,offscreen:null}}),zr(sr&&sr.box&&sr.box.length)}}if(Xn=(Rn=sr)&&Rn.box&&Rn.box.length>0,vr=Rn&&Rn.offscreen,Qt.useRuntimeCollisionCircles){var ci=Le.text.placedSymbolArray.get(Qt.centerJustifiedTextSymbolIndex),pi=l.evaluateSizeForFeature(Le.textSizeData,we,ci),Si=Ne.get("text-padding"),So=Qt.collisionCircleDiameter;kr=ne.collisionIndex.placeCollisionCircles(We,ci,Le.lineVertexArray,Le.glyphOffsetArray,pi,Ge,et,pt,q,lt,Oe.predicate,So,Si),Xn=We||kr.circles.length>0&&!kr.collisionDetected,vr=vr&&kr.offscreen}if(Ln.iconFeatureIndex&&(Ar=Ln.iconFeatureIndex),Ln.iconBox){var Fi=function(Yr){var Bi=At&&yr?qn(Yr,yr.x,yr.y,it,lt,ne.transform.angle):Yr;return ne.collisionIndex.placeCollisionBox(Bi,Ke,vt,Ge,Oe.predicate)};Jn=pr&&pr.box&&pr.box.length&&Ln.verticalIconBox?(Vr=Fi(Ln.verticalIconBox)).box.length>0:(Vr=Fi(Ln.iconBox)).box.length>0,vr=vr&&Vr.offscreen}var Br=De||Qt.numHorizontalGlyphVertices===0&&Qt.numVerticalGlyphVertices===0,Gi=Ue||Qt.numIconVertices===0;if(Br||Gi?Gi?Br||(Jn=Jn&&Xn):Xn=Jn&&Xn:Jn=Xn=Jn&&Xn,Xn&&Rn&&Rn.box&&(pr&&pr.box&&fr?ne.collisionIndex.insertCollisionBox(Rn.box,Ne.get("text-ignore-placement"),Le.bucketInstanceId,fr,Oe.ID):ne.collisionIndex.insertCollisionBox(Rn.box,Ne.get("text-ignore-placement"),Le.bucketInstanceId,Hr,Oe.ID)),Jn&&Vr&&ne.collisionIndex.insertCollisionBox(Vr.box,Ne.get("icon-ignore-placement"),Le.bucketInstanceId,Ar,Oe.ID),kr&&(Xn&&ne.collisionIndex.insertCollisionCircles(kr.circles,Ne.get("text-ignore-placement"),Le.bucketInstanceId,Hr,Oe.ID),q)){var Qi=Le.bucketInstanceId,ki=ne.collisionCircleArrays[Qi];ki===void 0&&(ki=ne.collisionCircleArrays[Qi]=new In);for(var Ga=0;Ga<kr.circles.length;Ga+=4)ki.circles.push(kr.circles[Ga+0]),ki.circles.push(kr.circles[Ga+1]),ki.circles.push(kr.circles[Ga+2]),ki.circles.push(kr.collisionDetected?1:0)}ne.placements[Qt.crossTileID]=new tn(Xn||Bt,Jn||Zt,vr||Le.justReloaded),Y[Qt.crossTileID]=!0}};if(Ft)for(var Wt=Le.getSortedSymbolIndexes(this.transform.angle),en=Wt.length-1;en>=0;--en){var Jt=Wt[en];un(Le.symbolInstances.get(Jt),Le.collisionArrays[Jt])}else for(var wn=D.symbolInstanceStart;wn<D.symbolInstanceEnd;wn++)un(Le.symbolInstances.get(wn),Le.collisionArrays[wn]);if(q&&Le.bucketInstanceId in this.collisionCircleArrays){var pn=this.collisionCircleArrays[Le.bucketInstanceId];l.invert(pn.invProjMatrix,Ge),pn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Le.justReloaded=!1},ar.prototype.markUsedJustification=function(D,Y,q,ne){var pe,Le={left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex};pe=ne===l.WritingMode.vertical?q.verticalPlacedTextSymbolIndex:Le[l.getAnchorJustification(Y)];for(var Ne=0,Ge=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex];Ne<Ge.length;Ne+=1){var et=Ge[Ne];et>=0&&(D.text.placedSymbolArray.get(et).crossTileID=pe>=0&&et!==pe?0:q.crossTileID)}},ar.prototype.markUsedOrientation=function(D,Y,q){for(var ne=Y===l.WritingMode.horizontal||Y===l.WritingMode.horizontalOnly?Y:0,pe=Y===l.WritingMode.vertical?Y:0,Le=0,Ne=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex];Le<Ne.length;Le+=1){var Ge=Ne[Le];D.text.placedSymbolArray.get(Ge).placedOrientation=ne}q.verticalPlacedTextSymbolIndex&&(D.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=pe)},ar.prototype.commit=function(D){this.commitTime=D,this.zoomAtLastRecencyCheck=this.transform.zoom;var Y=this.prevPlacement,q=!1;this.prevZoomAdjustment=Y?Y.zoomAdjustment(this.transform.zoom):0;var ne=Y?Y.symbolFadeChange(D):1,pe=Y?Y.opacities:{},Le=Y?Y.variableOffsets:{},Ne=Y?Y.placedOrientations:{};for(var Ge in this.placements){var et=this.placements[Ge],pt=pe[Ge];pt?(this.opacities[Ge]=new Gt(pt,ne,et.text,et.icon),q=q||et.text!==pt.text.placed||et.icon!==pt.icon.placed):(this.opacities[Ge]=new Gt(null,ne,et.text,et.icon,et.skipFade),q=q||et.text||et.icon)}for(var vt in pe){var te=pe[vt];if(!this.opacities[vt]){var ue=new Gt(te,ne,!1,!1);ue.isHidden()||(this.opacities[vt]=ue,q=q||te.text.placed||te.icon.placed)}}for(var we in Le)this.variableOffsets[we]||!this.opacities[we]||this.opacities[we].isHidden()||(this.variableOffsets[we]=Le[we]);for(var Oe in Ne)this.placedOrientations[Oe]||!this.opacities[Oe]||this.opacities[Oe].isHidden()||(this.placedOrientations[Oe]=Ne[Oe]);q?this.lastPlacementChangeTime=D:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=Y?Y.lastPlacementChangeTime:D)},ar.prototype.updateLayerOpacities=function(D,Y){for(var q={},ne=0,pe=Y;ne<pe.length;ne+=1){var Le=pe[ne],Ne=Le.getBucket(D);Ne&&Le.latestFeatureIndex&&D.id===Ne.layerIds[0]&&this.updateBucketOpacities(Ne,q,Le.collisionBoxArray)}},ar.prototype.updateBucketOpacities=function(D,Y,q){var ne=this;D.hasTextData()&&D.text.opacityVertexArray.clear(),D.hasIconData()&&D.icon.opacityVertexArray.clear(),D.hasIconCollisionBoxData()&&D.iconCollisionBox.collisionVertexArray.clear(),D.hasTextCollisionBoxData()&&D.textCollisionBox.collisionVertexArray.clear();var pe=D.layers[0].layout,Le=new Gt(null,0,!1,!1,!0),Ne=pe.get("text-allow-overlap"),Ge=pe.get("icon-allow-overlap"),et=pe.get("text-variable-anchor"),pt=pe.get("text-rotation-alignment")==="map",vt=pe.get("text-pitch-alignment")==="map",te=pe.get("icon-text-fit")!=="none",ue=new Gt(null,0,Ne&&(Ge||!D.hasIconData()||pe.get("icon-optional")),Ge&&(Ne||!D.hasTextData()||pe.get("text-optional")),!0);!D.collisionArrays&&q&&(D.hasIconCollisionBoxData()||D.hasTextCollisionBoxData())&&D.deserializeCollisionBoxes(q);for(var we=function(We,Ke,it){for(var lt=0;lt<Ke/4;lt++)We.opacityVertexArray.emplaceBack(it)},Oe=function(We){var Ke=D.symbolInstances.get(We),it=Ke.numHorizontalGlyphVertices,lt=Ke.numVerticalGlyphVertices,At=Ke.crossTileID,Ft=Y[At],Bt=ne.opacities[At];Ft?Bt=Le:Bt||(Bt=ue,ne.opacities[At]=Bt),Y[At]=!0;var Zt=it>0||lt>0,un=Ke.numIconVertices>0,Wt=ne.placedOrientations[Ke.crossTileID],en=Wt===l.WritingMode.vertical,Jt=Wt===l.WritingMode.horizontal||Wt===l.WritingMode.horizontalOnly;if(Zt){var wn=kn(Bt.text),pn=en?Tn:wn;we(D.text,it,pn);var Qt=Jt?Tn:wn;we(D.text,lt,Qt);var Ln=Bt.text.isHidden();[Ke.rightJustifiedTextSymbolIndex,Ke.centerJustifiedTextSymbolIndex,Ke.leftJustifiedTextSymbolIndex].forEach(function(Ar){Ar>=0&&(D.text.placedSymbolArray.get(Ar).hidden=Ln||en?1:0)}),Ke.verticalPlacedTextSymbolIndex>=0&&(D.text.placedSymbolArray.get(Ke.verticalPlacedTextSymbolIndex).hidden=Ln||Jt?1:0);var Rn=ne.variableOffsets[Ke.crossTileID];Rn&&ne.markUsedJustification(D,Rn.anchor,Ke,Wt);var Xn=ne.placedOrientations[Ke.crossTileID];Xn&&(ne.markUsedJustification(D,"left",Ke,Xn),ne.markUsedOrientation(D,Xn,Ke))}if(un){var Jn=kn(Bt.icon),vr=!(te&&Ke.verticalPlacedIconSymbolIndex&&en);if(Ke.placedIconSymbolIndex>=0){var yr=vr?Jn:Tn;we(D.icon,Ke.numIconVertices,yr),D.icon.placedSymbolArray.get(Ke.placedIconSymbolIndex).hidden=Bt.icon.isHidden()}if(Ke.verticalPlacedIconSymbolIndex>=0){var sr=vr?Tn:Jn;we(D.icon,Ke.numVerticalIconVertices,sr),D.icon.placedSymbolArray.get(Ke.verticalPlacedIconSymbolIndex).hidden=Bt.icon.isHidden()}}if(D.hasIconCollisionBoxData()||D.hasTextCollisionBoxData()){var pr=D.collisionArrays[We];if(pr){var kr=new l.Point(0,0);if(pr.textBox||pr.verticalTextBox){var Vr=!0;if(et){var Hr=ne.variableOffsets[At];Hr?(kr=jn(Hr.anchor,Hr.width,Hr.height,Hr.textOffset,Hr.textBoxScale),pt&&kr._rotate(vt?ne.transform.angle:-ne.transform.angle)):Vr=!1}pr.textBox&&cr(D.textCollisionBox.collisionVertexArray,Bt.text.placed,!Vr||en,kr.x,kr.y),pr.verticalTextBox&&cr(D.textCollisionBox.collisionVertexArray,Bt.text.placed,!Vr||Jt,kr.x,kr.y)}var fr=Boolean(!Jt&&pr.verticalIconBox);pr.iconBox&&cr(D.iconCollisionBox.collisionVertexArray,Bt.icon.placed,fr,te?kr.x:0,te?kr.y:0),pr.verticalIconBox&&cr(D.iconCollisionBox.collisionVertexArray,Bt.icon.placed,!fr,te?kr.x:0,te?kr.y:0)}}},De=0;De<D.symbolInstances.length;De++)Oe(De);if(D.sortFeatures(this.transform.angle),this.retainedQueryData[D.bucketInstanceId]&&(this.retainedQueryData[D.bucketInstanceId].featureSortOrder=D.featureSortOrder),D.hasTextData()&&D.text.opacityVertexBuffer&&D.text.opacityVertexBuffer.updateData(D.text.opacityVertexArray),D.hasIconData()&&D.icon.opacityVertexBuffer&&D.icon.opacityVertexBuffer.updateData(D.icon.opacityVertexArray),D.hasIconCollisionBoxData()&&D.iconCollisionBox.collisionVertexBuffer&&D.iconCollisionBox.collisionVertexBuffer.updateData(D.iconCollisionBox.collisionVertexArray),D.hasTextCollisionBoxData()&&D.textCollisionBox.collisionVertexBuffer&&D.textCollisionBox.collisionVertexBuffer.updateData(D.textCollisionBox.collisionVertexArray),D.bucketInstanceId in this.collisionCircleArrays){var Ue=this.collisionCircleArrays[D.bucketInstanceId];D.placementInvProjMatrix=Ue.invProjMatrix,D.placementViewportMatrix=Ue.viewportMatrix,D.collisionCircleArray=Ue.circles,delete this.collisionCircleArrays[D.bucketInstanceId]}},ar.prototype.symbolFadeChange=function(D){return this.fadeDuration===0?1:(D-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ar.prototype.zoomAdjustment=function(D){return Math.max(0,(this.transform.zoom-D)/1.5)},ar.prototype.hasTransitions=function(D){return this.stale||D-this.lastPlacementChangeTime<this.fadeDuration},ar.prototype.stillRecent=function(D,Y){var q=this.zoomAtLastRecencyCheck===Y?1-this.zoomAdjustment(Y):1;return this.zoomAtLastRecencyCheck=Y,this.commitTime+this.fadeDuration*q>D},ar.prototype.setStale=function(){this.stale=!0};var $t=Math.pow(2,25),An=Math.pow(2,24),Rt=Math.pow(2,17),Yt=Math.pow(2,16),rn=Math.pow(2,9),bn=Math.pow(2,8),ln=Math.pow(2,1);function kn(D){if(D.opacity===0&&!D.placed)return 0;if(D.opacity===1&&D.placed)return 4294967295;var Y=D.placed?1:0,q=Math.floor(127*D.opacity);return q*$t+Y*An+q*Rt+Y*Yt+q*rn+Y*bn+q*ln+Y}var Tn=0,hn=function(D){this._sortAcrossTiles=D.layout.get("symbol-z-order")!=="viewport-y"&&D.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};hn.prototype.continuePlacement=function(D,Y,q,ne,pe){for(var Le=this._bucketParts;this._currentTileIndex<D.length;){var Ne=D[this._currentTileIndex];if(Y.getBucketParts(Le,ne,Ne,this._sortAcrossTiles),this._currentTileIndex++,pe())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Le.sort(function(et,pt){return et.sortKey-pt.sortKey}));this._currentPartIndex<Le.length;){var Ge=Le[this._currentPartIndex];if(Y.placeLayerBucketPart(Ge,this._seenCrossTileIDs,q),this._currentPartIndex++,pe())return!0}return!1};var nn=function(D,Y,q,ne,pe,Le,Ne){this.placement=new ar(D,pe,Le,Ne),this._currentPlacementIndex=Y.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=ne,this._done=!1};nn.prototype.isDone=function(){return this._done},nn.prototype.continuePlacement=function(D,Y,q){for(var ne=this,pe=l.browser.now(),Le=function(){var et=l.browser.now()-pe;return!ne._forceFullPlacement&&et>2};this._currentPlacementIndex>=0;){var Ne=Y[D[this._currentPlacementIndex]],Ge=this.placement.collisionIndex.transform.zoom;if(Ne.type==="symbol"&&(!Ne.minzoom||Ne.minzoom<=Ge)&&(!Ne.maxzoom||Ne.maxzoom>Ge)){if(this._inProgressLayer||(this._inProgressLayer=new hn(Ne)),this._inProgressLayer.continuePlacement(q[Ne.source],this.placement,this._showCollisionBoxes,Ne,Le))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},nn.prototype.commit=function(D){return this.placement.commit(D),this.placement};var fn=512/l.EXTENT/2,mn=function(D,Y,q){this.tileID=D,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var ne=0;ne<Y.length;ne++){var pe=Y.get(ne),Le=pe.key;this.indexedSymbolInstances[Le]||(this.indexedSymbolInstances[Le]=[]),this.indexedSymbolInstances[Le].push({crossTileID:pe.crossTileID,coord:this.getScaledCoordinates(pe,D)})}};mn.prototype.getScaledCoordinates=function(D,Y){var q=Y.canonical.z-this.tileID.canonical.z,ne=fn/Math.pow(2,q);return{x:Math.floor((Y.canonical.x*l.EXTENT+D.anchorX)*ne),y:Math.floor((Y.canonical.y*l.EXTENT+D.anchorY)*ne)}},mn.prototype.findMatches=function(D,Y,q){for(var ne=this.tileID.canonical.z<Y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-Y.canonical.z),pe=0;pe<D.length;pe++){var Le=D.get(pe);if(!Le.crossTileID){var Ne=this.indexedSymbolInstances[Le.key];if(Ne)for(var Ge=this.getScaledCoordinates(Le,Y),et=0,pt=Ne;et<pt.length;et+=1){var vt=pt[et];if(Math.abs(vt.coord.x-Ge.x)<=ne&&Math.abs(vt.coord.y-Ge.y)<=ne&&!q[vt.crossTileID]){q[vt.crossTileID]=!0,Le.crossTileID=vt.crossTileID;break}}}}};var zn=function(){this.maxCrossTileID=0};zn.prototype.generate=function(){return++this.maxCrossTileID};var Gn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Gn.prototype.handleWrapJump=function(D){var Y=Math.round((D-this.lng)/360);if(Y!==0)for(var q in this.indexes){var ne=this.indexes[q],pe={};for(var Le in ne){var Ne=ne[Le];Ne.tileID=Ne.tileID.unwrapTo(Ne.tileID.wrap+Y),pe[Ne.tileID.key]=Ne}this.indexes[q]=pe}this.lng=D},Gn.prototype.addBucket=function(D,Y,q){if(this.indexes[D.overscaledZ]&&this.indexes[D.overscaledZ][D.key]){if(this.indexes[D.overscaledZ][D.key].bucketInstanceId===Y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(D.overscaledZ,this.indexes[D.overscaledZ][D.key])}for(var ne=0;ne<Y.symbolInstances.length;ne++)Y.symbolInstances.get(ne).crossTileID=0;this.usedCrossTileIDs[D.overscaledZ]||(this.usedCrossTileIDs[D.overscaledZ]={});var pe=this.usedCrossTileIDs[D.overscaledZ];for(var Le in this.indexes){var Ne=this.indexes[Le];if(Number(Le)>D.overscaledZ)for(var Ge in Ne){var et=Ne[Ge];et.tileID.isChildOf(D)&&et.findMatches(Y.symbolInstances,D,pe)}else{var pt=Ne[D.scaledTo(Number(Le)).key];pt&&pt.findMatches(Y.symbolInstances,D,pe)}}for(var vt=0;vt<Y.symbolInstances.length;vt++){var te=Y.symbolInstances.get(vt);te.crossTileID||(te.crossTileID=q.generate(),pe[te.crossTileID]=!0)}return this.indexes[D.overscaledZ]===void 0&&(this.indexes[D.overscaledZ]={}),this.indexes[D.overscaledZ][D.key]=new mn(D,Y.symbolInstances,Y.bucketInstanceId),!0},Gn.prototype.removeBucketCrossTileIDs=function(D,Y){for(var q in Y.indexedSymbolInstances)for(var ne=0,pe=Y.indexedSymbolInstances[q];ne<pe.length;ne+=1){var Le=pe[ne];delete this.usedCrossTileIDs[D][Le.crossTileID]}},Gn.prototype.removeStaleBuckets=function(D){var Y=!1;for(var q in this.indexes){var ne=this.indexes[q];for(var pe in ne)D[ne[pe].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,ne[pe]),delete ne[pe],Y=!0)}return Y};var Hn=function(){this.layerIndexes={},this.crossTileIDs=new zn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Hn.prototype.addLayer=function(D,Y,q){var ne=this.layerIndexes[D.id];ne===void 0&&(ne=this.layerIndexes[D.id]=new Gn);var pe=!1,Le={};ne.handleWrapJump(q);for(var Ne=0,Ge=Y;Ne<Ge.length;Ne+=1){var et=Ge[Ne],pt=et.getBucket(D);pt&&D.id===pt.layerIds[0]&&(pt.bucketInstanceId||(pt.bucketInstanceId=++this.maxBucketInstanceId),ne.addBucket(et.tileID,pt,this.crossTileIDs)&&(pe=!0),Le[pt.bucketInstanceId]=!0)}return ne.removeStaleBuckets(Le)&&(pe=!0),pe},Hn.prototype.pruneUnusedLayers=function(D){var Y={};for(var q in D.forEach(function(ne){Y[ne]=!0}),this.layerIndexes)Y[q]||delete this.layerIndexes[q]};var Qn=function(D,Y){return l.emitValidationErrors(D,Y&&Y.filter(function(q){return q.identifier!=="source.canvas"}))},rr=l.pick(wt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),er=l.pick(wt,["setCenter","setZoom","setBearing","setPitch"]),or=function(){var D={},Y=l.styleSpec.$version;for(var q in l.styleSpec.$root){var ne=l.styleSpec.$root[q];if(ne.required){var pe;(pe=q==="version"?Y:ne.type==="array"?[]:{})!=null&&(D[q]=pe)}}return D}(),ir=function(D){function Y(q,ne){var pe=this;ne===void 0&&(ne={}),D.call(this),this.map=q,this.dispatcher=new L(Mt(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new m(q._requestManager,ne.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Hn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var Le=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(Ne){var Ge={pluginStatus:Ne.pluginStatus,pluginURL:Ne.pluginURL};Le.dispatcher.broadcast("syncRTLPluginState",Ge,function(et,pt){if(l.triggerPluginCompletionEvent(et),pt&&pt.every(function(te){return te}))for(var vt in Le.sourceCaches)Le.sourceCaches[vt].reload()})}),this.on("data",function(Ne){if(Ne.dataType==="source"&&Ne.sourceDataType==="metadata"){var Ge=pe.sourceCaches[Ne.sourceId];if(Ge){var et=Ge.getSource();if(et&&et.vectorLayerIds)for(var pt in pe._layers){var vt=pe._layers[pt];vt.source===et.id&&pe._validateLayer(vt)}}}})}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.loadURL=function(q,ne){var pe=this;ne===void 0&&(ne={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var Le=typeof ne.validate=="boolean"?ne.validate:!l.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,ne.accessToken);var Ne=this.map._requestManager.transformRequest(q,l.ResourceType.Style);this._request=l.getJSON(Ne,function(Ge,et){pe._request=null,Ge?pe.fire(new l.ErrorEvent(Ge)):et&&pe._load(et,Le)})},Y.prototype.loadJSON=function(q,ne){var pe=this;ne===void 0&&(ne={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){pe._request=null,pe._load(q,ne.validate!==!1)})},Y.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(or,!1)},Y.prototype._load=function(q,ne){if(!ne||!Qn(this,l.validateStyle(q))){for(var pe in this._loaded=!0,this.stylesheet=q,q.sources)this.addSource(pe,q.sources[pe],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var Le=kt(this.stylesheet.layers);this._order=Le.map(function(pt){return pt.id}),this._layers={},this._serializedLayers={};for(var Ne=0,Ge=Le;Ne<Ge.length;Ne+=1){var et=Ge[Ne];(et=l.createStyleLayer(et)).setEventedParent(this,{layer:{id:et.id}}),this._layers[et.id]=et,this._serializedLayers[et.id]=et.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},Y.prototype._loadSprite=function(q){var ne=this;this._spriteRequest=function(pe,Le,Ne){var Ge,et,pt,vt=l.browser.devicePixelRatio>1?"@2x":"",te=l.getJSON(Le.transformRequest(Le.normalizeSpriteURL(pe,vt,".json"),l.ResourceType.SpriteJSON),function(Oe,De){te=null,pt||(pt=Oe,Ge=De,we())}),ue=l.getImage(Le.transformRequest(Le.normalizeSpriteURL(pe,vt,".png"),l.ResourceType.SpriteImage),function(Oe,De){ue=null,pt||(pt=Oe,et=De,we())});function we(){if(pt)Ne(pt);else if(Ge&&et){var Oe=l.browser.getImageData(et),De={};for(var Ue in Ge){var We=Ge[Ue],Ke=We.width,it=We.height,lt=We.x,At=We.y,Ft=We.sdf,Bt=We.pixelRatio,Zt=We.stretchX,un=We.stretchY,Wt=We.content,en=new l.RGBAImage({width:Ke,height:it});l.RGBAImage.copy(Oe,en,{x:lt,y:At},{x:0,y:0},{width:Ke,height:it}),De[Ue]={data:en,pixelRatio:Bt,sdf:Ft,stretchX:Zt,stretchY:un,content:Wt}}Ne(null,De)}}return{cancel:function(){te&&(te.cancel(),te=null),ue&&(ue.cancel(),ue=null)}}}(q,this.map._requestManager,function(pe,Le){if(ne._spriteRequest=null,pe)ne.fire(new l.ErrorEvent(pe));else if(Le)for(var Ne in Le)ne.imageManager.addImage(Ne,Le[Ne]);ne.imageManager.setLoaded(!0),ne._availableImages=ne.imageManager.listImages(),ne.dispatcher.broadcast("setImages",ne._availableImages),ne.fire(new l.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(q){var ne=this.sourceCaches[q.source];if(ne){var pe=q.sourceLayer;if(pe){var Le=ne.getSource();(Le.type==="geojson"||Le.vectorLayerIds&&Le.vectorLayerIds.indexOf(pe)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+pe+'" does not exist on source "'+Le.id+'" as specified by style layer "'+q.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(q){for(var ne=[],pe=0,Le=q;pe<Le.length;pe+=1){var Ne=Le[pe],Ge=this._layers[Ne];Ge.type!=="custom"&&ne.push(Ge.serialize())}return ne},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var ne in this._layers)if(this._layers[ne].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function(q){if(this._loaded){var ne=this._changed;if(this._changed){var pe=Object.keys(this._updatedLayers),Le=Object.keys(this._removedLayers);for(var Ne in(pe.length||Le.length)&&this._updateWorkerLayers(pe,Le),this._updatedSources){var Ge=this._updatedSources[Ne];Ge==="reload"?this._reloadSource(Ne):Ge==="clear"&&this._clearSource(Ne)}for(var et in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[et].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}for(var pt in this.sourceCaches)this.sourceCaches[pt].used=!1;for(var vt=0,te=this._order;vt<te.length;vt+=1){var ue=te[vt],we=this._layers[ue];we.recalculate(q,this._availableImages),!we.isHidden(q.zoom)&&we.source&&(this.sourceCaches[we.source].used=!0)}this.light.recalculate(q),this.z=q.zoom,ne&&this.fire(new l.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var ne in this.sourceCaches)this.sourceCaches[ne].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(q,ne){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:ne})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function(q){var ne=this;if(this._checkLoaded(),Qn(this,l.validateStyle(q)))return!1;(q=l.clone$1(q)).layers=kt(q.layers);var pe=yn(this.serialize(),q).filter(function(Ne){return!(Ne.command in er)});if(pe.length===0)return!1;var Le=pe.filter(function(Ne){return!(Ne.command in rr)});if(Le.length>0)throw new Error("Unimplemented: "+Le.map(function(Ne){return Ne.command}).join(", ")+".");return pe.forEach(function(Ne){Ne.command!=="setTransition"&&ne[Ne.command].apply(ne,Ne.args)}),this.stylesheet=q,!0},Y.prototype.addImage=function(q,ne){if(this.getImage(q))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,ne),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},Y.prototype.updateImage=function(q,ne){this.imageManager.updateImage(q,ne)},Y.prototype.getImage=function(q){return this.imageManager.getImage(q)},Y.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(q,ne,pe){var Le=this;if(pe===void 0&&(pe={}),this._checkLoaded(),this.sourceCaches[q]!==void 0)throw new Error("There is already a source with this ID");if(!ne.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ne).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(ne.type)>=0&&this._validate(l.validateStyle.source,"sources."+q,ne,null,pe))){this.map&&this.map._collectResourceTiming&&(ne.collectResourceTiming=!0);var Ne=this.sourceCaches[q]=new Pe(q,ne,this.dispatcher);Ne.style=this,Ne.setEventedParent(this,function(){return{isSourceLoaded:Le.loaded(),source:Ne.serialize(),sourceId:q}}),Ne.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function(q){if(this._checkLoaded(),this.sourceCaches[q]===void 0)throw new Error("There is no source with this ID");for(var ne in this._layers)if(this._layers[ne].source===q)return this.fire(new l.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+ne+'" is using it.')));var pe=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],pe.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),pe.setEventedParent(null),pe.clearTiles(),pe.onRemove&&pe.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function(q,ne){this._checkLoaded(),this.sourceCaches[q].getSource().setData(ne),this._changed=!0},Y.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},Y.prototype.addLayer=function(q,ne,pe){pe===void 0&&(pe={}),this._checkLoaded();var Le=q.id;if(this.getLayer(Le))this.fire(new l.ErrorEvent(new Error('Layer with id "'+Le+'" already exists on this map')));else{var Ne;if(q.type==="custom"){if(Qn(this,l.validateCustomStyleLayer(q)))return;Ne=l.createStyleLayer(q)}else{if(typeof q.source=="object"&&(this.addSource(Le,q.source),q=l.clone$1(q),q=l.extend(q,{source:Le})),this._validate(l.validateStyle.layer,"layers."+Le,q,{arrayIndex:-1},pe))return;Ne=l.createStyleLayer(q),this._validateLayer(Ne),Ne.setEventedParent(this,{layer:{id:Le}}),this._serializedLayers[Ne.id]=Ne.serialize()}var Ge=ne?this._order.indexOf(ne):this._order.length;if(ne&&Ge===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+ne+'" does not exist on this map.')));else{if(this._order.splice(Ge,0,Le),this._layerOrderChanged=!0,this._layers[Le]=Ne,this._removedLayers[Le]&&Ne.source&&Ne.type!=="custom"){var et=this._removedLayers[Le];delete this._removedLayers[Le],et.type!==Ne.type?this._updatedSources[Ne.source]="clear":(this._updatedSources[Ne.source]="reload",this.sourceCaches[Ne.source].pause())}this._updateLayer(Ne),Ne.onAdd&&Ne.onAdd(this.map)}}},Y.prototype.moveLayer=function(q,ne){if(this._checkLoaded(),this._changed=!0,this._layers[q]){if(q!==ne){var pe=this._order.indexOf(q);this._order.splice(pe,1);var Le=ne?this._order.indexOf(ne):this._order.length;ne&&Le===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+ne+'" does not exist on this map.'))):(this._order.splice(Le,0,q),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")))},Y.prototype.removeLayer=function(q){this._checkLoaded();var ne=this._layers[q];if(ne){ne.setEventedParent(null);var pe=this._order.indexOf(q);this._order.splice(pe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=ne,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],ne.onRemove&&ne.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")))},Y.prototype.getLayer=function(q){return this._layers[q]},Y.prototype.hasLayer=function(q){return q in this._layers},Y.prototype.setLayerZoomRange=function(q,ne,pe){this._checkLoaded();var Le=this.getLayer(q);Le?Le.minzoom===ne&&Le.maxzoom===pe||(ne!=null&&(Le.minzoom=ne),pe!=null&&(Le.maxzoom=pe),this._updateLayer(Le)):this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")))},Y.prototype.setFilter=function(q,ne,pe){pe===void 0&&(pe={}),this._checkLoaded();var Le=this.getLayer(q);if(Le){if(!l.deepEqual(Le.filter,ne))return ne==null?(Le.filter=void 0,void this._updateLayer(Le)):void(this._validate(l.validateStyle.filter,"layers."+Le.id+".filter",ne,null,pe)||(Le.filter=l.clone$1(ne),this._updateLayer(Le)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")))},Y.prototype.getFilter=function(q){return l.clone$1(this.getLayer(q).filter)},Y.prototype.setLayoutProperty=function(q,ne,pe,Le){Le===void 0&&(Le={}),this._checkLoaded();var Ne=this.getLayer(q);Ne?l.deepEqual(Ne.getLayoutProperty(ne),pe)||(Ne.setLayoutProperty(ne,pe,Le),this._updateLayer(Ne)):this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getLayoutProperty=function(q,ne){var pe=this.getLayer(q);if(pe)return pe.getLayoutProperty(ne);this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")))},Y.prototype.setPaintProperty=function(q,ne,pe,Le){Le===void 0&&(Le={}),this._checkLoaded();var Ne=this.getLayer(q);Ne?l.deepEqual(Ne.getPaintProperty(ne),pe)||(Ne.setPaintProperty(ne,pe,Le)&&this._updateLayer(Ne),this._changed=!0,this._updatedPaintProps[q]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getPaintProperty=function(q,ne){return this.getLayer(q).getPaintProperty(ne)},Y.prototype.setFeatureState=function(q,ne){this._checkLoaded();var pe=q.source,Le=q.sourceLayer,Ne=this.sourceCaches[pe];if(Ne!==void 0){var Ge=Ne.getSource().type;Ge==="geojson"&&Le?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Ge!=="vector"||Le?(q.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Ne.setFeatureState(Le,q.id,ne)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+pe+"' does not exist in the map's style.")))},Y.prototype.removeFeatureState=function(q,ne){this._checkLoaded();var pe=q.source,Le=this.sourceCaches[pe];if(Le!==void 0){var Ne=Le.getSource().type,Ge=Ne==="vector"?q.sourceLayer:void 0;Ne!=="vector"||Ge?ne&&typeof q.id!="string"&&typeof q.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Le.removeFeatureState(Ge,q.id,ne):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+pe+"' does not exist in the map's style.")))},Y.prototype.getFeatureState=function(q){this._checkLoaded();var ne=q.source,pe=q.sourceLayer,Le=this.sourceCaches[ne];if(Le!==void 0){if(Le.getSource().type!=="vector"||pe)return q.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Le.getFeatureState(pe,q.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+ne+"' does not exist in the map's style.")))},Y.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return q!==void 0})},Y.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&this.sourceCaches[q.source].getSource().type!=="raster"&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(q){for(var ne=this,pe=function(Wt){return ne._layers[Wt].type==="fill-extrusion"},Le={},Ne=[],Ge=this._order.length-1;Ge>=0;Ge--){var et=this._order[Ge];if(pe(et)){Le[et]=Ge;for(var pt=0,vt=q;pt<vt.length;pt+=1){var te=vt[pt][et];if(te)for(var ue=0,we=te;ue<we.length;ue+=1){var Oe=we[ue];Ne.push(Oe)}}}}Ne.sort(function(Wt,en){return en.intersectionZ-Wt.intersectionZ});for(var De=[],Ue=this._order.length-1;Ue>=0;Ue--){var We=this._order[Ue];if(pe(We))for(var Ke=Ne.length-1;Ke>=0;Ke--){var it=Ne[Ke].feature;if(Le[it.layer.id]<Ue)break;De.push(it),Ne.pop()}else for(var lt=0,At=q;lt<At.length;lt+=1){var Ft=At[lt][We];if(Ft)for(var Bt=0,Zt=Ft;Bt<Zt.length;Bt+=1){var un=Zt[Bt];De.push(un.feature)}}}return De},Y.prototype.queryRenderedFeatures=function(q,ne,pe){ne&&ne.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",ne.filter,null,ne);var Le={};if(ne&&ne.layers){if(!Array.isArray(ne.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ne=0,Ge=ne.layers;Ne<Ge.length;Ne+=1){var et=Ge[Ne],pt=this._layers[et];if(!pt)return this.fire(new l.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot be queried for features."))),[];Le[pt.source]=!0}}var vt=[];for(var te in ne.availableImages=this._availableImages,this.sourceCaches)ne.layers&&!Le[te]||vt.push(V(this.sourceCaches[te],this._layers,this._serializedLayers,q,ne,pe));return this.placement&&vt.push(function(ue,we,Oe,De,Ue,We,Ke){for(var it={},lt=We.queryRenderedSymbols(De),At=[],Ft=0,Bt=Object.keys(lt).map(Number);Ft<Bt.length;Ft+=1){var Zt=Bt[Ft];At.push(Ke[Zt])}At.sort(W);for(var un=function(){var pn=en[Wt],Qt=pn.featureIndex.lookupSymbolFeatures(lt[pn.bucketInstanceId],we,pn.bucketIndex,pn.sourceLayerIndex,Ue.filter,Ue.layers,Ue.availableImages,ue);for(var Ln in Qt){var Rn=it[Ln]=it[Ln]||[],Xn=Qt[Ln];Xn.sort(function(sr,pr){var kr=pn.featureSortOrder;if(kr){var Vr=kr.indexOf(sr.featureIndex);return kr.indexOf(pr.featureIndex)-Vr}return pr.featureIndex-sr.featureIndex});for(var Jn=0,vr=Xn;Jn<vr.length;Jn+=1){var yr=vr[Jn];Rn.push(yr)}}},Wt=0,en=At;Wt<en.length;Wt+=1)un();var Jt=function(pn){it[pn].forEach(function(Qt){var Ln=Qt.feature,Rn=ue[pn],Xn=Oe[Rn.source].getFeatureState(Ln.layer["source-layer"],Ln.id);Ln.source=Ln.layer.source,Ln.layer["source-layer"]&&(Ln.sourceLayer=Ln.layer["source-layer"]),Ln.state=Xn})};for(var wn in it)Jt(wn);return it}(this._layers,this._serializedLayers,this.sourceCaches,q,ne,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(vt)},Y.prototype.querySourceFeatures=function(q,ne){ne&&ne.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",ne.filter,null,ne);var pe=this.sourceCaches[q];return pe?function(Le,Ne){for(var Ge=Le.getRenderableIds().map(function(we){return Le.getTileByID(we)}),et=[],pt={},vt=0;vt<Ge.length;vt++){var te=Ge[vt],ue=te.tileID.canonical.key;pt[ue]||(pt[ue]=!0,te.querySourceFeatures(et,Ne))}return et}(pe,ne):[]},Y.prototype.addSourceType=function(q,ne,pe){return Y.getSourceType(q)?pe(new Error('A source type called "'+q+'" already exists.')):(Y.setSourceType(q,ne),ne.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:q,url:ne.workerSourceURL},pe):pe(null,null))},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(q,ne){ne===void 0&&(ne={}),this._checkLoaded();var pe=this.light.getLight(),Le=!1;for(var Ne in q)if(!l.deepEqual(q[Ne],pe[Ne])){Le=!0;break}if(Le){var Ge={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,ne),this.light.updateTransitions(Ge)}},Y.prototype._validate=function(q,ne,pe,Le,Ne){return Ne===void 0&&(Ne={}),(!Ne||Ne.validate!==!1)&&Qn(this,q.call(l.validateStyle,l.extend({key:ne,style:this.serialize(),value:pe,styleSpec:l.styleSpec},Le)))},Y.prototype._remove=function(){for(var q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[q].setEventedParent(null);for(var ne in this.sourceCaches)this.sourceCaches[ne].clearTiles(),this.sourceCaches[ne].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},Y.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},Y.prototype._updateSources=function(q){for(var ne in this.sourceCaches)this.sourceCaches[ne].update(q)},Y.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},Y.prototype._updatePlacement=function(q,ne,pe,Le,Ne){Ne===void 0&&(Ne=!1);for(var Ge=!1,et=!1,pt={},vt=0,te=this._order;vt<te.length;vt+=1){var ue=te[vt],we=this._layers[ue];if(we.type==="symbol"){if(!pt[we.source]){var Oe=this.sourceCaches[we.source];pt[we.source]=Oe.getRenderableIds(!0).map(function(lt){return Oe.getTileByID(lt)}).sort(function(lt,At){return At.tileID.overscaledZ-lt.tileID.overscaledZ||(lt.tileID.isLessThan(At.tileID)?-1:1)})}var De=this.crossTileSymbolIndex.addLayer(we,pt[we.source],q.center.lng);Ge=Ge||De}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Ne=Ne||this._layerOrderChanged||pe===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),q.zoom))&&(this.pauseablePlacement=new nn(q,this._order,Ne,ne,pe,Le,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,pt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),et=!0),Ge&&this.pauseablePlacement.placement.setStale()),et||Ge)for(var Ue=0,We=this._order;Ue<We.length;Ue+=1){var Ke=We[Ue],it=this._layers[Ke];it.type==="symbol"&&this.placement.updateLayerOpacities(it,pt[it.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},Y.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},Y.prototype.getImages=function(q,ne,pe){this.imageManager.getImages(ne.icons,pe),this._updateTilesForChangedImages();var Le=this.sourceCaches[ne.source];Le&&Le.setDependencies(ne.tileID.key,ne.type,ne.icons)},Y.prototype.getGlyphs=function(q,ne,pe){this.glyphManager.getGlyphs(ne.stacks,pe)},Y.prototype.getResource=function(q,ne,pe){return l.makeRequest(ne,pe)},Y}(l.Evented);ir.getSourceType=function(D){return K[D]},ir.setSourceType=function(D,Y){K[D]=Y},ir.registerForPluginStateChange=l.registerForPluginStateChange;var gr=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),Tr=Qr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Ur=Qr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Sr=Qr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),lr=Qr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Lr=Qr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rr=Qr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),li=Qr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Mi=Qr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Pi=Qr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ea=Qr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ui=Qr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),vi=Qr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),La=Qr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),no=Qr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Zo=Qr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Wo=Qr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),ol=Qr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Hs=Qr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Yo=Qr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ta=Qr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),qs=Qr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),zi=Qr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),us=Qr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ma=Qr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),ka=Qr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),mo=Qr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Qr(D,Y){var q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,ne={};return{fragmentSource:D=D.replace(q,function(pe,Le,Ne,Ge,et){return ne[et]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+et+`
varying `+Ne+" "+Ge+" "+et+`;
#else
uniform `+Ne+" "+Ge+" u_"+et+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+et+`
    `+Ne+" "+Ge+" "+et+" = u_"+et+`;
#endif
`}),vertexSource:Y=Y.replace(q,function(pe,Le,Ne,Ge,et){var pt=Ge==="float"?"vec2":"vec4",vt=et.match(/color/)?"color":pt;return ne[et]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+et+`
uniform lowp float u_`+et+`_t;
attribute `+Ne+" "+pt+" a_"+et+`;
varying `+Ne+" "+Ge+" "+et+`;
#else
uniform `+Ne+" "+Ge+" u_"+et+`;
#endif
`:vt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+et+`
    `+et+" = a_"+et+`;
#else
    `+Ne+" "+Ge+" "+et+" = u_"+et+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+et+`
    `+et+" = unpack_mix_"+vt+"(a_"+et+", u_"+et+`_t);
#else
    `+Ne+" "+Ge+" "+et+" = u_"+et+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+et+`
uniform lowp float u_`+et+`_t;
attribute `+Ne+" "+pt+" a_"+et+`;
#else
uniform `+Ne+" "+Ge+" u_"+et+`;
#endif
`:vt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+et+`
    `+Ne+" "+Ge+" "+et+" = a_"+et+`;
#else
    `+Ne+" "+Ge+" "+et+" = u_"+et+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+et+`
    `+Ne+" "+Ge+" "+et+" = unpack_mix_"+vt+"(a_"+et+", u_"+et+`_t);
#else
    `+Ne+" "+Ge+" "+et+" = u_"+et+`;
#endif
`})}}var yo=Object.freeze({__proto__:null,prelude:Tr,background:Ur,backgroundPattern:Sr,circle:lr,clippingMask:Lr,heatmap:Rr,heatmapTexture:li,collisionBox:Mi,collisionCircle:Pi,debug:Ea,fill:Ui,fillOutline:vi,fillOutlinePattern:La,fillPattern:no,fillExtrusion:Zo,fillExtrusionPattern:Wo,hillshadePrepare:ol,hillshade:Hs,line:Yo,lineGradient:Ta,linePattern:qs,lineSDF:zi,raster:us,symbolIcon:ma,symbolSDF:ka,symbolTextAndIcon:mo}),Ca=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Ca.prototype.bind=function(D,Y,q,ne,pe,Le,Ne,Ge){this.context=D;for(var et=this.boundPaintVertexBuffers.length!==ne.length,pt=0;!et&&pt<ne.length;pt++)this.boundPaintVertexBuffers[pt]!==ne[pt]&&(et=!0);var vt=!this.vao||this.boundProgram!==Y||this.boundLayoutVertexBuffer!==q||et||this.boundIndexBuffer!==pe||this.boundVertexOffset!==Le||this.boundDynamicVertexBuffer!==Ne||this.boundDynamicVertexBuffer2!==Ge;!D.extVertexArrayObject||vt?this.freshBind(Y,q,ne,pe,Le,Ne,Ge):(D.bindVertexArrayOES.set(this.vao),Ne&&Ne.bind(),pe&&pe.dynamicDraw&&pe.bind(),Ge&&Ge.bind())},Ca.prototype.freshBind=function(D,Y,q,ne,pe,Le,Ne){var Ge,et=D.numAttributes,pt=this.context,vt=pt.gl;if(pt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=pt.extVertexArrayObject.createVertexArrayOES(),pt.bindVertexArrayOES.set(this.vao),Ge=0,this.boundProgram=D,this.boundLayoutVertexBuffer=Y,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=ne,this.boundVertexOffset=pe,this.boundDynamicVertexBuffer=Le,this.boundDynamicVertexBuffer2=Ne;else{Ge=pt.currentNumAttributes||0;for(var te=et;te<Ge;te++)vt.disableVertexAttribArray(te)}Y.enableAttributes(vt,D);for(var ue=0,we=q;ue<we.length;ue+=1)we[ue].enableAttributes(vt,D);Le&&Le.enableAttributes(vt,D),Ne&&Ne.enableAttributes(vt,D),Y.bind(),Y.setVertexAttribPointers(vt,D,pe);for(var Oe=0,De=q;Oe<De.length;Oe+=1){var Ue=De[Oe];Ue.bind(),Ue.setVertexAttribPointers(vt,D,pe)}Le&&(Le.bind(),Le.setVertexAttribPointers(vt,D,pe)),ne&&ne.bind(),Ne&&(Ne.bind(),Ne.setVertexAttribPointers(vt,D,pe)),pt.currentNumAttributes=et},Ca.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ua=function(D,Y,q,ne,pe){var Le=D.gl;this.program=Le.createProgram();var Ne=q?q.defines():[];pe&&Ne.push("#define OVERDRAW_INSPECTOR;");var Ge=Ne.concat(Tr.fragmentSource,Y.fragmentSource).join(`
`),et=Ne.concat(Tr.vertexSource,Y.vertexSource).join(`
`),pt=Le.createShader(Le.FRAGMENT_SHADER);if(Le.isContextLost())this.failedToCreate=!0;else{Le.shaderSource(pt,Ge),Le.compileShader(pt),Le.attachShader(this.program,pt);var vt=Le.createShader(Le.VERTEX_SHADER);if(Le.isContextLost())this.failedToCreate=!0;else{Le.shaderSource(vt,et),Le.compileShader(vt),Le.attachShader(this.program,vt);for(var te=q?q.layoutAttributes:[],ue=0;ue<te.length;ue++)Le.bindAttribLocation(this.program,ue,te[ue].name);Le.linkProgram(this.program),Le.deleteShader(vt),Le.deleteShader(pt),this.numAttributes=Le.getProgramParameter(this.program,Le.ACTIVE_ATTRIBUTES),this.attributes={};for(var we={},Oe=0;Oe<this.numAttributes;Oe++){var De=Le.getActiveAttrib(this.program,Oe);De&&(this.attributes[De.name]=Le.getAttribLocation(this.program,De.name))}for(var Ue=Le.getProgramParameter(this.program,Le.ACTIVE_UNIFORMS),We=0;We<Ue;We++){var Ke=Le.getActiveUniform(this.program,We);Ke&&(we[Ke.name]=Le.getUniformLocation(this.program,Ke.name))}this.fixedUniforms=ne(D,we),this.binderUniforms=q?q.getUniforms(D,we):[]}}};function Xa(D,Y,q){var ne=1/Vn(q,1,Y.transform.tileZoom),pe=Math.pow(2,q.tileID.overscaledZ),Le=q.tileSize*Math.pow(2,Y.transform.tileZoom)/pe,Ne=Le*(q.tileID.canonical.x+q.tileID.wrap*pe),Ge=Le*q.tileID.canonical.y;return{u_image:0,u_texsize:q.imageAtlasTexture.size,u_scale:[ne,D.fromScale,D.toScale],u_fade:D.t,u_pixel_coord_upper:[Ne>>16,Ge>>16],u_pixel_coord_lower:[65535&Ne,65535&Ge]}}Ua.prototype.draw=function(D,Y,q,ne,pe,Le,Ne,Ge,et,pt,vt,te,ue,we,Oe,De){var Ue,We=D.gl;if(!this.failedToCreate){for(var Ke in D.program.set(this.program),D.setDepthMode(q),D.setStencilMode(ne),D.setColorMode(pe),D.setCullFace(Le),this.fixedUniforms)this.fixedUniforms[Ke].set(Ne[Ke]);we&&we.setUniforms(D,this.binderUniforms,te,{zoom:ue});for(var it=(Ue={},Ue[We.LINES]=2,Ue[We.TRIANGLES]=3,Ue[We.LINE_STRIP]=1,Ue)[Y],lt=0,At=vt.get();lt<At.length;lt+=1){var Ft=At[lt],Bt=Ft.vaos||(Ft.vaos={});(Bt[Ge]||(Bt[Ge]=new Ca)).bind(D,this,et,we?we.getPaintVertexBuffers():[],pt,Ft.vertexOffset,Oe,De),We.drawElements(Y,Ft.primitiveLength*it,We.UNSIGNED_SHORT,Ft.primitiveOffset*it*2)}}};var cs=function(D,Y,q,ne){var pe=Y.style.light,Le=pe.properties.get("position"),Ne=[Le.x,Le.y,Le.z],Ge=l.create$1();pe.properties.get("anchor")==="viewport"&&l.fromRotation(Ge,-Y.transform.angle),l.transformMat3(Ne,Ne,Ge);var et=pe.properties.get("color");return{u_matrix:D,u_lightpos:Ne,u_lightintensity:pe.properties.get("intensity"),u_lightcolor:[et.r,et.g,et.b],u_vertical_gradient:+q,u_opacity:ne}},sl=function(D,Y,q,ne,pe,Le,Ne){return l.extend(cs(D,Y,q,ne),Xa(Le,Y,Ne),{u_height_factor:-Math.pow(2,pe.overscaledZ)/Ne.tileSize/8})},ro=function(D){return{u_matrix:D}},ll=function(D,Y,q,ne){return l.extend(ro(D),Xa(q,Y,ne))},ul=function(D,Y){return{u_matrix:D,u_world:Y}},yl=function(D,Y,q,ne,pe){return l.extend(ll(D,Y,q,ne),{u_world:pe})},Gs=function(D,Y,q,ne){var pe,Le,Ne=D.transform;if(ne.paint.get("circle-pitch-alignment")==="map"){var Ge=Vn(q,1,Ne.zoom);pe=!0,Le=[Ge,Ge]}else pe=!1,Le=Ne.pixelsToGLUnits;return{u_camera_to_center_distance:Ne.cameraToCenterDistance,u_scale_with_map:+(ne.paint.get("circle-pitch-scale")==="map"),u_matrix:D.translatePosMatrix(Y.posMatrix,q,ne.paint.get("circle-translate"),ne.paint.get("circle-translate-anchor")),u_pitch_with_map:+pe,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:Le}},cl=function(D,Y,q){var ne=Vn(q,1,Y.zoom),pe=Math.pow(2,Y.zoom-q.tileID.overscaledZ),Le=q.tileID.overscaleFactor();return{u_matrix:D,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:ne,u_extrude_scale:[Y.pixelsToGLUnits[0]/(ne*pe),Y.pixelsToGLUnits[1]/(ne*pe)],u_overscale_factor:Le}},Zs=function(D,Y,q){return{u_matrix:D,u_inv_matrix:Y,u_camera_to_center_distance:q.cameraToCenterDistance,u_viewport_size:[q.width,q.height]}},io=function(D,Y,q){return q===void 0&&(q=1),{u_matrix:D,u_color:Y,u_overlay:0,u_overlay_scale:q}},ao=function(D){return{u_matrix:D}},Xo=function(D,Y,q,ne){return{u_matrix:D,u_extrude_scale:Vn(Y,1,q),u_intensity:ne}},oo=function(D,Y,q){var ne=D.transform;return{u_matrix:xo(D,Y,q),u_ratio:1/Vn(Y,1,ne.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/ne.pixelsToGLUnits[0],1/ne.pixelsToGLUnits[1]]}},Ws=function(D,Y,q){return l.extend(oo(D,Y,q),{u_image:0})},Ys=function(D,Y,q,ne){var pe=D.transform,Le=Es(Y,pe);return{u_matrix:xo(D,Y,q),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/Vn(Y,1,pe.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[Le,ne.fromScale,ne.toScale],u_fade:ne.t,u_units_to_pixels:[1/pe.pixelsToGLUnits[0],1/pe.pixelsToGLUnits[1]]}},Oo=function(D,Y,q,ne,pe){var Le=D.transform,Ne=D.lineAtlas,Ge=Es(Y,Le),et=q.layout.get("line-cap")==="round",pt=Ne.getDash(ne.from,et),vt=Ne.getDash(ne.to,et),te=pt.width*pe.fromScale,ue=vt.width*pe.toScale;return l.extend(oo(D,Y,q),{u_patternscale_a:[Ge/te,-pt.height/2],u_patternscale_b:[Ge/ue,-vt.height/2],u_sdfgamma:Ne.width/(256*Math.min(te,ue)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:pt.y,u_tex_y_b:vt.y,u_mix:pe.t})};function Es(D,Y){return 1/Vn(D,1,Y.tileZoom)}function xo(D,Y,q){return D.translatePosMatrix(Y.tileID.posMatrix,Y,q.paint.get("line-translate"),q.paint.get("line-translate-anchor"))}var Jo=function(D,Y,q,ne,pe){return{u_matrix:D,u_tl_parent:Y,u_scale_parent:q,u_buffer_scale:1,u_fade_t:ne.mix,u_opacity:ne.opacity*pe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:pe.paint.get("raster-brightness-min"),u_brightness_high:pe.paint.get("raster-brightness-max"),u_saturation_factor:(Ne=pe.paint.get("raster-saturation"),Ne>0?1-1/(1.001-Ne):-Ne),u_contrast_factor:(Le=pe.paint.get("raster-contrast"),Le>0?1/(1-Le):1+Le),u_spin_weights:Io(pe.paint.get("raster-hue-rotate"))};var Le,Ne};function Io(D){D*=Math.PI/180;var Y=Math.sin(D),q=Math.cos(D);return[(2*q+1)/3,(-Math.sqrt(3)*Y-q+1)/3,(Math.sqrt(3)*Y-q+1)/3]}var so,ei=function(D,Y,q,ne,pe,Le,Ne,Ge,et,pt){var vt=pe.transform;return{u_is_size_zoom_constant:+(D==="constant"||D==="source"),u_is_size_feature_constant:+(D==="constant"||D==="camera"),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:vt.cameraToCenterDistance,u_pitch:vt.pitch/360*2*Math.PI,u_rotate_symbol:+q,u_aspect_ratio:vt.width/vt.height,u_fade_change:pe.options.fadeDuration?pe.symbolFadeChange:1,u_matrix:Le,u_label_plane_matrix:Ne,u_coord_matrix:Ge,u_is_text:+et,u_pitch_with_map:+ne,u_texsize:pt,u_texture:0}},bo=function(D,Y,q,ne,pe,Le,Ne,Ge,et,pt,vt){var te=pe.transform;return l.extend(ei(D,Y,q,ne,pe,Le,Ne,Ge,et,pt),{u_gamma_scale:ne?Math.cos(te._pitch)*te.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+vt})},xl=function(D,Y,q,ne,pe,Le,Ne,Ge,et,pt){return l.extend(bo(D,Y,q,ne,pe,Le,Ne,Ge,!0,et,!0),{u_texsize_icon:pt,u_texture_icon:1})},Ls=function(D,Y,q){return{u_matrix:D,u_opacity:Y,u_color:q}},fs=function(D,Y,q,ne,pe,Le){return l.extend(function(Ne,Ge,et,pt){var vt=et.imageManager.getPattern(Ne.from.toString()),te=et.imageManager.getPattern(Ne.to.toString()),ue=et.imageManager.getPixelSize(),we=ue.width,Oe=ue.height,De=Math.pow(2,pt.tileID.overscaledZ),Ue=pt.tileSize*Math.pow(2,et.transform.tileZoom)/De,We=Ue*(pt.tileID.canonical.x+pt.tileID.wrap*De),Ke=Ue*pt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:vt.tl,u_pattern_br_a:vt.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[we,Oe],u_mix:Ge.t,u_pattern_size_a:vt.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:Ge.fromScale,u_scale_b:Ge.toScale,u_tile_units_to_pixels:1/Vn(pt,1,et.transform.tileZoom),u_pixel_coord_upper:[We>>16,Ke>>16],u_pixel_coord_lower:[65535&We,65535&Ke]}}(ne,Le,q,pe),{u_matrix:D,u_opacity:Y})},Ro={fillExtrusion:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_lightpos:new l.Uniform3f(D,Y.u_lightpos),u_lightintensity:new l.Uniform1f(D,Y.u_lightintensity),u_lightcolor:new l.Uniform3f(D,Y.u_lightcolor),u_vertical_gradient:new l.Uniform1f(D,Y.u_vertical_gradient),u_opacity:new l.Uniform1f(D,Y.u_opacity)}},fillExtrusionPattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_lightpos:new l.Uniform3f(D,Y.u_lightpos),u_lightintensity:new l.Uniform1f(D,Y.u_lightintensity),u_lightcolor:new l.Uniform3f(D,Y.u_lightcolor),u_vertical_gradient:new l.Uniform1f(D,Y.u_vertical_gradient),u_height_factor:new l.Uniform1f(D,Y.u_height_factor),u_image:new l.Uniform1i(D,Y.u_image),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade),u_opacity:new l.Uniform1f(D,Y.u_opacity)}},fill:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},fillPattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_image:new l.Uniform1i(D,Y.u_image),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade)}},fillOutline:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_world:new l.Uniform2f(D,Y.u_world)}},fillOutlinePattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_world:new l.Uniform2f(D,Y.u_world),u_image:new l.Uniform1i(D,Y.u_image),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade)}},circle:function(D,Y){return{u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(D,Y.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(D,Y.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},collisionBox:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(D,Y.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(D,Y.u_extrude_scale),u_overscale_factor:new l.Uniform1f(D,Y.u_overscale_factor)}},collisionCircle:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_inv_matrix:new l.UniformMatrix4f(D,Y.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(D,Y.u_viewport_size)}},debug:function(D,Y){return{u_color:new l.UniformColor(D,Y.u_color),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_overlay:new l.Uniform1i(D,Y.u_overlay),u_overlay_scale:new l.Uniform1f(D,Y.u_overlay_scale)}},clippingMask:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},heatmap:function(D,Y){return{u_extrude_scale:new l.Uniform1f(D,Y.u_extrude_scale),u_intensity:new l.Uniform1f(D,Y.u_intensity),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},heatmapTexture:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_world:new l.Uniform2f(D,Y.u_world),u_image:new l.Uniform1i(D,Y.u_image),u_color_ramp:new l.Uniform1i(D,Y.u_color_ramp),u_opacity:new l.Uniform1f(D,Y.u_opacity)}},hillshade:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_image:new l.Uniform1i(D,Y.u_image),u_latrange:new l.Uniform2f(D,Y.u_latrange),u_light:new l.Uniform2f(D,Y.u_light),u_shadow:new l.UniformColor(D,Y.u_shadow),u_highlight:new l.UniformColor(D,Y.u_highlight),u_accent:new l.UniformColor(D,Y.u_accent)}},hillshadePrepare:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_image:new l.Uniform1i(D,Y.u_image),u_dimension:new l.Uniform2f(D,Y.u_dimension),u_zoom:new l.Uniform1f(D,Y.u_zoom),u_maxzoom:new l.Uniform1f(D,Y.u_maxzoom),u_unpack:new l.Uniform4f(D,Y.u_unpack)}},line:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels)}},lineGradient:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels),u_image:new l.Uniform1i(D,Y.u_image)}},linePattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_image:new l.Uniform1i(D,Y.u_image),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade)}},lineSDF:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(D,Y.u_patternscale_a),u_patternscale_b:new l.Uniform2f(D,Y.u_patternscale_b),u_sdfgamma:new l.Uniform1f(D,Y.u_sdfgamma),u_image:new l.Uniform1i(D,Y.u_image),u_tex_y_a:new l.Uniform1f(D,Y.u_tex_y_a),u_tex_y_b:new l.Uniform1f(D,Y.u_tex_y_b),u_mix:new l.Uniform1f(D,Y.u_mix)}},raster:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_tl_parent:new l.Uniform2f(D,Y.u_tl_parent),u_scale_parent:new l.Uniform1f(D,Y.u_scale_parent),u_buffer_scale:new l.Uniform1f(D,Y.u_buffer_scale),u_fade_t:new l.Uniform1f(D,Y.u_fade_t),u_opacity:new l.Uniform1f(D,Y.u_opacity),u_image0:new l.Uniform1i(D,Y.u_image0),u_image1:new l.Uniform1i(D,Y.u_image1),u_brightness_low:new l.Uniform1f(D,Y.u_brightness_low),u_brightness_high:new l.Uniform1f(D,Y.u_brightness_high),u_saturation_factor:new l.Uniform1f(D,Y.u_saturation_factor),u_contrast_factor:new l.Uniform1f(D,Y.u_contrast_factor),u_spin_weights:new l.Uniform3f(D,Y.u_spin_weights)}},symbolIcon:function(D,Y){return{u_is_size_zoom_constant:new l.Uniform1i(D,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(D,Y.u_is_size_feature_constant),u_size_t:new l.Uniform1f(D,Y.u_size_t),u_size:new l.Uniform1f(D,Y.u_size),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pitch:new l.Uniform1f(D,Y.u_pitch),u_rotate_symbol:new l.Uniform1i(D,Y.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(D,Y.u_aspect_ratio),u_fade_change:new l.Uniform1f(D,Y.u_fade_change),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(D,Y.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(D,Y.u_coord_matrix),u_is_text:new l.Uniform1i(D,Y.u_is_text),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_texture:new l.Uniform1i(D,Y.u_texture)}},symbolSDF:function(D,Y){return{u_is_size_zoom_constant:new l.Uniform1i(D,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(D,Y.u_is_size_feature_constant),u_size_t:new l.Uniform1f(D,Y.u_size_t),u_size:new l.Uniform1f(D,Y.u_size),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pitch:new l.Uniform1f(D,Y.u_pitch),u_rotate_symbol:new l.Uniform1i(D,Y.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(D,Y.u_aspect_ratio),u_fade_change:new l.Uniform1f(D,Y.u_fade_change),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(D,Y.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(D,Y.u_coord_matrix),u_is_text:new l.Uniform1i(D,Y.u_is_text),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_texture:new l.Uniform1i(D,Y.u_texture),u_gamma_scale:new l.Uniform1f(D,Y.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(D,Y.u_is_halo)}},symbolTextAndIcon:function(D,Y){return{u_is_size_zoom_constant:new l.Uniform1i(D,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(D,Y.u_is_size_feature_constant),u_size_t:new l.Uniform1f(D,Y.u_size_t),u_size:new l.Uniform1f(D,Y.u_size),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pitch:new l.Uniform1f(D,Y.u_pitch),u_rotate_symbol:new l.Uniform1i(D,Y.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(D,Y.u_aspect_ratio),u_fade_change:new l.Uniform1f(D,Y.u_fade_change),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(D,Y.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(D,Y.u_coord_matrix),u_is_text:new l.Uniform1i(D,Y.u_is_text),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_texsize_icon:new l.Uniform2f(D,Y.u_texsize_icon),u_texture:new l.Uniform1i(D,Y.u_texture),u_texture_icon:new l.Uniform1i(D,Y.u_texture_icon),u_gamma_scale:new l.Uniform1f(D,Y.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(D,Y.u_is_halo)}},background:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_opacity:new l.Uniform1f(D,Y.u_opacity),u_color:new l.UniformColor(D,Y.u_color)}},backgroundPattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_opacity:new l.Uniform1f(D,Y.u_opacity),u_image:new l.Uniform1i(D,Y.u_image),u_pattern_tl_a:new l.Uniform2f(D,Y.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(D,Y.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(D,Y.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(D,Y.u_pattern_br_b),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_mix:new l.Uniform1f(D,Y.u_mix),u_pattern_size_a:new l.Uniform2f(D,Y.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(D,Y.u_pattern_size_b),u_scale_a:new l.Uniform1f(D,Y.u_scale_a),u_scale_b:new l.Uniform1f(D,Y.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(D,Y.u_tile_units_to_pixels)}}};function Ko(D,Y,q,ne,pe,Le,Ne){for(var Ge=D.context,et=Ge.gl,pt=D.useProgram("collisionBox"),vt=[],te=0,ue=0,we=0;we<ne.length;we++){var Oe=ne[we],De=Y.getTile(Oe),Ue=De.getBucket(q);if(Ue){var We=Oe.posMatrix;pe[0]===0&&pe[1]===0||(We=D.translatePosMatrix(Oe.posMatrix,De,pe,Le));var Ke=Ne?Ue.textCollisionBox:Ue.iconCollisionBox,it=Ue.collisionCircleArray;if(it.length>0){var lt=l.create(),At=We;l.mul(lt,Ue.placementInvProjMatrix,D.transform.glCoordMatrix),l.mul(lt,lt,Ue.placementViewportMatrix),vt.push({circleArray:it,circleOffset:ue,transform:At,invTransform:lt}),ue=te+=it.length/4}Ke&&pt.draw(Ge,et.LINES,Ut.disabled,Ze.disabled,D.colorModeForRenderPass(),Be.disabled,cl(We,D.transform,De),q.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,D.transform.zoom,null,null,Ke.collisionVertexBuffer)}}if(Ne&&vt.length){var Ft=D.useProgram("collisionCircle"),Bt=new l.StructArrayLayout2f1f2i16;Bt.resize(4*te),Bt._trim();for(var Zt=0,un=0,Wt=vt;un<Wt.length;un+=1)for(var en=Wt[un],Jt=0;Jt<en.circleArray.length/4;Jt++){var wn=4*Jt,pn=en.circleArray[wn+0],Qt=en.circleArray[wn+1],Ln=en.circleArray[wn+2],Rn=en.circleArray[wn+3];Bt.emplace(Zt++,pn,Qt,Ln,Rn,0),Bt.emplace(Zt++,pn,Qt,Ln,Rn,1),Bt.emplace(Zt++,pn,Qt,Ln,Rn,2),Bt.emplace(Zt++,pn,Qt,Ln,Rn,3)}(!so||so.length<2*te)&&(so=function(kr){var Vr=2*kr,Hr=new l.StructArrayLayout3ui6;Hr.resize(Vr),Hr._trim();for(var fr=0;fr<Vr;fr++){var Ar=6*fr;Hr.uint16[Ar+0]=4*fr+0,Hr.uint16[Ar+1]=4*fr+1,Hr.uint16[Ar+2]=4*fr+2,Hr.uint16[Ar+3]=4*fr+2,Hr.uint16[Ar+4]=4*fr+3,Hr.uint16[Ar+5]=4*fr+0}return Hr}(te));for(var Xn=Ge.createIndexBuffer(so,!0),Jn=Ge.createVertexBuffer(Bt,l.collisionCircleLayout.members,!0),vr=0,yr=vt;vr<yr.length;vr+=1){var sr=yr[vr],pr=Zs(sr.transform,sr.invTransform,D.transform);Ft.draw(Ge,et.TRIANGLES,Ut.disabled,Ze.disabled,D.colorModeForRenderPass(),Be.disabled,pr,q.id,Jn,Xn,l.SegmentVector.simpleSegment(0,2*sr.circleOffset,sr.circleArray.length,sr.circleArray.length/2),null,D.transform.zoom,null,null,null)}Jn.destroy(),Xn.destroy()}}var Pa=l.identity(new Float32Array(16));function Xs(D,Y,q,ne,pe,Le){var Ne=l.getAnchorAlignment(D),Ge=-(Ne.horizontalAlign-.5)*Y,et=-(Ne.verticalAlign-.5)*q,pt=l.evaluateVariableOffset(D,ne);return new l.Point((Ge/pe+pt[0])*Le,(et/pe+pt[1])*Le)}function hs(D,Y,q,ne,pe,Le,Ne,Ge,et,pt,vt){var te=D.text.placedSymbolArray,ue=D.text.dynamicLayoutVertexArray,we=D.icon.dynamicLayoutVertexArray,Oe={};ue.clear();for(var De=0;De<te.length;De++){var Ue=te.get(De),We=D.allowVerticalPlacement&&!Ue.placedOrientation,Ke=Ue.hidden||!Ue.crossTileID||We?null:ne[Ue.crossTileID];if(Ke){var it=new l.Point(Ue.anchorX,Ue.anchorY),lt=dn(it,q?Ge:Ne),At=gn(Le.cameraToCenterDistance,lt.signedDistanceFromCamera),Ft=pe.evaluateSizeForFeature(D.textSizeData,pt,Ue)*At/l.ONE_EM;q&&(Ft*=D.tilePixelRatio/et);for(var Bt=Ke.width,Zt=Ke.height,un=Xs(Ke.anchor,Bt,Zt,Ke.textOffset,Ke.textBoxScale,Ft),Wt=q?dn(it.add(un),Ne).point:lt.point.add(Y?un.rotate(-Le.angle):un),en=D.allowVerticalPlacement&&Ue.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,Jt=0;Jt<Ue.numGlyphs;Jt++)l.addDynamicAttributes(ue,Wt,en);vt&&Ue.associatedIconIndex>=0&&(Oe[Ue.associatedIconIndex]={shiftedAnchor:Wt,angle:en})}else $n(Ue.numGlyphs,ue)}if(vt){we.clear();for(var wn=D.icon.placedSymbolArray,pn=0;pn<wn.length;pn++){var Qt=wn.get(pn);if(Qt.hidden)$n(Qt.numGlyphs,we);else{var Ln=Oe[pn];if(Ln)for(var Rn=0;Rn<Qt.numGlyphs;Rn++)l.addDynamicAttributes(we,Ln.shiftedAnchor,Ln.angle);else $n(Qt.numGlyphs,we)}}D.icon.dynamicLayoutVertexBuffer.updateData(we)}D.text.dynamicLayoutVertexBuffer.updateData(ue)}function $o(D,Y,q){return q.iconsInText&&Y?"symbolTextAndIcon":D?"symbolSDF":"symbolIcon"}function ps(D,Y,q,ne,pe,Le,Ne,Ge,et,pt,vt,te){for(var ue=D.context,we=ue.gl,Oe=D.transform,De=Ge==="map",Ue=et==="map",We=De&&q.layout.get("symbol-placement")!=="point",Ke=De&&!Ue&&!We,it=q.layout.get("symbol-sort-key").constantOr(1)!==void 0,lt=D.depthModeForSublayer(0,Ut.ReadOnly),At=q.layout.get("text-variable-anchor"),Ft=[],Bt=0,Zt=ne;Bt<Zt.length;Bt+=1){var un=Zt[Bt],Wt=Y.getTile(un),en=Wt.getBucket(q);if(en){var Jt=pe?en.text:en.icon;if(Jt&&Jt.segments.get().length){var wn=Jt.programConfigurations.get(q.id),pn=pe||en.sdfIcons,Qt=pe?en.textSizeData:en.iconSizeData,Ln=Ue||Oe.pitch!==0,Rn=D.useProgram($o(pn,pe,en),wn),Xn=l.evaluateSizeForZoom(Qt,Oe.zoom),Jn=void 0,vr=[0,0],yr=void 0,sr=void 0,pr=null,kr=void 0;if(pe){if(yr=Wt.glyphAtlasTexture,sr=we.LINEAR,Jn=Wt.glyphAtlasTexture.size,en.iconsInText){vr=Wt.imageAtlasTexture.size,pr=Wt.imageAtlasTexture;var Vr=Qt.kind==="composite"||Qt.kind==="camera";kr=Ln||D.options.rotating||D.options.zooming||Vr?we.LINEAR:we.NEAREST}}else{var Hr=q.layout.get("icon-size").constantOr(0)!==1||en.iconsNeedLinear;yr=Wt.imageAtlasTexture,sr=pn||D.options.rotating||D.options.zooming||Hr||Ln?we.LINEAR:we.NEAREST,Jn=Wt.imageAtlasTexture.size}var fr=Vn(Wt,1,D.transform.zoom),Ar=Un(un.posMatrix,Ue,De,D.transform,fr),Dr=xn(un.posMatrix,Ue,De,D.transform,fr),zr=At&&en.hasTextData(),Wr=q.layout.get("icon-text-fit")!=="none"&&zr&&en.hasIconData();We&&sn(en,un.posMatrix,D,pe,Ar,Dr,Ue,pt);var Zr=D.translatePosMatrix(un.posMatrix,Wt,Le,Ne),$r=We||pe&&At||Wr?Pa:Ar,ui=D.translatePosMatrix(Dr,Wt,Le,Ne,!0),yi=pn&&q.paint.get(pe?"text-halo-width":"icon-halo-width").constantOr(1)!==0,hi={program:Rn,buffers:Jt,uniformValues:pn?en.iconsInText?xl(Qt.kind,Xn,Ke,Ue,D,Zr,$r,ui,Jn,vr):bo(Qt.kind,Xn,Ke,Ue,D,Zr,$r,ui,pe,Jn,!0):ei(Qt.kind,Xn,Ke,Ue,D,Zr,$r,ui,pe,Jn),atlasTexture:yr,atlasTextureIcon:pr,atlasInterpolation:sr,atlasInterpolationIcon:kr,isSDF:pn,hasHalo:yi};if(it)for(var si=0,ci=Jt.segments.get();si<ci.length;si+=1){var pi=ci[si];Ft.push({segments:new l.SegmentVector([pi]),sortKey:pi.sortKey,state:hi})}else Ft.push({segments:Jt.segments,sortKey:0,state:hi})}}}it&&Ft.sort(function(Qi,ki){return Qi.sortKey-ki.sortKey});for(var Si=0,So=Ft;Si<So.length;Si+=1){var Fi=So[Si],Br=Fi.state;if(ue.activeTexture.set(we.TEXTURE0),Br.atlasTexture.bind(Br.atlasInterpolation,we.CLAMP_TO_EDGE),Br.atlasTextureIcon&&(ue.activeTexture.set(we.TEXTURE1),Br.atlasTextureIcon&&Br.atlasTextureIcon.bind(Br.atlasInterpolationIcon,we.CLAMP_TO_EDGE)),Br.isSDF){var Gi=Br.uniformValues;Br.hasHalo&&(Gi.u_is_halo=1,zo(Br.buffers,Fi.segments,q,D,Br.program,lt,vt,te,Gi)),Gi.u_is_halo=0}zo(Br.buffers,Fi.segments,q,D,Br.program,lt,vt,te,Br.uniformValues)}}function zo(D,Y,q,ne,pe,Le,Ne,Ge,et){var pt=ne.context,vt=pt.gl;pe.draw(pt,vt.TRIANGLES,Le,Ne,Ge,Be.disabled,et,q.id,D.layoutVertexBuffer,D.indexBuffer,Y,q.paint,ne.transform.zoom,D.programConfigurations.get(q.id),D.dynamicLayoutVertexBuffer,D.opacityVertexBuffer)}function Do(D,Y,q,ne,pe,Le,Ne){var Ge,et,pt,vt,te,ue=D.context.gl,we=q.paint.get("fill-pattern"),Oe=we&&we.constantOr(1),De=q.getCrossfadeParameters();Ne?(et=Oe&&!q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ge=ue.LINES):(et=Oe?"fillPattern":"fill",Ge=ue.TRIANGLES);for(var Ue=0,We=ne;Ue<We.length;Ue+=1){var Ke=We[Ue],it=Y.getTile(Ke);if(!Oe||it.patternsLoaded()){var lt=it.getBucket(q);if(lt){var At=lt.programConfigurations.get(q.id),Ft=D.useProgram(et,At);Oe&&(D.context.activeTexture.set(ue.TEXTURE0),it.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),At.updatePaintBuffers(De));var Bt=we.constantOr(null);if(Bt&&it.imageAtlas){var Zt=it.imageAtlas,un=Zt.patternPositions[Bt.to.toString()],Wt=Zt.patternPositions[Bt.from.toString()];un&&Wt&&At.setConstantPatternPositions(un,Wt)}var en=D.translatePosMatrix(Ke.posMatrix,it,q.paint.get("fill-translate"),q.paint.get("fill-translate-anchor"));if(Ne){vt=lt.indexBuffer2,te=lt.segments2;var Jt=[ue.drawingBufferWidth,ue.drawingBufferHeight];pt=et==="fillOutlinePattern"&&Oe?yl(en,D,De,it,Jt):ul(en,Jt)}else vt=lt.indexBuffer,te=lt.segments,pt=Oe?ll(en,D,De,it):ro(en);Ft.draw(D.context,Ge,pe,D.stencilModeForClipping(Ke),Le,Be.disabled,pt,q.id,lt.layoutVertexBuffer,vt,te,q.paint,D.transform.zoom,At)}}}}function Qo(D,Y,q,ne,pe,Le,Ne){for(var Ge=D.context,et=Ge.gl,pt=q.paint.get("fill-extrusion-pattern"),vt=pt.constantOr(1),te=q.getCrossfadeParameters(),ue=q.paint.get("fill-extrusion-opacity"),we=0,Oe=ne;we<Oe.length;we+=1){var De=Oe[we],Ue=Y.getTile(De),We=Ue.getBucket(q);if(We){var Ke=We.programConfigurations.get(q.id),it=D.useProgram(vt?"fillExtrusionPattern":"fillExtrusion",Ke);vt&&(D.context.activeTexture.set(et.TEXTURE0),Ue.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),Ke.updatePaintBuffers(te));var lt=pt.constantOr(null);if(lt&&Ue.imageAtlas){var At=Ue.imageAtlas,Ft=At.patternPositions[lt.to.toString()],Bt=At.patternPositions[lt.from.toString()];Ft&&Bt&&Ke.setConstantPatternPositions(Ft,Bt)}var Zt=D.translatePosMatrix(De.posMatrix,Ue,q.paint.get("fill-extrusion-translate"),q.paint.get("fill-extrusion-translate-anchor")),un=q.paint.get("fill-extrusion-vertical-gradient"),Wt=vt?sl(Zt,D,un,ue,De,te,Ue):cs(Zt,D,un,ue);it.draw(Ge,Ge.gl.TRIANGLES,pe,Le,Ne,Be.backCCW,Wt,q.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,q.paint,D.transform.zoom,Ke)}}}function ds(D,Y,q,ne,pe,Le){var Ne=D.context,Ge=Ne.gl,et=Y.fbo;if(et){var pt=D.useProgram("hillshade");Ne.activeTexture.set(Ge.TEXTURE0),Ge.bindTexture(Ge.TEXTURE_2D,et.colorAttachment.get());var vt=function(te,ue,we){var Oe=we.paint.get("hillshade-shadow-color"),De=we.paint.get("hillshade-highlight-color"),Ue=we.paint.get("hillshade-accent-color"),We=we.paint.get("hillshade-illumination-direction")*(Math.PI/180);we.paint.get("hillshade-illumination-anchor")==="viewport"&&(We-=te.transform.angle);var Ke,it,lt,At=!te.options.moving;return{u_matrix:te.transform.calculatePosMatrix(ue.tileID.toUnwrapped(),At),u_image:0,u_latrange:(Ke=ue.tileID,it=Math.pow(2,Ke.canonical.z),lt=Ke.canonical.y,[new l.MercatorCoordinate(0,lt/it).toLngLat().lat,new l.MercatorCoordinate(0,(lt+1)/it).toLngLat().lat]),u_light:[we.paint.get("hillshade-exaggeration"),We],u_shadow:Oe,u_highlight:De,u_accent:Ue}}(D,Y,q);pt.draw(Ne,Ge.TRIANGLES,ne,pe,Le,Be.disabled,vt,q.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}}function gs(D,Y,q,ne,pe,Le,Ne){var Ge=D.context,et=Ge.gl,pt=Y.dem;if(pt&&pt.data){var vt=pt.dim,te=pt.stride,ue=pt.getPixels();if(Ge.activeTexture.set(et.TEXTURE1),Ge.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||D.getTileTexture(te),Y.demTexture){var we=Y.demTexture;we.update(ue,{premultiply:!1}),we.bind(et.NEAREST,et.CLAMP_TO_EDGE)}else Y.demTexture=new l.Texture(Ge,ue,et.RGBA,{premultiply:!1}),Y.demTexture.bind(et.NEAREST,et.CLAMP_TO_EDGE);Ge.activeTexture.set(et.TEXTURE0);var Oe=Y.fbo;if(!Oe){var De=new l.Texture(Ge,{width:vt,height:vt,data:null},et.RGBA);De.bind(et.LINEAR,et.CLAMP_TO_EDGE),(Oe=Y.fbo=Ge.createFramebuffer(vt,vt,!0)).colorAttachment.set(De.texture)}Ge.bindFramebuffer.set(Oe.framebuffer),Ge.viewport.set([0,0,vt,vt]),D.useProgram("hillshadePrepare").draw(Ge,et.TRIANGLES,pe,Le,Ne,Be.disabled,function(Ue,We,Ke){var it=We.stride,lt=l.create();return l.ortho(lt,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(lt,lt,[0,-l.EXTENT,0]),{u_matrix:lt,u_image:1,u_dimension:[it,it],u_zoom:Ue.overscaledZ,u_maxzoom:Ke,u_unpack:We.getUnpackVector()}}(Y.tileID,pt,ne),q.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function Oa(D,Y,q,ne,pe){var Le=ne.paint.get("raster-fade-duration");if(Le>0){var Ne=l.browser.now(),Ge=(Ne-D.timeAdded)/Le,et=Y?(Ne-Y.timeAdded)/Le:-1,pt=q.getSource(),vt=pe.coveringZoomLevel({tileSize:pt.tileSize,roundZoom:pt.roundZoom}),te=!Y||Math.abs(Y.tileID.overscaledZ-vt)>Math.abs(D.tileID.overscaledZ-vt),ue=te&&D.refreshedUponExpiration?1:l.clamp(te?Ge:1-et,0,1);return D.refreshedUponExpiration&&Ge>=1&&(D.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-ue}:{opacity:ue,mix:0}}return{opacity:1,mix:0}}var vs=new l.Color(1,0,0,1),ms=new l.Color(0,1,0,1),Js=new l.Color(0,0,1,1),_o=new l.Color(1,0,1,1),Cs=new l.Color(0,1,1,1);function ys(D){var Y=D.transform.padding;Ks(D,D.transform.height-(Y.top||0),3,vs),Ks(D,Y.bottom||0,3,ms),xs(D,Y.left||0,3,Js),xs(D,D.transform.width-(Y.right||0),3,_o);var q=D.transform.centerPoint;(function(ne,pe,Le,Ne){var Ge=20,et=2;es(ne,pe-et/2,Le-Ge/2,et,Ge,Ne),es(ne,pe-Ge/2,Le-et/2,Ge,et,Ne)})(D,q.x,D.transform.height-q.y,Cs)}function Ks(D,Y,q,ne){es(D,0,Y+q/2,D.transform.width,q,ne)}function xs(D,Y,q,ne){es(D,Y-q/2,0,q,D.transform.height,ne)}function es(D,Y,q,ne,pe,Le){var Ne=D.context,Ge=Ne.gl;Ge.enable(Ge.SCISSOR_TEST),Ge.scissor(Y*l.browser.devicePixelRatio,q*l.browser.devicePixelRatio,ne*l.browser.devicePixelRatio,pe*l.browser.devicePixelRatio),Ne.clear({color:Le}),Ge.disable(Ge.SCISSOR_TEST)}function Fo(D,Y,q){var ne=D.context,pe=ne.gl,Le=q.posMatrix,Ne=D.useProgram("debug"),Ge=Ut.disabled,et=Ze.disabled,pt=D.colorModeForRenderPass(),vt="$debug";ne.activeTexture.set(pe.TEXTURE0),D.emptyTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Ne.draw(ne,pe.LINE_STRIP,Ge,et,pt,Be.disabled,io(Le,l.Color.red),vt,D.debugBuffer,D.tileBorderIndexBuffer,D.debugSegments);var te=Y.getTileByID(q.key).latestRawTileData,ue=te&&te.byteLength||0,we=Math.floor(ue/1024),Oe=Y.getTile(q).tileSize,De=512/Math.min(Oe,512)*(q.overscaledZ/D.transform.zoom)*.5,Ue=q.canonical.toString();q.overscaledZ!==q.canonical.z&&(Ue+=" => "+q.overscaledZ),function(We,Ke){We.initDebugOverlayCanvas();var it=We.debugOverlayCanvas,lt=We.context.gl,At=We.debugOverlayCanvas.getContext("2d");At.clearRect(0,0,it.width,it.height),At.shadowColor="white",At.shadowBlur=2,At.lineWidth=1.5,At.strokeStyle="white",At.textBaseline="top",At.font="bold 36px Open Sans, sans-serif",At.fillText(Ke,5,5),At.strokeText(Ke,5,5),We.debugOverlayTexture.update(it),We.debugOverlayTexture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE)}(D,Ue+" "+we+"kb"),Ne.draw(ne,pe.TRIANGLES,Ge,et,Ye.alphaBlended,Be.disabled,io(Le,l.Color.transparent,De),vt,D.debugBuffer,D.quadTriangleIndexBuffer,D.debugSegments)}var Bo={symbol:function(D,Y,q,ne,pe){if(D.renderPass==="translucent"){var Le=Ze.disabled,Ne=D.colorModeForRenderPass();q.layout.get("text-variable-anchor")&&function(Ge,et,pt,vt,te,ue,we){for(var Oe=et.transform,De=te==="map",Ue=ue==="map",We=0,Ke=Ge;We<Ke.length;We+=1){var it=Ke[We],lt=vt.getTile(it),At=lt.getBucket(pt);if(At&&At.text&&At.text.segments.get().length){var Ft=At.textSizeData,Bt=l.evaluateSizeForZoom(Ft,Oe.zoom),Zt=Vn(lt,1,et.transform.zoom),un=Un(it.posMatrix,Ue,De,et.transform,Zt),Wt=pt.layout.get("icon-text-fit")!=="none"&&At.hasIconData();if(Bt){var en=Math.pow(2,Oe.zoom-lt.tileID.overscaledZ);hs(At,De,Ue,we,l.symbolSize,Oe,un,it.posMatrix,en,Bt,Wt)}}}}(ne,D,q,Y,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),pe),q.paint.get("icon-opacity").constantOr(1)!==0&&ps(D,Y,q,ne,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),Le,Ne),q.paint.get("text-opacity").constantOr(1)!==0&&ps(D,Y,q,ne,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),Le,Ne),Y.map.showCollisionBoxes&&(Ko(D,Y,q,ne,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),!0),Ko(D,Y,q,ne,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),!1))}},circle:function(D,Y,q,ne){if(D.renderPass==="translucent"){var pe=q.paint.get("circle-opacity"),Le=q.paint.get("circle-stroke-width"),Ne=q.paint.get("circle-stroke-opacity"),Ge=q.layout.get("circle-sort-key").constantOr(1)!==void 0;if(pe.constantOr(1)!==0||Le.constantOr(1)!==0&&Ne.constantOr(1)!==0){for(var et=D.context,pt=et.gl,vt=D.depthModeForSublayer(0,Ut.ReadOnly),te=Ze.disabled,ue=D.colorModeForRenderPass(),we=[],Oe=0;Oe<ne.length;Oe++){var De=ne[Oe],Ue=Y.getTile(De),We=Ue.getBucket(q);if(We){var Ke=We.programConfigurations.get(q.id),it={programConfiguration:Ke,program:D.useProgram("circle",Ke),layoutVertexBuffer:We.layoutVertexBuffer,indexBuffer:We.indexBuffer,uniformValues:Gs(D,De,Ue,q)};if(Ge)for(var lt=0,At=We.segments.get();lt<At.length;lt+=1){var Ft=At[lt];we.push({segments:new l.SegmentVector([Ft]),sortKey:Ft.sortKey,state:it})}else we.push({segments:We.segments,sortKey:0,state:it})}}Ge&&we.sort(function(Rn,Xn){return Rn.sortKey-Xn.sortKey});for(var Bt=0,Zt=we;Bt<Zt.length;Bt+=1){var un=Zt[Bt],Wt=un.state,en=Wt.programConfiguration,Jt=Wt.program,wn=Wt.layoutVertexBuffer,pn=Wt.indexBuffer,Qt=Wt.uniformValues,Ln=un.segments;Jt.draw(et,pt.TRIANGLES,vt,te,ue,Be.disabled,Qt,q.id,wn,pn,Ln,q.paint,D.transform.zoom,en)}}}},heatmap:function(D,Y,q,ne){if(q.paint.get("heatmap-opacity")!==0)if(D.renderPass==="offscreen"){var pe=D.context,Le=pe.gl,Ne=Ze.disabled,Ge=new Ye([Le.ONE,Le.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(De,Ue,We){var Ke=De.gl;De.activeTexture.set(Ke.TEXTURE1),De.viewport.set([0,0,Ue.width/4,Ue.height/4]);var it=We.heatmapFbo;if(it)Ke.bindTexture(Ke.TEXTURE_2D,it.colorAttachment.get()),De.bindFramebuffer.set(it.framebuffer);else{var lt=Ke.createTexture();Ke.bindTexture(Ke.TEXTURE_2D,lt),Ke.texParameteri(Ke.TEXTURE_2D,Ke.TEXTURE_WRAP_S,Ke.CLAMP_TO_EDGE),Ke.texParameteri(Ke.TEXTURE_2D,Ke.TEXTURE_WRAP_T,Ke.CLAMP_TO_EDGE),Ke.texParameteri(Ke.TEXTURE_2D,Ke.TEXTURE_MIN_FILTER,Ke.LINEAR),Ke.texParameteri(Ke.TEXTURE_2D,Ke.TEXTURE_MAG_FILTER,Ke.LINEAR),it=We.heatmapFbo=De.createFramebuffer(Ue.width/4,Ue.height/4,!1),function(At,Ft,Bt,Zt){var un=At.gl,Wt=At.extRenderToTextureHalfFloat?At.extTextureHalfFloat.HALF_FLOAT_OES:un.UNSIGNED_BYTE;un.texImage2D(un.TEXTURE_2D,0,un.RGBA,Ft.width/4,Ft.height/4,0,un.RGBA,Wt,null),Zt.colorAttachment.set(Bt)}(De,Ue,lt,it)}})(pe,D,q),pe.clear({color:l.Color.transparent});for(var et=0;et<ne.length;et++){var pt=ne[et];if(!Y.hasRenderableParent(pt)){var vt=Y.getTile(pt),te=vt.getBucket(q);if(te){var ue=te.programConfigurations.get(q.id),we=D.useProgram("heatmap",ue),Oe=D.transform.zoom;we.draw(pe,Le.TRIANGLES,Ut.disabled,Ne,Ge,Be.disabled,Xo(pt.posMatrix,vt,Oe,q.paint.get("heatmap-intensity")),q.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,q.paint,D.transform.zoom,ue)}}}pe.viewport.set([0,0,D.width,D.height])}else D.renderPass==="translucent"&&(D.context.setColorMode(D.colorModeForRenderPass()),function(De,Ue){var We=De.context,Ke=We.gl,it=Ue.heatmapFbo;if(it){We.activeTexture.set(Ke.TEXTURE0),Ke.bindTexture(Ke.TEXTURE_2D,it.colorAttachment.get()),We.activeTexture.set(Ke.TEXTURE1);var lt=Ue.colorRampTexture;lt||(lt=Ue.colorRampTexture=new l.Texture(We,Ue.colorRamp,Ke.RGBA)),lt.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),De.useProgram("heatmapTexture").draw(We,Ke.TRIANGLES,Ut.disabled,Ze.disabled,De.colorModeForRenderPass(),Be.disabled,function(At,Ft,Bt,Zt){var un=l.create();l.ortho(un,0,At.width,At.height,0,0,1);var Wt=At.context.gl;return{u_matrix:un,u_world:[Wt.drawingBufferWidth,Wt.drawingBufferHeight],u_image:Bt,u_color_ramp:Zt,u_opacity:Ft.paint.get("heatmap-opacity")}}(De,Ue,0,1),Ue.id,De.viewportBuffer,De.quadTriangleIndexBuffer,De.viewportSegments,Ue.paint,De.transform.zoom)}}(D,q))},line:function(D,Y,q,ne){if(D.renderPass==="translucent"){var pe=q.paint.get("line-opacity"),Le=q.paint.get("line-width");if(pe.constantOr(1)!==0&&Le.constantOr(1)!==0){var Ne=D.depthModeForSublayer(0,Ut.ReadOnly),Ge=D.colorModeForRenderPass(),et=q.paint.get("line-dasharray"),pt=q.paint.get("line-pattern"),vt=pt.constantOr(1),te=q.paint.get("line-gradient"),ue=q.getCrossfadeParameters(),we=vt?"linePattern":et?"lineSDF":te?"lineGradient":"line",Oe=D.context,De=Oe.gl,Ue=!0;if(te){Oe.activeTexture.set(De.TEXTURE0);var We=q.gradientTexture;if(!q.gradient)return;We||(We=q.gradientTexture=new l.Texture(Oe,q.gradient,De.RGBA)),We.bind(De.LINEAR,De.CLAMP_TO_EDGE)}for(var Ke=0,it=ne;Ke<it.length;Ke+=1){var lt=it[Ke],At=Y.getTile(lt);if(!vt||At.patternsLoaded()){var Ft=At.getBucket(q);if(Ft){var Bt=Ft.programConfigurations.get(q.id),Zt=D.context.program.get(),un=D.useProgram(we,Bt),Wt=Ue||un.program!==Zt,en=pt.constantOr(null);if(en&&At.imageAtlas){var Jt=At.imageAtlas,wn=Jt.patternPositions[en.to.toString()],pn=Jt.patternPositions[en.from.toString()];wn&&pn&&Bt.setConstantPatternPositions(wn,pn)}var Qt=vt?Ys(D,At,q,ue):et?Oo(D,At,q,et,ue):te?Ws(D,At,q):oo(D,At,q);vt?(Oe.activeTexture.set(De.TEXTURE0),At.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),Bt.updatePaintBuffers(ue)):et&&(Wt||D.lineAtlas.dirty)&&(Oe.activeTexture.set(De.TEXTURE0),D.lineAtlas.bind(Oe)),un.draw(Oe,De.TRIANGLES,Ne,D.stencilModeForClipping(lt),Ge,Be.disabled,Qt,q.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,q.paint,D.transform.zoom,Bt),Ue=!1}}}}}},fill:function(D,Y,q,ne){var pe=q.paint.get("fill-color"),Le=q.paint.get("fill-opacity");if(Le.constantOr(1)!==0){var Ne=D.colorModeForRenderPass(),Ge=q.paint.get("fill-pattern"),et=D.opaquePassEnabledForLayer()&&!Ge.constantOr(1)&&pe.constantOr(l.Color.transparent).a===1&&Le.constantOr(0)===1?"opaque":"translucent";if(D.renderPass===et){var pt=D.depthModeForSublayer(1,D.renderPass==="opaque"?Ut.ReadWrite:Ut.ReadOnly);Do(D,Y,q,ne,pt,Ne,!1)}if(D.renderPass==="translucent"&&q.paint.get("fill-antialias")){var vt=D.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Ut.ReadOnly);Do(D,Y,q,ne,vt,Ne,!0)}}},"fill-extrusion":function(D,Y,q,ne){var pe=q.paint.get("fill-extrusion-opacity");if(pe!==0&&D.renderPass==="translucent"){var Le=new Ut(D.context.gl.LEQUAL,Ut.ReadWrite,D.depthRangeFor3D);if(pe!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))Qo(D,Y,q,ne,Le,Ze.disabled,Ye.disabled),Qo(D,Y,q,ne,Le,D.stencilModeFor3D(),D.colorModeForRenderPass());else{var Ne=D.colorModeForRenderPass();Qo(D,Y,q,ne,Le,Ze.disabled,Ne)}}},hillshade:function(D,Y,q,ne){if(D.renderPass==="offscreen"||D.renderPass==="translucent"){for(var pe=D.context,Le=Y.getSource().maxzoom,Ne=D.depthModeForSublayer(0,Ut.ReadOnly),Ge=D.colorModeForRenderPass(),et=D.renderPass==="translucent"?D.stencilConfigForOverlap(ne):[{},ne],pt=et[0],vt=0,te=et[1];vt<te.length;vt+=1){var ue=te[vt],we=Y.getTile(ue);we.needsHillshadePrepare&&D.renderPass==="offscreen"?gs(D,we,q,Le,Ne,Ze.disabled,Ge):D.renderPass==="translucent"&&ds(D,we,q,Ne,pt[ue.overscaledZ],Ge)}pe.viewport.set([0,0,D.width,D.height])}},raster:function(D,Y,q,ne){if(D.renderPass==="translucent"&&q.paint.get("raster-opacity")!==0&&ne.length)for(var pe=D.context,Le=pe.gl,Ne=Y.getSource(),Ge=D.useProgram("raster"),et=D.colorModeForRenderPass(),pt=Ne instanceof N?[{},ne]:D.stencilConfigForOverlap(ne),vt=pt[0],te=pt[1],ue=te[te.length-1].overscaledZ,we=!D.options.moving,Oe=0,De=te;Oe<De.length;Oe+=1){var Ue=De[Oe],We=D.depthModeForSublayer(Ue.overscaledZ-ue,q.paint.get("raster-opacity")===1?Ut.ReadWrite:Ut.ReadOnly,Le.LESS),Ke=Y.getTile(Ue),it=D.transform.calculatePosMatrix(Ue.toUnwrapped(),we);Ke.registerFadeDuration(q.paint.get("raster-fade-duration"));var lt=Y.findLoadedParent(Ue,0),At=Oa(Ke,lt,Y,q,D.transform),Ft=void 0,Bt=void 0,Zt=q.paint.get("raster-resampling")==="nearest"?Le.NEAREST:Le.LINEAR;pe.activeTexture.set(Le.TEXTURE0),Ke.texture.bind(Zt,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),pe.activeTexture.set(Le.TEXTURE1),lt?(lt.texture.bind(Zt,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),Ft=Math.pow(2,lt.tileID.overscaledZ-Ke.tileID.overscaledZ),Bt=[Ke.tileID.canonical.x*Ft%1,Ke.tileID.canonical.y*Ft%1]):Ke.texture.bind(Zt,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST);var un=Jo(it,Bt||[0,0],Ft||1,At,q);Ne instanceof N?Ge.draw(pe,Le.TRIANGLES,We,Ze.disabled,et,Be.disabled,un,q.id,Ne.boundsBuffer,D.quadTriangleIndexBuffer,Ne.boundsSegments):Ge.draw(pe,Le.TRIANGLES,We,vt[Ue.overscaledZ],et,Be.disabled,un,q.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}},background:function(D,Y,q){var ne=q.paint.get("background-color"),pe=q.paint.get("background-opacity");if(pe!==0){var Le=D.context,Ne=Le.gl,Ge=D.transform,et=Ge.tileSize,pt=q.paint.get("background-pattern");if(!D.isPatternMissing(pt)){var vt=!pt&&ne.a===1&&pe===1&&D.opaquePassEnabledForLayer()?"opaque":"translucent";if(D.renderPass===vt){var te=Ze.disabled,ue=D.depthModeForSublayer(0,vt==="opaque"?Ut.ReadWrite:Ut.ReadOnly),we=D.colorModeForRenderPass(),Oe=D.useProgram(pt?"backgroundPattern":"background"),De=Ge.coveringTiles({tileSize:et});pt&&(Le.activeTexture.set(Ne.TEXTURE0),D.imageManager.bind(D.context));for(var Ue=q.getCrossfadeParameters(),We=0,Ke=De;We<Ke.length;We+=1){var it=Ke[We],lt=D.transform.calculatePosMatrix(it.toUnwrapped()),At=pt?fs(lt,pe,D,pt,{tileID:it,tileSize:et},Ue):Ls(lt,pe,ne);Oe.draw(Le,Ne.TRIANGLES,ue,te,we,Be.disabled,At,q.id,D.tileExtentBuffer,D.quadTriangleIndexBuffer,D.tileExtentSegments)}}}}},debug:function(D,Y,q){for(var ne=0;ne<q.length;ne++)Fo(D,Y,q[ne])},custom:function(D,Y,q){var ne=D.context,pe=q.implementation;if(D.renderPass==="offscreen"){var Le=pe.prerender;Le&&(D.setCustomLayerDefaults(),ne.setColorMode(D.colorModeForRenderPass()),Le.call(pe,ne.gl,D.transform.customLayerMatrix()),ne.setDirty(),D.setBaseState())}else if(D.renderPass==="translucent"){D.setCustomLayerDefaults(),ne.setColorMode(D.colorModeForRenderPass()),ne.setStencilMode(Ze.disabled);var Ne=pe.renderingMode==="3d"?new Ut(D.context.gl.LEQUAL,Ut.ReadWrite,D.depthRangeFor3D):D.depthModeForSublayer(0,Ut.ReadOnly);ne.setDepthMode(Ne),pe.render(ne.gl,D.transform.customLayerMatrix()),ne.setDirty(),D.setBaseState(),ne.bindFramebuffer.set(null)}}},ai=function(D,Y){this.context=new ke(D),this.transform=Y,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Hn,this.gpuTimers={}};ai.prototype.resize=function(D,Y){if(this.width=D*l.browser.devicePixelRatio,this.height=Y*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,ne=this.style._order;q<ne.length;q+=1){var pe=ne[q];this.style._layers[pe].resize()}},ai.prototype.setup=function(){var D=this.context,Y=new l.StructArrayLayout2i4;Y.emplaceBack(0,0),Y.emplaceBack(l.EXTENT,0),Y.emplaceBack(0,l.EXTENT),Y.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=D.createVertexBuffer(Y,gr.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var q=new l.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(l.EXTENT,0),q.emplaceBack(0,l.EXTENT),q.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=D.createVertexBuffer(q,gr.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var ne=new l.StructArrayLayout4i8;ne.emplaceBack(0,0,0,0),ne.emplaceBack(l.EXTENT,0,l.EXTENT,0),ne.emplaceBack(0,l.EXTENT,0,l.EXTENT),ne.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=D.createVertexBuffer(ne,F.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var pe=new l.StructArrayLayout2i4;pe.emplaceBack(0,0),pe.emplaceBack(1,0),pe.emplaceBack(0,1),pe.emplaceBack(1,1),this.viewportBuffer=D.createVertexBuffer(pe,gr.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var Le=new l.StructArrayLayout1ui2;Le.emplaceBack(0),Le.emplaceBack(1),Le.emplaceBack(3),Le.emplaceBack(2),Le.emplaceBack(0),this.tileBorderIndexBuffer=D.createIndexBuffer(Le);var Ne=new l.StructArrayLayout3ui6;Ne.emplaceBack(0,1,2),Ne.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=D.createIndexBuffer(Ne),this.emptyTexture=new l.Texture(D,{width:1,height:1,data:new Uint8Array([0,0,0,0])},D.gl.RGBA);var Ge=this.context.gl;this.stencilClearMode=new Ze({func:Ge.ALWAYS,mask:0},0,255,Ge.ZERO,Ge.ZERO,Ge.ZERO)},ai.prototype.clearStencil=function(){var D=this.context,Y=D.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=l.create();l.ortho(q,0,this.width,this.height,0,0,1),l.scale(q,q,[Y.drawingBufferWidth,Y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(D,Y.TRIANGLES,Ut.disabled,this.stencilClearMode,Ye.disabled,Be.disabled,ao(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ai.prototype._renderTileClippingMasks=function(D,Y){if(this.currentStencilSource!==D.source&&D.isTileClipped()&&Y&&Y.length){this.currentStencilSource=D.source;var q=this.context,ne=q.gl;this.nextStencilID+Y.length>256&&this.clearStencil(),q.setColorMode(Ye.disabled),q.setDepthMode(Ut.disabled);var pe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Le=0,Ne=Y;Le<Ne.length;Le+=1){var Ge=Ne[Le],et=this._tileClippingMaskIDs[Ge.key]=this.nextStencilID++;pe.draw(q,ne.TRIANGLES,Ut.disabled,new Ze({func:ne.ALWAYS,mask:0},et,255,ne.KEEP,ne.KEEP,ne.REPLACE),Ye.disabled,Be.disabled,ao(Ge.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ai.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var D=this.nextStencilID++,Y=this.context.gl;return new Ze({func:Y.NOTEQUAL,mask:255},D,255,Y.KEEP,Y.KEEP,Y.REPLACE)},ai.prototype.stencilModeForClipping=function(D){var Y=this.context.gl;return new Ze({func:Y.EQUAL,mask:255},this._tileClippingMaskIDs[D.key],0,Y.KEEP,Y.KEEP,Y.REPLACE)},ai.prototype.stencilConfigForOverlap=function(D){var Y,q=this.context.gl,ne=D.sort(function(et,pt){return pt.overscaledZ-et.overscaledZ}),pe=ne[ne.length-1].overscaledZ,Le=ne[0].overscaledZ-pe+1;if(Le>1){this.currentStencilSource=void 0,this.nextStencilID+Le>256&&this.clearStencil();for(var Ne={},Ge=0;Ge<Le;Ge++)Ne[Ge+pe]=new Ze({func:q.GEQUAL,mask:255},Ge+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=Le,[Ne,ne]}return[(Y={},Y[pe]=Ze.disabled,Y),ne]},ai.prototype.colorModeForRenderPass=function(){var D=this.context.gl;if(this._showOverdrawInspector){var Y=.125;return new Ye([D.CONSTANT_COLOR,D.ONE],new l.Color(Y,Y,Y,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Ye.unblended:Ye.alphaBlended},ai.prototype.depthModeForSublayer=function(D,Y,q){if(!this.opaquePassEnabledForLayer())return Ut.disabled;var ne=1-((1+this.currentLayer)*this.numSublayers+D)*this.depthEpsilon;return new Ut(q||this.context.gl.LEQUAL,Y,[ne,ne])},ai.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ai.prototype.render=function(D,Y){var q=this;this.style=D,this.options=Y,this.lineAtlas=D.lineAtlas,this.imageManager=D.imageManager,this.glyphManager=D.glyphManager,this.symbolFadeChange=D.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var ne=this.style._order,pe=this.style.sourceCaches;for(var Le in pe){var Ne=pe[Le];Ne.used&&Ne.prepare(this.context)}var Ge,et,pt={},vt={},te={};for(var ue in pe){var we=pe[ue];pt[ue]=we.getVisibleCoordinates(),vt[ue]=pt[ue].slice().reverse(),te[ue]=we.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Oe=0;Oe<ne.length;Oe++){var De=ne[Oe];if(this.style._layers[De].is3D()){this.opaquePassCutoff=Oe;break}}this.renderPass="offscreen";for(var Ue=0,We=ne;Ue<We.length;Ue+=1){var Ke=We[Ue],it=this.style._layers[Ke];if(it.hasOffscreenPass()&&!it.isHidden(this.transform.zoom)){var lt=vt[it.source];(it.type==="custom"||lt.length)&&this.renderLayer(this,pe[it.source],it,lt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:Y.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=Y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(D._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ne.length-1;this.currentLayer>=0;this.currentLayer--){var At=this.style._layers[ne[this.currentLayer]],Ft=pe[At.source],Bt=pt[At.source];this._renderTileClippingMasks(At,Bt),this.renderLayer(this,Ft,At,Bt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ne.length;this.currentLayer++){var Zt=this.style._layers[ne[this.currentLayer]],un=pe[Zt.source],Wt=(Zt.type==="symbol"?te:vt)[Zt.source];this._renderTileClippingMasks(Zt,pt[Zt.source]),this.renderLayer(this,un,Zt,Wt)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(en){en.source&&!en.isHidden(q.transform.zoom)&&(en.source!==(et&&et.id)&&(et=q.style.sourceCaches[en.source]),(!Ge||Ge.getSource().maxzoom<et.getSource().maxzoom)&&(Ge=et))}),Ge&&Bo.debug(this,Ge,Ge.getVisibleCoordinates())),this.options.showPadding&&ys(this),this.context.setDefault()},ai.prototype.renderLayer=function(D,Y,q,ne){q.isHidden(this.transform.zoom)||(q.type==="background"||q.type==="custom"||ne.length)&&(this.id=q.id,this.gpuTimingStart(q),Bo[q.type](D,Y,q,ne,this.style.placement.variableOffsets),this.gpuTimingEnd())},ai.prototype.gpuTimingStart=function(D){if(this.options.gpuTiming){var Y=this.context.extTimerQuery,q=this.gpuTimers[D.id];q||(q=this.gpuTimers[D.id]={calls:0,cpuTime:0,query:Y.createQueryEXT()}),q.calls++,Y.beginQueryEXT(Y.TIME_ELAPSED_EXT,q.query)}},ai.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var D=this.context.extTimerQuery;D.endQueryEXT(D.TIME_ELAPSED_EXT)}},ai.prototype.collectGpuTimers=function(){var D=this.gpuTimers;return this.gpuTimers={},D},ai.prototype.queryGpuTimers=function(D){var Y={};for(var q in D){var ne=D[q],pe=this.context.extTimerQuery,Le=pe.getQueryObjectEXT(ne.query,pe.QUERY_RESULT_EXT)/1e6;pe.deleteQueryEXT(ne.query),Y[q]=Le}return Y},ai.prototype.translatePosMatrix=function(D,Y,q,ne,pe){if(!q[0]&&!q[1])return D;var Le=pe?ne==="map"?this.transform.angle:0:ne==="viewport"?-this.transform.angle:0;if(Le){var Ne=Math.sin(Le),Ge=Math.cos(Le);q=[q[0]*Ge-q[1]*Ne,q[0]*Ne+q[1]*Ge]}var et=[pe?q[0]:Vn(Y,q[0],this.transform.zoom),pe?q[1]:Vn(Y,q[1],this.transform.zoom),0],pt=new Float32Array(16);return l.translate(pt,D,et),pt},ai.prototype.saveTileTexture=function(D){var Y=this._tileTextures[D.size[0]];Y?Y.push(D):this._tileTextures[D.size[0]]=[D]},ai.prototype.getTileTexture=function(D){var Y=this._tileTextures[D];return Y&&Y.length>0?Y.pop():null},ai.prototype.isPatternMissing=function(D){if(!D)return!1;if(!D.from||!D.to)return!0;var Y=this.imageManager.getPattern(D.from.toString()),q=this.imageManager.getPattern(D.to.toString());return!Y||!q},ai.prototype.useProgram=function(D,Y){this.cache=this.cache||{};var q=""+D+(Y?Y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new Ua(this.context,yo[D],Y,Ro[D],this._showOverdrawInspector)),this.cache[q]},ai.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ai.prototype.setBaseState=function(){var D=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(D.FUNC_ADD)},ai.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var D=this.context.gl;this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,D.RGBA)}},ai.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var wo=function(D,Y){this.points=D,this.planes=Y};wo.fromInvProjectionMatrix=function(D,Y,q){var ne=Math.pow(2,q),pe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Ne){return l.transformMat4([],Ne,D)}).map(function(Ne){return l.scale$1([],Ne,1/Ne[3]/Y*ne)}),Le=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Ne){var Ge=l.sub([],pe[Ne[0]],pe[Ne[1]]),et=l.sub([],pe[Ne[2]],pe[Ne[1]]),pt=l.normalize([],l.cross([],Ge,et)),vt=-l.dot(pt,pe[Ne[1]]);return pt.concat(vt)});return new wo(pe,Le)};var To=function(D,Y){this.min=D,this.max=Y,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};To.prototype.quadrant=function(D){for(var Y=[D%2==0,D<2],q=l.clone$2(this.min),ne=l.clone$2(this.max),pe=0;pe<Y.length;pe++)q[pe]=Y[pe]?this.min[pe]:this.center[pe],ne[pe]=Y[pe]?this.center[pe]:this.max[pe];return ne[2]=this.max[2],new To(q,ne)},To.prototype.distanceX=function(D){return Math.max(Math.min(this.max[0],D[0]),this.min[0])-D[0]},To.prototype.distanceY=function(D){return Math.max(Math.min(this.max[1],D[1]),this.min[1])-D[1]},To.prototype.intersects=function(D){for(var Y=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,ne=0;ne<D.planes.length;ne++){for(var pe=D.planes[ne],Le=0,Ne=0;Ne<Y.length;Ne++)Le+=l.dot$1(pe,Y[Ne])>=0;if(Le===0)return 0;Le!==Y.length&&(q=!1)}if(q)return 2;for(var Ge=0;Ge<3;Ge++){for(var et=Number.MAX_VALUE,pt=-Number.MAX_VALUE,vt=0;vt<D.points.length;vt++){var te=D.points[vt][Ge]-this.min[Ge];et=Math.min(et,te),pt=Math.max(pt,te)}if(pt<0||et>this.max[Ge]-this.min[Ge])return 0}return 1};var Zi=function(D,Y,q,ne){if(D===void 0&&(D=0),Y===void 0&&(Y=0),q===void 0&&(q=0),ne===void 0&&(ne=0),isNaN(D)||D<0||isNaN(Y)||Y<0||isNaN(q)||q<0||isNaN(ne)||ne<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=D,this.bottom=Y,this.left=q,this.right=ne};Zi.prototype.interpolate=function(D,Y,q){return Y.top!=null&&D.top!=null&&(this.top=l.number(D.top,Y.top,q)),Y.bottom!=null&&D.bottom!=null&&(this.bottom=l.number(D.bottom,Y.bottom,q)),Y.left!=null&&D.left!=null&&(this.left=l.number(D.left,Y.left,q)),Y.right!=null&&D.right!=null&&(this.right=l.number(D.right,Y.right,q)),this},Zi.prototype.getCenter=function(D,Y){var q=l.clamp((this.left+D-this.right)/2,0,D),ne=l.clamp((this.top+Y-this.bottom)/2,0,Y);return new l.Point(q,ne)},Zi.prototype.equals=function(D){return this.top===D.top&&this.bottom===D.bottom&&this.left===D.left&&this.right===D.right},Zi.prototype.clone=function(){return new Zi(this.top,this.bottom,this.left,this.right)},Zi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Xr=function(D,Y,q,ne,pe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=pe===void 0||pe,this._minZoom=D||0,this._maxZoom=Y||22,this._minPitch=q??0,this._maxPitch=ne??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Zi,this._posMatrixCache={},this._alignedPosMatrixCache={}},Kr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Xr.prototype.clone=function(){var D=new Xr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return D.tileSize=this.tileSize,D.latRange=this.latRange,D.width=this.width,D.height=this.height,D._center=this._center,D.zoom=this.zoom,D.angle=this.angle,D._fov=this._fov,D._pitch=this._pitch,D._unmodified=this._unmodified,D._edgeInsets=this._edgeInsets.clone(),D._calcMatrices(),D},Kr.minZoom.get=function(){return this._minZoom},Kr.minZoom.set=function(D){this._minZoom!==D&&(this._minZoom=D,this.zoom=Math.max(this.zoom,D))},Kr.maxZoom.get=function(){return this._maxZoom},Kr.maxZoom.set=function(D){this._maxZoom!==D&&(this._maxZoom=D,this.zoom=Math.min(this.zoom,D))},Kr.minPitch.get=function(){return this._minPitch},Kr.minPitch.set=function(D){this._minPitch!==D&&(this._minPitch=D,this.pitch=Math.max(this.pitch,D))},Kr.maxPitch.get=function(){return this._maxPitch},Kr.maxPitch.set=function(D){this._maxPitch!==D&&(this._maxPitch=D,this.pitch=Math.min(this.pitch,D))},Kr.renderWorldCopies.get=function(){return this._renderWorldCopies},Kr.renderWorldCopies.set=function(D){D===void 0?D=!0:D===null&&(D=!1),this._renderWorldCopies=D},Kr.worldSize.get=function(){return this.tileSize*this.scale},Kr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Kr.size.get=function(){return new l.Point(this.width,this.height)},Kr.bearing.get=function(){return-this.angle/Math.PI*180},Kr.bearing.set=function(D){var Y=-l.wrap(D,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Kr.pitch.get=function(){return this._pitch/Math.PI*180},Kr.pitch.set=function(D){var Y=l.clamp(D,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},Kr.fov.get=function(){return this._fov/Math.PI*180},Kr.fov.set=function(D){D=Math.max(.01,Math.min(60,D)),this._fov!==D&&(this._unmodified=!1,this._fov=D/180*Math.PI,this._calcMatrices())},Kr.zoom.get=function(){return this._zoom},Kr.zoom.set=function(D){var Y=Math.min(Math.max(D,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},Kr.center.get=function(){return this._center},Kr.center.set=function(D){D.lat===this._center.lat&&D.lng===this._center.lng||(this._unmodified=!1,this._center=D,this._constrain(),this._calcMatrices())},Kr.padding.get=function(){return this._edgeInsets.toJSON()},Kr.padding.set=function(D){this._edgeInsets.equals(D)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,D,1),this._calcMatrices())},Kr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Xr.prototype.isPaddingEqual=function(D){return this._edgeInsets.equals(D)},Xr.prototype.interpolatePadding=function(D,Y,q){this._unmodified=!1,this._edgeInsets.interpolate(D,Y,q),this._constrain(),this._calcMatrices()},Xr.prototype.coveringZoomLevel=function(D){var Y=(D.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/D.tileSize));return Math.max(0,Y)},Xr.prototype.getVisibleUnwrappedCoordinates=function(D){var Y=[new l.UnwrappedTileID(0,D)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new l.Point(0,0)),ne=this.pointCoordinate(new l.Point(this.width,0)),pe=this.pointCoordinate(new l.Point(this.width,this.height)),Le=this.pointCoordinate(new l.Point(0,this.height)),Ne=Math.floor(Math.min(q.x,ne.x,pe.x,Le.x)),Ge=Math.floor(Math.max(q.x,ne.x,pe.x,Le.x)),et=Ne-1;et<=Ge+1;et++)et!==0&&Y.push(new l.UnwrappedTileID(et,D));return Y},Xr.prototype.coveringTiles=function(D){var Y=this.coveringZoomLevel(D),q=Y;if(D.minzoom!==void 0&&Y<D.minzoom)return[];D.maxzoom!==void 0&&Y>D.maxzoom&&(Y=D.maxzoom);var ne=l.MercatorCoordinate.fromLngLat(this.center),pe=Math.pow(2,Y),Le=[pe*ne.x,pe*ne.y,0],Ne=wo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,Y),Ge=D.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ge=Y);var et=function(Wt){return{aabb:new To([Wt*pe,0,0],[(Wt+1)*pe,pe,0]),zoom:0,x:0,y:0,wrap:Wt,fullyVisible:!1}},pt=[],vt=[],te=Y,ue=D.reparseOverscaled?q:Y;if(this._renderWorldCopies)for(var we=1;we<=3;we++)pt.push(et(-we)),pt.push(et(we));for(pt.push(et(0));pt.length>0;){var Oe=pt.pop(),De=Oe.x,Ue=Oe.y,We=Oe.fullyVisible;if(!We){var Ke=Oe.aabb.intersects(Ne);if(Ke===0)continue;We=Ke===2}var it=Oe.aabb.distanceX(Le),lt=Oe.aabb.distanceY(Le),At=Math.max(Math.abs(it),Math.abs(lt)),Ft=3+(1<<te-Oe.zoom)-2;if(Oe.zoom===te||At>Ft&&Oe.zoom>=Ge)vt.push({tileID:new l.OverscaledTileID(Oe.zoom===te?ue:Oe.zoom,Oe.wrap,Oe.zoom,De,Ue),distanceSq:l.sqrLen([Le[0]-.5-De,Le[1]-.5-Ue])});else for(var Bt=0;Bt<4;Bt++){var Zt=(De<<1)+Bt%2,un=(Ue<<1)+(Bt>>1);pt.push({aabb:Oe.aabb.quadrant(Bt),zoom:Oe.zoom+1,x:Zt,y:un,wrap:Oe.wrap,fullyVisible:We})}}return vt.sort(function(Wt,en){return Wt.distanceSq-en.distanceSq}).map(function(Wt){return Wt.tileID})},Xr.prototype.resize=function(D,Y){this.width=D,this.height=Y,this.pixelsToGLUnits=[2/D,-2/Y],this._constrain(),this._calcMatrices()},Kr.unmodified.get=function(){return this._unmodified},Xr.prototype.zoomScale=function(D){return Math.pow(2,D)},Xr.prototype.scaleZoom=function(D){return Math.log(D)/Math.LN2},Xr.prototype.project=function(D){var Y=l.clamp(D.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(D.lng)*this.worldSize,l.mercatorYfromLat(Y)*this.worldSize)},Xr.prototype.unproject=function(D){return new l.MercatorCoordinate(D.x/this.worldSize,D.y/this.worldSize).toLngLat()},Kr.point.get=function(){return this.project(this.center)},Xr.prototype.setLocationAtPoint=function(D,Y){var q=this.pointCoordinate(Y),ne=this.pointCoordinate(this.centerPoint),pe=this.locationCoordinate(D),Le=new l.MercatorCoordinate(pe.x-(q.x-ne.x),pe.y-(q.y-ne.y));this.center=this.coordinateLocation(Le),this._renderWorldCopies&&(this.center=this.center.wrap())},Xr.prototype.locationPoint=function(D){return this.coordinatePoint(this.locationCoordinate(D))},Xr.prototype.pointLocation=function(D){return this.coordinateLocation(this.pointCoordinate(D))},Xr.prototype.locationCoordinate=function(D){return l.MercatorCoordinate.fromLngLat(D)},Xr.prototype.coordinateLocation=function(D){return D.toLngLat()},Xr.prototype.pointCoordinate=function(D){var Y=[D.x,D.y,0,1],q=[D.x,D.y,1,1];l.transformMat4(Y,Y,this.pixelMatrixInverse),l.transformMat4(q,q,this.pixelMatrixInverse);var ne=Y[3],pe=q[3],Le=Y[0]/ne,Ne=q[0]/pe,Ge=Y[1]/ne,et=q[1]/pe,pt=Y[2]/ne,vt=q[2]/pe,te=pt===vt?0:(0-pt)/(vt-pt);return new l.MercatorCoordinate(l.number(Le,Ne,te)/this.worldSize,l.number(Ge,et,te)/this.worldSize)},Xr.prototype.coordinatePoint=function(D){var Y=[D.x*this.worldSize,D.y*this.worldSize,0,1];return l.transformMat4(Y,Y,this.pixelMatrix),new l.Point(Y[0]/Y[3],Y[1]/Y[3])},Xr.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},Xr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Xr.prototype.setMaxBounds=function(D){D?(this.lngRange=[D.getWest(),D.getEast()],this.latRange=[D.getSouth(),D.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Xr.prototype.calculatePosMatrix=function(D,Y){Y===void 0&&(Y=!1);var q=D.key,ne=Y?this._alignedPosMatrixCache:this._posMatrixCache;if(ne[q])return ne[q];var pe=D.canonical,Le=this.worldSize/this.zoomScale(pe.z),Ne=pe.x+Math.pow(2,pe.z)*D.wrap,Ge=l.identity(new Float64Array(16));return l.translate(Ge,Ge,[Ne*Le,pe.y*Le,0]),l.scale(Ge,Ge,[Le/l.EXTENT,Le/l.EXTENT,1]),l.multiply(Ge,Y?this.alignedProjMatrix:this.projMatrix,Ge),ne[q]=new Float32Array(Ge),ne[q]},Xr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Xr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var D,Y,q,ne,pe=-90,Le=90,Ne=-180,Ge=180,et=this.size,pt=this._unmodified;if(this.latRange){var vt=this.latRange;pe=l.mercatorYfromLat(vt[1])*this.worldSize,D=(Le=l.mercatorYfromLat(vt[0])*this.worldSize)-pe<et.y?et.y/(Le-pe):0}if(this.lngRange){var te=this.lngRange;Ne=l.mercatorXfromLng(te[0])*this.worldSize,Y=(Ge=l.mercatorXfromLng(te[1])*this.worldSize)-Ne<et.x?et.x/(Ge-Ne):0}var ue=this.point,we=Math.max(Y||0,D||0);if(we)return this.center=this.unproject(new l.Point(Y?(Ge+Ne)/2:ue.x,D?(Le+pe)/2:ue.y)),this.zoom+=this.scaleZoom(we),this._unmodified=pt,void(this._constraining=!1);if(this.latRange){var Oe=ue.y,De=et.y/2;Oe-De<pe&&(ne=pe+De),Oe+De>Le&&(ne=Le-De)}if(this.lngRange){var Ue=ue.x,We=et.x/2;Ue-We<Ne&&(q=Ne+We),Ue+We>Ge&&(q=Ge-We)}q===void 0&&ne===void 0||(this.center=this.unproject(new l.Point(q!==void 0?q:ue.x,ne!==void 0?ne:ue.y))),this._unmodified=pt,this._constraining=!1}},Xr.prototype._calcMatrices=function(){if(this.height){var D=this._fov/2,Y=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(D)*this.height;var q=Math.PI/2+this._pitch,ne=this._fov*(.5+Y.y/this.height),pe=Math.sin(ne)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-q-ne,.01,Math.PI-.01)),Le=this.point,Ne=Le.x,Ge=Le.y,et=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+this.cameraToCenterDistance),pt=this.height/50,vt=new Float64Array(16);l.perspective(vt,this._fov,this.width/this.height,pt,et),vt[8]=2*-Y.x/this.width,vt[9]=2*Y.y/this.height,l.scale(vt,vt,[1,-1,1]),l.translate(vt,vt,[0,0,-this.cameraToCenterDistance]),l.rotateX(vt,vt,this._pitch),l.rotateZ(vt,vt,this.angle),l.translate(vt,vt,[-Ne,-Ge,0]),this.mercatorMatrix=l.scale([],vt,[this.worldSize,this.worldSize,this.worldSize]),l.scale(vt,vt,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=vt,this.invProjMatrix=l.invert([],this.projMatrix);var te=this.width%2/2,ue=this.height%2/2,we=Math.cos(this.angle),Oe=Math.sin(this.angle),De=Ne-Math.round(Ne)+we*te+Oe*ue,Ue=Ge-Math.round(Ge)+we*ue+Oe*te,We=new Float64Array(vt);if(l.translate(We,We,[De>.5?De-1:De,Ue>.5?Ue-1:Ue,0]),this.alignedProjMatrix=We,vt=l.create(),l.scale(vt,vt,[this.width/2,-this.height/2,1]),l.translate(vt,vt,[1,-1,0]),this.labelPlaneMatrix=vt,vt=l.create(),l.scale(vt,vt,[1,-1,1]),l.translate(vt,vt,[-1,-1,0]),l.scale(vt,vt,[2/this.width,2/this.height,1]),this.glCoordMatrix=vt,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(vt=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=vt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Xr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var D=this.pointCoordinate(new l.Point(0,0)),Y=[D.x*this.worldSize,D.y*this.worldSize,0,1];return l.transformMat4(Y,Y,this.pixelMatrix)[3]/this.cameraToCenterDistance},Xr.prototype.getCameraPoint=function(){var D=this._pitch,Y=Math.tan(D)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,Y))},Xr.prototype.getCameraQueryGeometry=function(D){var Y=this.getCameraPoint();if(D.length===1)return[D[0],Y];for(var q=Y.x,ne=Y.y,pe=Y.x,Le=Y.y,Ne=0,Ge=D;Ne<Ge.length;Ne+=1){var et=Ge[Ne];q=Math.min(q,et.x),ne=Math.min(ne,et.y),pe=Math.max(pe,et.x),Le=Math.max(Le,et.y)}return[new l.Point(q,ne),new l.Point(pe,ne),new l.Point(pe,Le),new l.Point(q,Le),new l.Point(q,ne)]},Object.defineProperties(Xr.prototype,Kr);var lo=function(D){var Y,q,ne,pe,Le;this._hashName=D&&encodeURIComponent(D),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(Y=this._updateHashUnthrottled.bind(this),q=300,ne=!1,pe=null,Le=function(){pe=null,ne&&(Y(),pe=setTimeout(Le,q),ne=!1)},function(){return ne=!0,pe||Le(),pe})};lo.prototype.addTo=function(D){return this._map=D,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},lo.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},lo.prototype.getHashString=function(D){var Y=this._map.getCenter(),q=Math.round(100*this._map.getZoom())/100,ne=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),pe=Math.pow(10,ne),Le=Math.round(Y.lng*pe)/pe,Ne=Math.round(Y.lat*pe)/pe,Ge=this._map.getBearing(),et=this._map.getPitch(),pt="";if(pt+=D?"/"+Le+"/"+Ne+"/"+q:q+"/"+Ne+"/"+Le,(Ge||et)&&(pt+="/"+Math.round(10*Ge)/10),et&&(pt+="/"+Math.round(et)),this._hashName){var vt=this._hashName,te=!1,ue=l.window.location.hash.slice(1).split("&").map(function(we){var Oe=we.split("=")[0];return Oe===vt?(te=!0,Oe+"="+pt):we}).filter(function(we){return we});return te||ue.push(vt+"="+pt),"#"+ue.join("&")}return"#"+pt},lo.prototype._getCurrentHash=function(){var D,Y=this,q=l.window.location.hash.replace("#","");return this._hashName?(q.split("&").map(function(ne){return ne.split("=")}).forEach(function(ne){ne[0]===Y._hashName&&(D=ne)}),(D&&D[1]||"").split("/")):q.split("/")},lo.prototype._onHashChange=function(){var D=this._getCurrentHash();if(D.length>=3&&!D.some(function(q){return isNaN(q)})){var Y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(D[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+D[2],+D[1]],zoom:+D[0],bearing:Y,pitch:+(D[4]||0)}),!0}return!1},lo.prototype._updateHashUnthrottled=function(){var D=this.getHashString();try{l.window.history.replaceState(l.window.history.state,"",D)}catch{}};var Ja={linearity:.3,easing:l.bezier(0,0,.3,1)},Ps=l.extend({deceleration:2500,maxSpeed:1400},Ja),$s=l.extend({deceleration:20,maxSpeed:1400},Ja),No=l.extend({deceleration:1e3,maxSpeed:360},Ja),Qs=l.extend({deceleration:1e3,maxSpeed:90},Ja),jo=function(D){this._map=D,this.clear()};function uo(D,Y){(!D.duration||D.duration<Y.duration)&&(D.duration=Y.duration,D.easing=Y.easing)}function Uo(D,Y,q){var ne=q.maxSpeed,pe=q.linearity,Le=q.deceleration,Ne=l.clamp(D*pe/(Y/1e3),-ne,ne),Ge=Math.abs(Ne)/(Le*pe);return{easing:q.easing,duration:1e3*Ge,amount:Ne*(Ge/2)}}jo.prototype.clear=function(){this._inertiaBuffer=[]},jo.prototype.record=function(D){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:D})},jo.prototype._drainInertiaBuffer=function(){for(var D=this._inertiaBuffer,Y=l.browser.now();D.length>0&&Y-D[0].time>160;)D.shift()},jo.prototype._onMoveEnd=function(D){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var Y={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},q=0,ne=this._inertiaBuffer;q<ne.length;q+=1){var pe=ne[q].settings;Y.zoom+=pe.zoomDelta||0,Y.bearing+=pe.bearingDelta||0,Y.pitch+=pe.pitchDelta||0,pe.panDelta&&Y.pan._add(pe.panDelta),pe.around&&(Y.around=pe.around),pe.pinchAround&&(Y.pinchAround=pe.pinchAround)}var Le=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Ne={};if(Y.pan.mag()){var Ge=Uo(Y.pan.mag(),Le,l.extend({},Ps,D||{}));Ne.offset=Y.pan.mult(Ge.amount/Y.pan.mag()),Ne.center=this._map.transform.center,uo(Ne,Ge)}if(Y.zoom){var et=Uo(Y.zoom,Le,$s);Ne.zoom=this._map.transform.zoom+et.amount,uo(Ne,et)}if(Y.bearing){var pt=Uo(Y.bearing,Le,No);Ne.bearing=this._map.transform.bearing+l.clamp(pt.amount,-179,179),uo(Ne,pt)}if(Y.pitch){var vt=Uo(Y.pitch,Le,Qs);Ne.pitch=this._map.transform.pitch+vt.amount,uo(Ne,vt)}if(Ne.zoom||Ne.bearing){var te=Y.pinchAround===void 0?Y.around:Y.pinchAround;Ne.around=te?this._map.unproject(te):this._map.getCenter()}return this.clear(),l.extend(Ne,{noMoveStart:!0})}};var mi=function(D){function Y(ne,pe,Le,Ne){Ne===void 0&&(Ne={});var Ge=x.mousePos(pe.getCanvasContainer(),Le),et=pe.unproject(Ge);D.call(this,ne,l.extend({point:Ge,lngLat:et,originalEvent:Le},Ne)),this._defaultPrevented=!1,this.target=pe}D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(l.Event),Ka=function(D){function Y(ne,pe,Le){var Ne=ne==="touchend"?Le.changedTouches:Le.touches,Ge=x.touchPos(pe.getCanvasContainer(),Ne),et=Ge.map(function(te){return pe.unproject(te)}),pt=Ge.reduce(function(te,ue,we,Oe){return te.add(ue.div(Oe.length))},new l.Point(0,0)),vt=pe.unproject(pt);D.call(this,ne,{points:Ge,point:pt,lngLats:et,lngLat:vt,originalEvent:Le}),this._defaultPrevented=!1}D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(l.Event),Vo=function(D){function Y(ne,pe,Le){D.call(this,ne,{originalEvent:Le}),this._defaultPrevented=!1}D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(l.Event),Ii=function(D,Y){this._map=D,this._clickTolerance=Y.clickTolerance};Ii.prototype.reset=function(){delete this._mousedownPos},Ii.prototype.wheel=function(D){return this._firePreventable(new Vo(D.type,this._map,D))},Ii.prototype.mousedown=function(D,Y){return this._mousedownPos=Y,this._firePreventable(new mi(D.type,this._map,D))},Ii.prototype.mouseup=function(D){this._map.fire(new mi(D.type,this._map,D))},Ii.prototype.click=function(D,Y){this._mousedownPos&&this._mousedownPos.dist(Y)>=this._clickTolerance||this._map.fire(new mi(D.type,this._map,D))},Ii.prototype.dblclick=function(D){return this._firePreventable(new mi(D.type,this._map,D))},Ii.prototype.mouseover=function(D){this._map.fire(new mi(D.type,this._map,D))},Ii.prototype.mouseout=function(D){this._map.fire(new mi(D.type,this._map,D))},Ii.prototype.touchstart=function(D){return this._firePreventable(new Ka(D.type,this._map,D))},Ii.prototype.touchmove=function(D){this._map.fire(new Ka(D.type,this._map,D))},Ii.prototype.touchend=function(D){this._map.fire(new Ka(D.type,this._map,D))},Ii.prototype.touchcancel=function(D){this._map.fire(new Ka(D.type,this._map,D))},Ii.prototype._firePreventable=function(D){if(this._map.fire(D),D.defaultPrevented)return{}},Ii.prototype.isEnabled=function(){return!0},Ii.prototype.isActive=function(){return!1},Ii.prototype.enable=function(){},Ii.prototype.disable=function(){};var Wi=function(D){this._map=D};Wi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Wi.prototype.mousemove=function(D){this._map.fire(new mi(D.type,this._map,D))},Wi.prototype.mousedown=function(){this._delayContextMenu=!0},Wi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Wi.prototype.contextmenu=function(D){this._delayContextMenu?this._contextMenuEvent=D:this._map.fire(new mi(D.type,this._map,D)),this._map.listens("contextmenu")&&D.preventDefault()},Wi.prototype.isEnabled=function(){return!0},Wi.prototype.isActive=function(){return!1},Wi.prototype.enable=function(){},Wi.prototype.disable=function(){};var Yi=function(D,Y){this._map=D,this._el=D.getCanvasContainer(),this._container=D.getContainer(),this._clickTolerance=Y.clickTolerance||1};function qi(D,Y){for(var q={},ne=0;ne<D.length;ne++)q[D[ne].identifier]=Y[ne];return q}Yi.prototype.isEnabled=function(){return!!this._enabled},Yi.prototype.isActive=function(){return!!this._active},Yi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Yi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Yi.prototype.mousedown=function(D,Y){this.isEnabled()&&D.shiftKey&&D.button===0&&(x.disableDrag(),this._startPos=this._lastPos=Y,this._active=!0)},Yi.prototype.mousemoveWindow=function(D,Y){if(this._active){var q=Y;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var ne=this._startPos;this._lastPos=q,this._box||(this._box=x.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",D));var pe=Math.min(ne.x,q.x),Le=Math.max(ne.x,q.x),Ne=Math.min(ne.y,q.y),Ge=Math.max(ne.y,q.y);x.setTransform(this._box,"translate("+pe+"px,"+Ne+"px)"),this._box.style.width=Le-pe+"px",this._box.style.height=Ge-Ne+"px"}}},Yi.prototype.mouseupWindow=function(D,Y){var q=this;if(this._active&&D.button===0){var ne=this._startPos,pe=Y;if(this.reset(),x.suppressClick(),ne.x!==pe.x||ne.y!==pe.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:D})),{cameraAnimation:function(Le){return Le.fitScreenCoordinates(ne,pe,q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",D)}},Yi.prototype.keydown=function(D){this._active&&D.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",D))},Yi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos},Yi.prototype._fireEvent=function(D,Y){return this._map.fire(new l.Event(D,{originalEvent:Y}))};var sa=function(D){this.reset(),this.numTouches=D.numTouches};sa.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},sa.prototype.touchstart=function(D,Y,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=D.timeStamp),q.length===this.numTouches&&(this.centroid=function(ne){for(var pe=new l.Point(0,0),Le=0,Ne=ne;Le<Ne.length;Le+=1){var Ge=Ne[Le];pe._add(Ge)}return pe.div(ne.length)}(Y),this.touches=qi(q,Y)))},sa.prototype.touchmove=function(D,Y,q){if(!this.aborted&&this.centroid){var ne=qi(q,Y);for(var pe in this.touches){var Le=this.touches[pe],Ne=ne[pe];(!Ne||Ne.dist(Le)>30)&&(this.aborted=!0)}}},sa.prototype.touchend=function(D,Y,q){if((!this.centroid||D.timeStamp-this.startTime>500)&&(this.aborted=!0),q.length===0){var ne=!this.aborted&&this.centroid;if(this.reset(),ne)return ne}};var ko=function(D){this.singleTap=new sa(D),this.numTaps=D.numTaps,this.reset()};ko.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ko.prototype.touchstart=function(D,Y,q){this.singleTap.touchstart(D,Y,q)},ko.prototype.touchmove=function(D,Y,q){this.singleTap.touchmove(D,Y,q)},ko.prototype.touchend=function(D,Y,q){var ne=this.singleTap.touchend(D,Y,q);if(ne){var pe=D.timeStamp-this.lastTime<500,Le=!this.lastTap||this.lastTap.dist(ne)<30;if(pe&&Le||this.reset(),this.count++,this.lastTime=D.timeStamp,this.lastTap=ne,this.count===this.numTaps)return this.reset(),ne}};var Ia=function(){this._zoomIn=new ko({numTouches:1,numTaps:2}),this._zoomOut=new ko({numTouches:2,numTaps:1}),this.reset()};Ia.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ia.prototype.touchstart=function(D,Y,q){this._zoomIn.touchstart(D,Y,q),this._zoomOut.touchstart(D,Y,q)},Ia.prototype.touchmove=function(D,Y,q){this._zoomIn.touchmove(D,Y,q),this._zoomOut.touchmove(D,Y,q)},Ia.prototype.touchend=function(D,Y,q){var ne=this,pe=this._zoomIn.touchend(D,Y,q),Le=this._zoomOut.touchend(D,Y,q);return pe?(this._active=!0,D.preventDefault(),setTimeout(function(){return ne.reset()},0),{cameraAnimation:function(Ne){return Ne.easeTo({duration:300,zoom:Ne.getZoom()+1,around:Ne.unproject(pe)},{originalEvent:D})}}):Le?(this._active=!0,D.preventDefault(),setTimeout(function(){return ne.reset()},0),{cameraAnimation:function(Ne){return Ne.easeTo({duration:300,zoom:Ne.getZoom()-1,around:Ne.unproject(Le)},{originalEvent:D})}}):void 0},Ia.prototype.touchcancel=function(){this.reset()},Ia.prototype.enable=function(){this._enabled=!0},Ia.prototype.disable=function(){this._enabled=!1,this.reset()},Ia.prototype.isEnabled=function(){return this._enabled},Ia.prototype.isActive=function(){return this._active};var Di=function(D){this.reset(),this._clickTolerance=D.clickTolerance||1};Di.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Di.prototype._correctButton=function(D,Y){return!1},Di.prototype._move=function(D,Y){return{}},Di.prototype.mousedown=function(D,Y){if(!this._lastPoint){var q=x.mouseButton(D);this._correctButton(D,q)&&(this._lastPoint=Y,this._eventButton=q)}},Di.prototype.mousemoveWindow=function(D,Y){var q=this._lastPoint;if(q&&(D.preventDefault(),this._moved||!(Y.dist(q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=Y,this._move(q,Y)},Di.prototype.mouseupWindow=function(D){x.mouseButton(D)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())},Di.prototype.enable=function(){this._enabled=!0},Di.prototype.disable=function(){this._enabled=!1,this.reset()},Di.prototype.isEnabled=function(){return this._enabled},Di.prototype.isActive=function(){return this._active};var ya=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.mousedown=function(q,ne){D.prototype.mousedown.call(this,q,ne),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(q,ne){return ne===0&&!q.ctrlKey},Y.prototype._move=function(q,ne){return{around:ne,panDelta:ne.sub(q)}},Y}(Di),Os=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(q,ne){return ne===0&&q.ctrlKey||ne===2},Y.prototype._move=function(q,ne){var pe=.8*(ne.x-q.x);if(pe)return this._active=!0,{bearingDelta:pe}},Y.prototype.contextmenu=function(q){q.preventDefault()},Y}(Di),Is=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(q,ne){return ne===0&&q.ctrlKey||ne===2},Y.prototype._move=function(q,ne){var pe=-.5*(ne.y-q.y);if(pe)return this._active=!0,{pitchDelta:pe}},Y.prototype.contextmenu=function(q){q.preventDefault()},Y}(Di),ia=function(D){this._minTouches=1,this._clickTolerance=D.clickTolerance||1,this.reset()};ia.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},ia.prototype.touchstart=function(D,Y,q){return this._calculateTransform(D,Y,q)},ia.prototype.touchmove=function(D,Y,q){if(this._active)return D.preventDefault(),this._calculateTransform(D,Y,q)},ia.prototype.touchend=function(D,Y,q){this._calculateTransform(D,Y,q),this._active&&q.length<this._minTouches&&this.reset()},ia.prototype.touchcancel=function(){this.reset()},ia.prototype._calculateTransform=function(D,Y,q){q.length>0&&(this._active=!0);var ne=qi(q,Y),pe=new l.Point(0,0),Le=new l.Point(0,0),Ne=0;for(var Ge in ne){var et=ne[Ge],pt=this._touches[Ge];pt&&(pe._add(et),Le._add(et.sub(pt)),Ne++,ne[Ge]=et)}if(this._touches=ne,!(Ne<this._minTouches)&&Le.mag()){var vt=Le.div(Ne);if(this._sum._add(vt),!(this._sum.mag()<this._clickTolerance))return{around:pe.div(Ne),panDelta:vt}}},ia.prototype.enable=function(){this._enabled=!0},ia.prototype.disable=function(){this._enabled=!1,this.reset()},ia.prototype.isEnabled=function(){return this._enabled},ia.prototype.isActive=function(){return this._active};var br=function(){this.reset()};function Ho(D,Y,q){for(var ne=0;ne<D.length;ne++)if(D[ne].identifier===q)return Y[ne]}br.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},br.prototype._start=function(D){},br.prototype._move=function(D,Y,q){return{}},br.prototype.touchstart=function(D,Y,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([Y[0],Y[1]]))},br.prototype.touchmove=function(D,Y,q){if(this._firstTwoTouches){D.preventDefault();var ne=this._firstTwoTouches,pe=ne[0],Le=ne[1],Ne=Ho(q,Y,pe),Ge=Ho(q,Y,Le);if(Ne&&Ge){var et=this._aroundCenter?null:Ne.add(Ge).div(2);return this._move([Ne,Ge],et,D)}}},br.prototype.touchend=function(D,Y,q){if(this._firstTwoTouches){var ne=this._firstTwoTouches,pe=ne[0],Le=ne[1],Ne=Ho(q,Y,pe),Ge=Ho(q,Y,Le);Ne&&Ge||(this._active&&x.suppressClick(),this.reset())}},br.prototype.touchcancel=function(){this.reset()},br.prototype.enable=function(D){this._enabled=!0,this._aroundCenter=!!D&&D.around==="center"},br.prototype.disable=function(){this._enabled=!1,this.reset()},br.prototype.isEnabled=function(){return this._enabled},br.prototype.isActive=function(){return this._active};function la(D,Y){return Math.log(D/Y)/Math.LN2}var Rs=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){D.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},Y.prototype._move=function(q,ne){var pe=this._distance;if(this._distance=q[0].dist(q[1]),this._active||!(Math.abs(la(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:la(this._distance,pe),pinchAround:ne}},Y}(br);function ts(D,Y){return 180*D.angleWith(Y)/Math.PI}var ns=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){D.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},Y.prototype._move=function(q,ne){var pe=this._vector;if(this._vector=q[0].sub(q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ts(this._vector,pe),pinchAround:ne}},Y.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var ne=25/(Math.PI*this._minDiameter)*360,pe=ts(q,this._startVector);return Math.abs(pe)<ne},Y}(br);function rs(D){return Math.abs(D.y)>Math.abs(D.x)}var _r=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){D.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function(q){this._lastPoints=q,rs(q[0].sub(q[1]))&&(this._valid=!1)},Y.prototype._move=function(q,ne,pe){var Le=q[0].sub(this._lastPoints[0]),Ne=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Le,Ne,pe.timeStamp),this._valid)return this._lastPoints=q,this._active=!0,{pitchDelta:(Le.y+Ne.y)/2*-.5}},Y.prototype.gestureBeginsVertically=function(q,ne,pe){if(this._valid!==void 0)return this._valid;var Le=q.mag()>=2,Ne=ne.mag()>=2;if(Le||Ne){if(!Le||!Ne)return this._firstMove===void 0&&(this._firstMove=pe),pe-this._firstMove<100&&void 0;var Ge=q.y>0==ne.y>0;return rs(q)&&rs(ne)&&Ge}},Y}(br),is={panStep:100,bearingStep:15,pitchStep:10},Ra=function(){var D=is;this._panStep=D.panStep,this._bearingStep=D.bearingStep,this._pitchStep=D.pitchStep};function zs(D){return D*(2-D)}Ra.prototype.reset=function(){this._active=!1},Ra.prototype.keydown=function(D){var Y=this;if(!(D.altKey||D.ctrlKey||D.metaKey)){var q=0,ne=0,pe=0,Le=0,Ne=0;switch(D.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:D.shiftKey?ne=-1:(D.preventDefault(),Le=-1);break;case 39:D.shiftKey?ne=1:(D.preventDefault(),Le=1);break;case 38:D.shiftKey?pe=1:(D.preventDefault(),Ne=-1);break;case 40:D.shiftKey?pe=-1:(D.preventDefault(),Ne=1);break;default:return}return{cameraAnimation:function(Ge){var et=Ge.getZoom();Ge.easeTo({duration:300,easeId:"keyboardHandler",easing:zs,zoom:q?Math.round(et)+q*(D.shiftKey?2:1):et,bearing:Ge.getBearing()+ne*Y._bearingStep,pitch:Ge.getPitch()+pe*Y._pitchStep,offset:[-Le*Y._panStep,-Ne*Y._panStep],center:Ge.getCenter()},{originalEvent:D})}}}},Ra.prototype.enable=function(){this._enabled=!0},Ra.prototype.disable=function(){this._enabled=!1,this.reset()},Ra.prototype.isEnabled=function(){return this._enabled},Ra.prototype.isActive=function(){return this._active};var bs=4.000244140625,Xi=function(D,Y){this._map=D,this._el=D.getCanvasContainer(),this._handler=Y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Xi.prototype.setZoomRate=function(D){this._defaultZoomRate=D},Xi.prototype.setWheelZoomRate=function(D){this._wheelZoomRate=D},Xi.prototype.isEnabled=function(){return!!this._enabled},Xi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Xi.prototype.isZooming=function(){return!!this._zooming},Xi.prototype.enable=function(D){this.isEnabled()||(this._enabled=!0,this._aroundCenter=D&&D.around==="center")},Xi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Xi.prototype.wheel=function(D){if(this.isEnabled()){var Y=D.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*D.deltaY:D.deltaY,q=l.browser.now(),ne=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,Y!==0&&Y%bs==0?this._type="wheel":Y!==0&&Math.abs(Y)<4?this._type="trackpad":ne>400?(this._type=null,this._lastValue=Y,this._timeout=setTimeout(this._onTimeout,40,D)):this._type||(this._type=Math.abs(ne*Y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,Y+=this._lastValue)),D.shiftKey&&Y&&(Y/=4),this._type&&(this._lastWheelEvent=D,this._delta-=Y,this._active||this._start(D)),D.preventDefault()}},Xi.prototype._onTimeout=function(D){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(D)},Xi.prototype._start=function(D){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var Y=x.mousePos(this._el,D);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(Y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Xi.prototype.renderFrame=function(){return this._onScrollFrame()},Xi.prototype._onScrollFrame=function(){var D=this;if(this._frameId&&(this._frameId=null,this.isActive())){var Y=this._map.transform;if(this._delta!==0){var q=this._type==="wheel"&&Math.abs(this._delta)>bs?this._wheelZoomRate:this._defaultZoomRate,ne=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&ne!==0&&(ne=1/ne);var pe=typeof this._targetZoom=="number"?Y.zoomScale(this._targetZoom):Y.scale;this._targetZoom=Math.min(Y.maxZoom,Math.max(Y.minZoom,Y.scaleZoom(pe*ne))),this._type==="wheel"&&(this._startZoom=Y.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Le,Ne=typeof this._targetZoom=="number"?this._targetZoom:Y.zoom,Ge=this._startZoom,et=this._easing,pt=!1;if(this._type==="wheel"&&Ge&&et){var vt=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),te=et(vt);Le=l.number(Ge,Ne,te),vt<1?this._frameId||(this._frameId=!0):pt=!0}else Le=Ne,pt=!0;return this._active=!0,pt&&(this._active=!1,this._finishTimeout=setTimeout(function(){D._zooming=!1,D._handler._triggerRenderFrame(),delete D._targetZoom,delete D._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!pt,zoomDelta:Le-Y.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Xi.prototype._smoothOutEasing=function(D){var Y=l.ease;if(this._prevEase){var q=this._prevEase,ne=(l.browser.now()-q.start)/q.duration,pe=q.easing(ne+.01)-q.easing(ne),Le=.27/Math.sqrt(pe*pe+1e-4)*.01,Ne=Math.sqrt(.0729-Le*Le);Y=l.bezier(Le,Ne,.25,1)}return this._prevEase={start:l.browser.now(),duration:D,easing:Y},Y},Xi.prototype.reset=function(){this._active=!1};var qo=function(D,Y){this._clickZoom=D,this._tapZoom=Y};qo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},qo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},qo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},qo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var co=function(){this.reset()};co.prototype.reset=function(){this._active=!1},co.prototype.dblclick=function(D,Y){return D.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+(D.shiftKey?-1:1),around:q.unproject(Y)},{originalEvent:D})}}},co.prototype.enable=function(){this._enabled=!0},co.prototype.disable=function(){this._enabled=!1,this.reset()},co.prototype.isEnabled=function(){return this._enabled},co.prototype.isActive=function(){return this._active};var xa=function(){this._tap=new ko({numTouches:1,numTaps:1}),this.reset()};xa.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},xa.prototype.touchstart=function(D,Y,q){this._swipePoint||(this._tapTime&&D.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=Y[0],this._swipeTouch=q[0].identifier):this._tap.touchstart(D,Y,q))},xa.prototype.touchmove=function(D,Y,q){if(this._tapTime){if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var ne=Y[0],pe=ne.y-this._swipePoint.y;return this._swipePoint=ne,D.preventDefault(),this._active=!0,{zoomDelta:pe/128}}}else this._tap.touchmove(D,Y,q)},xa.prototype.touchend=function(D,Y,q){this._tapTime?this._swipePoint&&q.length===0&&this.reset():this._tap.touchend(D,Y,q)&&(this._tapTime=D.timeStamp)},xa.prototype.touchcancel=function(){this.reset()},xa.prototype.enable=function(){this._enabled=!0},xa.prototype.disable=function(){this._enabled=!1,this.reset()},xa.prototype.isEnabled=function(){return this._enabled},xa.prototype.isActive=function(){return this._active};var Ao=function(D,Y,q){this._el=D,this._mousePan=Y,this._touchPan=q};Ao.prototype.enable=function(D){this._inertiaOptions=D||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ao.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ao.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ao.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Va=function(D,Y,q){this._pitchWithRotate=D.pitchWithRotate,this._mouseRotate=Y,this._mousePitch=q};Va.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Va.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Va.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Va.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var za=function(D,Y,q,ne){this._el=D,this._touchZoom=Y,this._touchRotate=q,this._tapDragZoom=ne,this._rotationDisabled=!1,this._enabled=!0};za.prototype.enable=function(D){this._touchZoom.enable(D),this._rotationDisabled||this._touchRotate.enable(D),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},za.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},za.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},za.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},za.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},za.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Go=function(D){return D.zoom||D.drag||D.pitch||D.rotate},Ji=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y}(l.Event);function Da(D){return D.panDelta&&D.panDelta.mag()||D.zoomDelta||D.bearingDelta||D.pitchDelta}var ri=function(D,Y){this._map=D,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jo(D),this._bearingSnap=Y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(Y),l.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!1}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[l.window,"blur",void 0]];for(var ne=0,pe=this._listeners;ne<pe.length;ne+=1){var Le=pe[ne],Ne=Le[0],Ge=Le[1],et=Le[2];x.addEventListener(Ne,Ge,Ne===l.window.document?this.handleWindowEvent:this.handleEvent,et)}};ri.prototype.destroy=function(){for(var D=0,Y=this._listeners;D<Y.length;D+=1){var q=Y[D],ne=q[0],pe=q[1],Le=q[2];x.removeEventListener(ne,pe,ne===l.window.document?this.handleWindowEvent:this.handleEvent,Le)}},ri.prototype._addDefaultHandlers=function(D){var Y=this._map,q=Y.getCanvasContainer();this._add("mapEvent",new Ii(Y,D));var ne=Y.boxZoom=new Yi(Y,D);this._add("boxZoom",ne);var pe=new Ia,Le=new co;Y.doubleClickZoom=new qo(Le,pe),this._add("tapZoom",pe),this._add("clickZoom",Le);var Ne=new xa;this._add("tapDragZoom",Ne);var Ge=Y.touchPitch=new _r;this._add("touchPitch",Ge);var et=new Os(D),pt=new Is(D);Y.dragRotate=new Va(D,et,pt),this._add("mouseRotate",et,["mousePitch"]),this._add("mousePitch",pt,["mouseRotate"]);var vt=new ya(D),te=new ia(D);Y.dragPan=new Ao(q,vt,te),this._add("mousePan",vt),this._add("touchPan",te,["touchZoom","touchRotate"]);var ue=new ns,we=new Rs;Y.touchZoomRotate=new za(q,we,ue,Ne),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",we,["touchPan","touchRotate"]);var Oe=Y.scrollZoom=new Xi(Y,this);this._add("scrollZoom",Oe,["mousePan"]);var De=Y.keyboard=new Ra;this._add("keyboard",De),this._add("blockableMapEvent",new Wi(Y));for(var Ue=0,We=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ue<We.length;Ue+=1){var Ke=We[Ue];D.interactive&&D[Ke]&&Y[Ke].enable(D[Ke])}},ri.prototype._add=function(D,Y,q){this._handlers.push({handlerName:D,handler:Y,allowed:q}),this._handlersById[D]=Y},ri.prototype.stop=function(){if(!this._updatingCamera){for(var D=0,Y=this._handlers;D<Y.length;D+=1)Y[D].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ri.prototype.isActive=function(){for(var D=0,Y=this._handlers;D<Y.length;D+=1)if(Y[D].handler.isActive())return!0;return!1},ri.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ri.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ri.prototype.isMoving=function(){return Boolean(Go(this._eventsInProgress))||this.isZooming()},ri.prototype._blockedByActive=function(D,Y,q){for(var ne in D)if(ne!==q&&(!Y||Y.indexOf(ne)<0))return!0;return!1},ri.prototype.handleWindowEvent=function(D){this.handleEvent(D,D.type+"Window")},ri.prototype._getMapTouches=function(D){for(var Y=[],q=0,ne=D;q<ne.length;q+=1){var pe=ne[q],Le=pe.target;this._el.contains(Le)&&Y.push(pe)}return Y},ri.prototype.handleEvent=function(D,Y){if(D.type!=="blur"){this._updatingCamera=!0;for(var q=D.type==="renderFrame"?void 0:D,ne={needsRenderFrame:!1},pe={},Le={},Ne=D.touches?this._getMapTouches(D.touches):void 0,Ge=Ne?x.touchPos(this._el,Ne):x.mousePos(this._el,D),et=0,pt=this._handlers;et<pt.length;et+=1){var vt=pt[et],te=vt.handlerName,ue=vt.handler,we=vt.allowed;if(ue.isEnabled()){var Oe=void 0;this._blockedByActive(Le,we,te)?ue.reset():ue[Y||D.type]&&(Oe=ue[Y||D.type](D,Ge,Ne),this.mergeHandlerResult(ne,pe,Oe,te,q),Oe&&Oe.needsRenderFrame&&this._triggerRenderFrame()),(Oe||ue.isActive())&&(Le[te]=ue)}}var De={};for(var Ue in this._previousActiveHandlers)Le[Ue]||(De[Ue]=q);this._previousActiveHandlers=Le,(Object.keys(De).length||Da(ne))&&(this._changes.push([ne,pe,De]),this._triggerRenderFrame()),(Object.keys(Le).length||Da(ne))&&this._map._stop(!0),this._updatingCamera=!1;var We=ne.cameraAnimation;We&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],We(this._map))}else this.stop()},ri.prototype.mergeHandlerResult=function(D,Y,q,ne,pe){if(q){l.extend(D,q);var Le={handlerName:ne,originalEvent:q.originalEvent||pe};q.zoomDelta!==void 0&&(Y.zoom=Le),q.panDelta!==void 0&&(Y.drag=Le),q.pitchDelta!==void 0&&(Y.pitch=Le),q.bearingDelta!==void 0&&(Y.rotate=Le)}},ri.prototype._applyChanges=function(){for(var D={},Y={},q={},ne=0,pe=this._changes;ne<pe.length;ne+=1){var Le=pe[ne],Ne=Le[0],Ge=Le[1],et=Le[2];Ne.panDelta&&(D.panDelta=(D.panDelta||new l.Point(0,0))._add(Ne.panDelta)),Ne.zoomDelta&&(D.zoomDelta=(D.zoomDelta||0)+Ne.zoomDelta),Ne.bearingDelta&&(D.bearingDelta=(D.bearingDelta||0)+Ne.bearingDelta),Ne.pitchDelta&&(D.pitchDelta=(D.pitchDelta||0)+Ne.pitchDelta),Ne.around!==void 0&&(D.around=Ne.around),Ne.pinchAround!==void 0&&(D.pinchAround=Ne.pinchAround),Ne.noInertia&&(D.noInertia=Ne.noInertia),l.extend(Y,Ge),l.extend(q,et)}this._updateMapTransform(D,Y,q),this._changes=[]},ri.prototype._updateMapTransform=function(D,Y,q){var ne=this._map,pe=ne.transform;if(!Da(D))return this._fireEvents(Y,q);var Le=D.panDelta,Ne=D.zoomDelta,Ge=D.bearingDelta,et=D.pitchDelta,pt=D.around,vt=D.pinchAround;vt!==void 0&&(pt=vt),ne._stop(!0),pt=pt||ne.transform.centerPoint;var te=pe.pointLocation(Le?pt.sub(Le):pt);Ge&&(pe.bearing+=Ge),et&&(pe.pitch+=et),Ne&&(pe.zoom+=Ne),pe.setLocationAtPoint(te,pt),this._map._update(),D.noInertia||this._inertia.record(D),this._fireEvents(Y,q)},ri.prototype._fireEvents=function(D,Y){var q=this,ne=Go(this._eventsInProgress),pe=Go(D),Le={};for(var Ne in D){var Ge=D[Ne].originalEvent;this._eventsInProgress[Ne]||(Le[Ne+"start"]=Ge),this._eventsInProgress[Ne]=D[Ne]}for(var et in!ne&&pe&&this._fireEvent("movestart",pe.originalEvent),Le)this._fireEvent(et,Le[et]);for(var pt in D.rotate&&(this._bearingChanged=!0),pe&&this._fireEvent("move",pe.originalEvent),D){var vt=D[pt].originalEvent;this._fireEvent(pt,vt)}var te,ue={};for(var we in this._eventsInProgress){var Oe=this._eventsInProgress[we],De=Oe.handlerName,Ue=Oe.originalEvent;this._handlersById[De].isActive()||(delete this._eventsInProgress[we],te=Y[De]||Ue,ue[we+"end"]=te)}for(var We in ue)this._fireEvent(We,ue[We]);var Ke=Go(this._eventsInProgress);if((ne||pe)&&!Ke){this._updatingCamera=!0;var it=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),lt=function(At){return At!==0&&-q._bearingSnap<At&&At<q._bearingSnap};it?(lt(it.bearing||this._map.getBearing())&&(it.bearing=0),this._map.easeTo(it,{originalEvent:te})):(this._map.fire(new l.Event("moveend",{originalEvent:te})),lt(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ri.prototype._fireEvent=function(D,Y){this._map.fire(new l.Event(D,Y?{originalEvent:Y}:{}))},ri.prototype._triggerRenderFrame=function(){var D=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(Y){delete D._frameId,D.handleEvent(new Ji("renderFrame",{timeStamp:Y})),D._applyChanges()}))};var _s=function(D){function Y(q,ne){D.call(this),this._moving=!1,this._zooming=!1,this.transform=q,this._bearingSnap=ne.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(q,ne){return this.jumpTo({center:q},ne)},Y.prototype.panBy=function(q,ne,pe){return q=l.Point.convert(q).mult(-1),this.panTo(this.transform.center,l.extend({offset:q},ne),pe)},Y.prototype.panTo=function(q,ne,pe){return this.easeTo(l.extend({center:q},ne),pe)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function(q,ne){return this.jumpTo({zoom:q},ne),this},Y.prototype.zoomTo=function(q,ne,pe){return this.easeTo(l.extend({zoom:q},ne),pe)},Y.prototype.zoomIn=function(q,ne){return this.zoomTo(this.getZoom()+1,q,ne),this},Y.prototype.zoomOut=function(q,ne){return this.zoomTo(this.getZoom()-1,q,ne),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(q,ne){return this.jumpTo({bearing:q},ne),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(q,ne){return this.jumpTo({padding:q},ne),this},Y.prototype.rotateTo=function(q,ne,pe){return this.easeTo(l.extend({bearing:q},ne),pe)},Y.prototype.resetNorth=function(q,ne){return this.rotateTo(0,l.extend({duration:1e3},q),ne),this},Y.prototype.resetNorthPitch=function(q,ne){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},q),ne),this},Y.prototype.snapToNorth=function(q,ne){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,ne):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(q,ne){return this.jumpTo({pitch:q},ne),this},Y.prototype.cameraForBounds=function(q,ne){return q=l.LngLatBounds.convert(q),this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),0,ne)},Y.prototype._cameraForBoxAndBearing=function(q,ne,pe,Le){var Ne={top:0,bottom:0,right:0,left:0};if(typeof(Le=l.extend({padding:Ne,offset:[0,0],maxZoom:this.transform.maxZoom},Le)).padding=="number"){var Ge=Le.padding;Le.padding={top:Ge,bottom:Ge,right:Ge,left:Ge}}Le.padding=l.extend(Ne,Le.padding);var et=this.transform,pt=et.padding,vt=et.project(l.LngLat.convert(q)),te=et.project(l.LngLat.convert(ne)),ue=vt.rotate(-pe*Math.PI/180),we=te.rotate(-pe*Math.PI/180),Oe=new l.Point(Math.max(ue.x,we.x),Math.max(ue.y,we.y)),De=new l.Point(Math.min(ue.x,we.x),Math.min(ue.y,we.y)),Ue=Oe.sub(De),We=(et.width-(pt.left+pt.right+Le.padding.left+Le.padding.right))/Ue.x,Ke=(et.height-(pt.top+pt.bottom+Le.padding.top+Le.padding.bottom))/Ue.y;if(!(Ke<0||We<0)){var it=Math.min(et.scaleZoom(et.scale*Math.min(We,Ke)),Le.maxZoom),lt=l.Point.convert(Le.offset),At=(Le.padding.left-Le.padding.right)/2,Ft=(Le.padding.top-Le.padding.bottom)/2,Bt=new l.Point(lt.x+At,lt.y+Ft).mult(et.scale/et.zoomScale(it));return{center:et.unproject(vt.add(te).div(2).sub(Bt)),zoom:it,bearing:pe}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Y.prototype.fitBounds=function(q,ne,pe){return this._fitInternal(this.cameraForBounds(q,ne),ne,pe)},Y.prototype.fitScreenCoordinates=function(q,ne,pe,Le,Ne){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(q)),this.transform.pointLocation(l.Point.convert(ne)),pe,Le),Le,Ne)},Y.prototype._fitInternal=function(q,ne,pe){return q?(delete(ne=l.extend(q,ne)).padding,ne.linear?this.easeTo(ne,pe):this.flyTo(ne,pe)):this},Y.prototype.jumpTo=function(q,ne){this.stop();var pe=this.transform,Le=!1,Ne=!1,Ge=!1;return"zoom"in q&&pe.zoom!==+q.zoom&&(Le=!0,pe.zoom=+q.zoom),q.center!==void 0&&(pe.center=l.LngLat.convert(q.center)),"bearing"in q&&pe.bearing!==+q.bearing&&(Ne=!0,pe.bearing=+q.bearing),"pitch"in q&&pe.pitch!==+q.pitch&&(Ge=!0,pe.pitch=+q.pitch),q.padding==null||pe.isPaddingEqual(q.padding)||(pe.padding=q.padding),this.fire(new l.Event("movestart",ne)).fire(new l.Event("move",ne)),Le&&this.fire(new l.Event("zoomstart",ne)).fire(new l.Event("zoom",ne)).fire(new l.Event("zoomend",ne)),Ne&&this.fire(new l.Event("rotatestart",ne)).fire(new l.Event("rotate",ne)).fire(new l.Event("rotateend",ne)),Ge&&this.fire(new l.Event("pitchstart",ne)).fire(new l.Event("pitch",ne)).fire(new l.Event("pitchend",ne)),this.fire(new l.Event("moveend",ne))},Y.prototype.easeTo=function(q,ne){var pe=this;this._stop(!1,q.easeId),((q=l.extend({offset:[0,0],duration:500,easing:l.ease},q)).animate===!1||!q.essential&&l.browser.prefersReducedMotion)&&(q.duration=0);var Le=this.transform,Ne=this.getZoom(),Ge=this.getBearing(),et=this.getPitch(),pt=this.getPadding(),vt="zoom"in q?+q.zoom:Ne,te="bearing"in q?this._normalizeBearing(q.bearing,Ge):Ge,ue="pitch"in q?+q.pitch:et,we="padding"in q?q.padding:Le.padding,Oe=l.Point.convert(q.offset),De=Le.centerPoint.add(Oe),Ue=Le.pointLocation(De),We=l.LngLat.convert(q.center||Ue);this._normalizeCenter(We);var Ke,it,lt=Le.project(Ue),At=Le.project(We).sub(lt),Ft=Le.zoomScale(vt-Ne);q.around&&(Ke=l.LngLat.convert(q.around),it=Le.locationPoint(Ke));var Bt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||vt!==Ne,this._rotating=this._rotating||Ge!==te,this._pitching=this._pitching||ue!==et,this._padding=!Le.isPaddingEqual(we),this._easeId=q.easeId,this._prepareEase(ne,q.noMoveStart,Bt),clearTimeout(this._easeEndTimeoutID),this._ease(function(Zt){if(pe._zooming&&(Le.zoom=l.number(Ne,vt,Zt)),pe._rotating&&(Le.bearing=l.number(Ge,te,Zt)),pe._pitching&&(Le.pitch=l.number(et,ue,Zt)),pe._padding&&(Le.interpolatePadding(pt,we,Zt),De=Le.centerPoint.add(Oe)),Ke)Le.setLocationAtPoint(Ke,it);else{var un=Le.zoomScale(Le.zoom-Ne),Wt=vt>Ne?Math.min(2,Ft):Math.max(.5,Ft),en=Math.pow(Wt,1-Zt),Jt=Le.unproject(lt.add(At.mult(Zt*en)).mult(un));Le.setLocationAtPoint(Le.renderWorldCopies?Jt.wrap():Jt,De)}pe._fireMoveEvents(ne)},function(Zt){pe._afterEase(ne,Zt)},q),this},Y.prototype._prepareEase=function(q,ne,pe){pe===void 0&&(pe={}),this._moving=!0,ne||pe.moving||this.fire(new l.Event("movestart",q)),this._zooming&&!pe.zooming&&this.fire(new l.Event("zoomstart",q)),this._rotating&&!pe.rotating&&this.fire(new l.Event("rotatestart",q)),this._pitching&&!pe.pitching&&this.fire(new l.Event("pitchstart",q))},Y.prototype._fireMoveEvents=function(q){this.fire(new l.Event("move",q)),this._zooming&&this.fire(new l.Event("zoom",q)),this._rotating&&this.fire(new l.Event("rotate",q)),this._pitching&&this.fire(new l.Event("pitch",q))},Y.prototype._afterEase=function(q,ne){if(!this._easeId||!ne||this._easeId!==ne){delete this._easeId;var pe=this._zooming,Le=this._rotating,Ne=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,pe&&this.fire(new l.Event("zoomend",q)),Le&&this.fire(new l.Event("rotateend",q)),Ne&&this.fire(new l.Event("pitchend",q)),this.fire(new l.Event("moveend",q))}},Y.prototype.flyTo=function(q,ne){var pe=this;if(!q.essential&&l.browser.prefersReducedMotion){var Le=l.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Le,ne)}this.stop(),q=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},q);var Ne=this.transform,Ge=this.getZoom(),et=this.getBearing(),pt=this.getPitch(),vt=this.getPadding(),te="zoom"in q?l.clamp(+q.zoom,Ne.minZoom,Ne.maxZoom):Ge,ue="bearing"in q?this._normalizeBearing(q.bearing,et):et,we="pitch"in q?+q.pitch:pt,Oe="padding"in q?q.padding:Ne.padding,De=Ne.zoomScale(te-Ge),Ue=l.Point.convert(q.offset),We=Ne.centerPoint.add(Ue),Ke=Ne.pointLocation(We),it=l.LngLat.convert(q.center||Ke);this._normalizeCenter(it);var lt=Ne.project(Ke),At=Ne.project(it).sub(lt),Ft=q.curve,Bt=Math.max(Ne.width,Ne.height),Zt=Bt/De,un=At.mag();if("minZoom"in q){var Wt=l.clamp(Math.min(q.minZoom,Ge,te),Ne.minZoom,Ne.maxZoom),en=Bt/Ne.zoomScale(Wt-Ge);Ft=Math.sqrt(en/un*2)}var Jt=Ft*Ft;function wn(sr){var pr=(Zt*Zt-Bt*Bt+(sr?-1:1)*Jt*Jt*un*un)/(2*(sr?Zt:Bt)*Jt*un);return Math.log(Math.sqrt(pr*pr+1)-pr)}function pn(sr){return(Math.exp(sr)-Math.exp(-sr))/2}function Qt(sr){return(Math.exp(sr)+Math.exp(-sr))/2}var Ln=wn(0),Rn=function(sr){return Qt(Ln)/Qt(Ln+Ft*sr)},Xn=function(sr){return Bt*((Qt(Ln)*(pn(pr=Ln+Ft*sr)/Qt(pr))-pn(Ln))/Jt)/un;var pr},Jn=(wn(1)-Ln)/Ft;if(Math.abs(un)<1e-6||!isFinite(Jn)){if(Math.abs(Bt-Zt)<1e-6)return this.easeTo(q,ne);var vr=Zt<Bt?-1:1;Jn=Math.abs(Math.log(Zt/Bt))/Ft,Xn=function(){return 0},Rn=function(sr){return Math.exp(vr*Ft*sr)}}if("duration"in q)q.duration=+q.duration;else{var yr="screenSpeed"in q?+q.screenSpeed/Ft:+q.speed;q.duration=1e3*Jn/yr}return q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=et!==ue,this._pitching=we!==pt,this._padding=!Ne.isPaddingEqual(Oe),this._prepareEase(ne,!1),this._ease(function(sr){var pr=sr*Jn,kr=1/Rn(pr);Ne.zoom=sr===1?te:Ge+Ne.scaleZoom(kr),pe._rotating&&(Ne.bearing=l.number(et,ue,sr)),pe._pitching&&(Ne.pitch=l.number(pt,we,sr)),pe._padding&&(Ne.interpolatePadding(vt,Oe,sr),We=Ne.centerPoint.add(Ue));var Vr=sr===1?it:Ne.unproject(lt.add(At.mult(Xn(pr))).mult(kr));Ne.setLocationAtPoint(Ne.renderWorldCopies?Vr.wrap():Vr,We),pe._fireMoveEvents(ne)},function(){return pe._afterEase(ne)},q),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function(q,ne){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var pe=this._onEaseEnd;delete this._onEaseEnd,pe.call(this,ne)}if(!q){var Le=this.handlers;Le&&Le.stop()}return this},Y.prototype._ease=function(q,ne,pe){pe.animate===!1||pe.duration===0?(q(1),ne()):(this._easeStart=l.browser.now(),this._easeOptions=pe,this._onEaseFrame=q,this._onEaseEnd=ne,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var q=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(q,ne){q=l.wrap(q,-180,180);var pe=Math.abs(q-ne);return Math.abs(q-360-ne)<pe&&(q-=360),Math.abs(q+360-ne)<pe&&(q+=360),q},Y.prototype._normalizeCenter=function(q){var ne=this.transform;if(ne.renderWorldCopies&&!ne.lngRange){var pe=q.lng-ne.center.lng;q.lng+=pe>180?-360:pe<-180?360:0}},Y}(l.Evented),Aa=function(D){D===void 0&&(D={}),this.options=D,l.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Aa.prototype.getDefaultPosition=function(){return"bottom-right"},Aa.prototype.onAdd=function(D){var Y=this.options&&this.options.compact;return this._map=D,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=x.create("div","mapboxgl-ctrl-attrib-inner",this._container),Y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),Y===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Aa.prototype.onRemove=function(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Aa.prototype._updateEditLink=function(){var D=this._editLink;D||(D=this._editLink=this._container.querySelector(".mapbox-improve-map"));var Y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(D){var q=Y.reduce(function(ne,pe,Le){return pe.value&&(ne+=pe.key+"="+pe.value+(Le<Y.length-1?"&":"")),ne},"?");D.href=l.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),D.rel="noopener nofollow"}},Aa.prototype._updateData=function(D){!D||D.sourceDataType!=="metadata"&&D.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Aa.prototype._updateAttributions=function(){if(this._map.style){var D=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?D=D.concat(this.options.customAttribution.map(function(Ge){return typeof Ge!="string"?"":Ge})):typeof this.options.customAttribution=="string"&&D.push(this.options.customAttribution)),this._map.style.stylesheet){var Y=this._map.style.stylesheet;this.styleOwner=Y.owner,this.styleId=Y.id}var q=this._map.style.sourceCaches;for(var ne in q){var pe=q[ne];if(pe.used){var Le=pe.getSource();Le.attribution&&D.indexOf(Le.attribution)<0&&D.push(Le.attribution)}}D.sort(function(Ge,et){return Ge.length-et.length});var Ne=(D=D.filter(function(Ge,et){for(var pt=et+1;pt<D.length;pt++)if(D[pt].indexOf(Ge)>=0)return!1;return!0})).join(" | ");Ne!==this._attribHTML&&(this._attribHTML=Ne,D.length?(this._innerContainer.innerHTML=Ne,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Aa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Fa=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Fa.prototype.onAdd=function(D){this._map=D,this._container=x.create("div","mapboxgl-ctrl");var Y=x.create("a","mapboxgl-ctrl-logo");return Y.target="_blank",Y.rel="noopener nofollow",Y.href="https://www.mapbox.com/",Y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Y.setAttribute("rel","noopener nofollow"),this._container.appendChild(Y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Fa.prototype.onRemove=function(){x.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Fa.prototype.getDefaultPosition=function(){return"bottom-left"},Fa.prototype._updateLogo=function(D){D&&D.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Fa.prototype._logoRequired=function(){if(this._map.style){var D=this._map.style.sourceCaches;for(var Y in D)if(D[Y].getSource().mapbox_logo)return!0;return!1}},Fa.prototype._updateCompact=function(){var D=this._container.children;if(D.length){var Y=D[0];this._map.getCanvasContainer().offsetWidth<250?Y.classList.add("mapboxgl-compact"):Y.classList.remove("mapboxgl-compact")}};var $a=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};$a.prototype.add=function(D){var Y=++this._id;return this._queue.push({callback:D,id:Y,cancelled:!1}),Y},$a.prototype.remove=function(D){for(var Y=this._currentlyRunning,q=0,ne=Y?this._queue.concat(Y):this._queue;q<ne.length;q+=1){var pe=ne[q];if(pe.id===D)return void(pe.cancelled=!0)}},$a.prototype.run=function(D){D===void 0&&(D=0);var Y=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,ne=Y;q<ne.length;q+=1){var pe=ne[q];if(!pe.cancelled&&(pe.callback(D),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},$a.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ua={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ni=l.window.HTMLImageElement,Vi=l.window.HTMLElement,Ha=l.window.ImageBitmap,ca=60,Qa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:ca,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Mo=function(D){function Y(ne){var pe=this;if((ne=l.extend({},Qa,ne)).minZoom!=null&&ne.maxZoom!=null&&ne.minZoom>ne.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(ne.minPitch!=null&&ne.maxPitch!=null&&ne.minPitch>ne.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(ne.minPitch!=null&&ne.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(ne.maxPitch!=null&&ne.maxPitch>ca)throw new Error("maxPitch must be less than or equal to 60");var Le=new Xr(ne.minZoom,ne.maxZoom,ne.minPitch,ne.maxPitch,ne.renderWorldCopies);if(D.call(this,Le,ne),this._interactive=ne.interactive,this._maxTileCacheSize=ne.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ne.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ne.preserveDrawingBuffer,this._antialias=ne.antialias,this._trackResize=ne.trackResize,this._bearingSnap=ne.bearingSnap,this._refreshExpiredTiles=ne.refreshExpiredTiles,this._fadeDuration=ne.fadeDuration,this._crossSourceCollisions=ne.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=ne.collectResourceTiming,this._renderTaskQueue=new $a,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},ua,ne.locale),this._requestManager=new l.RequestManager(ne.transformRequest,ne.accessToken),typeof ne.container=="string"){if(this._container=l.window.document.getElementById(ne.container),!this._container)throw new Error("Container '"+ne.container+"' not found.")}else{if(!(ne.container instanceof Vi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=ne.container}if(ne.maxBounds&&this.setMaxBounds(ne.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return pe._update(!1)}),this.on("moveend",function(){return pe._update(!1)}),this.on("zoom",function(){return pe._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ri(this,ne);var Ne=typeof ne.hash=="string"&&ne.hash||void 0;this._hash=ne.hash&&new lo(Ne).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:ne.center,zoom:ne.zoom,bearing:ne.bearing,pitch:ne.pitch}),ne.bounds&&(this.resize(),this.fitBounds(ne.bounds,l.extend({},ne.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=ne.localIdeographFontFamily,ne.style&&this.setStyle(ne.style,{localIdeographFontFamily:ne.localIdeographFontFamily}),ne.attributionControl&&this.addControl(new Aa({customAttribution:ne.customAttribution})),this.addControl(new Fa,ne.logoPosition),this.on("style.load",function(){pe.transform.unmodified&&pe.jumpTo(pe.style.stylesheet)}),this.on("data",function(Ge){pe._update(Ge.dataType==="style"),pe.fire(new l.Event(Ge.dataType+"data",Ge))}),this.on("dataloading",function(Ge){pe.fire(new l.Event(Ge.dataType+"dataloading",Ge))})}D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y;var q={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(ne,pe){if(pe===void 0&&ne.getDefaultPosition&&(pe=ne.getDefaultPosition()),pe===void 0&&(pe="top-right"),!ne||!ne.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Le=ne.onAdd(this);this._controls.push(ne);var Ne=this._controlPositions[pe];return pe.indexOf("bottom")!==-1?Ne.insertBefore(Le,Ne.firstChild):Ne.appendChild(Le),this},Y.prototype.removeControl=function(ne){if(!ne||!ne.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var pe=this._controls.indexOf(ne);return pe>-1&&this._controls.splice(pe,1),ne.onRemove(this),this},Y.prototype.resize=function(ne){var pe=this._containerDimensions(),Le=pe[0],Ne=pe[1];this._resizeCanvas(Le,Ne),this.transform.resize(Le,Ne),this.painter.resize(Le,Ne);var Ge=!this._moving;return Ge&&(this.stop(),this.fire(new l.Event("movestart",ne)).fire(new l.Event("move",ne))),this.fire(new l.Event("resize",ne)),Ge&&this.fire(new l.Event("moveend",ne)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(ne){return this.transform.setMaxBounds(l.LngLatBounds.convert(ne)),this._update()},Y.prototype.setMinZoom=function(ne){if((ne=ne??-2)>=-2&&ne<=this.transform.maxZoom)return this.transform.minZoom=ne,this._update(),this.getZoom()<ne&&this.setZoom(ne),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(ne){if((ne=ne??22)>=this.transform.minZoom)return this.transform.maxZoom=ne,this._update(),this.getZoom()>ne&&this.setZoom(ne),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(ne){if((ne=ne??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(ne>=0&&ne<=this.transform.maxPitch)return this.transform.minPitch=ne,this._update(),this.getPitch()<ne&&this.setPitch(ne),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(ne){if((ne=ne??ca)>ca)throw new Error("maxPitch must be less than or equal to 60");if(ne>=this.transform.minPitch)return this.transform.maxPitch=ne,this._update(),this.getPitch()>ne&&this.setPitch(ne),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(ne){return this.transform.renderWorldCopies=ne,this._update()},Y.prototype.project=function(ne){return this.transform.locationPoint(l.LngLat.convert(ne))},Y.prototype.unproject=function(ne){return this.transform.pointLocation(l.Point.convert(ne))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(ne,pe,Le){var Ne,Ge=this;if(ne==="mouseenter"||ne==="mouseover"){var et=!1;return{layer:pe,listener:Le,delegates:{mousemove:function(vt){var te=Ge.getLayer(pe)?Ge.queryRenderedFeatures(vt.point,{layers:[pe]}):[];te.length?et||(et=!0,Le.call(Ge,new mi(ne,Ge,vt.originalEvent,{features:te}))):et=!1},mouseout:function(){et=!1}}}}if(ne==="mouseleave"||ne==="mouseout"){var pt=!1;return{layer:pe,listener:Le,delegates:{mousemove:function(vt){(Ge.getLayer(pe)?Ge.queryRenderedFeatures(vt.point,{layers:[pe]}):[]).length?pt=!0:pt&&(pt=!1,Le.call(Ge,new mi(ne,Ge,vt.originalEvent)))},mouseout:function(vt){pt&&(pt=!1,Le.call(Ge,new mi(ne,Ge,vt.originalEvent)))}}}}return{layer:pe,listener:Le,delegates:(Ne={},Ne[ne]=function(vt){var te=Ge.getLayer(pe)?Ge.queryRenderedFeatures(vt.point,{layers:[pe]}):[];te.length&&(vt.features=te,Le.call(Ge,vt),delete vt.features)},Ne)}},Y.prototype.on=function(ne,pe,Le){if(Le===void 0)return D.prototype.on.call(this,ne,pe);var Ne=this._createDelegatedListener(ne,pe,Le);for(var Ge in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ne]=this._delegatedListeners[ne]||[],this._delegatedListeners[ne].push(Ne),Ne.delegates)this.on(Ge,Ne.delegates[Ge]);return this},Y.prototype.once=function(ne,pe,Le){if(Le===void 0)return D.prototype.once.call(this,ne,pe);var Ne=this._createDelegatedListener(ne,pe,Le);for(var Ge in Ne.delegates)this.once(Ge,Ne.delegates[Ge]);return this},Y.prototype.off=function(ne,pe,Le){var Ne=this;return Le===void 0?D.prototype.off.call(this,ne,pe):(this._delegatedListeners&&this._delegatedListeners[ne]&&function(Ge){for(var et=Ge[ne],pt=0;pt<et.length;pt++){var vt=et[pt];if(vt.layer===pe&&vt.listener===Le){for(var te in vt.delegates)Ne.off(te,vt.delegates[te]);return et.splice(pt,1),Ne}}}(this._delegatedListeners),this)},Y.prototype.queryRenderedFeatures=function(ne,pe){if(!this.style)return[];var Le;if(pe!==void 0||ne===void 0||ne instanceof l.Point||Array.isArray(ne)||(pe=ne,ne=void 0),pe=pe||{},(ne=ne||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof ne[0]=="number")Le=[l.Point.convert(ne)];else{var Ne=l.Point.convert(ne[0]),Ge=l.Point.convert(ne[1]);Le=[Ne,new l.Point(Ge.x,Ne.y),Ge,new l.Point(Ne.x,Ge.y),Ne]}return this.style.queryRenderedFeatures(Le,pe,this.transform)},Y.prototype.querySourceFeatures=function(ne,pe){return this.style.querySourceFeatures(ne,pe)},Y.prototype.setStyle=function(ne,pe){return(pe=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},pe)).diff!==!1&&pe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ne?(this._diffStyle(ne,pe),this):(this._localIdeographFontFamily=pe.localIdeographFontFamily,this._updateStyle(ne,pe))},Y.prototype._getUIString=function(ne){var pe=this._locale[ne];if(pe==null)throw new Error("Missing UI string '"+ne+"'");return pe},Y.prototype._updateStyle=function(ne,pe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ne?(this.style=new ir(this,pe||{}),this.style.setEventedParent(this,{style:this.style}),typeof ne=="string"?this.style.loadURL(ne):this.style.loadJSON(ne),this):(delete this.style,this)},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ir(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(ne,pe){var Le=this;if(typeof ne=="string"){var Ne=this._requestManager.normalizeStyleURL(ne),Ge=this._requestManager.transformRequest(Ne,l.ResourceType.Style);l.getJSON(Ge,function(et,pt){et?Le.fire(new l.ErrorEvent(et)):pt&&Le._updateDiff(pt,pe)})}else typeof ne=="object"&&this._updateDiff(ne,pe)},Y.prototype._updateDiff=function(ne,pe){try{this.style.setState(ne)&&this._update(!0)}catch(Le){l.warnOnce("Unable to perform style diff: "+(Le.message||Le.error||Le)+".  Rebuilding the style from scratch."),this._updateStyle(ne,pe)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(ne,pe){return this._lazyInitEmptyStyle(),this.style.addSource(ne,pe),this._update(!0)},Y.prototype.isSourceLoaded=function(ne){var pe=this.style&&this.style.sourceCaches[ne];if(pe!==void 0)return pe.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+ne+"'")))},Y.prototype.areTilesLoaded=function(){var ne=this.style&&this.style.sourceCaches;for(var pe in ne){var Le=ne[pe]._tiles;for(var Ne in Le){var Ge=Le[Ne];if(Ge.state!=="loaded"&&Ge.state!=="errored")return!1}}return!0},Y.prototype.addSourceType=function(ne,pe,Le){return this._lazyInitEmptyStyle(),this.style.addSourceType(ne,pe,Le)},Y.prototype.removeSource=function(ne){return this.style.removeSource(ne),this._update(!0)},Y.prototype.getSource=function(ne){return this.style.getSource(ne)},Y.prototype.addImage=function(ne,pe,Le){Le===void 0&&(Le={});var Ne=Le.pixelRatio;Ne===void 0&&(Ne=1);var Ge=Le.sdf;Ge===void 0&&(Ge=!1);var et=Le.stretchX,pt=Le.stretchY,vt=Le.content;if(this._lazyInitEmptyStyle(),pe instanceof ni||Ha&&pe instanceof Ha){var te=l.browser.getImageData(pe),ue=te.width,we=te.height,Oe=te.data;this.style.addImage(ne,{data:new l.RGBAImage({width:ue,height:we},Oe),pixelRatio:Ne,stretchX:et,stretchY:pt,content:vt,sdf:Ge,version:0})}else{if(pe.width===void 0||pe.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var De=pe.width,Ue=pe.height,We=pe.data,Ke=pe;this.style.addImage(ne,{data:new l.RGBAImage({width:De,height:Ue},new Uint8Array(We)),pixelRatio:Ne,stretchX:et,stretchY:pt,content:vt,sdf:Ge,version:0,userImage:Ke}),Ke.onAdd&&Ke.onAdd(this,ne)}},Y.prototype.updateImage=function(ne,pe){var Le=this.style.getImage(ne);if(!Le)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ne=pe instanceof ni||Ha&&pe instanceof Ha?l.browser.getImageData(pe):pe,Ge=Ne.width,et=Ne.height,pt=Ne.data;if(Ge===void 0||et===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(Ge!==Le.data.width||et!==Le.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var vt=!(pe instanceof ni||Ha&&pe instanceof Ha);Le.data.replace(pt,vt),this.style.updateImage(ne,Le)},Y.prototype.hasImage=function(ne){return ne?!!this.style.getImage(ne):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(ne){this.style.removeImage(ne)},Y.prototype.loadImage=function(ne,pe){l.getImage(this._requestManager.transformRequest(ne,l.ResourceType.Image),pe)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(ne,pe){return this._lazyInitEmptyStyle(),this.style.addLayer(ne,pe),this._update(!0)},Y.prototype.moveLayer=function(ne,pe){return this.style.moveLayer(ne,pe),this._update(!0)},Y.prototype.removeLayer=function(ne){return this.style.removeLayer(ne),this._update(!0)},Y.prototype.getLayer=function(ne){return this.style.getLayer(ne)},Y.prototype.setLayerZoomRange=function(ne,pe,Le){return this.style.setLayerZoomRange(ne,pe,Le),this._update(!0)},Y.prototype.setFilter=function(ne,pe,Le){return Le===void 0&&(Le={}),this.style.setFilter(ne,pe,Le),this._update(!0)},Y.prototype.getFilter=function(ne){return this.style.getFilter(ne)},Y.prototype.setPaintProperty=function(ne,pe,Le,Ne){return Ne===void 0&&(Ne={}),this.style.setPaintProperty(ne,pe,Le,Ne),this._update(!0)},Y.prototype.getPaintProperty=function(ne,pe){return this.style.getPaintProperty(ne,pe)},Y.prototype.setLayoutProperty=function(ne,pe,Le,Ne){return Ne===void 0&&(Ne={}),this.style.setLayoutProperty(ne,pe,Le,Ne),this._update(!0)},Y.prototype.getLayoutProperty=function(ne,pe){return this.style.getLayoutProperty(ne,pe)},Y.prototype.setLight=function(ne,pe){return pe===void 0&&(pe={}),this._lazyInitEmptyStyle(),this.style.setLight(ne,pe),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(ne,pe){return this.style.setFeatureState(ne,pe),this._update()},Y.prototype.removeFeatureState=function(ne,pe){return this.style.removeFeatureState(ne,pe),this._update()},Y.prototype.getFeatureState=function(ne){return this.style.getFeatureState(ne)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var ne=0,pe=0;return this._container&&(ne=this._container.clientWidth||400,pe=this._container.clientHeight||300),[ne,pe]},Y.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var ne=this._container;ne.classList.add("mapboxgl-map"),(this._missingCSSCanary=x.create("div","mapboxgl-canary",ne)).style.visibility="hidden",this._detectMissingCSS();var pe=this._canvasContainer=x.create("div","mapboxgl-canvas-container",ne);this._interactive&&pe.classList.add("mapboxgl-interactive"),this._canvas=x.create("canvas","mapboxgl-canvas",pe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Le=this._containerDimensions();this._resizeCanvas(Le[0],Le[1]);var Ne=this._controlContainer=x.create("div","mapboxgl-control-container",ne),Ge=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(et){Ge[et]=x.create("div","mapboxgl-ctrl-"+et,Ne)})},Y.prototype._resizeCanvas=function(ne,pe){var Le=l.browser.devicePixelRatio||1;this._canvas.width=Le*ne,this._canvas.height=Le*pe,this._canvas.style.width=ne+"px",this._canvas.style.height=pe+"px"},Y.prototype._setupPainter=function(){var ne=l.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),pe=this._canvas.getContext("webgl",ne)||this._canvas.getContext("experimental-webgl",ne);pe?(this.painter=new ai(pe,this.transform),l.webpSupported.testSupport(pe)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},Y.prototype._contextLost=function(ne){ne.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:ne}))},Y.prototype._contextRestored=function(ne){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:ne}))},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(ne){return this.style?(this._styleDirty=this._styleDirty||ne,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(ne){return this._update(),this._renderTaskQueue.add(ne)},Y.prototype._cancelRenderFrame=function(ne){this._renderTaskQueue.remove(ne)},Y.prototype._render=function(ne){var pe,Le=this,Ne=0,Ge=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(pe=Ge.createQueryEXT(),Ge.beginQueryEXT(Ge.TIME_ELAPSED_EXT,pe),Ne=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ne),!this._removed){var et=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var pt=this.transform.zoom,vt=l.browser.now();this.style.zoomHistory.update(pt,vt);var te=new l.EvaluationParameters(pt,{now:vt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ue=te.crossFadingFactor();ue===1&&ue===this._crossFadingFactor||(et=!0,this._crossFadingFactor=ue),this.style.update(te)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||et)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var we=l.browser.now()-Ne;Ge.endQueryEXT(Ge.TIME_ELAPSED_EXT,pe),setTimeout(function(){var De=Ge.getQueryObjectEXT(pe,Ge.QUERY_RESULT_EXT)/1e6;Ge.deleteQueryEXT(pe),Le.fire(new l.Event("gpu-timing-frame",{cpuTime:we,gpuTime:De}))},50)}if(this.listens("gpu-timing-layer")){var Oe=this.painter.collectGpuTimers();setTimeout(function(){var De=Le.painter.queryGpuTimers(Oe);Le.fire(new l.Event("gpu-timing-layer",{layerTimes:De}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new l.Event("idle"))),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var ne=0,pe=this._controls;ne<pe.length;ne+=1)pe[ne].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var Le=this.painter.context.gl.getExtension("WEBGL_lose_context");Le&&Le.loseContext(),fo(this._canvasContainer),fo(this._controlContainer),fo(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},Y.prototype.triggerRepaint=function(){var ne=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(pe){ne._frame=null,ne._render(pe)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(ne){this._trackResize&&this.resize({originalEvent:ne})._update()},q.showTileBoundaries.get=function(){return!!this._showTileBoundaries},q.showTileBoundaries.set=function(ne){this._showTileBoundaries!==ne&&(this._showTileBoundaries=ne,this._update())},q.showPadding.get=function(){return!!this._showPadding},q.showPadding.set=function(ne){this._showPadding!==ne&&(this._showPadding=ne,this._update())},q.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},q.showCollisionBoxes.set=function(ne){this._showCollisionBoxes!==ne&&(this._showCollisionBoxes=ne,ne?this.style._generateCollisionBoxes():this._update())},q.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},q.showOverdrawInspector.set=function(ne){this._showOverdrawInspector!==ne&&(this._showOverdrawInspector=ne,this._update())},q.repaint.get=function(){return!!this._repaint},q.repaint.set=function(ne){this._repaint!==ne&&(this._repaint=ne,this.triggerRepaint())},q.vertices.get=function(){return!!this._vertices},q.vertices.set=function(ne){this._vertices=ne,this._update()},Y.prototype._setCacheLimits=function(ne,pe){l.setCacheLimits(ne,pe)},q.version.get=function(){return l.version},Object.defineProperties(Y.prototype,q),Y}(_s);function fo(D){D.parentNode&&D.parentNode.removeChild(D)}var Ki={showCompass:!0,showZoom:!0,visualizePitch:!1},Ba=function(D){var Y=this;this.options=l.extend({},Ki,D),this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return Y._map.zoomIn({},{originalEvent:q})}),x.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return Y._map.zoomOut({},{originalEvent:q})}),x.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){Y.options.visualizePitch?Y._map.resetNorthPitch({},{originalEvent:q}):Y._map.resetNorth({},{originalEvent:q})}),this._compassIcon=x.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ba.prototype._updateZoomButtons=function(){var D=this._map.getZoom();this._zoomInButton.disabled=D===this._map.getMaxZoom(),this._zoomOutButton.disabled=D===this._map.getMinZoom()},Ba.prototype._rotateCompassArrow=function(){var D=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=D},Ba.prototype.onAdd=function(D){return this._map=D,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mr(this._map,this._compass,this.options.visualizePitch)),this._container},Ba.prototype.onRemove=function(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ba.prototype._createButton=function(D,Y){var q=x.create("button",D,this._container);return q.type="button",q.addEventListener("click",Y),q},Ba.prototype._setButtonTitle=function(D,Y){var q=this._map._getUIString("NavigationControl."+Y);D.title=q,D.setAttribute("aria-label",q)};var Mr=function(D,Y,q){q===void 0&&(q=!1),this._clickTolerance=10,this.element=Y,this.mouseRotate=new Os({clickTolerance:D.dragRotate._mouseRotate._clickTolerance}),this.map=D,q&&(this.mousePitch=new Is({clickTolerance:D.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener(Y,"mousedown",this.mousedown),x.addEventListener(Y,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(Y,"touchmove",this.touchmove),x.addEventListener(Y,"touchend",this.touchend),x.addEventListener(Y,"touchcancel",this.reset)};function Or(D,Y,q){if(D=new l.LngLat(D.lng,D.lat),Y){var ne=new l.LngLat(D.lng-360,D.lat),pe=new l.LngLat(D.lng+360,D.lat),Le=q.locationPoint(D).distSqr(Y);q.locationPoint(ne).distSqr(Y)<Le?D=ne:q.locationPoint(pe).distSqr(Y)<Le&&(D=pe)}for(;Math.abs(D.lng-q.center.lng)>180;){var Ne=q.locationPoint(D);if(Ne.x>=0&&Ne.y>=0&&Ne.x<=q.width&&Ne.y<=q.height)break;D.lng>q.center.lng?D.lng-=360:D.lng+=360}return D}Mr.prototype.down=function(D,Y){this.mouseRotate.mousedown(D,Y),this.mousePitch&&this.mousePitch.mousedown(D,Y),x.disableDrag()},Mr.prototype.move=function(D,Y){var q=this.map,ne=this.mouseRotate.mousemoveWindow(D,Y);if(ne&&ne.bearingDelta&&q.setBearing(q.getBearing()+ne.bearingDelta),this.mousePitch){var pe=this.mousePitch.mousemoveWindow(D,Y);pe&&pe.pitchDelta&&q.setPitch(q.getPitch()+pe.pitchDelta)}},Mr.prototype.off=function(){var D=this.element;x.removeEventListener(D,"mousedown",this.mousedown),x.removeEventListener(D,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(D,"touchmove",this.touchmove),x.removeEventListener(D,"touchend",this.touchend),x.removeEventListener(D,"touchcancel",this.reset),this.offTemp()},Mr.prototype.offTemp=function(){x.enableDrag(),x.removeEventListener(l.window,"mousemove",this.mousemove),x.removeEventListener(l.window,"mouseup",this.mouseup)},Mr.prototype.mousedown=function(D){this.down(l.extend({},D,{ctrlKey:!0,preventDefault:function(){return D.preventDefault()}}),x.mousePos(this.element,D)),x.addEventListener(l.window,"mousemove",this.mousemove),x.addEventListener(l.window,"mouseup",this.mouseup)},Mr.prototype.mousemove=function(D){this.move(D,x.mousePos(this.element,D))},Mr.prototype.mouseup=function(D){this.mouseRotate.mouseupWindow(D),this.mousePitch&&this.mousePitch.mouseupWindow(D),this.offTemp()},Mr.prototype.touchstart=function(D){D.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,D.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return D.preventDefault()}},this._startPos))},Mr.prototype.touchmove=function(D){D.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,D.targetTouches)[0],this.move({preventDefault:function(){return D.preventDefault()}},this._lastPos))},Mr.prototype.touchend=function(D){D.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Mr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var as={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ho(D,Y,q){var ne=D.classList;for(var pe in as)ne.remove("mapboxgl-"+q+"-anchor-"+pe);ne.add("mapboxgl-"+q+"-anchor-"+Y)}var qa,$i=function(D){function Y(q,ne){var pe=this;if(D.call(this),(q instanceof l.window.HTMLElement||ne)&&(q=l.extend({element:q},ne)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=q&&q.anchor||"center",this._color=q&&q.color||"#3FB1CE",this._draggable=q&&q.draggable||!1,this._state="inactive",this._rotation=q&&q.rotation||0,this._rotationAlignment=q&&q.rotationAlignment||"auto",this._pitchAlignment=q&&q.pitchAlignment&&q.pitchAlignment!=="auto"?q.pitchAlignment:this._rotationAlignment,q&&q.element)this._element=q.element,this._offset=l.Point.convert(q&&q.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");var Le=x.createNS("http://www.w3.org/2000/svg","svg");Le.setAttributeNS(null,"display","block"),Le.setAttributeNS(null,"height","41px"),Le.setAttributeNS(null,"width","27px"),Le.setAttributeNS(null,"viewBox","0 0 27 41");var Ne=x.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"stroke","none"),Ne.setAttributeNS(null,"stroke-width","1"),Ne.setAttributeNS(null,"fill","none"),Ne.setAttributeNS(null,"fill-rule","evenodd");var Ge=x.createNS("http://www.w3.org/2000/svg","g");Ge.setAttributeNS(null,"fill-rule","nonzero");var et=x.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(3.0, 29.0)"),et.setAttributeNS(null,"fill","#000000");for(var pt=0,vt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];pt<vt.length;pt+=1){var te=vt[pt],ue=x.createNS("http://www.w3.org/2000/svg","ellipse");ue.setAttributeNS(null,"opacity","0.04"),ue.setAttributeNS(null,"cx","10.5"),ue.setAttributeNS(null,"cy","5.80029008"),ue.setAttributeNS(null,"rx",te.rx),ue.setAttributeNS(null,"ry",te.ry),et.appendChild(ue)}var we=x.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"fill",this._color);var Oe=x.createNS("http://www.w3.org/2000/svg","path");Oe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),we.appendChild(Oe);var De=x.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"opacity","0.25"),De.setAttributeNS(null,"fill","#000000");var Ue=x.createNS("http://www.w3.org/2000/svg","path");Ue.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),De.appendChild(Ue);var We=x.createNS("http://www.w3.org/2000/svg","g");We.setAttributeNS(null,"transform","translate(6.0, 7.0)"),We.setAttributeNS(null,"fill","#FFFFFF");var Ke=x.createNS("http://www.w3.org/2000/svg","g");Ke.setAttributeNS(null,"transform","translate(8.0, 8.0)");var it=x.createNS("http://www.w3.org/2000/svg","circle");it.setAttributeNS(null,"fill","#000000"),it.setAttributeNS(null,"opacity","0.25"),it.setAttributeNS(null,"cx","5.5"),it.setAttributeNS(null,"cy","5.5"),it.setAttributeNS(null,"r","5.4999962");var lt=x.createNS("http://www.w3.org/2000/svg","circle");lt.setAttributeNS(null,"fill","#FFFFFF"),lt.setAttributeNS(null,"cx","5.5"),lt.setAttributeNS(null,"cy","5.5"),lt.setAttributeNS(null,"r","5.4999962"),Ke.appendChild(it),Ke.appendChild(lt),Ge.appendChild(et),Ge.appendChild(we),Ge.appendChild(De),Ge.appendChild(We),Ge.appendChild(Ke),Le.appendChild(Ge),this._element.appendChild(Le),this._offset=l.Point.convert(q&&q.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(At){At.preventDefault()}),this._element.addEventListener("mousedown",function(At){At.preventDefault()}),this._element.addEventListener("focus",function(){var At=pe._map.getContainer();At.scrollTop=0,At.scrollLeft=0}),ho(this._element,this._anchor,"marker"),this._popup=null}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(q){return this._lngLat=l.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var ne=13.5,pe=Math.sqrt(Math.pow(ne,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[pe,-1*(24.6+pe)],"bottom-right":[-pe,-1*(24.6+pe)],left:[ne,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(q){var ne=q.code,pe=q.charCode||q.keyCode;ne!=="Space"&&ne!=="Enter"&&pe!==32&&pe!==13||this.togglePopup()},Y.prototype._onMapClick=function(q){var ne=q.originalEvent.target,pe=this._element;this._popup&&(ne===pe||pe.contains(ne))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var q=this._popup;return q?(q.isOpen()?q.remove():q.addTo(this._map),this):this},Y.prototype._update=function(q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Or(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ne="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ne="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ne="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var pe="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?pe="rotateX(0deg)":this._pitchAlignment==="map"&&(pe="rotateX("+this._map.getPitch()+"deg)"),q&&q.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,as[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+pe+" "+ne)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(q){return this._offset=l.Point.convert(q),this._update(),this},Y.prototype._onMove=function(q){this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&q!=="auto"?q:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(l.Evented),Ds={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},fa=0,os=!1,po=function(D){function Y(q){D.call(this),this.options=l.extend({},Ds,q),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(q){return this._map=q,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),ne=this._setupUI,qa!==void 0?ne(qa):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(pe){qa=pe.state!=="denied",ne(qa)}):(qa=!!l.window.navigator.geolocation,ne(qa)),this._container;var ne},Y.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,fa=0,os=!1},Y.prototype._isOutOfMapMaxBounds=function(q){var ne=this._map.getMaxBounds(),pe=q.coords;return ne&&(pe.longitude<ne.getWest()||pe.longitude>ne.getEast()||pe.latitude<ne.getSouth()||pe.latitude>ne.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Y.prototype._onSuccess=function(q){if(this._map){if(this._isOutOfMapMaxBounds(q))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(q),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",q)),this._finish()}},Y.prototype._updateCamera=function(q){var ne=new l.LngLat(q.coords.longitude,q.coords.latitude),pe=q.coords.accuracy,Le=this._map.getBearing(),Ne=l.extend({bearing:Le},this.options.fitBoundsOptions);this._map.fitBounds(ne.toBounds(pe),Ne,{geolocateSource:!0})},Y.prototype._updateMarker=function(q){if(q){var ne=new l.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(ne).addTo(this._map),this._userLocationDotMarker.setLngLat(ne).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,ne=this._map.unproject([0,q]),pe=this._map.unproject([1,q]),Le=ne.distanceTo(pe),Ne=Math.ceil(2*this._accuracy/Le);this._circleElement.style.width=Ne+"px",this._circleElement.style.height=Ne+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(q){if(this._map){if(this.options.trackUserLocation)if(q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ne=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ne,this._geolocateButton.setAttribute("aria-label",ne),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(q.code===3&&os)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",q)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function(q){var ne=this;if(this._container.addEventListener("contextmenu",function(Ne){return Ne.preventDefault()}),this._geolocateButton=x.create("button","mapboxgl-ctrl-geolocate",this._container),x.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",q===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var pe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=pe,this._geolocateButton.setAttribute("aria-label",pe)}else{var Le=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Le,this._geolocateButton.setAttribute("aria-label",Le)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new $i(this._dotElement),this._circleElement=x.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new $i({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ne){var Ge=Ne.originalEvent&&Ne.originalEvent.type==="resize";Ne.geolocateSource||ne._watchState!=="ACTIVE_LOCK"||Ge||(ne._watchState="BACKGROUND",ne._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ne._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ne.fire(new l.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":fa--,os=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++fa>1?(q={maximumAge:6e5,timeout:0},os=!0):(q=this.options.positionOptions,os=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(l.Evented),oi={maxWidth:100,unit:"metric"},fi=function(D){this.options=l.extend({},oi,D),l.bindAll(["_onMove","setUnit"],this)};function Fs(D,Y,q){var ne=q&&q.maxWidth||100,pe=D._container.clientHeight/2,Le=D.unproject([0,pe]),Ne=D.unproject([ne,pe]),Ge=Le.distanceTo(Ne);if(q&&q.unit==="imperial"){var et=3.2808*Ge;et>5280?Je(Y,ne,et/5280,D._getUIString("ScaleControl.Miles")):Je(Y,ne,et,D._getUIString("ScaleControl.Feet"))}else q&&q.unit==="nautical"?Je(Y,ne,Ge/1852,D._getUIString("ScaleControl.NauticalMiles")):Ge>=1e3?Je(Y,ne,Ge/1e3,D._getUIString("ScaleControl.Kilometers")):Je(Y,ne,Ge,D._getUIString("ScaleControl.Meters"))}function Je(D,Y,q,ne){var pe,Le,Ne,Ge=(pe=q,(Le=Math.pow(10,(""+Math.floor(pe)).length-1))*((Ne=pe/Le)>=10?10:Ne>=5?5:Ne>=3?3:Ne>=2?2:Ne>=1?1:function(pt){var vt=Math.pow(10,Math.ceil(-Math.log(pt)/Math.LN10));return Math.round(pt*vt)/vt}(Ne))),et=Ge/q;D.style.width=Y*et+"px",D.innerHTML=Ge+"&nbsp;"+ne}fi.prototype.getDefaultPosition=function(){return"bottom-left"},fi.prototype._onMove=function(){Fs(this._map,this._container,this.options)},fi.prototype.onAdd=function(D){return this._map=D,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",D.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},fi.prototype.onRemove=function(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},fi.prototype.setUnit=function(D){this.options.unit=D,Fs(this._map,this._container,this.options)};var $e=function(D){this._fullscreen=!1,D&&D.container&&(D.container instanceof l.window.HTMLElement?this._container=D.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};$e.prototype.onAdd=function(D){return this._map=D,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},$e.prototype.onRemove=function(){x.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},$e.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},$e.prototype._setupUI=function(){var D=this._fullscreenButton=x.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","mapboxgl-ctrl-icon",D).setAttribute("aria-hidden",!0),D.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},$e.prototype._updateTitle=function(){var D=this._getTitle();this._fullscreenButton.setAttribute("aria-label",D),this._fullscreenButton.title=D},$e.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},$e.prototype._isFullscreen=function(){return this._fullscreen},$e.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},$e.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var at={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ft=function(D){function Y(q){D.call(this),this.options=l.extend(Object.create(at),q),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(q){return this._lngLat=l.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(q){return this.setDOMContent(l.window.document.createTextNode(q))},Y.prototype.setHTML=function(q){var ne,pe=l.window.document.createDocumentFragment(),Le=l.window.document.createElement("body");for(Le.innerHTML=q;ne=Le.firstChild;)pe.appendChild(ne);return this.setDOMContent(pe)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},Y.prototype.setDOMContent=function(q){return this._createContent(),this._content.appendChild(q),this._update(),this},Y.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},Y.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},Y.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},Y.prototype._createContent=function(){this._content&&x.remove(this._content),this._content=x.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=x.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function(q){this._update(q.point)},Y.prototype._onMouseMove=function(q){this._update(q.point)},Y.prototype._onDrag=function(q){this._update(q.point)},Y.prototype._update=function(q){var ne=this,pe=this._lngLat||this._trackPointer;if(this._map&&pe&&this._content&&(this._container||(this._container=x.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(ue){return ne._container.classList.add(ue)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Or(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||q)){var Le=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),Ne=this.options.anchor,Ge=yt(this.options.offset);if(!Ne){var et,pt=this._container.offsetWidth,vt=this._container.offsetHeight;et=Le.y+Ge.bottom.y<vt?["top"]:Le.y>this._map.transform.height-vt?["bottom"]:[],Le.x<pt/2?et.push("left"):Le.x>this._map.transform.width-pt/2&&et.push("right"),Ne=et.length===0?"bottom":et.join("-")}var te=Le.add(Ge[Ne]).round();x.setTransform(this._container,as[Ne]+" translate("+te.x+"px,"+te.y+"px)"),ho(this._container,Ne,"popup")}},Y.prototype._onClose=function(){this.remove()},Y}(l.Evented);function yt(D){if(D){if(typeof D=="number"){var Y=Math.round(Math.sqrt(.5*Math.pow(D,2)));return{center:new l.Point(0,0),top:new l.Point(0,D),"top-left":new l.Point(Y,Y),"top-right":new l.Point(-Y,Y),bottom:new l.Point(0,-D),"bottom-left":new l.Point(Y,-Y),"bottom-right":new l.Point(-Y,-Y),left:new l.Point(D,0),right:new l.Point(-D,0)}}if(D instanceof l.Point||Array.isArray(D)){var q=l.Point.convert(D);return{center:q,top:q,"top-left":q,"top-right":q,bottom:q,"bottom-left":q,"bottom-right":q,left:q,right:q}}return{center:l.Point.convert(D.center||[0,0]),top:l.Point.convert(D.top||[0,0]),"top-left":l.Point.convert(D["top-left"]||[0,0]),"top-right":l.Point.convert(D["top-right"]||[0,0]),bottom:l.Point.convert(D.bottom||[0,0]),"bottom-left":l.Point.convert(D["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(D["bottom-right"]||[0,0]),left:l.Point.convert(D.left||[0,0]),right:l.Point.convert(D.right||[0,0])}}return yt(new l.Point(0,0))}var gt={version:l.version,supported:T,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:Mo,NavigationControl:Ba,GeolocateControl:po,AttributionControl:Aa,ScaleControl:fi,FullscreenControl:$e,Popup:ft,Marker:$i,Style:ir,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){Mt().acquire(ut)},clearPrewarmedResources:function(){var D=Ct;D&&(D.isPreloaded()&&D.numActive()===1?(D.release(ut),Ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(D){l.config.ACCESS_TOKEN=D},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(D){l.config.API_URL=D},get workerCount(){return ct.workerCount},set workerCount(D){ct.workerCount=D},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(D){l.config.MAX_PARALLEL_IMAGE_REQUESTS=D},clearStorage:function(D){l.clearTileCache(D)},workerUrl:""};return gt}),A}()},27084:function($){$.exports=Math.log2||function(R){return Math.log(R)*Math.LOG2E}},16825:function($,R,e){$.exports=function(k,l){l||(l=k,k=window);var T=0,x=0,d=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function o(g){var y=!1;return"altKey"in g&&(y=y||g.altKey!==s.alt,s.alt=!!g.altKey),"shiftKey"in g&&(y=y||g.shiftKey!==s.shift,s.shift=!!g.shiftKey),"ctrlKey"in g&&(y=y||g.ctrlKey!==s.control,s.control=!!g.ctrlKey),"metaKey"in g&&(y=y||g.metaKey!==s.meta,s.meta=!!g.metaKey),y}function r(g,y){var p=A.x(y),m=A.y(y);"buttons"in y&&(g=0|y.buttons),(g!==T||p!==x||m!==d||o(y))&&(T=0|g,x=p||0,d=m||0,l&&l(T,x,d,s))}function n(g){r(0,g)}function a(){(T||x||d||s.shift||s.alt||s.meta||s.control)&&(x=d=0,T=0,s.shift=s.alt=s.control=s.meta=!1,l&&l(0,0,0,s))}function i(g){o(g)&&l&&l(T,x,d,s)}function c(g){A.buttons(g)===0?r(0,g):r(T,g)}function h(g){r(T|A.buttons(g),g)}function f(g){r(T&~A.buttons(g),g)}function b(){t||(t=!0,k.addEventListener("mousemove",c),k.addEventListener("mousedown",h),k.addEventListener("mouseup",f),k.addEventListener("mouseleave",n),k.addEventListener("mouseenter",n),k.addEventListener("mouseout",n),k.addEventListener("mouseover",n),k.addEventListener("blur",a),k.addEventListener("keyup",i),k.addEventListener("keydown",i),k.addEventListener("keypress",i),k!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",i),window.addEventListener("keydown",i),window.addEventListener("keypress",i)))}b();var v={element:k};return Object.defineProperties(v,{enabled:{get:function(){return t},set:function(g){g?b():t&&(t=!1,k.removeEventListener("mousemove",c),k.removeEventListener("mousedown",h),k.removeEventListener("mouseup",f),k.removeEventListener("mouseleave",n),k.removeEventListener("mouseenter",n),k.removeEventListener("mouseout",n),k.removeEventListener("mouseover",n),k.removeEventListener("blur",a),k.removeEventListener("keyup",i),k.removeEventListener("keydown",i),k.removeEventListener("keypress",i),k!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",i),window.removeEventListener("keydown",i),window.removeEventListener("keypress",i)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return x},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),v};var A=e(74311)},48956:function($){var R={left:0,top:0};$.exports=function(e,A,k){A=A||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var l,T=e.clientX||0,x=e.clientY||0,d=(l=A)===window||l===document||l===document.body?R:l.getBoundingClientRect();return k[0]=T-d.left,k[1]=x-d.top,k}},74311:function($,R){function e(A){return A.target||A.srcElement||window}R.buttons=function(A){if(typeof A=="object"){if("buttons"in A)return A.buttons;if("which"in A){if((k=A.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in A){var k;if((k=A.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},R.element=e,R.x=function(A){if(typeof A=="object"){if("offsetX"in A)return A.offsetX;var k=e(A).getBoundingClientRect();return A.clientX-k.left}return 0},R.y=function(A){if(typeof A=="object"){if("offsetY"in A)return A.offsetY;var k=e(A).getBoundingClientRect();return A.clientY-k.top}return 0}},1195:function($,R,e){var A=e(75686);$.exports=function(k,l,T){typeof k=="function"&&(T=!!l,l=k,k=window);var x=A("ex",k),d=function(s){T&&s.preventDefault();var t=s.deltaX||0,o=s.deltaY||0,r=s.deltaZ||0,n=1;switch(s.deltaMode){case 1:n=x;break;case 2:n=window.innerHeight}if(o*=n,r*=n,(t*=n)||o||r)return l(t,o,r,s)};return k.addEventListener("wheel",d),d}},7417:function($,R,e){var A;(function(k,l,T){l[k]=l[k]||function(){var x,d,s,t=Object.prototype.toString,o=typeof setImmediate<"u"?function(p){return setImmediate(p)}:setTimeout;try{Object.defineProperty({},"x",{}),x=function(p,m,w,u){return Object.defineProperty(p,m,{value:w,writable:!0,configurable:u!==!1})}}catch{x=function(m,w,u){return m[w]=u,m}}function r(p,m){s.add(p,m),d||(d=o(s.drain))}function n(p){var m,w=typeof p;return p==null||w!="object"&&w!="function"||(m=p.then),typeof m=="function"&&m}function a(){for(var p=0;p<this.chain.length;p++)i(this,this.state===1?this.chain[p].success:this.chain[p].failure,this.chain[p]);this.chain.length=0}function i(p,m,w){var u,S;try{m===!1?w.reject(p.msg):(u=m===!0?p.msg:m.call(void 0,p.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(S=n(u))?S.call(u,w.resolve,w.reject):w.resolve(u)}catch(_){w.reject(_)}}function c(p){var m,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(m=n(p))?r(function(){var u=new b(w);try{m.call(p,function(){c.apply(u,arguments)},function(){h.apply(u,arguments)})}catch(S){h.call(u,S)}}):(w.msg=p,w.state=1,w.chain.length>0&&r(a,w))}catch(u){h.call(new b(w),u)}}}function h(p){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=p,m.state=2,m.chain.length>0&&r(a,m))}function f(p,m,w,u){for(var S=0;S<m.length;S++)(function(_){p.resolve(m[_]).then(function(E){w(_,E)},u)})(S)}function b(p){this.def=p,this.triggered=!1}function v(p){this.promise=p,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(p){if(typeof p!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var m=new v(this);this.then=function(w,u){var S={success:typeof w!="function"||w,failure:typeof u=="function"&&u};return S.promise=new this.constructor(function(_,E){if(typeof _!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=_,S.reject=E}),m.chain.push(S),m.state!==0&&r(a,m),S.promise},this.catch=function(w){return this.then(void 0,w)};try{p.call(void 0,function(w){c.call(m,w)},function(w){h.call(m,w)})}catch(w){h.call(m,w)}}s=function(){var p,m,w;function u(S,_){this.fn=S,this.self=_,this.next=void 0}return{add:function(S,_){w=new u(S,_),m?m.next=w:p=w,m=w,w=void 0},drain:function(){var S=p;for(p=m=d=void 0;S;)S.fn.call(S.self),S=S.next}}}();var y=x({},"constructor",g,!1);return g.prototype=y,x(y,"__NPO__",0,!1),x(g,"resolve",function(p){return p&&typeof p=="object"&&p.__NPO__===1?p:new this(function(m,w){if(typeof m!="function"||typeof w!="function")throw TypeError("Not a function");m(p)})}),x(g,"reject",function(p){return new this(function(m,w){if(typeof m!="function"||typeof w!="function")throw TypeError("Not a function");w(p)})}),x(g,"all",function(p){var m=this;return t.call(p)!="[object Array]"?m.reject(TypeError("Not an array")):p.length===0?m.resolve([]):new m(function(w,u){if(typeof w!="function"||typeof u!="function")throw TypeError("Not a function");var S=p.length,_=Array(S),E=0;f(m,p,function(L,C){_[L]=C,++E===S&&w(_)},u)})}),x(g,"race",function(p){var m=this;return t.call(p)!="[object Array]"?m.reject(TypeError("Not an array")):new m(function(w,u){if(typeof w!="function"||typeof u!="function")throw TypeError("Not a function");f(m,p,function(S,_){w(_)},u)})}),g}(),$.exports?$.exports=l[k]:(A=function(){return l[k]}.call(R,e,R,$))===void 0||($.exports=A)})("Promise",e.g!==void 0?e.g:this)},18625:function($){var R=Math.PI,e=x(120);function A(d,s,t,o){return["C",d,s,t,o,t,o]}function k(d,s,t,o,r,n){return["C",d/3+.6666666666666666*t,s/3+.6666666666666666*o,r/3+.6666666666666666*t,n/3+.6666666666666666*o,r,n]}function l(d,s,t,o,r,n,a,i,c,h){if(h)S=h[0],_=h[1],w=h[2],u=h[3];else{var f=T(d,s,-r);d=f.x,s=f.y;var b=(d-(i=(f=T(i,c,-r)).x))/2,v=(s-(c=f.y))/2,g=b*b/(t*t)+v*v/(o*o);g>1&&(t*=g=Math.sqrt(g),o*=g);var y=t*t,p=o*o,m=(n==a?-1:1)*Math.sqrt(Math.abs((y*p-y*v*v-p*b*b)/(y*v*v+p*b*b)));m==1/0&&(m=1);var w=m*t*v/o+(d+i)/2,u=m*-o*b/t+(s+c)/2,S=Math.asin(((s-u)/o).toFixed(9)),_=Math.asin(((c-u)/o).toFixed(9));(S=d<w?R-S:S)<0&&(S=2*R+S),(_=i<w?R-_:_)<0&&(_=2*R+_),a&&S>_&&(S-=2*R),!a&&_>S&&(_-=2*R)}if(Math.abs(_-S)>e){var E=_,L=i,C=c;_=S+e*(a&&_>S?1:-1);var P=l(i=w+t*Math.cos(_),c=u+o*Math.sin(_),t,o,r,0,a,L,C,[_,E,w,u])}var I=Math.tan((_-S)/4),U=4/3*t*I,z=4/3*o*I,H=[2*d-(d+U*Math.sin(S)),2*s-(s-z*Math.cos(S)),i+U*Math.sin(_),c-z*Math.cos(_),i,c];if(h)return H;P&&(H=H.concat(P));for(var F=0;F<H.length;){var N=T(H[F],H[F+1],r);H[F++]=N.x,H[F++]=N.y}return H}function T(d,s,t){return{x:d*Math.cos(t)-s*Math.sin(t),y:d*Math.sin(t)+s*Math.cos(t)}}function x(d){return d*(R/180)}$.exports=function(d){for(var s,t=[],o=0,r=0,n=0,a=0,i=null,c=null,h=0,f=0,b=0,v=d.length;b<v;b++){var g=d[b],y=g[0];switch(y){case"M":n=g[1],a=g[2];break;case"A":(g=l(h,f,g[1],g[2],x(g[3]),g[4],g[5],g[6],g[7])).unshift("C"),g.length>7&&(t.push(g.splice(0,7)),g.unshift("C"));break;case"S":var p=h,m=f;s!="C"&&s!="S"||(p+=p-o,m+=m-r),g=["C",p,m,g[1],g[2],g[3],g[4]];break;case"T":s=="Q"||s=="T"?(i=2*h-i,c=2*f-c):(i=h,c=f),g=k(h,f,i,c,g[1],g[2]);break;case"Q":i=g[1],c=g[2],g=k(h,f,g[1],g[2],g[3],g[4]);break;case"L":g=A(h,f,g[1],g[2]);break;case"H":g=A(h,f,g[1],f);break;case"V":g=A(h,f,h,g[1]);break;case"Z":g=A(h,f,n,a)}s=y,h=g[g.length-2],f=g[g.length-1],g.length>4?(o=g[g.length-4],r=g[g.length-3]):(o=h,r=f),t.push(g)}return t}},56131:function($){var R=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;function k(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}$.exports=function(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var T={},x=0;x<10;x++)T["_"+String.fromCharCode(x)]=x;if(Object.getOwnPropertyNames(T).map(function(s){return T[s]}).join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(s){d[s]=s}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(l,T){for(var x,d,s=k(l),t=1;t<arguments.length;t++){for(var o in x=Object(arguments[t]))e.call(x,o)&&(s[o]=x[o]);if(R){d=R(x);for(var r=0;r<d.length;r++)A.call(x,d[r])&&(s[d[r]]=x[d[r]])}}return s}},65848:function($){var R=function(e){return e!=e};$.exports=function(e,A){return e===0&&A===0?1/e==1/A:e===A||!(!R(e)||!R(A))}},64003:function($,R,e){var A=e(17045),k=e(68222),l=e(65848),T=e(27015),x=e(55572),d=k(T(),Object);A(d,{getPolyfill:T,implementation:l,shim:x}),$.exports=d},27015:function($,R,e){var A=e(65848);$.exports=function(){return typeof Object.is=="function"?Object.is:A}},55572:function($,R,e){var A=e(27015),k=e(17045);$.exports=function(){var l=A();return k(Object,{is:l},{is:function(){return Object.is!==l}}),l}},99019:function($,R,e){var A;if(!Object.keys){var k=Object.prototype.hasOwnProperty,l=Object.prototype.toString,T=e(64178),x=Object.prototype.propertyIsEnumerable,d=!x.call({toString:null},"toString"),s=x.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=function(a){var i=a.constructor;return i&&i.prototype===a},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!r["$"+a]&&k.call(window,a)&&window[a]!==null&&typeof window[a]=="object")try{o(window[a])}catch{return!0}}catch{return!0}return!1}();A=function(a){var i=a!==null&&typeof a=="object",c=l.call(a)==="[object Function]",h=T(a),f=i&&l.call(a)==="[object String]",b=[];if(!i&&!c&&!h)throw new TypeError("Object.keys called on a non-object");var v=s&&c;if(f&&a.length>0&&!k.call(a,0))for(var g=0;g<a.length;++g)b.push(String(g));if(h&&a.length>0)for(var y=0;y<a.length;++y)b.push(String(y));else for(var p in a)v&&p==="prototype"||!k.call(a,p)||b.push(String(p));if(d)for(var m=function(u){if(typeof window>"u"||!n)return o(u);try{return o(u)}catch{return!1}}(a),w=0;w<t.length;++w)m&&t[w]==="constructor"||!k.call(a,t[w])||b.push(t[w]);return b}}$.exports=A},8709:function($,R,e){var A=Array.prototype.slice,k=e(64178),l=Object.keys,T=l?function(d){return l(d)}:e(99019),x=Object.keys;T.shim=function(){if(Object.keys){var d=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);d||(Object.keys=function(s){return k(s)?x(A.call(s)):x(s)})}else Object.keys=T;return Object.keys||T},$.exports=T},64178:function($){var R=Object.prototype.toString;$.exports=function(e){var A=R.call(e),k=A==="[object Arguments]";return k||(k=A!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&R.call(e.callee)==="[object Function]"),k}},88641:function($){function R(k,l){if(typeof k!="string")return[k];var T=[k];typeof l=="string"||Array.isArray(l)?l={brackets:l}:l||(l={});var x=l.brackets?Array.isArray(l.brackets)?l.brackets:[l.brackets]:["{}","[]","()"],d=l.escape||"___",s=!!l.flat;x.forEach(function(o){var r=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),n=[];function a(i,c,h){var f=T.push(i.slice(o[0].length,-o[1].length))-1;return n.push(f),d+f+d}T.forEach(function(i,c){for(var h,f=0;i!=h;)if(h=i,i=i.replace(r,a),f++>1e4)throw Error("References have circular dependency. Please, check them.");T[c]=i}),n=n.reverse(),T=T.map(function(i){return n.forEach(function(c){i=i.replace(new RegExp("(\\"+d+c+"\\"+d+")","g"),o[0]+"$1"+o[1])}),i})});var t=new RegExp("\\"+d+"([0-9]+)\\"+d);return s?T:function o(r,n,a){for(var i,c=[],h=0;i=t.exec(r);){if(h++>1e4)throw Error("Circular references in parenthesis");c.push(r.slice(0,i.index)),c.push(o(n[i[1]],n)),r=r.slice(i.index+i[0].length)}return c.push(r),c}(T[0],T)}function e(k,l){if(l&&l.flat){var T,x=l&&l.escape||"___",d=k[0];if(!d)return"";for(var s=new RegExp("\\"+x+"([0-9]+)\\"+x),t=0;d!=T;){if(t++>1e4)throw Error("Circular references in "+k);T=d,d=d.replace(s,o)}return d}return k.reduce(function r(n,a){return Array.isArray(a)&&(a=a.reduce(r,"")),n+a},"");function o(r,n){if(k[n]==null)throw Error("Reference "+n+"is undefined");return k[n]}}function A(k,l){return Array.isArray(k)?e(k,l):R(k,l)}A.parse=R,A.stringify=e,$.exports=A},18863:function($,R,e){var A=e(71299);$.exports=function(k){var l;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?l=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(l={x:(k=A(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?l.width=k.right-l.x:l.width=0:l.width=k.width,k.height==null?k.bottom?l.height=k.bottom-l.y:l.height=0:l.height=k.height),l}},95616:function($){$.exports=function(k){var l=[];return k.replace(e,function(T,x,d){var s=x.toLowerCase();for(d=function(t){var o=t.match(A);return o?o.map(Number):[]}(d),s=="m"&&d.length>2&&(l.push([x].concat(d.splice(0,2))),s="l",x=x=="m"?"l":"L");;){if(d.length==R[s])return d.unshift(x),l.push(d);if(d.length<R[s])throw new Error("malformed path data");l.push([x].concat(d.splice(0,R[s])))}}),l};var R={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,A=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function($){$.exports=function(R,e){e||(e=[0,""]),R=String(R);var A=parseFloat(R,10);return e[0]=A,e[1]=R.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},9748:function($,R,e){var A=e(90386);(function(){var k,l,T,x,d,s;typeof performance<"u"&&performance!==null&&performance.now?$.exports=function(){return performance.now()}:A!=null&&A.hrtime?($.exports=function(){return(k()-d)/1e6},l=A.hrtime,x=(k=function(){var t;return 1e9*(t=l())[0]+t[1]})(),s=1e9*A.uptime(),d=x-s):Date.now?($.exports=function(){return Date.now()-T},T=Date.now()):($.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},71299:function($){$.exports=function(A,k,l){var T,x,d={};if(typeof k=="string"&&(k=e(k)),Array.isArray(k)){var s={};for(x=0;x<k.length;x++)s[k[x]]=!0;k=s}for(T in k)k[T]=e(k[T]);var t={};for(T in k){var o=k[T];if(Array.isArray(o))for(x=0;x<o.length;x++){var r=o[x];if(l&&(t[r]=!0),r in A){if(d[T]=A[r],l)for(var n=x;n<o.length;n++)t[o[n]]=!0;break}}else T in A&&(k[T]&&(d[T]=A[T]),l&&(t[T]=!0))}if(l)for(T in A)t[T]||(d[T]=A[T]);return d};var R={};function e(A){return R[A]?R[A]:(typeof A=="string"&&(A=R[A]=A.split(/\s*,\s*|\s+/)),A)}},38258:function($){$.exports=function(R,e,A,k){var l=R[0],T=R[1],x=!1;A===void 0&&(A=0),k===void 0&&(k=e.length);for(var d=k-A,s=0,t=d-1;s<d;t=s++){var o=e[s+A][0],r=e[s+A][1],n=e[t+A][0],a=e[t+A][1];r>T!=a>T&&l<(n-o)*(T-r)/(a-r)+o&&(x=!x)}return x}},52142:function($,R,e){var A,k=e(69444),l=e(29023),T=e(87263),x=e(11328),d=e(55968),s=e(10670),t=!1,o=l();function r(n,a,i){var c=A.segments(n),h=A.segments(a),f=i(A.combine(c,h));return A.polygon(f)}A={buildLog:function(n){return n===!0?t=k():n===!1&&(t=!1),t!==!1&&t.list},epsilon:function(n){return o.epsilon(n)},segments:function(n){var a=T(!0,o,t);return n.regions.forEach(a.addRegion),{segments:a.calculate(n.inverted),inverted:n.inverted}},combine:function(n,a){return{combined:T(!1,o,t).calculate(n.segments,n.inverted,a.segments,a.inverted),inverted1:n.inverted,inverted2:a.inverted}},selectUnion:function(n){return{segments:d.union(n.combined,t),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:d.intersect(n.combined,t),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:d.difference(n.combined,t),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:d.differenceRev(n.combined,t),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:d.xor(n.combined,t),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:x(n.segments,o,t),inverted:n.inverted}},polygonFromGeoJSON:function(n){return s.toPolygon(A,n)},polygonToGeoJSON:function(n){return s.fromPolygon(A,o,n)},union:function(n,a){return r(n,a,A.selectUnion)},intersect:function(n,a){return r(n,a,A.selectIntersect)},difference:function(n,a){return r(n,a,A.selectDifference)},differenceRev:function(n,a){return r(n,a,A.selectDifferenceRev)},xor:function(n,a){return r(n,a,A.selectXor)}},typeof window=="object"&&(window.PolyBool=A),$.exports=A},69444:function($){$.exports=function(){var R,e=0,A=!1;function k(l,T){return R.list.push({type:l,data:T?JSON.parse(JSON.stringify(T)):void 0}),R}return R={list:[],segmentId:function(){return e++},checkIntersection:function(l,T){return k("check",{seg1:l,seg2:T})},segmentChop:function(l,T){return k("div_seg",{seg:l,pt:T}),k("chop",{seg:l,pt:T})},statusRemove:function(l){return k("pop_seg",{seg:l})},segmentUpdate:function(l){return k("seg_update",{seg:l})},segmentNew:function(l,T){return k("new_seg",{seg:l,primary:T})},segmentRemove:function(l){return k("rem_seg",{seg:l})},tempStatus:function(l,T,x){return k("temp_status",{seg:l,above:T,below:x})},rewind:function(l){return k("rewind",{seg:l})},status:function(l,T,x){return k("status",{seg:l,above:T,below:x})},vert:function(l){return l===A?R:(A=l,k("vert",{x:l}))},log:function(l){return typeof l!="string"&&(l=JSON.stringify(l,!1,"  ")),k("log",{txt:l})},reset:function(){return k("reset")},selected:function(l){return k("selected",{segs:l})},chainStart:function(l){return k("chain_start",{seg:l})},chainRemoveHead:function(l,T){return k("chain_rem_head",{index:l,pt:T})},chainRemoveTail:function(l,T){return k("chain_rem_tail",{index:l,pt:T})},chainNew:function(l,T){return k("chain_new",{pt1:l,pt2:T})},chainMatch:function(l){return k("chain_match",{index:l})},chainClose:function(l){return k("chain_close",{index:l})},chainAddHead:function(l,T){return k("chain_add_head",{index:l,pt:T})},chainAddTail:function(l,T){return k("chain_add_tail",{index:l,pt:T})},chainConnect:function(l,T){return k("chain_con",{index1:l,index2:T})},chainReverse:function(l){return k("chain_rev",{index:l})},chainJoin:function(l,T){return k("chain_join",{index1:l,index2:T})},done:function(){return k("done")}}}},29023:function($){$.exports=function(R){typeof R!="number"&&(R=1e-10);var e={epsilon:function(A){return typeof A=="number"&&(R=A),R},pointAboveOrOnLine:function(A,k,l){var T=k[0],x=k[1],d=l[0],s=l[1],t=A[0];return(d-T)*(A[1]-x)-(s-x)*(t-T)>=-R},pointBetween:function(A,k,l){var T=A[1]-k[1],x=l[0]-k[0],d=A[0]-k[0],s=l[1]-k[1],t=d*x+T*s;return!(t<R||t-(x*x+s*s)>-R)},pointsSameX:function(A,k){return Math.abs(A[0]-k[0])<R},pointsSameY:function(A,k){return Math.abs(A[1]-k[1])<R},pointsSame:function(A,k){return e.pointsSameX(A,k)&&e.pointsSameY(A,k)},pointsCompare:function(A,k){return e.pointsSameX(A,k)?e.pointsSameY(A,k)?0:A[1]<k[1]?-1:1:A[0]<k[0]?-1:1},pointsCollinear:function(A,k,l){var T=A[0]-k[0],x=A[1]-k[1],d=k[0]-l[0],s=k[1]-l[1];return Math.abs(T*s-d*x)<R},linesIntersect:function(A,k,l,T){var x=k[0]-A[0],d=k[1]-A[1],s=T[0]-l[0],t=T[1]-l[1],o=x*t-d*s;if(Math.abs(o)<R)return!1;var r=A[0]-l[0],n=A[1]-l[1],a=(s*n-t*r)/o,i=(x*n-d*r)/o,c={alongA:0,alongB:0,pt:[A[0]+a*x,A[1]+a*d]};return c.alongA=a<=-R?-2:a<R?-1:a-1<=-R?0:a-1<R?1:2,c.alongB=i<=-R?-2:i<R?-1:i-1<=-R?0:i-1<R?1:2,c},pointInsideRegion:function(A,k){for(var l=A[0],T=A[1],x=k[k.length-1][0],d=k[k.length-1][1],s=!1,t=0;t<k.length;t++){var o=k[t][0],r=k[t][1];r-T>R!=d-T>R&&(x-o)*(T-r)/(d-r)+o-l>R&&(s=!s),x=o,d=r}return s}};return e}},10670:function($){var R={toPolygon:function(e,A){function k(x){if(x.length<=0)return e.segments({inverted:!1,regions:[]});function d(o){var r=o.slice(0,o.length-1);return e.segments({inverted:!1,regions:[r]})}for(var s=d(x[0]),t=1;t<x.length;t++)s=e.selectDifference(e.combine(s,d(x[t])));return s}if(A.type==="Polygon")return e.polygon(k(A.coordinates));if(A.type==="MultiPolygon"){for(var l=e.segments({inverted:!1,regions:[]}),T=0;T<A.coordinates.length;T++)l=e.selectUnion(e.combine(l,k(A.coordinates[T])));return e.polygon(l)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,A,k){function l(i,c){return A.pointInsideRegion([.5*(i[0][0]+i[1][0]),.5*(i[0][1]+i[1][1])],c)}function T(i){return{region:i,children:[]}}k=e.polygon(e.segments(k));var x=T(null);function d(i,c){for(var h=0;h<i.children.length;h++)if(l(c,(b=i.children[h]).region))return void d(b,c);var f=T(c);for(h=0;h<i.children.length;h++){var b;l((b=i.children[h]).region,c)&&(f.children.push(b),i.children.splice(h,1),h--)}i.children.push(f)}for(var s=0;s<k.regions.length;s++){var t=k.regions[s];t.length<3||d(x,t)}function o(i,c){for(var h=0,f=i[i.length-1][0],b=i[i.length-1][1],v=[],g=0;g<i.length;g++){var y=i[g][0],p=i[g][1];v.push([y,p]),h+=p*f-y*b,f=y,b=p}return h<0!==c&&v.reverse(),v.push([v[0][0],v[0][1]]),v}var r=[];function n(i){var c=[o(i.region,!1)];r.push(c);for(var h=0;h<i.children.length;h++)c.push(a(i.children[h]))}function a(i){for(var c=0;c<i.children.length;c++)n(i.children[c]);return o(i.region,!0)}for(s=0;s<x.children.length;s++)n(x.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:r.length==1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}};$.exports=R},87263:function($,R,e){var A=e(26859);$.exports=function(k,l,T){function x(n,a,i){return{id:T?T.segmentId():-1,start:n,end:a,myFill:{above:i.myFill.above,below:i.myFill.below},otherFill:null}}var d=A.create();function s(n,a){d.insertBefore(n,function(i){return c=n.isStart,h=n.pt,f=a,b=i.isStart,v=i.pt,g=i.other.pt,((y=l.pointsCompare(h,v))!==0?y:l.pointsSame(f,g)?0:c!==b?c?1:-1:l.pointAboveOrOnLine(f,b?v:g,b?g:v)?1:-1)<0;var c,h,f,b,v,g,y})}function t(n,a){var i=function(c,h){var f=A.node({isStart:!0,pt:c.start,seg:c,primary:h,other:null,status:null});return s(f,c.end),f}(n,a);return function(c,h,f){var b=A.node({isStart:!1,pt:h.end,seg:h,primary:f,other:c,status:null});c.other=b,s(b,c.pt)}(i,n,a),i}function o(n,a){var i=x(a,n.seg.end,n.seg);return function(c,h){T&&T.segmentChop(c.seg,h),c.other.remove(),c.seg.end=h,c.other.pt=h,s(c.other,c.pt)}(n,a),t(i,n.primary)}function r(n,a){var i=A.create();function c(_){return i.findTransition(function(E){var L,C,P,I,U,z;return L=_,C=E.ev,P=L.seg.start,I=L.seg.end,U=C.seg.start,z=C.seg.end,(l.pointsCollinear(P,U,z)?l.pointsCollinear(I,U,z)||l.pointAboveOrOnLine(I,U,z)?1:-1:l.pointAboveOrOnLine(P,U,z)?1:-1)>0})}function h(_,E){var L=_.seg,C=E.seg,P=L.start,I=L.end,U=C.start,z=C.end;T&&T.checkIntersection(L,C);var H=l.linesIntersect(P,I,U,z);if(H===!1){if(!l.pointsCollinear(P,I,U)||l.pointsSame(P,z)||l.pointsSame(I,U))return!1;var F=l.pointsSame(P,U),N=l.pointsSame(I,z);if(F&&N)return E;var B=!F&&l.pointBetween(P,U,z),j=!N&&l.pointBetween(I,U,z);if(F)return j?o(E,I):o(_,z),E;B&&(N||(j?o(E,I):o(_,z)),o(E,P))}else H.alongA===0&&(H.alongB===-1?o(_,U):H.alongB===0?o(_,H.pt):H.alongB===1&&o(_,z)),H.alongB===0&&(H.alongA===-1?o(E,P):H.alongA===0?o(E,H.pt):H.alongA===1&&o(E,I));return!1}for(var f=[];!d.isEmpty();){var b=d.getHead();if(T&&T.vert(b.pt[0]),b.isStart){let _=function(){if(g){var E=h(b,g);if(E)return E}return!!y&&h(b,y)};T&&T.segmentNew(b.seg,b.primary);var v=c(b),g=v.before?v.before.ev:null,y=v.after?v.after.ev:null;T&&T.tempStatus(b.seg,!!g&&g.seg,!!y&&y.seg);var p,m,w=_();if(w&&(k?(m=b.seg.myFill.below===null||b.seg.myFill.above!==b.seg.myFill.below)&&(w.seg.myFill.above=!w.seg.myFill.above):w.seg.otherFill=b.seg.myFill,T&&T.segmentUpdate(w.seg),b.other.remove(),b.remove()),d.getHead()!==b){T&&T.rewind(b.seg);continue}k?(m=b.seg.myFill.below===null||b.seg.myFill.above!==b.seg.myFill.below,b.seg.myFill.below=y?y.seg.myFill.above:n,b.seg.myFill.above=m?!b.seg.myFill.below:b.seg.myFill.below):b.seg.otherFill===null&&(p=y?b.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:b.primary?a:n,b.seg.otherFill={above:p,below:p}),T&&T.status(b.seg,!!g&&g.seg,!!y&&y.seg),b.other.status=v.insert(A.node({ev:b}))}else{var u=b.status;if(u===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(i.exists(u.prev)&&i.exists(u.next)&&h(u.prev.ev,u.next.ev),T&&T.statusRemove(u.ev.seg),u.remove(),!b.primary){var S=b.seg.myFill;b.seg.myFill=b.seg.otherFill,b.seg.otherFill=S}f.push(b.seg)}d.getHead().remove()}return T&&T.done(),f}return k?{addRegion:function(n){for(var a,i,c,h=n[n.length-1],f=0;f<n.length;f++){a=h,h=n[f];var b=l.pointsCompare(a,h);b!==0&&t((i=b<0?a:h,c=b<0?h:a,{id:T?T.segmentId():-1,start:i,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,a,i,c){return n.forEach(function(h){t(x(h.start,h.end,h),!0)}),i.forEach(function(h){t(x(h.start,h.end,h),!1)}),r(a,c)}}}},26859:function($){$.exports={create:function(){var R={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==R.root},isEmpty:function(){return R.root.next===null},getHead:function(){return R.root.next},insertBefore:function(e,A){for(var k=R.root,l=R.root.next;l!==null;){if(A(l))return e.prev=l.prev,e.next=l,l.prev.next=e,void(l.prev=e);k=l,l=l.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var A=R.root,k=R.root.next;k!==null&&!e(k);)A=k,k=k.next;return{before:A===R.root?null:A,after:k,insert:function(l){return l.prev=A,l.next=k,A.next=l,k!==null&&(k.prev=l),l}}}};return R},node:function(R){return R.prev=null,R.next=null,R.remove=function(){R.prev.next=R.next,R.next&&(R.next.prev=R.prev),R.prev=null,R.next=null},R}}},11328:function($){$.exports=function(R,e,A){var k=[],l=[];return R.forEach(function(T){var x=T.start,d=T.end;if(e.pointsSame(x,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{A&&A.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},o=s,r=0;r<k.length;r++){var n=(f=k[r])[0],a=(f[1],f[f.length-1]);if(f[f.length-2],e.pointsSame(n,x)){if(u(r,!0,!0))break}else if(e.pointsSame(n,d)){if(u(r,!0,!1))break}else if(e.pointsSame(a,x)){if(u(r,!1,!0))break}else if(e.pointsSame(a,d)&&u(r,!1,!1))break}if(o===s)return k.push([x,d]),void(A&&A.chainNew(x,d));if(o===t){A&&A.chainMatch(s.index);var i=s.index,c=s.matches_pt1?d:x,h=s.matches_head,f=k[i],b=h?f[0]:f[f.length-1],v=h?f[1]:f[f.length-2],g=h?f[f.length-1]:f[0],y=h?f[f.length-2]:f[1];return e.pointsCollinear(v,b,c)&&(h?(A&&A.chainRemoveHead(s.index,c),f.shift()):(A&&A.chainRemoveTail(s.index,c),f.pop()),b=v),e.pointsSame(g,c)?(k.splice(i,1),e.pointsCollinear(y,g,b)&&(h?(A&&A.chainRemoveTail(s.index,b),f.pop()):(A&&A.chainRemoveHead(s.index,b),f.shift())),A&&A.chainClose(s.index),void l.push(f)):void(h?(A&&A.chainAddHead(s.index,c),f.unshift(c)):(A&&A.chainAddTail(s.index,c),f.push(c)))}var p=s.index,m=t.index;A&&A.chainConnect(p,m);var w=k[p].length<k[m].length;s.matches_head?t.matches_head?w?(S(p),_(p,m)):(S(m),_(m,p)):_(m,p):t.matches_head?_(p,m):w?(S(p),_(m,p)):(S(m),_(p,m))}function u(E,L,C){return o.index=E,o.matches_head=L,o.matches_pt1=C,o===s?(o=t,!1):(o=null,!0)}function S(E){A&&A.chainReverse(E),k[E].reverse()}function _(E,L){var C=k[E],P=k[L],I=C[C.length-1],U=C[C.length-2],z=P[0],H=P[1];e.pointsCollinear(U,I,z)&&(A&&A.chainRemoveTail(E,I),C.pop(),I=U),e.pointsCollinear(I,z,H)&&(A&&A.chainRemoveHead(L,z),P.shift()),A&&A.chainJoin(E,L),k[E]=C.concat(P),k.splice(L,1)}}),l}},55968:function($){function R(A,k,l){var T=[];return A.forEach(function(x){var d=(x.myFill.above?8:0)+(x.myFill.below?4:0)+(x.otherFill&&x.otherFill.above?2:0)+(x.otherFill&&x.otherFill.below?1:0);k[d]!==0&&T.push({id:l?l.segmentId():-1,start:x.start,end:x.end,myFill:{above:k[d]===1,below:k[d]===2},otherFill:null})}),l&&l.selected(T),T}var e={union:function(A,k){return R(A,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(A,k){return R(A,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(A,k){return R(A,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(A,k){return R(A,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(A,k){return R(A,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};$.exports=e},14847:function($,R,e){var A=e(21630).Transform,k=e(90715);function l(){A.call(this,{readableObjectMode:!0})}function T(x,d,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=x,d&&(this.code=d),s&&(this.statusCode=s)}l.prototype=Object.create(A.prototype),l.prototype.constructor=l,k(l.prototype),R.OF=function(x,d,s){for(var t=d,o=0;o<s.length;)if(x[t++]!==s[o++])return!1;return!0},R.eG=function(x,d){var s=[],t=0;if(d&&d==="hex")for(;t<x.length;)s.push(parseInt(x.slice(t,t+2),16)),t+=2;else for(;t<x.length;t++)s.push(255&x.charCodeAt(t));return s},R.mP=function(x,d){return x[d]|x[d+1]<<8},R.n8=function(x,d){return x[d+1]|x[d]<<8},R.nm=function(x,d){return x[d]|x[d+1]<<8|x[d+2]<<16|16777216*x[d+3]},R.Ag=function(x,d){return x[d+3]|x[d+2]<<8|x[d+1]<<16|16777216*x[d]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},71371:function($){function R(k,l){var T=new Error(k);return T.code=l,T}function e(k){try{return decodeURIComponent(escape(k))}catch{return k}}function A(k,l,T){this.input=k.subarray(l,T),this.start=l;var x=String.fromCharCode.apply(null,this.input.subarray(0,4));if(x!=="II*\0"&&x!=="MM\0*")throw R("invalid TIFF signature","EBADDATA");this.big_endian=x[0]==="M"}A.prototype.each=function(k){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},A.prototype.read_uint16=function(k){var l=this.input;if(k+2>l.length)throw R("unexpected EOF","EBADDATA");return this.big_endian?256*l[k]+l[k+1]:l[k]+256*l[k+1]},A.prototype.read_uint32=function(k){var l=this.input;if(k+4>l.length)throw R("unexpected EOF","EBADDATA");return this.big_endian?16777216*l[k]+65536*l[k+1]+256*l[k+2]+l[k+3]:l[k]+256*l[k+1]+65536*l[k+2]+16777216*l[k+3]},A.prototype.is_subifd_link=function(k,l){return k===0&&l===34665||k===0&&l===34853||k===34665&&l===40965},A.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},A.prototype.exif_format_read=function(k,l){var T;switch(k){case 1:case 2:return this.input[l];case 6:return(T=this.input[l])|33554430*(128&T);case 3:return this.read_uint16(l);case 8:return(T=this.read_uint16(l))|131070*(32768&T);case 4:return this.read_uint32(l);case 9:return 0|this.read_uint32(l);default:return null}},A.prototype.scan_ifd=function(k,l,T){var x=this.read_uint16(l);l+=2;for(var d=0;d<x;d++){var s=this.read_uint16(l),t=this.read_uint16(l+2),o=this.read_uint32(l+4),r=this.exif_format_length(t),n=o*r,a=n<=4?l+8:this.read_uint32(l+8),i=!1;if(a+n>this.input.length)throw R("unexpected EOF","EBADDATA");for(var c=[],h=a,f=0;f<o;f++,h+=r){var b=this.exif_format_read(t,h);if(b===null){c=null;break}c.push(b)}if(Array.isArray(c)&&t===2&&(c=e(String.fromCharCode.apply(null,c)))&&c[c.length-1]==="\0"&&(c=c.slice(0,-1)),this.is_subifd_link(k,s)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:s,offset:c[0]}),i=!0),T({is_big_endian:this.big_endian,ifd:k,tag:s,format:t,count:o,entry_offset:l+this.start,data_length:n,data_offset:a+this.start,value:c,is_subifd_link:i})===!1)return void(this.aborted=!0);l+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},$.exports.ExifParser=A,$.exports.get_orientation=function(k){var l=0;try{return new A(k,0,k.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return l=T.value[0],!1}),l}catch{return-1}}},76767:function($,R,e){var A=e(14847).n8,k=e(14847).Ag;function l(o,r){if(o.length<4+r)return null;var n=k(o,r);return o.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,o.slice(r+4,r+8)),data:o.slice(r+8,r+n),end:r+n}}function T(o,r){for(var n=0;;){var a=l(o,n);if(!a)break;switch(a.boxtype){case"ispe":r.sizes.push({width:k(a.data,4),height:k(a.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&a.data[0]})}n=a.end}}function x(o,r,n){for(var a=0,i=0;i<n;i++)a=256*a+(o[r+i]||0);return a}function d(o,r){for(var n=o[4]>>4&15,a=15&o[4],i=o[5]>>4&15,c=A(o,6),h=8,f=0;f<c;f++){var b=A(o,h),v=A(o,h+=2),g=x(o,h+=2,i),y=A(o,h+=i);if(h+=2,v===0&&y===1){var p=x(o,h,n),m=x(o,h+n,a);r.item_loc[b]={length:m,offset:p+g}}h+=y*(n+a)}}function s(o,r){for(var n=A(o,4),a=6,i=0;i<n;i++){var c=l(o,a);if(!c)break;if(c.boxtype==="infe"){for(var h=A(c.data,4),f="",b=8;b<c.data.length&&c.data[b];b++)f+=String.fromCharCode(c.data[b]);r.item_inf[f]=h}a=c.end}}function t(o,r){for(var n=0;;){var a=l(o,n);if(!a)break;a.boxtype==="ipco"&&T(a.data,r),n=a.end}}$.exports.unbox=l,$.exports.readSizeFromMeta=function(o){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(b,v){for(var g=4;;){var y=l(b,g);if(!y)break;y.boxtype==="iprp"&&t(y.data,v),y.boxtype==="iloc"&&d(y.data,v),y.boxtype==="iinf"&&s(y.data,v),g=y.end}}(o,r),r.sizes.length){var n,a,i,c=(a=(n=r.sizes).reduce(function(b,v){return b.width>v.width||b.width===v.width&&b.height>v.height?b:v}),i=n.reduce(function(b,v){return b.height>v.height||b.height===v.height&&b.width>v.width?b:v}),a.width>i.height||a.width===i.height&&a.height>i.width?a:i),h=1;r.transforms.forEach(function(b){var v={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(b.type==="imir"&&(h=b.value===0?g[h]:v[h=v[h=g[h]]]),b.type==="irot")for(var y=0;y<b.value;y++)h=v[h]});var f=null;return r.item_inf.Exif&&(f=r.item_loc[r.item_inf.Exif]),{width:c.width,height:c.height,orientation:r.transforms.length?h:null,variants:r.sizes,exif_location:f}}},$.exports.getMimeType=function(o){var r=String.fromCharCode.apply(null,o.slice(0,4)),n={};n[r]=!0;for(var a=8;a<o.length;a+=4)n[String.fromCharCode.apply(null,o.slice(a,a+4))]=!0;if(n.mif1||n.msf1||n.miaf)return r==="avif"||r==="avis"||r==="avio"?{type:"avif",mime:"image/avif"}:r==="heic"||r==="heix"?{type:"heic",mime:"image/heic"}:r==="hevc"||r==="hevx"?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function($,R,e){var A=e(14847).eG,k=e(14847).OF,l=e(14847).Ag,T=e(76767),x=e(71371),d=A("ftyp");$.exports=function(s){if(k(s,4,d)){var t=T.unbox(s,0);if(t){var o=T.getMimeType(t.data);if(o){for(var r,n=t.end;;){var a=T.unbox(s,n);if(!a)break;if(n=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){r=a.data;break}}if(r){var i=T.readSizeFromMeta(r);if(i){var c={width:i.width,height:i.height,type:o.type,mime:o.mime,wUnits:"px",hUnits:"px"};if(i.variants.length>1&&(c.variants=i.variants),i.orientation&&(c.orientation=i.orientation),i.exif_location&&i.exif_location.offset+i.exif_location.length<=s.length){var h=l(s,i.exif_location.offset),f=s.slice(i.exif_location.offset+h+4,i.exif_location.offset+i.exif_location.length),b=x.get_orientation(f);b>0&&(c.orientation=b)}return c}}}}}}},2504:function($,R,e){var A=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=A("BM");$.exports=function(x){if(!(x.length<26)&&k(x,0,T))return{width:l(x,18),height:l(x,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function($,R,e){var A=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=A("GIF87a"),x=A("GIF89a");$.exports=function(d){if(!(d.length<10)&&(k(d,0,T)||k(d,0,x)))return{width:l(d,6),height:l(d,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function($,R,e){var A=e(14847).mP;$.exports=function(k){var l=A(k,0),T=A(k,2),x=A(k,4);if(l===0&&T===1&&x){for(var d=[],s={width:0,height:0},t=0;t<x;t++){var o=k[6+16*t]||256,r=k[6+16*t+1]||256,n={width:o,height:r};d.push(n),(o>s.width||r>s.height)&&(s=n)}return{width:s.width,height:s.height,variants:d,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function($,R,e){var A=e(14847).n8,k=e(14847).eG,l=e(14847).OF,T=e(71371),x=k("Exif\0\0");$.exports=function(d){if(!(d.length<2)&&d[0]===255&&d[1]===216&&d[2]===255)for(var s=2;;){for(;;){if(d.length-s<2)return;if(d[s++]===255)break}for(var t,o,r=d[s++];r===255;)r=d[s++];if(208<=r&&r<=217||r===1)t=0;else{if(!(192<=r&&r<=254)||d.length-s<2)return;t=A(d,s)-2,s+=2}if(r===217||r===218)return;if(r===225&&t>=10&&l(d,s,x)&&(o=T.get_orientation(d.slice(s+6,s+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(d.length-s<t)return;var n={width:A(d,s+3),height:A(d,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return o>0&&(n.orientation=o),n}s+=t}}},6303:function($,R,e){var A=e(14847).eG,k=e(14847).OF,l=e(14847).Ag,T=A(`PNG\r

`),x=A("IHDR");$.exports=function(d){if(!(d.length<24)&&k(d,0,T)&&k(d,12,x))return{width:l(d,16),height:l(d,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function($,R,e){var A=e(14847).eG,k=e(14847).OF,l=e(14847).Ag,T=A("8BPS\0");$.exports=function(x){if(!(x.length<22)&&k(x,0,T))return{width:l(x,18),height:l(x,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function($){function R(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,A=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,l=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,x=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function d(s){return x.test(s)?s.match(x)[0]:"px"}$.exports=function(s){if(function(g){var y,p=0,m=g.length;for(g[0]===239&&g[1]===187&&g[2]===191&&(p=3);p<m&&((y=g[p])===32||y===9||y===13||y===10);)p++;return p!==m&&g[p]===60}(s)){for(var t="",o=0;o<s.length;o++)t+=String.fromCharCode(s[o]);var r=(t.match(e)||[""])[0];if(A.test(r)){var n=function(g){var y=g.match(k),p=g.match(l),m=g.match(T);return{width:y&&(y[1]||y[2]),height:p&&(p[1]||p[2]),viewbox:m&&(m[1]||m[2])}}(r),a=parseFloat(n.width),i=parseFloat(n.height);if(n.width&&n.height)return!R(a)||!R(i)?void 0:{width:a,height:i,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.height)};var c=(n.viewbox||"").split(" "),h={width:c[2],height:c[3]},f=parseFloat(h.width),b=parseFloat(h.height);if(R(f)&&R(b)&&d(h.width)===d(h.height)){var v=f/b;return n.width?R(a)?{width:a,height:a/v,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.width)}:void 0:n.height?R(i)?{width:i*v,height:i,type:"svg",mime:"image/svg+xml",wUnits:d(n.height),hUnits:d(n.height)}:void 0:{width:f,height:b,type:"svg",mime:"image/svg+xml",wUnits:d(h.width),hUnits:d(h.height)}}}}}},66278:function($,R,e){var A=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=e(14847).n8,x=e(14847).nm,d=e(14847).Ag,s=A("II*\0"),t=A("MM\0*");function o(a,i,c){return c?T(a,i):l(a,i)}function r(a,i,c){return c?d(a,i):x(a,i)}function n(a,i,c){var h=o(a,i+2,c);return r(a,i+4,c)!==1||h!==3&&h!==4?null:h===3?o(a,i+8,c):r(a,i+8,c)}$.exports=function(a){if(!(a.length<8)&&(k(a,0,s)||k(a,0,t))){var i=a[0]===77,c=r(a,4,i)-8;if(!(c<0)){var h=c+8;if(!(a.length-h<2)){var f=12*o(a,h+0,i);if(!(f<=0||(h+=2,a.length-h<f))){var b,v,g,y;for(b=0;b<f;b+=12)(y=o(a,h+b,i))===256?v=n(a,h+b,i):y===257&&(g=n(a,h+b,i));return v&&g?{width:v,height:g,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function($,R,e){var A=e(14847).eG,k=e(14847).OF,l=e(14847).mP,T=e(14847).nm,x=e(71371),d=A("RIFF"),s=A("WEBP");function t(n,a){if(n[a+3]===157&&n[a+4]===1&&n[a+5]===42)return{width:16383&l(n,a+6),height:16383&l(n,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function o(n,a){if(n[a]===47){var i=T(n,a+1);return{width:1+(16383&i),height:1+(i>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,a){return{width:1+(n[a+6]<<16|n[a+5]<<8|n[a+4]),height:1+(n[a+9]<<a|n[a+8]<<8|n[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}$.exports=function(n){if(!(n.length<16)&&(k(n,0,d)||k(n,8,s))){var a=12,i=null,c=0,h=T(n,4)+8;if(!(h>n.length)){for(;a+8<h;)if(n[a]!==0){var f=String.fromCharCode.apply(null,n.slice(a,a+4)),b=T(n,a+4);f==="VP8 "&&b>=10?i=i||t(n,a+8):f==="VP8L"&&b>=9?i=i||o(n,a+8):f==="VP8X"&&b>=10?i=i||r(n,a+8):f==="EXIF"&&(c=x.get_orientation(n.slice(a+8,a+8+b)),a=1/0),a+=8+b}else a++;if(i)return c>0&&(i.orientation=c),i}}}},91497:function($,R,e){$.exports={avif:e(24461),bmp:e(2504),gif:e(47342),ico:e(31355),jpeg:e(54261),png:e(6303),psd:e(38689),svg:e(6881),tiff:e(66278),webp:e(90784)}},33575:function($,R,e){var A=e(91497);$.exports=function(k){return function(l){for(var T=Object.keys(A),x=0;x<T.length;x++){var d=A[T[x]](l);if(d)return d}return null}(k)},$.exports.parsers=A},90386:function($){var R,e,A=$.exports={};function k(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function T(i){if(R===setTimeout)return setTimeout(i,0);if((R===k||!R)&&setTimeout)return R=setTimeout,setTimeout(i,0);try{return R(i,0)}catch{try{return R.call(null,i,0)}catch{return R.call(this,i,0)}}}(function(){try{R=typeof setTimeout=="function"?setTimeout:k}catch{R=k}try{e=typeof clearTimeout=="function"?clearTimeout:l}catch{e=l}})();var x,d=[],s=!1,t=-1;function o(){s&&x&&(s=!1,x.length?d=x.concat(d):t=-1,d.length&&r())}function r(){if(!s){var i=T(o);s=!0;for(var c=d.length;c;){for(x=d,d=[];++t<c;)x&&x[t].run();t=-1,c=d.length}x=null,s=!1,function(h){if(e===clearTimeout)return clearTimeout(h);if((e===l||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(h);try{e(h)}catch{try{return e.call(null,h)}catch{return e.call(this,h)}}}(i)}}function n(i,c){this.fun=i,this.array=c}function a(){}A.nextTick=function(i){var c=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)c[h-1]=arguments[h];d.push(new n(i,c)),d.length!==1||s||T(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},A.title="browser",A.browser=!0,A.env={},A.argv=[],A.version="",A.versions={},A.on=a,A.addListener=a,A.once=a,A.off=a,A.removeListener=a,A.removeAllListeners=a,A.emit=a,A.prependListener=a,A.prependOnceListener=a,A.listeners=function(i){return[]},A.binding=function(i){throw new Error("process.binding is not supported")},A.cwd=function(){return"/"},A.chdir=function(i){throw new Error("process.chdir is not supported")},A.umask=function(){return 0}},5877:function($,R,e){for(var A=e(9748),k=typeof window>"u"?e.g:window,l=["moz","webkit"],T="AnimationFrame",x=k["request"+T],d=k["cancel"+T]||k["cancelRequest"+T],s=0;!x&&s<l.length;s++)x=k[l[s]+"Request"+T],d=k[l[s]+"Cancel"+T]||k[l[s]+"CancelRequest"+T];if(!x||!d){var t=0,o=0,r=[];x=function(n){if(r.length===0){var a=A(),i=Math.max(0,16.666666666666668-(a-t));t=i+a,setTimeout(function(){var c=r.slice(0);r.length=0;for(var h=0;h<c.length;h++)if(!c[h].cancelled)try{c[h].callback(t)}catch(f){setTimeout(function(){throw f},0)}},Math.round(i))}return r.push({handle:++o,callback:n,cancelled:!1}),o},d=function(n){for(var a=0;a<r.length;a++)r[a].handle===n&&(r[a].cancelled=!0)}}$.exports=function(n){return x.call(k,n)},$.exports.cancel=function(){d.apply(k,arguments)},$.exports.polyfill=function(n){n||(n=k),n.requestAnimationFrame=x,n.cancelAnimationFrame=d}},3593:function($,R,e){var A=e(21527),k=e(25075),l=e(93447),T=e(71299),x=e(56131),d=e(30120),s=e(57060),t=s.float32,o=s.fract32;$.exports=function(n,a){if(typeof n=="function"?(a||(a={}),a.regl=n):a=n,a.length&&(a.positions=a),!(n=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var i,c,h,f,b,v,g=n._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},p=[];return f=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),b=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=n.buffer({usage:"static",type:"float",data:r}),S(a),i=n({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,L){return[L.viewport.x,L.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:f,offset:function(E,L){return 4*L.offset},divisor:1},position:{buffer:c,offset:function(E,L){return 8*L.offset},divisor:1},positionFract:{buffer:h,offset:function(E,L){return 8*L.offset},divisor:1},error:{buffer:b,offset:function(E,L){return 16*L.offset},divisor:1},direction:{buffer:v,stride:24,offset:0},lineOffset:{buffer:v,stride:24,offset:8},capOffset:{buffer:v,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),x(m,{update:S,draw:w,destroy:_,regl:n,gl:g,canvas:g.canvas,groups:p}),m;function m(E){E?S(E):E===null&&_(),w()}function w(E){if(typeof E=="number")return u(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),p.forEach(function(L,C){L&&(E&&(E[C]?L.draw=!0:L.draw=!1),L.draw?u(C):L.draw=!0)})}function u(E){typeof E=="number"&&(E=p[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],i(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var L=0,C=0;if(m.groups=p=E.map(function(N,B){var j=p[B];return N&&(typeof N=="function"?N={after:N}:typeof N[0]=="number"&&(N={positions:N}),N=T(N,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),j||(p[B]=j={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},N=x({},y,N)),l(j,N,[{lineWidth:function(K){return .5*+K},capSize:function(K){return .5*+K},opacity:parseFloat,errors:function(K){return K=d(K),C+=K.length,K},positions:function(K,G){return K=d(K,"float64"),G.count=Math.floor(K.length/2),G.bounds=A(K,2),G.offset=L,L+=G.count,K}},{color:function(K,G){var V=G.count;if(K||(K="transparent"),!Array.isArray(K)||typeof K[0]=="number"){var W=K;K=Array(V);for(var J=0;J<V;J++)K[J]=W}if(K.length<V)throw Error("Not enough colors");for(var X=new Uint8Array(4*V),ee=0;ee<V;ee++){var re=k(K[ee],"uint8");X.set(re,4*ee)}return X},range:function(K,G,V){var W=G.bounds;return K||(K=W),G.scale=[1/(K[2]-K[0]),1/(K[3]-K[1])],G.translate=[-K[0],-K[1]],G.scaleFract=o(G.scale),G.translateFract=o(G.translate),K},viewport:function(K){var G;return Array.isArray(K)?G={x:K[0],y:K[1],width:K[2]-K[0],height:K[3]-K[1]}:K?(G={x:K.x||K.left||0,y:K.y||K.top||0},K.right?G.width=K.right-G.x:G.width=K.w||K.width||0,K.bottom?G.height=K.bottom-G.y:G.height=K.h||K.height||0):G={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},G}}])),j}),L||C){var P=p.reduce(function(N,B,j){return N+(B?B.count:0)},0),I=new Float64Array(2*P),U=new Uint8Array(4*P),z=new Float32Array(4*P);p.forEach(function(N,B){if(N){var j=N.positions,K=N.count,G=N.offset,V=N.color,W=N.errors;K&&(U.set(V,4*G),z.set(W,4*G),I.set(j,2*G))}});var H=t(I);c(H);var F=o(I,H);h(F),f(U),b(z)}}}function _(){c.destroy(),h.destroy(),f.destroy(),b.destroy(),v.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function($,R,e){var A=e(25075),k=e(21527),l=e(56131),T=e(56068),x=e(71299),d=e(30120),s=e(11474),t=e(54),o=e(57060),r=o.float32,n=o.fract32,a=e(83522),i=e(18863),c=e(6851);function h(f,b){if(!(this instanceof h))return new h(f,b);if(typeof f=="function"?(b||(b={}),b.regl=f):b=f,b.length&&(b.positions=b),!(f=b.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=f._gl,this.regl=f,this.passes=[],this.shaders=h.shaders.has(f)?h.shaders.get(f):h.shaders.set(f,h.createShaders(f)).get(f),this.update(b)}$.exports=h,h.dashMult=2,h.maxPatternLength=256,h.precisionThreshold=3e6,h.maxPoints=1e4,h.maxLines=2048,h.shaders=new a,h.createShaders=function(f){var b,v=f.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),g={primitive:"triangle strip",instances:f.prop("count"),count:4,offset:0,uniforms:{miterMode:function(p,m){return m.join==="round"?2:1},miterLimit:f.prop("miterLimit"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),thickness:f.prop("thickness"),dashTexture:f.prop("dashTexture"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),dashLength:f.prop("dashLength"),viewport:function(p,m){return[m.viewport.x,m.viewport.y,p.viewportWidth,p.viewportHeight]},depth:f.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(p,m){return!m.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport")},y=f(l({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},g));try{b=f(l({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aColor:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:f.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},g))}catch{b=y}return{fill:f({primitive:"triangle",elements:function(p,m){return m.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:f.prop("scale"),color:f.prop("fill"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),viewport:function(p,m){return[m.viewport.x,m.viewport.y,p.viewportWidth,p.viewportHeight]}},attributes:{position:{buffer:f.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8}},blend:g.blend,depth:{enable:!1},scissor:g.scissor,stencil:g.stencil,viewport:g.viewport}),rect:y,miter:b}},h.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},h.prototype.render=function(){for(var f,b=[],v=arguments.length;v--;)b[v]=arguments[v];b.length&&(f=this).update.apply(f,b),this.draw()},h.prototype.draw=function(){for(var f=this,b=[],v=arguments.length;v--;)b[v]=arguments[v];return(b.length?b:this.passes).forEach(function(g,y){var p;if(g&&Array.isArray(g))return(p=f).draw.apply(p,g);typeof g=="number"&&(g=f.passes[g]),g&&g.count>1&&g.opacity&&(f.regl._refresh(),g.fill&&g.triangles&&g.triangles.length>2&&f.shaders.fill(g),g.thickness&&(g.scale[0]*g.viewport.width>h.precisionThreshold||g.scale[1]*g.viewport.height>h.precisionThreshold||g.join==="rect"||!g.join&&(g.thickness<=2||g.count>=h.maxPoints)?f.shaders.rect(g):f.shaders.miter(g)))}),this},h.prototype.update=function(f){var b=this;if(f){f.length!=null?typeof f[0]=="number"&&(f=[{positions:f}]):Array.isArray(f)||(f=[f]);var v=this.regl,g=this.gl;if(f.forEach(function(u,S){var _=b.passes[S];if(u!==void 0)if(u!==null){if(typeof u[0]=="number"&&(u={positions:u}),u=x(u,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),_||(b.passes[S]=_={id:S,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:v.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:v.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},u=l({},h.defaults,u)),u.thickness!=null&&(_.thickness=parseFloat(u.thickness)),u.opacity!=null&&(_.opacity=parseFloat(u.opacity)),u.miterLimit!=null&&(_.miterLimit=parseFloat(u.miterLimit)),u.overlay!=null&&(_.overlay=!!u.overlay,S<h.maxLines&&(_.depth=2*(h.maxLines-1-S%h.maxLines)/h.maxLines-1)),u.join!=null&&(_.join=u.join),u.hole!=null&&(_.hole=u.hole),u.fill!=null&&(_.fill=u.fill?A(u.fill,"uint8"):null),u.viewport!=null&&(_.viewport=i(u.viewport)),_.viewport||(_.viewport=i([g.drawingBufferWidth,g.drawingBufferHeight])),u.close!=null&&(_.close=u.close),u.positions===null&&(u.positions=[]),u.positions){var E,L;if(u.positions.x&&u.positions.y){var C=u.positions.x,P=u.positions.y;L=_.count=Math.max(C.length,P.length),E=new Float64Array(2*L);for(var I=0;I<L;I++)E[2*I]=C[I],E[2*I+1]=P[I]}else E=d(u.positions,"float64"),L=_.count=Math.floor(E.length/2);var U=_.bounds=k(E,2);if(_.fill){for(var z=[],H={},F=0,N=0,B=0,j=_.count;N<j;N++){var K=E[2*N],G=E[2*N+1];isNaN(K)||isNaN(G)||K==null||G==null?(K=E[2*F],G=E[2*F+1],H[N]=F):F=N,z[B++]=K,z[B++]=G}if(u.splitNull){_.count-1 in H||(H[_.count]=_.count-1);var V=Object.keys(H).map(Number).sort(function(dt,bt){return dt-bt}),W=[],J=0,X=_.hole!=null?_.hole[0]:null;if(X!=null){var ee=c(V,function(dt){return dt>=X});(V=V.slice(0,ee)).push(X)}for(var re=function(dt){var bt=z.slice(2*J,2*V[dt]).concat(X?z.slice(2*X):[]),St=(_.hole||[]).map(function(zt){return zt-X+(V[dt]-J)}),Et=s(bt,St);Et=Et.map(function(zt){return zt+J+(zt+J<V[dt]?0:X-V[dt])}),W.push.apply(W,Et),J=V[dt]+1},ie=0;ie<V.length;ie++)re(ie);for(var se=0,fe=W.length;se<fe;se++)H[W[se]]!=null&&(W[se]=H[W[se]]);_.triangles=W}else{for(var ye=s(z,_.hole||[]),ge=0,he=ye.length;ge<he;ge++)H[ye[ge]]!=null&&(ye[ge]=H[ye[ge]]);_.triangles=ye}}var ve=new Float64Array(E);t(ve,2,U);var Ie=new Float64Array(2*L+6);_.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Ie[0]=ve[2*L-4],Ie[1]=ve[2*L-3]):(Ie[0]=ve[2*L-2],Ie[1]=ve[2*L-1]):(Ie[0]=ve[0],Ie[1]=ve[1]),Ie.set(ve,2),_.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Ie[2*L+2]=ve[2],Ie[2*L+3]=ve[3],_.count-=1):(Ie[2*L+2]=ve[0],Ie[2*L+3]=ve[1],Ie[2*L+4]=ve[2],Ie[2*L+5]=ve[3]):(Ie[2*L+2]=ve[2*L-2],Ie[2*L+3]=ve[2*L-1],Ie[2*L+4]=ve[2*L-2],Ie[2*L+5]=ve[2*L-1]);var xe=r(Ie);_.positionBuffer(xe);var Ae=n(Ie,xe);_.positionFractBuffer(Ae)}if(u.range?_.range=u.range:_.range||(_.range=_.bounds),(u.range||u.positions)&&_.count){var Se=_.bounds,Te=Se[2]-Se[0],Q=Se[3]-Se[1],oe=_.range[2]-_.range[0],ce=_.range[3]-_.range[1];_.scale=[Te/oe,Q/ce],_.translate=[-_.range[0]/oe+Se[0]/oe||0,-_.range[1]/ce+Se[1]/ce||0],_.scaleFract=n(_.scale),_.translateFract=n(_.translate)}if(u.dashes){var me,Me=0;if(!u.dashes||u.dashes.length<2)Me=1,me=new Uint8Array([255,255,255,255,255,255,255,255]);else{Me=0;for(var Re=0;Re<u.dashes.length;++Re)Me+=u.dashes[Re];me=new Uint8Array(Me*h.dashMult);for(var Ce=0,ze=255,le=0;le<2;le++)for(var de=0;de<u.dashes.length;++de){for(var be=0,Fe=u.dashes[de]*h.dashMult*.5;be<Fe;++be)me[Ce++]=ze;ze^=255}}_.dashLength=Me,_.dashTexture({channels:1,data:me,width:me.length,height:1,mag:"linear",min:"linear"},0,0)}if(u.color){var Ve=_.count,He=u.color;He||(He="transparent");var rt=new Uint8Array(4*Ve+4);if(Array.isArray(He)&&typeof He[0]!="number"){for(var tt=0;tt<Ve;tt++){var ot=A(He[tt],"uint8");rt.set(ot,4*tt)}rt.set(A(He[0],"uint8"),4*Ve)}else for(var ht=A(He,"uint8"),_t=0;_t<Ve+1;_t++)rt.set(ht,4*_t);_.colorBuffer({usage:"dynamic",type:"uint8",data:rt})}}else b.passes[S]=null}),f.length<this.passes.length){for(var y=f.length;y<this.passes.length;y++){var p=this.passes[y];p&&(p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy())}this.passes.length=f.length}for(var m=[],w=0;w<this.passes.length;w++)this.passes[w]!==null&&m.push(this.passes[w]);return this.passes=m,this}},h.prototype.destroy=function(){return this.passes.forEach(function(f){f.colorBuffer.destroy(),f.positionBuffer.destroy(),f.dashTexture.destroy()}),this.passes.length=0,this}},11870:function($,R,e){function A(g,y){return function(p){if(Array.isArray(p))return p}(g)||function(p,m){var w=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(w!=null){var u,S,_=[],E=!0,L=!1;try{for(w=w.call(p);!(E=(u=w.next()).done)&&(_.push(u.value),!m||_.length!==m);E=!0);}catch(C){L=!0,S=C}finally{try{E||w.return==null||w.return()}finally{if(L)throw S}}return _}}(g,y)||k(g,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(g,y){if(g){if(typeof g=="string")return l(g,y);var p=Object.prototype.toString.call(g).slice(8,-1);return p==="Object"&&g.constructor&&(p=g.constructor.name),p==="Map"||p==="Set"?Array.from(g):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?l(g,y):void 0}}function l(g,y){(y==null||y>g.length)&&(y=g.length);for(var p=0,m=new Array(y);p<y;p++)m[p]=g[p];return m}var T=e(25075),x=e(21527),d=e(6475),s=e(88294),t=e(56131),o=e(56068),r=e(71299),n=e(93447),a=e(30120),i=e(62683),c=e(57060),h=e(18863),f=b;function b(g,y){var p=this;if(!(this instanceof b))return new b(g,y);typeof g=="function"?(y||(y={}),y.regl=g):(y=g,g=null),y&&y.length&&(y.positions=y);var m,w=(g=y.regl)._gl,u=[];this.tooManyColors=i,m=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:g,gl:w,groups:[],markerCache:[null],markerTextures:[null],palette:u,paletteIds:{},paletteTexture:m,maxColors:255,maxSize:100,canvas:w.canvas}),this.update(y);var S={uniforms:{constPointSize:!!y.constPointSize,opacity:g.prop("opacity"),paletteSize:function(L,C){return[p.tooManyColors?0:255,m.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:m},attributes:{x:function(L,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(L,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(L,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(L,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(L,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/p.maxSize)]}},borderSize:function(L,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/p.maxSize)]}},colorId:function(L,C){return C.color.length?{buffer:C.colorBuffer,stride:p.tooManyColors?8:4,offset:0}:{constant:p.tooManyColors?u.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(L,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:p.tooManyColors?8:4,offset:p.tooManyColors?4:2}:{constant:p.tooManyColors?u.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(L,C){return C.activation===!0?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},_=t({},S);_.frag=o([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),_.vert=o([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=g(_);var E=t({},S);E.frag=o([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=o([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),i&&(E.frag=E.frag.replace("smoothstep","smoothStep"),_.frag=_.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(E)}b.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},b.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},b.prototype.draw=function(){for(var g=this,y=arguments.length,p=new Array(y),m=0;m<y;m++)p[m]=arguments[m];var w=this.groups;if(p.length===1&&Array.isArray(p[0])&&(p[0][0]===null||Array.isArray(p[0][0]))&&(p=p[0]),this.regl._refresh(),p.length)for(var u=0;u<p.length;u++)this.drawItem(u,p[u]);else w.forEach(function(S,_){g.drawItem(_)});return this},b.prototype.drawItem=function(g,y){var p,m=this.groups,w=m[g];if(typeof y=="number"&&(g=y,w=m[y],y=null),w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,y));for(var u=[],S=1;S<w.activation.length;S++)w.activation[S]&&(w.activation[S]===!0||w.activation[S].data.length)&&u.push.apply(u,function(_){if(Array.isArray(_))return l(_)}(p=this.getMarkerDrawOptions(S,w,y))||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(p)||k(p)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());u.length&&this.drawMarker(u)}},b.prototype.getMarkerDrawOptions=function(g,y,p){var m=y.range,w=y.tree,u=y.viewport,S=y.activation,_=y.selectionBuffer,E=y.count;if(this.regl,!w)return p?[t({},y,{markerTexture:this.markerTextures[g],activation:S[g],count:p.length,elements:p,offset:0})]:[t({},y,{markerTexture:this.markerTextures[g],activation:S[g],offset:0})];var L=[],C=w.range(m,{lod:!0,px:[(m[2]-m[0])/u.width,(m[3]-m[1])/u.height]});if(p){for(var P=S[g].data,I=new Uint8Array(E),U=0;U<p.length;U++){var z=p[U];I[z]=P?P[z]:1}_.subdata(I)}for(var H=C.length;H--;){var F=A(C[H],2),N=F[0],B=F[1];L.push(t({},y,{markerTexture:this.markerTextures[g],activation:p?_:S[g],offset:N,count:B-N}))}return L},b.prototype.update=function(){for(var g=this,y=arguments.length,p=new Array(y),m=0;m<y;m++)p[m]=arguments[m];if(p.length){p.length===1&&Array.isArray(p[0])&&(p=p[0]);var w=this.groups,u=this.gl,S=this.regl,_=this.maxSize,E=this.maxColors,L=this.palette;this.groups=w=p.map(function(C,P){var I=w[P];if(C===void 0)return I;C===null?C={positions:null}:typeof C=="function"?C={ondraw:C}:typeof C[0]=="number"&&(C={positions:C}),(C=r(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(C.positions=[]),C.tooManyColors!=null&&(g.tooManyColors=C.tooManyColors),I||(w[P]=I={id:P,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=t({},b.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=I.marker,delete I.marker),C.marker&&!("positions"in C)&&(C.positions=I.positions,delete I.positions);var U=0,z=0;if(n(I,C,[{snap:!0,size:function(ge,he){return ge==null&&(ge=b.defaults.size),U+=ge&&ge.length?1:0,ge},borderSize:function(ge,he){return ge==null&&(ge=b.defaults.borderSize),U+=ge&&ge.length?1:0,ge},opacity:parseFloat,color:function(ge,he){return ge==null&&(ge=b.defaults.color),ge=g.updateColor(ge),z++,ge},borderColor:function(ge,he){return ge==null&&(ge=b.defaults.borderColor),ge=g.updateColor(ge),z++,ge},bounds:function(ge,he,ve){return"range"in ve||(ve.range=null),ge},positions:function(ge,he,ve){var Ie=he.snap,xe=he.positionBuffer,Ae=he.positionFractBuffer,Se=he.selectionBuffer;if(ge.x||ge.y)return ge.x.length?he.xAttr={buffer:S.buffer(ge.x),offset:0,stride:4,count:ge.x.length}:he.xAttr={buffer:ge.x.buffer,offset:4*ge.x.offset||0,stride:4*(ge.x.stride||1),count:ge.x.count},ge.y.length?he.yAttr={buffer:S.buffer(ge.y),offset:0,stride:4,count:ge.y.length}:he.yAttr={buffer:ge.y.buffer,offset:4*ge.y.offset||0,stride:4*(ge.y.stride||1),count:ge.y.count},he.count=Math.max(he.xAttr.count,he.yAttr.count),ge;ge=a(ge,"float64");var Te=he.count=Math.floor(ge.length/2),Q=he.bounds=Te?x(ge,2):null;if(ve.range||he.range||(delete he.range,ve.range=Q),ve.marker||he.marker||(delete he.marker,ve.marker=null),Ie&&(Ie===!0||Te>Ie)?he.tree=s(ge,{bounds:Q}):Ie&&Ie.length&&(he.tree=Ie),he.tree){var oe={primitive:"points",usage:"static",data:he.tree,type:"uint32"};he.elements?he.elements(oe):he.elements=S.elements(oe)}var ce=c.float32(ge);return xe({data:ce,usage:"dynamic"}),Ae({data:c.fract32(ge,ce),usage:"dynamic"}),Se({data:new Uint8Array(Te),type:"uint8",usage:"stream"}),ge}},{marker:function(ge,he,ve){var Ie=he.activation;if(Ie.forEach(function(ce){return ce&&ce.destroy&&ce.destroy()}),Ie.length=0,ge&&typeof ge[0]!="number"){for(var xe=[],Ae=0,Se=Math.min(ge.length,he.count);Ae<Se;Ae++){var Te=g.addMarker(ge[Ae]);xe[Te]||(xe[Te]=new Uint8Array(he.count)),xe[Te][Ae]=1}for(var Q=0;Q<xe.length;Q++)if(xe[Q]){var oe={data:xe[Q],type:"uint8",usage:"static"};Ie[Q]?Ie[Q](oe):Ie[Q]=S.buffer(oe),Ie[Q].data=xe[Q]}}else Ie[g.addMarker(ge)]=!0;return ge},range:function(ge,he,ve){var Ie=he.bounds;if(Ie)return ge||(ge=Ie),he.scale=[1/(ge[2]-ge[0]),1/(ge[3]-ge[1])],he.translate=[-ge[0],-ge[1]],he.scaleFract=c.fract(he.scale),he.translateFract=c.fract(he.translate),ge},viewport:function(ge){return h(ge||[u.drawingBufferWidth,u.drawingBufferHeight])}}]),U){var H=I,F=H.count,N=H.size,B=H.borderSize,j=H.sizeBuffer,K=new Uint8Array(2*F);if(N.length||B.length)for(var G=0;G<F;G++)K[2*G]=Math.round(255*(N[G]==null?N:N[G])/_),K[2*G+1]=Math.round(255*(B[G]==null?B:B[G])/_);j({data:K,usage:"dynamic"})}if(z){var V,W=I,J=W.count,X=W.color,ee=W.borderColor,re=W.colorBuffer;if(g.tooManyColors){if(X.length||ee.length){V=new Uint8Array(8*J);for(var ie=0;ie<J;ie++){var se=X[ie];V[8*ie]=L[4*se],V[8*ie+1]=L[4*se+1],V[8*ie+2]=L[4*se+2],V[8*ie+3]=L[4*se+3];var fe=ee[ie];V[8*ie+4]=L[4*fe],V[8*ie+5]=L[4*fe+1],V[8*ie+6]=L[4*fe+2],V[8*ie+7]=L[4*fe+3]}}}else if(X.length||ee.length){V=new Uint8Array(4*J+2);for(var ye=0;ye<J;ye++)X[ye]!=null&&(V[4*ye]=X[ye]%E,V[4*ye+1]=Math.floor(X[ye]/E)),ee[ye]!=null&&(V[4*ye+2]=ee[ye]%E,V[4*ye+3]=Math.floor(ee[ye]/E))}re({data:V||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return I})}},b.prototype.addMarker=function(g){var y,p=this.markerTextures,m=this.regl,w=this.markerCache,u=g==null?0:w.indexOf(g);if(u>=0)return u;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)y=g;else{y=new Uint8Array(g.length);for(var S=0,_=g.length;S<_;S++)y[S]=255*g[S]}var E=Math.floor(Math.sqrt(y.length));return u=p.length,w.push(g),p.push(m.texture({channels:1,data:y,radius:E,mag:"linear",min:"linear"})),u},b.prototype.updateColor=function(g){var y=this.paletteIds,p=this.palette,m=this.maxColors;Array.isArray(g)||(g=[g]);var w=[];if(typeof g[0]=="number"){var u=[];if(Array.isArray(g))for(var S=0;S<g.length;S+=4)u.push(g.slice(S,S+4));else for(var _=0;_<g.length;_+=4)u.push(g.subarray(_,_+4));g=u}for(var E=0;E<g.length;E++){var L=g[E];L=T(L,"uint8");var C=d(L,!1);if(y[C]==null){var P=p.length;y[C]=Math.floor(P/4),p[P]=L[0],p[P+1]=L[1],p[P+2]=L[2],p[P+3]=L[3]}w[E]=y[C]}return!this.tooManyColors&&p.length>4*m&&(this.tooManyColors=!0),this.updatePalette(p),w.length===1?w[0]:w},b.prototype.updatePalette=function(g){if(!this.tooManyColors){var y=this.maxColors,p=this.paletteTexture,m=Math.ceil(.25*g.length/y);if(m>1)for(var w=.25*(g=g.slice()).length%y;w<m*y;w++)g.push(0,0,0,0);p.height<m&&p.resize(y,m),p.subimage({width:Math.min(.25*g.length,y),height:m,data:g},0,0)}},b.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(y){return y&&y.destroy&&y.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var v=e(56131);$.exports=function(g,y){var p=new f(g,y),m=p.render.bind(p);return v(m,{render:m,update:p.update.bind(p),draw:p.draw.bind(p),destroy:p.destroy.bind(p),regl:p.regl,gl:p.gl,canvas:p.gl.canvas,groups:p.groups,markers:p.markerCache,palette:p.palette}),m}},60487:function($,R,e){var A=e(11870),k=e(71299),l=e(21527),T=e(5877),x=e(57471),d=e(18863),s=e(30120);function t(a,i){if(!(this instanceof t))return new t(a);this.traces=[],this.passes={},this.regl=a,this.scatter=A(a),this.canvas=this.scatter.canvas}function o(a,i,c){return(a.id!=null?a.id:a)<<16|(255&i)<<8|255&c}function r(a,i,c){var h,f,b,v,g=a[i],y=a[c];return g.length>2?(g[0],g[2],h=g[1],f=g[3]):g.length?(h=g[0],f=g[1]):(g.x,h=g.y,g.x,g.width,f=g.y+g.height),y.length>2?(b=y[0],v=y[2],y[1],y[3]):y.length?(b=y[0],v=y[1]):(b=y.x,y.y,v=y.x+y.width,y.y,y.height),[b,h,v,f]}function n(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var i=d(a);return[i.x,i.y,i.x+i.width,i.y+i.height]}$.exports=t,t.prototype.render=function(){for(var a,i=this,c=[],h=arguments.length;h--;)c[h]=arguments[h];return c.length&&(a=this).update.apply(a,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,T(function(){i.dirty=!1})),this)},t.prototype.update=function(){for(var a,i=[],c=arguments.length;c--;)i[c]=arguments[c];if(i.length){for(var h=0;h<i.length;h++)this.updateItem(h,i[h]);this.traces=this.traces.filter(Boolean);for(var f=[],b=0,v=0;v<this.traces.length;v++){for(var g=this.traces[v],y=this.traces[v].passes,p=0;p<y.length;p++)f.push(this.passes[y[p]]);g.passOffset=b,b+=g.passes.length}return(a=this.scatter).update.apply(a,f),this}},t.prototype.updateItem=function(a,i){var c=this.regl;if(i===null)return this.traces[a]=null,this;if(!i)return this;var h,f=k(i,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),b=this.traces[a]||(this.traces[a]={id:a,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:d([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(f.color!=null&&(b.color=f.color),f.size!=null&&(b.size=f.size),f.marker!=null&&(b.marker=f.marker),f.borderColor!=null&&(b.borderColor=f.borderColor),f.borderSize!=null&&(b.borderSize=f.borderSize),f.opacity!=null&&(b.opacity=f.opacity),f.viewport&&(b.viewport=d(f.viewport)),f.diagonal!=null&&(b.diagonal=f.diagonal),f.upper!=null&&(b.upper=f.upper),f.lower!=null&&(b.lower=f.lower),f.data){b.buffer(s(f.data)),b.columns=f.data.length,b.count=f.data[0].length,b.bounds=[];for(var v=0;v<b.columns;v++)b.bounds[v]=l(f.data[v],1)}f.range&&(b.range=f.range,h=b.range&&typeof b.range[0]!="number"),f.domain&&(b.domain=f.domain);var g=!1;f.padding!=null&&(Array.isArray(f.padding)&&f.padding.length===b.columns&&typeof f.padding[f.padding.length-1]=="number"?(b.padding=f.padding.map(n),g=!0):b.padding=n(f.padding));var y=b.columns,p=b.count,m=b.viewport.width,w=b.viewport.height,u=b.viewport.x,S=b.viewport.y,_=m/y,E=w/y;b.passes=[];for(var L=0;L<y;L++)for(var C=0;C<y;C++)if((b.diagonal||C!==L)&&(b.upper||!(L>C))&&(b.lower||!(L<C))){var P=o(b.id,L,C),I=this.passes[P]||(this.passes[P]={});if(f.data&&(f.transpose?I.positions={x:{buffer:b.buffer,offset:C,count:p,stride:y},y:{buffer:b.buffer,offset:L,count:p,stride:y}}:I.positions={x:{buffer:b.buffer,offset:C*p,count:p},y:{buffer:b.buffer,offset:L*p,count:p}},I.bounds=r(b.bounds,L,C)),f.domain||f.viewport||f.data){var U=g?r(b.padding,L,C):b.padding;if(b.domain){var z=r(b.domain,L,C),H=z[0],F=z[1],N=z[2],B=z[3];I.viewport=[u+H*m+U[0],S+F*w+U[1],u+N*m-U[2],S+B*w-U[3]]}else I.viewport=[u+C*_+_*U[0],S+L*E+E*U[1],u+(C+1)*_-_*U[2],S+(L+1)*E-E*U[3]]}f.color&&(I.color=b.color),f.size&&(I.size=b.size),f.marker&&(I.marker=b.marker),f.borderSize&&(I.borderSize=b.borderSize),f.borderColor&&(I.borderColor=b.borderColor),f.opacity&&(I.opacity=b.opacity),f.range&&(I.range=h?r(b.range,L,C):b.range||I.bounds),b.passes.push(P)}return this},t.prototype.draw=function(){for(var a,i=[],c=arguments.length;c--;)i[c]=arguments[c];if(i.length){for(var h=[],f=0;f<i.length;f++)if(typeof i[f]=="number"){var b=this.traces[i[f]],v=b.passes,g=b.passOffset;h.push.apply(h,x(g,g+v.length))}else if(i[f].length){var y=i[f],p=this.traces[f],m=p.passes,w=p.passOffset;m=m.map(function(u,S){h[w+S]=y})}(a=this.scatter).draw.apply(a,h)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function($){$.exports=function(){function R(Be,ke){this.id=ee++,this.type=Be,this.data=ke}function e(Be){if(Be.length===0)return[];var ke=Be.charAt(0),Pe=Be.charAt(Be.length-1);if(1<Be.length&&ke===Pe&&(ke==='"'||ke==="'"))return['"'+Be.substr(1,Be.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ke=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Be))return e(Be.substr(0,ke.index)).concat(e(ke[1])).concat(e(Be.substr(ke.index+ke[0].length)));if((ke=Be.split(".")).length===1)return['"'+Be.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Be=[],Pe=0;Pe<ke.length;++Pe)Be=Be.concat(e(ke[Pe]));return Be}function A(Be){return"["+e(Be).join("][")+"]"}function k(Be){return typeof Be=="string"?Be.split():Be}function l(Be){return typeof Be=="string"?document.querySelector(Be):Be}function T(Be){var ke,Pe,qe,Xe,nt=Be||{};Be={};var ut=[],ct=[],Ct=typeof window>"u"?1:window.devicePixelRatio,Lt=!1,Mt={},mt=function(wt){},kt=function(){};if(typeof nt=="string"?ke=document.querySelector(nt):typeof nt=="object"&&(typeof nt.nodeName=="string"&&typeof nt.appendChild=="function"&&typeof nt.getBoundingClientRect=="function"?ke=nt:typeof nt.drawArrays=="function"||typeof nt.drawElements=="function"?qe=(Xe=nt).canvas:("gl"in nt?Xe=nt.gl:"canvas"in nt?qe=l(nt.canvas):"container"in nt&&(Pe=l(nt.container)),"attributes"in nt&&(Be=nt.attributes),"extensions"in nt&&(ut=k(nt.extensions)),"optionalExtensions"in nt&&(ct=k(nt.optionalExtensions)),"onDone"in nt&&(mt=nt.onDone),"profile"in nt&&(Lt=!!nt.profile),"pixelRatio"in nt&&(Ct=+nt.pixelRatio),"cachedCode"in nt&&(Mt=nt.cachedCode))),ke&&(ke.nodeName.toLowerCase()==="canvas"?qe=ke:Pe=ke),!Xe){if(!qe){if(!(ke=function(wt,Ot,It){function Nt(){var Xt=window.innerWidth,cn=window.innerHeight;wt!==document.body&&(Xt=(cn=qt.getBoundingClientRect()).right-cn.left,cn=cn.bottom-cn.top),qt.width=It*Xt,qt.height=It*cn}var Dt,qt=document.createElement("canvas");return X(qt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),wt.appendChild(qt),wt===document.body&&(qt.style.position="absolute",X(wt.style,{margin:0,padding:0})),wt!==document.body&&typeof ResizeObserver=="function"?(Dt=new ResizeObserver(function(){setTimeout(Nt)})).observe(wt):window.addEventListener("resize",Nt,!1),Nt(),{canvas:qt,onDestroy:function(){Dt?Dt.disconnect():window.removeEventListener("resize",Nt),wt.removeChild(qt)}}}(Pe||document.body,0,Ct)))return null;qe=ke.canvas,kt=ke.onDestroy}Be.premultipliedAlpha===void 0&&(Be.premultipliedAlpha=!0),Xe=function(wt,Ot){function It(Nt){try{return wt.getContext(Nt,Ot)}catch{return null}}return It("webgl")||It("experimental-webgl")||It("webgl-experimental")}(qe,Be)}return Xe?{gl:Xe,canvas:qe,container:Pe,extensions:ut,optionalExtensions:ct,pixelRatio:Ct,profile:Lt,cachedCode:Mt,onDone:mt,onDestroy:kt}:(kt(),mt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function x(Be,ke){for(var Pe=Array(Be),qe=0;qe<Be;++qe)Pe[qe]=ke(qe);return Pe}function d(Be){var ke,Pe;return ke=(65535<Be)<<4,ke|=Pe=(255<(Be>>>=ke))<<3,(ke|=Pe=(15<(Be>>>=Pe))<<2)|(Pe=(3<(Be>>>=Pe))<<1)|Be>>>Pe>>1}function s(){function Be(qe){e:{for(var Xe=16;268435456>=Xe;Xe*=16)if(qe<=Xe){qe=Xe;break e}qe=0}return 0<(Xe=Pe[d(qe)>>2]).length?Xe.pop():new ArrayBuffer(qe)}function ke(qe){Pe[d(qe.byteLength)>>2].push(qe)}var Pe=x(8,function(){return[]});return{alloc:Be,free:ke,allocType:function(qe,Xe){var nt=null;switch(qe){case 5120:nt=new Int8Array(Be(Xe),0,Xe);break;case 5121:nt=new Uint8Array(Be(Xe),0,Xe);break;case 5122:nt=new Int16Array(Be(2*Xe),0,Xe);break;case 5123:nt=new Uint16Array(Be(2*Xe),0,Xe);break;case 5124:nt=new Int32Array(Be(4*Xe),0,Xe);break;case 5125:nt=new Uint32Array(Be(4*Xe),0,Xe);break;case 5126:nt=new Float32Array(Be(4*Xe),0,Xe);break;default:return null}return nt.length!==Xe?nt.subarray(0,Xe):nt},freeType:function(qe){ke(qe.buffer)}}}function t(Be){return!!Be&&typeof Be=="object"&&Array.isArray(Be.shape)&&Array.isArray(Be.stride)&&typeof Be.offset=="number"&&Be.shape.length===Be.stride.length&&(Array.isArray(Be.data)||ge(Be.data))}function o(Be,ke,Pe,qe,Xe,nt){for(var ut=0;ut<ke;++ut)for(var ct=Be[ut],Ct=0;Ct<Pe;++Ct)for(var Lt=ct[Ct],Mt=0;Mt<qe;++Mt)Xe[nt++]=Lt[Mt]}function r(Be,ke,Pe,qe,Xe){for(var nt=1,ut=Pe+1;ut<ke.length;++ut)nt*=ke[ut];var ct=ke[Pe];if(ke.length-Pe==4){var Ct=ke[Pe+1],Lt=ke[Pe+2];for(ke=ke[Pe+3],ut=0;ut<ct;++ut)o(Be[ut],Ct,Lt,ke,qe,Xe),Xe+=nt}else for(ut=0;ut<ct;++ut)r(Be[ut],ke,Pe+1,qe,Xe),Xe+=nt}function n(Be){return 0|Ie[Object.prototype.toString.call(Be)]}function a(Be,ke){for(var Pe=0;Pe<ke.length;++Pe)Be[Pe]=ke[Pe]}function i(Be,ke,Pe,qe,Xe,nt,ut){for(var ct=0,Ct=0;Ct<Pe;++Ct)for(var Lt=0;Lt<qe;++Lt)Be[ct++]=ke[Xe*Ct+nt*Lt+ut]}function c(Be,ke,Pe,qe){function Xe(mt){this.id=Ct++,this.buffer=Be.createBuffer(),this.type=mt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Pe.profile&&(this.stats={size:0})}function nt(mt,kt,wt){mt.byteLength=kt.byteLength,Be.bufferData(mt.type,kt,wt)}function ut(mt,kt,wt,Ot,It,Nt){if(mt.usage=wt,Array.isArray(kt)){if(mt.dtype=Ot||5126,0<kt.length)if(Array.isArray(kt[0])){It=Te(kt);for(var Dt=Ot=1;Dt<It.length;++Dt)Ot*=It[Dt];mt.dimension=Ot,nt(mt,kt=Se(kt,It,mt.dtype),wt),Nt?mt.persistentData=kt:fe.freeType(kt)}else typeof kt[0]=="number"?(mt.dimension=It,a(It=fe.allocType(mt.dtype,kt.length),kt),nt(mt,It,wt),Nt?mt.persistentData=It:fe.freeType(It)):ge(kt[0])&&(mt.dimension=kt[0].length,mt.dtype=Ot||n(kt[0])||5126,nt(mt,kt=Se(kt,[kt.length,kt[0].length],mt.dtype),wt),Nt?mt.persistentData=kt:fe.freeType(kt))}else if(ge(kt))mt.dtype=Ot||n(kt),mt.dimension=It,nt(mt,kt,wt),Nt&&(mt.persistentData=new Uint8Array(new Uint8Array(kt.buffer)));else if(t(kt)){It=kt.shape;var qt=kt.stride,Xt=(Dt=kt.offset,0),cn=0,yn=0,Kt=0;It.length===1?(Xt=It[0],cn=1,yn=qt[0],Kt=0):It.length===2&&(Xt=It[0],cn=It[1],yn=qt[0],Kt=qt[1]),mt.dtype=Ot||n(kt.data)||5126,mt.dimension=cn,i(It=fe.allocType(mt.dtype,Xt*cn),kt.data,Xt,cn,yn,Kt,Dt),nt(mt,It,wt),Nt?mt.persistentData=It:fe.freeType(It)}else kt instanceof ArrayBuffer&&(mt.dtype=5121,mt.dimension=It,nt(mt,kt,wt),Nt&&(mt.persistentData=new Uint8Array(new Uint8Array(kt))))}function ct(mt){ke.bufferCount--,qe(mt),Be.deleteBuffer(mt.buffer),mt.buffer=null,delete Lt[mt.id]}var Ct=0,Lt={};Xe.prototype.bind=function(){Be.bindBuffer(this.type,this.buffer)},Xe.prototype.destroy=function(){ct(this)};var Mt=[];return Pe.profile&&(ke.getTotalBufferSize=function(){var mt=0;return Object.keys(Lt).forEach(function(kt){mt+=Lt[kt].stats.size}),mt}),{create:function(mt,kt,wt,Ot){function It(Dt){var qt=35044,Xt=null,cn=0,yn=0,Kt=1;return Array.isArray(Dt)||ge(Dt)||t(Dt)||Dt instanceof ArrayBuffer?Xt=Dt:typeof Dt=="number"?cn=0|Dt:Dt&&("data"in Dt&&(Xt=Dt.data),"usage"in Dt&&(qt=Ae[Dt.usage]),"type"in Dt&&(yn=xe[Dt.type]),"dimension"in Dt&&(Kt=0|Dt.dimension),"length"in Dt&&(cn=0|Dt.length)),Nt.bind(),Xt?ut(Nt,Xt,qt,yn,Kt,Ot):(cn&&Be.bufferData(Nt.type,cn,qt),Nt.dtype=yn||5121,Nt.usage=qt,Nt.dimension=Kt,Nt.byteLength=cn),Pe.profile&&(Nt.stats.size=Nt.byteLength*Q[Nt.dtype]),It}ke.bufferCount++;var Nt=new Xe(kt);return Lt[Nt.id]=Nt,wt||It(mt),It._reglType="buffer",It._buffer=Nt,It.subdata=function(Dt,qt){var Xt,cn=0|(qt||0);if(Nt.bind(),ge(Dt)||Dt instanceof ArrayBuffer)Be.bufferSubData(Nt.type,cn,Dt);else if(Array.isArray(Dt)){if(0<Dt.length)if(typeof Dt[0]=="number"){var yn=fe.allocType(Nt.dtype,Dt.length);a(yn,Dt),Be.bufferSubData(Nt.type,cn,yn),fe.freeType(yn)}else(Array.isArray(Dt[0])||ge(Dt[0]))&&(Xt=Te(Dt),yn=Se(Dt,Xt,Nt.dtype),Be.bufferSubData(Nt.type,cn,yn),fe.freeType(yn))}else if(t(Dt)){Xt=Dt.shape;var Kt=Dt.stride,Mn=yn=0,Un=0,xn=0;Xt.length===1?(yn=Xt[0],Mn=1,Un=Kt[0],xn=0):Xt.length===2&&(yn=Xt[0],Mn=Xt[1],Un=Kt[0],xn=Kt[1]),Xt=Array.isArray(Dt.data)?Nt.dtype:n(Dt.data),i(Xt=fe.allocType(Xt,yn*Mn),Dt.data,yn,Mn,Un,xn,Dt.offset),Be.bufferSubData(Nt.type,cn,Xt),fe.freeType(Xt)}return It},Pe.profile&&(It.stats=Nt.stats),It.destroy=function(){ct(Nt)},It},createStream:function(mt,kt){var wt=Mt.pop();return wt||(wt=new Xe(mt)),wt.bind(),ut(wt,kt,35040,0,1,!1),wt},destroyStream:function(mt){Mt.push(mt)},clear:function(){he(Lt).forEach(ct),Mt.forEach(ct)},getBuffer:function(mt){return mt&&mt._buffer instanceof Xe?mt._buffer:null},restore:function(){he(Lt).forEach(function(mt){mt.buffer=Be.createBuffer(),Be.bindBuffer(mt.type,mt.buffer),Be.bufferData(mt.type,mt.persistentData||mt.byteLength,mt.usage)})},_initBuffer:ut}}function h(Be,ke,Pe,qe){function Xe(mt){this.id=Ct++,ct[this.id]=this,this.buffer=mt,this.primType=4,this.type=this.vertCount=0}function nt(mt,kt,wt,Ot,It,Nt,Dt){var qt;if(mt.buffer.bind(),kt?((qt=Dt)||ge(kt)&&(!t(kt)||ge(kt.data))||(qt=ke.oes_element_index_uint?5125:5123),Pe._initBuffer(mt.buffer,kt,wt,qt,3)):(Be.bufferData(34963,Nt,wt),mt.buffer.dtype=qt||5121,mt.buffer.usage=wt,mt.buffer.dimension=3,mt.buffer.byteLength=Nt),qt=Dt,!Dt){switch(mt.buffer.dtype){case 5121:case 5120:qt=5121;break;case 5123:case 5122:qt=5123;break;case 5125:case 5124:qt=5125}mt.buffer.dtype=qt}mt.type=qt,0>(kt=It)&&(kt=mt.buffer.byteLength,qt===5123?kt>>=1:qt===5125&&(kt>>=2)),mt.vertCount=kt,kt=Ot,0>Ot&&(kt=4,(Ot=mt.buffer.dimension)===1&&(kt=0),Ot===2&&(kt=1),Ot===3&&(kt=4)),mt.primType=kt}function ut(mt){qe.elementsCount--,delete ct[mt.id],mt.buffer.destroy(),mt.buffer=null}var ct={},Ct=0,Lt={uint8:5121,uint16:5123};ke.oes_element_index_uint&&(Lt.uint32=5125),Xe.prototype.bind=function(){this.buffer.bind()};var Mt=[];return{create:function(mt,kt){function wt(Nt){if(Nt)if(typeof Nt=="number")Ot(Nt),It.primType=4,It.vertCount=0|Nt,It.type=5121;else{var Dt=null,qt=35044,Xt=-1,cn=-1,yn=0,Kt=0;Array.isArray(Nt)||ge(Nt)||t(Nt)?Dt=Nt:("data"in Nt&&(Dt=Nt.data),"usage"in Nt&&(qt=Ae[Nt.usage]),"primitive"in Nt&&(Xt=oe[Nt.primitive]),"count"in Nt&&(cn=0|Nt.count),"type"in Nt&&(Kt=Lt[Nt.type]),"length"in Nt?yn=0|Nt.length:(yn=cn,Kt===5123||Kt===5122?yn*=2:Kt!==5125&&Kt!==5124||(yn*=4))),nt(It,Dt,qt,Xt,cn,yn,Kt)}else Ot(),It.primType=4,It.vertCount=0,It.type=5121;return wt}var Ot=Pe.create(null,34963,!0),It=new Xe(Ot._buffer);return qe.elementsCount++,wt(mt),wt._reglType="elements",wt._elements=It,wt.subdata=function(Nt,Dt){return Ot.subdata(Nt,Dt),wt},wt.destroy=function(){ut(It)},wt},createStream:function(mt){var kt=Mt.pop();return kt||(kt=new Xe(Pe.create(null,34963,!0,!1)._buffer)),nt(kt,mt,35040,-1,-1,0,0),kt},destroyStream:function(mt){Mt.push(mt)},getElements:function(mt){return typeof mt=="function"&&mt._elements instanceof Xe?mt._elements:null},clear:function(){he(ct).forEach(ut)}}}function f(Be){for(var ke=fe.allocType(5123,Be.length),Pe=0;Pe<Be.length;++Pe)if(isNaN(Be[Pe]))ke[Pe]=65535;else if(Be[Pe]===1/0)ke[Pe]=31744;else if(Be[Pe]===-1/0)ke[Pe]=64512;else{ce[0]=Be[Pe];var qe=(nt=me[0])>>>31<<15,Xe=(nt<<1>>>24)-127,nt=nt>>13&1023;ke[Pe]=-24>Xe?qe:-14>Xe?qe+(nt+1024>>-14-Xe):15<Xe?qe+31744:qe+(Xe+15<<10)+nt}return ke}function b(Be){return Array.isArray(Be)||ge(Be)}function v(Be){return"[object "+Be+"]"}function g(Be){return Array.isArray(Be)&&(Be.length===0||typeof Be[0]=="number")}function y(Be){return!(!Array.isArray(Be)||Be.length===0||!b(Be[0]))}function p(Be){return Object.prototype.toString.call(Be)}function m(Be){if(!Be)return!1;var ke=p(Be);return 0<=He.indexOf(ke)||g(Be)||y(Be)||t(Be)}function w(Be,ke){Be.type===36193?(Be.data=f(ke),fe.freeType(ke)):Be.data=ke}function u(Be,ke,Pe,qe,Xe,nt){if(Be=tt[Be]!==void 0?tt[Be]:Ce[Be]*rt[ke],nt&&(Be*=6),Xe){for(qe=0;1<=Pe;)qe+=Be*Pe*Pe,Pe/=2;return qe}return Be*Pe*qe}function S(Be,ke,Pe,qe,Xe,nt,ut){function ct(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Ct($t,An){$t.internalformat=An.internalformat,$t.format=An.format,$t.type=An.type,$t.compressed=An.compressed,$t.premultiplyAlpha=An.premultiplyAlpha,$t.flipY=An.flipY,$t.unpackAlignment=An.unpackAlignment,$t.colorSpace=An.colorSpace,$t.width=An.width,$t.height=An.height,$t.channels=An.channels}function Lt($t,An){if(typeof An=="object"&&An){"premultiplyAlpha"in An&&($t.premultiplyAlpha=An.premultiplyAlpha),"flipY"in An&&($t.flipY=An.flipY),"alignment"in An&&($t.unpackAlignment=An.alignment),"colorSpace"in An&&($t.colorSpace=Zn[An.colorSpace]),"type"in An&&($t.type=Fn[An.type]);var Rt=$t.width,Yt=$t.height,rn=$t.channels,bn=!1;"shape"in An?(Rt=An.shape[0],Yt=An.shape[1],An.shape.length===3&&(rn=An.shape[2],bn=!0)):("radius"in An&&(Rt=Yt=An.radius),"width"in An&&(Rt=An.width),"height"in An&&(Yt=An.height),"channels"in An&&(rn=An.channels,bn=!0)),$t.width=0|Rt,$t.height=0|Yt,$t.channels=0|rn,Rt=!1,"format"in An&&(Rt=An.format,Yt=$t.internalformat=nr[Rt],$t.format=In[Yt],Rt in Fn&&!("type"in An)&&($t.type=Fn[Rt]),Rt in $n&&($t.compressed=!0),Rt=!0),!bn&&Rt?$t.channels=Ce[$t.format]:bn&&!Rt&&$t.channels!==Re[$t.format]&&($t.format=$t.internalformat=Re[$t.channels])}}function Mt($t){Be.pixelStorei(37440,$t.flipY),Be.pixelStorei(37441,$t.premultiplyAlpha),Be.pixelStorei(37443,$t.colorSpace),Be.pixelStorei(3317,$t.unpackAlignment)}function mt(){ct.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function kt($t,An){var Rt=null;if(m(An)?Rt=An:An&&(Lt($t,An),"x"in An&&($t.xOffset=0|An.x),"y"in An&&($t.yOffset=0|An.y),m(An.data)&&(Rt=An.data)),An.copy){var Yt=Xe.viewportWidth,rn=Xe.viewportHeight;$t.width=$t.width||Yt-$t.xOffset,$t.height=$t.height||rn-$t.yOffset,$t.needsCopy=!0}else if(Rt){if(ge(Rt))$t.channels=$t.channels||4,$t.data=Rt,"type"in An||$t.type!==5121||($t.type=0|Ie[Object.prototype.toString.call(Rt)]);else if(g(Rt)){switch($t.channels=$t.channels||4,rn=(Yt=Rt).length,$t.type){case 5121:case 5123:case 5125:case 5126:(rn=fe.allocType($t.type,rn)).set(Yt),$t.data=rn;break;case 36193:$t.data=f(Yt)}$t.alignment=1,$t.needsFree=!0}else if(t(Rt)){Yt=Rt.data,Array.isArray(Yt)||$t.type!==5121||($t.type=0|Ie[Object.prototype.toString.call(Yt)]),rn=Rt.shape;var bn,ln,kn,Tn,hn=Rt.stride;rn.length===3?(kn=rn[2],Tn=hn[2]):Tn=kn=1,bn=rn[0],ln=rn[1],rn=hn[0],hn=hn[1],$t.alignment=1,$t.width=bn,$t.height=ln,$t.channels=kn,$t.format=$t.internalformat=Re[kn],$t.needsFree=!0,bn=Tn,Rt=Rt.offset,kn=$t.width,Tn=$t.height,ln=$t.channels;for(var nn=fe.allocType($t.type===36193?5126:$t.type,kn*Tn*ln),fn=0,mn=0;mn<Tn;++mn)for(var zn=0;zn<kn;++zn)for(var Gn=0;Gn<ln;++Gn)nn[fn++]=Yt[rn*zn+hn*mn+bn*Gn+Rt];w($t,nn)}else if(p(Rt)===ze||p(Rt)===le||p(Rt)===de)p(Rt)===ze||p(Rt)===le?$t.element=Rt:$t.element=Rt.canvas,$t.width=$t.element.width,$t.height=$t.element.height,$t.channels=4;else if(p(Rt)===be)$t.element=Rt,$t.width=Rt.width,$t.height=Rt.height,$t.channels=4;else if(p(Rt)===Fe)$t.element=Rt,$t.width=Rt.naturalWidth,$t.height=Rt.naturalHeight,$t.channels=4;else if(p(Rt)===Ve)$t.element=Rt,$t.width=Rt.videoWidth,$t.height=Rt.videoHeight,$t.channels=4;else if(y(Rt)){for(Yt=$t.width||Rt[0].length,rn=$t.height||Rt.length,hn=$t.channels,hn=b(Rt[0][0])?hn||Rt[0][0].length:hn||1,bn=ve.shape(Rt),kn=1,Tn=0;Tn<bn.length;++Tn)kn*=bn[Tn];kn=fe.allocType($t.type===36193?5126:$t.type,kn),ve.flatten(Rt,bn,"",kn),w($t,kn),$t.alignment=1,$t.width=Yt,$t.height=rn,$t.channels=hn,$t.format=$t.internalformat=Re[hn],$t.needsFree=!0}}else $t.width=$t.width||1,$t.height=$t.height||1,$t.channels=$t.channels||4}function wt($t,An,Rt,Yt,rn){var bn=$t.element,ln=$t.data,kn=$t.internalformat,Tn=$t.format,hn=$t.type,nn=$t.width,fn=$t.height;Mt($t),bn?Be.texSubImage2D(An,rn,Rt,Yt,Tn,hn,bn):$t.compressed?Be.compressedTexSubImage2D(An,rn,Rt,Yt,kn,nn,fn,ln):$t.needsCopy?(qe(),Be.copyTexSubImage2D(An,rn,Rt,Yt,$t.xOffset,$t.yOffset,nn,fn)):Be.texSubImage2D(An,rn,Rt,Yt,nn,fn,Tn,hn,ln)}function Ot(){return _n.pop()||new mt}function It($t){$t.needsFree&&fe.freeType($t.data),mt.call($t),_n.push($t)}function Nt(){ct.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Dt($t,An,Rt){var Yt=$t.images[0]=Ot();$t.mipmask=1,Yt.width=$t.width=An,Yt.height=$t.height=Rt,Yt.channels=$t.channels=4}function qt($t,An){var Rt=null;if(m(An))Ct(Rt=$t.images[0]=Ot(),$t),kt(Rt,An),$t.mipmask=1;else if(Lt($t,An),Array.isArray(An.mipmap))for(var Yt=An.mipmap,rn=0;rn<Yt.length;++rn)Ct(Rt=$t.images[rn]=Ot(),$t),Rt.width>>=rn,Rt.height>>=rn,kt(Rt,Yt[rn]),$t.mipmask|=1<<rn;else Ct(Rt=$t.images[0]=Ot(),$t),kt(Rt,An),$t.mipmask=1;Ct($t,$t.images[0])}function Xt($t,An){for(var Rt=$t.images,Yt=0;Yt<Rt.length&&Rt[Yt];++Yt){var rn=Rt[Yt],bn=An,ln=Yt,kn=rn.element,Tn=rn.data,hn=rn.internalformat,nn=rn.format,fn=rn.type,mn=rn.width,zn=rn.height;Mt(rn),kn?Be.texImage2D(bn,ln,nn,nn,fn,kn):rn.compressed?Be.compressedTexImage2D(bn,ln,hn,mn,zn,0,Tn):rn.needsCopy?(qe(),Be.copyTexImage2D(bn,ln,nn,rn.xOffset,rn.yOffset,mn,zn,0)):Be.texImage2D(bn,ln,nn,mn,zn,0,nn,fn,Tn||null)}}function cn(){var $t=Sn.pop()||new Nt;ct.call($t);for(var An=$t.mipmask=0;16>An;++An)$t.images[An]=null;return $t}function yn($t){for(var An=$t.images,Rt=0;Rt<An.length;++Rt)An[Rt]&&It(An[Rt]),An[Rt]=null;Sn.push($t)}function Kt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Mn($t,An){"min"in An&&($t.minFilter=Dn[An.min],0<=Me.indexOf($t.minFilter)&&!("faces"in An)&&($t.genMipmaps=!0)),"mag"in An&&($t.magFilter=En[An.mag]);var Rt=$t.wrapS,Yt=$t.wrapT;if("wrap"in An){var rn=An.wrap;typeof rn=="string"?Rt=Yt=On[rn]:Array.isArray(rn)&&(Rt=On[rn[0]],Yt=On[rn[1]])}else"wrapS"in An&&(Rt=On[An.wrapS]),"wrapT"in An&&(Yt=On[An.wrapT]);if($t.wrapS=Rt,$t.wrapT=Yt,"anisotropic"in An&&($t.anisotropic=An.anisotropic),"mipmap"in An){switch(Rt=!1,typeof An.mipmap){case"string":$t.mipmapHint=sn[An.mipmap],Rt=$t.genMipmaps=!0;break;case"boolean":Rt=$t.genMipmaps=An.mipmap;break;case"object":$t.genMipmaps=!1,Rt=!0}!Rt||"min"in An||($t.minFilter=9984)}}function Un($t,An){Be.texParameteri(An,10241,$t.minFilter),Be.texParameteri(An,10240,$t.magFilter),Be.texParameteri(An,10242,$t.wrapS),Be.texParameteri(An,10243,$t.wrapT),ke.ext_texture_filter_anisotropic&&Be.texParameteri(An,34046,$t.anisotropic),$t.genMipmaps&&(Be.hint(33170,$t.mipmapHint),Be.generateMipmap(An))}function xn($t){ct.call(this),this.mipmask=0,this.internalformat=6408,this.id=jn++,this.refCount=1,this.target=$t,this.texture=Be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Kt,ut.profile&&(this.stats={size:0})}function dn($t){Be.activeTexture(33984),Be.bindTexture($t.target,$t.texture)}function gn(){var $t=cr[0];$t?Be.bindTexture($t.target,$t.texture):Be.bindTexture(3553,null)}function an($t){var An=$t.texture,Rt=$t.unit,Yt=$t.target;0<=Rt&&(Be.activeTexture(33984+Rt),Be.bindTexture(Yt,null),cr[Rt]=null),Be.deleteTexture(An),$t.texture=null,$t.params=null,$t.pixels=null,$t.refCount=0,delete qn[$t.id],nt.textureCount--}var sn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},On={repeat:10497,clamp:33071,mirror:33648},En={nearest:9728,linear:9729},Dn=X({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},En),Zn={none:0,browser:37444},Fn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},nr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},$n={};ke.ext_srgb&&(nr.srgb=35904,nr.srgba=35906),ke.oes_texture_float&&(Fn.float32=Fn.float=5126),ke.oes_texture_half_float&&(Fn.float16=Fn["half float"]=36193),ke.webgl_depth_texture&&(X(nr,{depth:6402,"depth stencil":34041}),X(Fn,{uint16:5123,uint32:5125,"depth stencil":34042})),ke.webgl_compressed_texture_s3tc&&X($n,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),ke.webgl_compressed_texture_atc&&X($n,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),ke.webgl_compressed_texture_pvrtc&&X($n,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),ke.webgl_compressed_texture_etc1&&($n["rgb etc1"]=36196);var mr=Array.prototype.slice.call(Be.getParameter(34467));Object.keys($n).forEach(function($t){var An=$n[$t];0<=mr.indexOf(An)&&(nr[$t]=An)});var dr=Object.keys(nr);Pe.textureFormats=dr;var Yn=[];Object.keys(nr).forEach(function($t){Yn[nr[$t]]=$t});var Vn=[];Object.keys(Fn).forEach(function($t){Vn[Fn[$t]]=$t});var ur=[];Object.keys(En).forEach(function($t){ur[En[$t]]=$t});var Gt=[];Object.keys(Dn).forEach(function($t){Gt[Dn[$t]]=$t});var tn=[];Object.keys(On).forEach(function($t){tn[On[$t]]=$t});var In=dr.reduce(function($t,An){var Rt=nr[An];return Rt===6409||Rt===6406||Rt===6409||Rt===6410||Rt===6402||Rt===34041||ke.ext_srgb&&(Rt===35904||Rt===35906)?$t[Rt]=Rt:Rt===32855||0<=An.indexOf("rgba")?$t[Rt]=6408:$t[Rt]=6407,$t},{}),_n=[],Sn=[],jn=0,qn={},ar=Pe.maxTextureUnits,cr=Array(ar).map(function(){return null});return X(xn.prototype,{bind:function(){this.bindCount+=1;var $t=this.unit;if(0>$t){for(var An=0;An<ar;++An){var Rt=cr[An];if(Rt){if(0<Rt.bindCount)continue;Rt.unit=-1}cr[An]=this,$t=An;break}ut.profile&&nt.maxTextureUnits<$t+1&&(nt.maxTextureUnits=$t+1),this.unit=$t,Be.activeTexture(33984+$t),Be.bindTexture(this.target,this.texture)}return $t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&an(this)}}),ut.profile&&(nt.getTotalTextureSize=function(){var $t=0;return Object.keys(qn).forEach(function(An){$t+=qn[An].stats.size}),$t}),{create2D:function($t,An){function Rt(rn,bn){var ln=Yt.texInfo;Kt.call(ln);var kn=cn();return typeof rn=="number"?Dt(kn,0|rn,typeof bn=="number"?0|bn:0|rn):rn?(Mn(ln,rn),qt(kn,rn)):Dt(kn,1,1),ln.genMipmaps&&(kn.mipmask=(kn.width<<1)-1),Yt.mipmask=kn.mipmask,Ct(Yt,kn),Yt.internalformat=kn.internalformat,Rt.width=kn.width,Rt.height=kn.height,dn(Yt),Xt(kn,3553),Un(ln,3553),gn(),yn(kn),ut.profile&&(Yt.stats.size=u(Yt.internalformat,Yt.type,kn.width,kn.height,ln.genMipmaps,!1)),Rt.format=Yn[Yt.internalformat],Rt.type=Vn[Yt.type],Rt.mag=ur[ln.magFilter],Rt.min=Gt[ln.minFilter],Rt.wrapS=tn[ln.wrapS],Rt.wrapT=tn[ln.wrapT],Rt}var Yt=new xn(3553);return qn[Yt.id]=Yt,nt.textureCount++,Rt($t,An),Rt.subimage=function(rn,bn,ln,kn){bn|=0,ln|=0,kn|=0;var Tn=Ot();return Ct(Tn,Yt),Tn.width=0,Tn.height=0,kt(Tn,rn),Tn.width=Tn.width||(Yt.width>>kn)-bn,Tn.height=Tn.height||(Yt.height>>kn)-ln,dn(Yt),wt(Tn,3553,bn,ln,kn),gn(),It(Tn),Rt},Rt.resize=function(rn,bn){var ln=0|rn,kn=0|bn||ln;if(ln===Yt.width&&kn===Yt.height)return Rt;Rt.width=Yt.width=ln,Rt.height=Yt.height=kn,dn(Yt);for(var Tn=0;Yt.mipmask>>Tn;++Tn){var hn=ln>>Tn,nn=kn>>Tn;if(!hn||!nn)break;Be.texImage2D(3553,Tn,Yt.format,hn,nn,0,Yt.format,Yt.type,null)}return gn(),ut.profile&&(Yt.stats.size=u(Yt.internalformat,Yt.type,ln,kn,!1,!1)),Rt},Rt._reglType="texture2d",Rt._texture=Yt,ut.profile&&(Rt.stats=Yt.stats),Rt.destroy=function(){Yt.decRef()},Rt},createCube:function($t,An,Rt,Yt,rn,bn){function ln(hn,nn,fn,mn,zn,Gn){var Hn,Qn=kn.texInfo;for(Kt.call(Qn),Hn=0;6>Hn;++Hn)Tn[Hn]=cn();if(typeof hn!="number"&&hn){if(typeof hn=="object")if(nn)qt(Tn[0],hn),qt(Tn[1],nn),qt(Tn[2],fn),qt(Tn[3],mn),qt(Tn[4],zn),qt(Tn[5],Gn);else if(Mn(Qn,hn),Lt(kn,hn),"faces"in hn)for(hn=hn.faces,Hn=0;6>Hn;++Hn)Ct(Tn[Hn],kn),qt(Tn[Hn],hn[Hn]);else for(Hn=0;6>Hn;++Hn)qt(Tn[Hn],hn)}else for(hn=0|hn||1,Hn=0;6>Hn;++Hn)Dt(Tn[Hn],hn,hn);for(Ct(kn,Tn[0]),kn.mipmask=Qn.genMipmaps?(Tn[0].width<<1)-1:Tn[0].mipmask,kn.internalformat=Tn[0].internalformat,ln.width=Tn[0].width,ln.height=Tn[0].height,dn(kn),Hn=0;6>Hn;++Hn)Xt(Tn[Hn],34069+Hn);for(Un(Qn,34067),gn(),ut.profile&&(kn.stats.size=u(kn.internalformat,kn.type,ln.width,ln.height,Qn.genMipmaps,!0)),ln.format=Yn[kn.internalformat],ln.type=Vn[kn.type],ln.mag=ur[Qn.magFilter],ln.min=Gt[Qn.minFilter],ln.wrapS=tn[Qn.wrapS],ln.wrapT=tn[Qn.wrapT],Hn=0;6>Hn;++Hn)yn(Tn[Hn]);return ln}var kn=new xn(34067);qn[kn.id]=kn,nt.cubeCount++;var Tn=Array(6);return ln($t,An,Rt,Yt,rn,bn),ln.subimage=function(hn,nn,fn,mn,zn){fn|=0,mn|=0,zn|=0;var Gn=Ot();return Ct(Gn,kn),Gn.width=0,Gn.height=0,kt(Gn,nn),Gn.width=Gn.width||(kn.width>>zn)-fn,Gn.height=Gn.height||(kn.height>>zn)-mn,dn(kn),wt(Gn,34069+hn,fn,mn,zn),gn(),It(Gn),ln},ln.resize=function(hn){if((hn|=0)!==kn.width){ln.width=kn.width=hn,ln.height=kn.height=hn,dn(kn);for(var nn=0;6>nn;++nn)for(var fn=0;kn.mipmask>>fn;++fn)Be.texImage2D(34069+nn,fn,kn.format,hn>>fn,hn>>fn,0,kn.format,kn.type,null);return gn(),ut.profile&&(kn.stats.size=u(kn.internalformat,kn.type,ln.width,ln.height,!1,!0)),ln}},ln._reglType="textureCube",ln._texture=kn,ut.profile&&(ln.stats=kn.stats),ln.destroy=function(){kn.decRef()},ln},clear:function(){for(var $t=0;$t<ar;++$t)Be.activeTexture(33984+$t),Be.bindTexture(3553,null),cr[$t]=null;he(qn).forEach(an),nt.cubeCount=0,nt.textureCount=0},getTexture:function($t){return null},restore:function(){for(var $t=0;$t<ar;++$t){var An=cr[$t];An&&(An.bindCount=0,An.unit=-1,cr[$t]=null)}he(qn).forEach(function(Rt){Rt.texture=Be.createTexture(),Be.bindTexture(Rt.target,Rt.texture);for(var Yt=0;32>Yt;++Yt)if(Rt.mipmask&1<<Yt)if(Rt.target===3553)Be.texImage2D(3553,Yt,Rt.internalformat,Rt.width>>Yt,Rt.height>>Yt,0,Rt.internalformat,Rt.type,null);else for(var rn=0;6>rn;++rn)Be.texImage2D(34069+rn,Yt,Rt.internalformat,Rt.width>>Yt,Rt.height>>Yt,0,Rt.internalformat,Rt.type,null);Un(Rt.texInfo,Rt.target)})},refresh:function(){for(var $t=0;$t<ar;++$t){var An=cr[$t];An&&(An.bindCount=0,An.unit=-1,cr[$t]=null),Be.activeTexture(33984+$t),Be.bindTexture(3553,null),Be.bindTexture(34067,null)}}}}function _(Be,ke,Pe,qe,Xe,nt){function ut(xn,dn,gn){this.target=xn,this.texture=dn,this.renderbuffer=gn;var an=xn=0;dn?(xn=dn.width,an=dn.height):gn&&(xn=gn.width,an=gn.height),this.width=xn,this.height=an}function ct(xn){xn&&(xn.texture&&xn.texture._texture.decRef(),xn.renderbuffer&&xn.renderbuffer._renderbuffer.decRef())}function Ct(xn,dn,gn){xn&&(xn.texture?xn.texture._texture.refCount+=1:xn.renderbuffer._renderbuffer.refCount+=1)}function Lt(xn,dn){dn&&(dn.texture?Be.framebufferTexture2D(36160,xn,dn.target,dn.texture._texture.texture,0):Be.framebufferRenderbuffer(36160,xn,36161,dn.renderbuffer._renderbuffer.renderbuffer))}function Mt(xn){var dn=3553,gn=null,an=null,sn=xn;return typeof xn=="object"&&(sn=xn.data,"target"in xn&&(dn=0|xn.target)),(xn=sn._reglType)==="texture2d"||xn==="textureCube"?gn=sn:xn==="renderbuffer"&&(an=sn,dn=36161),new ut(dn,gn,an)}function mt(xn,dn,gn,an,sn){return gn?((xn=qe.create2D({width:xn,height:dn,format:an,type:sn}))._texture.refCount=0,new ut(3553,xn,null)):((xn=Xe.create({width:xn,height:dn,format:an}))._renderbuffer.refCount=0,new ut(36161,null,xn))}function kt(xn){return xn&&(xn.texture||xn.renderbuffer)}function wt(xn,dn,gn){xn&&(xn.texture?xn.texture.resize(dn,gn):xn.renderbuffer&&xn.renderbuffer.resize(dn,gn),xn.width=dn,xn.height=gn)}function Ot(){this.id=Mn++,Un[this.id]=this,this.framebuffer=Be.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function It(xn){xn.colorAttachments.forEach(ct),ct(xn.depthAttachment),ct(xn.stencilAttachment),ct(xn.depthStencilAttachment)}function Nt(xn){Be.deleteFramebuffer(xn.framebuffer),xn.framebuffer=null,nt.framebufferCount--,delete Un[xn.id]}function Dt(xn){var dn;Be.bindFramebuffer(36160,xn.framebuffer);var gn=xn.colorAttachments;for(dn=0;dn<gn.length;++dn)Lt(36064+dn,gn[dn]);for(dn=gn.length;dn<Pe.maxColorAttachments;++dn)Be.framebufferTexture2D(36160,36064+dn,3553,null,0);Be.framebufferTexture2D(36160,33306,3553,null,0),Be.framebufferTexture2D(36160,36096,3553,null,0),Be.framebufferTexture2D(36160,36128,3553,null,0),Lt(36096,xn.depthAttachment),Lt(36128,xn.stencilAttachment),Lt(33306,xn.depthStencilAttachment),Be.checkFramebufferStatus(36160),Be.isContextLost(),Be.bindFramebuffer(36160,Xt.next?Xt.next.framebuffer:null),Xt.cur=Xt.next,Be.getError()}function qt(xn,dn){function gn(sn,On){var En,Dn=0,Zn=0,Fn=!0,nr=!0;En=null;var $n=!0,mr="rgba",dr="uint8",Yn=1,Vn=null,ur=null,Gt=null,tn=!1;typeof sn=="number"?(Dn=0|sn,Zn=0|On||Dn):sn?("shape"in sn?(Dn=(Zn=sn.shape)[0],Zn=Zn[1]):("radius"in sn&&(Dn=Zn=sn.radius),"width"in sn&&(Dn=sn.width),"height"in sn&&(Zn=sn.height)),("color"in sn||"colors"in sn)&&(En=sn.color||sn.colors,Array.isArray(En)),En||("colorCount"in sn&&(Yn=0|sn.colorCount),"colorTexture"in sn&&($n=!!sn.colorTexture,mr="rgba4"),"colorType"in sn&&(dr=sn.colorType,!$n)&&(dr==="half float"||dr==="float16"?mr="rgba16f":dr!=="float"&&dr!=="float32"||(mr="rgba32f")),"colorFormat"in sn&&(mr=sn.colorFormat,0<=cn.indexOf(mr)?$n=!0:0<=yn.indexOf(mr)&&($n=!1))),("depthTexture"in sn||"depthStencilTexture"in sn)&&(tn=!(!sn.depthTexture&&!sn.depthStencilTexture)),"depth"in sn&&(typeof sn.depth=="boolean"?Fn=sn.depth:(Vn=sn.depth,nr=!1)),"stencil"in sn&&(typeof sn.stencil=="boolean"?nr=sn.stencil:(ur=sn.stencil,Fn=!1)),"depthStencil"in sn&&(typeof sn.depthStencil=="boolean"?Fn=nr=sn.depthStencil:(Gt=sn.depthStencil,nr=Fn=!1))):Dn=Zn=1;var In=null,_n=null,Sn=null,jn=null;if(Array.isArray(En))In=En.map(Mt);else if(En)In=[Mt(En)];else for(In=Array(Yn),En=0;En<Yn;++En)In[En]=mt(Dn,Zn,$n,mr,dr);for(Dn=Dn||In[0].width,Zn=Zn||In[0].height,Vn?_n=Mt(Vn):Fn&&!nr&&(_n=mt(Dn,Zn,tn,"depth","uint32")),ur?Sn=Mt(ur):nr&&!Fn&&(Sn=mt(Dn,Zn,!1,"stencil","uint8")),Gt?jn=Mt(Gt):!Vn&&!ur&&nr&&Fn&&(jn=mt(Dn,Zn,tn,"depth stencil","depth stencil")),Fn=null,En=0;En<In.length;++En)Ct(In[En]),In[En]&&In[En].texture&&(nr=_t[In[En].texture._texture.format]*dt[In[En].texture._texture.type],Fn===null&&(Fn=nr));return Ct(_n),Ct(Sn),Ct(jn),It(an),an.width=Dn,an.height=Zn,an.colorAttachments=In,an.depthAttachment=_n,an.stencilAttachment=Sn,an.depthStencilAttachment=jn,gn.color=In.map(kt),gn.depth=kt(_n),gn.stencil=kt(Sn),gn.depthStencil=kt(jn),gn.width=an.width,gn.height=an.height,Dt(an),gn}var an=new Ot;return nt.framebufferCount++,gn(xn,dn),X(gn,{resize:function(sn,On){var En=Math.max(0|sn,1),Dn=Math.max(0|On||En,1);if(En===an.width&&Dn===an.height)return gn;for(var Zn=an.colorAttachments,Fn=0;Fn<Zn.length;++Fn)wt(Zn[Fn],En,Dn);return wt(an.depthAttachment,En,Dn),wt(an.stencilAttachment,En,Dn),wt(an.depthStencilAttachment,En,Dn),an.width=gn.width=En,an.height=gn.height=Dn,Dt(an),gn},_reglType:"framebuffer",_framebuffer:an,destroy:function(){Nt(an),It(an)},use:function(sn){Xt.setFBO({framebuffer:gn},sn)}})}var Xt={cur:null,next:null,dirty:!1,setFBO:null},cn=["rgba"],yn=["rgba4","rgb565","rgb5 a1"];ke.ext_srgb&&yn.push("srgba"),ke.ext_color_buffer_half_float&&yn.push("rgba16f","rgb16f"),ke.webgl_color_buffer_float&&yn.push("rgba32f");var Kt=["uint8"];ke.oes_texture_half_float&&Kt.push("half float","float16"),ke.oes_texture_float&&Kt.push("float","float32");var Mn=0,Un={};return X(Xt,{getFramebuffer:function(xn){return typeof xn=="function"&&xn._reglType==="framebuffer"&&(xn=xn._framebuffer)instanceof Ot?xn:null},create:qt,createCube:function(xn){function dn(an){var sn,On={color:null},En=0,Dn=null;sn="rgba";var Zn="uint8",Fn=1;if(typeof an=="number"?En=0|an:an?("shape"in an?En=an.shape[0]:("radius"in an&&(En=0|an.radius),"width"in an?En=0|an.width:"height"in an&&(En=0|an.height)),("color"in an||"colors"in an)&&(Dn=an.color||an.colors,Array.isArray(Dn)),Dn||("colorCount"in an&&(Fn=0|an.colorCount),"colorType"in an&&(Zn=an.colorType),"colorFormat"in an&&(sn=an.colorFormat)),"depth"in an&&(On.depth=an.depth),"stencil"in an&&(On.stencil=an.stencil),"depthStencil"in an&&(On.depthStencil=an.depthStencil)):En=1,Dn)if(Array.isArray(Dn))for(an=[],sn=0;sn<Dn.length;++sn)an[sn]=Dn[sn];else an=[Dn];else for(an=Array(Fn),Dn={radius:En,format:sn,type:Zn},sn=0;sn<Fn;++sn)an[sn]=qe.createCube(Dn);for(On.color=Array(an.length),sn=0;sn<an.length;++sn)Fn=an[sn],En=En||Fn.width,On.color[sn]={target:34069,data:an[sn]};for(sn=0;6>sn;++sn){for(Fn=0;Fn<an.length;++Fn)On.color[Fn].target=34069+sn;0<sn&&(On.depth=gn[0].depth,On.stencil=gn[0].stencil,On.depthStencil=gn[0].depthStencil),gn[sn]?gn[sn](On):gn[sn]=qt(On)}return X(dn,{width:En,height:En,color:an})}var gn=Array(6);return dn(xn),X(dn,{faces:gn,resize:function(an){var sn=0|an;if(sn===dn.width)return dn;var On=dn.color;for(an=0;an<On.length;++an)On[an].resize(sn);for(an=0;6>an;++an)gn[an].resize(sn);return dn.width=dn.height=sn,dn},_reglType:"framebufferCube",destroy:function(){gn.forEach(function(an){an.destroy()})}})},clear:function(){he(Un).forEach(Nt)},restore:function(){Xt.cur=null,Xt.next=null,Xt.dirty=!0,he(Un).forEach(function(xn){xn.framebuffer=Be.createFramebuffer(),Dt(xn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function L(Be,ke,Pe,qe,Xe,nt,ut){function ct(){this.id=++Mt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var wt=ke.oes_vertex_array_object;this.vao=wt?wt.createVertexArrayOES():null,mt[this.id]=this,this.buffers=[]}var Ct=Pe.maxAttributes,Lt=Array(Ct);for(Pe=0;Pe<Ct;++Pe)Lt[Pe]=new E;var Mt=0,mt={},kt={Record:E,scope:{},state:Lt,currentVAO:null,targetVAO:null,restore:ke.oes_vertex_array_object?function(){ke.oes_vertex_array_object&&he(mt).forEach(function(wt){wt.refresh()})}:function(){},createVAO:function(wt){function Ot(Nt){var Dt;Array.isArray(Nt)?(Dt=Nt,It.elements&&It.ownsElements&&It.elements.destroy(),It.elements=null,It.ownsElements=!1,It.offset=0,It.count=0,It.instances=-1,It.primitive=4):(Nt.elements?(Dt=Nt.elements,It.ownsElements?(typeof Dt=="function"&&Dt._reglType==="elements"?It.elements.destroy():It.elements(Dt),It.ownsElements=!1):nt.getElements(Nt.elements)?(It.elements=Nt.elements,It.ownsElements=!1):(It.elements=nt.create(Nt.elements),It.ownsElements=!0)):(It.elements=null,It.ownsElements=!1),Dt=Nt.attributes,It.offset=0,It.count=-1,It.instances=-1,It.primitive=4,It.elements&&(It.count=It.elements._elements.vertCount,It.primitive=It.elements._elements.primType),"offset"in Nt&&(It.offset=0|Nt.offset),"count"in Nt&&(It.count=0|Nt.count),"instances"in Nt&&(It.instances=0|Nt.instances),"primitive"in Nt&&(It.primitive=oe[Nt.primitive])),Nt={};var qt=It.attributes;qt.length=Dt.length;for(var Xt=0;Xt<Dt.length;++Xt){var cn,yn=Dt[Xt],Kt=qt[Xt]=new E,Mn=yn.data||yn;Array.isArray(Mn)||ge(Mn)||t(Mn)?(It.buffers[Xt]&&(cn=It.buffers[Xt],ge(Mn)&&cn._buffer.byteLength>=Mn.byteLength?cn.subdata(Mn):(cn.destroy(),It.buffers[Xt]=null)),It.buffers[Xt]||(cn=It.buffers[Xt]=Xe.create(yn,34962,!1,!0)),Kt.buffer=Xe.getBuffer(cn),Kt.size=0|Kt.buffer.dimension,Kt.normalized=!1,Kt.type=Kt.buffer.dtype,Kt.offset=0,Kt.stride=0,Kt.divisor=0,Kt.state=1,Nt[Xt]=1):Xe.getBuffer(yn)?(Kt.buffer=Xe.getBuffer(yn),Kt.size=0|Kt.buffer.dimension,Kt.normalized=!1,Kt.type=Kt.buffer.dtype,Kt.offset=0,Kt.stride=0,Kt.divisor=0,Kt.state=1):Xe.getBuffer(yn.buffer)?(Kt.buffer=Xe.getBuffer(yn.buffer),Kt.size=0|(+yn.size||Kt.buffer.dimension),Kt.normalized=!!yn.normalized||!1,Kt.type="type"in yn?xe[yn.type]:Kt.buffer.dtype,Kt.offset=0|(yn.offset||0),Kt.stride=0|(yn.stride||0),Kt.divisor=0|(yn.divisor||0),Kt.state=1):"x"in yn&&(Kt.x=+yn.x||0,Kt.y=+yn.y||0,Kt.z=+yn.z||0,Kt.w=+yn.w||0,Kt.state=2)}for(cn=0;cn<It.buffers.length;++cn)!Nt[cn]&&It.buffers[cn]&&(It.buffers[cn].destroy(),It.buffers[cn]=null);return It.refresh(),Ot}var It=new ct;return qe.vaoCount+=1,Ot.destroy=function(){for(var Nt=0;Nt<It.buffers.length;++Nt)It.buffers[Nt]&&It.buffers[Nt].destroy();It.buffers.length=0,It.ownsElements&&(It.elements.destroy(),It.elements=null,It.ownsElements=!1),It.destroy()},Ot._vao=It,Ot._reglType="vao",Ot(wt)},getVAO:function(wt){return typeof wt=="function"&&wt._vao?wt._vao:null},destroyBuffer:function(wt){for(var Ot=0;Ot<Lt.length;++Ot){var It=Lt[Ot];It.buffer===wt&&(Be.disableVertexAttribArray(Ot),It.buffer=null)}},setVAO:ke.oes_vertex_array_object?function(wt){if(wt!==kt.currentVAO){var Ot=ke.oes_vertex_array_object;wt?Ot.bindVertexArrayOES(wt.vao):Ot.bindVertexArrayOES(null),kt.currentVAO=wt}}:function(wt){if(wt!==kt.currentVAO){if(wt)wt.bindAttrs();else{for(var Ot=ke.angle_instanced_arrays,It=0;It<Lt.length;++It){var Nt=Lt[It];Nt.buffer?(Be.enableVertexAttribArray(It),Nt.buffer.bind(),Be.vertexAttribPointer(It,Nt.size,Nt.type,Nt.normalized,Nt.stride,Nt.offfset),Ot&&Nt.divisor&&Ot.vertexAttribDivisorANGLE(It,Nt.divisor)):(Be.disableVertexAttribArray(It),Be.vertexAttrib4f(It,Nt.x,Nt.y,Nt.z,Nt.w))}ut.elements?Be.bindBuffer(34963,ut.elements.buffer.buffer):Be.bindBuffer(34963,null)}kt.currentVAO=wt}},clear:ke.oes_vertex_array_object?function(){he(mt).forEach(function(wt){wt.destroy()})}:function(){}};return ct.prototype.bindAttrs=function(){for(var wt=ke.angle_instanced_arrays,Ot=this.attributes,It=0;It<Ot.length;++It){var Nt=Ot[It];Nt.buffer?(Be.enableVertexAttribArray(It),Be.bindBuffer(34962,Nt.buffer.buffer),Be.vertexAttribPointer(It,Nt.size,Nt.type,Nt.normalized,Nt.stride,Nt.offset),wt&&Nt.divisor&&wt.vertexAttribDivisorANGLE(It,Nt.divisor)):(Be.disableVertexAttribArray(It),Be.vertexAttrib4f(It,Nt.x,Nt.y,Nt.z,Nt.w))}for(wt=Ot.length;wt<Ct;++wt)Be.disableVertexAttribArray(wt);(wt=nt.getElements(this.elements))?Be.bindBuffer(34963,wt.buffer.buffer):Be.bindBuffer(34963,null)},ct.prototype.refresh=function(){var wt=ke.oes_vertex_array_object;wt&&(wt.bindVertexArrayOES(this.vao),this.bindAttrs(),kt.currentVAO=null,wt.bindVertexArrayOES(null))},ct.prototype.destroy=function(){if(this.vao){var wt=ke.oes_vertex_array_object;this===kt.currentVAO&&(kt.currentVAO=null,wt.bindVertexArrayOES(null)),wt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),mt[this.id]&&(delete mt[this.id],--qe.vaoCount)},kt}function C(Be,ke,Pe,qe){function Xe(Ot,It,Nt,Dt){this.name=Ot,this.id=It,this.location=Nt,this.info=Dt}function nt(Ot,It){for(var Nt=0;Nt<Ot.length;++Nt)if(Ot[Nt].id===It.id)return void(Ot[Nt].location=It.location);Ot.push(It)}function ut(Ot,It,Nt){if(!(qt=(Nt=Ot===35632?Lt:Mt)[It])){var Dt=ke.str(It),qt=Be.createShader(Ot);Be.shaderSource(qt,Dt),Be.compileShader(qt),Nt[It]=qt}return qt}function ct(Ot,It){this.id=wt++,this.fragId=Ot,this.vertId=It,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,qe.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ct(Ot,It,Nt){var Dt;Dt=ut(35632,Ot.fragId);var qt=ut(35633,Ot.vertId);if(It=Ot.program=Be.createProgram(),Be.attachShader(It,Dt),Be.attachShader(It,qt),Nt)for(Dt=0;Dt<Nt.length;++Dt)qt=Nt[Dt],Be.bindAttribLocation(It,qt[0],qt[1]);Be.linkProgram(It),qt=Be.getProgramParameter(It,35718),qe.profile&&(Ot.stats.uniformsCount=qt);var Xt=Ot.uniforms;for(Dt=0;Dt<qt;++Dt)if(Nt=Be.getActiveUniform(It,Dt))if(1<Nt.size)for(var cn=0;cn<Nt.size;++cn){var yn=Nt.name.replace("[0]","["+cn+"]");nt(Xt,new Xe(yn,ke.id(yn),Be.getUniformLocation(It,yn),Nt))}else nt(Xt,new Xe(Nt.name,ke.id(Nt.name),Be.getUniformLocation(It,Nt.name),Nt));for(qt=Be.getProgramParameter(It,35721),qe.profile&&(Ot.stats.attributesCount=qt),Ot=Ot.attributes,Dt=0;Dt<qt;++Dt)(Nt=Be.getActiveAttrib(It,Dt))&&nt(Ot,new Xe(Nt.name,ke.id(Nt.name),Be.getAttribLocation(It,Nt.name),Nt))}var Lt={},Mt={},mt={},kt=[],wt=0;return qe.profile&&(Pe.getMaxUniformsCount=function(){var Ot=0;return kt.forEach(function(It){It.stats.uniformsCount>Ot&&(Ot=It.stats.uniformsCount)}),Ot},Pe.getMaxAttributesCount=function(){var Ot=0;return kt.forEach(function(It){It.stats.attributesCount>Ot&&(Ot=It.stats.attributesCount)}),Ot}),{clear:function(){var Ot=Be.deleteShader.bind(Be);he(Lt).forEach(Ot),Lt={},he(Mt).forEach(Ot),Mt={},kt.forEach(function(It){Be.deleteProgram(It.program)}),kt.length=0,mt={},Pe.shaderCount=0},program:function(Ot,It,Nt,Dt){var qt=mt[It];qt||(qt=mt[It]={});var Xt=qt[Ot];if(Xt&&(Xt.refCount++,!Dt))return Xt;var cn=new ct(It,Ot);return Pe.shaderCount++,Ct(cn,Nt,Dt),Xt||(qt[Ot]=cn),kt.push(cn),X(cn,{destroy:function(){if(cn.refCount--,0>=cn.refCount){Be.deleteProgram(cn.program);var yn=kt.indexOf(cn);kt.splice(yn,1),Pe.shaderCount--}0>=qt[cn.vertId].refCount&&(Be.deleteShader(Mt[cn.vertId]),delete Mt[cn.vertId],delete mt[cn.fragId][cn.vertId]),Object.keys(mt[cn.fragId]).length||(Be.deleteShader(Lt[cn.fragId]),delete Lt[cn.fragId],delete mt[cn.fragId])}})},restore:function(){Lt={},Mt={};for(var Ot=0;Ot<kt.length;++Ot)Ct(kt[Ot],null,kt[Ot].attributes.map(function(It){return[It.location,It.name]}))},shader:ut,frag:-1,vert:-1}}function P(Be,ke,Pe,qe,Xe,nt,ut){function ct(Ct){var Lt;Lt=ke.next===null?5121:ke.next.colorAttachments[0].texture._texture.type;var Mt=0,mt=0,kt=qe.framebufferWidth,wt=qe.framebufferHeight,Ot=null;return ge(Ct)?Ot=Ct:Ct&&(Mt=0|Ct.x,mt=0|Ct.y,kt=0|(Ct.width||qe.framebufferWidth-Mt),wt=0|(Ct.height||qe.framebufferHeight-mt),Ot=Ct.data||null),Pe(),Ct=kt*wt*4,Ot||(Lt===5121?Ot=new Uint8Array(Ct):Lt===5126&&(Ot=Ot||new Float32Array(Ct))),Be.pixelStorei(3333,4),Be.readPixels(Mt,mt,kt,wt,6408,Lt,Ot),Ot}return function(Ct){return Ct&&"framebuffer"in Ct?function(Lt){var Mt;return ke.setFBO({framebuffer:Lt.framebuffer},function(){Mt=ct(Lt)}),Mt}(Ct):ct(Ct)}}function I(Be,ke){return Be>>>ke|Be<<32-ke}function U(Be,ke){var Pe=(65535&Be)+(65535&ke);return(Be>>16)+(ke>>16)+(Pe>>16)<<16|65535&Pe}function z(Be){return Array.prototype.slice.call(Be)}function H(Be){return z(Be).join("")}function F(Be){function ke(){var Mt=[],mt=[];return X(function(){Mt.push.apply(Mt,z(arguments))},{def:function(){var kt="v"+Xe++;return mt.push(kt),0<arguments.length&&(Mt.push(kt,"="),Mt.push.apply(Mt,z(arguments)),Mt.push(";")),kt},toString:function(){return H([0<mt.length?"var "+mt.join(",")+";":"",H(Mt)])}})}function Pe(){function Mt(It,Nt){kt(It,Nt,"=",mt.def(It,Nt),";")}var mt=ke(),kt=ke(),wt=mt.toString,Ot=kt.toString;return X(function(){mt.apply(mt,z(arguments))},{def:mt.def,entry:mt,exit:kt,save:Mt,set:function(It,Nt,Dt){Mt(It,Nt),mt(It,Nt,"=",Dt,";")},toString:function(){return wt()+Ot()}})}var qe=Be&&Be.cache,Xe=0,nt=[],ut=[],ct=[],Ct=ke(),Lt={};return{global:Ct,link:function(Mt,mt){var kt=mt&&mt.stable;if(!kt){for(var wt=0;wt<ut.length;++wt)if(ut[wt]===Mt&&!ct[wt])return nt[wt]}return wt="g"+Xe++,nt.push(wt),ut.push(Mt),ct.push(kt),wt},block:ke,proc:function(Mt,mt){function kt(){var Nt="a"+wt.length;return wt.push(Nt),Nt}var wt=[];mt=mt||0;for(var Ot=0;Ot<mt;++Ot)kt();var It=(Ot=Pe()).toString;return Lt[Mt]=X(Ot,{arg:kt,toString:function(){return H(["function(",wt.join(),"){",It(),"}"])}})},scope:Pe,cond:function(){var Mt=H(arguments),mt=Pe(),kt=Pe(),wt=mt.toString,Ot=kt.toString;return X(mt,{then:function(){return mt.apply(mt,z(arguments)),this},else:function(){return kt.apply(kt,z(arguments)),this},toString:function(){var It=Ot();return It&&(It="else{"+It+"}"),H(["if(",Mt,"){",wt(),"}",It])}})},compile:function(){var Mt=['"use strict";',Ct,"return {"];Object.keys(Lt).forEach(function(wt){Mt.push('"',wt,'":',Lt[wt].toString(),",")}),Mt.push("}");var mt,kt=H(Mt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return qe&&(mt=function(wt){for(var Ot,It="",Nt=0;Nt<wt.length;Nt++)Ot=wt.charCodeAt(Nt),It+="0123456789abcdef".charAt(Ot>>>4&15)+"0123456789abcdef".charAt(15&Ot);return It}(function(wt){for(var Ot=Array(wt.length>>2),It=0;It<Ot.length;It++)Ot[It]=0;for(It=0;It<8*wt.length;It+=8)Ot[It>>5]|=(255&wt.charCodeAt(It/8))<<24-It%32;var Nt,Dt,qt,Xt,cn,yn,Kt,Mn,Un,xn,dn,gn=8*wt.length;for(wt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],It=Array(64),Ot[gn>>5]|=128<<24-gn%32,Ot[15+(gn+64>>9<<4)]=gn,Mn=0;Mn<Ot.length;Mn+=16){for(gn=wt[0],Nt=wt[1],Dt=wt[2],qt=wt[3],Xt=wt[4],cn=wt[5],yn=wt[6],Kt=wt[7],Un=0;64>Un;Un++){var an;16>Un?It[Un]=Ot[Un+Mn]:(xn=Un,dn=U(dn=I(dn=It[Un-2],17)^I(dn,19)^dn>>>10,It[Un-7]),an=I(an=It[Un-15],7)^I(an,18)^an>>>3,It[xn]=U(U(dn,an),It[Un-16])),xn=U(U(U(U(Kt,xn=I(xn=Xt,6)^I(xn,11)^I(xn,25)),Xt&cn^~Xt&yn),bt[Un]),It[Un]),dn=U(Kt=I(Kt=gn,2)^I(Kt,13)^I(Kt,22),gn&Nt^gn&Dt^Nt&Dt),Kt=yn,yn=cn,cn=Xt,Xt=U(qt,xn),qt=Dt,Dt=Nt,Nt=gn,gn=U(xn,dn)}wt[0]=U(gn,wt[0]),wt[1]=U(Nt,wt[1]),wt[2]=U(Dt,wt[2]),wt[3]=U(qt,wt[3]),wt[4]=U(Xt,wt[4]),wt[5]=U(cn,wt[5]),wt[6]=U(yn,wt[6]),wt[7]=U(Kt,wt[7])}for(Ot="",It=0;It<32*wt.length;It+=8)Ot+=String.fromCharCode(wt[It>>5]>>>24-It%32&255);return Ot}(function(wt){for(var Ot,It,Nt="",Dt=-1;++Dt<wt.length;)Ot=wt.charCodeAt(Dt),It=Dt+1<wt.length?wt.charCodeAt(Dt+1):0,55296<=Ot&&56319>=Ot&&56320<=It&&57343>=It&&(Ot=65536+((1023&Ot)<<10)+(1023&It),Dt++),127>=Ot?Nt+=String.fromCharCode(Ot):2047>=Ot?Nt+=String.fromCharCode(192|Ot>>>6&31,128|63&Ot):65535>=Ot?Nt+=String.fromCharCode(224|Ot>>>12&15,128|Ot>>>6&63,128|63&Ot):2097151>=Ot&&(Nt+=String.fromCharCode(240|Ot>>>18&7,128|Ot>>>12&63,128|Ot>>>6&63,128|63&Ot));return Nt}(kt))),qe[mt])?qe[mt].apply(null,ut):(kt=Function.apply(null,nt.concat(kt)),qe&&(qe[mt]=kt),kt.apply(null,ut))}}}function N(Be){return Array.isArray(Be)||ge(Be)||t(Be)}function B(Be){return Be.sort(function(ke,Pe){return ke==="viewport"?-1:Pe==="viewport"?1:ke<Pe?-1:1})}function j(Be,ke,Pe,qe){this.thisDep=Be,this.contextDep=ke,this.propDep=Pe,this.append=qe}function K(Be){return Be&&!(Be.thisDep||Be.contextDep||Be.propDep)}function G(Be){return new j(!1,!1,!1,Be)}function V(Be,ke){var Pe=Be.type;if(Pe===0)return new j(!0,1<=(Pe=Be.data.length),2<=Pe,ke);if(Pe===4)return new j((Pe=Be.data).thisDep,Pe.contextDep,Pe.propDep,ke);if(Pe===5)return new j(!1,!1,!1,ke);if(Pe===6){for(var qe=Pe=!1,Xe=!1,nt=0;nt<Be.data.length;++nt){var ut=Be.data[nt];ut.type===1?Xe=!0:ut.type===2?qe=!0:ut.type===3?Pe=!0:ut.type===0?(Pe=!0,1<=(ut=ut.data)&&(qe=!0),2<=ut&&(Xe=!0)):ut.type===4&&(Pe=Pe||ut.data.thisDep,qe=qe||ut.data.contextDep,Xe=Xe||ut.data.propDep)}return new j(Pe,qe,Xe,ke)}return new j(Pe===3,Pe===2,Pe===1,ke)}function W(Be,ke,Pe,qe,Xe,nt,ut,ct,Ct,Lt,Mt,mt,kt,wt,Ot,It){function Nt(Rt){return Rt.replace(".","_")}function Dt(Rt,Yt,rn){var bn=Nt(Rt);jn.push(Rt),Sn[bn]=_n[bn]=!!rn,qn[bn]=Yt}function qt(Rt,Yt,rn){var bn=Nt(Rt);jn.push(Rt),Array.isArray(rn)?(_n[bn]=rn.slice(),Sn[bn]=rn.slice()):_n[bn]=Sn[bn]=rn,ar[bn]=Yt}function Xt(){var Rt=F({cache:Ot}),Yt=Rt.link,rn=Rt.global;Rt.id=An++,Rt.batchId="0";var bn=Yt(cr),ln=Rt.shared={props:"a0"};Object.keys(cr).forEach(function(fn){ln[fn]=rn.def(bn,".",fn)});var kn=Rt.next={},Tn=Rt.current={};Object.keys(ar).forEach(function(fn){Array.isArray(_n[fn])&&(kn[fn]=rn.def(ln.next,".",fn),Tn[fn]=rn.def(ln.current,".",fn))});var hn=Rt.constants={};Object.keys($t).forEach(function(fn){hn[fn]=rn.def(JSON.stringify($t[fn]))}),Rt.invoke=function(fn,mn){switch(mn.type){case 0:var zn=["this",ln.context,ln.props,Rt.batchId];return fn.def(Yt(mn.data),".call(",zn.slice(0,Math.max(mn.data.length+1,4)),")");case 1:return fn.def(ln.props,mn.data);case 2:return fn.def(ln.context,mn.data);case 3:return fn.def("this",mn.data);case 4:return mn.data.append(Rt,fn),mn.data.ref;case 5:return mn.data.toString();case 6:return mn.data.map(function(Gn){return Rt.invoke(fn,Gn)})}},Rt.attribCache={};var nn={};return Rt.scopeAttrib=function(fn){if((fn=ke.id(fn))in nn)return nn[fn];var mn=Lt.scope[fn];return mn||(mn=Lt.scope[fn]=new Vn),nn[fn]=Yt(mn)},Rt}function cn(Rt,Yt){var rn=Rt.static,bn=Rt.dynamic;if("framebuffer"in rn){var ln=rn.framebuffer;return ln?(ln=ct.getFramebuffer(ln),G(function(Tn,hn){var nn=Tn.link(ln),fn=Tn.shared;return hn.set(fn.framebuffer,".next",nn),fn=fn.context,hn.set(fn,".framebufferWidth",nn+".width"),hn.set(fn,".framebufferHeight",nn+".height"),nn})):G(function(Tn,hn){var nn=Tn.shared;return hn.set(nn.framebuffer,".next","null"),nn=nn.context,hn.set(nn,".framebufferWidth",nn+".drawingBufferWidth"),hn.set(nn,".framebufferHeight",nn+".drawingBufferHeight"),"null"})}if("framebuffer"in bn){var kn=bn.framebuffer;return V(kn,function(Tn,hn){var nn=Tn.invoke(hn,kn),fn=Tn.shared,mn=fn.framebuffer;return nn=hn.def(mn,".getFramebuffer(",nn,")"),hn.set(mn,".next",nn),fn=fn.context,hn.set(fn,".framebufferWidth",nn+"?"+nn+".width:"+fn+".drawingBufferWidth"),hn.set(fn,".framebufferHeight",nn+"?"+nn+".height:"+fn+".drawingBufferHeight"),nn})}return null}function yn(Rt,Yt,rn){function bn(fn){if(fn in ln){var mn=ke.id(ln[fn]);return(fn=G(function(){return mn})).id=mn,fn}if(fn in kn){var zn=kn[fn];return V(zn,function(Gn,Hn){var Qn=Gn.invoke(Hn,zn);return Hn.def(Gn.shared.strings,".id(",Qn,")")})}return null}var ln=Rt.static,kn=Rt.dynamic,Tn=bn("frag"),hn=bn("vert"),nn=null;return K(Tn)&&K(hn)?(nn=Mt.program(hn.id,Tn.id,null,rn),Rt=G(function(fn,mn){return fn.link(nn)})):Rt=new j(Tn&&Tn.thisDep||hn&&hn.thisDep,Tn&&Tn.contextDep||hn&&hn.contextDep,Tn&&Tn.propDep||hn&&hn.propDep,function(fn,mn){var zn,Gn,Hn=fn.shared.shader;return zn=Tn?Tn.append(fn,mn):mn.def(Hn,".","frag"),Gn=hn?hn.append(fn,mn):mn.def(Hn,".","vert"),mn.def(Hn+".program("+Gn+","+zn+")")}),{frag:Tn,vert:hn,progVar:Rt,program:nn}}function Kt(Rt,Yt){function rn(Qn,rr){if(Qn in bn){var er=0|bn[Qn];return rr?kn.offset=er:kn.instances=er,G(function(ir,gr){return rr&&(ir.OFFSET=er),er})}if(Qn in ln){var or=ln[Qn];return V(or,function(ir,gr){var Tr=ir.invoke(gr,or);return rr&&(ir.OFFSET=Tr),Tr})}if(rr){if(nn)return G(function(ir,gr){return ir.OFFSET=0});if(Tn)return new j(hn.thisDep,hn.contextDep,hn.propDep,function(ir,gr){return gr.def(ir.shared.vao+".currentVAO?"+ir.shared.vao+".currentVAO.offset:0")})}else if(Tn)return new j(hn.thisDep,hn.contextDep,hn.propDep,function(ir,gr){return gr.def(ir.shared.vao+".currentVAO?"+ir.shared.vao+".currentVAO.instances:-1")});return null}var bn=Rt.static,ln=Rt.dynamic,kn={},Tn=!1,hn=function(){if("vao"in bn){var Qn=bn.vao;return Qn!==null&&Lt.getVAO(Qn)===null&&(Qn=Lt.createVAO(Qn)),Tn=!0,kn.vao=Qn,G(function(er){var or=Lt.getVAO(Qn);return or?er.link(or):"null"})}if("vao"in ln){Tn=!0;var rr=ln.vao;return V(rr,function(er,or){var ir=er.invoke(or,rr);return or.def(er.shared.vao+".getVAO("+ir+")")})}return null}(),nn=!1,fn=function(){if("elements"in bn){var Qn=bn.elements;if(kn.elements=Qn,N(Qn)){var rr=kn.elements=nt.create(Qn,!0);Qn=nt.getElements(rr),nn=!0}else Qn&&(Qn=nt.getElements(Qn),nn=!0);return rr=G(function(or,ir){if(Qn){var gr=or.link(Qn);return or.ELEMENTS=gr}return or.ELEMENTS=null}),rr.value=Qn,rr}if("elements"in ln){nn=!0;var er=ln.elements;return V(er,function(or,ir){var gr=(Tr=or.shared).isBufferArgs,Tr=Tr.elements,Ur=or.invoke(ir,er),Sr=ir.def("null");return gr=ir.def(gr,"(",Ur,")"),Ur=or.cond(gr).then(Sr,"=",Tr,".createStream(",Ur,");").else(Sr,"=",Tr,".getElements(",Ur,");"),ir.entry(Ur),ir.exit(or.cond(gr).then(Tr,".destroyStream(",Sr,");")),or.ELEMENTS=Sr})}return Tn?new j(hn.thisDep,hn.contextDep,hn.propDep,function(or,ir){return ir.def(or.shared.vao+".currentVAO?"+or.shared.elements+".getElements("+or.shared.vao+".currentVAO.elements):null")}):null}(),mn=rn("offset",!0),zn=function(){if("primitive"in bn){var Qn=bn.primitive;return kn.primitive=Qn,G(function(er,or){return oe[Qn]})}if("primitive"in ln){var rr=ln.primitive;return V(rr,function(er,or){var ir=er.constants.primTypes,gr=er.invoke(or,rr);return or.def(ir,"[",gr,"]")})}return nn?K(fn)?fn.value?G(function(er,or){return or.def(er.ELEMENTS,".primType")}):G(function(){return 4}):new j(fn.thisDep,fn.contextDep,fn.propDep,function(er,or){var ir=er.ELEMENTS;return or.def(ir,"?",ir,".primType:",4)}):Tn?new j(hn.thisDep,hn.contextDep,hn.propDep,function(er,or){return or.def(er.shared.vao+".currentVAO?"+er.shared.vao+".currentVAO.primitive:4")}):null}(),Gn=function(){if("count"in bn){var Qn=0|bn.count;return kn.count=Qn,G(function(){return Qn})}if("count"in ln){var rr=ln.count;return V(rr,function(er,or){return er.invoke(or,rr)})}return nn?K(fn)?fn?mn?new j(mn.thisDep,mn.contextDep,mn.propDep,function(er,or){return or.def(er.ELEMENTS,".vertCount-",er.OFFSET)}):G(function(er,or){return or.def(er.ELEMENTS,".vertCount")}):G(function(){return-1}):new j(fn.thisDep||mn.thisDep,fn.contextDep||mn.contextDep,fn.propDep||mn.propDep,function(er,or){var ir=er.ELEMENTS;return er.OFFSET?or.def(ir,"?",ir,".vertCount-",er.OFFSET,":-1"):or.def(ir,"?",ir,".vertCount:-1")}):Tn?new j(hn.thisDep,hn.contextDep,hn.propDep,function(er,or){return or.def(er.shared.vao,".currentVAO?",er.shared.vao,".currentVAO.count:-1")}):null}(),Hn=rn("instances",!1);return{elements:fn,primitive:zn,count:Gn,instances:Hn,offset:mn,vao:hn,vaoActive:Tn,elementsActive:nn,static:kn}}function Mn(Rt,Yt){var rn=Rt.static,bn=Rt.dynamic,ln={};return Object.keys(rn).forEach(function(kn){var Tn=rn[kn],hn=ke.id(kn),nn=new Vn;if(N(Tn))nn.state=1,nn.buffer=Xe.getBuffer(Xe.create(Tn,34962,!1,!0)),nn.type=0;else if(mn=Xe.getBuffer(Tn))nn.state=1,nn.buffer=mn,nn.type=0;else if("constant"in Tn){var fn=Tn.constant;nn.buffer="null",nn.state=2,typeof fn=="number"?nn.x=fn:St.forEach(function(er,or){or<fn.length&&(nn[er]=fn[or])})}else{var mn=N(Tn.buffer)?Xe.getBuffer(Xe.create(Tn.buffer,34962,!1,!0)):Xe.getBuffer(Tn.buffer),zn=0|Tn.offset,Gn=0|Tn.stride,Hn=0|Tn.size,Qn=!!Tn.normalized,rr=0;"type"in Tn&&(rr=xe[Tn.type]),Tn=0|Tn.divisor,nn.buffer=mn,nn.state=1,nn.size=Hn,nn.normalized=Qn,nn.type=rr||mn.dtype,nn.offset=zn,nn.stride=Gn,nn.divisor=Tn}ln[kn]=G(function(er,or){var ir=er.attribCache;if(hn in ir)return ir[hn];var gr={isStream:!1};return Object.keys(nn).forEach(function(Tr){gr[Tr]=nn[Tr]}),nn.buffer&&(gr.buffer=er.link(nn.buffer),gr.type=gr.type||gr.buffer+".dtype"),ir[hn]=gr})}),Object.keys(bn).forEach(function(kn){var Tn=bn[kn];ln[kn]=V(Tn,function(hn,nn){function fn(ir){nn(Qn[ir],"=",mn,".",ir,"|0;")}var mn=hn.invoke(nn,Tn),zn=hn.shared,Gn=hn.constants,Hn=zn.isBufferArgs,Qn=(zn=zn.buffer,{isStream:nn.def(!1)}),rr=new Vn;rr.state=1,Object.keys(rr).forEach(function(ir){Qn[ir]=nn.def(""+rr[ir])});var er=Qn.buffer,or=Qn.type;return nn("if(",Hn,"(",mn,")){",Qn.isStream,"=true;",er,"=",zn,".createStream(",34962,",",mn,");",or,"=",er,".dtype;","}else{",er,"=",zn,".getBuffer(",mn,");","if(",er,"){",or,"=",er,".dtype;",'}else if("constant" in ',mn,"){",Qn.state,"=",2,";","if(typeof "+mn+'.constant === "number"){',Qn[St[0]],"=",mn,".constant;",St.slice(1).map(function(ir){return Qn[ir]}).join("="),"=0;","}else{",St.map(function(ir,gr){return Qn[ir]+"="+mn+".constant.length>"+gr+"?"+mn+".constant["+gr+"]:0;"}).join(""),"}}else{","if(",Hn,"(",mn,".buffer)){",er,"=",zn,".createStream(",34962,",",mn,".buffer);","}else{",er,"=",zn,".getBuffer(",mn,".buffer);","}",or,'="type" in ',mn,"?",Gn.glTypes,"[",mn,".type]:",er,".dtype;",Qn.normalized,"=!!",mn,".normalized;"),fn("size"),fn("offset"),fn("stride"),fn("divisor"),nn("}}"),nn.exit("if(",Qn.isStream,"){",zn,".destroyStream(",er,");","}"),Qn})}),ln}function Un(Rt,Yt,rn,bn,ln){function kn(rr){var er=hn[rr];er&&(fn[rr]=er)}var Tn=function(rr,er){if(typeof(or=rr.static).frag=="string"&&typeof or.vert=="string"){if(0<Object.keys(er.dynamic).length)return null;var or=er.static,ir=Object.keys(or);if(0<ir.length&&typeof or[ir[0]]=="number"){for(var gr=[],Tr=0;Tr<ir.length;++Tr)gr.push([0|or[ir[Tr]],ir[Tr]]);return gr}}return null}(Rt,Yt),hn=function(rr,er,or){function ir(Sr){if(Sr in gr){var lr=gr[Sr];Sr=!0;var Lr,Rr,li=0|lr.x,Mi=0|lr.y;return"width"in lr?Lr=0|lr.width:Sr=!1,"height"in lr?Rr=0|lr.height:Sr=!1,new j(!Sr&&er&&er.thisDep,!Sr&&er&&er.contextDep,!Sr&&er&&er.propDep,function(Ea,Ui){var vi=Ea.shared.context,La=Lr;"width"in lr||(La=Ui.def(vi,".","framebufferWidth","-",li));var no=Rr;return"height"in lr||(no=Ui.def(vi,".","framebufferHeight","-",Mi)),[li,Mi,La,no]})}if(Sr in Tr){var Pi=Tr[Sr];return Sr=V(Pi,function(Ea,Ui){var vi=Ea.invoke(Ui,Pi),La=Ea.shared.context,no=Ui.def(vi,".x|0"),Zo=Ui.def(vi,".y|0");return[no,Zo,Ui.def('"width" in ',vi,"?",vi,".width|0:","(",La,".","framebufferWidth","-",no,")"),vi=Ui.def('"height" in ',vi,"?",vi,".height|0:","(",La,".","framebufferHeight","-",Zo,")")]}),er&&(Sr.thisDep=Sr.thisDep||er.thisDep,Sr.contextDep=Sr.contextDep||er.contextDep,Sr.propDep=Sr.propDep||er.propDep),Sr}return er?new j(er.thisDep,er.contextDep,er.propDep,function(Ea,Ui){var vi=Ea.shared.context;return[0,0,Ui.def(vi,".","framebufferWidth"),Ui.def(vi,".","framebufferHeight")]}):null}var gr=rr.static,Tr=rr.dynamic;if(rr=ir("viewport")){var Ur=rr;rr=new j(rr.thisDep,rr.contextDep,rr.propDep,function(Sr,lr){var Lr=Ur.append(Sr,lr),Rr=Sr.shared.context;return lr.set(Rr,".viewportWidth",Lr[2]),lr.set(Rr,".viewportHeight",Lr[3]),Lr})}return{viewport:rr,scissor_box:ir("scissor.box")}}(Rt,zn=cn(Rt)),nn=Kt(Rt),fn=function(rr,er){var or=rr.static,ir=rr.dynamic,gr={};return jn.forEach(function(Tr){function Ur(lr,Lr){if(Tr in or){var Rr=lr(or[Tr]);gr[Sr]=G(function(){return Rr})}else if(Tr in ir){var li=ir[Tr];gr[Sr]=V(li,function(Mi,Pi){return Lr(Mi,Pi,Mi.invoke(Pi,li))})}}var Sr=Nt(Tr);switch(Tr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Ur(function(lr){return lr},function(lr,Lr,Rr){return Rr});case"depth.func":return Ur(function(lr){return Ut[lr]},function(lr,Lr,Rr){return Lr.def(lr.constants.compareFuncs,"[",Rr,"]")});case"depth.range":return Ur(function(lr){return lr},function(lr,Lr,Rr){return[Lr.def("+",Rr,"[0]"),Lr=Lr.def("+",Rr,"[1]")]});case"blend.func":return Ur(function(lr){return[zt["srcRGB"in lr?lr.srcRGB:lr.src],zt["dstRGB"in lr?lr.dstRGB:lr.dst],zt["srcAlpha"in lr?lr.srcAlpha:lr.src],zt["dstAlpha"in lr?lr.dstAlpha:lr.dst]]},function(lr,Lr,Rr){function li(Ui,vi){return Lr.def('"',Ui,vi,'" in ',Rr,"?",Rr,".",Ui,vi,":",Rr,".",Ui)}lr=lr.constants.blendFuncs;var Mi=li("src","RGB"),Pi=li("dst","RGB"),Ea=(Mi=Lr.def(lr,"[",Mi,"]"),Lr.def(lr,"[",li("src","Alpha"),"]"));return[Mi,Pi=Lr.def(lr,"[",Pi,"]"),Ea,lr=Lr.def(lr,"[",li("dst","Alpha"),"]")]});case"blend.equation":return Ur(function(lr){return typeof lr=="string"?[ur[lr],ur[lr]]:typeof lr=="object"?[ur[lr.rgb],ur[lr.alpha]]:void 0},function(lr,Lr,Rr){var li=lr.constants.blendEquations,Mi=Lr.def(),Pi=Lr.def();return(lr=lr.cond("typeof ",Rr,'==="string"')).then(Mi,"=",Pi,"=",li,"[",Rr,"];"),lr.else(Mi,"=",li,"[",Rr,".rgb];",Pi,"=",li,"[",Rr,".alpha];"),Lr(lr),[Mi,Pi]});case"blend.color":return Ur(function(lr){return x(4,function(Lr){return+lr[Lr]})},function(lr,Lr,Rr){return x(4,function(li){return Lr.def("+",Rr,"[",li,"]")})});case"stencil.mask":return Ur(function(lr){return 0|lr},function(lr,Lr,Rr){return Lr.def(Rr,"|0")});case"stencil.func":return Ur(function(lr){return[Ut[lr.cmp||"keep"],lr.ref||0,"mask"in lr?lr.mask:-1]},function(lr,Lr,Rr){return[lr=Lr.def('"cmp" in ',Rr,"?",lr.constants.compareFuncs,"[",Rr,".cmp]",":",7680),Lr.def(Rr,".ref|0"),Lr=Lr.def('"mask" in ',Rr,"?",Rr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Ur(function(lr){return[Tr==="stencil.opBack"?1029:1028,Pt[lr.fail||"keep"],Pt[lr.zfail||"keep"],Pt[lr.zpass||"keep"]]},function(lr,Lr,Rr){function li(Pi){return Lr.def('"',Pi,'" in ',Rr,"?",Mi,"[",Rr,".",Pi,"]:",7680)}var Mi=lr.constants.stencilOps;return[Tr==="stencil.opBack"?1029:1028,li("fail"),li("zfail"),li("zpass")]});case"polygonOffset.offset":return Ur(function(lr){return[0|lr.factor,0|lr.units]},function(lr,Lr,Rr){return[Lr.def(Rr,".factor|0"),Lr=Lr.def(Rr,".units|0")]});case"cull.face":return Ur(function(lr){var Lr=0;return lr==="front"?Lr=1028:lr==="back"&&(Lr=1029),Lr},function(lr,Lr,Rr){return Lr.def(Rr,'==="front"?',1028,":",1029)});case"frontFace":return Ur(function(lr){return Ze[lr]},function(lr,Lr,Rr){return Lr.def(Rr+'==="cw"?2304:2305')});case"colorMask":return Ur(function(lr){return lr.map(function(Lr){return!!Lr})},function(lr,Lr,Rr){return x(4,function(li){return"!!"+Rr+"["+li+"]"})});case"sample.coverage":return Ur(function(lr){return["value"in lr?lr.value:1,!!lr.invert]},function(lr,Lr,Rr){return[Lr.def('"value" in ',Rr,"?+",Rr,".value:1"),Lr=Lr.def("!!",Rr,".invert")]})}}),gr}(Rt),mn=yn(Rt,0,Tn);kn("viewport"),kn(Nt("scissor.box"));var zn,Gn=0<Object.keys(fn).length;if((zn={framebuffer:zn,draw:nn,shader:mn,state:fn,dirty:Gn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(rr){var er,or=rr.static;if(rr=rr.dynamic,"profile"in or){var ir=!!or.profile;(er=G(function(Tr,Ur){return ir})).enable=ir}else if("profile"in rr){var gr=rr.profile;er=V(gr,function(Tr,Ur){return Tr.invoke(Ur,gr)})}return er}(Rt),zn.uniforms=function(rr,er){var or=rr.static,ir=rr.dynamic,gr={};return Object.keys(or).forEach(function(Tr){var Ur,Sr=or[Tr];if(typeof Sr=="number"||typeof Sr=="boolean")Ur=G(function(){return Sr});else if(typeof Sr=="function"){var lr=Sr._reglType;lr==="texture2d"||lr==="textureCube"?Ur=G(function(Lr){return Lr.link(Sr)}):lr!=="framebuffer"&&lr!=="framebufferCube"||(Ur=G(function(Lr){return Lr.link(Sr.color[0])}))}else b(Sr)&&(Ur=G(function(Lr){return Lr.global.def("[",x(Sr.length,function(Rr){return Sr[Rr]}),"]")}));Ur.value=Sr,gr[Tr]=Ur}),Object.keys(ir).forEach(function(Tr){var Ur=ir[Tr];gr[Tr]=V(Ur,function(Sr,lr){return Sr.invoke(lr,Ur)})}),gr}(rn),zn.drawVAO=zn.scopeVAO=nn.vao,!zn.drawVAO&&mn.program&&!Tn&&Pe.angle_instanced_arrays&&nn.static.elements){var Hn=!0;if(Rt=mn.program.attributes.map(function(rr){return rr=Yt.static[rr],Hn=Hn&&!!rr,rr}),Hn&&0<Rt.length){var Qn=Lt.getVAO(Lt.createVAO({attributes:Rt,elements:nn.static.elements}));zn.drawVAO=new j(null,null,null,function(rr,er){return rr.link(Qn)}),zn.useVAO=!0}}return Tn?zn.useVAO=!0:zn.attributes=Mn(Yt),zn.context=function(rr){var er=rr.static,or=rr.dynamic,ir={};return Object.keys(er).forEach(function(gr){var Tr=er[gr];ir[gr]=G(function(Ur,Sr){return typeof Tr=="number"||typeof Tr=="boolean"?""+Tr:Ur.link(Tr)})}),Object.keys(or).forEach(function(gr){var Tr=or[gr];ir[gr]=V(Tr,function(Ur,Sr){return Ur.invoke(Sr,Tr)})}),ir}(bn),zn}function xn(Rt,Yt,rn){var bn=Rt.shared.context,ln=Rt.scope();Object.keys(rn).forEach(function(kn){Yt.save(bn,"."+kn);var Tn=rn[kn].append(Rt,Yt);Array.isArray(Tn)?ln(bn,".",kn,"=[",Tn.join(),"];"):ln(bn,".",kn,"=",Tn,";")}),Yt(ln)}function dn(Rt,Yt,rn,bn){var ln,kn=(hn=Rt.shared).gl,Tn=hn.framebuffer;tn&&(ln=Yt.def(hn.extensions,".webgl_draw_buffers"));var hn=(nn=Rt.constants).drawBuffer,nn=nn.backBuffer;Rt=rn?rn.append(Rt,Yt):Yt.def(Tn,".next"),bn||Yt("if(",Rt,"!==",Tn,".cur){"),Yt("if(",Rt,"){",kn,".bindFramebuffer(",36160,",",Rt,".framebuffer);"),tn&&Yt(ln,".drawBuffersWEBGL(",hn,"[",Rt,".colorAttachments.length]);"),Yt("}else{",kn,".bindFramebuffer(",36160,",null);"),tn&&Yt(ln,".drawBuffersWEBGL(",nn,");"),Yt("}",Tn,".cur=",Rt,";"),bn||Yt("}")}function gn(Rt,Yt,rn){var bn=Rt.shared,ln=bn.gl,kn=Rt.current,Tn=Rt.next,hn=bn.current,nn=bn.next,fn=Rt.cond(hn,".dirty");jn.forEach(function(mn){var zn,Gn;if(!((mn=Nt(mn))in rn.state))if(mn in Tn){zn=Tn[mn],Gn=kn[mn];var Hn=x(_n[mn].length,function(Qn){return fn.def(zn,"[",Qn,"]")});fn(Rt.cond(Hn.map(function(Qn,rr){return Qn+"!=="+Gn+"["+rr+"]"}).join("||")).then(ln,".",ar[mn],"(",Hn,");",Hn.map(function(Qn,rr){return Gn+"["+rr+"]="+Qn}).join(";"),";"))}else zn=fn.def(nn,".",mn),Hn=Rt.cond(zn,"!==",hn,".",mn),fn(Hn),mn in qn?Hn(Rt.cond(zn).then(ln,".enable(",qn[mn],");").else(ln,".disable(",qn[mn],");"),hn,".",mn,"=",zn,";"):Hn(ln,".",ar[mn],"(",zn,");",hn,".",mn,"=",zn,";")}),Object.keys(rn.state).length===0&&fn(hn,".dirty=false;"),Yt(fn)}function an(Rt,Yt,rn,bn){var ln,kn=Rt.shared,Tn=Rt.current,hn=kn.current,nn=kn.gl;B(Object.keys(rn)).forEach(function(fn){var mn=rn[fn];if(!bn||bn(mn)){var zn=mn.append(Rt,Yt);if(qn[fn]){var Gn=qn[fn];K(mn)?(ln=Rt.link(zn,{stable:!0}),Yt(Rt.cond(ln).then(nn,".enable(",Gn,");").else(nn,".disable(",Gn,");")),Yt(hn,".",fn,"=",ln,";")):(Yt(Rt.cond(zn).then(nn,".enable(",Gn,");").else(nn,".disable(",Gn,");")),Yt(hn,".",fn,"=",zn,";"))}else if(b(zn)){var Hn=Tn[fn];Yt(nn,".",ar[fn],"(",zn,");",zn.map(function(Qn,rr){return Hn+"["+rr+"]="+Qn}).join(";"),";")}else K(mn)?(ln=Rt.link(zn,{stable:!0}),Yt(nn,".",ar[fn],"(",ln,");",hn,".",fn,"=",ln,";")):Yt(nn,".",ar[fn],"(",zn,");",hn,".",fn,"=",zn,";")}})}function sn(Rt,Yt){Gt&&(Rt.instancing=Yt.def(Rt.shared.extensions,".angle_instanced_arrays"))}function On(Rt,Yt,rn,bn,ln){function kn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Tn(rr){rr(fn=Yt.def(),"=",kn(),";"),typeof ln=="string"?rr(Gn,".count+=",ln,";"):rr(Gn,".count++;"),wt&&(bn?rr(mn=Yt.def(),"=",Qn,".getNumPendingQueries();"):rr(Qn,".beginQuery(",Gn,");"))}function hn(rr){rr(Gn,".cpuTime+=",kn(),"-",fn,";"),wt&&(bn?rr(Qn,".pushScopeStats(",mn,",",Qn,".getNumPendingQueries(),",Gn,");"):rr(Qn,".endQuery();"))}function nn(rr){var er=Yt.def(Hn,".profile");Yt(Hn,".profile=",rr,";"),Yt.exit(Hn,".profile=",er,";")}var fn,mn,zn=Rt.shared,Gn=Rt.stats,Hn=zn.current,Qn=zn.timer;if(rn=rn.profile){if(K(rn))return void(rn.enable?(Tn(Yt),hn(Yt.exit),nn("true")):nn("false"));nn(rn=rn.append(Rt,Yt))}else rn=Yt.def(Hn,".profile");Tn(zn=Rt.block()),Yt("if(",rn,"){",zn,"}"),hn(Rt=Rt.block()),Yt.exit("if(",rn,"){",Rt,"}")}function En(Rt,Yt,rn,bn,ln){function kn(hn,nn,fn){function mn(){Yt("if(!",Qn,".buffer){",Gn,".enableVertexAttribArray(",Hn,");}");var ir,gr=fn.type;ir=fn.size?Yt.def(fn.size,"||",nn):nn,Yt("if(",Qn,".type!==",gr,"||",Qn,".size!==",ir,"||",or.map(function(Tr){return Qn+"."+Tr+"!=="+fn[Tr]}).join("||"),"){",Gn,".bindBuffer(",34962,",",rr,".buffer);",Gn,".vertexAttribPointer(",[Hn,ir,gr,fn.normalized,fn.stride,fn.offset],");",Qn,".type=",gr,";",Qn,".size=",ir,";",or.map(function(Tr){return Qn+"."+Tr+"="+fn[Tr]+";"}).join(""),"}"),Gt&&(gr=fn.divisor,Yt("if(",Qn,".divisor!==",gr,"){",Rt.instancing,".vertexAttribDivisorANGLE(",[Hn,gr],");",Qn,".divisor=",gr,";}"))}function zn(){Yt("if(",Qn,".buffer){",Gn,".disableVertexAttribArray(",Hn,");",Qn,".buffer=null;","}if(",St.map(function(ir,gr){return Qn+"."+ir+"!=="+er[gr]}).join("||"),"){",Gn,".vertexAttrib4f(",Hn,",",er,");",St.map(function(ir,gr){return Qn+"."+ir+"="+er[gr]+";"}).join(""),"}")}var Gn=Tn.gl,Hn=Yt.def(hn,".location"),Qn=Yt.def(Tn.attributes,"[",Hn,"]");hn=fn.state;var rr=fn.buffer,er=[fn.x,fn.y,fn.z,fn.w],or=["buffer","normalized","offset","stride"];hn===1?mn():hn===2?zn():(Yt("if(",hn,"===",1,"){"),mn(),Yt("}else{"),zn(),Yt("}"))}var Tn=Rt.shared;bn.forEach(function(hn){var nn,fn=hn.name,mn=rn.attributes[fn];if(mn){if(!ln(mn))return;nn=mn.append(Rt,Yt)}else{if(!ln(Ye))return;var zn=Rt.scopeAttrib(fn);nn={},Object.keys(new Vn).forEach(function(Gn){nn[Gn]=Yt.def(zn,".",Gn)})}kn(Rt.link(hn),function(Gn){switch(Gn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(hn.info.type),nn)})}function Dn(Rt,Yt,rn,bn,ln,kn){for(var Tn,hn=Rt.shared,nn=hn.gl,fn=0;fn<bn.length;++fn){var mn,zn=(Qn=bn[fn]).name,Gn=Qn.info.type,Hn=rn.uniforms[zn],Qn=Rt.link(Qn)+".location";if(Hn){if(!ln(Hn))continue;if(K(Hn)){if(zn=Hn.value,Gn===35678||Gn===35680)Yt(nn,".uniform1i(",Qn,",",(Gn=Rt.link(zn._texture||zn.color[0]._texture))+".bind());"),Yt.exit(Gn,".unbind();");else if(Gn===35674||Gn===35675||Gn===35676)Hn=2,Gn===35675?Hn=3:Gn===35676&&(Hn=4),Yt(nn,".uniformMatrix",Hn,"fv(",Qn,",false,",zn=Rt.global.def("new Float32Array(["+Array.prototype.slice.call(zn)+"])"),");");else{switch(Gn){case 5126:Tn="1f";break;case 35664:Tn="2f";break;case 35665:Tn="3f";break;case 35666:Tn="4f";break;case 35670:case 5124:Tn="1i";break;case 35671:case 35667:Tn="2i";break;case 35672:case 35668:Tn="3i";break;case 35673:case 35669:Tn="4i"}Yt(nn,".uniform",Tn,"(",Qn,",",b(zn)?Array.prototype.slice.call(zn):zn,");")}continue}mn=Hn.append(Rt,Yt)}else{if(!ln(Ye))continue;mn=Yt.def(hn.uniforms,"[",ke.id(zn),"]")}switch(Gn===35678?Yt("if(",mn,"&&",mn,'._reglType==="framebuffer"){',mn,"=",mn,".color[0];","}"):Gn===35680&&Yt("if(",mn,"&&",mn,'._reglType==="framebufferCube"){',mn,"=",mn,".color[0];","}"),zn=1,Gn){case 35678:case 35680:Gn=Yt.def(mn,"._texture"),Yt(nn,".uniform1i(",Qn,",",Gn,".bind());"),Yt.exit(Gn,".unbind();");continue;case 5124:case 35670:Tn="1i";break;case 35667:case 35671:Tn="2i",zn=2;break;case 35668:case 35672:Tn="3i",zn=3;break;case 35669:case 35673:Tn="4i",zn=4;break;case 5126:Tn="1f";break;case 35664:Tn="2f",zn=2;break;case 35665:Tn="3f",zn=3;break;case 35666:Tn="4f",zn=4;break;case 35674:Tn="Matrix2fv";break;case 35675:Tn="Matrix3fv";break;case 35676:Tn="Matrix4fv"}if(Tn.charAt(0)==="M"){Yt(nn,".uniform",Tn,"(",Qn,","),Qn=Math.pow(Gn-35674+2,2);var rr=Rt.global.def("new Float32Array(",Qn,")");Array.isArray(mn)?Yt("false,(",x(Qn,function(or){return rr+"["+or+"]="+mn[or]}),",",rr,")"):Yt("false,(Array.isArray(",mn,")||",mn," instanceof Float32Array)?",mn,":(",x(Qn,function(or){return rr+"["+or+"]="+mn+"["+or+"]"}),",",rr,")"),Yt(");")}else{if(1<zn){Gn=[];var er=[];for(Hn=0;Hn<zn;++Hn)Array.isArray(mn)?er.push(mn[Hn]):er.push(Yt.def(mn+"["+Hn+"]")),kn&&Gn.push(Yt.def());kn&&Yt("if(!",Rt.batchId,"||",Gn.map(function(or,ir){return or+"!=="+er[ir]}).join("||"),"){",Gn.map(function(or,ir){return or+"="+er[ir]+";"}).join("")),Yt(nn,".uniform",Tn,"(",Qn,",",er.join(","),");")}else kn&&(Gn=Yt.def(),Yt("if(!",Rt.batchId,"||",Gn,"!==",mn,"){",Gn,"=",mn,";")),Yt(nn,".uniform",Tn,"(",Qn,",",mn,");");kn&&Yt("}")}}}function Zn(Rt,Yt,rn,bn){function ln(gr){var Tr=Gn[gr];return Tr?Tr.contextDep&&bn.contextDynamic||Tr.propDep?Tr.append(Rt,rn):Tr.append(Rt,Yt):Yt.def(zn,".",gr)}function kn(){function gr(){rn(nn,".drawElementsInstancedANGLE(",[Qn,er,or,rr+"<<(("+or+"-5121)>>1)",hn],");")}function Tr(){rn(nn,".drawArraysInstancedANGLE(",[Qn,rr,er,hn],");")}Hn&&Hn!=="null"?ir?gr():(rn("if(",Hn,"){"),gr(),rn("}else{"),Tr(),rn("}")):Tr()}function Tn(){function gr(){rn(mn+".drawElements("+[Qn,er,or,rr+"<<(("+or+"-5121)>>1)"]+");")}function Tr(){rn(mn+".drawArrays("+[Qn,rr,er]+");")}Hn&&Hn!=="null"?ir?gr():(rn("if(",Hn,"){"),gr(),rn("}else{"),Tr(),rn("}")):Tr()}var hn,nn,fn=Rt.shared,mn=fn.gl,zn=fn.draw,Gn=bn.draw,Hn=function(){var gr=Gn.elements,Tr=Yt;return gr?((gr.contextDep&&bn.contextDynamic||gr.propDep)&&(Tr=rn),gr=gr.append(Rt,Tr),Gn.elementsActive&&Tr("if("+gr+")"+mn+".bindBuffer(34963,"+gr+".buffer.buffer);")):(gr=Tr.def(),Tr(gr,"=",zn,".","elements",";","if(",gr,"){",mn,".bindBuffer(",34963,",",gr,".buffer.buffer);}","else if(",fn.vao,".currentVAO){",gr,"=",Rt.shared.elements+".getElements("+fn.vao,".currentVAO.elements);",In?"":"if("+gr+")"+mn+".bindBuffer(34963,"+gr+".buffer.buffer);","}")),gr}(),Qn=ln("primitive"),rr=ln("offset"),er=function(){var gr=Gn.count,Tr=Yt;return gr?((gr.contextDep&&bn.contextDynamic||gr.propDep)&&(Tr=rn),gr=gr.append(Rt,Tr)):gr=Tr.def(zn,".","count"),gr}();if(typeof er=="number"){if(er===0)return}else rn("if(",er,"){"),rn.exit("}");Gt&&(hn=ln("instances"),nn=Rt.instancing);var or=Hn+".type",ir=Gn.elements&&K(Gn.elements)&&!Gn.vaoActive;Gt&&(typeof hn!="number"||0<=hn)?typeof hn=="string"?(rn("if(",hn,">0){"),kn(),rn("}else if(",hn,"<0){"),Tn(),rn("}")):kn():Tn()}function Fn(Rt,Yt,rn,bn,ln){return ln=(Yt=Xt()).proc("body",ln),Gt&&(Yt.instancing=ln.def(Yt.shared.extensions,".angle_instanced_arrays")),Rt(Yt,ln,rn,bn),Yt.compile().body}function nr(Rt,Yt,rn,bn){sn(Rt,Yt),rn.useVAO?rn.drawVAO?Yt(Rt.shared.vao,".setVAO(",rn.drawVAO.append(Rt,Yt),");"):Yt(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(Yt(Rt.shared.vao,".setVAO(null);"),En(Rt,Yt,rn,bn.attributes,function(){return!0})),Dn(Rt,Yt,rn,bn.uniforms,function(){return!0},!1),Zn(Rt,Yt,Yt,rn)}function $n(Rt,Yt,rn,bn){function ln(){return!0}Rt.batchId="a1",sn(Rt,Yt),En(Rt,Yt,rn,bn.attributes,ln),Dn(Rt,Yt,rn,bn.uniforms,ln,!1),Zn(Rt,Yt,Yt,rn)}function mr(Rt,Yt,rn,bn){function ln(zn){return zn.contextDep&&Tn||zn.propDep}function kn(zn){return!ln(zn)}sn(Rt,Yt);var Tn=rn.contextDep,hn=Yt.def(),nn=Yt.def();Rt.shared.props=nn,Rt.batchId=hn;var fn=Rt.scope(),mn=Rt.scope();Yt(fn.entry,"for(",hn,"=0;",hn,"<","a1",";++",hn,"){",nn,"=","a0","[",hn,"];",mn,"}",fn.exit),rn.needsContext&&xn(Rt,mn,rn.context),rn.needsFramebuffer&&dn(Rt,mn,rn.framebuffer),an(Rt,mn,rn.state,ln),rn.profile&&ln(rn.profile)&&On(Rt,mn,rn,!1,!0),bn?(rn.useVAO?rn.drawVAO?ln(rn.drawVAO)?mn(Rt.shared.vao,".setVAO(",rn.drawVAO.append(Rt,mn),");"):fn(Rt.shared.vao,".setVAO(",rn.drawVAO.append(Rt,fn),");"):fn(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(fn(Rt.shared.vao,".setVAO(null);"),En(Rt,fn,rn,bn.attributes,kn),En(Rt,mn,rn,bn.attributes,ln)),Dn(Rt,fn,rn,bn.uniforms,kn,!1),Dn(Rt,mn,rn,bn.uniforms,ln,!0),Zn(Rt,fn,mn,rn)):(Yt=Rt.global.def("{}"),bn=rn.shader.progVar.append(Rt,mn),nn=mn.def(bn,".id"),fn=mn.def(Yt,"[",nn,"]"),mn(Rt.shared.gl,".useProgram(",bn,".program);","if(!",fn,"){",fn,"=",Yt,"[",nn,"]=",Rt.link(function(zn){return Fn($n,Rt,rn,zn,2)}),"(",bn,");}",fn,".call(this,a0[",hn,"],",hn,");"))}function dr(Rt,Yt){function rn(hn){var nn=Yt.shader[hn];nn&&(nn=nn.append(Rt,bn),isNaN(nn)?bn.set(ln.shader,"."+hn,nn):bn.set(ln.shader,"."+hn,Rt.link(nn,{stable:!0})))}var bn=Rt.proc("scope",3);Rt.batchId="a2";var ln=Rt.shared,kn=ln.current;if(xn(Rt,bn,Yt.context),Yt.framebuffer&&Yt.framebuffer.append(Rt,bn),B(Object.keys(Yt.state)).forEach(function(hn){var nn=Yt.state[hn],fn=nn.append(Rt,bn);b(fn)?fn.forEach(function(mn,zn){isNaN(mn)?bn.set(Rt.next[hn],"["+zn+"]",mn):bn.set(Rt.next[hn],"["+zn+"]",Rt.link(mn,{stable:!0}))}):K(nn)?bn.set(ln.next,"."+hn,Rt.link(fn,{stable:!0})):bn.set(ln.next,"."+hn,fn)}),On(Rt,bn,Yt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(hn){var nn=Yt.draw[hn];nn&&(nn=nn.append(Rt,bn),isNaN(nn)?bn.set(ln.draw,"."+hn,nn):bn.set(ln.draw,"."+hn,Rt.link(nn),{stable:!0}))}),Object.keys(Yt.uniforms).forEach(function(hn){var nn=Yt.uniforms[hn].append(Rt,bn);Array.isArray(nn)&&(nn="["+nn.map(function(fn){return isNaN(fn)?fn:Rt.link(fn,{stable:!0})})+"]"),bn.set(ln.uniforms,"["+Rt.link(ke.id(hn),{stable:!0})+"]",nn)}),Object.keys(Yt.attributes).forEach(function(hn){var nn=Yt.attributes[hn].append(Rt,bn),fn=Rt.scopeAttrib(hn);Object.keys(new Vn).forEach(function(mn){bn.set(fn,"."+mn,nn[mn])})}),Yt.scopeVAO){var Tn=Yt.scopeVAO.append(Rt,bn);isNaN(Tn)?bn.set(ln.vao,".targetVAO",Tn):bn.set(ln.vao,".targetVAO",Rt.link(Tn,{stable:!0}))}rn("vert"),rn("frag"),0<Object.keys(Yt.state).length&&(bn(kn,".dirty=true;"),bn.exit(kn,".dirty=true;")),bn("a1(",Rt.shared.context,",a0,",Rt.batchId,");")}function Yn(Rt,Yt,rn){var bn=Yt.static[rn];if(bn&&function(mn){if(typeof mn=="object"&&!b(mn)){for(var zn=Object.keys(mn),Gn=0;Gn<zn.length;++Gn)if(re.isDynamic(mn[zn[Gn]]))return!0;return!1}}(bn)){var ln=Rt.global,kn=Object.keys(bn),Tn=!1,hn=!1,nn=!1,fn=Rt.global.def("{}");kn.forEach(function(mn){var zn=bn[mn];if(re.isDynamic(zn))typeof zn=="function"&&(zn=bn[mn]=re.unbox(zn)),mn=V(zn,null),Tn=Tn||mn.thisDep,nn=nn||mn.propDep,hn=hn||mn.contextDep;else{switch(ln(fn,".",mn,"="),typeof zn){case"number":ln(zn);break;case"string":ln('"',zn,'"');break;case"object":Array.isArray(zn)&&ln("[",zn.join(),"]");break;default:ln(Rt.link(zn))}ln(";")}}),Yt.dynamic[rn]=new re.DynamicVariable(4,{thisDep:Tn,contextDep:hn,propDep:nn,ref:fn,append:function(mn,zn){kn.forEach(function(Gn){var Hn=bn[Gn];re.isDynamic(Hn)&&(Hn=mn.invoke(zn,Hn),zn(fn,".",Gn,"=",Hn,";"))})}}),delete Yt.static[rn]}}var Vn=Lt.Record,ur={add:32774,subtract:32778,"reverse subtract":32779};Pe.ext_blend_minmax&&(ur.min=32775,ur.max=32776);var Gt=Pe.angle_instanced_arrays,tn=Pe.webgl_draw_buffers,In=Pe.oes_vertex_array_object,_n={dirty:!0,profile:It.profile},Sn={},jn=[],qn={},ar={};Dt("dither",3024),Dt("blend.enable",3042),qt("blend.color","blendColor",[0,0,0,0]),qt("blend.equation","blendEquationSeparate",[32774,32774]),qt("blend.func","blendFuncSeparate",[1,0,1,0]),Dt("depth.enable",2929,!0),qt("depth.func","depthFunc",513),qt("depth.range","depthRange",[0,1]),qt("depth.mask","depthMask",!0),qt("colorMask","colorMask",[!0,!0,!0,!0]),Dt("cull.enable",2884),qt("cull.face","cullFace",1029),qt("frontFace","frontFace",2305),qt("lineWidth","lineWidth",1),Dt("polygonOffset.enable",32823),qt("polygonOffset.offset","polygonOffset",[0,0]),Dt("sample.alpha",32926),Dt("sample.enable",32928),qt("sample.coverage","sampleCoverage",[1,!1]),Dt("stencil.enable",2960),qt("stencil.mask","stencilMask",-1),qt("stencil.func","stencilFunc",[519,0,-1]),qt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),qt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Dt("scissor.enable",3089),qt("scissor.box","scissor",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]),qt("viewport","viewport",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]);var cr={gl:Be,context:kt,strings:ke,next:Sn,current:_n,draw:mt,elements:nt,buffer:Xe,shader:Mt,attributes:Lt.state,vao:Lt,uniforms:Ct,framebuffer:ct,extensions:Pe,timer:wt,isBufferArgs:N},$t={primTypes:oe,compareFuncs:Ut,blendFuncs:zt,blendEquations:ur,stencilOps:Pt,glTypes:xe,orientationType:Ze};tn&&($t.backBuffer=[1029],$t.drawBuffer=x(qe.maxDrawbuffers,function(Rt){return Rt===0?[0]:x(Rt,function(Yt){return 36064+Yt})}));var An=0;return{next:Sn,current:_n,procs:function(){var Rt=Xt(),Yt=Rt.proc("poll"),rn=Rt.proc("refresh"),bn=Rt.block();Yt(bn),rn(bn);var ln,kn=(nn=Rt.shared).gl,Tn=nn.next,hn=nn.current;bn(hn,".dirty=false;"),dn(Rt,Yt),dn(Rt,rn,null,!0),Gt&&(ln=Rt.link(Gt)),Pe.oes_vertex_array_object&&rn(Rt.link(Pe.oes_vertex_array_object),".bindVertexArrayOES(null);");var nn=rn.def(nn.attributes),fn=rn.def(0),mn=Rt.cond(fn,".buffer");mn.then(kn,".enableVertexAttribArray(i);",kn,".bindBuffer(",34962,",",fn,".buffer.buffer);",kn,".vertexAttribPointer(i,",fn,".size,",fn,".type,",fn,".normalized,",fn,".stride,",fn,".offset);").else(kn,".disableVertexAttribArray(i);",kn,".vertexAttrib4f(i,",fn,".x,",fn,".y,",fn,".z,",fn,".w);",fn,".buffer=null;");var zn=Rt.link(qe.maxAttributes,{stable:!0});return rn("for(var i=0;i<",zn,";++i){",fn,"=",nn,"[i];",mn,"}"),Gt&&rn("for(var i=0;i<",zn,";++i){",ln,".vertexAttribDivisorANGLE(i,",nn,"[i].divisor);","}"),rn(Rt.shared.vao,".currentVAO=null;",Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"),Object.keys(qn).forEach(function(Gn){var Hn=qn[Gn],Qn=bn.def(Tn,".",Gn),rr=Rt.block();rr("if(",Qn,"){",kn,".enable(",Hn,")}else{",kn,".disable(",Hn,")}",hn,".",Gn,"=",Qn,";"),rn(rr),Yt("if(",Qn,"!==",hn,".",Gn,"){",rr,"}")}),Object.keys(ar).forEach(function(Gn){var Hn,Qn,rr=ar[Gn],er=_n[Gn],or=Rt.block();or(kn,".",rr,"("),b(er)?(rr=er.length,Hn=Rt.global.def(Tn,".",Gn),Qn=Rt.global.def(hn,".",Gn),or(x(rr,function(ir){return Hn+"["+ir+"]"}),");",x(rr,function(ir){return Qn+"["+ir+"]="+Hn+"["+ir+"];"}).join("")),Yt("if(",x(rr,function(ir){return Hn+"["+ir+"]!=="+Qn+"["+ir+"]"}).join("||"),"){",or,"}")):(Hn=bn.def(Tn,".",Gn),Qn=bn.def(hn,".",Gn),or(Hn,");",hn,".",Gn,"=",Hn,";"),Yt("if(",Hn,"!==",Qn,"){",or,"}")),rn(or)}),Rt.compile()}(),compile:function(Rt,Yt,rn,bn,ln){var kn=Xt();kn.stats=kn.link(ln),Object.keys(Yt.static).forEach(function(hn){Yn(kn,Yt,hn)}),Et.forEach(function(hn){Yn(kn,Rt,hn)});var Tn=Un(Rt,Yt,rn,bn);return Tn.shader.program&&(Tn.shader.program.attributes.sort(function(hn,nn){return hn.name<nn.name?-1:1}),Tn.shader.program.uniforms.sort(function(hn,nn){return hn.name<nn.name?-1:1})),function(hn,nn){var fn=hn.proc("draw",1);sn(hn,fn),xn(hn,fn,nn.context),dn(hn,fn,nn.framebuffer),gn(hn,fn,nn),an(hn,fn,nn.state),On(hn,fn,nn,!1,!0);var mn=nn.shader.progVar.append(hn,fn);if(fn(hn.shared.gl,".useProgram(",mn,".program);"),nn.shader.program)nr(hn,fn,nn,nn.shader.program);else{fn(hn.shared.vao,".setVAO(null);");var zn=hn.global.def("{}"),Gn=fn.def(mn,".id"),Hn=fn.def(zn,"[",Gn,"]");fn(hn.cond(Hn).then(Hn,".call(this,a0);").else(Hn,"=",zn,"[",Gn,"]=",hn.link(function(Qn){return Fn(nr,hn,nn,Qn,1)}),"(",mn,");",Hn,".call(this,a0);"))}0<Object.keys(nn.state).length&&fn(hn.shared.current,".dirty=true;"),hn.shared.vao&&fn(hn.shared.vao,".setVAO(null);")}(kn,Tn),dr(kn,Tn),function(hn,nn){function fn(er){return er.contextDep&&zn||er.propDep}var mn=hn.proc("batch",2);hn.batchId="0",sn(hn,mn);var zn=!1,Gn=!0;Object.keys(nn.context).forEach(function(er){zn=zn||nn.context[er].propDep}),zn||(xn(hn,mn,nn.context),Gn=!1);var Hn=!1;if((Qn=nn.framebuffer)?(Qn.propDep?zn=Hn=!0:Qn.contextDep&&zn&&(Hn=!0),Hn||dn(hn,mn,Qn)):dn(hn,mn,null),nn.state.viewport&&nn.state.viewport.propDep&&(zn=!0),gn(hn,mn,nn),an(hn,mn,nn.state,function(er){return!fn(er)}),nn.profile&&fn(nn.profile)||On(hn,mn,nn,!1,"a1"),nn.contextDep=zn,nn.needsContext=Gn,nn.needsFramebuffer=Hn,(Gn=nn.shader.progVar).contextDep&&zn||Gn.propDep)mr(hn,mn,nn,null);else if(Gn=Gn.append(hn,mn),mn(hn.shared.gl,".useProgram(",Gn,".program);"),nn.shader.program)mr(hn,mn,nn,nn.shader.program);else{mn(hn.shared.vao,".setVAO(null);");var Qn=hn.global.def("{}"),rr=(Hn=mn.def(Gn,".id"),mn.def(Qn,"[",Hn,"]"));mn(hn.cond(rr).then(rr,".call(this,a0,a1);").else(rr,"=",Qn,"[",Hn,"]=",hn.link(function(er){return Fn(mr,hn,nn,er,2)}),"(",Gn,");",rr,".call(this,a0,a1);"))}0<Object.keys(nn.state).length&&mn(hn.shared.current,".dirty=true;"),hn.shared.vao&&mn(hn.shared.vao,".setVAO(null);")}(kn,Tn),X(kn.compile(),{destroy:function(){Tn.shader.program.destroy()}})}}}function J(Be,ke){for(var Pe=0;Pe<Be.length;++Pe)if(Be[Pe]===ke)return Pe;return-1}var X=function(Be,ke){for(var Pe=Object.keys(ke),qe=0;qe<Pe.length;++qe)Be[Pe[qe]]=ke[Pe[qe]];return Be},ee=0,re={DynamicVariable:R,define:function(Be,ke){return new R(Be,A(ke+""))},isDynamic:function(Be){return typeof Be=="function"&&!Be._reglType||Be instanceof R},unbox:function Be(ke,Pe){return typeof ke=="function"?new R(0,ke):typeof ke=="number"||typeof ke=="boolean"?new R(5,ke):Array.isArray(ke)?new R(6,ke.map(function(qe,Xe){return Be(qe)})):ke instanceof R?ke:void 0},accessor:A},ie={next:typeof requestAnimationFrame=="function"?function(Be){return requestAnimationFrame(Be)}:function(Be){return setTimeout(Be,16)},cancel:typeof cancelAnimationFrame=="function"?function(Be){return cancelAnimationFrame(Be)}:clearTimeout},se=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},fe=s();fe.zero=s();var ye=function(Be,ke){var Pe=1;ke.ext_texture_filter_anisotropic&&(Pe=Be.getParameter(34047));var qe=1,Xe=1;ke.webgl_draw_buffers&&(qe=Be.getParameter(34852),Xe=Be.getParameter(36063));var nt=!!ke.oes_texture_float;if(nt){nt=Be.createTexture(),Be.bindTexture(3553,nt),Be.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var ut=Be.createFramebuffer();if(Be.bindFramebuffer(36160,ut),Be.framebufferTexture2D(36160,36064,3553,nt,0),Be.bindTexture(3553,null),Be.checkFramebufferStatus(36160)!==36053)nt=!1;else{Be.viewport(0,0,1,1),Be.clearColor(1,0,0,1),Be.clear(16384);var ct=fe.allocType(5126,4);Be.readPixels(0,0,1,1,6408,5126,ct),Be.getError()?nt=!1:(Be.deleteFramebuffer(ut),Be.deleteTexture(nt),nt=ct[0]===1),fe.freeType(ct)}}return ct=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ct=Be.createTexture(),ut=fe.allocType(5121,36),Be.activeTexture(33984),Be.bindTexture(34067,ct),Be.texImage2D(34069,0,6408,3,3,0,6408,5121,ut),fe.freeType(ut),Be.bindTexture(34067,null),Be.deleteTexture(ct),ct=!Be.getError()),{colorBits:[Be.getParameter(3410),Be.getParameter(3411),Be.getParameter(3412),Be.getParameter(3413)],depthBits:Be.getParameter(3414),stencilBits:Be.getParameter(3415),subpixelBits:Be.getParameter(3408),extensions:Object.keys(ke).filter(function(Ct){return!!ke[Ct]}),maxAnisotropic:Pe,maxDrawbuffers:qe,maxColorAttachments:Xe,pointSizeDims:Be.getParameter(33901),lineWidthDims:Be.getParameter(33902),maxViewportDims:Be.getParameter(3386),maxCombinedTextureUnits:Be.getParameter(35661),maxCubeMapSize:Be.getParameter(34076),maxRenderbufferSize:Be.getParameter(34024),maxTextureUnits:Be.getParameter(34930),maxTextureSize:Be.getParameter(3379),maxAttributes:Be.getParameter(34921),maxVertexUniforms:Be.getParameter(36347),maxVertexTextureUnits:Be.getParameter(35660),maxVaryingVectors:Be.getParameter(36348),maxFragmentUniforms:Be.getParameter(36349),glsl:Be.getParameter(35724),renderer:Be.getParameter(7937),vendor:Be.getParameter(7936),version:Be.getParameter(7938),readFloat:nt,npotTextureCube:ct}},ge=function(Be){return Be instanceof Uint8Array||Be instanceof Uint16Array||Be instanceof Uint32Array||Be instanceof Int8Array||Be instanceof Int16Array||Be instanceof Int32Array||Be instanceof Float32Array||Be instanceof Float64Array||Be instanceof Uint8ClampedArray},he=function(Be){return Object.keys(Be).map(function(ke){return Be[ke]})},ve={shape:function(Be){for(var ke=[];Be.length;Be=Be[0])ke.push(Be.length);return ke},flatten:function(Be,ke,Pe,qe){var Xe=1;if(ke.length)for(var nt=0;nt<ke.length;++nt)Xe*=ke[nt];else Xe=0;switch(Pe=qe||fe.allocType(Pe,Xe),ke.length){case 0:break;case 1:for(qe=ke[0],ke=0;ke<qe;++ke)Pe[ke]=Be[ke];break;case 2:for(qe=ke[0],ke=ke[1],nt=Xe=0;nt<qe;++nt)for(var ut=Be[nt],ct=0;ct<ke;++ct)Pe[Xe++]=ut[ct];break;case 3:o(Be,ke[0],ke[1],ke[2],Pe,0);break;default:r(Be,ke,0,Pe,0)}return Pe}},Ie={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},xe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ae={dynamic:35048,stream:35040,static:35044},Se=ve.flatten,Te=ve.shape,Q=[];Q[5120]=1,Q[5122]=2,Q[5124]=4,Q[5121]=1,Q[5123]=2,Q[5125]=4,Q[5126]=4;var oe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ce=new Float32Array(1),me=new Uint32Array(ce.buffer),Me=[9984,9986,9985,9987],Re=[0,6409,6410,6407,6408],Ce={};Ce[6409]=Ce[6406]=Ce[6402]=1,Ce[34041]=Ce[6410]=2,Ce[6407]=Ce[35904]=3,Ce[6408]=Ce[35906]=4;var ze=v("HTMLCanvasElement"),le=v("OffscreenCanvas"),de=v("CanvasRenderingContext2D"),be=v("ImageBitmap"),Fe=v("HTMLImageElement"),Ve=v("HTMLVideoElement"),He=Object.keys(Ie).concat([ze,le,de,be,Fe,Ve]),rt=[];rt[5121]=1,rt[5126]=4,rt[36193]=2,rt[5123]=2,rt[5125]=4;var tt=[];tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[34041]=4,tt[33776]=.5,tt[33777]=.5,tt[33778]=1,tt[33779]=1,tt[35986]=.5,tt[35987]=1,tt[34798]=1,tt[35840]=.5,tt[35841]=.25,tt[35842]=.5,tt[35843]=.25,tt[36196]=.5;var ot=[];ot[32854]=2,ot[32855]=2,ot[36194]=2,ot[33189]=2,ot[36168]=1,ot[34041]=4,ot[35907]=4,ot[34836]=16,ot[34842]=8,ot[34843]=6;var ht=function(Be,ke,Pe,qe,Xe){function nt(mt){this.id=Lt++,this.refCount=1,this.renderbuffer=mt,this.format=32854,this.height=this.width=0,Xe.profile&&(this.stats={size:0})}function ut(mt){var kt=mt.renderbuffer;Be.bindRenderbuffer(36161,null),Be.deleteRenderbuffer(kt),mt.renderbuffer=null,mt.refCount=0,delete Mt[mt.id],qe.renderbufferCount--}var ct={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};ke.ext_srgb&&(ct.srgba=35907),ke.ext_color_buffer_half_float&&(ct.rgba16f=34842,ct.rgb16f=34843),ke.webgl_color_buffer_float&&(ct.rgba32f=34836);var Ct=[];Object.keys(ct).forEach(function(mt){Ct[ct[mt]]=mt});var Lt=0,Mt={};return nt.prototype.decRef=function(){0>=--this.refCount&&ut(this)},Xe.profile&&(qe.getTotalRenderbufferSize=function(){var mt=0;return Object.keys(Mt).forEach(function(kt){mt+=Mt[kt].stats.size}),mt}),{create:function(mt,kt){function wt(It,Nt){var Dt=0,qt=0,Xt=32854;if(typeof It=="object"&&It?("shape"in It?(Dt=0|(qt=It.shape)[0],qt=0|qt[1]):("radius"in It&&(Dt=qt=0|It.radius),"width"in It&&(Dt=0|It.width),"height"in It&&(qt=0|It.height)),"format"in It&&(Xt=ct[It.format])):typeof It=="number"?(Dt=0|It,qt=typeof Nt=="number"?0|Nt:Dt):It||(Dt=qt=1),Dt!==Ot.width||qt!==Ot.height||Xt!==Ot.format)return wt.width=Ot.width=Dt,wt.height=Ot.height=qt,Ot.format=Xt,Be.bindRenderbuffer(36161,Ot.renderbuffer),Be.renderbufferStorage(36161,Xt,Dt,qt),Xe.profile&&(Ot.stats.size=ot[Ot.format]*Ot.width*Ot.height),wt.format=Ct[Ot.format],wt}var Ot=new nt(Be.createRenderbuffer());return Mt[Ot.id]=Ot,qe.renderbufferCount++,wt(mt,kt),wt.resize=function(It,Nt){var Dt=0|It,qt=0|Nt||Dt;return Dt===Ot.width&&qt===Ot.height||(wt.width=Ot.width=Dt,wt.height=Ot.height=qt,Be.bindRenderbuffer(36161,Ot.renderbuffer),Be.renderbufferStorage(36161,Ot.format,Dt,qt),Xe.profile&&(Ot.stats.size=ot[Ot.format]*Ot.width*Ot.height)),wt},wt._reglType="renderbuffer",wt._renderbuffer=Ot,Xe.profile&&(wt.stats=Ot.stats),wt.destroy=function(){Ot.decRef()},wt},clear:function(){he(Mt).forEach(ut)},restore:function(){he(Mt).forEach(function(mt){mt.renderbuffer=Be.createRenderbuffer(),Be.bindRenderbuffer(36161,mt.renderbuffer),Be.renderbufferStorage(36161,mt.format,mt.width,mt.height)}),Be.bindRenderbuffer(36161,null)}}},_t=[];_t[6408]=4,_t[6407]=3;var dt=[];dt[5121]=1,dt[5126]=4,dt[36193]=2;var bt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],St=["x","y","z","w"],Et="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),zt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ut={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Pt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ze={cw:2304,ccw:2305},Ye=new j(!1,!1,!1,function(){});return function(Be){function ke(){if($n.length===0)cn&&cn.update(),Vn=null;else{Vn=ie.next(ke),Mt();for(var Gt=$n.length-1;0<=Gt;--Gt){var tn=$n[Gt];tn&&tn(Un,null,0)}wt.flush(),cn&&cn.update()}}function Pe(){!Vn&&0<$n.length&&(Vn=ie.next(ke))}function qe(){Vn&&(ie.cancel(ke),Vn=null)}function Xe(Gt){Gt.preventDefault(),qe(),mr.forEach(function(tn){tn()})}function nt(Gt){wt.getError(),It.restore(),sn.restore(),dn.restore(),On.restore(),En.restore(),Dn.restore(),an.restore(),cn&&cn.restore(),Zn.procs.refresh(),Pe(),dr.forEach(function(tn){tn()})}function ut(Gt){function tn(Rt,Yt){var rn={},bn={};return Object.keys(Rt).forEach(function(ln){var kn=Rt[ln];if(re.isDynamic(kn))bn[ln]=re.unbox(kn,ln);else{if(Yt&&Array.isArray(kn)){for(var Tn=0;Tn<kn.length;++Tn)if(re.isDynamic(kn[Tn]))return void(bn[ln]=re.unbox(kn,ln))}rn[ln]=kn}}),{dynamic:bn,static:rn}}var In=tn(Gt.context||{},!0),_n=tn(Gt.uniforms||{},!0),Sn=tn(Gt.attributes||{},!1);Gt=tn(function(Rt){function Yt(bn){if(bn in rn){var ln=rn[bn];delete rn[bn],Object.keys(ln).forEach(function(kn){rn[bn+"."+kn]=ln[kn]})}}var rn=X({},Rt);return delete rn.uniforms,delete rn.attributes,delete rn.context,delete rn.vao,"stencil"in rn&&rn.stencil.op&&(rn.stencil.opBack=rn.stencil.opFront=rn.stencil.op,delete rn.stencil.op),Yt("blend"),Yt("depth"),Yt("cull"),Yt("stencil"),Yt("polygonOffset"),Yt("scissor"),Yt("sample"),"vao"in Rt&&(rn.vao=Rt.vao),rn}(Gt),!1);var jn={gpuTime:0,cpuTime:0,count:0},qn=Zn.compile(Gt,Sn,_n,In,jn),ar=qn.draw,cr=qn.batch,$t=qn.scope,An=[];return X(function(Rt,Yt){var rn;if(typeof Rt=="function")return $t.call(this,null,Rt,0);if(typeof Yt=="function")if(typeof Rt=="number")for(rn=0;rn<Rt;++rn)$t.call(this,null,Yt,rn);else{if(!Array.isArray(Rt))return $t.call(this,Rt,Yt,0);for(rn=0;rn<Rt.length;++rn)$t.call(this,Rt[rn],Yt,rn)}else if(typeof Rt=="number"){if(0<Rt)return cr.call(this,function(bn){for(;An.length<bn;)An.push(null);return An}(0|Rt),0|Rt)}else{if(!Array.isArray(Rt))return ar.call(this,Rt);if(Rt.length)return cr.call(this,Rt,Rt.length)}},{stats:jn,destroy:function(){qn.destroy()}})}function ct(Gt,tn){var In=0;Zn.procs.poll();var _n=tn.color;_n&&(wt.clearColor(+_n[0]||0,+_n[1]||0,+_n[2]||0,+_n[3]||0),In|=16384),"depth"in tn&&(wt.clearDepth(+tn.depth),In|=256),"stencil"in tn&&(wt.clearStencil(0|tn.stencil),In|=1024),wt.clear(In)}function Ct(Gt){return $n.push(Gt),Pe(),{cancel:function(){var tn=J($n,Gt);$n[tn]=function In(){var _n=J($n,In);$n[_n]=$n[$n.length-1],--$n.length,0>=$n.length&&qe()}}}}function Lt(){var Gt=Fn.viewport,tn=Fn.scissor_box;Gt[0]=Gt[1]=tn[0]=tn[1]=0,Un.viewportWidth=Un.framebufferWidth=Un.drawingBufferWidth=Gt[2]=tn[2]=wt.drawingBufferWidth,Un.viewportHeight=Un.framebufferHeight=Un.drawingBufferHeight=Gt[3]=tn[3]=wt.drawingBufferHeight}function Mt(){Un.tick+=1,Un.time=kt(),Lt(),Zn.procs.poll()}function mt(){On.refresh(),Lt(),Zn.procs.refresh(),cn&&cn.update()}function kt(){return(se()-yn)/1e3}if(!(Be=T(Be)))return null;var wt=Be.gl,Ot=wt.getContextAttributes();wt.isContextLost();var It=function(Gt,tn){function In(qn){var ar;qn=qn.toLowerCase();try{ar=_n[qn]=Gt.getExtension(qn)}catch{}return!!ar}for(var _n={},Sn=0;Sn<tn.extensions.length;++Sn){var jn=tn.extensions[Sn];if(!In(jn))return tn.onDestroy(),tn.onDone('"'+jn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return tn.optionalExtensions.forEach(In),{extensions:_n,restore:function(){Object.keys(_n).forEach(function(qn){if(_n[qn]&&!In(qn))throw Error("(regl): error restoring extension "+qn)})}}}(wt,Be);if(!It)return null;var Nt=function(){var Gt={"":0},tn=[""];return{id:function(In){var _n=Gt[In];return _n||(_n=Gt[In]=tn.length,tn.push(In),_n)},str:function(In){return tn[In]}}}(),Dt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},qt=Be.cachedCode||{},Xt=It.extensions,cn=function(Gt,tn){function In(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function _n(An,Rt,Yt){var rn=qn.pop()||new In;rn.startQueryIndex=An,rn.endQueryIndex=Rt,rn.sum=0,rn.stats=Yt,ar.push(rn)}if(!tn.ext_disjoint_timer_query)return null;var Sn=[],jn=[],qn=[],ar=[],cr=[],$t=[];return{beginQuery:function(An){var Rt=Sn.pop()||tn.ext_disjoint_timer_query.createQueryEXT();tn.ext_disjoint_timer_query.beginQueryEXT(35007,Rt),jn.push(Rt),_n(jn.length-1,jn.length,An)},endQuery:function(){tn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:_n,update:function(){var An,Rt;if((An=jn.length)!==0){$t.length=Math.max($t.length,An+1),cr.length=Math.max(cr.length,An+1),cr[0]=0;var Yt=$t[0]=0;for(Rt=An=0;Rt<jn.length;++Rt){var rn=jn[Rt];tn.ext_disjoint_timer_query.getQueryObjectEXT(rn,34919)?(Yt+=tn.ext_disjoint_timer_query.getQueryObjectEXT(rn,34918),Sn.push(rn)):jn[An++]=rn,cr[Rt+1]=Yt,$t[Rt+1]=An}for(jn.length=An,Rt=An=0;Rt<ar.length;++Rt){var bn=(Yt=ar[Rt]).startQueryIndex;rn=Yt.endQueryIndex,Yt.sum+=cr[rn]-cr[bn],bn=$t[bn],(rn=$t[rn])===bn?(Yt.stats.gpuTime+=Yt.sum/1e6,qn.push(Yt)):(Yt.startQueryIndex=bn,Yt.endQueryIndex=rn,ar[An++]=Yt)}ar.length=An}},getNumPendingQueries:function(){return jn.length},clear:function(){Sn.push.apply(Sn,jn);for(var An=0;An<Sn.length;An++)tn.ext_disjoint_timer_query.deleteQueryEXT(Sn[An]);jn.length=0,Sn.length=0},restore:function(){jn.length=0,Sn.length=0}}}(0,Xt),yn=se(),Kt=wt.drawingBufferWidth,Mn=wt.drawingBufferHeight,Un={tick:0,time:0,viewportWidth:Kt,viewportHeight:Mn,framebufferWidth:Kt,framebufferHeight:Mn,drawingBufferWidth:Kt,drawingBufferHeight:Mn,pixelRatio:Be.pixelRatio},xn=(Kt={elements:null,primitive:4,count:-1,offset:0,instances:-1},ye(wt,Xt)),dn=c(wt,Dt,Be,function(Gt){return an.destroyBuffer(Gt)}),gn=h(wt,Xt,dn,Dt),an=L(wt,Xt,xn,Dt,dn,gn,Kt),sn=C(wt,Nt,Dt,Be),On=S(wt,Xt,xn,function(){Zn.procs.poll()},Un,Dt,Be),En=ht(wt,Xt,0,Dt,Be),Dn=_(wt,Xt,xn,On,En,Dt),Zn=W(wt,Nt,Xt,xn,dn,gn,0,Dn,{},an,sn,Kt,Un,cn,qt,Be),Fn=(Nt=P(wt,Dn,Zn.procs.poll,Un),Zn.next),nr=wt.canvas,$n=[],mr=[],dr=[],Yn=[Be.onDestroy],Vn=null;nr&&(nr.addEventListener("webglcontextlost",Xe,!1),nr.addEventListener("webglcontextrestored",nt,!1));var ur=Dn.setFBO=ut({framebuffer:re.define.call(null,1,"framebuffer")});return mt(),Ot=X(ut,{clear:function(Gt){if("framebuffer"in Gt)if(Gt.framebuffer&&Gt.framebuffer_reglType==="framebufferCube")for(var tn=0;6>tn;++tn)ur(X({framebuffer:Gt.framebuffer.faces[tn]},Gt),ct);else ur(Gt,ct);else ct(0,Gt)},prop:re.define.bind(null,1),context:re.define.bind(null,2),this:re.define.bind(null,3),draw:ut({}),buffer:function(Gt){return dn.create(Gt,34962,!1,!1)},elements:function(Gt){return gn.create(Gt,!1)},texture:On.create2D,cube:On.createCube,renderbuffer:En.create,framebuffer:Dn.create,framebufferCube:Dn.createCube,vao:an.createVAO,attributes:Ot,frame:Ct,on:function(Gt,tn){var In;switch(Gt){case"frame":return Ct(tn);case"lost":In=mr;break;case"restore":In=dr;break;case"destroy":In=Yn}return In.push(tn),{cancel:function(){for(var _n=0;_n<In.length;++_n)if(In[_n]===tn){In[_n]=In[In.length-1],In.pop();break}}}},limits:xn,hasExtension:function(Gt){return 0<=xn.extensions.indexOf(Gt.toLowerCase())},read:Nt,destroy:function(){$n.length=0,qe(),nr&&(nr.removeEventListener("webglcontextlost",Xe),nr.removeEventListener("webglcontextrestored",nt)),sn.clear(),Dn.clear(),En.clear(),an.clear(),On.clear(),gn.clear(),dn.clear(),cn&&cn.clear(),Yn.forEach(function(Gt){Gt()})},_gl:wt,_refresh:mt,poll:function(){Mt(),cn&&cn.update()},now:kt,stats:Dt,getCachedCode:function(){return qt},preloadCachedCode:function(Gt){Object.entries(Gt).forEach(function(tn){qt[tn[0]]=tn[1]})}}),Be.onDone(null,Ot),Ot}}()},71665:function($,R,e){var A=e(12856),k=A.Buffer;function l(x,d){for(var s in x)d[s]=x[s]}function T(x,d,s){return k(x,d,s)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?$.exports=A:(l(A,R),R.Buffer=T),T.prototype=Object.create(k.prototype),l(k,T),T.from=function(x,d,s){if(typeof x=="number")throw new TypeError("Argument must not be a number");return k(x,d,s)},T.alloc=function(x,d,s){if(typeof x!="number")throw new TypeError("Argument must be a number");var t=k(x);return d!==void 0?typeof s=="string"?t.fill(d,s):t.fill(d):t.fill(0),t},T.allocUnsafe=function(x){if(typeof x!="number")throw new TypeError("Argument must be a number");return k(x)},T.allocUnsafeSlow=function(x){if(typeof x!="number")throw new TypeError("Argument must be a number");return A.SlowBuffer(x)}},21630:function($,R,e){$.exports=k;var A=e(15398).EventEmitter;function k(){A.call(this)}e(42018)(k,A),k.Readable=e(40410),k.Writable=e(37493),k.Duplex=e(37865),k.Transform=e(74308),k.PassThrough=e(66897),k.finished=e(12726),k.pipeline=e(10168),k.Stream=k,k.prototype.pipe=function(l,T){var x=this;function d(i){l.writable&&l.write(i)===!1&&x.pause&&x.pause()}function s(){x.readable&&x.resume&&x.resume()}x.on("data",d),l.on("drain",s),l._isStdio||T&&T.end===!1||(x.on("end",o),x.on("close",r));var t=!1;function o(){t||(t=!0,l.end())}function r(){t||(t=!0,typeof l.destroy=="function"&&l.destroy())}function n(i){if(a(),A.listenerCount(this,"error")===0)throw i}function a(){x.removeListener("data",d),l.removeListener("drain",s),x.removeListener("end",o),x.removeListener("close",r),x.removeListener("error",n),l.removeListener("error",n),x.removeListener("end",a),x.removeListener("close",a),l.removeListener("close",a)}return x.on("error",n),l.on("error",n),x.on("end",a),x.on("close",a),l.on("close",a),l.emit("pipe",x),l}},74322:function($){var R={};function e(k,l,T){T||(T=Error);var x=function(d){var s,t;function o(r,n,a){return d.call(this,function(i,c,h){return typeof l=="string"?l:l(i,c,h)}(r,n,a))||this}return t=d,(s=o).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,o}(T);x.prototype.name=T.name,x.prototype.code=k,R[k]=x}function A(k,l){if(Array.isArray(k)){var T=k.length;return k=k.map(function(x){return String(x)}),T>2?"one of ".concat(l," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:T===2?"one of ".concat(l," ").concat(k[0]," or ").concat(k[1]):"of ".concat(l," ").concat(k[0])}return"of ".concat(l," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,l){return'The value "'+l+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,l,T){var x,d,s,t,o;if(typeof l=="string"&&(d="not ",l.substr(0,d.length)===d)?(x="must not be",l=l.replace(/^not /,"")):x="must be",function(n,a,i){return(i===void 0||i>n.length)&&(i=n.length),n.substring(i-a.length,i)===a}(k," argument"))s="The ".concat(k," ").concat(x," ").concat(A(l,"type"));else{var r=(typeof o!="number"&&(o=0),o+1>(t=k).length||t.indexOf(".",o)===-1?"argument":"property");s='The "'.concat(k,'" ').concat(r," ").concat(x," ").concat(A(l,"type"))}return s+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$.exports.q=R},37865:function($,R,e){var A=e(90386),k=Object.keys||function(n){var a=[];for(var i in n)a.push(i);return a};$.exports=t;var l=e(40410),T=e(37493);e(42018)(t,l);for(var x=k(T.prototype),d=0;d<x.length;d++){var s=x[d];t.prototype[s]||(t.prototype[s]=T.prototype[s])}function t(n){if(!(this instanceof t))return new t(n);l.call(this,n),T.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}function o(){this._writableState.ended||A.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},66897:function($,R,e){$.exports=k;var A=e(74308);function k(l){if(!(this instanceof k))return new k(l);A.call(this,l)}e(42018)(k,A),k.prototype._transform=function(l,T,x){x(null,l)}},40410:function($,R,e){var A,k=e(90386);$.exports=w,w.ReadableState=m,e(15398).EventEmitter;var l,T=function(G,V){return G.listeners(V).length},x=e(71405),d=e(12856).Buffer,s=e.g.Uint8Array||function(){},t=e(40964);l=t&&t.debuglog?t.debuglog("stream"):function(){};var o,r,n,a=e(31125),i=e(65756),c=e(56306).getHighWaterMark,h=e(74322).q,f=h.ERR_INVALID_ARG_TYPE,b=h.ERR_STREAM_PUSH_AFTER_EOF,v=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(42018)(w,x);var y=i.errorOrDestroy,p=["error","close","destroy","pause","resume"];function m(G,V,W){A=A||e(37865),G=G||{},typeof W!="boolean"&&(W=V instanceof A),this.objectMode=!!G.objectMode,W&&(this.objectMode=this.objectMode||!!G.readableObjectMode),this.highWaterMark=c(this,G,"readableHighWaterMark",W),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=G.emitClose!==!1,this.autoDestroy=!!G.autoDestroy,this.destroyed=!1,this.defaultEncoding=G.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,G.encoding&&(o||(o=e(68019).s),this.decoder=new o(G.encoding),this.encoding=G.encoding)}function w(G){if(A=A||e(37865),!(this instanceof w))return new w(G);var V=this instanceof A;this._readableState=new m(G,this,V),this.readable=!0,G&&(typeof G.read=="function"&&(this._read=G.read),typeof G.destroy=="function"&&(this._destroy=G.destroy)),x.call(this)}function u(G,V,W,J,X){l("readableAddChunk",V);var ee,re=G._readableState;if(V===null)re.reading=!1,function(ie,se){if(l("onEofChunk"),!se.ended){if(se.decoder){var fe=se.decoder.end();fe&&fe.length&&(se.buffer.push(fe),se.length+=se.objectMode?1:fe.length)}se.ended=!0,se.sync?L(ie):(se.needReadable=!1,se.emittedReadable||(se.emittedReadable=!0,C(ie)))}}(G,re);else if(X||(ee=function(ie,se){var fe,ye;return ye=se,d.isBuffer(ye)||ye instanceof s||typeof se=="string"||se===void 0||ie.objectMode||(fe=new f("chunk",["string","Buffer","Uint8Array"],se)),fe}(re,V)),ee)y(G,ee);else if(re.objectMode||V&&V.length>0)if(typeof V=="string"||re.objectMode||Object.getPrototypeOf(V)===d.prototype||(V=function(ie){return d.from(ie)}(V)),J)re.endEmitted?y(G,new g):S(G,re,V,!0);else if(re.ended)y(G,new b);else{if(re.destroyed)return!1;re.reading=!1,re.decoder&&!W?(V=re.decoder.write(V),re.objectMode||V.length!==0?S(G,re,V,!1):P(G,re)):S(G,re,V,!1)}else J||(re.reading=!1,P(G,re));return!re.ended&&(re.length<re.highWaterMark||re.length===0)}function S(G,V,W,J){V.flowing&&V.length===0&&!V.sync?(V.awaitDrain=0,G.emit("data",W)):(V.length+=V.objectMode?1:W.length,J?V.buffer.unshift(W):V.buffer.push(W),V.needReadable&&L(G)),P(G,V)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(G){this._readableState&&(this._readableState.destroyed=G)}}),w.prototype.destroy=i.destroy,w.prototype._undestroy=i.undestroy,w.prototype._destroy=function(G,V){V(G)},w.prototype.push=function(G,V){var W,J=this._readableState;return J.objectMode?W=!0:typeof G=="string"&&((V=V||J.defaultEncoding)!==J.encoding&&(G=d.from(G,V),V=""),W=!0),u(this,G,V,!1,W)},w.prototype.unshift=function(G){return u(this,G,null,!0,!1)},w.prototype.isPaused=function(){return this._readableState.flowing===!1},w.prototype.setEncoding=function(G){o||(o=e(68019).s);var V=new o(G);this._readableState.decoder=V,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,J="";W!==null;)J+=V.write(W.data),W=W.next;return this._readableState.buffer.clear(),J!==""&&this._readableState.buffer.push(J),this._readableState.length=J.length,this};var _=1073741824;function E(G,V){return G<=0||V.length===0&&V.ended?0:V.objectMode?1:G!=G?V.flowing&&V.length?V.buffer.head.data.length:V.length:(G>V.highWaterMark&&(V.highWaterMark=function(W){return W>=_?W=_:(W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++),W}(G)),G<=V.length?G:V.ended?V.length:(V.needReadable=!0,0))}function L(G){var V=G._readableState;l("emitReadable",V.needReadable,V.emittedReadable),V.needReadable=!1,V.emittedReadable||(l("emitReadable",V.flowing),V.emittedReadable=!0,k.nextTick(C,G))}function C(G){var V=G._readableState;l("emitReadable_",V.destroyed,V.length,V.ended),V.destroyed||!V.length&&!V.ended||(G.emit("readable"),V.emittedReadable=!1),V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark,F(G)}function P(G,V){V.readingMore||(V.readingMore=!0,k.nextTick(I,G,V))}function I(G,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&V.length===0);){var W=V.length;if(l("maybeReadMore read 0"),G.read(0),W===V.length)break}V.readingMore=!1}function U(G){var V=G._readableState;V.readableListening=G.listenerCount("readable")>0,V.resumeScheduled&&!V.paused?V.flowing=!0:G.listenerCount("data")>0&&G.resume()}function z(G){l("readable nexttick read 0"),G.read(0)}function H(G,V){l("resume",V.reading),V.reading||G.read(0),V.resumeScheduled=!1,G.emit("resume"),F(G),V.flowing&&!V.reading&&G.read(0)}function F(G){var V=G._readableState;for(l("flow",V.flowing);V.flowing&&G.read()!==null;);}function N(G,V){return V.length===0?null:(V.objectMode?W=V.buffer.shift():!G||G>=V.length?(W=V.decoder?V.buffer.join(""):V.buffer.length===1?V.buffer.first():V.buffer.concat(V.length),V.buffer.clear()):W=V.buffer.consume(G,V.decoder),W);var W}function B(G){var V=G._readableState;l("endReadable",V.endEmitted),V.endEmitted||(V.ended=!0,k.nextTick(j,V,G))}function j(G,V){if(l("endReadableNT",G.endEmitted,G.length),!G.endEmitted&&G.length===0&&(G.endEmitted=!0,V.readable=!1,V.emit("end"),G.autoDestroy)){var W=V._writableState;(!W||W.autoDestroy&&W.finished)&&V.destroy()}}function K(G,V){for(var W=0,J=G.length;W<J;W++)if(G[W]===V)return W;return-1}w.prototype.read=function(G){l("read",G),G=parseInt(G,10);var V=this._readableState,W=G;if(G!==0&&(V.emittedReadable=!1),G===0&&V.needReadable&&((V.highWaterMark!==0?V.length>=V.highWaterMark:V.length>0)||V.ended))return l("read: emitReadable",V.length,V.ended),V.length===0&&V.ended?B(this):L(this),null;if((G=E(G,V))===0&&V.ended)return V.length===0&&B(this),null;var J,X=V.needReadable;return l("need readable",X),(V.length===0||V.length-G<V.highWaterMark)&&l("length less than watermark",X=!0),V.ended||V.reading?l("reading or ended",X=!1):X&&(l("do read"),V.reading=!0,V.sync=!0,V.length===0&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(G=E(W,V))),(J=G>0?N(G,V):null)===null?(V.needReadable=V.length<=V.highWaterMark,G=0):(V.length-=G,V.awaitDrain=0),V.length===0&&(V.ended||(V.needReadable=!0),W!==G&&V.ended&&B(this)),J!==null&&this.emit("data",J),J},w.prototype._read=function(G){y(this,new v("_read()"))},w.prototype.pipe=function(G,V){var W=this,J=this._readableState;switch(J.pipesCount){case 0:J.pipes=G;break;case 1:J.pipes=[J.pipes,G];break;default:J.pipes.push(G)}J.pipesCount+=1,l("pipe count=%d opts=%j",J.pipesCount,V);var X=V&&V.end===!1||G===k.stdout||G===k.stderr?he:ee;function ee(){l("onend"),G.end()}J.endEmitted?k.nextTick(X):W.once("end",X),G.on("unpipe",function ve(Ie,xe){l("onunpipe"),Ie===W&&xe&&xe.hasUnpiped===!1&&(xe.hasUnpiped=!0,l("cleanup"),G.removeListener("close",ye),G.removeListener("finish",ge),G.removeListener("drain",re),G.removeListener("error",fe),G.removeListener("unpipe",ve),W.removeListener("end",ee),W.removeListener("end",he),W.removeListener("data",se),ie=!0,!J.awaitDrain||G._writableState&&!G._writableState.needDrain||re())});var re=function(ve){return function(){var Ie=ve._readableState;l("pipeOnDrain",Ie.awaitDrain),Ie.awaitDrain&&Ie.awaitDrain--,Ie.awaitDrain===0&&T(ve,"data")&&(Ie.flowing=!0,F(ve))}}(W);G.on("drain",re);var ie=!1;function se(ve){l("ondata");var Ie=G.write(ve);l("dest.write",Ie),Ie===!1&&((J.pipesCount===1&&J.pipes===G||J.pipesCount>1&&K(J.pipes,G)!==-1)&&!ie&&(l("false write response, pause",J.awaitDrain),J.awaitDrain++),W.pause())}function fe(ve){l("onerror",ve),he(),G.removeListener("error",fe),T(G,"error")===0&&y(G,ve)}function ye(){G.removeListener("finish",ge),he()}function ge(){l("onfinish"),G.removeListener("close",ye),he()}function he(){l("unpipe"),W.unpipe(G)}return W.on("data",se),function(ve,Ie,xe){if(typeof ve.prependListener=="function")return ve.prependListener(Ie,xe);ve._events&&ve._events.error?Array.isArray(ve._events.error)?ve._events.error.unshift(xe):ve._events.error=[xe,ve._events.error]:ve.on(Ie,xe)}(G,"error",fe),G.once("close",ye),G.once("finish",ge),G.emit("pipe",W),J.flowing||(l("pipe resume"),W.resume()),G},w.prototype.unpipe=function(G){var V=this._readableState,W={hasUnpiped:!1};if(V.pipesCount===0)return this;if(V.pipesCount===1)return G&&G!==V.pipes||(G||(G=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,G&&G.emit("unpipe",this,W)),this;if(!G){var J=V.pipes,X=V.pipesCount;V.pipes=null,V.pipesCount=0,V.flowing=!1;for(var ee=0;ee<X;ee++)J[ee].emit("unpipe",this,{hasUnpiped:!1});return this}var re=K(V.pipes,G);return re===-1||(V.pipes.splice(re,1),V.pipesCount-=1,V.pipesCount===1&&(V.pipes=V.pipes[0]),G.emit("unpipe",this,W)),this},w.prototype.on=function(G,V){var W=x.prototype.on.call(this,G,V),J=this._readableState;return G==="data"?(J.readableListening=this.listenerCount("readable")>0,J.flowing!==!1&&this.resume()):G==="readable"&&(J.endEmitted||J.readableListening||(J.readableListening=J.needReadable=!0,J.flowing=!1,J.emittedReadable=!1,l("on readable",J.length,J.reading),J.length?L(this):J.reading||k.nextTick(z,this))),W},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function(G,V){var W=x.prototype.removeListener.call(this,G,V);return G==="readable"&&k.nextTick(U,this),W},w.prototype.removeAllListeners=function(G){var V=x.prototype.removeAllListeners.apply(this,arguments);return G!=="readable"&&G!==void 0||k.nextTick(U,this),V},w.prototype.resume=function(){var G=this._readableState;return G.flowing||(l("resume"),G.flowing=!G.readableListening,function(V,W){W.resumeScheduled||(W.resumeScheduled=!0,k.nextTick(H,V,W))}(this,G)),G.paused=!1,this},w.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(G){var V=this,W=this._readableState,J=!1;for(var X in G.on("end",function(){if(l("wrapped end"),W.decoder&&!W.ended){var re=W.decoder.end();re&&re.length&&V.push(re)}V.push(null)}),G.on("data",function(re){l("wrapped data"),W.decoder&&(re=W.decoder.write(re)),W.objectMode&&re==null||(W.objectMode||re&&re.length)&&(V.push(re)||(J=!0,G.pause()))}),G)this[X]===void 0&&typeof G[X]=="function"&&(this[X]=function(re){return function(){return G[re].apply(G,arguments)}}(X));for(var ee=0;ee<p.length;ee++)G.on(p[ee],this.emit.bind(this,p[ee]));return this._read=function(re){l("wrapped _read",re),J&&(J=!1,G.resume())},this},typeof Symbol=="function"&&(w.prototype[Symbol.asyncIterator]=function(){return r===void 0&&(r=e(68221)),r(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}}),w._fromList=N,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(w.from=function(G,V){return n===void 0&&(n=e(31748)),n(w,G,V)})},74308:function($,R,e){$.exports=t;var A=e(74322).q,k=A.ERR_METHOD_NOT_IMPLEMENTED,l=A.ERR_MULTIPLE_CALLBACK,T=A.ERR_TRANSFORM_ALREADY_TRANSFORMING,x=A.ERR_TRANSFORM_WITH_LENGTH_0,d=e(37865);function s(n,a){var i=this._transformState;i.transforming=!1;var c=i.writecb;if(c===null)return this.emit("error",new l);i.writechunk=null,i.writecb=null,a!=null&&this.push(a),c(n);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function t(n){if(!(this instanceof t))return new t(n);d.call(this,n),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",o)}function o(){var n=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(a,i){r(n,a,i)})}function r(n,a,i){if(a)return n.emit("error",a);if(i!=null&&n.push(i),n._writableState.length)throw new x;if(n._transformState.transforming)throw new T;return n.push(null)}e(42018)(t,d),t.prototype.push=function(n,a){return this._transformState.needTransform=!1,d.prototype.push.call(this,n,a)},t.prototype._transform=function(n,a,i){i(new k("_transform()"))},t.prototype._write=function(n,a,i){var c=this._transformState;if(c.writecb=i,c.writechunk=n,c.writeencoding=a,!c.transforming){var h=this._readableState;(c.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},t.prototype._read=function(n){var a=this._transformState;a.writechunk===null||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(n,a){d.prototype._destroy.call(this,n,function(i){a(i)})}},37493:function($,R,e){var A,k=e(90386);function l(P){var I=this;this.next=null,this.entry=null,this.finish=function(){(function(U,z,H){var F=U.entry;for(U.entry=null;F;){var N=F.callback;z.pendingcb--,N(void 0),F=F.next}z.corkedRequestsFree.next=U})(I,P)}}$.exports=w,w.WritableState=m;var T,x={deprecate:e(20588)},d=e(71405),s=e(12856).Buffer,t=e.g.Uint8Array||function(){},o=e(65756),r=e(56306).getHighWaterMark,n=e(74322).q,a=n.ERR_INVALID_ARG_TYPE,i=n.ERR_METHOD_NOT_IMPLEMENTED,c=n.ERR_MULTIPLE_CALLBACK,h=n.ERR_STREAM_CANNOT_PIPE,f=n.ERR_STREAM_DESTROYED,b=n.ERR_STREAM_NULL_VALUES,v=n.ERR_STREAM_WRITE_AFTER_END,g=n.ERR_UNKNOWN_ENCODING,y=o.errorOrDestroy;function p(){}function m(P,I,U){A=A||e(37865),P=P||{},typeof U!="boolean"&&(U=I instanceof A),this.objectMode=!!P.objectMode,U&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=r(this,P,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var z=P.decodeStrings===!1;this.decodeStrings=!z,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){(function(F,N){var B=F._writableState,j=B.sync,K=B.writecb;if(typeof K!="function")throw new c;if(function(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0}(B),N)(function(V,W,J,X,ee){--W.pendingcb,J?(k.nextTick(ee,X),k.nextTick(C,V,W),V._writableState.errorEmitted=!0,y(V,X)):(ee(X),V._writableState.errorEmitted=!0,y(V,X),C(V,W))})(F,B,j,N,K);else{var G=E(B)||F.destroyed;G||B.corked||B.bufferProcessing||!B.bufferedRequest||_(F,B),j?k.nextTick(S,F,B,G,K):S(F,B,G,K)}})(I,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function w(P){var I=this instanceof(A=A||e(37865));if(!I&&!T.call(w,this))return new w(P);this._writableState=new m(P,this,I),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),d.call(this)}function u(P,I,U,z,H,F,N){I.writelen=z,I.writecb=N,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new f("write")):U?P._writev(H,I.onwrite):P._write(H,F,I.onwrite),I.sync=!1}function S(P,I,U,z){U||function(H,F){F.length===0&&F.needDrain&&(F.needDrain=!1,H.emit("drain"))}(P,I),I.pendingcb--,z(),C(P,I)}function _(P,I){I.bufferProcessing=!0;var U=I.bufferedRequest;if(P._writev&&U&&U.next){var z=I.bufferedRequestCount,H=new Array(z),F=I.corkedRequestsFree;F.entry=U;for(var N=0,B=!0;U;)H[N]=U,U.isBuf||(B=!1),U=U.next,N+=1;H.allBuffers=B,u(P,I,!0,I.length,H,"",F.finish),I.pendingcb++,I.lastBufferedRequest=null,F.next?(I.corkedRequestsFree=F.next,F.next=null):I.corkedRequestsFree=new l(I),I.bufferedRequestCount=0}else{for(;U;){var j=U.chunk,K=U.encoding,G=U.callback;if(u(P,I,!1,I.objectMode?1:j.length,j,K,G),U=U.next,I.bufferedRequestCount--,I.writing)break}U===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=U,I.bufferProcessing=!1}function E(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function L(P,I){P._final(function(U){I.pendingcb--,U&&y(P,U),I.prefinished=!0,P.emit("prefinish"),C(P,I)})}function C(P,I){var U=E(I);if(U&&(function(H,F){F.prefinished||F.finalCalled||(typeof H._final!="function"||F.destroyed?(F.prefinished=!0,H.emit("prefinish")):(F.pendingcb++,F.finalCalled=!0,k.nextTick(L,H,F)))}(P,I),I.pendingcb===0&&(I.finished=!0,P.emit("finish"),I.autoDestroy))){var z=P._readableState;(!z||z.autoDestroy&&z.endEmitted)&&P.destroy()}return U}e(42018)(w,d),m.prototype.getBuffer=function(){for(var P=this.bufferedRequest,I=[];P;)I.push(P),P=P.next;return I},function(){try{Object.defineProperty(m.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(P){return!!T.call(this,P)||this===w&&P&&P._writableState instanceof m}})):T=function(P){return P instanceof this},w.prototype.pipe=function(){y(this,new h)},w.prototype.write=function(P,I,U){var z,H=this._writableState,F=!1,N=!H.objectMode&&(z=P,s.isBuffer(z)||z instanceof t);return N&&!s.isBuffer(P)&&(P=function(B){return s.from(B)}(P)),typeof I=="function"&&(U=I,I=null),N?I="buffer":I||(I=H.defaultEncoding),typeof U!="function"&&(U=p),H.ending?function(B,j){var K=new v;y(B,K),k.nextTick(j,K)}(this,U):(N||function(B,j,K,G){var V;return K===null?V=new b:typeof K=="string"||j.objectMode||(V=new a("chunk",["string","Buffer"],K)),!V||(y(B,V),k.nextTick(G,V),!1)}(this,H,P,U))&&(H.pendingcb++,F=function(B,j,K,G,V,W){if(!K){var J=function(ie,se,fe){return ie.objectMode||ie.decodeStrings===!1||typeof se!="string"||(se=s.from(se,fe)),se}(j,G,V);G!==J&&(K=!0,V="buffer",G=J)}var X=j.objectMode?1:G.length;j.length+=X;var ee=j.length<j.highWaterMark;if(ee||(j.needDrain=!0),j.writing||j.corked){var re=j.lastBufferedRequest;j.lastBufferedRequest={chunk:G,encoding:V,isBuf:K,callback:W,next:null},re?re.next=j.lastBufferedRequest:j.bufferedRequest=j.lastBufferedRequest,j.bufferedRequestCount+=1}else u(B,j,!1,X,G,V,W);return ee}(this,H,N,P,I,U)),F},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||_(this,P))},w.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new g(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(P,I,U){U(new i("_write()"))},w.prototype._writev=null,w.prototype.end=function(P,I,U){var z=this._writableState;return typeof P=="function"?(U=P,P=null,I=null):typeof I=="function"&&(U=I,I=null),P!=null&&this.write(P,I),z.corked&&(z.corked=1,this.uncork()),z.ending||function(H,F,N){F.ending=!0,C(H,F),N&&(F.finished?k.nextTick(N):H.once("finish",N)),F.ended=!0,H.writable=!1}(this,z,U),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),w.prototype.destroy=o.destroy,w.prototype._undestroy=o.undestroy,w.prototype._destroy=function(P,I){I(P)}},68221:function($,R,e){var A,k=e(90386);function l(b,v,g){return v in b?Object.defineProperty(b,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):b[v]=g,b}var T=e(12726),x=Symbol("lastResolve"),d=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),o=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function a(b,v){return{value:b,done:v}}function i(b){var v=b[x];if(v!==null){var g=b[n].read();g!==null&&(b[o]=null,b[x]=null,b[d]=null,v(a(g,!1)))}}function c(b){k.nextTick(i,b)}var h=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((l(A={get stream(){return this[n]},next:function(){var b=this,v=this[s];if(v!==null)return Promise.reject(v);if(this[t])return Promise.resolve(a(void 0,!0));if(this[n].destroyed)return new Promise(function(m,w){k.nextTick(function(){b[s]?w(b[s]):m(a(void 0,!0))})});var g,y=this[o];if(y)g=new Promise(function(m,w){return function(u,S){m.then(function(){w[t]?u(a(void 0,!0)):w[r](u,S)},S)}}(y,this));else{var p=this[n].read();if(p!==null)return Promise.resolve(a(p,!1));g=new Promise(this[r])}return this[o]=g,g}},Symbol.asyncIterator,function(){return this}),l(A,"return",function(){var b=this;return new Promise(function(v,g){b[n].destroy(null,function(y){y?g(y):v(a(void 0,!0))})})}),A),h);$.exports=function(b){var v,g=Object.create(f,(l(v={},n,{value:b,writable:!0}),l(v,x,{value:null,writable:!0}),l(v,d,{value:null,writable:!0}),l(v,s,{value:null,writable:!0}),l(v,t,{value:b._readableState.endEmitted,writable:!0}),l(v,r,{value:function(y,p){var m=g[n].read();m?(g[o]=null,g[x]=null,g[d]=null,y(a(m,!1))):(g[x]=y,g[d]=p)},writable:!0}),v));return g[o]=null,T(b,function(y){if(y&&y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var p=g[d];return p!==null&&(g[o]=null,g[x]=null,g[d]=null,p(y)),void(g[s]=y)}var m=g[x];m!==null&&(g[o]=null,g[x]=null,g[d]=null,m(a(void 0,!0))),g[t]=!0}),b.on("readable",c.bind(null,g)),g}},31125:function($,R,e){function A(s,t){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),o.push.apply(o,r)}return o}function k(s,t,o){return t in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o,s}function l(s,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}var T=e(12856).Buffer,x=e(69862).inspect,d=x&&x.custom||"inspect";$.exports=function(){function s(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,o;return t=s,o=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(this.length===0)return T.alloc(0);for(var n,a,i,c=T.allocUnsafe(r>>>0),h=this.head,f=0;h;)n=h.data,a=c,i=f,T.prototype.copy.call(n,a,i),f+=h.data.length,h=h.next;return c}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):a=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,i=n.data;for(r-=i.length;n=n.next;){var c=n.data,h=r>c.length?c.length:r;if(h===c.length?i+=c:i+=c.slice(0,r),(r-=h)==0){h===c.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=c.slice(h));break}++a}return this.length-=a,i}},{key:"_getBuffer",value:function(r){var n=T.allocUnsafe(r),a=this.head,i=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var c=a.data,h=r>c.length?c.length:r;if(c.copy(n,n.length-r,0,h),(r-=h)==0){h===c.length?(++i,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=c.slice(h));break}++i}return this.length-=i,n}},{key:d,value:function(r,n){return x(this,function(a){for(var i=1;i<arguments.length;i++){var c=arguments[i]!=null?arguments[i]:{};i%2?A(Object(c),!0).forEach(function(h){k(a,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):A(Object(c)).forEach(function(h){Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(c,h))})}return a}({},n,{depth:0,customInspect:!1}))}}],o&&l(t.prototype,o),s}()},65756:function($,R,e){var A=e(90386);function k(x,d){T(x,d),l(x)}function l(x){x._writableState&&!x._writableState.emitClose||x._readableState&&!x._readableState.emitClose||x.emit("close")}function T(x,d){x.emit("error",d)}$.exports={destroy:function(x,d){var s=this,t=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return t||o?(d?d(x):x&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,A.nextTick(T,this,x)):A.nextTick(T,this,x)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(x||null,function(r){!d&&r?s._writableState?s._writableState.errorEmitted?A.nextTick(l,s):(s._writableState.errorEmitted=!0,A.nextTick(k,s,r)):A.nextTick(k,s,r):d?(A.nextTick(l,s),d(r)):A.nextTick(l,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(x,d){var s=x._readableState,t=x._writableState;s&&s.autoDestroy||t&&t.autoDestroy?x.destroy(d):x.emit("error",d)}}},12726:function($,R,e){var A=e(74322).q.ERR_STREAM_PREMATURE_CLOSE;function k(){}$.exports=function l(T,x,d){if(typeof x=="function")return l(T,null,x);x||(x={}),d=function(b){var v=!1;return function(){if(!v){v=!0;for(var g=arguments.length,y=new Array(g),p=0;p<g;p++)y[p]=arguments[p];b.apply(this,y)}}}(d||k);var s=x.readable||x.readable!==!1&&T.readable,t=x.writable||x.writable!==!1&&T.writable,o=function(){T.writable||n()},r=T._writableState&&T._writableState.finished,n=function(){t=!1,r=!0,s||d.call(T)},a=T._readableState&&T._readableState.endEmitted,i=function(){s=!1,a=!0,t||d.call(T)},c=function(b){d.call(T,b)},h=function(){var b;return s&&!a?(T._readableState&&T._readableState.ended||(b=new A),d.call(T,b)):t&&!r?(T._writableState&&T._writableState.ended||(b=new A),d.call(T,b)):void 0},f=function(){T.req.on("finish",n)};return function(b){return b.setHeader&&typeof b.abort=="function"}(T)?(T.on("complete",n),T.on("abort",h),T.req?f():T.on("request",f)):t&&!T._writableState&&(T.on("end",o),T.on("close",o)),T.on("end",i),T.on("finish",n),x.error!==!1&&T.on("error",c),T.on("close",h),function(){T.removeListener("complete",n),T.removeListener("abort",h),T.removeListener("request",f),T.req&&T.req.removeListener("finish",n),T.removeListener("end",o),T.removeListener("close",o),T.removeListener("finish",n),T.removeListener("end",i),T.removeListener("error",c),T.removeListener("close",h)}}},31748:function($){$.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function($,R,e){var A,k=e(74322).q,l=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function x(r){if(r)throw r}function d(r,n,a,i){i=function(f){var b=!1;return function(){b||(b=!0,f.apply(void 0,arguments))}}(i);var c=!1;r.on("close",function(){c=!0}),A===void 0&&(A=e(12726)),A(r,{readable:n,writable:a},function(f){if(f)return i(f);c=!0,i()});var h=!1;return function(f){if(!c&&!h)return h=!0,function(b){return b.setHeader&&typeof b.abort=="function"}(r)?r.abort():typeof r.destroy=="function"?r.destroy():void i(f||new T("pipe"))}}function s(r){r()}function t(r,n){return r.pipe(n)}function o(r){return r.length?typeof r[r.length-1]!="function"?x:r.pop():x}$.exports=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i,c=o(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new l("streams");var h=n.map(function(f,b){var v=b<n.length-1;return d(f,v,b>0,function(g){i||(i=g),g&&h.forEach(s),v||(h.forEach(s),c(i))})});return n.reduce(t)}},56306:function($,R,e){var A=e(74322).q.ERR_INVALID_OPT_VALUE;$.exports={getHighWaterMark:function(k,l,T,x){var d=function(s,t,o){return s.highWaterMark!=null?s.highWaterMark:t?s[o]:null}(l,x,T);if(d!=null){if(!isFinite(d)||Math.floor(d)!==d||d<0)throw new A(x?T:"highWaterMark",d);return Math.floor(d)}return k.objectMode?16:16384}}},71405:function($,R,e){$.exports=e(15398).EventEmitter},68019:function($,R,e){var A=e(71665).Buffer,k=A.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(a){var i;switch(this.encoding=function(c){var h=function(f){if(!f)return"utf8";for(var b;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(b)return;f=(""+f).toLowerCase(),b=!0}}(c);if(typeof h!="string"&&(A.isEncoding===k||!k(c)))throw new Error("Unknown encoding: "+c);return h||c}(a),this.encoding){case"utf16le":this.text=d,this.end=s,i=4;break;case"utf8":this.fillLast=x,i=4;break;case"base64":this.text=t,this.end=o,i=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=A.allocUnsafe(i)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function x(a){var i=this.lastTotal-this.lastNeed,c=function(h,f,b){if((192&f[0])!=128)return h.lastNeed=0,"�";if(h.lastNeed>1&&f.length>1){if((192&f[1])!=128)return h.lastNeed=1,"�";if(h.lastNeed>2&&f.length>2&&(192&f[2])!=128)return h.lastNeed=2,"�"}}(this,a);return c!==void 0?c:this.lastNeed<=a.length?(a.copy(this.lastChar,i,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,i,0,a.length),void(this.lastNeed-=a.length))}function d(a,i){if((a.length-i)%2==0){var c=a.toString("utf16le",i);if(c){var h=c.charCodeAt(c.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",i,a.length-1)}function s(a){var i=a&&a.length?this.write(a):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return i+this.lastChar.toString("utf16le",0,c)}return i}function t(a,i){var c=(a.length-i)%3;return c===0?a.toString("base64",i):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",i,a.length-c))}function o(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+this.lastChar.toString("base64",0,3-this.lastNeed):i}function r(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}R.s=l,l.prototype.write=function(a){if(a.length===0)return"";var i,c;if(this.lastNeed){if((i=this.fillLast(a))===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?i?i+this.text(a,c):this.text(a,c):i||""},l.prototype.end=function(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+"�":i},l.prototype.text=function(a,i){var c=function(f,b,v){var g=b.length-1;if(g<v)return 0;var y=T(b[g]);return y>=0?(y>0&&(f.lastNeed=y-1),y):--g<v||y===-2?0:(y=T(b[g]))>=0?(y>0&&(f.lastNeed=y-2),y):--g<v||y===-2?0:(y=T(b[g]))>=0?(y>0&&(y===2?y=0:f.lastNeed=y-3),y):0}(this,a,i);if(!this.lastNeed)return a.toString("utf8",i);this.lastTotal=c;var h=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,h),a.toString("utf8",i,h)},l.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},90715:function($,R,e){var A=e(32791),k=e(41633)("stream-parser");function l(a){k("initializing parser stream"),a._parserBytesLeft=0,a._parserBuffers=[],a._parserBuffered=0,a._parserState=-1,a._parserCallback=null,typeof a.push=="function"&&(a._parserOutput=a.push.bind(a)),a._parserInit=!0}function T(a,i){A(!this._parserCallback,'there is already a "callback" set!'),A(isFinite(a)&&a>0,'can only buffer a finite number of bytes > 0, got "'+a+'"'),this._parserInit||l(this),k("buffering %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=0}function x(a,i){A(!this._parserCallback,'there is already a "callback" set!'),A(a>0,'can only skip > 0 bytes, got "'+a+'"'),this._parserInit||l(this),k("skipping %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=1}function d(a,i){A(!this._parserCallback,'There is already a "callback" set!'),A(a>0,'can only pass through > 0 bytes, got "'+a+'"'),this._parserInit||l(this),k("passing through %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=2}function s(a,i,c){this._parserInit||l(this),k("write(%o bytes)",a.length),typeof i=="function"&&(c=i),r(this,a,null,c)}function t(a,i,c){this._parserInit||l(this),k("transform(%o bytes)",a.length),typeof i!="function"&&(i=this._parserOutput),r(this,a,i,c)}function o(a,i,c,h){if(a._parserBytesLeft-=i.length,k("%o bytes left for stream piece",a._parserBytesLeft),a._parserState===0?(a._parserBuffers.push(i),a._parserBuffered+=i.length):a._parserState===2&&c(i),a._parserBytesLeft!==0)return h;var f=a._parserCallback;if(f&&a._parserState===0&&a._parserBuffers.length>1&&(i=Buffer.concat(a._parserBuffers,a._parserBuffered)),a._parserState!==0&&(i=null),a._parserCallback=null,a._parserBuffered=0,a._parserState=-1,a._parserBuffers.splice(0),f){var b=[];i&&b.push(i),c&&b.push(c);var v=f.length>b.length;v&&b.push(n(h));var g=f.apply(a,b);if(!v||h===g)return h}}$.exports=function(a){var i=a&&typeof a._transform=="function",c=a&&typeof a._write=="function";if(!i&&!c)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),a._bytes=T,a._skipBytes=x,i&&(a._passthrough=d),i?a._transform=t:a._write=s};var r=n(function a(i,c,h,f){return i._parserBytesLeft<=0?f(new Error("got data but not currently parsing anything")):c.length<=i._parserBytesLeft?function(){return o(i,c,h,f)}:function(){var b=c.slice(0,i._parserBytesLeft);return o(i,b,h,function(v){return v?f(v):c.length>b.length?function(){return a(i,c.slice(b.length),h,f)}:void 0})}});function n(a){return function(){for(var i=a.apply(this,arguments);typeof i=="function";)i=i();return i}}},41633:function($,R,e){var A=e(90386);function k(){var l;try{l=R.storage.debug}catch{}return!l&&A!==void 0&&"env"in A&&(l=A.env.DEBUG),l}(R=$.exports=e(74469)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},R.formatArgs=function(l){var T=this.useColors;if(l[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+l[0]+(T?"%c ":" ")+"+"+R.humanize(this.diff),T){var x="color: "+this.color;l.splice(1,0,x,"color: inherit");var d=0,s=0;l[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(d++,t==="%c"&&(s=d))}),l.splice(s,0,x)}},R.save=function(l){try{l==null?R.storage.removeItem("debug"):R.storage.debug=l}catch{}},R.load=k,R.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},R.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),R.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],R.formatters.j=function(l){try{return JSON.stringify(l)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},R.enable(k())},74469:function($,R,e){var A;function k(l){function T(){if(T.enabled){var x=T,d=+new Date,s=d-(A||d);x.diff=s,x.prev=A,x.curr=d,A=d;for(var t=new Array(arguments.length),o=0;o<t.length;o++)t[o]=arguments[o];t[0]=R.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(a,i){if(a==="%%")return a;r++;var c=R.formatters[i];if(typeof c=="function"){var h=t[r];a=c.call(x,h),t.splice(r,1),r--}return a}),R.formatArgs.call(x,t);var n=T.log||R.log||console.log.bind(console);n.apply(x,t)}}return T.namespace=l,T.enabled=R.enabled(l),T.useColors=R.useColors(),T.color=function(x){var d,s=0;for(d in x)s=(s<<5)-s+x.charCodeAt(d),s|=0;return R.colors[Math.abs(s)%R.colors.length]}(l),typeof R.init=="function"&&R.init(T),T}(R=$.exports=k.debug=k.default=k).coerce=function(l){return l instanceof Error?l.stack||l.message:l},R.disable=function(){R.enable("")},R.enable=function(l){R.save(l),R.names=[],R.skips=[];for(var T=(typeof l=="string"?l:"").split(/[\s,]+/),x=T.length,d=0;d<x;d++)T[d]&&((l=T[d].replace(/\*/g,".*?"))[0]==="-"?R.skips.push(new RegExp("^"+l.substr(1)+"$")):R.names.push(new RegExp("^"+l+"$")))},R.enabled=function(l){var T,x;for(T=0,x=R.skips.length;T<x;T++)if(R.skips[T].test(l))return!1;for(T=0,x=R.names.length;T<x;T++)if(R.names[T].test(l))return!0;return!1},R.humanize=e(11375),R.names=[],R.skips=[],R.formatters={}},11375:function($){var R=1e3,e=60*R,A=60*e,k=24*A;function l(T,x,d){if(!(T<x))return T<1.5*x?Math.floor(T/x)+" "+d:Math.ceil(T/x)+" "+d+"s"}$.exports=function(T,x){x=x||{};var d,s=typeof T;if(s==="string"&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(o){var r=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*k;case"hours":case"hour":case"hrs":case"hr":case"h":return r*A;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if(s==="number"&&isNaN(T)===!1)return x.long?l(d=T,k,"day")||l(d,A,"hour")||l(d,e,"minute")||l(d,R,"second")||d+" ms":function(t){return t>=k?Math.round(t/k)+"d":t>=A?Math.round(t/A)+"h":t>=e?Math.round(t/e)+"m":t>=R?Math.round(t/R)+"s":t+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},99011:function($,R,e){var A=e(88641);$.exports=function(k,l,T){if(k==null)throw Error("First argument should be a string");if(l==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","“”","«»"]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(n){return n.length===1&&(n+=n),n}));var x=A.parse(k,{flat:!0,brackets:T.ignore}),d=x[0].split(l);if(T.escape){for(var s=[],t=0;t<d.length;t++){var o=d[t],r=d[t+1];o[o.length-1]==="\\"&&o[o.length-2]!=="\\"?(s.push(o+l+r),t++):s.push(o)}d=s}for(t=0;t<d.length;t++)x[0]=d[t],d[t]=A.stringify(x,{flat:!0});return d}},68664:function($){$.exports=function(R){for(var e=R.length,A=new Array(e),k=new Array(e),l=new Array(e),T=new Array(e),x=new Array(e),d=new Array(e),s=0;s<e;++s)A[s]=-1,k[s]=0,l[s]=!1,T[s]=0,x[s]=-1,d[s]=[];var t,o=0,r=[],n=[];function a(h){var f=[h],b=[h];for(A[h]=k[h]=o,l[h]=!0,o+=1;b.length>0;){h=b[b.length-1];var v=R[h];if(T[h]<v.length){for(var g=T[h];g<v.length;++g){var y=v[g];if(A[y]<0){A[y]=k[y]=o,l[y]=!0,o+=1,f.push(y),b.push(y);break}l[y]&&(k[h]=0|Math.min(k[h],k[y])),x[y]>=0&&d[h].push(x[y])}T[h]=g}else{if(k[h]===A[h]){var p=[],m=[],w=0;for(g=f.length-1;g>=0;--g){var u=f[g];if(l[u]=!1,p.push(u),m.push(d[u]),w+=d[u].length,x[u]=r.length,u===h){f.length=g;break}}r.push(p);var S=new Array(w);for(g=0;g<m.length;g++)for(var _=0;_<m[g].length;_++)S[--w]=m[g][_];n.push(S)}b.pop()}}}for(s=0;s<e;++s)A[s]<0&&a(s);for(s=0;s<n.length;s++){var i=n[s];if(i.length!==0){i.sort(function(h,f){return h-f}),t=[i[0]];for(var c=1;c<i.length;c++)i[c]!==i[c-1]&&t.push(i[c]);n[s]=t}}return{components:r,adjacencyList:n}}},7095:function($,R,e){e.r(R);var A=2*Math.PI,k=function(x,d,s,t,o,r,n){var a=x.x,i=x.y;return{x:t*(a*=d)-o*(i*=s)+r,y:o*a+t*i+n}},l=function(x,d){var s=d===1.5707963267948966?.551915024494:d===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(d/4),t=Math.cos(x),o=Math.sin(x),r=Math.cos(x+d),n=Math.sin(x+d);return[{x:t-o*s,y:o+t*s},{x:r+n*s,y:n-r*s},{x:r,y:n}]},T=function(x,d,s,t){var o=x*s+d*t;return o>1&&(o=1),o<-1&&(o=-1),(x*t-d*s<0?-1:1)*Math.acos(o)};R.default=function(x){var d=x.px,s=x.py,t=x.cx,o=x.cy,r=x.rx,n=x.ry,a=x.xAxisRotation,i=a===void 0?0:a,c=x.largeArcFlag,h=c===void 0?0:c,f=x.sweepFlag,b=f===void 0?0:f,v=[];if(r===0||n===0)return[];var g=Math.sin(i*A/360),y=Math.cos(i*A/360),p=y*(d-t)/2+g*(s-o)/2,m=-g*(d-t)/2+y*(s-o)/2;if(p===0&&m===0)return[];r=Math.abs(r),n=Math.abs(n);var w=Math.pow(p,2)/Math.pow(r,2)+Math.pow(m,2)/Math.pow(n,2);w>1&&(r*=Math.sqrt(w),n*=Math.sqrt(w));var u=function(z,H,F,N,B,j,K,G,V,W,J,X){var ee=Math.pow(B,2),re=Math.pow(j,2),ie=Math.pow(J,2),se=Math.pow(X,2),fe=ee*re-ee*se-re*ie;fe<0&&(fe=0),fe/=ee*se+re*ie;var ye=(fe=Math.sqrt(fe)*(K===G?-1:1))*B/j*X,ge=fe*-j/B*J,he=W*ye-V*ge+(z+F)/2,ve=V*ye+W*ge+(H+N)/2,Ie=(J-ye)/B,xe=(X-ge)/j,Ae=(-J-ye)/B,Se=(-X-ge)/j,Te=T(1,0,Ie,xe),Q=T(Ie,xe,Ae,Se);return G===0&&Q>0&&(Q-=A),G===1&&Q<0&&(Q+=A),[he,ve,Te,Q]}(d,s,t,o,r,n,h,b,g,y,p,m),S=function(z,H){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return function(F,N){var B=[],j=!0,K=!1,G=void 0;try{for(var V,W=F[Symbol.iterator]();!(j=(V=W.next()).done)&&(B.push(V.value),!N||B.length!==N);j=!0);}catch(J){K=!0,G=J}finally{try{!j&&W.return&&W.return()}finally{if(K)throw G}}return B}(z,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(u,4),_=S[0],E=S[1],L=S[2],C=S[3],P=Math.abs(C)/(A/4);Math.abs(1-P)<1e-7&&(P=1);var I=Math.max(Math.ceil(P),1);C/=I;for(var U=0;U<I;U++)v.push(l(L,C)),L+=C;return v.map(function(z){var H=k(z[0],r,n,y,g,_,E),F=H.x,N=H.y,B=k(z[1],r,n,y,g,_,E),j=B.x,K=B.y,G=k(z[2],r,n,y,g,_,E);return{x1:F,y1:N,x2:j,y2:K,x:G.x,y:G.y}})}},1750:function($,R,e){var A=e(95616),k=e(65185),l=e(29988),T=e(89546),x=e(32791);$.exports=function(d){if(Array.isArray(d)&&d.length===1&&typeof d[0]=="string"&&(d=d[0]),typeof d=="string"&&(x(T(d),"String is not an SVG path."),d=A(d)),x(Array.isArray(d),"Argument should be a string or an array of path segments."),d=k(d),!(d=l(d)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,o=d.length;t<o;t++)for(var r=d[t].slice(1),n=0;n<r.length;n+=2)r[n+0]<s[0]&&(s[0]=r[n+0]),r[n+1]<s[1]&&(s[1]=r[n+1]),r[n+0]>s[2]&&(s[2]=r[n+0]),r[n+1]>s[3]&&(s[3]=r[n+1]);return s}},29988:function($,R,e){$.exports=function(T){for(var x,d=[],s=0,t=0,o=0,r=0,n=null,a=null,i=0,c=0,h=0,f=T.length;h<f;h++){var b=T[h],v=b[0];switch(v){case"M":o=b[1],r=b[2];break;case"A":var g=A({px:i,py:c,cx:b[6],cy:b[7],rx:b[1],ry:b[2],xAxisRotation:b[3],largeArcFlag:b[4],sweepFlag:b[5]});if(!g.length)continue;for(var y,p=0;p<g.length;p++)b=["C",(y=g[p]).x1,y.y1,y.x2,y.y2,y.x,y.y],p<g.length-1&&d.push(b);break;case"S":var m=i,w=c;x!="C"&&x!="S"||(m+=m-s,w+=w-t),b=["C",m,w,b[1],b[2],b[3],b[4]];break;case"T":x=="Q"||x=="T"?(n=2*i-n,a=2*c-a):(n=i,a=c),b=l(i,c,n,a,b[1],b[2]);break;case"Q":n=b[1],a=b[2],b=l(i,c,b[1],b[2],b[3],b[4]);break;case"L":b=k(i,c,b[1],b[2]);break;case"H":b=k(i,c,b[1],c);break;case"V":b=k(i,c,i,b[1]);break;case"Z":b=k(i,c,o,r)}x=v,i=b[b.length-2],c=b[b.length-1],b.length>4?(s=b[b.length-4],t=b[b.length-3]):(s=i,t=c),d.push(b)}return d};var A=e(7095);function k(T,x,d,s){return["C",T,x,d,s,d,s]}function l(T,x,d,s,t,o){return["C",T/3+.6666666666666666*d,x/3+.6666666666666666*s,t/3+.6666666666666666*d,o/3+.6666666666666666*s,t,o]}},82019:function($,R,e){var A,k=e(1750),l=e(95616),T=e(31457),x=e(89546),d=e(44781),s=document.createElement("canvas"),t=s.getContext("2d");$.exports=function(o,r){if(!x(o))throw Error("Argument should be valid svg path string");var n,a;r||(r={}),r.shape?(n=r.shape[0],a=r.shape[1]):(n=s.width=r.w||r.width||200,a=s.height=r.h||r.height||200);var i=Math.min(n,a),c=r.stroke||0,h=r.viewbox||r.viewBox||k(o),f=[n/(h[2]-h[0]),a/(h[3]-h[1])],b=Math.min(f[0]||0,f[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,n,a),t.fillStyle="white",c&&(typeof c!="number"&&(c=1),t.strokeStyle=c>0?"white":"black",t.lineWidth=Math.abs(c)),t.translate(.5*n,.5*a),t.scale(b,b),function(){if(A!=null)return A;var y=document.createElement("canvas").getContext("2d");if(y.canvas.width=y.canvas.height=1,!window.Path2D)return A=!1;var p=new Path2D("M0,0h1v1h-1v-1Z");y.fillStyle="black",y.fill(p);var m=y.getImageData(0,0,1,1);return A=m&&m.data&&m.data[3]===255}()){var v=new Path2D(o);t.fill(v),c&&t.stroke(v)}else{var g=l(o);T(t,g),t.fill(),c&&t.stroke()}return t.setTransform(1,0,0,1,0,0),d(t,{cutoff:r.cutoff!=null?r.cutoff:.5,radius:r.radius!=null?r.radius:.5*i})}},84267:function($,R,e){var A;(function(k){var l=/^\s+/,T=/\s+$/,x=0,d=k.round,s=k.min,t=k.max,o=k.random;function r(J,X){if(X=X||{},(J=J||"")instanceof r)return J;if(!(this instanceof r))return new r(J,X);var ee=function(re){var ie,se,fe,ye={r:0,g:0,b:0},ge=1,he=null,ve=null,Ie=null,xe=!1,Ae=!1;return typeof re=="string"&&(re=function(Se){Se=Se.replace(l,"").replace(T,"").toLowerCase();var Te,Q=!1;if(L[Se])Se=L[Se],Q=!0;else if(Se=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Te=V.rgb.exec(Se))?{r:Te[1],g:Te[2],b:Te[3]}:(Te=V.rgba.exec(Se))?{r:Te[1],g:Te[2],b:Te[3],a:Te[4]}:(Te=V.hsl.exec(Se))?{h:Te[1],s:Te[2],l:Te[3]}:(Te=V.hsla.exec(Se))?{h:Te[1],s:Te[2],l:Te[3],a:Te[4]}:(Te=V.hsv.exec(Se))?{h:Te[1],s:Te[2],v:Te[3]}:(Te=V.hsva.exec(Se))?{h:Te[1],s:Te[2],v:Te[3],a:Te[4]}:(Te=V.hex8.exec(Se))?{r:z(Te[1]),g:z(Te[2]),b:z(Te[3]),a:B(Te[4]),format:Q?"name":"hex8"}:(Te=V.hex6.exec(Se))?{r:z(Te[1]),g:z(Te[2]),b:z(Te[3]),format:Q?"name":"hex"}:(Te=V.hex4.exec(Se))?{r:z(Te[1]+""+Te[1]),g:z(Te[2]+""+Te[2]),b:z(Te[3]+""+Te[3]),a:B(Te[4]+""+Te[4]),format:Q?"name":"hex8"}:!!(Te=V.hex3.exec(Se))&&{r:z(Te[1]+""+Te[1]),g:z(Te[2]+""+Te[2]),b:z(Te[3]+""+Te[3]),format:Q?"name":"hex"}}(re)),typeof re=="object"&&(W(re.r)&&W(re.g)&&W(re.b)?(ie=re.r,se=re.g,fe=re.b,ye={r:255*I(ie,255),g:255*I(se,255),b:255*I(fe,255)},xe=!0,Ae=String(re.r).substr(-1)==="%"?"prgb":"rgb"):W(re.h)&&W(re.s)&&W(re.v)?(he=F(re.s),ve=F(re.v),ye=function(Se,Te,Q){Se=6*I(Se,360),Te=I(Te,100),Q=I(Q,100);var oe=k.floor(Se),ce=Se-oe,me=Q*(1-Te),Me=Q*(1-ce*Te),Re=Q*(1-(1-ce)*Te),Ce=oe%6;return{r:255*[Q,Me,me,me,Re,Q][Ce],g:255*[Re,Q,Q,Me,me,me][Ce],b:255*[me,me,Re,Q,Q,Me][Ce]}}(re.h,he,ve),xe=!0,Ae="hsv"):W(re.h)&&W(re.s)&&W(re.l)&&(he=F(re.s),Ie=F(re.l),ye=function(Se,Te,Q){var oe,ce,me;function Me(ze,le,de){return de<0&&(de+=1),de>1&&(de-=1),de<1/6?ze+6*(le-ze)*de:de<.5?le:de<2/3?ze+(le-ze)*(2/3-de)*6:ze}if(Se=I(Se,360),Te=I(Te,100),Q=I(Q,100),Te===0)oe=ce=me=Q;else{var Re=Q<.5?Q*(1+Te):Q+Te-Q*Te,Ce=2*Q-Re;oe=Me(Ce,Re,Se+1/3),ce=Me(Ce,Re,Se),me=Me(Ce,Re,Se-1/3)}return{r:255*oe,g:255*ce,b:255*me}}(re.h,he,Ie),xe=!0,Ae="hsl"),re.hasOwnProperty("a")&&(ge=re.a)),ge=P(ge),{ok:xe,format:re.format||Ae,r:s(255,t(ye.r,0)),g:s(255,t(ye.g,0)),b:s(255,t(ye.b,0)),a:ge}}(J);this._originalInput=J,this._r=ee.r,this._g=ee.g,this._b=ee.b,this._a=ee.a,this._roundA=d(100*this._a)/100,this._format=X.format||ee.format,this._gradientType=X.gradientType,this._r<1&&(this._r=d(this._r)),this._g<1&&(this._g=d(this._g)),this._b<1&&(this._b=d(this._b)),this._ok=ee.ok,this._tc_id=x++}function n(J,X,ee){J=I(J,255),X=I(X,255),ee=I(ee,255);var re,ie,se=t(J,X,ee),fe=s(J,X,ee),ye=(se+fe)/2;if(se==fe)re=ie=0;else{var ge=se-fe;switch(ie=ye>.5?ge/(2-se-fe):ge/(se+fe),se){case J:re=(X-ee)/ge+(X<ee?6:0);break;case X:re=(ee-J)/ge+2;break;case ee:re=(J-X)/ge+4}re/=6}return{h:re,s:ie,l:ye}}function a(J,X,ee){J=I(J,255),X=I(X,255),ee=I(ee,255);var re,ie,se=t(J,X,ee),fe=s(J,X,ee),ye=se,ge=se-fe;if(ie=se===0?0:ge/se,se==fe)re=0;else{switch(se){case J:re=(X-ee)/ge+(X<ee?6:0);break;case X:re=(ee-J)/ge+2;break;case ee:re=(J-X)/ge+4}re/=6}return{h:re,s:ie,v:ye}}function i(J,X,ee,re){var ie=[H(d(J).toString(16)),H(d(X).toString(16)),H(d(ee).toString(16))];return re&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0):ie.join("")}function c(J,X,ee,re){return[H(N(re)),H(d(J).toString(16)),H(d(X).toString(16)),H(d(ee).toString(16))].join("")}function h(J,X){X=X===0?0:X||10;var ee=r(J).toHsl();return ee.s-=X/100,ee.s=U(ee.s),r(ee)}function f(J,X){X=X===0?0:X||10;var ee=r(J).toHsl();return ee.s+=X/100,ee.s=U(ee.s),r(ee)}function b(J){return r(J).desaturate(100)}function v(J,X){X=X===0?0:X||10;var ee=r(J).toHsl();return ee.l+=X/100,ee.l=U(ee.l),r(ee)}function g(J,X){X=X===0?0:X||10;var ee=r(J).toRgb();return ee.r=t(0,s(255,ee.r-d(-X/100*255))),ee.g=t(0,s(255,ee.g-d(-X/100*255))),ee.b=t(0,s(255,ee.b-d(-X/100*255))),r(ee)}function y(J,X){X=X===0?0:X||10;var ee=r(J).toHsl();return ee.l-=X/100,ee.l=U(ee.l),r(ee)}function p(J,X){var ee=r(J).toHsl(),re=(ee.h+X)%360;return ee.h=re<0?360+re:re,r(ee)}function m(J){var X=r(J).toHsl();return X.h=(X.h+180)%360,r(X)}function w(J){var X=r(J).toHsl(),ee=X.h;return[r(J),r({h:(ee+120)%360,s:X.s,l:X.l}),r({h:(ee+240)%360,s:X.s,l:X.l})]}function u(J){var X=r(J).toHsl(),ee=X.h;return[r(J),r({h:(ee+90)%360,s:X.s,l:X.l}),r({h:(ee+180)%360,s:X.s,l:X.l}),r({h:(ee+270)%360,s:X.s,l:X.l})]}function S(J){var X=r(J).toHsl(),ee=X.h;return[r(J),r({h:(ee+72)%360,s:X.s,l:X.l}),r({h:(ee+216)%360,s:X.s,l:X.l})]}function _(J,X,ee){X=X||6,ee=ee||30;var re=r(J).toHsl(),ie=360/ee,se=[r(J)];for(re.h=(re.h-(ie*X>>1)+720)%360;--X;)re.h=(re.h+ie)%360,se.push(r(re));return se}function E(J,X){X=X||6;for(var ee=r(J).toHsv(),re=ee.h,ie=ee.s,se=ee.v,fe=[],ye=1/X;X--;)fe.push(r({h:re,s:ie,v:se})),se=(se+ye)%1;return fe}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var J=this.toRgb();return(299*J.r+587*J.g+114*J.b)/1e3},getLuminance:function(){var J,X,ee,re=this.toRgb();return J=re.r/255,X=re.g/255,ee=re.b/255,.2126*(J<=.03928?J/12.92:k.pow((J+.055)/1.055,2.4))+.7152*(X<=.03928?X/12.92:k.pow((X+.055)/1.055,2.4))+.0722*(ee<=.03928?ee/12.92:k.pow((ee+.055)/1.055,2.4))},setAlpha:function(J){return this._a=P(J),this._roundA=d(100*this._a)/100,this},toHsv:function(){var J=a(this._r,this._g,this._b);return{h:360*J.h,s:J.s,v:J.v,a:this._a}},toHsvString:function(){var J=a(this._r,this._g,this._b),X=d(360*J.h),ee=d(100*J.s),re=d(100*J.v);return this._a==1?"hsv("+X+", "+ee+"%, "+re+"%)":"hsva("+X+", "+ee+"%, "+re+"%, "+this._roundA+")"},toHsl:function(){var J=n(this._r,this._g,this._b);return{h:360*J.h,s:J.s,l:J.l,a:this._a}},toHslString:function(){var J=n(this._r,this._g,this._b),X=d(360*J.h),ee=d(100*J.s),re=d(100*J.l);return this._a==1?"hsl("+X+", "+ee+"%, "+re+"%)":"hsla("+X+", "+ee+"%, "+re+"%, "+this._roundA+")"},toHex:function(J){return i(this._r,this._g,this._b,J)},toHexString:function(J){return"#"+this.toHex(J)},toHex8:function(J){return function(X,ee,re,ie,se){var fe=[H(d(X).toString(16)),H(d(ee).toString(16)),H(d(re).toString(16)),H(N(ie))];return se&&fe[0].charAt(0)==fe[0].charAt(1)&&fe[1].charAt(0)==fe[1].charAt(1)&&fe[2].charAt(0)==fe[2].charAt(1)&&fe[3].charAt(0)==fe[3].charAt(1)?fe[0].charAt(0)+fe[1].charAt(0)+fe[2].charAt(0)+fe[3].charAt(0):fe.join("")}(this._r,this._g,this._b,this._a,J)},toHex8String:function(J){return"#"+this.toHex8(J)},toRgb:function(){return{r:d(this._r),g:d(this._g),b:d(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+d(this._r)+", "+d(this._g)+", "+d(this._b)+")":"rgba("+d(this._r)+", "+d(this._g)+", "+d(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:d(100*I(this._r,255))+"%",g:d(100*I(this._g,255))+"%",b:d(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+d(100*I(this._r,255))+"%, "+d(100*I(this._g,255))+"%, "+d(100*I(this._b,255))+"%)":"rgba("+d(100*I(this._r,255))+"%, "+d(100*I(this._g,255))+"%, "+d(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(C[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(J){var X="#"+c(this._r,this._g,this._b,this._a),ee=X,re=this._gradientType?"GradientType = 1, ":"";if(J){var ie=r(J);ee="#"+c(ie._r,ie._g,ie._b,ie._a)}return"progid:DXImageTransform.Microsoft.gradient("+re+"startColorstr="+X+",endColorstr="+ee+")"},toString:function(J){var X=!!J;J=J||this._format;var ee=!1,re=this._a<1&&this._a>=0;return X||!re||J!=="hex"&&J!=="hex6"&&J!=="hex3"&&J!=="hex4"&&J!=="hex8"&&J!=="name"?(J==="rgb"&&(ee=this.toRgbString()),J==="prgb"&&(ee=this.toPercentageRgbString()),J!=="hex"&&J!=="hex6"||(ee=this.toHexString()),J==="hex3"&&(ee=this.toHexString(!0)),J==="hex4"&&(ee=this.toHex8String(!0)),J==="hex8"&&(ee=this.toHex8String()),J==="name"&&(ee=this.toName()),J==="hsl"&&(ee=this.toHslString()),J==="hsv"&&(ee=this.toHsvString()),ee||this.toHexString()):J==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(J,X){var ee=J.apply(null,[this].concat([].slice.call(X)));return this._r=ee._r,this._g=ee._g,this._b=ee._b,this.setAlpha(ee._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(J,X){return J.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(_,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(u,arguments)}},r.fromRatio=function(J,X){if(typeof J=="object"){var ee={};for(var re in J)J.hasOwnProperty(re)&&(ee[re]=re==="a"?J[re]:F(J[re]));J=ee}return r(J,X)},r.equals=function(J,X){return!(!J||!X)&&r(J).toRgbString()==r(X).toRgbString()},r.random=function(){return r.fromRatio({r:o(),g:o(),b:o()})},r.mix=function(J,X,ee){ee=ee===0?0:ee||50;var re=r(J).toRgb(),ie=r(X).toRgb(),se=ee/100;return r({r:(ie.r-re.r)*se+re.r,g:(ie.g-re.g)*se+re.g,b:(ie.b-re.b)*se+re.b,a:(ie.a-re.a)*se+re.a})},r.readability=function(J,X){var ee=r(J),re=r(X);return(k.max(ee.getLuminance(),re.getLuminance())+.05)/(k.min(ee.getLuminance(),re.getLuminance())+.05)},r.isReadable=function(J,X,ee){var re,ie,se,fe,ye,ge=r.readability(J,X);switch(ie=!1,(se=ee,(fe=((se=se||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&fe!=="AAA"&&(fe="AA"),(ye=(se.size||"small").toLowerCase())!=="small"&&ye!=="large"&&(ye="small"),re={level:fe,size:ye}).level+re.size){case"AAsmall":case"AAAlarge":ie=ge>=4.5;break;case"AAlarge":ie=ge>=3;break;case"AAAsmall":ie=ge>=7}return ie},r.mostReadable=function(J,X,ee){var re,ie,se,fe,ye=null,ge=0;ie=(ee=ee||{}).includeFallbackColors,se=ee.level,fe=ee.size;for(var he=0;he<X.length;he++)(re=r.readability(J,X[he]))>ge&&(ge=re,ye=r(X[he]));return r.isReadable(J,ye,{level:se,size:fe})||!ie?ye:(ee.includeFallbackColors=!1,r.mostReadable(J,["#fff","#000"],ee))};var L=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=r.hexNames=function(J){var X={};for(var ee in J)J.hasOwnProperty(ee)&&(X[J[ee]]=ee);return X}(L);function P(J){return J=parseFloat(J),(isNaN(J)||J<0||J>1)&&(J=1),J}function I(J,X){(function(re){return typeof re=="string"&&re.indexOf(".")!=-1&&parseFloat(re)===1})(J)&&(J="100%");var ee=function(re){return typeof re=="string"&&re.indexOf("%")!=-1}(J);return J=s(X,t(0,parseFloat(J))),ee&&(J=parseInt(J*X,10)/100),k.abs(J-X)<1e-6?1:J%X/parseFloat(X)}function U(J){return s(1,t(0,J))}function z(J){return parseInt(J,16)}function H(J){return J.length==1?"0"+J:""+J}function F(J){return J<=1&&(J=100*J+"%"),J}function N(J){return k.round(255*parseFloat(J)).toString(16)}function B(J){return z(J)/255}var j,K,G,V=(K="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",G="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{CSS_UNIT:new RegExp(j),rgb:new RegExp("rgb"+K),rgba:new RegExp("rgba"+G),hsl:new RegExp("hsl"+K),hsla:new RegExp("hsla"+G),hsv:new RegExp("hsv"+K),hsva:new RegExp("hsva"+G),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(J){return!!V.CSS_UNIT.exec(J)}$.exports?$.exports=r:(A=function(){return r}.call(R,e,R,$))===void 0||($.exports=A)})(Math)},57060:function($){$.exports=e,$.exports.float32=$.exports.float=e,$.exports.fract32=$.exports.fract=function(A,k){if(A.length){if(A instanceof Float32Array)return new Float32Array(A.length);k instanceof Float32Array||(k=e(A));for(var l=0,T=k.length;l<T;l++)k[l]=A[l]-k[l];return k}return e(A-e(A))};var R=new Float32Array(1);function e(A){return A.length?A instanceof Float32Array?A:new Float32Array(A):(R[0]=A,R[0])}},75686:function($,R,e){var A=e(25677);function k(T,x){var d=A(getComputedStyle(T).getPropertyValue(x));return d[0]*l(d[1],T)}function l(T,x){switch(x=x||document.body,T=(T||"px").trim().toLowerCase(),x!==window&&x!==document||(x=document.body),T){case"%":return x.clientHeight/100;case"ch":case"ex":return function(d,s){var t=document.createElement("div");t.style["font-size"]="128"+d,s.appendChild(t);var o=k(t,"font-size")/128;return s.removeChild(t),o}(T,x);case"em":return k(x,"font-size");case"rem":return k(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 37.79527559055118;case"mm":return 3.7795275590551185;case"pt":return 1.3333333333333333;case"pc":return 16}return 1}$.exports=l},96892:function($,R,e){function A(T){return T}function k(T,x){return typeof x=="string"&&(x=T.objects[x]),x.type==="GeometryCollection"?{type:"FeatureCollection",features:x.geometries.map(function(d){return l(T,d)})}:l(T,x)}function l(T,x){var d=x.id,s=x.bbox,t=x.properties==null?{}:x.properties,o=function(r,n){var a=function(g){if(g==null)return A;var y,p,m=g.scale[0],w=g.scale[1],u=g.translate[0],S=g.translate[1];return function(_,E){E||(y=p=0);var L=2,C=_.length,P=new Array(C);for(P[0]=(y+=_[0])*m+u,P[1]=(p+=_[1])*w+S;L<C;)P[L]=_[L],++L;return P}}(r.transform),i=r.arcs;function c(g,y){y.length&&y.pop();for(var p=i[g<0?~g:g],m=0,w=p.length;m<w;++m)y.push(a(p[m],m));g<0&&function(u,S){for(var _,E=u.length,L=E-S;L<--E;)_=u[L],u[L++]=u[E],u[E]=_}(y,w)}function h(g){return a(g)}function f(g){for(var y=[],p=0,m=g.length;p<m;++p)c(g[p],y);return y.length<2&&y.push(y[0]),y}function b(g){for(var y=f(g);y.length<4;)y.push(y[0]);return y}function v(g){return g.map(b)}return function g(y){var p,m=y.type;switch(m){case"GeometryCollection":return{type:m,geometries:y.geometries.map(g)};case"Point":p=h(y.coordinates);break;case"MultiPoint":p=y.coordinates.map(h);break;case"LineString":p=f(y.arcs);break;case"MultiLineString":p=y.arcs.map(f);break;case"Polygon":p=v(y.arcs);break;case"MultiPolygon":p=y.arcs.map(v);break;default:return null}return{type:m,coordinates:p}}(n)}(T,x);return d==null&&s==null?{type:"Feature",properties:t,geometry:o}:s==null?{type:"Feature",id:d,properties:t,geometry:o}:{type:"Feature",id:d,bbox:s,properties:t,geometry:o}}e.d(R,{zL:function(){return k}})},73116:function($,R,e){var A=e(24511);$.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch{return!1}return!A(k)}},69190:function($,R,e){var A=e(24582),k=e(47403),l=e(9234),T=e(6048),x=function(d,s){return d.replace("%v",T(s))};$.exports=function(d,s,t){if(!k(t))throw new TypeError(x(s,d));if(!A(d)){if("default"in t)return t.default;if(t.isOptional)return null}var o=l(t.errorMessage);throw A(o)||(o=s),new TypeError(x(o,d))}},18497:function($){$.exports=function(R){try{return R.toString()}catch{try{return String(R)}catch{return null}}}},6048:function($,R,e){var A=e(18497),k=/[\n\r\u2028\u2029]/g;$.exports=function(l){var T=A(l);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"…"),T=T.replace(k,function(x){switch(x){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function($,R,e){var A=e(24582),k={object:!0,function:!0,undefined:!0};$.exports=function(l){return!!A(l)&&hasOwnProperty.call(k,typeof l)}},82527:function($,R,e){var A=e(69190),k=e(84985);$.exports=function(l){return k(l)?l:A(l,"%v is not a plain function",arguments[1])}},84985:function($,R,e){var A=e(73116),k=/^\s*class[\s{/}]/,l=Function.prototype.toString;$.exports=function(T){return!!A(T)&&!k.test(l.call(T))}},24511:function($,R,e){var A=e(47403);$.exports=function(k){if(!A(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},9234:function($,R,e){var A=e(24582),k=e(47403),l=Object.prototype.toString;$.exports=function(T){if(!A(T))return null;if(k(T)){var x=T.toString;if(typeof x!="function"||x===l)return null}try{return""+T}catch{return null}}},10424:function($,R,e){var A=e(69190),k=e(24582);$.exports=function(l){return k(l)?l:A(l,"Cannot use %v",arguments[1])}},24582:function($){$.exports=function(R){return R!=null}},58404:function($,R,e){var A=e(13547),k=e(12129),l=e(12856).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",x=typeof BigUint64Array<"u",d=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=k([32,0])),s.BIGUINT64||(s.BIGUINT64=k([32,0])),s.BIGINT64||(s.BIGINT64=k([32,0])),s.BUFFER||(s.BUFFER=k([32,0]));var t=s.DATA,o=s.BUFFER;function r(S){if(S){var _=S.length||S.byteLength,E=A.log2(_);t[E].push(S)}}function n(S){S=A.nextPow2(S);var _=A.log2(S),E=t[_];return E.length>0?E.pop():new ArrayBuffer(S)}function a(S){return new Uint8Array(n(S),0,S)}function i(S){return new Uint16Array(n(2*S),0,S)}function c(S){return new Uint32Array(n(4*S),0,S)}function h(S){return new Int8Array(n(S),0,S)}function f(S){return new Int16Array(n(2*S),0,S)}function b(S){return new Int32Array(n(4*S),0,S)}function v(S){return new Float32Array(n(4*S),0,S)}function g(S){return new Float64Array(n(8*S),0,S)}function y(S){return T?new Uint8ClampedArray(n(S),0,S):a(S)}function p(S){return x?new BigUint64Array(n(8*S),0,S):null}function m(S){return d?new BigInt64Array(n(8*S),0,S):null}function w(S){return new DataView(n(S),0,S)}function u(S){S=A.nextPow2(S);var _=A.log2(S),E=o[_];return E.length>0?E.pop():new l(S)}R.free=function(S){if(l.isBuffer(S))o[A.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var _=S.length||S.byteLength,E=0|A.log2(_);t[E].push(S)}},R.freeUint8=R.freeUint16=R.freeUint32=R.freeBigUint64=R.freeInt8=R.freeInt16=R.freeInt32=R.freeBigInt64=R.freeFloat32=R.freeFloat=R.freeFloat64=R.freeDouble=R.freeUint8Clamped=R.freeDataView=function(S){r(S.buffer)},R.freeArrayBuffer=r,R.freeBuffer=function(S){o[A.log2(S.length)].push(S)},R.malloc=function(S,_){if(_===void 0||_==="arraybuffer")return n(S);switch(_){case"uint8":return a(S);case"uint16":return i(S);case"uint32":return c(S);case"int8":return h(S);case"int16":return f(S);case"int32":return b(S);case"float":case"float32":return v(S);case"double":case"float64":return g(S);case"uint8_clamped":return y(S);case"bigint64":return m(S);case"biguint64":return p(S);case"buffer":return u(S);case"data":case"dataview":return w(S);default:return null}return null},R.mallocArrayBuffer=n,R.mallocUint8=a,R.mallocUint16=i,R.mallocUint32=c,R.mallocInt8=h,R.mallocInt16=f,R.mallocInt32=b,R.mallocFloat32=R.mallocFloat=v,R.mallocFloat64=R.mallocDouble=g,R.mallocUint8Clamped=y,R.mallocBigUint64=p,R.mallocBigInt64=m,R.mallocDataView=w,R.mallocBuffer=u,R.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,t[S].length=0,o[S].length=0}},90448:function($){var R=/[\'\"]/;$.exports=function(e){return e?(R.test(e.charAt(0))&&(e=e.substr(1)),R.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},93447:function($){$.exports=function(R,e,A){Array.isArray(A)||(A=[].slice.call(arguments,2));for(var k=0,l=A.length;k<l;k++){var T=A[k];for(var x in T)if((e[x]===void 0||Array.isArray(e[x])||R[x]!==e[x])&&x in e){var d;if(T[x]===!0)d=e[x];else if(T[x]===!1||typeof T[x]=="function"&&(d=T[x](e[x],R,e))===void 0)continue;R[x]=d}}return R}},20588:function($,R,e){function A(k){try{if(!e.g.localStorage)return!1}catch{return!1}var l=e.g.localStorage[k];return l!=null&&String(l).toLowerCase()==="true"}$.exports=function(k,l){if(A("noDeprecation"))return k;var T=!1;return function(){if(!T){if(A("throwDeprecation"))throw new Error(l);A("traceDeprecation")?console.trace(l):console.warn(l),T=!0}return k.apply(this,arguments)}}},45920:function($){$.exports=function(R){return R&&typeof R=="object"&&typeof R.copy=="function"&&typeof R.fill=="function"&&typeof R.readUInt8=="function"}},4936:function($,R,e){var A=e(47216),k=e(65481),l=e(21099),T=e(9187);function x(I){return I.call.bind(I)}var d=typeof BigInt<"u",s=typeof Symbol<"u",t=x(Object.prototype.toString),o=x(Number.prototype.valueOf),r=x(String.prototype.valueOf),n=x(Boolean.prototype.valueOf);if(d)var a=x(BigInt.prototype.valueOf);if(s)var i=x(Symbol.prototype.valueOf);function c(I,U){if(typeof I!="object")return!1;try{return U(I),!0}catch{return!1}}function h(I){return t(I)==="[object Map]"}function f(I){return t(I)==="[object Set]"}function b(I){return t(I)==="[object WeakMap]"}function v(I){return t(I)==="[object WeakSet]"}function g(I){return t(I)==="[object ArrayBuffer]"}function y(I){return typeof ArrayBuffer<"u"&&(g.working?g(I):I instanceof ArrayBuffer)}function p(I){return t(I)==="[object DataView]"}function m(I){return typeof DataView<"u"&&(p.working?p(I):I instanceof DataView)}R.isArgumentsObject=A,R.isGeneratorFunction=k,R.isTypedArray=T,R.isPromise=function(I){return typeof Promise<"u"&&I instanceof Promise||I!==null&&typeof I=="object"&&typeof I.then=="function"&&typeof I.catch=="function"},R.isArrayBufferView=function(I){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(I):T(I)||m(I)},R.isUint8Array=function(I){return l(I)==="Uint8Array"},R.isUint8ClampedArray=function(I){return l(I)==="Uint8ClampedArray"},R.isUint16Array=function(I){return l(I)==="Uint16Array"},R.isUint32Array=function(I){return l(I)==="Uint32Array"},R.isInt8Array=function(I){return l(I)==="Int8Array"},R.isInt16Array=function(I){return l(I)==="Int16Array"},R.isInt32Array=function(I){return l(I)==="Int32Array"},R.isFloat32Array=function(I){return l(I)==="Float32Array"},R.isFloat64Array=function(I){return l(I)==="Float64Array"},R.isBigInt64Array=function(I){return l(I)==="BigInt64Array"},R.isBigUint64Array=function(I){return l(I)==="BigUint64Array"},h.working=typeof Map<"u"&&h(new Map),R.isMap=function(I){return typeof Map<"u"&&(h.working?h(I):I instanceof Map)},f.working=typeof Set<"u"&&f(new Set),R.isSet=function(I){return typeof Set<"u"&&(f.working?f(I):I instanceof Set)},b.working=typeof WeakMap<"u"&&b(new WeakMap),R.isWeakMap=function(I){return typeof WeakMap<"u"&&(b.working?b(I):I instanceof WeakMap)},v.working=typeof WeakSet<"u"&&v(new WeakSet),R.isWeakSet=function(I){return v(I)},g.working=typeof ArrayBuffer<"u"&&g(new ArrayBuffer),R.isArrayBuffer=y,p.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&p(new DataView(new ArrayBuffer(1),0,1)),R.isDataView=m;var w=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function u(I){return t(I)==="[object SharedArrayBuffer]"}function S(I){return w!==void 0&&(u.working===void 0&&(u.working=u(new w)),u.working?u(I):I instanceof w)}function _(I){return c(I,o)}function E(I){return c(I,r)}function L(I){return c(I,n)}function C(I){return d&&c(I,a)}function P(I){return s&&c(I,i)}R.isSharedArrayBuffer=S,R.isAsyncFunction=function(I){return t(I)==="[object AsyncFunction]"},R.isMapIterator=function(I){return t(I)==="[object Map Iterator]"},R.isSetIterator=function(I){return t(I)==="[object Set Iterator]"},R.isGeneratorObject=function(I){return t(I)==="[object Generator]"},R.isWebAssemblyCompiledModule=function(I){return t(I)==="[object WebAssembly.Module]"},R.isNumberObject=_,R.isStringObject=E,R.isBooleanObject=L,R.isBigIntObject=C,R.isSymbolObject=P,R.isBoxedPrimitive=function(I){return _(I)||E(I)||L(I)||C(I)||P(I)},R.isAnyArrayBuffer=function(I){return typeof Uint8Array<"u"&&(y(I)||S(I))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(I){Object.defineProperty(R,I,{enumerable:!1,value:function(){throw new Error(I+" is not supported in userland")}})})},43827:function($,R,e){var A=e(90386),k=Object.getOwnPropertyDescriptors||function(I){for(var U=Object.keys(I),z={},H=0;H<U.length;H++)z[U[H]]=Object.getOwnPropertyDescriptor(I,U[H]);return z},l=/%[sdj%]/g;R.format=function(I){if(!b(I)){for(var U=[],z=0;z<arguments.length;z++)U.push(s(arguments[z]));return U.join(" ")}z=1;for(var H=arguments,F=H.length,N=String(I).replace(l,function(j){if(j==="%%")return"%";if(z>=F)return j;switch(j){case"%s":return String(H[z++]);case"%d":return Number(H[z++]);case"%j":try{return JSON.stringify(H[z++])}catch{return"[Circular]"}default:return j}}),B=H[z];z<F;B=H[++z])h(B)||!y(B)?N+=" "+B:N+=" "+s(B);return N},R.deprecate=function(I,U){if(A!==void 0&&A.noDeprecation===!0)return I;if(A===void 0)return function(){return R.deprecate(I,U).apply(this,arguments)};var z=!1;return function(){if(!z){if(A.throwDeprecation)throw new Error(U);A.traceDeprecation?console.trace(U):console.error(U),z=!0}return I.apply(this,arguments)}};var T={},x=/^$/;if(A.env.NODE_DEBUG){var d=A.env.NODE_DEBUG;d=d.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),x=new RegExp("^"+d+"$","i")}function s(I,U){var z={seen:[],stylize:o};return arguments.length>=3&&(z.depth=arguments[2]),arguments.length>=4&&(z.colors=arguments[3]),c(U)?z.showHidden=U:U&&R._extend(z,U),v(z.showHidden)&&(z.showHidden=!1),v(z.depth)&&(z.depth=2),v(z.colors)&&(z.colors=!1),v(z.customInspect)&&(z.customInspect=!0),z.colors&&(z.stylize=t),r(z,I,z.depth)}function t(I,U){var z=s.styles[U];return z?"\x1B["+s.colors[z][0]+"m"+I+"\x1B["+s.colors[z][1]+"m":I}function o(I,U){return I}function r(I,U,z){if(I.customInspect&&U&&w(U.inspect)&&U.inspect!==R.inspect&&(!U.constructor||U.constructor.prototype!==U)){var H=U.inspect(z,I);return b(H)||(H=r(I,H,z)),H}var F=function(J,X){if(v(X))return J.stylize("undefined","undefined");if(b(X)){var ee="'"+JSON.stringify(X).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return J.stylize(ee,"string")}return f(X)?J.stylize(""+X,"number"):c(X)?J.stylize(""+X,"boolean"):h(X)?J.stylize("null","null"):void 0}(I,U);if(F)return F;var N=Object.keys(U),B=function(J){var X={};return J.forEach(function(ee,re){X[ee]=!0}),X}(N);if(I.showHidden&&(N=Object.getOwnPropertyNames(U)),m(U)&&(N.indexOf("message")>=0||N.indexOf("description")>=0))return n(U);if(N.length===0){if(w(U)){var j=U.name?": "+U.name:"";return I.stylize("[Function"+j+"]","special")}if(g(U))return I.stylize(RegExp.prototype.toString.call(U),"regexp");if(p(U))return I.stylize(Date.prototype.toString.call(U),"date");if(m(U))return n(U)}var K,G="",V=!1,W=["{","}"];return i(U)&&(V=!0,W=["[","]"]),w(U)&&(G=" [Function"+(U.name?": "+U.name:"")+"]"),g(U)&&(G=" "+RegExp.prototype.toString.call(U)),p(U)&&(G=" "+Date.prototype.toUTCString.call(U)),m(U)&&(G=" "+n(U)),N.length!==0||V&&U.length!=0?z<0?g(U)?I.stylize(RegExp.prototype.toString.call(U),"regexp"):I.stylize("[Object]","special"):(I.seen.push(U),K=V?function(J,X,ee,re,ie){for(var se=[],fe=0,ye=X.length;fe<ye;++fe)L(X,String(fe))?se.push(a(J,X,ee,re,String(fe),!0)):se.push("");return ie.forEach(function(ge){ge.match(/^\d+$/)||se.push(a(J,X,ee,re,ge,!0))}),se}(I,U,z,B,N):N.map(function(J){return a(I,U,z,B,J,V)}),I.seen.pop(),function(J,X,ee){return J.reduce(function(re,ie){return ie.indexOf(`
`),re+ie.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ee[0]+(X===""?"":X+`
 `)+" "+J.join(`,
  `)+" "+ee[1]:ee[0]+X+" "+J.join(", ")+" "+ee[1]}(K,G,W)):W[0]+G+W[1]}function n(I){return"["+Error.prototype.toString.call(I)+"]"}function a(I,U,z,H,F,N){var B,j,K;if((K=Object.getOwnPropertyDescriptor(U,F)||{value:U[F]}).get?j=K.set?I.stylize("[Getter/Setter]","special"):I.stylize("[Getter]","special"):K.set&&(j=I.stylize("[Setter]","special")),L(H,F)||(B="["+F+"]"),j||(I.seen.indexOf(K.value)<0?(j=h(z)?r(I,K.value,null):r(I,K.value,z-1)).indexOf(`
`)>-1&&(j=N?j.split(`
`).map(function(G){return"  "+G}).join(`
`).slice(2):`
`+j.split(`
`).map(function(G){return"   "+G}).join(`
`)):j=I.stylize("[Circular]","special")),v(B)){if(N&&F.match(/^\d+$/))return j;(B=JSON.stringify(""+F)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.slice(1,-1),B=I.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=I.stylize(B,"string"))}return B+": "+j}function i(I){return Array.isArray(I)}function c(I){return typeof I=="boolean"}function h(I){return I===null}function f(I){return typeof I=="number"}function b(I){return typeof I=="string"}function v(I){return I===void 0}function g(I){return y(I)&&u(I)==="[object RegExp]"}function y(I){return typeof I=="object"&&I!==null}function p(I){return y(I)&&u(I)==="[object Date]"}function m(I){return y(I)&&(u(I)==="[object Error]"||I instanceof Error)}function w(I){return typeof I=="function"}function u(I){return Object.prototype.toString.call(I)}function S(I){return I<10?"0"+I.toString(10):I.toString(10)}R.debuglog=function(I){if(I=I.toUpperCase(),!T[I])if(x.test(I)){var U=A.pid;T[I]=function(){var z=R.format.apply(R,arguments);console.error("%s %d: %s",I,U,z)}}else T[I]=function(){};return T[I]},R.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},R.types=e(4936),R.isArray=i,R.isBoolean=c,R.isNull=h,R.isNullOrUndefined=function(I){return I==null},R.isNumber=f,R.isString=b,R.isSymbol=function(I){return typeof I=="symbol"},R.isUndefined=v,R.isRegExp=g,R.types.isRegExp=g,R.isObject=y,R.isDate=p,R.types.isDate=p,R.isError=m,R.types.isNativeError=m,R.isFunction=w,R.isPrimitive=function(I){return I===null||typeof I=="boolean"||typeof I=="number"||typeof I=="string"||typeof I=="symbol"||I===void 0},R.isBuffer=e(45920);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var I=new Date,U=[S(I.getHours()),S(I.getMinutes()),S(I.getSeconds())].join(":");return[I.getDate(),_[I.getMonth()],U].join(" ")}function L(I,U){return Object.prototype.hasOwnProperty.call(I,U)}R.log=function(){console.log("%s - %s",E(),R.format.apply(R,arguments))},R.inherits=e(42018),R._extend=function(I,U){if(!U||!y(U))return I;for(var z=Object.keys(U),H=z.length;H--;)I[z[H]]=U[z[H]];return I};var C=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function P(I,U){if(!I){var z=new Error("Promise was rejected with a falsy value");z.reason=I,I=z}return U(I)}R.promisify=function(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');if(C&&I[C]){var U;if(typeof(U=I[C])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(U,C,{value:U,enumerable:!1,writable:!1,configurable:!0}),U}function U(){for(var z,H,F=new Promise(function(j,K){z=j,H=K}),N=[],B=0;B<arguments.length;B++)N.push(arguments[B]);N.push(function(j,K){j?H(j):z(K)});try{I.apply(this,N)}catch(j){H(j)}return F}return Object.setPrototypeOf(U,Object.getPrototypeOf(I)),C&&Object.defineProperty(U,C,{value:U,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(U,k(I))},R.promisify.custom=C,R.callbackify=function(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');function U(){for(var z=[],H=0;H<arguments.length;H++)z.push(arguments[H]);var F=z.pop();if(typeof F!="function")throw new TypeError("The last argument must be of type Function");var N=this,B=function(){return F.apply(N,arguments)};I.apply(this,z).then(function(j){A.nextTick(B.bind(null,null,j))},function(j){A.nextTick(P.bind(null,j,B))})}return Object.setPrototypeOf(U,Object.getPrototypeOf(I)),Object.defineProperties(U,k(I)),U}},40372:function($,R,e){var A=e(86249);$.exports=function(k){return A("webgl",k)}},21099:function($,R,e){var A=e(86165),k=e(72077),l=e(92978),T=l("Object.prototype.toString"),x=e(57877)()&&typeof Symbol.toStringTag=="symbol",d=k(),s=l("String.prototype.slice"),t={},o=e(67295),r=Object.getPrototypeOf;x&&o&&r&&A(d,function(a){if(typeof e.g[a]=="function"){var i=new e.g[a];if(!(Symbol.toStringTag in i))throw new EvalError("this engine has support for Symbol.toStringTag, but "+a+" does not have the property! Please report this.");var c=r(i),h=o(c,Symbol.toStringTag);if(!h){var f=r(c);h=o(f,Symbol.toStringTag)}t[a]=h.get}});var n=e(9187);$.exports=function(a){return!!n(a)&&(x?function(i){var c=!1;return A(t,function(h,f){if(!c)try{var b=h.call(i);b===f&&(c=b)}catch{}}),c}(a):s(T(a),8,-1))}},3961:function($,R,e){var A=e(63489),k=e(56131),l=A.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}T.prototype=new A.baseCalendar,k(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,a){if(typeof n=="string"){var i=n.match(d);return i?i[0]:""}var c=this._validateYear(n),h=n.month(),f=""+this.toChineseMonth(c,h);return a&&f.length<2&&(f="0"+f),this.isIntercalaryMonth(c,h)&&(f+="i"),f},monthNames:function(n){if(typeof n=="string"){var a=n.match(s);return a?a[0]:""}var i=this._validateYear(n),c=n.month(),h=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][this.toChineseMonth(i,c)-1];return this.isIntercalaryMonth(i,c)&&(h="闰"+h),h},monthNamesShort:function(n){if(typeof n=="string"){var a=n.match(t);return a?a[0]:""}var i=this._validateYear(n),c=n.month(),h=["一","二","三","四","五","六","七","八","九","十","十一","十二"][this.toChineseMonth(i,c)-1];return this.isIntercalaryMonth(i,c)&&(h="闰"+h),h},parseMonth:function(n,a){n=this._validateYear(n);var i,c=parseInt(a);if(isNaN(c))a[0]==="闰"&&(i=!0,a=a.substring(1)),a[a.length-1]==="月"&&(a=a.substring(0,a.length-1)),c=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(a);else{var h=a[a.length-1];i=h==="i"||h==="I"}return this.toMonthIndex(n,c,i)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,a){if(n.year&&(n=n.year()),typeof n!="number"||n<1888||n>2111)throw a.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,a,i){var c=this.intercalaryMonth(n);if(i&&a!==c||a<1||a>12)throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!i&&a<=c?a-1:a:a-1},toChineseMonth:function(n,a){n.year&&(a=(n=n.year()).month());var i=this.intercalaryMonth(n);if(a<0||a>(i?12:11))throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return i?a<i?a+1:a:a+1},intercalaryMonth:function(n){return n=this._validateYear(n),o[n-o[0]]>>13},isIntercalaryMonth:function(n,a){n.year&&(a=(n=n.year()).month());var i=this.intercalaryMonth(n);return!!i&&i===a},leapYear:function(n){return this.intercalaryMonth(n)!==0},weekOfYear:function(n,a,i){var c,h=this._validateYear(n,A.local.invalidyear),f=r[h-r[0]],b=f>>9&4095,v=f>>5&15,g=31&f;(c=l.newDate(b,v,g)).add(4-(c.dayOfWeek()||7),"d");var y=this.toJD(n,a,i)-c.toJD();return 1+Math.floor(y/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,a){n.year&&(a=n.month(),n=n.year()),n=this._validateYear(n);var i=o[n-o[0]];if(a>(i>>13?12:11))throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return i&1<<12-a?30:29},weekDay:function(n,a,i){return(this.dayOfWeek(n,a,i)||7)<6},toJD:function(n,a,i){var c=this._validate(n,f,i,A.local.invalidDate);n=this._validateYear(c.year()),a=c.month(),i=c.day();var h=this.isIntercalaryMonth(n,a),f=this.toChineseMonth(n,a),b=function(v,g,y,p,m){var w,u,S;if(typeof v=="object")u=v,w=g||{};else{var _;if(!(typeof v=="number"&&v>=1888&&v<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof g=="number"&&g>=1&&g<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof y=="number"&&y>=1&&y<=30))throw new Error("Lunar day outside range 1 - 30");typeof p=="object"?(_=!1,w=p):(_=!!p,w={}),u={year:v,month:g,day:y,isIntercalary:_}}S=u.day-1;var E,L=o[u.year-o[0]],C=L>>13;E=C&&(u.month>C||u.isIntercalary)?u.month:u.month-1;for(var P=0;P<E;P++)S+=L&1<<12-P?30:29;var I=r[u.year-r[0]],U=new Date(I>>9&4095,(I>>5&15)-1,(31&I)+S);return w.year=U.getFullYear(),w.month=1+U.getMonth(),w.day=U.getDate(),w}(n,f,i,h);return l.toJD(b.year,b.month,b.day)},fromJD:function(n){var a=l.fromJD(n),i=function(h,f,b,v){var g,y;if(typeof h=="object")g=h,y=f||{};else{if(!(typeof h=="number"&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof f=="number"&&f>=1&&f<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof b=="number"&&b>=1&&b<=31))throw new Error("Solar day outside range 1 - 31");g={year:h,month:f,day:b},y={}}var p=r[g.year-r[0]],m=g.year<<9|g.month<<5|g.day;y.year=m>=p?g.year:g.year-1,p=r[y.year-r[0]];var w,u=new Date(p>>9&4095,(p>>5&15)-1,31&p),S=new Date(g.year,g.month-1,g.day);w=Math.round((S-u)/864e5);var _,E=o[y.year-o[0]];for(_=0;_<13;_++){var L=E&1<<12-_?30:29;if(w<L)break;w-=L}var C=E>>13;return!C||_<C?(y.isIntercalary=!1,y.month=1+_):_===C?(y.isIntercalary=!0,y.month=_):(y.isIntercalary=!1,y.month=_),y.day=1+w,y}(a.year(),a.month(),a.day()),c=this.toMonthIndex(i.year,i.month,i.isIntercalary);return this.newDate(i.year,c,i.day)},fromString:function(n){var a=n.match(x),i=this._validateYear(+a[1]),c=+a[2],h=!!a[3],f=this.toMonthIndex(i,c,h),b=+a[4];return this.newDate(i,f,b)},add:function(n,a,i){var c=n.year(),h=n.month(),f=this.isIntercalaryMonth(c,h),b=this.toChineseMonth(c,h),v=Object.getPrototypeOf(T.prototype).add.call(this,n,a,i);if(i==="y"){var g=v.year(),y=v.month(),p=this.isIntercalaryMonth(g,b),m=f&&p?this.toMonthIndex(g,b,!0):this.toMonthIndex(g,b,!1);m!==y&&v.month(m)}return v}});var x=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,d=/^\d?\d[iI]?/m,s=/^闰?十?[一二三四五六七八九]?月/m,t=/^闰?十?[一二三四五六七八九]?/m;A.calendars.chinese=T;var o=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function($,R,e){var A=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,k(l.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,A.local.invalidYear);return(T=x.year()+(x.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear),13},weekOfYear:function(T,x,d){var s=this.newDate(T,x,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var d=this._validate(T,x,this.minDay,A.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===13&&this.leapYear(d.year())?1:0)},weekDay:function(T,x,d){return(this.dayOfWeek(T,x,d)||7)<6},toJD:function(T,x,d){var s=this._validate(T,x,d,A.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var x=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((x-Math.floor((x+366)/1461))/365)+1;d<=0&&d--,x=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(x/30)+1,t=x-30*(s-1)+1;return this.newDate(d,s,t)}}),A.calendars.coptic=l},86825:function($,R,e){var A=e(63489),k=e(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,k(l.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(x){return this._validate(x,this.minMonth,this.minDay,A.local.invalidYear),!1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,A.local.invalidYear),13},daysInYear:function(x){return this._validate(x,this.minMonth,this.minDay,A.local.invalidYear),400},weekOfYear:function(x,d,s){var t=this.newDate(x,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(x,d){var s=this._validate(x,d,this.minDay,A.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(x,d,s){return(this._validate(x,d,s,A.local.invalidDate).day()+1)%8},weekDay:function(x,d,s){var t=this.dayOfWeek(x,d,s);return t>=2&&t<=6},extraInfo:function(x,d,s){var t=this._validate(x,d,s,A.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(x,d,s){var t=this._validate(x,d,s,A.local.invalidDate);return x=t.year()+(t.year()<0?1:0),d=t.month(),(s=t.day())+(d>1?16:0)+(d>2?32*(d-2):0)+400*(x-1)+this.jdEpoch-1},fromJD:function(x){x=Math.floor(x+.5)-Math.floor(this.jdEpoch)-1;var d=Math.floor(x/400)+1;x-=400*(d-1),x+=x>15?16:0;var s=Math.floor(x/32)+1,t=x-32*(s-1)+1;return this.newDate(d<=0?d-1:d,s,t)}});var T={20:"Fruitbat",21:"Anchovy"};A.calendars.discworld=l},37715:function($,R,e){var A=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,k(l.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,A.local.invalidYear);return(T=x.year()+(x.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear),13},weekOfYear:function(T,x,d){var s=this.newDate(T,x,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var d=this._validate(T,x,this.minDay,A.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===13&&this.leapYear(d.year())?1:0)},weekDay:function(T,x,d){return(this.dayOfWeek(T,x,d)||7)<6},toJD:function(T,x,d){var s=this._validate(T,x,d,A.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var x=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((x-Math.floor((x+366)/1461))/365)+1;d<=0&&d--,x=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(x/30)+1,t=x-30*(s-1)+1;return this.newDate(d,s,t)}}),A.calendars.ethiopian=l},99384:function($,R,e){var A=e(63489),k=e(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}function T(x,d){return x-d*Math.floor(x/d)}l.prototype=new A.baseCalendar,k(l.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,A.local.invalidYear);return this._leapYear(d.year())},_leapYear:function(x){return T(7*(x=x<0?x+1:x)+1,19)<7},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,A.local.invalidYear),this._leapYear(x.year?x.year():x)?13:12},weekOfYear:function(x,d,s){var t=this.newDate(x,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(x){return x=this._validate(x,this.minMonth,this.minDay,A.local.invalidYear).year(),this.toJD(x===-1?1:x+1,7,1)-this.toJD(x,7,1)},daysInMonth:function(x,d){return x.year&&(d=x.month(),x=x.year()),this._validate(x,d,this.minDay,A.local.invalidMonth),d===12&&this.leapYear(x)||d===8&&T(this.daysInYear(x),10)===5?30:d===9&&T(this.daysInYear(x),10)===3?29:this.daysPerMonth[d-1]},weekDay:function(x,d,s){return this.dayOfWeek(x,d,s)!==6},extraInfo:function(x,d,s){var t=this._validate(x,d,s,A.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(x,d,s){var t=this._validate(x,d,s,A.local.invalidDate);x=t.year(),d=t.month(),s=t.day();var o=x<=0?x+1:x,r=this.jdEpoch+this._delay1(o)+this._delay2(o)+s+1;if(d<7){for(var n=7;n<=this.monthsInYear(x);n++)r+=this.daysInMonth(x,n);for(n=1;n<d;n++)r+=this.daysInMonth(x,n)}else for(n=7;n<d;n++)r+=this.daysInMonth(x,n);return r},_delay1:function(x){var d=Math.floor((235*x-234)/19),s=12084+13753*d,t=29*d+Math.floor(s/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(x){var d=this._delay1(x-1),s=this._delay1(x);return this._delay1(x+1)-s==356?2:s-d==382?1:0},fromJD:function(x){x=Math.floor(x)+.5;for(var d=Math.floor(98496*(x-this.jdEpoch)/35975351)-1;x>=this.toJD(d===-1?1:d+1,7,1);)d++;for(var s=x<this.toJD(d,1,1)?7:1;x>this.toJD(d,s,this.daysInMonth(d,s));)s++;var t=x-this.toJD(d,s,1)+1;return this.newDate(d,s,t)}}),A.calendars.hebrew=l},43805:function($,R,e){var A=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,k(l.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,A.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,x,d){var s=this.newDate(T,x,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,x){var d=this._validate(T,x,this.minDay,A.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===12&&this.leapYear(d.year())?1:0)},weekDay:function(T,x,d){return this.dayOfWeek(T,x,d)!==5},toJD:function(T,x,d){var s=this._validate(T,x,d,A.local.invalidDate);return T=s.year(),x=s.month(),T=T<=0?T+1:T,(d=s.day())+Math.ceil(29.5*(x-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var x=Math.floor((30*(T-this.jdEpoch)+10646)/10631);x=x<=0?x-1:x;var d=Math.min(12,Math.ceil((T-29-this.toJD(x,1,1))/29.5)+1),s=T-this.toJD(x,d,1)+1;return this.newDate(x,d,s)}}),A.calendars.islamic=l},88874:function($,R,e){var A=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,k(l.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,A.local.invalidYear);return(T=x.year()<0?x.year()+1:x.year())%4==0},weekOfYear:function(T,x,d){var s=this.newDate(T,x,d);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var d=this._validate(T,x,this.minDay,A.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(T,x,d){return(this.dayOfWeek(T,x,d)||7)<6},toJD:function(T,x,d){var s=this._validate(T,x,d,A.local.invalidDate);return T=s.year(),x=s.month(),d=s.day(),T<0&&T++,x<=2&&(T--,x+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(x+1))+d-1524.5},fromJD:function(T){var x=Math.floor(T+.5)+1524,d=Math.floor((x-122.1)/365.25),s=Math.floor(365.25*d),t=Math.floor((x-s)/30.6001),o=t-Math.floor(t<14?1:13),r=d-Math.floor(o>2?4716:4715),n=x-s-Math.floor(30.6001*t);return r<=0&&r--,this.newDate(r,o,n)}}),A.calendars.julian=l},83290:function($,R,e){var A=e(63489),k=e(56131);function l(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}function T(d,s){return d-s*Math.floor(d/s)}function x(d,s){return T(d-1,s)+1}l.prototype=new A.baseCalendar,k(l.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(d){return this._validate(d,this.minMonth,this.minDay,A.local.invalidYear),!1},formatYear:function(d){d=this._validate(d,this.minMonth,this.minDay,A.local.invalidYear).year();var s=Math.floor(d/400);return d%=400,d+=d<0?400:0,s+"."+Math.floor(d/20)+"."+d%20},forYear:function(d){if((d=d.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<d.length;t++){var o=parseInt(d[t],10);if(Math.abs(o)>19||t>0&&o<0)throw"Invalid Mayan year";s=20*s+o}return s},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,A.local.invalidYear),18},weekOfYear:function(d,s,t){return this._validate(d,s,t,A.local.invalidDate),0},daysInYear:function(d){return this._validate(d,this.minMonth,this.minDay,A.local.invalidYear),360},daysInMonth:function(d,s){return this._validate(d,s,this.minDay,A.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(d,s,t){return this._validate(d,s,t,A.local.invalidDate).day()},weekDay:function(d,s,t){return this._validate(d,s,t,A.local.invalidDate),!0},extraInfo:function(d,s,t){var o=this._validate(d,s,t,A.local.invalidDate).toJD(),r=this._toHaab(o),n=this._toTzolkin(o);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(d){var s=T(8+(d-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(d){return[x(20+(d-=this.jdEpoch),20),x(d+4,13)]},toJD:function(d,s,t){var o=this._validate(d,s,t,A.local.invalidDate);return o.day()+20*o.month()+360*o.year()+this.jdEpoch},fromJD:function(d){d=Math.floor(d)+.5-this.jdEpoch;var s=Math.floor(d/360);d%=360,d+=d<0?360:0;var t=Math.floor(d/20),o=d%20;return this.newDate(s,t,o)}}),A.calendars.mayan=l},29108:function($,R,e){var A=e(63489),k=e(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar;var T=A.instance("gregorian");k(l.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear);return T.leapYear(d.year()+(d.year()<1?1:0)+1469)},weekOfYear:function(x,d,s){var t=this.newDate(x,d,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(x,d){var s=this._validate(x,d,this.minDay,A.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(x,d,s){return(this.dayOfWeek(x,d,s)||7)<6},toJD:function(x,d,s){var t=this._validate(x,d,s,A.local.invalidMonth);(x=t.year())<0&&x++;for(var o=t.day(),r=1;r<t.month();r++)o+=this.daysPerMonth[r-1];return o+T.toJD(x+1468,3,13)},fromJD:function(x){x=Math.floor(x+.5);for(var d=Math.floor((x-(this.jdEpoch-1))/366);x>=this.toJD(d+1,1,1);)d++;for(var s=x-Math.floor(this.toJD(d,1,1)+.5)+1,t=1;s>this.daysInMonth(d,t);)s-=this.daysInMonth(d,t),t++;return this.newDate(d,t,s)}}),A.calendars.nanakshahi=l},55422:function($,R,e){var A=e(63489),k=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,k(l.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,x,d){var s=this.newDate(T,x,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,A.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var x=0,d=this.minMonth;d<=12;d++)x+=this.NEPALI_CALENDAR_DATA[T][d];return x},daysInMonth:function(T,x){return T.year&&(x=T.month(),T=T.year()),this._validate(T,x,this.minDay,A.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[x-1]:this.NEPALI_CALENDAR_DATA[T][x]},weekDay:function(T,x,d){return this.dayOfWeek(T,x,d)!==6},toJD:function(T,x,d){var s=this._validate(T,x,d,A.local.invalidDate);T=s.year(),x=s.month(),d=s.day();var t=A.instance(),o=0,r=x,n=T;this._createMissingCalendarData(T);var a=T-(r>9||r===9&&d>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(x!==9&&(o=d,r--);r!==9;)r<=0&&(r=12,n--),o+=this.NEPALI_CALENDAR_DATA[n][r],r--;return x===9?(o+=d-this.NEPALI_CALENDAR_DATA[n][0])<0&&(o+=t.daysInYear(a)):o+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],t.newDate(a,1,1).add(o,"d").toJD()},fromJD:function(T){var x=A.instance().fromJD(T),d=x.year(),s=x.dayOfYear(),t=d+56;this._createMissingCalendarData(t);for(var o=9,r=this.NEPALI_CALENDAR_DATA[t][0],n=this.NEPALI_CALENDAR_DATA[t][o]-r+1;s>n;)++o>12&&(o=1,t++),n+=this.NEPALI_CALENDAR_DATA[t][o];var a=this.NEPALI_CALENDAR_DATA[t][o]-(n-s);return this.newDate(t,o,a)},_createMissingCalendarData:function(T){var x=this.daysPerMonth.slice(0);x.unshift(17);for(var d=T-1;d<T+2;d++)this.NEPALI_CALENDAR_DATA[d]===void 0&&(this.NEPALI_CALENDAR_DATA[d]=x)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),A.calendars.nepali=l},94320:function($,R,e){var A=e(63489),k=e(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}function T(x,d){return x-d*Math.floor(x/d)}l.prototype=new A.baseCalendar,k(l.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,A.local.invalidYear);return 682*((d.year()-(d.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(x,d,s){var t=this.newDate(x,d,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(x,d){var s=this._validate(x,d,this.minDay,A.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(x,d,s){return this.dayOfWeek(x,d,s)!==5},toJD:function(x,d,s){var t=this._validate(x,d,s,A.local.invalidDate);x=t.year(),d=t.month(),s=t.day();var o=x-(x>=0?474:473),r=474+T(o,2820);return s+(d<=7?31*(d-1):30*(d-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(o/2820)+this.jdEpoch-1},fromJD:function(x){var d=(x=Math.floor(x)+.5)-this.toJD(475,1,1),s=Math.floor(d/1029983),t=T(d,1029983),o=2820;if(t!==1029982){var r=Math.floor(t/366),n=T(t,366);o=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var a=o+2820*s+474;a=a<=0?a-1:a;var i=x-this.toJD(a,1,1)+1,c=i<=186?Math.ceil(i/31):Math.ceil((i-6)/30),h=x-this.toJD(a,c,1)+1;return this.newDate(a,c,h)}}),A.calendars.persian=l,A.calendars.jalali=l},31320:function($,R,e){var A=e(63489),k=e(56131),l=A.instance();function T(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}T.prototype=new A.baseCalendar,k(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,A.local.invalidYear);return x=this._t2gYear(d.year()),l.leapYear(x)},weekOfYear:function(x,d,s){var t=this._validate(x,this.minMonth,this.minDay,A.local.invalidYear);return x=this._t2gYear(t.year()),l.weekOfYear(x,t.month(),t.day())},daysInMonth:function(x,d){var s=this._validate(x,d,this.minDay,A.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(x,d,s){return(this.dayOfWeek(x,d,s)||7)<6},toJD:function(x,d,s){var t=this._validate(x,d,s,A.local.invalidDate);return x=this._t2gYear(t.year()),l.toJD(x,t.month(),t.day())},fromJD:function(x){var d=l.fromJD(x),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(x){return x+this.yearsOffset+(x>=-this.yearsOffset&&x<=-1?1:0)},_g2tYear:function(x){return x-this.yearsOffset-(x>=1&&x<=this.yearsOffset?1:0)}}),A.calendars.taiwan=T},51367:function($,R,e){var A=e(63489),k=e(56131),l=A.instance();function T(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}T.prototype=new A.baseCalendar,k(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,A.local.invalidYear);return x=this._t2gYear(d.year()),l.leapYear(x)},weekOfYear:function(x,d,s){var t=this._validate(x,this.minMonth,this.minDay,A.local.invalidYear);return x=this._t2gYear(t.year()),l.weekOfYear(x,t.month(),t.day())},daysInMonth:function(x,d){var s=this._validate(x,d,this.minDay,A.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(x,d,s){return(this.dayOfWeek(x,d,s)||7)<6},toJD:function(x,d,s){var t=this._validate(x,d,s,A.local.invalidDate);return x=this._t2gYear(t.year()),l.toJD(x,t.month(),t.day())},fromJD:function(x){var d=l.fromJD(x),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(x){return x-this.yearsOffset-(x>=1&&x<=this.yearsOffset?1:0)},_g2tYear:function(x){return x+this.yearsOffset+(x>=-this.yearsOffset&&x<=-1?1:0)}}),A.calendars.thai=T},21457:function($,R,e){var A=e(63489),k=e(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,k(l.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,A.local.invalidYear);return this.daysInYear(d.year())===355},weekOfYear:function(x,d,s){var t=this.newDate(x,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(x){for(var d=0,s=1;s<=12;s++)d+=this.daysInMonth(x,s);return d},daysInMonth:function(x,d){for(var s=this._validate(x,d,this.minDay,A.local.invalidMonth).toJD()-24e5+.5,t=0,o=0;o<T.length;o++){if(T[o]>s)return T[t]-T[t-1];t++}return 30},weekDay:function(x,d,s){return this.dayOfWeek(x,d,s)!==5},toJD:function(x,d,s){var t=this._validate(x,d,s,A.local.invalidDate),o=12*(t.year()-1)+t.month()-15292;return t.day()+T[o-1]-1+24e5-.5},fromJD:function(x){for(var d=x-24e5+.5,s=0,t=0;t<T.length&&!(T[t]>d);t++)s++;var o=s+15292,r=Math.floor((o-1)/12),n=r+1,a=o-12*r,i=d-T[s-1]+1;return this.newDate(n,a,i)},isValid:function(x,d,s){var t=A.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(x=x.year!=null?x.year:x)>=1276&&x<=1500),t},_validate:function(x,d,s,t){var o=A.baseCalendar.prototype._validate.apply(this,arguments);if(o.year<1276||o.year>1500)throw t.replace(/\{0\}/,this.local.name);return o}}),A.calendars.ummalqura=l;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function($,R,e){var A=e(56131);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function l(t,o,r,n){if(this._calendar=t,this._year=o,this._month=r,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,o){return"000000".substring(0,o-(t=""+t).length)+t}function x(){this.shortYearCutoff="+10"}function d(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}A(k.prototype,{instance:function(t,o){t=(t||"gregorian").toLowerCase(),o=o||"";var r=this._localCals[t+"-"+o];if(!r&&this.calendars[t]&&(r=new this.calendars[t](o),this._localCals[t+"-"+o]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return r},newDate:function(t,o,r,n,a){return(n=(t!=null&&t.year?t.calendar():typeof n=="string"?this.instance(n,a):n)||this.instance()).newDate(t,o,r)},substituteDigits:function(t){return function(o){return(o+"").replace(/[0-9]/g,function(r){return t[r]})}},substituteChineseDigits:function(t,o){return function(r){for(var n="",a=0;r>0;){var i=r%10;n=(i===0?"":t[i]+o[a])+n,a++,r=Math.floor(r/10)}return n.indexOf(t[1]+o[1])===0&&(n=n.substr(1)),n||t[0]}}}),A(l.prototype,{newDate:function(t,o,r){return this._calendar.newDate(t??this,o,r)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,o,r){if(!this._calendar.isValid(t,o,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=o,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,o){return this._calendar.add(this,t,o)},set:function(t,o){return this._calendar.set(this,t,o)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var o=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return o===0?0:o<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),A(x.prototype,{_validateLevel:0,newDate:function(t,o,r){return t==null?this.today():(t.year&&(this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=t.day(),o=t.month(),t=t.year()),new l(this,t,o,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(o.year()<0?"-":"")+T(Math.abs(o.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,o){var r=this._validate(t,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(t,o){var r=(o+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(o)?366:365},dayOfYear:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(t,o,r){return this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,o,r){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,o,r),o,r)},_add:function(t,o,r){if(this._validateLevel++,r==="d"||r==="w"){var n=t.toJD()+o*(r==="w"?this.daysInWeek():1),a=t.calendar().fromJD(n);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var i=t.year()+(r==="y"?o:0),c=t.monthOfYear()+(r==="m"?o:0);a=t.day(),r==="y"?(t.month()!==this.fromMonthOfYear(i,c)&&(c=this.newDate(i,t.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(i)),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,c)))):r==="m"&&(function(f){for(;c<f.minMonth;)i--,c+=f.monthsInYear(i);for(var b=f.monthsInYear(i);c>b-1+f.minMonth;)i++,c-=b,b=f.monthsInYear(i)}(this),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,c))));var h=[i,this.fromMonthOfYear(i,c),a];return this._validateLevel--,h}catch(f){throw this._validateLevel--,f}},_correctAdd:function(t,o,r,n){if(!(this.hasYearZero||n!=="y"&&n!=="m"||o[0]!==0&&t.year()>0==o[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],i=r<0?-1:1;o=this._add(t,r*a[0]+i*a[1],a[2])}return t.date(o[0],o[1],o[2])},set:function(t,o,r){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var n=r==="y"?o:t.year(),a=r==="m"?o:t.month(),i=r==="d"?o:t.day();return r!=="y"&&r!=="m"||(i=Math.min(i,this.daysInMonth(n,a))),t.date(n,a,i)},isValid:function(t,o,r){this._validateLevel++;var n=this.hasYearZero||t!==0;if(n){var a=this.newDate(t,o,this.minDay);n=o>=this.minMonth&&o-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,n},toJSDate:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,o,r,n){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,o,r))throw n.replace(/\{0\}/,this.local.name);var a=this.newDate(t,o,r);return this._validateLevel--,a}catch(i){throw this._validateLevel--,i}}}),d.prototype=new x,A(d.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=o.year()+(o.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,o,r){var n=this.newDate(t,o,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,o){var r=this._validate(t,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(t,o,r){return(this.dayOfWeek(t,o,r)||7)<6},toJD:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=n.year(),o=n.month(),r=n.day(),t<0&&t++,o<3&&(o+=12,t--);var a=Math.floor(t/100),i=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(o+1))+r+i-1524.5},fromJD:function(t){var o=Math.floor(t+.5),r=Math.floor((o-186721625e-2)/36524.25),n=1524+(r=o+1+r-Math.floor(r/4)),a=Math.floor((n-122.1)/365.25),i=Math.floor(365.25*a),c=Math.floor((n-i)/30.6001),h=n-i-Math.floor(30.6001*c),f=c-(c>13.5?13:1),b=a-(f>2.5?4716:4715);return b<=0&&b--,this.newDate(b,f,h)},toJSDate:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),a=new Date(n.year(),n.month()-1,n.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=$.exports=new k;s.cdate=l,s.baseCalendar=x,s.calendars.gregorian=d},94338:function($,R,e){var A=e(56131),k=e(63489);A(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],A(k.cdate.prototype,{formatDate:function(l,T){return typeof l!="string"&&(T=l,l=""),this._calendar.formatDate(l||"",this,T)}}),A(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(l,T,x){if(typeof l!="string"&&(x=T,T=l,l=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;l=l||this.local.dateFormat;for(var d,s,t,o=(x=x||{}).dayNamesShort||this.local.dayNamesShort,r=x.dayNames||this.local.dayNames,n=x.monthNumbers||this.local.monthNumbers,a=x.monthNamesShort||this.local.monthNamesShort,i=x.monthNames||this.local.monthNames,c=(x.calculateWeek||this.local.calculateWeek,function(u,S){for(var _=1;w+_<l.length&&l.charAt(w+_)===u;)_++;return w+=_-1,Math.floor(_/(S||1))>1}),h=function(u,S,_,E){var L=""+S;if(c(u,E))for(;L.length<_;)L="0"+L;return L},f=this,b=function(u){return typeof n=="function"?n.call(f,u,c("m")):y(h("m",u.month(),2))},v=function(u,S){return S?typeof i=="function"?i.call(f,u):i[u.month()-f.minMonth]:typeof a=="function"?a.call(f,u):a[u.month()-f.minMonth]},g=this.local.digits,y=function(u){return x.localNumbers&&g?g(u):u},p="",m=!1,w=0;w<l.length;w++)if(m)l.charAt(w)!=="'"||c("'")?p+=l.charAt(w):m=!1;else switch(l.charAt(w)){case"d":p+=y(h("d",T.day(),2));break;case"D":p+=(d=T.dayOfWeek(),s=o,t=r,c("D")?t[d]:s[d]);break;case"o":p+=h("o",T.dayOfYear(),3);break;case"w":p+=h("w",T.weekOfYear(),2);break;case"m":p+=b(T);break;case"M":p+=v(T,c("M"));break;case"y":p+=c("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":c("Y",2),p+=T.formatYear();break;case"J":p+=T.toJD();break;case"@":p+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":p+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":c("'")?p+="'":m=!0;break;default:p+=l.charAt(w)}return p},parseDate:function(l,T,x){if(T==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;l=l||this.local.dateFormat;var d=(x=x||{}).shortYearCutoff||this.shortYearCutoff;d=typeof d!="string"?d:this.today().year()%100+parseInt(d,10);for(var s=x.dayNamesShort||this.local.dayNamesShort,t=x.dayNames||this.local.dayNames,o=x.parseMonth||this.local.parseMonth,r=x.monthNumbers||this.local.monthNumbers,n=x.monthNamesShort||this.local.monthNamesShort,a=x.monthNames||this.local.monthNames,i=-1,c=-1,h=-1,f=-1,b=-1,v=!1,g=!1,y=function(I,U){for(var z=1;L+z<l.length&&l.charAt(L+z)===I;)z++;return L+=z-1,Math.floor(z/(U||1))>1},p=function(I,U){var z=y(I,U),H=[2,3,z?4:2,z?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],F=new RegExp("^-?\\d{1,"+H+"}"),N=T.substring(E).match(F);if(!N)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=N[0].length,parseInt(N[0],10)},m=this,w=function(){if(typeof r=="function"){y("m");var I=r.call(m,T.substring(E));return E+=I.length,I}return p("m")},u=function(I,U,z,H){for(var F=y(I,H)?z:U,N=0;N<F.length;N++)if(T.substr(E,F[N].length).toLowerCase()===F[N].toLowerCase())return E+=F[N].length,N+m.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof a=="function"){var I=y("M")?a.call(m,T.substring(E)):n.call(m,T.substring(E));return E+=I.length,I}return u("M",n,a)},_=function(){if(T.charAt(E)!==l.charAt(L))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,L=0;L<l.length;L++)if(g)l.charAt(L)!=="'"||y("'")?_():g=!1;else switch(l.charAt(L)){case"d":f=p("d");break;case"D":u("D",s,t);break;case"o":b=p("o");break;case"w":p("w");break;case"m":h=w();break;case"M":h=S();break;case"y":var C=L;v=!y("y",2),L=C,c=p("y",2);break;case"Y":c=p("Y",2);break;case"J":i=p("J")+.5,T.charAt(E)==="."&&(E++,p("J"));break;case"@":i=p("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":i=p("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":y("'")?_():g=!0;break;default:_()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(c===-1?c=this.today().year():c<100&&v&&(c+=d===-1?1900:this.today().year()-this.today().year()%100-(c<=d?0:100)),typeof h=="string"&&(h=o.call(this,c,h)),b>-1){h=1,f=b;for(var P=this.daysInMonth(c,h);f>P;P=this.daysInMonth(c,h))h++,f-=P}return i>-1?this.fromJD(i):this.newDate(c,h,f)},determineDate:function(l,T,x,d,s){x&&typeof x!="object"&&(s=d,d=x,x=null),typeof d!="string"&&(s=d,d="");var t=this;return T=T?T.newDate():null,l==null?T:typeof l=="string"?function(o){try{return t.parseDate(d,o,s)}catch{}for(var r=((o=o.toLowerCase()).match(/^c/)&&x?x.newDate():null)||t.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=n.exec(o);a;)r.add(parseInt(a[1],10),a[2]||"d"),a=n.exec(o);return r}(l):typeof l=="number"?isNaN(l)||l===1/0||l===-1/0?T:t.today().add(l,"d"):t.newDate(l)}})},69862:function(){},40964:function(){},72077:function($,R,e){var A=e(24696);$.exports=function(){return A(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(k){return typeof e.g[k]=="function"})}},40402:function($){$.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function($){$.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function($){$.exports=JSON.parse('["normal","italic","oblique"]')},15659:function($){$.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function($){$.exports=JSON.parse('["inherit","initial","unset"]')},41901:function($){$.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Ss={};function Ya($){var R=Ss[$];if(R!==void 0)return R.exports;var e=Ss[$]={exports:{}};return Pl[$].call(e.exports,e,e.exports,Ya),e.exports}return Ya.n=function($){var R=$&&$.__esModule?function(){return $.default}:function(){return $};return Ya.d(R,{a:R}),R},Ya.d=function($,R){for(var e in R)Ya.o(R,e)&&!Ya.o($,e)&&Object.defineProperty($,e,{enumerable:!0,get:R[e]})},Ya.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ya.o=function($,R){return Object.prototype.hasOwnProperty.call($,R)},Ya.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},Ya(27909)}()})})(gd);const vd=dd(lc),md=pd({__proto__:null,default:vd},[lc]);export{md as p};
